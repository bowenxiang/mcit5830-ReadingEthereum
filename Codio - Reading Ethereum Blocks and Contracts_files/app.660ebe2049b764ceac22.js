/*! For license information please see app.660ebe2049b764ceac22.js.LICENSE.txt */
(()=>{var __webpack_modules__={6057:(e,t,n)=>{"use strict";n(88541);var i=n(49721),s=n(84204),a=n(9380);const o=function(){var e=a.Z.get("code-beautifier"),t=a.Z.get("editor");return e.indent_char=t.use_tabs?"\t":" ",e.indent_size=t.tab_size,e};const r=class{constructor(){this._currentEditor=null}_getEditor(){const{currentEditor:e}=i.default;return null!==e?e.editor:null}processHotkey(){const e=this._getEditor();if(null===e)return!1;const t=e.getModel(),n=e.getSelections().filter((e=>!e.isEmpty())),i=0!==n.length;let s,a,r;i||(s=e.getPosition(),a=e.getScrollLeft(),r=e.getScrollTop(),n.push(t.getFullModelRange()));const c=n.map((e=>{const n=t.getValueInRange(e);return{range:e,text:this.format(n,o())}}));return e.executeEdits(c),i||(e.setPosition(s),e.setScrollPosition(r,a)),!0}format(e){return e}},c={js:s.js,json:s.js,html:s.html,htm:s.html,css:s.css};const l=class extends r{constructor(e){if(!Object.prototype.hasOwnProperty.call(c,e))throw e+" Not Supported";super(),this._type=e}format(e,t){return c[this._type](e,t)}};var d=n(93443),u=n(19575),h=n(30844),p=n(96486),f=n.n(p),m=["js","html","css","json","htm"],g="menu-item-beautify";function b(e,t){h.ZP.disableItem(g);var n=t.filename;if(n){var i=u.default.path.getFileExtension(n);f().includes(m,i)&&h.ZP.enableItem(g)}}d.Z.subscribe("tab:activated",b),d.Z.subscribe("tab:focus",b),d.Z.subscribe("command:code-beautifier:key_format_code",(function(e,t){if(i.default.currentProject&&!i.default.currentProject.readOnly){var n=!1;if(i.default.currentEditor){var s=i.default.currentEditor.filename;if(void 0!==i.default.currentEditor.filename){var a=u.default.path.getFileExtension(s);f().includes(m,a)&&(n=new l(a).processHotkey())}}!1===n&&(t.pass=!0)}})),d.Z.subscribe("command:code-beautifier:key_toggle:#param",(function(e){i.default.currentUser.isAnonymous()||a.Z.hotkey.execute("settings","update:user",{plugin:"code-beautifier",key:e.param,value:!a.Z.get("code-beautifier")[e.param]})}));const v={format:function(e,t){return new l(e).format(t)},AutoFormat:r},y=JSON.parse('{"name":"code-beautifier","description":"Autoformat for css, html, javascript"}'),w=JSON.parse('{"indent_level":{"default":0,"type":"int","desc":"Indent level"},"indent_with_tabs":{"default":false,"type":"boolean","desc":"Indent with tabs. Overrides indent char and indent size."},"navigate_within_soft_tabs":{"default":null,"type":"boolean","desc":"Navigate within soft tabs."},"preserve_newlines":{"default":false,"type":"boolean","desc":"Preserve line-breaks."},"max_preserve_newlines":{"default":5,"type":"int","desc":"Number of line-breaks to be preserved in one chunk."},"jslint_happy":{"default":false,"type":"boolean","desc":"Enable jslint-strict mode."},"brace_style":{"default":"collapse","type":"list","values":{"collapse":"collapse","expand":"expand","end-expand":"end-expand"},"desc":"Brace style."},"keep_array_indentation":{"default":false,"type":"boolean","desc":"Preserve array indentation."},"keep_function_indentation":{"default":false,"type":"boolean","desc":"Preserve function indentation."},"space_before_conditional":{"default":false,"type":"boolean","desc":"Space before conditional."},"break_chained_methods":{"default":false,"type":"boolean","desc":"Break chained method calls across subsequent lines."},"eval_code":{"default":false,"type":"boolean","desc":"Indent eval code."},"unescape_strings":{"default":false,"type":"boolean","desc":"Decode printable characters encoded in XNN notation."},"wrap_line_length":{"default":0,"type":"int","desc":"Wrap lines at next opportunity after N characters."},"indent-scripts":{"default":"normal","type":"list","values":{"keep":"keep","separate":"separate","normal":"normal"},"desc":"Indent scripts."}}'),_=JSON.parse('{"key_format_code":{"key":{"win":"Ctrl+Shift+B","mac":"Cmd+Shift+B"},"desc":"Format the code."},"key_toggle:jslint_happy":{"desc":"Strict linting: Toggle."},"key_toggle:keep_array_indentation":{"desc":"Preserve array indentation: Toggle."},"key_toggle:keep_function_indentation":{"desc":"Preserve function indentation: Toggle."},"key_toggle:space_before_conditional":{"desc":"Space before conditional: Toggle."},"key_toggle:break_chained_methods":{"desc":"Break chained methods calls across lines: Toggle."},"key_toggle:eval_code":{"desc":"Indent eval code: Toggle."},"key_toggle:unescape_strings":{"desc":"Decode printable characters in XNN notation: Toggle."}}');var k={};k.info=y,k.settings=w,k.hotkeys=_,k.get=async function(){return v},i.default.register(k);const P=JSON.parse('{"name":"codio-filetree","description":"Filetree viewer","codio":{"global":true,"noFullscreen":true,"noFile":true,"urls":"filetree","title":"Filetree"}}'),C=JSON.parse('{"tree_items_limit":{"type":"int","default":150,"desc":"Maximum items in tree level"},"show_dot_files":{"type":"boolean","default":true,"desc":"Ability to show(hide) dotfiles, exclude codio specific"}}');var x=n(52308),E=n.n(x),S=n(177),I=n.n(S),A=n(55637),T=n(85886);var j=d.Z.create(n(43380));const Z=I().compile('<div class="project-info" xmlns="http://www.w3.org/1999/html">\n  <div class="title">\n    <div class="owner-info">\n      <a\n        href="/{{project.owner.name}}"\n        class="owner"\n        data-target="dashboard"\n      >\n        {{project.owner.name}}<span class="sr-only"> dashboard</span>\n      </a>\n      <span class="ss-icon{{#unless project.readOnly}} hide{{/unless}} readonly-status" title="This project is read only.">writingdisabled</span>\n    </div>\n    <h4 class="name">{{project.name}}</h4>\n  </div>\n\n  <div class="icons">\n    <div class="icons-container">\n      <span class="{{#if project.readOnly}}hide{{/if}} re-synchronise icon-container">\n        <button\n          class="refresh-button info-command"\n          aria-label="Re-synchronise the tree"\n          title="Re-synchronise the tree"\n          data-cmd="syncStructure"\n        >\n          <span class="iconify" data-icon="@codio:mdi:autorenew"></span>\n        </button>\n      </span>\n      <span class="{{#unless project.isAdmin}}hide{{/unless}} open-terminal icon-container">\n        <button\n          class="terminal info-command"\n          title="Open Terminal"\n          data-cmd="openTerminal"\n          aria-label="Open Terminal"\n        >\n          <span class="iconify" data-icon="@codio:mdi:console"></span>\n        </button>\n      </span>\n      <span class="open-guides {{#if hideGuidesIcon}}hide{{/if}} icon-container">\n        <button\n          class="guides info-command"\n          title="Open Guides {{#if onlyPlayGuides}}Player{{else}}Editor{{/if}}"\n          data-cmd="{{#if onlyPlayGuides}}openGuidesPlayer{{else}}openGuidesEditor{{/if}}"\n          aria-label="Open Guides {{#if onlyPlayGuides}}Player{{else}}Editor{{/if}}"\n        >\n          {{#if onlyPlayGuides}}\n            <span class="iconify" data-icon="@codio:mdi:play"></span>\n          {{else}}\n            <span class="iconify" data-icon="@codio:mdi:pencil-outline"></span>\n          {{/if}}\n        </button>\n      </span>\n      {{#if project.isFork}}\n      <span class="icon-container">\n        <button\n          class="info-command"\n          data-cmd="openParent"\n          {{#if project.parent.ownerId}}\n          title="Copied from {{project.parent.owner}}/{{project.parent.name}}"\n          {{/if}}\n          aria-label="Go to copy source"\n        >\n          <span class="iconify" data-rotate="90deg" data-icon="@codio:mdi:directions-fork"></span>\n        </button>\n      </span>\n      {{/if}}\n      <span class="{{#unless project.isAdmin}}hide{{/unless}} restart-box icon-container">\n        <button\n          class="restart-box info-command"\n          title="Restart Box"\n          data-cmd="restartBox"\n          aria-label="Restart Box"\n        >\n          <span class="iconify" data-icon="@codio:mdi:restart"></span>\n        </button>\n      </span>\n    </div>\n  </div>\n\n</div>\n'),O=function(e,t){this.container=e,this.project=t,this.fragment=null,this.appended=!1},N=O.prototype;N.render=function(){const e=this.project,t=e.eduStartedAssignmentInfo,n=A.ZP.isGuidesExist(),i=t||e.readOnly;this.fragment=E()(Z({project:this.project,hideGuidesIcon:i&&!n,onlyPlayGuides:i},{allowProtoMethodsByDefault:!0,allowProtoPropertiesByDefault:!0})),this.appended||(D(this.fragment),this.container.prepend(this.fragment),this.appended=!0)},N.remove=function(){this.fragment.remove(),this.appended=!1};const D=function(e){const t=e.find(".info-command");d.Z.on(t,"click",(function(e){e.preventDefault();var t=E()(e.target).closest(".info-command").data("cmd");t&&t.length>0&&j[t]()}))};function M(e){const t=i.default.currentProject;"name"===e&&E()(".project-info .name").attr("title",t.name).text(t.name)}d.Z.subscribe("project:preferencesUpdated:#projectId",(function(e,t){i.default.currentProject&&i.default.currentProject.guid===e.projectId&&f().forEach(t,M)})),d.Z.subscribe("project:permissionsUpdated:#projectId",(function(){if(i.default.currentProject){const e=E()(".project-info .readonly-status"),t=E()(".project-info .re-synchronise");i.default.currentProject.readOnly?(e.removeClass("hide"),t.addClass("hide")):(e.addClass("hide"),t.removeClass("hide"));const n=E()(".project-info .open-terminal");i.default.currentProject.isAdmin?n.removeClass("hide"):n.addClass("hide")}}));var R,L;R=T.default.GUIDES_FOLDER,L=()=>{const e=i.default.currentProject;if(!e)return;const t=e.eduStartedAssignmentInfo,n=A.ZP.isGuidesExist(),s=t||e.readOnly,a=E()(".project-info .open-guides");s&&!n?a.addClass("hide"):a.removeClass("hide")},f().each(["item:created:","item:deleted:"],(e=>{d.Z.subscribe(e+R,L)}));const F=O,B=I().compile('<div id="tree-bar">\n  <div id="tree-bar-inner"></div>\n  <div id="tree-progress"></div>\n</div>\n'),U=function(e,t){this.container=e,this.project=t,this.fragment=null,this.appended=!1;const n=this;this.changeHandler=d.Z.subscribe("project:permissionsUpdated:#projectId",(function(){n.remove(),n._isReadOnly()||n.render()}))},q=U.prototype;q._isReadOnly=function(){if(!i.default.currentProject)return!0;var e=i.default.currentProject.access.control;return!("OWNER"===e||"WRITE_FILES"===e||"ADMIN"===e)},q.close=function(){d.Z.unsubscribe(this.changeHandler),this.remove()},q.render=function(){this.fragment=E()(B(this.project)),this.appended||this._isReadOnly()||(this.container.append(this.fragment),this.appended=!0)},q.remove=function(){this.fragment&&this.fragment.remove(),this.appended=!1};const H=U;var G=n(70243),W=n(6229);const z=d.Z.create(n(43380));var V={};const K=function(e,t,n){var i=G.Z.getTreeNodeByPath(e,t);i&&e.set_icon(i.id,n)};function J(e,t){z.iconClick({plugin:e},t)}function Y(e,t){f().forOwn(t,(function(t,n){f().forOwn(t,(function(t,i){K(e,i,t.iconClass,J.bind(null,n,t))}))}))}const Q={setIcons:function(e,t,n){!0!==n&&f().isEqual(t,V)||(!function(e){f().forOwn(V,(function(t){f().forOwn(t,(function(t,n){K(e,n,"")}))}))}(e),Y(e,t),V=f().cloneDeep(t))},setIcon:K,clean:function(){V={}},updateNodeIconTitle:function(e,t,n){const i=G.Z.getTreeNodeByPath(e,t);e.get_node(i.id,!0).find("#".concat(i.id,"_anchor")).attr("title",n)}};var X=null,$=[];function ee(e){X=e}var te={};var ne=f().debounce((function(e){if(e&&ee(e),X&&X.element){var t=$;$=[],f()(t).sortBy("seq").forEach((function(e){"add"===e.type?function(e,t,n){te[e]=te[e]||{show:[],hide:[]},f().isUndefined(n)?te[e].base=t:(f().isArray(n)||(n=[n]),t="show"===t?"show":"hide",te[e][t]=f().union(te[e][t],n))}(e.plugin,e.filter,e.path):function(e,t,n){f().isUndefined(t)&&f().isUndefined(n)?delete te[e]:f().remove(te[e],{type:t,path:n})}(e.plugin,e.filter,e.path)}));var n,i=(n=f().some(te,{base:"hide"}),f().some(te,{base:"show"})||!n?"show":"hide"),s=function(e){var t=se(e),n=f().union.apply(f(),f().map(te,t)),i=f().union.apply(f(),f().map(te,e));return i.unshift(n),f().without.apply(f(),i)}(i);!function(e,t,n){n=f().map(n,(e=>f().trim(e,"/")));var i=e.get_json(),s=se(t);const o=a.Z.get("codio-filetree").show_dot_files;function r(e,i,a){f().each(e.children,(function(e){var c=i+(""!==i?"/":"")+e.text;const l=""===i&&f().includes(oe,e.text);if(o||!f().startsWith(e.text,".")||l)if(f().isUndefined(a)){var d=f().some(n,(h=c,function(e){return e===h||f().startsWith(e,h+"/")})),u=d?s:t;ae(e,u),r(e,c,f().includes(n,c)?u:void 0)}else ae(e,a),r(e,c,a);else ae(e,"hide"),r(e,c,a);var h}))}f().isArray(i)&&i.length>0&&r(i[0],"")}(X,i,s)}}),150);function ie(e,t){t.type=e,$.push(t),ne()}function se(e){return"show"===e?"hide":"show"}function ae(e,t){"show"!==t!==!!e.state.hidden&&X[t+"_node"](e.id)}const oe=[".settings",".codio",".codio-jupyter",".guides",".authorunitignore",".authorassignmentignore",".unitignore",".assignmentignore",".codio-menu",".codioignore",".codioJUnit"];const re={setTree:ee,refresh:ne,open:function(e,t){var n=e.path;t&&t.path&&(n=t.path),X&&function(e,t){var n=e;f().isArray(e)||(n=e.split(";"));f().each(n,(function(e){0!==(e=f().trim(e)).length&&t&&t(e)}))}(n,(function(e){G.Z.openNodesByPaths(X,e)}))},close,addVisibilityFilter:ie.bind(null,"add"),removeVisibilityFilter:ie.bind(null,"remove")};var ce=n(11533),le=n.n(ce),de=d.Z.create(n(43380));const ue=le().create();var he=[],pe=[],fe=0,me=null,ge={},be=null,ve=null;let ye;function we(e){return function(t,n){if(!G.Z.getTreeNodeByPath(e,t.path)){var i=u.default.path.parse(t.path),s=G.Z.getTreeNodeByPath(e,i.dir),a=f().isNumber(n),o={text:i.name,type:a?W.Z.TYPE.FILE:W.Z.TYPE.DIR};a||(o.children=_e(n),o.state={opened:!1}),e.create_node(s,o),e.settings.dnd.blocker&&(fe>=0&&fe++,f().delay((function(){fe>0&&fe--,0===fe&&(e.get_container()&&e.get_container().unblock(),e.settings.dnd.blocker=!1)}),400)),re.refresh(e)}}}function _e(e){var t=[],n=[];return f().each(e,(function(e,i){var s=f().isNumber(e),a={text:i.replace(/ï¼Ž/g,"."),type:s?W.Z.TYPE.FILE:W.Z.TYPE.DIR};s?t.push(a):(a.children=_e(e),a.state={opened:!1},n.push(a))})),f().union(n,t)}function ke(e){return function(t){var n=G.Z.getTreeNodeByPath(e,t.path);e.delete_node([n])}}var Pe=0;function Ce(e){return function(t,n){var s=G.Z.getTreeNodeByPath(e,t.from),a=G.Z.getParentPath(t.to),o=G.Z.getTreeNodeByPath(e,a);if(s&&o&&o.state.loaded)s.parent===o.id?(e.rename_node(s,f().last(t.to.split("/"))),G.Z.onSelectionChanged({instance:e,node:s})):(n&&(s.text=u.default.realName(n)),e.move_node(s,o,0,(function(t){n&&e.rename_node(t,u.default.realName(n))})));else if(o&&o.state.loaded&&i.default.currentProject.exists(t.to)){var r=i.default.currentProject.getFileInfo(t.to);we(e)({path:t.to},"file"===r.type?0:{})}else s&&ke(e)({path:t.from});!function(){for(var t=e.get_state().core.open,n=0;n<t.length;n++){var i=e.get_node(t[n]);0===i.children.length&&i.state&&(e._model.data[i.id].children.length=0,e._model.data[i.id].state.loaded=!0,e._model.data[i.id].state.opened=!1)}}(),e.settings.dnd.blocker&&(Pe>=0&&Pe++,f().delay((function(){Pe>0&&Pe--,0===Pe&&(e.get_container()&&e.get_container().unblock(),e.settings.dnd.blocker=!1,re.refresh(e))}),400)),re.refresh(e)}}function xe(e){be=G.Z.getOpenedNodesPaths(e,ge),ve=G.Z.getSelectedNodesPaths(e),Q.clean();var t=!1;f().each(ge,(function(n,s){var a="/"===s,o=G.Z.getLevelByPath(i.default.currentProject,a?"":s);if(o){if(ue.diff(n,o))if(a)t=!0;else{var r=G.Z.getTreeNodeByPath(e,a?"":s);r?e.refresh_node(r):t=!0}}else delete ge[s]})),t&&e.refresh(!0),f().defer((function(){de.redrawn(),re.refresh(e)}))}function Ee(e){var t=pe;t.length>20?me?me():xe(e):f().each(t,(function(t){switch(t.action){case"insert":we(e).apply(null,t.args);break;case"remove":ke(e).apply(null,t.args);break;case"move":Ce(e).apply(null,t.args)}})),pe=[]}function Se(){f().forEach(he,(function(e){d.Z.unsubscribe(e)})),ye&&(ye.cancel(),ye=null),me&&(me.cancel(),me=null),he=[]}const Ie={init:function(e){Se();var t=f().bind(he.push,he);ye=f().debounce(Ee.bind(this,e),150,{maxWait:6e4}),t(d.Z.subscribe("item:created:#path",(function(){pe.push({action:"insert",args:arguments}),ye&&ye()}))),t(d.Z.subscribe("item:deleted:#path",(function(){pe.push({action:"remove",args:arguments}),ye&&ye()}))),t(d.Z.subscribe("item:moved:#from:#to",(function(){pe.push({action:"move",args:arguments}),ye&&ye()}))),t(d.Z.subscribe("settings:changed",(function(){re.refresh(e)}))),me=f().debounce(xe.bind(this,e),250,{maxWait:6e4}),t(d.Z.subscribe("project:fileStructure:updated",me)),t(d.Z.subscribe("share:redraw",me)),e.settings.core.data=function(t,n){var s=G.Z.getPath(e,t),a=G.Z.getTreeLevelByPath(i.default.currentProject,s,be,ve),o=G.Z.getLevelByPath(i.default.currentProject,s);f().each(o,(function(e){e.dir&&(ge[(s?s+"/":"")+e.name]=!1)})),ge[s||"/"]=o,n.call(this,a)},e.refresh()},clean:Se};var Ae=n(34391),Te=n(95611);var je=n(97137);const Ze=I().compile('<form action="/" method="post" onsubmit="return false;">\n\n  <label for="current-path">Current path</label>\n  <input type="text" id="current-path" maxlength="100" readonly value="{{currentPath}}">\n\n  <label for="item-name">{{itemName}} name</label>\n  <input type="text" id="item-name" name="name" autocomplete="off" required autofocus placeholder="Enter the name of the new {{tolower itemName}}{{#unless notFile}}, including the extension{{/unless}}"  maxlength="100">\n\n  <div class="ac-window-prompt-rule"></div>\n</form>\n'),Oe=I().compile('<form action="/" method="post">\n  <p>\n    Use the form below to rename the {{type}} <code>{{path}}</code>.\n  </p>\n\n  <label for="item-name">New Name</label>\n  <input type="text" name="name" id="item-name" required autofocus\n         placeholder="The {{type}} name" value="{{name}}" maxlength="100">\n\n</form>\n'),Ne=I().compile("<p>\n  {{{description}}}\n</p>\n<p>\n  Deleting this {{temp}} is permanent and cannot be undone. Are you sure you want to delete it?\n</p>\n"),De=I().compile('<form action="/" method="post">\n\n  <p>\n    The file with name\n    <code>{{name}}</code>  already exists in\n    <code>{{parentPath}}  </code>\n    Do you want to Rename it?\n  </p>\n\n  <label for="item-name">New Name</label>\n  <input type="text" name="name" id="item-name" required autofocus placeholder="The {{type}} name={{name}}" value="{{name}}" maxlength="100">\n\n</form>\n');var Me=a.Z.hotkey,Re=d.Z.create(n(10270)),Le=n(2774).fs,Fe=n(2774).zI,Be={path:"",type:""},Ue=[Be],qe=!1;function He(e){if(e||Be.type===Le.FILE){var t=Be.path.split("/");return t.pop(),t.join("/")}return Be.path}function Ge(e,t,n,s,a){n=!f().isUndefined(n)&&n;var o=e;if(t&&(o=t+"/"+o),!u.default.isItemNameValid(e))return"Name must only contain alphanumeric characters, hyphens and underscores.";var r=i.default.currentProject.getFileInfo(o),c=!!a&&-1!==a.indexOf(o);if(r||c){if(n){var l=u.default.path.parse(s);if(r&&l.name.toLowerCase()===r.name.toLowerCase()&&l.name!==r.name)return!1}return"An item with that name "+e+" already exists."}return!1}function We(e,t,n){var s=He(),a=n!==Le.FILE?"Folder":"File",o=E()(Ze({notFile:n!==Le.FILE,itemName:a,currentPath:s||"Root folder"})),r=o.find("#item-name"),c=new Ae.Z({title:e,content:o,buttons:Ae.Z.MB_OKCANCEL,focusOn:o.find("#item-name").focus(),icon:n===Le.FILE?"file":"folder",onShow:function(){var e=this;r.on("keyup",(function(t){!t||13!==t.keyCode||t.metaKey||t.ctrlKey||e.close(Ae.Z.IDOK)}))},onClose:function(e){if(e===Ae.Z.IDOK){var t=c.content().find("#item-name"),a=E().trim(t.val()),o=Ge(a,s);if(o)return u.default.addErrorToInput(t,o),!1;t.off("keyup");var r=u.default.path.makePath(s,a),l=n===Le.FILE?"createFile":"createFolder";i.default.currentProject[l](a,s).then((function(){ze(n,r)})).catch((e=>{let{message:t}=e;return je.Z.error(t)}))}}})}function ze(e,t){f().delay((function(){Re.selectTreeItem({path:t})}),200),e===Le.FILE&&Me.execute("file","open",{ext:"tree",filename:t})}function Ve(){We("Create New File",0,Le.FILE)}function Ke(e){return u.default.path.parse(e).name}function Je(e,t,n,i,s){var a=t.item,o={action:Fe.SKIP_ALL},r=E()(De({type:a.type,parentPath:e,name:a.name})),c=new Ae.Z({title:n+" "+a.type,buttons:[{title:"Rename",type:1,onClick:function(){return c.close(Fe.RENAME)}},{title:"Skip",onClick:function(){return c.close(Fe.SKIP)}},{title:"Skip All",onClick:function(){return c.close(Fe.SKIP_ALL)}}],content:r,onShow:function(){this.content().find("#item-name").focus()},onHide:function(){i&&i(o)},onClose:function(t){switch(o={action:t},t){case Ae.Z.IDCANCEL:o={action:Fe.SKIP_ALL};break;case Fe.RENAME:var n=this.content().find("#item-name"),i=E().trim(n.val()),a=Ge(i,e,void 0,void 0,s.paths);if(a)return u.default.addErrorToInput(n,a),!1;o={action:Fe.RENAME,name:i}}return!0}})}function Ye(e,t){f().each(t,(function(e){e.item.name=function(e,t){for(var n=t,s="",a=u.default.path.parse(e.path),o=u.default.path.getFileName(a.name),r=1;r<64;r++){s=e.type!==Le.FILE?e.item.name+=n:o+n+"."+a.extension;var c=""===a.dir?s:a.dir+"/"+s;if(!i.default.currentProject.getFileInfo(c))break;n+=t}return s}(e,"-copy")}));var n=[],s=[];f().each(t,(function(t){n.push(t.path);var i=""===e?t.item.name:e+"/"+t.item.name;s.push(i)})),i.default.currentProject.copyItems(n,s).then((function(){ze(t[0].type,s[0])})).catch((e=>{let{message:t}=e;je.Z.error(t),Re.unblockTree()}))}d.Z.subscribe("command:ide:new_file",(function(){if(i.default.currentProject&&!i.default.currentProject.readOnly)return Ve()})),d.Z.subscribe("command:ide:new_folder",(function(){i.default.currentProject&&!i.default.currentProject.readOnly&&We("Create New Folder",0,Le.DIR)})),d.Z.subscribe("command:ide:rename_item",(function(){i.default.currentProject&&!i.default.currentProject.readOnly&&Te.Z.saveAllAndWait().then((function(){!function(e,t){if(""!==e){var n=E()(Oe({type:t,path:e,name:Ke(e)})),s="Rename ";t===Le.FILE?s+="file":s+="folder",new Ae.Z({title:s,buttons:Ae.Z.MB_OKCANCEL,content:n,icon:t===Le.FILE?"file":"folder",onShow:function(){this.content().find("#item-name").focus()},onClose:function(t){if(t===Ae.Z.IDOK){var n=He(!0),s=this.content().find("#item-name"),a=E().trim(s.val()),o=Ge(a,n,!0,e);if(o)return u.default.addErrorToInput(s,o),!1;i.default.currentProject.renameItem(e,u.default.path.makePath(n,a)).catch((e=>{let{message:t}=e;return je.Z.error(t)}))}}})}}(Be.path,Be.type)}))})),d.Z.subscribe("command:ide:delete_item",(function(){i.default.currentProject&&!i.default.currentProject.readOnly&&(qe||Te.Z.saveAllAndWait().then((function(){!function(e){var t=(e=f().filter(e||[],(function(e){if(""!==e.path||"app"!==e.type)return e}))).length;if(0!==t){var n;qe=!0,n=1===t?"You are about to delete the "+e[0].type+': "<code>'+f().escape(e[0].path)+'</code>".':"You are about to delete "+e.length+" items.";for(var s=1!==t?"items":"item",a=[],o=0;o<t;o++)a.push(e[o].path);Ae.Z.showConfirm({description:Ne({description:n,temp:s}),onHide:function(){qe=!1},onClose:function(e){e&&i.default.currentProject.deleteItems(a).catch((e=>{let{message:t}=e;return je.Z.error(t)})),qe=!1}})}}(Ue)})))})),d.Z.subscribe("filetree:move",(function(e,t){i.default.currentProject&&!i.default.currentProject.readOnly&&Te.Z.saveAllAndWait().then((function(){!function(e,t){for(var n=[],s=[],a=[],o=0,r=t.length;o<r;o++){var c=Ke(t[o].path),l=""===e?c:e+"/"+c;i.default.currentProject.getFileInfo(l)?n.push(t[o]):s.push(t[o])}var d=function(e,t){var n=[],s=[];f().each(t,(function(t){n.push(t.path);var i=""===e?t.item.name:e+"/"+t.item.name;s.push(i)})),i.default.currentProject.moveItems(n,s).catch((e=>{let{message:t}=e;je.Z.error(t),Re.unblockTree()}))};if(0===n.length)d(e,s);else{var u=function(){if(0===n.length)0!==s.length?d(e,s):Re.unblockTree();else{var t=n.shift();Je(e,t,"Move",(function(i){switch(i.action){case Fe.RENAME:t.item.name=i.name,s.push(t);var o=e?e+"/":"";a.push(o+i.name);break;case Fe.SKIP_ALL:n=[];break;case Fe.OVERWRITE:s.push(t);break;case Fe.OVERWRITE_ALL:s.push(t),s=s.concat(n),n=[]}u()}),{paths:a})}};u()}}(t[0],t[1])}))})),d.Z.subscribe("filetree:select",(function(e,t){0!==t.length&&(Be.path=t[0].path,Be.type=t[0].type),Ue=t})),d.Z.subscribe("filetree:paste",(function(e,t){if(i.default.currentProject&&!i.default.currentProject.readOnly){var n=t[0],s=t[1];Te.Z.saveAllAndWait().then((function(){!function(e,t){for(var n=[],s=[],a=[],o=0,r=t.length;o<r;o++){var c=Ke(t[o].path);if(i.default.currentProject.getFileInfo(t[o].path)){var l=""===e?c:e+"/"+c;i.default.currentProject.getFileInfo(l)?n.push(t[o]):s.push(t[o])}}var d=function(e,t){var n=[],s=[];f().each(t,(function(t){n.push(t.path);var i=""===e?t.item.name:e+"/"+t.item.name;s.push(i)})),i.default.currentProject.copyItems(n,s).catch((e=>{let{message:t}=e;Re.unblockTree(),je.Z.error(t)}))};if(0===n.length&&s.length>0)d(e,s);else{var u=function(){if(0===n.length)0!==s.length?d(e,s):Re.unblockTree();else{var t=n.shift();Je(e,t,"Copy",(function(i){switch(i.action){case Fe.RENAME:t.item.name=i.name,s.push(t);var o=e?e+"/":"";a.push(o+i.name);break;case Fe.SKIP_ALL:n=[];break;case Fe.OVERWRITE:s.push(t);break;case Fe.OVERWRITE_ALL:s.push(t),s=s.concat(n),n=[]}u()}),{paths:a})}};u()}}(n,s)}))}})),d.Z.subscribe("filetree:duplicate",(function(e,t){if(i.default.currentProject&&!i.default.currentProject.readOnly){var n=t[0],s=t[1];Te.Z.saveAllAndWait().then((function(){Ye(n,s)}))}})),d.Z.subscribe("project:item:created:#path",(function(e,t){Re.itemCreated({path:e.path},t)})),d.Z.subscribe("project:item:deleted:#path",(function(e){Re.closeByPath({path:e.path},{force:!0,recursive:!0}),Re.itemDeleted({path:e.path})})),d.Z.subscribe("project:item:moved:#from:#to",(function(e,t){!function(e,t,n,i){Re.tabRename({from:e,to:t},{recursive:n,saveLayout:i})}(e.from,e.to,!0),Re.itemMoved({from:e.from,to:e.to},t)}));const Qe={createFile:Ve,validateItem:Ge};const Xe=function(){this.draw=function(e){var t=E()("<span/>");return t.text(e.name),t}};function $e(e){var t=E()("<img>"),n=new FileReader;return n.onload=function(e){t.attr("src",e.target.result)},n.readAsDataURL(e),t}const et=function(){this.draw=$e};function tt(e){var t=E()("<span/>");return t.text("Dir: "+e.name),t}const nt=function(){this.draw=tt};var it=n(54565),st=n(34766),at=n.n(st),ot=n(92176);const rt={},ct=async e=>{if(rt[e]&&rt[e].expiration<=new Date&&delete rt[e],!rt[e]){const t=it.Z.get("s3options");if(!t)throw new Error("S3 configuration not found");const n=t[e],i=await(0,ot.s)({clientConfig:{region:n.region},identityPoolId:n.identityPoolId})();rt[e]=new(at())({apiVersion:"2006-03-01",params:{Bucket:n.upload_bucket},region:n.region,credentials:i}),i.expiration&&(rt[e].expiration=i.expiration)}return rt[e]};async function lt(e,t,n,i){const s=await ct(e);if(!t)return null;let a=s.upload({Key:"cognito_uploads/"+n,Body:t},(()=>{a=null}));return i&&a.on("httpUploadProgress",(e=>{const t=Math.round(e.loaded/e.total*100);i(t)})),{promise:a.promise(),abort:()=>{a&&a.abort()}}}var dt={};const ut=I().compile('<div class="file-item">\r\n    <span class="delete" title="Remove file" aria-label="Remove file">\r\n        <span class="iconify-inline" data-icon="@codio:mdi:trash-can-outline"></span>\r\n    </span>\r\n    <div class="progress-bar"></div>\r\n</div>\r\n')();var ht,pt=I().compile('<div class="multi-upload dnd-handler">\r\n    <div class="not-supported">Sorry, but uploading requires the HTML5 File API. These require a modern browser. Please ensure that you are using one of the latest browsers.</div>\r\n    <h4 class="multi-upload-destination">Destination Folder: {{basePath}}</h4>\r\n    <div class="workarea"></div>\r\n    <div class="dnd">\r\n        <h4 class="drop-title">Drag and drop files here or</h4>\r\n        <div class="file-selection">\r\n            <input class="file-select visuallyhidden" type="file" multiple tabindex="-1">\r\n            <button class="btn file-select-btn">browse for files...</button>\r\n        </div>\r\n        {{#if dirUploadSupport}}\r\n        <div class="folder-selection">\r\n            <input class="folder-select visuallyhidden" type="file" webkitdirectory directory tabindex="-1">\r\n            <button class="btn folder-select-btn">browse for files from folder...</button>\r\n        </div>\r\n        {{/if}}\r\n    </div>\r\n</div>\r\n'),ft="defaultUpload",mt="loading",gt="loaded",bt="error",vt="abort",yt=!(!window.File||!window.FileReader);function wt(){if(this.workarea){var e=this.workarea.children(),t=0;e.each((function(e,n){E()(n).data("state")!==mt&&t++})),t>=e.length&&St.call(this)}}function _t(e){var t=!1;return f().each(this.preventUploadList,(function(n){0===e.indexOf(n)&&(t=!0)})),t}function kt(e){if(e.item.data("path",e.path),!e.isDirectory&&!_t.call(this,e.path+"/"+e.name)){var t=e.item.data("item");if(t){var n=t.size||t.fileSize;if(void 0!==n&&n>it.Z.get("fileUploadLimit")){var i={file:t.name,message:"The file is too big"};return Ct.call(this,bt,i,e.item),void Bt.call(this,e.path,t.name)}var s=e.name,a=u.default.path.getFileExtension(s),o=e.path,r={name:s,extension:a,path:o,state:mt};xt.call(this,e.item,t,r,o).catch((e=>je.Z.error(e.message)))}}}function Pt(e,t,n){n.data("state")!==vt&&n.data("state",e),n.data("msg",t);var i=n.data("lastState"),s="state-"+e;i&&n.removeClass(i),n.addClass(s),n.data("lastState",s)}function Ct(e,t,n){Pt(e,t,n),wt.call(this)}async function xt(e,t,n,s){const a=this,o=e.find(".progress-bar")[0];function r(){const t=e.data();delete t.abort,e.data(t)}function c(e){o.style.width=e+"%",o.innerHTML=parseInt(e,10)+"%"}const l="".concat(u.default.GUID(),".tmpfile");function d(t){r(),t=t&&t.message?t.message:t;const i={file:n.name,message:t};Ct.call(a,bt,i,e),Ut.call(a,{path:s,name:n.name})}const h=await lt("upload",t,l,(e=>{c(e-e/10>>0)}));n.abort=h.abort,e.data(n),h.promise.then((t=>{c(90),function(e,t){return i.default.currentProject.uploadFromS3File(u.default.path.makePath(s,n.name),e,t)}(t.Bucket,t.Key).then((t=>{t?(r(),c(100),Et.call(a,s,n),Ct.call(a,gt,void 0,e)):d("Unexpected error")})).catch((e=>{let{message:t}=e;return d(t)}))})).catch((e=>d(e)))}function Et(e,t){var n=u.default.path.makePath(e,t.name);this.params&&this.params.onFileUploaded&&this.params.onFileUploaded(n,{name:t.name,extension:t.extension})}function St(){var e=this.workarea.children(),t=!1,n={},i="";if(e.each((function(e,i){var s=E()(i).data("state"),a=E()(i).data("error-shown");if(s===bt&&!a){var o=E()(i).data("msg");o&&(t=!0,n[o.message]?n[o.message]=n[o.message]+"<div>"+o.file+"</div>":n[o.message]="<div>"+o.file+"</div>"),E()(i).data("error-shown",!0)}})),t){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i+=s+"<br/><div>"+n[s]+"</div><br/>");je.Z.error(i)}this.params&&this.params.onFilesUploaded&&this.params.onFilesUploaded()}function It(e){for(var t=u.default.promise.deferred(),n=!0,i=async function(){if(!n)return Promise.reject(new Error("Upload prepare failed"));for(var i=!0,s=0;s<e.length;s++){const t=await u.default.promise.getState(e[s]);i=i&&t===u.default.promise.STATES.FULFILLED}i&&t.resolve()},s=function(e){n=!1,t.reject(e)},a=0;a<e.length;a++)e[a].then(i).catch(s);return t.promise}function At(e){for(var t=[],n=[],i=0;i<e.length;i++)n.push(e[i]),t.push(n.join("/"));return t}function Tt(e){var t,n,i=this,s=i.workarea;i.buffItems=E()("<div/>");var a="",o=[];for(t=0;t<e.length;t++){if((n=e[t]).webkitRelativePath)for(var r=At((a=n.webkitRelativePath.replace(/\/[^\/]+$/,"")).split("/")),c=0;c<r.length;c++){var l=r[c];if(!f().includes(o,l)){o.push(l);var d=l.split("/"),u={name:d[d.length-1],isDirectory:!0};d.splice(d.length-1),Dt.call(i,u,d.join("/"))}}""===n.type&&0===n.size||4096===n.size&&""===n.type?n.name:Nt.call(i,n,a)}s.append(i.buffItems.children());var h=[];Lt.call(i,i.queue,h,(function(){for(var e=0,t=h.length;e<t;e++)kt.call(i,h[e])}))}function jt(){this.workarea.block()}function Zt(){this.workarea.unblock()}function Ot(e){var t,n,i,s=this;jt.call(s);var a=s.workarea;s.buffItems=E()("<div/>");var o=[],r={dirArray:[]};for(t=0;t<e.length;t++)if(n=e[t],!f().isUndefined(n.webkitGetAsEntry)){if(null===(i=n.webkitGetAsEntry()))continue;i.isFile?o.push(Nt.call(s,n.getAsFile(),"")):i.isDirectory&&o.push(Rt.call(s,i,"",r))}It.call(s,o).then((function(){a.append(s.buffItems.children()),Zt.call(s);var e=[];Lt.call(s,s.queue,e,(function(){for(var t=0,n=e.length;t<n;t++)kt.call(s,e[t])}))})).catch((function(){Zt.call(s)}))}async function Nt(e,t){var n,i,s=this;for(var a in dt)if(a!==ft&&e.type.match(a)){n=dt[a].draw(e);break}n||(n=dt[ft].draw(e)),(i=E()(ut)).data("item",e),i.data("path",t),n.addClass("preview"),n.attr("title",e.name),i.append(n),s.buffItems.append(i),s.queue.push(i),Pt.call(s,mt,void 0,i)}function Dt(e,t){var n,i,s=this;n=dt.directory.draw(e),(i=E()(ut)).data("item",e),i.data("path",t),i.data("name",e.name),n.addClass("preview"),n.attr("title","Dir: "+e.name),i.append(n),s.buffItems.append(i),s.queue.push(i),Pt.call(s,gt,void 0,i)}function Mt(e,t,n){var i=u.default.promise.deferred(),s=this,a=function(){i.resolve()},o=function(e){i.reject(e)};if(e.length>0){var r=e[0];e.shift(),r.isFile?r.file((function(i){Nt.call(s,i,t),Mt.call(s,e,t,n).then(a).catch(o)})):r.isDirectory&&Rt.call(s,r,t,n).then((function(){Mt.call(s,e,t,n).then(a).catch(o)})).catch(o)}else i.resolve();return i.promise}function Rt(e,t,n){for(var i=u.default.promise.deferred(),s=e.createReader(),a=this,o=At((t+"/"+e.name).replace(/^\//,"").split("/")),r=0;r<o.length;r++){var c=o[r];if(!f().includes(n.dirArray,c)){n.dirArray.push(c);var l=c.split("/"),d={name:l[l.length-1],isDirectory:!0};l.splice(l.length-1),Dt.call(a,d,l.join("/"))}}return s.readEntries((function(s){0===s.length?i.resolve():Mt.call(a,s,(t+"/"+e.name).replace(/^\//,""),n).then((function(){i.resolve()})).catch((function(e){i.reject(e)}))}),(function(){})),i.promise}function Lt(e,t,n){if(0===e.length)n&&n();else{var i=this,s=function(){Lt.call(i,e,t,n)},a=e.shift(),o=a.data("item");if(o){var r=a.data("path"),c=o.name,l=u.default.path.getFileExtension(o.name),d={name:c,extension:l,state:mt,isDirectory:o.isDirectory,path:r};this.params&&this.params.onFilePrepareUpload(d,(function(e){t.push({item:a,path:e,name:c,isDirectory:o.isDirectory}),s()}),(function(e){var t=e&&{message:e,file:c};Ct.call(i,bt,t,a),s()}))}else s()}}function Ft(){var e=this,t=this.dndArea;function n(e){var t=e.clone(!0,!1);e.replaceWith(t)}this.onDropHandler=E().proxy(this.onDrop,this),this.onDragOverHandler=E().proxy(this.onDragOver,this),d.Z.on(t,"drop",this.onDropHandler),d.Z.on(t,"dragover",this.onDragOverHandler),d.Z.on(this.place,"click",".file-select-btn",(()=>{this.place.find(".file-select").click()})),d.Z.on(this.place,"click",".folder-select-btn",(()=>{this.place.find(".folder-select").click()})),d.Z.on(this.place,"change",".file-select",(function(){Tt.call(e,this.files),n(E()(this))})),u.default.isDirectoryUploadSupport()&&d.Z.on(this.place,"change",".folder-select",(function(){Tt.call(e,this.files),n(E()(this))}))}function Bt(e,t){var n=u.default.path.makePath(e,t);return this.params&&this.params.onFileRemoved?this.params.onFileRemoved(n):Promise.reject(new Error("No file removed callback"))}function Ut(e){var t=this;t.deleteQueue.push(e),t.activeDeletion||(t.activeDeletion=qt.call(t),t.activeDeletion.then((function(){t.activeDeletion=null})).catch((function(){t.activeDeletion=null})))}function qt(){var e=this,t=u.default.promise.deferred(),n=function(){t.resolve()},i=function(e){t.reject(e)};if(this.deleteQueue.length>0){var s=this.deleteQueue[0];this.deleteQueue.shift(),Bt.call(e,s.path,s.name).then((function(){qt.call(e,s).then(n).catch(i)})).catch(i)}else t.resolve();return t.promise}function Ht(e,t){this.params=t||{};var n=this;this.queue=[],this.deleteQueue=[],this.activeDeletion=null,E()("#content iframe").addClass("no-pointer-events");var i=this.place=E()(pt({dirUploadSupport:u.default.isDirectoryUploadSupport(),basePath:t.basePath||""}));e.append(i);var s=this.workarea=i.find(".workarea");if(!yt)return s.hide(),i.find(".dnd").hide(),void i.find(".not-supported").show();this.dndArea=this.params.documentBind?E()(document):i.find(".dnd"),this.preventUploadList={},d.Z.bind(s,"click",(function(e){if(!(n.deleteQueue.length>0)){var t=E()(e.target);if(t.closest(".delete").length>0){var i=t.closest(".file-item");if(i.length>0){var a=i.data();a.abort&&a.abort();var o=a.path+"/"+a.name;if(o=o.replace(/^\//,""),i.remove(),a.state===gt){if(a.item&&a.item.isDirectory){var r=s.find(".file-item");n.preventUploadList[o]=o,f().each(r,(function(e){var t=E()(e),i=t.data();0===(i.path+"/").indexOf(o+"/")&&(i.abort&&i.abort(),t.remove(),i.state===gt&&i.item&&!i.item.isDirectory&&Ut.call(n,i))}))}Ut.call(n,a)}var c=n.activeDeletion;c||(c=qt.call(n)),c.then((function(){n.deleteQueue.length=0,wt.call(n),n.preventUploadList[o]=void 0})).catch((function(){n.deleteQueue.length=0}))}}}})),Ft.call(this)}Ht.register=function(e,t){e===ft&&(ht=t),t.prototype=new ht,dt[e]=new t};var Gt=Ht.prototype;Gt.onDrop=function(e){e.stopPropagation(),e.preventDefault(),u.default.isDirectoryUploadSupport()?Ot.call(this,e.originalEvent.dataTransfer.items):Tt.call(this,e.originalEvent.dataTransfer.files)},Gt.processDataTransfer=function(e,t){u.default.isDirectoryUploadSupport()?Ot.call(this,e,t):Tt.call(this,e)},Gt.onDragOver=function(e){e.stopPropagation(),e.preventDefault()},Gt.destroy=function(){this.cancelUpload(),E()("#content iframe").removeClass("no-pointer-events"),this.params=null,this.workarea=null,this.place&&this.place.remove(),this.place=null,d.Z.off(this.dndArea,"drop",this.onDropHandler),d.Z.off(this.dndArea,"dragover",this.onDragOverHandler),this.dndArea=null},Gt.cancelUpload=function(){this.workarea.children().each((function(e,t){var n=E()(t).data("xhr");n&&n.abort()}))},Ht.register(ft,Xe),Ht.register("image",et),Ht.register("directory",nt);const Wt=Ht;var zt,Vt=n(2774).fs;let Kt=null;function Jt(e,t){if(zt=void 0,0!==t.length)if(t[0].type===Vt.FILE){var n=u.default.path.parse(t[0].path);zt=n.dir}else zt=t[0].path}function Yt(e){e=void 0===e||e;var t=i.default.currentProject;if(!t||t.readOnly)return null;const n=zt||"";if(t){var s=E()("<div/>"),a="Cancel all uploads and close",o=new Wt(s,{documentBind:e,basePath:n,onFilePrepareUpload:function(e,i,s){c.preventClosing(!0),r.element.html(a);var o=e.path.length>0?"/"+e.path:"",l=n+o;l=l.replace(/^\//,"");var d=Qe.validateItem(e.name,l);d?s(d):e.isDirectory?t.createFolder(e.name,l).then(f().bind(i,null,l)).catch((function(){s()})):f().bind(i,null,l)()},onFileUploaded:function(){},onFilesUploaded:function(){c.preventClosing(!1),r.element.html("Close")},onFileRemoved:function(e){return t.deleteItems([e])}}),r={title:"Close",onClick:function(){c.close(c.IDCANCEL)}},c=new Ae.Z({title:"Upload Files",buttons:[r],content:s,onHide:function(){o.destroy(),o=void 0,c=null,null!==Kt&&(zt=Kt,Kt=null)}});return o}return je.Z.notify("Please select Folder in Tree"),null}d.Z.subscribe("command:ide:upload_item",Yt),d.Z.subscribe("filetree:select",Jt),d.Z.subscribe("command:guides:upload_file",((e,t)=>{(t.path||"").split("/").some((e=>e&&!(0,u.L4)(e)))?je.Z.error("Upload path is not valid"):(Kt=zt,zt=t.path,Yt(!1))}));const Qt={openDialog:Yt,treePath:Jt};var Xt=n(91689);const $t=JSON.parse('{"app":[{"title":"Preview","command":"preview:project"},{"separator":"true"},{"title":"New File...","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]},"command":"ide:new_file"},{"title":"New Folder...","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]},"command":"ide:new_folder"},{"title":"Upload...","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]},"command":"ide:upload_item"},{"id":"filetree-export-zip","title":"Export as ZIP","command":"project:export:zip"},{"title":"Paste...","id":"filetree-paste","command":"filetree:paste","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]}}],"dir":[{"id":"find-in-folder","title":"Search In Folder(s) ...","command":"search:in_folder"},{"separator":"true"},{"separator":"true","noDefaults":true,"context":{"session":"registered","readOnlyAccess":false,"project":["ADMIN","OWNER"]}},{"title":"New File...","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]},"command":"ide:new_file"},{"title":"New Folder...","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]},"command":"ide:new_folder"},{"title":"Upload...","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]},"command":"ide:upload_item"},{"title":"Rename...","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]},"command":"ide:rename_item"},{"title":"Delete...","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]},"command":"ide:delete_item"},{"title":"Copy...","command":"filetree:copy","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]}},{"title":"Paste...","id":"filetree-paste","command":"filetree:paste","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]}},{"title":"Duplicate...","id":"filetree-duplicate","command":"filetree:duplicate","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]}}],"file":[{"title":"Preview static","command":"preview:tree-file"},{"id":"filetree-download","title":"Download","command":"project:export:file"},{"title":"Code Playback","noDefaults":true,"command":"file:open","params":{"ext":"change-player"},"context":{"project":["OWNER","ADMIN","READ"]}},{"separator":"true","context":{"session":"registered","project":["WRITE_FILES","ADMIN","OWNER"]}},{"separator":"true","noDefaults":true,"context":{"session":"registered","project":["ADMIN","OWNER"]}},{"id":"set-default-index","title":"Set as project index","command":"preview:set-default-index","noDefaults":true,"context":{"session":"registered","project":["OWNER","ADMIN","WRITE_FILES"]}},{"separator":"true","noDefaults":true,"context":{"session":"registered","readOnlyAccess":false,"project":["OWNER","ADMIN","WRITE_FILES"]}},{"title":"Rename...","command":"ide:rename_item","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]}},{"title":"Delete...","command":"ide:delete_item","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]}},{"title":"Copy...","command":"filetree:copy","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]}},{"title":"Paste...","id":"filetree-paste","command":"filetree:paste","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]}},{"title":"Duplicate...","id":"filetree-duplicate","command":"filetree:duplicate","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]}}],"multi-select":[{"id":"find-in-folder","title":"Search In Folder(s) ...","command":"search:in_folder"},{"separator":"true"},{"separator":"true","noDefaults":true,"context":{"session":"registered","project":["ADMIN","OWNER"]}},{"title":"New File...","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]},"command":"ide:new_file"},{"title":"New Folder...","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]},"command":"ide:new_folder"},{"title":"Upload...","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]},"command":"ide:upload_item"},{"title":"Delete...","command":"ide:delete_item","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]}},{"title":"Copy...","command":"filetree:copy","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","ADMIN","OWNER"]}}]}');var en=n(85284),tn=n(37371),nn=n(26014),sn=n(4132),an=n(77305);const on=(0,an.e)(tn.DS),rn=()=>{var e;const t=i.default.currentProject;return(null===(e=t.authorAssignment)||void 0===e?void 0:e.course)||t.course};class cn{async loadStructure(){var e;const t=null===(e=rn())||void 0===e?void 0:e.id;if(!t)throw new Error("No course associated with the current project");return this.structure=await(e=>{const t=new nn.LoadStructureRequest;return t.setCourseId(e),new Promise(((e,n)=>{on.loadStructure(t,(0,sn.sd)(),((t,i)=>t?n(new Error(t.message)):e(i.toObject())))}))})(t),this.structure}getStructure(){return this.structure}}let ln=null;const dn={getInstance:()=>(ln||(ln=new cn),ln)},un=I().compile('<h4 class="storage-info-title">Course Storage</h4>\r\n<div class="tree-storage-container"></div>\r\n'),hn=e=>e.directory?{text:e.directory.name,a_attr:{"aria-label":e.directory.name},type:"dir",children:e.directory.entriesList.map(hn)}:{text:e.file.name,a_attr:{"aria-label":e.file.name},type:"file"};function pn(e,t){const n=this.get_node(e),i=this.get_node(t),s=["root","dir","file"];return n.type!==i.type?s.indexOf(n.type)>s.indexOf(i.type)?1:-1:n.text.toLowerCase()>i.text.toLowerCase()?1:-1}const fn=class{constructor(e){this.container=e}jsTreeConfig(e){return{core:{multiple:!0,themes:{dots:!1,responsive:!1},data:e,force_text:!0,dblclick_toggle:!1},types:{"#":{valid_children:["root"],max_children:1},root:{valid_children:["file","dir"],icon:"ss-icon ss-database",a_attr:{title:"Course Storage"}},dir:{valid_children:["file","dir"],icon:"ss-icon ss-folder"},file:{valid_children:["none"],icon:"ss-icon ss-textfile"}},sort:pn,plugins:["types","sort","unique","guttericons","wholerow"]}}async activate(){if(!this.activated&&(this.activated=!0,(()=>{var e;const t=rn();return!(null==t||null===(e=t.details.courseSharedStorage)||void 0===e||!e.enabled)})())){re.addVisibilityFilter({plugin:"filetree",filter:"hide",path:["storage"],seq:0});try{this.structure=await dn.getInstance().loadStructure(),this.container.append(E()(un())),this.treeContainer=this.container.find(".tree-storage-container");const n=null!=(e=this.structure)&&null!==(t=e.entriesList)&&void 0!==t&&t.length?{id:"course-storage-root",text:"storage",a_attr:{"aria-label":"Course Storage"},state:{opened:!0},type:"root",children:e.entriesList.map(hn)}:[],i=this.treeContainer.jstree(this.jsTreeConfig(n));i.on("click",".jstree-anchor",(function(e){i.jstree(!0).toggle_node(e.target)})),this.tree=E().jstree.reference(i),this.container.removeClass("hide")}catch{}var e,t}}destroy(){var e,t;null===(e=this.tree)||void 0===e||e.destroy(),this.tree=null,null===(t=this.container)||void 0===t||t.remove(),this.container=null}};n(57568);var mn=n(9380).A,gn=d.Z.create(n(43380)),bn=n(10947).q;let vn={},yn=null;const wn=[],_n=4e3,kn="files-tree",Pn=function(e,t,n){if(!(this instanceof Pn))return new Pn(e,t,n);const s=this;this.container=e,this.panel=n,this.clipboard=null,this.canDrop=!1,this.dropTarget="";const a={name:kn,core:{check_callback:function(e,t,n,i,a){if("move_node"===e){var o=this.get_selected();if(a&&"i"!==a.pos&&a.ref&&"dir"===a.ref.type&&(n=a.ref),"#"===n.id||t.parent===n.id||t.id===n.id||"file"===n.type||-1!==f().indexOf(o,n.id)&&-1!==f().indexOf(o,t.id)||-1!==f().indexOf(t.children_d||[],n.id)?s.canDrop=!1:(s.dropTarget=n.id,s.canDrop=!0),!s.canDrop)return s.treeDiv.find(".highlighted").removeClass("highlighted"),!1;if(s.canDrop||"#"===n.id||t.parent===n.id){var r="#"===n.id?"j"+s.tree._id+"_1":n.id,c=E()("#"+r);c.hasClass("highlighted")||(s.treeDiv.find(".highlighted").removeClass("highlighted"),c.addClass("highlighted"))}}if(a&&a.dnd&&"i"!==a.pos)return!1},multiple:!0,themes:{dots:!1,responsive:!1},data:[],force_text:!0},types:{"#":{valid_children:["root"],max_children:1},root:{valid_children:["file","dir"],icon:In(),a_attr:{title:An()}},dir:{valid_children:["file","dir"],icon:"ss-icon ss-folder"},file:{valid_children:["none"],icon:"ss-icon ss-textfile"},truncated:{valid_children:["none"],icon:"ss-icon ss-alert"}},sort:function(e,t){var n=this.get_node(e),i=this.get_node(t),s=["root","dir","file"],a=n.text.toLowerCase()>i.text.toLowerCase()?1:-1;return n.type!==i.type&&(a=s.indexOf(n.type)>s.indexOf(i.type)?1:-1),a},dnd:{blocker:!0,copy:!1,check_while_dragging:!0,open_timeout:4e3,is_draggable:function(e){if(i.default.currentProject&&i.default.currentProject.readOnly)return!1;for(var t=["file","dir"],n=!0,s=0;s<e.length;s++){var a=e[s];n=n&&-1!==f().indexOf(t,a.type)}return n}},contextmenu:{select_node:!0,show_at_node:!1,items:function(e,t){return En.call(s,s.tree,e,t)}},plugins:["contextmenu","dnd","search","types","sort","unique","guttericons","wholerow"]};this.treeContainer=E()('<div class="tree-container"></div>'),this.treeDiv=this.treeContainer.jstree(a),this.storedFunctions=[],this.loading=!0,this.treeDiv.on("activate_node.jstree",(function(e,t){var n=t.event&&"contextmenu"===t.event.type,i=t.event&&t.event.ctrlKey,a=t.event&&t.event.shiftKey;if(n||i||a)return!1;if(1===t.instance.get_selected().length){var o=t.node,r=o.state&&o.state.loaded;"dir"===o.type&&(o.children.length>0||!r)&&s.tree.toggle_node(o),G.Z.onSelect(t)}})).on("changed.jstree",(function(e,t){G.Z.onSelectionChanged(t)})).on("move_node.jstree",(function(e,t){G.Z.onSelectionChanged(t)})).on("ready.jstree",(function(){s.loading=!1,s.tree.hide_dots(),Sn.call(s)})).on("refresh.jstree",(function(){re.refresh(o)})).on("open_node.jstree",(function(){re.refresh(s.tree),re.refresh.flush()}));var o=this.tree=E().jstree.reference(this.treeDiv);this.container.append(this.treeContainer),d.Z.on(this.container,"click",(function(e){if(0!==E()(e.target).closest(".jstree-node").length)return!1})),this.activeDragItems=[],E()(document).on("dnd_start.vakata.filetree",(function(e,t){var n=t.data.nodes;0!==n.length&&(s.activeDragItems=G.Z.sortAndCollectNodes(o,n),0!==s.activeDragItems.length&&(t.helper.find(".jstree-icon:eq(0)").hide(),t.helper.addClass("codio-contrasted")))})).on("dnd_move.vakata.filetree",(function(e,t){const n=E()("#jstree-marker"),i=f().get(t,"data.origin.settings.name");i===kn?n.addClass("in-filetree"):i===T.Iw&&n.addClass("in-guidestree")})).on("dnd_stop.vakata.filetree",(function(e,t){if(s.container.find(".jstree-node.highlighted").removeClass("highlighted"),0!==s.activeDragItems.length&&""!==s.dropTarget&&s.canDrop){var n=s.tree,i=n.get_node(s.dropTarget),a=G.Z.getPath(n,i),o=s.activeDragItems;s.activeDragItems=[],s.dropTarget="",s.canDrop=!1,f().delay((function(){n.settings.dnd.blocker&&n.get_container().block()}),300),n.settings.dnd.blocker=!0,gn.moveItems([a,o])}else if(0!==s.activeDragItems.length){var r=E()(t.event.target).closest(".tab-container");if(r){var c=E()(t.event.target).closest(".CodeMirror-line");f().each(s.activeDragItems,(function(e){gn.itemDrop({path:e.path,type:e.item.type,tab:r[0],line:c&&c[0],event:t.event})}))}}}));const r=E()('<div class="storage-info-container hide"></div>');this.container.append(r),this.storageInfo=new fn(r),this.projectInfo=new F(this.container,i.default.currentProject),this.treeBar=new H(this.container,i.default.currentProject),Ie.init(this.tree),re.setTree(this.tree),Tn.call(this,this.tree),Q.setIcons(this.tree,vn,!0),function(e,t){if(i.default.currentProject&&i.default.currentProject.readOnly)return;var n=t,s=E()(document);function a(t){var n=E()(t.target);if(!(n.closest(".dnd-handler").length>0||n.closest(".modal-scrollable").length>0)){t.stopPropagation(),t.preventDefault();var i=u.default.isDirectoryUploadSupport()?t.originalEvent.dataTransfer.items:t.originalEvent.dataTransfer.files,a=n.closest(".jstree-node"),o=a.attr("id");o&&0!==o.length||(o=G.Z.getTreeNodeByPath(e,"").id);var r=e.get_node(o),c=G.Z.getPath(e,r),l=r.type;if(Qt.treePath(void 0,[{path:c,type:l}]),!f().isEmpty(t.originalEvent.dataTransfer.files)){var d=Qt.openDialog(!1);d&&(d.processDataTransfer(i),s.bind("drop.filetree",(function(e){e.stopPropagation(),e.preventDefault(),s.unbind("drop.filetree"),a.removeClass("highlighted")})))}}}d.Z.on(n,"drop",a),d.Z.on(E()("body"),"drop",a),d.Z.on(n,"dragover",(function(t){var i=E()(t.target).closest(".jstree-node");if(!i.hasClass("highlighted")){var s=i.attr("id");n.find(".jstree-node").removeClass("highlighted"),i.addClass("highlighted"),f().delay((function(){i.hasClass("highlighted")&&e.open_node(s)}),_n)}t.stopPropagation(),t.preventDefault()})),d.Z.on(n,"dragleave",(function(){n.find(".jstree-node").removeClass("highlighted")}))}(this.tree,this.treeContainer)},Cn=Pn.prototype;function xn(e){var t=e.command,n="";return f().isString(t)&&(n=mn.getCurrentKey(t),n=f().isUndefined(n)?"":u.default.formatCommand(n)),'<span class="item-title">'+e.title+'</span><span class="hotkey">'+n+"</span>"}function En(e,t){var n=this,i=e.get_selected().length>1,s=t.type,a=!1,o="app";i?o="multi-select":("root"!==s&&(o=s),n.clipboard||(a=!0));let r=!1;const c=G.Z.getPath(e,t)+"/";c&&n.clipboard&&n.clipboard.files&&(r=!!n.clipboard.files.find((e=>"dir"===e.type&&0===c.indexOf(e.path+"/")))),a=a||r;var l=Xt.Z.inContext,d=$t[o]||{},u={},h=null,p=f().find(d,(function(e){return"filetree-paste"===e.id}));p&&(p.visible=!a);var m=function(n){return function(){if(n.command){var i=n.command.split(":"),s=i.shift(),a=i.join(":"),o=G.Z.getPath(e,t);mn.execute(s,a,f().extendWith(n.params,{filename:o}))}}};return f().each(d,(function(e){if(l(e.context,"",en,e.noDefaults)){if(void 0!==e.visible&&!e.visible)return;if("true"===e.separator)null!==h&&(u[h].separator_after=!0,h=null);else{if(u[e.title]={label:xn(e),action:m(e)},e.nodes)if(0===e.nodes.length)u[e.title].submenu={no_items:{label:""}};else{for(var t={},n=0;n<e.nodes.length;n++){var i=e.nodes[n];t[i.title]={label:xn(i),action:m(i)}}u[e.title].submenu=t}h=e.title}}})),u}function Sn(){for(var e=0;e<this.storedFunctions.length;e++)this.storedFunctions[e]();this.storedFunctions=[]}function In(){return i.default.currentProject&&i.default.currentProject.isPublic?"ss-icon ss-unlock":"ss-icon ss-lock"}Cn.updateIcons=function(){Q.setIcons(this.tree,vn)},Cn.activate=function(e,t){this.panel=t,this._render()},Cn.deactivate=function(){yn=null},Cn.close=function(){var e;vn={},Q.clean(),Ie.clean(),E()(document).off("dnd_start.vakata.filetree dnd_stop.vakata.filetree"),this.tree.destroy(),function(e){if(i.default.currentProject&&i.default.currentProject.readOnly)return;d.Z.off(e,"drop dragleave dragover")}(this.treeContainer),f().forEach(wn,(function(e){d.Z.unsubscribe(e)})),wn.length=0,null===(e=this.storageInfo)||void 0===e||e.destroy(),this.treeBar.close(),this.container.remove(),yn=null,this.container=null,this.tree=null},Cn._render=function(){yn=this,this.updateIcons(),this.storageInfo.activate(),this.projectInfo.render(),this.treeBar.render()};const An=()=>i.default.currentProject&&i.default.currentProject.isPublic?"Public project":"Private project";function Tn(e){const t=this,n=f().bind(wn.push,wn),s=function(n){const i=G.Z.getTreeNodeByPath(e,n);if(i){const s={path:n,type:i.type},a=function(){e.deselect_all(!0),e.select_node(i)};t.loading?t.storedFunctions.push(a):a(),gn.itemSelect(s,[s])}};function a(){const t=i.default.currentProject,n=G.Z.getTreeNodeByPath(e,""),s=f().isEmpty(t.currentBranch)?t.name:[t.name," (",t.currentBranch,")"].join("");e.rename_node(n,s)}n(d.Z.subscribe("tab:activated:tree",(function(e,t){s(t.filename)}))),n(d.Z.subscribe("tab:focus:tree",(function(e,t){s(t.filename)}))),n(d.Z.subscribe("tree:select:#path",(function(e){s(e.path)}))),n(d.Z.subscribe("project:dataUpdate",(function(e,t){t.newProject.currentBranch!==t.oldProject.currentBranch&&a()}))),n(d.Z.subscribe("project:preferencesUpdated",(function(t,n){f().includes(n,"name")&&a(),f().includes(n,"is_public")&&(Q.setIcon(e,"",In()),Q.updateNodeIconTitle(e,"",An()))}))),n(d.Z.subscribe("command:ide:delete_item",(function(){var n=G.Z.getSelectedFiles(e);if(t.clipboard&&t.clipboard.files.length>0)if(f().each(n,(function(e){var n=[];f().each(t.clipboard.files,(function(t,i){t.path===e.path&&n.push(i)})),n=n.reverse(),f().each(n,(function(e){t.clipboard.files.splice(e,1)}))})),0===t.clipboard.files.length)t.clipboard=null;else{var i=Zn(t.clipboard.files);t.clipboard.minPath=i.minPath}}))),n(d.Z.subscribe("command:filetree:copy",(function(){var n=G.Z.getSelectedFiles(e),i=[];f().each(n.items,(function(e,t){"root"===e.type&&i.push(t)})),i=i.reverse(),f().each(i,(function(e){n.items.splice(e,1)}));var s=Zn(n.items);t.clipboard={minPath:s.minPath,files:n.items}}))),n(d.Z.subscribe("command:filetree:paste",(function(){var n=G.Z.getSelectedFiles(e).file,i="";if("dir"===n.type)i=n.path;else{var s=n.path.split("/");s.pop(),i=s.join("/")}f().delay((function(){e.settings.dnd.blocker&&e.get_container().block()}),300),e.settings.dnd.blocker=!0,gn.pasteItems([i,t.clipboard.files])}))),n(d.Z.subscribe("command:filetree:duplicate",(function(){var t=G.Z.getSelectedFiles(e),n=t.file.path.split("/");n.pop();var i=n.join("/");f().delay((function(){e.settings.dnd.blocker&&e.get_container().block()}),300),e.settings.dnd.blocker=!0,gn.duplicateItems([i,t.items])})))}function jn(e){if(e.tree){var t=e.tree.get_selected(),n=f().isEmpty(t)?G.Z.getTreeNodeByPath(e.tree,"").id:t,i=e.tree.get_node(n,!0);return i&&i.children(".jstree-anchor")}}function Zn(e){var t=e[0].path,n=t.split("/").length;n>1&&f().each(e,(function(e){var i=e.path.split("/").length;i<n&&(t=e.path,n=i)}));var i=t.split("/");return i.pop(),{minPath:t=i.join("/"),weight:n}}Cn.focus=function(){var e=jn(this);e&&e.length>0&&e.get(0).focus({preventScroll:!0})},Cn.unfocus=function(){var e=jn(this);e&&e.blur()},d.Z.subscribe("tree:publish:icons:#plugin",(function(e,t){var n=e.plugin;vn[n]=t,null!==yn&&yn.updateIcons()})),d.Z.subscribe("filetree:right-menu:update:#id",(function(e,t){var n=e.id;f().each($t,(function(e){var i=bn(e,n);i&&f().each(t,(function(e,t){i[t]=e}))}))})),d.Z.subscribe("filetree:node:addVisibilityFilter",(function(e,t){t&&f().isString(t.plugin)&&re.addVisibilityFilter(t)})),d.Z.subscribe("filetree:node:removeVisibilityFilter",(function(e,t){t&&f().isString(t.plugin)&&re.removeVisibilityFilter(t)})),d.Z.subscribe("filetree:node:open:#path",re.open),d.Z.subscribe("filetree:node:close:#path",re.close),d.Z.subscribe("tree:unblock",(function(){var e=yn.tree;e.settings.dnd.blocker&&(e.get_container().unblock(),e.settings.dnd.blocker=!1)})),d.Z.subscribe("command:filetree:openParent",(()=>{location.assign(i.default.currentProject.parent.href)}));const On=Pn;var Nn={};Nn.info=P,Nn.settings=C,Nn.get=async function(){return On},i.default.register(Nn);const Dn=JSON.parse('{"name":"codio-tree","description":"Tree Extension","codio":{"urls":"tree"}}');var Mn=n(18098);const Rn=["c","i","h","ino","cc","cpp","c++","cp","cxx","ii","hh","hp","hxx","hpp","h++","go","java","js","pas","p","pp","P","pro","py","py3","pyw","rs"],Ln=I().compile('<div class="statusbar">\n  <div class="percentage">{{percentage}}%</div>\n  <div class="position">({{position.lineNumber}}:{{position.column}})</div>\n  <div class="switches">\n    <div class="views">\n      <select {{#unless views.length}}disabled{{/unless}} aria-label="View">\n        {{#each views}}\n        <option value="{{id}}" {{#if selected}}selected{{/if}}>{{name}}</option>\n        {{/each}}\n      </select>\n    </div>\n</div>\n'),Fn=d.Z.create(n(9533));var Bn=function(e){const t=e.getPosition().lineNumber,n=e.getLineCount();return n<2?100:Math.ceil(t/n*100)},Un=function(e,t){var n=i.default.getViews(),s=f()(n).filter((function(t){return t.info.name===e})).first().info.codio.view,a=f().map(s,(function(e){return{id:e,name:(n=e,n.substring(0,1).toUpperCase()+n.substring(1)),selected:e===t};var n}));return a.length>1?a:[]},qn=function(e,t,n){this.container=t,this.editor=e,this.tree=n,this.attached=!1,this.fragment=null;var i=this;this._refreshHandler=f().debounce(this.refresh.bind(this),75,{maxWait:400}),d.Z.on(this.container,"change",".statusbar .views > select",(function(){i.tree.switchType(null,null,E()(this).val())}))},Hn=qn.prototype;Hn.render=function(e){if(e&&(this.editor=e),this.attached)return this.refresh();this.attach(),f().defer((function(){Fn.statusBarOpened()}))},Hn.refresh=function(){if(!this.editor)return;const e=f().clone(this.editor.getPosition());var t=E()(Ln({position:e,percentage:Bn(this.editor),views:Un(this.tree.extensionName,this.tree.viewType)}));this.fragment.replaceWith(t),this.fragment=t,Fn.statusBarOpened()},Hn.attach=function(){this._cursorPositionDisposableHandler=this.editor.onDidChangeCursorPosition(this._refreshHandler);const e=f().clone(this.editor.getPosition());e.lineNumber+=1,this.fragment=E()(Ln({position:e,percentage:Bn(this.editor),views:Un(this.tree.extensionName,this.tree.viewType)})),this.container.append(this.fragment),this.attached=!0},Hn.detach=function(){this.editor&&(this._cursorPositionDisposableHandler&&this._cursorPositionDisposableHandler.dispose(),this._cursorPositionDisposableHandler=null,this.editor=null),this.fragment&&this.fragment.detach(),this.attached=!1},Hn.remove=function(){this.editor&&(this._cursorPositionDisposableHandler&&this._cursorPositionDisposableHandler.dispose(),this._cursorPositionDisposableHandler=null,this.editor=null),d.Z.off(this.container,"change",".statusbar .views > select"),this.tree=null,this.attached=!1,this.fragment&&this.fragment.remove()},Hn.disable=function(){this.fragment&&this.fragment.remove(),this.render=function(){}},Hn.getTypes=function(){return Un(this.tree.extensionName,this.tree.viewType)};const Gn=qn;var Wn=n(87167),zn=n(9380).A;const Vn=d.Z.create(n(9533)),Kn=["sb3","earsketch"];var Jn=function(e,t,n,i,s){s=s||{},this.container=e,this.filename=t,this.sync=!1!==s.sync,this.statusbar=null,this.fragment=null,this.editor=null,this.tab=null,this.drawn=!1,this.active=!1,this.showStatusbar=s.showStatusbar,this.highlight=s.highlight,this.fragment=E()('<div class="tree-container">');var a,o=Qn(t);if(f().isUndefined(n)){if(o){var r=f().toPairs(o);this.viewType=r[0][0],a=r[0][1]}}else a=o[n],this.viewType=n;void 0!==a&&(this.extensionName=a.info.name,this.sync=!1!==a.info.codio.sync,this.extensionPromise=a.get().then($n.bind(null,this,t,this.viewType,s)).catch((function(){})),s.nofs||(this.fsHandlerId=d.Z.subscribe("ide:fullscreen:#mode",Yn.bind(this))))};function Yn(e,t){this.active&&("enter"===e.mode?ni(this,t===this?"enterFullscreen":"hide"):ni(this,"leaveFullscreen"),ni(this,"updateSize"))}function Qn(e){var t=u.default.path.parse(e),n=Mn.Z.getByFilename("/"+e);return void 0!==n||void 0!==(n=Mn.Z.getByFilename(t.name))||void 0!==(n=Mn.Z.getByExt(t.extension))?n:{code:Xn(t.extension)}}const Xn=e=>Rn.includes(e)?Mn.Z.getExt("view-code-breakpoints"):Mn.Z.getExt("view-code");function $n(e,t,n,s,a){var o={container:e.fragment,filename:t,view:n};if(f().defaults(o,s),a.info&&a.info.codio&&!0===a.info.codio["no-auto-loading"])return e.extension=new a(o),a.info.codio&&a.info.codio["close-extension-ide-tab"]&&Vn.closeByPath({path:o.filename},!1),Promise.resolve();if(e.file)return o.file=e.file,o.fileContent=e.file.model,e.extension=new a(o),Promise.resolve();if(f().isNull(i.default.currentProject))return Promise.reject(new Error("No project"));var r=e.sync?"file":"getBinaryFileContent";let c=Promise.resolve("");const l=u.default.path.getFileExtension(t);return Kn.includes(l)||(c=i.default.currentProject[r](t)),c.then((function(t){f().isString(t)?(e.file=null,e.tmpModel=new Wn.yO(t),o.fileContent=e.tmpModel):(e.file=t,t&&(o.fileContent=t.model)),o.file=e.file,e.extension=new a(o)}))}var ei=Jn.prototype;function ti(e,t){if("close"===t||"beforeClose"===t)return!0;var n=!1;return f().each(i.default.ide.panels.all,(function(t){var i=t.activeTab();i&&i===e.tab&&(n=!0)})),n}async function ni(e,t,n,i){return await u.default.promise.getState(e.extensionPromise)===u.default.promise.STATES.REJECTED?Promise.resolve():e.extensionPromise.then((function(){var s=e.extension,a=i||ti(e,t);if(s&&f().isFunction(s[t])&&a)return s[t].call(s,n)}))}async function ii(e,t,n){return await u.default.promise.getState(e.extensionPromise)===u.default.promise.STATES.REJECTED?Promise.resolve():e.extensionPromise.then((function(){var i=e.extension;if(i&&f().isFunction(i[t]))return ti(e,t)?i[t].apply(i,f().isArray(n)?n:[n]):Promise.reject(new Error("extension is not active"))}))}function si(e,t,n,s,a){if(i.default.currentProject.exists(t)){var o=i.default.currentProject.getFileInfo(t);if(o.type&&"file"===o.type)return new Jn(e,t,n,s,a)}else je.Z.error("The file: "+u.default.safeHtml(t)+" cannot be found. Resync the file tree (Project->Resync File Tree) and if still a problem please contact us.")}ei.afterActivate=function(e){return ii(this,"afterActivate",e)},ei.setOptions=function(e,t,n){this.highlight=n.highlight,ni(this,"setOptions",n,!0)},ei.activate=function(e,t){if(this.tab=t,this.drawn){if(this.active)return}else!function(e,t){e.container.append(e.fragment),!1===e.showStatusbar||e.statusbar||(e.statusbar=new Gn(t,e.container,e)),e.drawn=!0}(this,e),this.container.append(this.fragment);if(this.extensionPromise)return this.statusbar&&this.statusbar.render(e),this.editor=e,ii(this,"setTab",this.tab).then((()=>ii(this,"activate",e).then((()=>{this.drawn=this.active=!0}))))},ei.beforeDeactivate=function(){if(this.fragment&&this.extensionPromise)return ii(this,"beforeDeactivate")},ei.deactivate=function(){if(this.active=!1,this.statusbar&&this.statusbar.detach(),this.fragment&&this.extensionPromise)return ni(this,"deactivate")},ei.dropActiveFlag=function(){this.active=!1},ei.beforeClose=function(e,t,n){return ii(this,"beforeClose",n)},ei.close=function(e,t,n){var i=[];if(this.file){let e;"function"==typeof this.file.close&&(e=this.file.close()),e&&i.push(e)}return this.tmpModel&&!this.tmpModel.isDisposed()&&this.tmpModel.dispose(),this.statusbar&&(this.statusbar.remove(),this.statusbar=null),this.fragment.remove(),this.fsHandlerId&&d.Z.unsubscribe(this.fsHandlerId),i.push(ni(this,"close",n)),Promise.all(i)},ei.focus=function(){return ni(this,"focus")},ei.rename=function(e,t,n){const i=Promise.resolve();this.filename=n;const s=Qn(this.filename);let a,o=this.viewType;if(!f().isUndefined(this.viewType)&&s[this.viewType])a=s[this.viewType];else if(s){const e=f().toPairs(s);a=e[0][1],o=e[0][0]}return a&&a.info.name!==this.extensionName?(this.extensionName=a.info.name,this.sync=!1!==a.info.codio.sync,this.switchType(this.editor,this.tab,o)):(this.extension&&(this.extension.fileName=n),i)},ei.switchToNextType=function(){if(this.statusbar){var e=this.statusbar.getTypes();if(e.length>1){var t,n=f().findIndex(e,{selected:!0});n===e.length-1?n=0:n++,t=e[n].id,this.switchType(this.editor,this.tab,t)}}},ei.switchType=function(e,t,n){if(!f().isUndefined(n)){var s=this;return s.viewType=n,f().isNull(this.tab)||(this.tab.viewType=n),ii(this,"close").then((function(){var e=i.default.getExt(s.extensionName);return s.extensionPromise=e.get().then($n.bind(null,s,s.filename,s.viewType,{}))})).then((function(){return ii(s,"setTab",s.tab),ii(s,"activate",s.editor)})).then((function(){return ii(s,"afterActivate")})).then((function(){zn.execute("layout","save"),s.statusbar&&s.statusbar.render(s.editor)}))}},ei.fileDrop=function(e,t,n){return ii(this,"fileDrop",[e,t,n])};var ai={};ai.info=Dn,ai.settings={},ai.get=async function(){return si},i.default.register(ai);const oi=JSON.parse('{"name":"codio-right-menu","description":"Right menu ext"}');var ri=n(52308),ci=E()("<div/>");function li(e){return e=e||"",ci.text(e).html()}function di(){this._dropCloseTimeout();var e=this._opt.leaveInterval;if(e){var t=this,n=setTimeout((function(){t._div&&t._onMenuClose()}),e);this._objectEnv.timeIdLeave=n}}function ui(e){var t,n=this._opt;if(n[e]&&"function"==typeof n[e]){var i=Array.prototype.slice.call(arguments,0);i.splice(0,1),t=n[e].apply(this,i)}return t}function hi(e){this._div.stop().fadeOut(0).hide();var t=this._nodesMap;for(var n in t)t[n].nodesContainer&&t[n].nodesContainer.hide();!1!==e&&ui.call(this,"onClose")}const pi=function(e,t,n){var i={_data:null,_div:null,_nodesMap:null,_plugins:null,_contextDiv:null,_objectEnv:null,_id:null,_init:function(e,t,n){this._id=this._generateUniqueId(),this._div=E()("<table class='simple-right-menu' id='"+this._id+"' tabIndex='-1'>").attr("unselectable","on"),this._contextDiv=e,this._objectEnv={},this._opt=n||{},!this._opt.leaveInterval&&(this._opt.leaveInterval=0),this._dropData(),this.setData(t),this._bindEvents()},id:function(){return this._id},setData:function(e){e=ri.extend(!0,{},{val:e}).val,this._setData(e)},_setData:function(e){if(null!=e){this.clear();this._generateUniqueId();this._addNewNode(void 0,e,this._div)&&(this._data=e)}},getData:function(){return ri.extend(!0,{},{val:this._data}).val},clear:function(){this._div.empty(),this._dropData()},width:function(){return this._div.width()},height:function(){return this._div.height()},_log:function(e){console},_error:function(e){console&&console.error(e)},_dropData:function(){this._dropCloseTimeout(),this._objectEnv={},this._nodesMap={},this._data={}},setItemIcon:function(e,t){var n=this._getNodesMap(e);if(n){var i=n.divs.children(":not(:last)").find(".simple-right-menu-item-icon");if(i.length>0&&"span"==i[0].tagName.toLowerCase()){var s=i.attr("class"),a=i.attr("style"),o=E()("<img class='"+s+"' style='"+a+"'>");i.replaceWith(o),i=o}i.attr("src",t)}},setItemIconSize:function(e){if(e=parseInt(e,10),!isNaN(e)){var t=this._div;t.addClass("simple-right-menu-icon-"+e),t.removeClass("simple-right-menu-icon-"+this._div.data("iconSize")),t.data("iconSize",e)}},_onMenuClose:function(){var e=this;this._div&&this._div.fadeOut(100,(function(){hi.call(e)}))},_dropCloseTimeout:function(){clearTimeout(this._objectEnv.timeIdLeave)},_addNewNode:function(e,t,n,i){var s=E()("<div>");s.data("id",e);var a=this._nodesMap,o=!0,r=this;if(this._traverseNodes(t,(function(e,t){var n;if(e.id=null==e.id?r._generateUniqueId(a):e.id,null!=a[e.id])return r._error("Error :: Detects duplicate ID in data"),o=!1,!1;var i=null!=e.nodes,s=!1===e.enable?"simple-right-menu-item-disable ":"",c=i?"":e.bungClass,l=i&&e.nodes.length>0,d=!1!==e.safeTitle?li(e.title||""):e.title||"",u=e.icon?"simple-right-menu-icon-"+e.icon:"",h=e.icon2?"simple-right-menu-icon-"+e.icon2:"",p=e.separator?E()("<tr class='simple-right-menu-item-separator'><td colspan='3'></td></tr>"):E()("<tr class='"+s+"simple-right-menu-item "+(i?"simple-right-menu-folder":"simple-right-menu-child")+"'><td><span class='simple-right-menu-item-icon "+u+"'>&nbsp;</span></td><td><span class='simple-right-menu-title "+h+"'>"+d+"</span></td><td><span class='simple-right-menu-expand "+c+" "+(l?"simple-right-menu-has-child":"")+"'>&nbsp;</span></td></tr>");return(n=i?r._getNewContainerEl(e.id):void 0)&&n.hide(),!1===e.visible&&p.hide(),p.data({id:e.id}),p.append(E()("<td>").append(n)),e.userData=null==e.userData?{}:e.userData,a[e.id]={node:e,divs:p,nodesContainer:n,parentId:t.data("id"),titleEl:p.find(".simple-right-menu-title")},t.append(p),n}),s),o)if(null!=i&&-1!=i){var c=null==e?this._getFakeRootNode():this._getNodesMap(e);if(c.node.nodes.length>i)this._getNodesMap(c.node.nodes[i].id).divs.before(s.children());else n.append(s.children())}else n.append(s.children());return o},_getNewContainerEl:function(e){return E()("<table class='simple-right-menu-container' style='display:none;'>").data("id",e)},_generateUniqueId:function(e){function t(){for(var e="abcdefghijklmnopqrstuvwxyz0123456789-",t="w",n=0;n<37;n++){var i=parseInt(37*Math.random());t+=e.charAt(i)}return t}for(var n;e&&e[n]||!n;)n=t();return n},traverseNodes:function(e,t){"function"==typeof e&&(t=e,e=this._data),this._traverseNodes(e,t)},_traverseNodes:function(e,t,n){var i,s=e.nodes;if(E().isArray(e)?(s=e,i=n):i=t(e,n),null!=s&&!1!==i)for(var a=0,o=s.length;a<o;a++)this._traverseNodes(s[a],t,i)},_traverseParents:function(e,t){var n=this.getParentNode(e);null!=n&&0!=t(n)&&this._traverseParents(n.id,t)},_getNodesMap:function(e){return this._nodesMap[e]},_getFakeRootNode:function(){return E().isArray(this._data)?{node:{nodes:this._data},divs:E()("<tr>"),nodesContainer:this._div,parentId:void 0}:this._getNodesMap(this._data.id)},addNode:function(e,t,n){"string"!=typeof e&&(n=t,t=e,e=void 0);var i="string"!=typeof e?this._getFakeRootNode():this._getNodesMap(e),s=i.node,a=i.divs;if(null!=s.nodes&&0!=s.nodes.length||(s.nodes=[],a&&a.addClass("simple-right-menu-folder").removeClass("simple-right-menu-child"),i.nodesContainer=i.nodesContainer?i.nodesContainer:this._getNewContainerEl(e),a&&a.children(":last").append(i.nodesContainer)),this._addNewNode(e,t,i.nodesContainer,n))return E().isArray(t)?t.length>0&&(s.nodes=s.nodes.concat(t)):null!=n&&-1!=n?s.nodes.splice(n,0,t):s.nodes.push(t),s.nodes.length>0&&a&&a.children(":not(:last)").find(".simple-right-menu-expand").addClass("simple-right-menu-has-child"),t.id},moveNodeByPos:function(e,t,n,i){return i.removeNode(e.id),this.addNode(t,e,n)},removeNode:function(e){var t=this._getNodesMap(e),n=this;if(t){E()(t.nodesContainer).empty().remove(),t.divs.empty().remove();var i=null==t.parentId?this._getFakeRootNode():this._getNodesMap(t.parentId),s=i.node.nodes;if(s)for(var a=0,o=s.length;a<o;a++)if(s[a].id==e){this._traverseNodes(s[a],(function(e){delete n._nodesMap[e.id]})),s.splice(a,1);break}null!=t.parentId?s&&0==s.length&&(i.divs.children(":not(:last)").find(".simple-right-menu-expand").removeClass("simple-right-menu-has-child"),i.nodesContainer.empty().remove(),i.nodesContainer=void 0):E().isArray(this._data)||this._dropData()}else this._error("Error :: There are no node by ID = "+e)},removeChildren:function(e){var t=this._getNodesMap(e);if(t&&null!=t.node.nodes)for(var n=0,i=t.node.nodes.length;n<i;n++)this.removeNode(t.node.nodes[n].id)},getChildren:function(e){var t=this._getNodesMap(e);if(t&&null!=t.node.nodes)return t.node.nodes},_getEventElem:function(e){return E()(e.originalEvent.target||e.originalEvent.srcElement)},_getParentItemElement:function(e){return e.closest(".simple-right-menu-item")},_bindEvents:function(){var e=this,t=this._div,n=!1,i=!1;E()(this._contextDiv).unbind("."+this._id).bind("contextmenu."+this._id,(function(t){return n=!1,i=!1,e.onContextMenu(t),!1})).bind("click."+this.id,(function(){e._onMenuClose()})),t.unbind("dblclick contextmenu mouseover mouseenter mouseleave blur mousedown mouseup").bind("dblclick",(function(t){var n=e._getEventElem(t),i=e._getParentItemElement(n);0!=i.length&&ui.call(e,"onDblClick",i.data("id")),t.stopPropagation()})).bind("contextmenu",(function(e){e.stopPropagation(),e.preventDefault()})).bind("mouseover",(function(t){var n=e._getEventElem(t),i=e._getParentItemElement(n),s=i.data("id");if(null!=s){e._dropCloseTimeout();var a=e._getNodesMap(s),o=e._getNodesMap(a.parentId);if((o=null==o?e._getFakeRootNode():o).node&&o.node.nodes)for(var r=o.node.nodes,c=0,l=r.length;c<l;c++)if(s!=r[c].id&&1!=r[c].separator){var d=e._getNodesMap(r[c].id);d.nodesContainer&&d.nodesContainer.is(":visible")&&d.nodesContainer.fadeOut(100)}if(a.nodesContainer){var u=a.nodesContainer,h=E()(window).height();u.css({left:"",top:i.position().top}).fadeIn(100),e._fixPosition(h,u)}t.stopPropagation(),t.preventDefault()}})).bind("mouseleave",(function(){di.call(e)})).bind("mouseenter",(function(t){e._dropCloseTimeout(),t.stopPropagation(),t.preventDefault()})).bind("mouseup",(function(t){n&&function(t){var n=e._getEventElem(t),i=e._getParentItemElement(n);0!=i.length&&(e._onSelect(i),ui.call(e,"onClick",i.data("id")))}(t),i&&e._onMenuClose()})).bind("mousedown",(function(){n=!0,i=!1})).bind("blur",(function(){n?i=!0:e._onMenuClose()}))},_onSelect:function(e,t){var n=e.data("id"),i=this._getNodesMap(n);if(i&&!1!==i.node.enable){"function"==typeof i.node.func&&i.node.func.call(this,i.node);var s=this._objectEnv.selectedNodeId;this._div.is(":visible")&&this._onMenuClose();var a=this._objectEnv.selectedNodeId=n;!1!==t&&ui.call(this,"onSelect",a,s)}},selectNode:function(e,t){var n=this._getNodesMap(e);n&&this._onSelect(n.divs,t)},isFolder:function(e){var t=this._getNodesMap(e);return!(!t||!t.node.nodes)},getNode:function(e){var t=this._getNodesMap(e);return t?t.node:void 0},getParentNode:function(e){var t=this._getNodesMap(e);return t?this.getNode(t.parentId):void 0},getParentNodeId:function(e){var t=this.getParentNode(e);return null==t?void 0:t.id},setUserData:function(e,t,n){var i=this._getNodesMap(e);i&&(i.node.userData[t]=n)},getUserData:function(e,t){var n=this._getNodesMap(e);return n?n.node.userData[t]:void 0},showNode:function(e){var t=this._getNodesMap(e);t&&(t.divs.show(),t.node.visible=!0)},hideNode:function(e){var t=this._getNodesMap(e);t&&(t.divs.hide(),t.node.visible=!1)},enableNode:function(e){var t=this._getNodesMap(e);t&&(t.divs.removeClass("simple-right-menu-item-disable"),t.node.enable=!0)},disableNode:function(e){var t=this._getNodesMap(e);t&&(t.divs.addClass("simple-right-menu-item-disable"),t.node.enable=!1)},setTitle:function(e,t){var n=this._getNodesMap(e);if(n){var i=!1!==n.node.safeTitle?li(t):t;n.titleEl.html(i),n.node.title=t}},onContextMenu:function(e){hi.call(this,!1);var t=ui.call(this,"onBeforeShow",e);e&&"object"==typeof e&&e.clientX&&e.clientY&&(this._objectEnv.pos={left:e.clientX-2,top:e.clientY-2}),!1!==t&&this.show()},show:function(e){for(var t=this._div,n=this._data,i=0,s=E()(window).height(),a=0,o=n.length;a<o;a++){!1!==this._getNodesMap(n[a].id).node.visible&&i++}t.detach().hide(),i>0?(E()(document.body).append(t),e=null==(e=e||this._objectEnv.pos)?{left:0,top:0}:e,t.css({left:e.left-2,top:e.top-2,opacity:1e-5}),di.call(this),t.show(),this._fixPosition(s,t,!0),t.focus(),t.animate({opacity:1},100)):hi.call(this,!0)},hide:function(){this._onMenuClose()},reDraw:function(){this._setData(this._data),this._bindEvents()},base:function(){return this._div},_fixPosition:function(e,t,n){var i=t.outerHeight(),s=t.offset().top,a=parseInt(t.css("top")),o=e<i+s?e-(i+s):0;o=n?s+o:a+o,t.css("top",o-5)},destroy:function(){if(this._dropCloseTimeout(),this._data){var e=this._data.id;null!=e&&this.removeNode(e)}this._div&&this._div.unbind("click dblclick contextmenu mouseenter mouseleave click dblclick").stop().empty().remove(),this._contextDiv&&(this._contextDiv.unbind("contextmenu."+this._id),this._contextDiv=void 0),this._nodesMap=void 0,this._data=void 0,this._objectEnv=void 0,this._div=void 0,this._opt=null,E()(this).unbind()}};return i._init(e,t,n),i};var fi=n(9380).A;const mi=I().compile('<i class="ss-icon {{#unless checked}} off{{/unless}}">\n  {{#if checked}}\n    checkmark\n  {{/if}}\n</i>\n<span class="item-title {{#if checked}}checked{{else}}off{{/if}}">{{title}}</span><span class="hotkey {{#unless key}}hide{{/unless}}">{{{key}}}</span>\n');var gi=function(e,t,n,i){if(!(this instanceof gi))return new gi(e,t,n,i);(i=i||{}).onSelect||(i.onSelect=function(e){var t=this.getNode(e);if(t.command){var n=t.command.split(":"),i=n.shift(),s=n.join(":");fi.execute(i,s,t.params)}}),this.container=e,this.menu=pi(e,null,i)},bi=gi.prototype;bi.setItems=function(e,t){var n=this.menu;if(e){e=function(e){e=f().clone(e);var t=null,n=null;return f().map(e,(function(e){return t=e.command,f().isString(t)&&(n=fi.getCurrentKey(t),n=f().isUndefined(n)?null:u.default.formatCommand(n)),e._title||(e._title=e.title),e.title=mi({title:e._title,key:n,checked:e.checked}),e.safeTitle=!1,e}))}(e=f().clone(e));var i=Xt.Z.inContext;n.traverseNodes(e,(function(e){void 0===e.visible&&(e.visible=i(e.context,"",t,e.noDefaults))})),n.setData(e)}else n.setData([])},bi.hide=function(){this.menu.hide()},bi.remove=function(){this.menu.destroy()};const vi=gi;var yi={};yi.info=oi,yi.settings={},yi.get=async function(){return vi},i.default.register(yi);const wi=JSON.parse('{"name":"view-codio-settings-code","description":"Settings code editor","codio":{"fileName":"/.settings","view":"code"}}'),_i=navigator.platform.toUpperCase().indexOf("MAC")>=0,ki=/^\s*\[([\w-]+)\]$/,Pi=f().once((()=>{const e=["Ctrl","Alt","Shift"];_i&&e.push("Cmd");const t=((e,t)=>{const n=(e,t,i,s)=>{if(0!==e)for(let a=0;a<t.length;a++)n(e-1,t.slice(a+1),i.concat([t[a]]),s);else i.length>0&&(s[s.length]=i)},i=[];for(let s=t;s<e.length;s++)n(s,e,[],i);return i.push(e),i})(e,1);return f().map(t,(e=>e.join("+")+"+"))})),Ci=(e,t)=>f().map(e,(e=>({label:e,insertText:e,range:t})));Wn.Zo.SQ.registerCompletionItemProvider("codioSettings",["="],((e,t)=>{const n=a.Z.descriptions();let i=[];const s=((e,t)=>{let n=t.lineNumber;for(;n>-1;){const t=e.getLineContent(n),i=ki.exec(t);if(null!==i)return i[1];n--}})(e,t),o=((e,t)=>{const n=e.getLineContent(t.lineNumber),i=n.substring(0,t.column),s=i.indexOf("=");return-1===s?null:{value:i.substring(s+1).trim(),key:n.substring(0,s).trim()}})(e,t);let r=t.column;if(null!==o)i=((e,t,n)=>{let i=[];if(f().has(e,t)&&f().has(e[t],n)){const s=e[t][n];"list"===s.type?i=f().values(s.values):"boolean"===s.type?i=["true","false"]:"hotkey"===s.type&&(i=Pi())}return i})(n,s,o.key),r-=o.value.length,o.value.length>0&&(i=f().filter(i,(e=>0===e.indexOf(o.value))));else{const a=((e,t)=>e.getLineContent(t.lineNumber).substring(0,t.column).replace(/^\s+/,""))(e,t);r-=a.length,null!==s&&(i=((e,t)=>f().has(e,t)?f().keys(e[t]):[])(n,s)),f().forEach(n,((e,t)=>{i.push("["+t+"]")})),i=f().filter(i,(e=>0===e.indexOf(a)))}const c={startLineNumber:t.lineNumber,startColumn:r,endLineNumber:t.lineNumber,endColumn:t.column};return{suggestions:Ci(i,c)}}));const xi={build:function(){var e=a.Z.descriptions(),t=[];return f().forEach(e,(function(e,n){f().isEmpty(e)||(t.push("[",n,"]","\n\n"),function(e,t){const n=f().omitBy(e,(e=>e.readonly));f().forEach(n,(function(e,n){t.push(";",e.desc,"\n; Type: ",e.type," ","\n"),"list"===e.type&&function(e,t){t.push("; Values: \n"),f().forEach(e,(function(e,n){t.push(";  ",e," : ",n,"\n")}))}(e.values,t),t.push(n," = ",e.default,"\n\n")}))}(e,t),t.push("\n\n"))})),t.join("")}};var Ei=n(71970);class Si extends Ei.Z{constructor(e){super({...{fileContent:xi.build()||"",container:e},language:"codioSettings"})}activate(){return this._editor||(this._editor=new Wn.ZP(this._container)),super.activate(this._editor).then((()=>{this.editor().setOption("readOnly",!0)}))}}const Ii=Si;class Ai extends Ei.Z{constructor(e){super({...e,language:"codioSettings"})}}const Ti=Ai,ji=I().compile('<div class="codio-settings">\n    <div id="codio-settings-editor">\n      <h5>Your Preferences</h5>\n      <div class="settings-editor editor-size-mark"></div>\n    </div>\n    <div id="codio-settings-defaults">\n      <h5>Default Preferences <small>(read-only)</small></h5>\n      <div class="settings-editor editor-size-mark"></div>\n    </div>\n</div>\n');const Zi=class{constructor(e){this._container=e.container;const t=E()(ji());E()(this._container).append(t),this._default=new Ii(t.find("#codio-settings-defaults").find(".settings-editor"));const n=f().clone(e);n.fileContent=n.fileContent||"",n.container=t.find("#codio-settings-editor").find(".settings-editor"),this._editor=new Ti(n),this._bindEvents=[d.Z.subscribe("panel:size:change",this.updateSize.bind(this))]}async activate(e){return Promise.all([this._editor.activate(e),this._default.activate()])}afterActivate(){this._default.afterActivate(),this._editor.afterActivate(),this.updateSize()}deactivate(){this._default.deactivate(),this._editor.deactivate()}editor(){return this._editor.editor()}model(){return this._editor.model()}close(){this._container.empty(),f().each(this._bindEvents,(e=>d.Z.unsubscribe(e))),this._editor.close(),this._default.editor()&&this._default.editor().close()}updateSize(){f().defer((()=>{this._editor.layout(),this._default.layout()}))}};var Oi={};Oi.info=wi,Oi.get=async function(){return Zi},i.default.register(Oi);const Ni=JSON.parse('{"name":"install-software","description":"Install Software","codio":{"global":true,"title":"Install Software","urls":["install-software","install-software-logs"]}}'),Di=JSON.parse('{"install-software":{"desc":"Install Software"}}');const Mi=n(13302).ZP;var Ri=n(73007),Li=n.n(Ri),Fi=n(19093),Bi=n.n(Fi),Ui=n(68156),qi=n.n(Ui),Hi=n(19575).ED;function Gi(){qi().apply(this,arguments)}function Wi(){Bi().apply(this,arguments)}n(44941),Hi(Gi,qi()),Gi.prototype.getLocalResults=function(e,t){t(this.list)},Gi.prototype.setList=function(e){this.list=e},Hi(Wi,Bi()),Wi.prototype.getSearchProps=function(){return["name","description","installed","category"]},Wi.prototype.getSearchTokens=function(){return{name:"Name",description:"Description",installed:"Installed",category:"Category"}},Wi.prototype.doCategory=function(e,t){const n=t.category?t.category.toLowerCase():"";return this.compare(e.toLowerCase(),n)},Wi.prototype.doName=function(e,t){return this.compare(e.toLowerCase(),t.name.toLowerCase())},Wi.prototype.doDesc=function(e,t){return this.compare(e.toLowerCase(),t.description.toLowerCase())},Wi.prototype.doInstalled=function(e,t){var n=f().includes(["true",'"true"',"'true'"],e),i=f().includes(["false",'"false"',"'false'"],e);return n?t.installed:!!i&&!t.installed};const zi=function(e){var t=new(Li()),n=new Gi([new Wi]);return n.setList(e),t.addProvider(n),t.setList=function(e){this.clean(),n.setList(e)},t};var Vi=n(71e3);const Ki=u.default.KeyCode,Ji="li:not(.js-skip-menuitem)",Yi=function(e,t,n,i){let s=n+i;s=s>=t.length?0:s,s=s<0?t.length-1:s;const a=t[s],o=e.find("li[data-js-id='".concat(a.id,"']"));return!o.is(":visible")||o.hasClass("disabled")||o.hasClass("divider")?Yi(e,t,s,i):a},Qi=function(e){e.find('a[aria-expanded="true"]').attr("aria-expanded","false"),e.find('button[aria-expanded="true"]').attr("aria-expanded","false")},Xi=function(e,t,n){const i=e.find('[data-js-id="'.concat(t,'"]'));Qi(i.parent());const s=i.find("a, :input").first().focus();n?i.addClass("open"):i.removeClass("open"),s&&s.attr("aria-expanded")&&s.attr("aria-expanded","true")};function $i(e,t){!function(e){e.removeClass("open"),e.find(".open").removeClass("open"),Qi(e)}(e),t===Ki.ESC&&f().defer((function(){e.find("button").first().focus()}))}const es=(e,t,n)=>{for(let i=0,s=e.length;i<s;i++){const s=e[i];if(s.id===t)return{items:e,item:s,position:i,parentId:n};if(s.items){const e=es(s.items,t,s.parentId);if(e)return e}}},ts=(e,t)=>es(e,t)||!1,ns=function(e,t,n){const i=E()(n.target);if("block"===i.data("click"))return;const s=i.is("button")&&"dropdown"===i.data("toggle"),a=i.closest("li"),o=a.data("js-id"),r=ts(e,o);if(!r&&!s)return;const c=function(e,t){let n=e.which||e.keyCode;return Ki.TAB===n&&0!==t.closest(".dropdown-menu").length&&(n=e.shiftKey?Ki.UP:Ki.DOWN),n}(n,i);switch(c){case Ki.LEFT:case Ki.RIGHT:r&&function(e,t,n,i){const s=i.hasClass("dropdown-submenu")&&!f().isEmpty(t.item.items),a=Ki.LEFT===n&&i.hasClass("pull-left")||Ki.RIGHT===n&&i.hasClass("pull-right");if(s&&a){if(Ki.LEFT===n&&i.hasClass("pull-left")||Ki.RIGHT===n&&i.hasClass("pull-right")){!i.hasClass("open")&&i.addClass("open");const n=t.item.items[0];Xi(e,n.id,!f().isEmpty(n.items))}}else if(t.item.parentId){const i=e.find('[data-js-id="'.concat(t.item.parentId,'"]'));(Ki.LEFT===n&&i.hasClass("pull-right")||Ki.RIGHT===n&&i.hasClass("pull-left"))&&Xi(e,t.item.parentId,!1)}}(t,r,c,a);break;case Ki.DOWN:case Ki.UP:if(s&&c===Ki.DOWN){const n=ts(e,e[0].id);Xi(t,n.item.id,!f().isEmpty(n.items))}else r&&function(e,t,n,i){const s=Yi(e,t.items,t.position,Ki.UP===n?-1:1);i.removeClass("open"),Xi(e,s.id,!f().isEmpty(s.items))}(t,r,c,a);break;case Ki.RETURN:!s&&$i(t,c);break;case Ki.ESC:$i(t,c)}},is=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=u.default.GUID(4);e.attr("data-js-id",n);const i=ss(e).children(Ji);if(0!==i.length){const e=[];return i.each((function(){e.push(is(E()(this),n))})),{id:n,items:e,parentId:t}}return{id:n,parentId:t}},ss=e=>{const t=e.find(".dropdown-menu").first();return"menu"===t.attr("role")?t:t.find('ul[role="menu"]').first()},as=e=>{const t=[],n=e.hasClass("btn-group")?e:e.find(".btn-group").first();return ss(n).children(Ji).each((function(){t.push(is(E()(this)))})),t},os=()=>{E().makeArray(E()('[data-toggle="dropdown"]')).forEach((function(e){const t=E()(e.parentNode);t.hasClass("open")&&t.removeClass("open")}))},rs=e=>{const t=as(e);return d.Z.on(e,"mouseover.dd-helper",'a[role="menuitem"]',(function(e){const t=E()(e.target);Qi(t.closest("ul")),t.attr("aria-expanded")&&t.attr("aria-expanded","true")})),d.Z.on(e,"mouseout.dd-helper",'a[role="menuitem"]',(function(e){const t=E()(e.target);Qi(t.closest("ul"))})),d.Z.on(e.children('[data-toggle="dropdown"]'),"keydown.dd-helper",(function(e){const t=E()(e.target);let n=e.which||e.keyCode;n!==Ki.SPACE&&n!==Ki.RETURN||(e.stopPropagation(),os(),t.focus(),t.closest(".btn-group").addClass("open"))})),d.Z.on(e,"keydown.dd-helper",(function(n){f().defer((function(){ns(t,e,n)}))})),d.Z.on(E()(document),"keydown.dd-helper",(function(e){if(/input|textarea/i.test(e.target.tagName))return;const t=e.which||e.keyCode;t!==Ki.SPACE&&t!==Ki.RETURN||os()})),()=>d.Z.off(e,".dd-helper")},cs=I().compile('<div class="btn-group">\n    {{#each items}}\n        {{#if dropdown}}\n            <div class="btn-group">\n                <button type="button" class="btn dropdown-toggle {{#unless items.length}}disabled{{/unless}}" data-toggle="dropdown">\n                    {{title}}\n                    <span class="caret"></span>\n                </button>\n                <ul class="dropdown-menu" role="menu">\n                    {{#each items}}\n                        <li role="menuitem"><a role="menuitem" href="javascript:void(0)" data-filter="{{this.filter}}">{{title}}</a></li>\n                    {{/each}}\n                </ul>\n            </div>\n        {{else}}\n            <button type="button" class="btn {{#if default}}default-filter{{/if}}" data-filter="{{this.filter}}">{{title}}</button>\n        {{/if}}\n    {{/each}}\n</div>\n');function ls(e,t,n){function i(){var t=E()(this),i=t.is("button")&&t;e.find("button.btn").removeClass("btn-primary"),i&&i.addClass("btn-primary"),n&&n(t.data("filter"))}this.container=e,e.append(E()(cs({items:t})));var s=f().find(t,{default:!0});s?f().defer((function(){i.call(e.find(".default-filter"))})):f().each(t,(function(e){if(e.items&&(s=f().find(e.items,{default:!0})))return f().defer((function(){n(s.filter)})),!1})),d.Z.on(this.container,"click","[data-filter]",i),this._unbindDropdownEvents=rs(e.find(".btn-group"))}var ds=ls.prototype;ds.updateState=function(e){this.container.find("button.btn").removeClass("btn-primary"),this.container.find('button[data-filter="'+e+'"]').addClass("btn-primary")},ds.destroy=function(){this.container&&(d.Z.off(this.container,"click",'[data-filter="filter"]'),this._unbindDropdownEvents&&d.Z.unsubscribe(this._unbindDropdownEvents),this.container.remove(),this.container=null)};const us=ls;n(93132);var hs=n(9380).A,ps=it.Z.get("lxcSoftwareRepoUrl");n(44830);const fs=I().compile('<div class="install-software-message need-subscription">\n    <h4>Installing Software and Box access is only available if you have an active subscription.</h4>\n    <button class="btn close-connection btn-primary" tabindex="0" data-pos="1">Close</button>\n    <a href=\'/home/billing\' class="btn subscribe" tabindex="0" data-pos="0" data-target="dashboard">Subscribe Today</a>\n</div>\n'),ms=I().compile('<div id="install-software">\n    <h2>Install software</h2>\n    <section class="search">\n        <div id="filter-bar" class="pull-left"></div>\n        <div id="install-software-filter-bar" class="pull-left"></div>\n        <div class="pull-right search-container">\n            <label for="search" class="search">Search:</label>\n            <input id="search" type="text" class="software-search" placeholder="Search ..." autofocus>\n        </div>\n    </section>\n    <section class="parts-list"></section>\n</div>\n'),gs=I().compile('<table class="tablesorter table table-striped" data-table-group="projects-table">\n    <thead>\n    <tr>\n        <th>Name</th>\n        <th data-sorter="false">Install</th>\n        <th data-sorter="false">Version</th>\n        <th>Category</th>\n    </tr>\n    </thead>\n    <tbody>\n    {{#each parts}}\n    <tr class="data-row" data-name="{{name}}" data-script="{{script}}">\n        <td data-text="{{name}}" class="name">\n            <h5>{{name}}</h5>\n            <p>{{description}}</p>\n        </td>\n        <td>\n            <p class="hide">U</p>\n            <button class="qtip-here install-button"\n                data-action="install"\n                title="Install"\n                aria-label="Install {{name}} {{description}} version {{version}} category {{category}}"\n            >\n                <i class="ss-icon ss-downloadcloud" aria-hidden="true"></i>\n            </button>\n        </td>\n        <td class="version">\n            <p>{{version}}</p>\n        </td>\n        <td>{{category}}</td>\n    </tr>\n    {{/each}}\n    </tbody>\n</table>\n');var bs=function(e,t){if(!(this instanceof bs))return new bs(e,t);this.container=e,this.filename=t,this.events=[],this._inited=!1,this._partsList=[],this.categories={data_stores:"Data Stores",deployment:"Deployment",development_tools:"Dev Tools",libraries:"Libraries",shells:"Shells",programming_languages:"Languages",utilities:"Utilities",web_development:"Web Dev",IDE:"IDE"}};var vs=bs.prototype;vs.activate=function(){this._inited||this.container.block(),this._inited=!0;var e=this;return Mi.api.getCachedSubscriptions().then((function(t){var n=i.default.currentUser.get("details").get("created_at"),s=it.Z.get("boxAccessCutoffDate"),a=Mi.hasAnyUsableSubscription(t);i.default.currentUser.isInTrial||a||n<s?e._loadList().then((function(t){e.container.unblock(),e._partsList=t.packages,e._buildElements(),e._renderList(e._partsList),e._bindEvents(e._partsList)})).catch((function(){e.container.unblock();je.Z.error('We are unable to fetch data from the server right now. Please try again. If problems persist, contact us <a href="mailto:help@codio.com">help@codio.com</a>.')})):(e.container.unblock(),e.container.html(fs()),e._unbindEvents(),f().bind(e.events.push,e.events)(d.Z.on(e.container,"click",".close-connection",(function(){d.Z.publish("tab:close_by_path:"+e.filename)}))));f().delay((function(){e.container.find(".software-search").focus()}),100)}))},vs.deactivate=function(){},vs.close=function(){this.container.find(".qtip-here").qtip("destroy",!0),this.container.empty(),this.container.unblock(),this._unbindEvents()},vs._unbindEvents=function(){f().forEach(this.events,(function(e){d.Z.off(e)})),this.events.length=0},vs._buildElements=function(){if(!this.container.is(":empty"))return;this._element=E()(ms({})),this._element.find(".qtip-here").qtip(),this.container.append(this._element);const e=f()(this._partsList).map((e=>e.category)).uniq().compact().sort().value();var t=[];f().each(e,(function(e){t.push({title:e,filter:'category:"'+e+'"'})}));var n=[{title:"All",filter:"",default:!0},{title:"Category",dropdown:!0,items:t}],i=this;this.searchFilterBar=new us(i._element.find("#filter-bar"),n,i._applyFilter.bind(i))},vs._bindEvents=function(e){this._unbindEvents();var t=f().bind(this.events.push,this.events),n=this._element.find(".software-search"),i=this.search=zi(e),s=this._bindedSearchHandler=this._searchHandler.bind(this,i,n);t(d.Z.on(n,"input",s)),f().isEmpty(n.val())||s(),this._bindListActions()},vs._bindListActions=function(){var e=this;f().each(["install"],(function(t){var n='[data-action="'+t+'"]',i=e._element.find(n),s=e._action.bind(e,t);d.Z.on(i,"click",(function(){var e=E()(this).closest("tr"),t=e.data("name"),n=e.data("script");s(t,n)}))}))},vs._action=function(e,t,n){if("install"===e)this.container.find(".qtip-here").qtip("destroy",!0),(0,Vi.Z)(function(e,t){const n=f().compact(e.split("/")).pop(),i="master"!==n?" BRANCH=".concat(n," "):"";return"sudo ".concat(i,' bash -c "$(curl -fsSL ').concat(e,'tools/ansible.sh)" ').concat(t)}(ps,n),"Installing "+t)},vs._loadList=function(){const e=u.default.promise.deferred();return E().getJSON(ps+"package_list.json").then((t=>{t.packages=f().values(t.packages),e.resolve(t)})).fail((t=>e.reject(t))),e.promise},vs._renderList=function(e){this._datatable=E()(gs({parts:e})).tablesorter({theme:"basic",sortList:[[0,0]],widgets:["saveSort"],headers:{0:{sorter:"text"},1:{sorter:"text"},2:{sorter:"text"}},textSorter:function(e,t){return e.localeCompare(t)}}),this._datatable.find(".qtip-here").qtip(),this._element.find(".parts-list").empty().append(this._datatable)},vs._applyFilter=function(e){var t=this._element.find(".software-search");t.val(e),this._searchHandler(this.search,t)},vs._searchHandler=function(e,t){var n=t.val();this.searchFilterBar.updateState(n),e&&e.search(n,this._searchFinishedHandler.bind(this))},vs._searchFinishedHandler=function(e){this._renderList(e),this._bindListActions()},d.Z.subscribe("command:install-software",(function(){hs.execute("file","open",{ext:"install-software",filename:"Install Software"})}));const ys=bs;const ws=function(e,t,n,s,a){var o=i.default.currentProject;if(o&&o.isAdmin)return new ys(e,t,n,s,a)};i.default.register({info:Ni,hotkeys:Di,get:async function(){return ws}});const _s=JSON.parse('{"name":"codio-debugger","description":"Debugger","codio":{"global":true,"noFile":true,"title":"Debugger Settings","urls":"debugger"}}');var ks=n(8246);var Ps,Cs,xs=n(240),Es=n.n(xs),Ss=n(9380).A,Is=n(68058).I_,As=d.Z.create(n(86868)),Ts="menu-debug-button",js={id:"",title:"",command:"",onOff:{defaultValue:!1,toggle:!1}},Zs={title:"divider"},Os={title:"Configure....",command:"file:open",params:{ext:"debugger",filename:""},onOff:{defaultValue:!1,toggle:!1}};function Ns(e,t){void 0!==t&&function(e){var t=i.default.currentProject.guid;Is.set("default-debugger-"+t,e)}(t);var n,s=(n=i.default.currentProject.guid,Is.get("default-debugger-"+n)),a=f().find(e,(function(e){return e.id==="debug-"+s}));void 0===a&&(a=f().find(e,(function(e){return"divider"!==e.title&&"Configure...."!==e.title}))),void 0===a&&(a=e[0]),h.ZP.switchItemInGroup(Ts,a.id),Cs=a,h.ZP.setTitle(Ts,a.title)}d.Z.subscribe("command:debug:menu-start",(function(e,t){Ns(Ps,t.arg.data.uuid),As.startDebug(t.arg.data)})),d.Z.subscribe("command:debugger:executeByName",(function(e,t){var n=f().find(Ps,{title:t.title});if(void 0!==n){var i=n.params.data;Ns(Ps,i.uuid),As.startDebug(i)}})),d.Z.subscribe("command:debugger:execute",(function(){var e=Cs,t=e.command.split(":"),n=t.shift();t=t.join(":"),Ss.execute(n,t,e.params)}));const Ds=function(e){var t=[Os],n=f().map(e,(function(e){return function(e,t){var n=f().cloneDeep(js),i=e.name.trim(),s=e.uuid;return n.id="debug-"+s,n.title=i,n.command="debug:menu-start",n.params={data:e},t&&(n.onOff.defaultValue=!0),n}(e)}));n.length>0&&(t.push(Zs),t=t.concat(n)),Ps=t,h.ZP.setItems(Ts,t),Ns(t)},Ms=I().compile('<p class="alert alert-info{{#if targets}} hide{{/if}}">\n    You haven\'t yet created a Debugger Target.\n</p>\n<ul>\n    {{#each targets}}\n    <li data-uuid="{{uuid}}" id="{{uuid}}">\n        <h4>{{name}}</h4>\n\n        <div>\n            <section class="btn-toolbar">\n                <div class="btn-group">\n                    <button class="btn hint hint-top" data-action="debug" aria-label="Start debug" title="Start debug">\n                        <span class="hint-text">Start debug</span>\n                        debug\n                    </button>\n                </div>\n                <div class="btn-group">\n                    <button class="btn hint hint-top" data-action="edit" aria-label="Edit target" title="Edit target">\n                        <span class="hint-text">Edit target</span>\n                        <span class="iconify-inline" data-icon="@codio:mdi:pencil-outline"></span>\n                    </button>\n                </div>\n                <div class="btn-group">\n                    <button class="btn hint hint-top" data-action="remove" aria-label="Delete Debugger Target" title="Delete Debugger Target">\n                        <span class="hint-text">Delete</span>\n                        <span class="iconify-inline" data-icon="@codio:mdi:trash-can-outline"></span>\n                    </button>\n                </div>\n            </section>\n\n            <p>\n                {{#equals type \'PYTHON\'}}\n                Command arguments: {{command}}\n                {{/equals}}\n                {{#equals type \'PYTHON3\'}}\n                Command arguments: {{command}}\n                {{/equals}}\n                {{#equals type \'JAVA\'}}\n                Connection string: {{command}}\n                {{/equals}}\n                {{#equals type \'NODEJS\'}}\n                Command arguments: {{command}}\n                {{/equals}}\n                {{#equals type \'DENO\'}}\n                Command arguments: {{command}}\n                {{/equals}}\n                {{#equals type \'GDB\'}}\n                Command arguments: {{command}}\n                {{/equals}}\n            </p>\n            {{#if before}}\n                <p>Before launch: {{before}}</p>\n            {{/if}}\n\n        </div>\n    </li>\n    {{/each}}\n</ul>\n');var Rs=".codio";var Ls={parent:null,list:null,callback:null,targets:[],load:function(){var e=i.default.currentProject,t=this;e.exists(Rs)?e.file(Rs).then((function(e){try{var n=JSON.parse(function(e){return(new(Es())).strip(e)}(e.content));n.debugger instanceof Array&&(t.targets=n.debugger)}catch(e){t.targets=[]}Ds(t.targets),t.render()})):Ds([])},render:function(){if(this.parent){var e=this,t=E()(Ms({targets:this.targets}));this.parent.find("#debugger-target-list").html(t),d.Z.on(t,"click.debugger","button.btn",(function(){var t=E()(this).closest("li").data("uuid"),n=E()(this).data("action");e.callback(n,t)}))}}};d.Z.subscribe("project:open",(function(){Ls.load()}));var Fs=n(75121),Bs=n.n(Fs);const Us=JSON.parse('[{"type":"JAVA_SINGLE","slug":"Single Java File","command":"","before":"","single":true},{"type":"PYTHON","slug":"Python 2","command":"your_script.py","before":""},{"type":"PYTHON3","slug":"Python 3","command":"your_script.py","before":""},{"type":"JAVA","slug":"Java","command":"5105","before":""},{"type":"NODEJS","slug":"NodeJS","command":"app.js","before":""},{"type":"DENO","slug":"DENO","command":"app.ts","before":""},{"type":"C_SINGLE","slug":"Single C File","command":"","before":"","single":true},{"type":"CPP_SINGLE","slug":"Single C++ File","command":"","before":"","single":true},{"type":"GDB","slug":"C/C++","command":"","before":""}]');var qs=n(42052);const Hs="JAVA",Gs="JAVA_SINGLE",Ws="5105",zs="PYTHON",Vs="PYTHON3",Ks="NODEJS",Js="DENO",Ys="GDB",Qs="C_SINGLE",Xs="CPP_SINGLE",$s="No local variables",ea="Initializing",ta="Cant init connection to debugger tool, probably firewall error",na="Debug tool offline, trying to reconnect",ia="Debugger ready",sa="/home/codio/workspace/",aa="Program raised an unhandled exception.",oa="Program is paused",ra="Program is running",ca={RUNNING:"running",PAUSED:"paused",EXITED:"exited"},la="{{filepath}}",da="-agentlib:jdwp=transport=dt_socket,server=y,suspend=y,address=",ua=I().compile('<form action="/" method="post" id="debugger-target-creation" class="form-horizontal" novalidate>\n\n    <h3 class="page-header">\n        {{#equals current.uuid undefined}}\n            Creating a New Target\n        {{/equals}}\n        {{#if current.uuid}}\n            Configure Target\n        {{/if}}\n        <small><a href="https://docs.codio.com/common/develop/ide/debugger/debugger.html#debugger" target="_blank"><i class="ss-icon">help</i> Help</a></small>\n    </h3>\n\n    <fieldset id="debugger-target-common-inputs">\n\n        <input type="hidden" name="debug-target-id" id="uid" value="{{current.uuid}}" data-required="true">\n\n        <div class="control-group">\n            <label class="control-label hint hint-top" for="type">\n                Debugger type: <i class="ss-icon">help</i>\n                <span class="hint-text">Select programming language.</span>\n            </label>\n            <div class="controls">\n                <select name="debug-target-type" id="type" required data-required="true">\n                    <option value="" {{#equals current.name undefined}}selected="true"{{/equals}}>Select type...</option>\n                    {{#each list}}\n                        <option value="{{type}}" {{#equals ../current.type type}}selected="true"{{/equals}}>{{slug}}</option>\n                    {{/each}}\n                </select>\n            </div>\n        </div>\n\n        {{#if selected}}\n\n        <div class="control-group">\n            <label class="control-label hint hint-top" for="name">\n                Name: <i class="ss-icon">help</i>\n                <span class="hint-text">Used to identify this debugger target.</span>\n            </label>\n            <div class="controls">\n                <input type="text" name="debug-target-name" id="name" class="input-xlarge" value="{{current.name}}" placeholder="Target name..." maxlength="80" required data-required="true">\n            </div>\n        </div>\n\n        {{#equals current.type \'PYTHON\'}}\n        {{> python}}\n        {{/equals}}\n        {{#equals current.type \'PYTHON3\'}}\n        {{> python}}\n        {{/equals}}\n        {{#equals current.type \'JAVA\'}}\n        {{> java}}\n        {{/equals}}\n        {{#equals current.type \'JAVA_SINGLE\'}}\n        {{> java_single}}\n        {{/equals}}\n        {{#equals current.type \'NODEJS\'}}\n        {{> nodejs}}\n        {{/equals}}\n        {{#equals current.type \'DENO\'}}\n        {{> deno}}\n        {{/equals}}\n        {{#equals current.type \'C_SINGLE\'}}\n        {{> cpp_single}}\n        {{/equals}}\n        {{#equals current.type \'CPP_SINGLE\'}}\n        {{> cpp_single}}\n        {{/equals}}\n        {{#equals current.type \'GDB\'}}\n        {{> gdb}}\n        {{/equals}}\n        {{/if}}\n\n    </fieldset>\n\n    <div class="form-actions">\n        {{#if selected}}\n            <button type="submit" class="btn btn-primary">\n                {{#equals current.uuid undefined}}\n                Create Target\n                {{/equals}}\n                {{#if current.uuid}}\n                Save Target\n                {{/if}}\n            </button>\n        {{/if}}\n        <button type="reset" class="btn">Cancel</button>\n    </div>\n\n</form>\n');var ha={cpp:Xs,c:Qs};function pa(e,t){u.default.addErrorToInput(e,t),e.focus()}var fa={parent:null,form:null,callback:null,render:function(e){var t=this,n=this.parent.find("#debugger-target-create");if((e=f().cloneDeep(e))&&e.type===Hs)if(e.single)e.type=Gs,e.command=e.path,e.before=e.args;else{var i=e.command,s=i.match(/.+address=([0-9]+)/);s&&(i=s[1],e.command=i),e.agent=da+i}e&&e.type===Ys&&e.single&&(e.type=ha[e.lang],e.command=e.sourcePath,e.before=e.args);var a=E()(ua({list:Us,current:e||{},selected:!!e}));n.html(a),this.form=a,d.Z.on(a.find("button[type=reset]"),"click.debugger",(function(){n.empty()})),d.Z.on(a,"change.debugger","#type",(function(){var e=f().find(Us,{type:E()(this).val()});""!==E()(this).val()&&t.render(e)})),d.Z.on(a,"change.debugger","#command",(function(){a.find("#agent").val(da+a.find("#command").val())})),d.Z.on(a,"submit.debugger",E().proxy(this._onSubmission,null,this))},_commonTarget:async function(e,t,n,i){var s={type:t,command:e,before:n};return i&&(s=f().merge(s,i)),s},_pythonTarget:function(e,t,n){return this._commonTarget(e,t,n)},_nodejsTarget:function(e,t,n){return this._commonTarget(e,t,n)},_denoTarget:function(e,t,n){return this._commonTarget(e,t,n)},_javaTarget:function(e,t,n){return e=da+e,this._commonTarget(e,t,n)},_singleJavaTarget:function(e,t,n,s,a){var o=this,r=e;f().endsWith(r,".java")||r===la||(r+=".java");var c=function(){if(!a)return"";var e=f().endsWith(a,"/")?"":"/";return a+e}(),l=c+r;return function(){if(f().includes(r,la)){if(""!==c){const e="Only empty root folder allowed with {{filepath}}";return pa(E()("#root-folder"),e),Promise.reject(new Error(e))}if(e!==la){const e="Only {{filepath}} allowed";return pa(s,e),Promise.reject(new Error(e))}return Promise.resolve({className:la})}if(!i.default.currentProject.exists(l)){const e="File not exists";return pa(s,e),Promise.reject(new Error(e))}return i.default.currentProject.file(l).then((function(e){return qs.Z.parseClassInformation(e.content,l)}))}().then((function(i){var s=i.className;i.packageName&&(s=i.packageName+"."+s),t=Hs;var c=n;n=(a?"cd "+a+" && ":"")+"javac -g -d . "+r+" && java "+da+Ws+" "+s+" "+n;var d=a?e:l;return e=da+Ws,o._commonTarget(e,t,n,{single:!0,path:d,args:c,rootFolder:a})}))},_gdbTarget:function(e,t,n){return this._commonTarget(e,t,n)},_singleGdbTarget:function(e,t){var n=t.executablePath+" "+t.args;return this._commonTarget(n,Ys,t.beforeCmd,{single:!0,lang:e,additionalCompilerFlags:t.additionalCompilerFlags,sourcePath:t.sourcePath,args:t.args})},_singleCppTarget:function(e,t,n,i){var s,a,o=e,r=n,c=u.default.path.parse(o);if("cpp"===c.extension||"cc"===c.extension){var l=""===c.dir?"":c.dir+"/",d=i&&i.replace('"','"\\""'),h="/tmp/make"+Bs()(Math.random()),p=l+u.default.path.getFileName(c.name);a=["mkdir -p "+h+"/"+l,"ln -sf ~/workspace/"+o+" "+h+"/"+o,"cd "+h,'CXXFLAGS="-g '+d+'" make '+p].join(" && "),s=h+"/"+p}else a="g++ -g "+o+" -o "+(s="/tmp/program"+Bs()(Math.random()));return this._singleGdbTarget("cpp",{sourcePath:o,args:r,beforeCmd:a,executablePath:s,additionalCompilerFlags:i})},_singleCTarget:function(e,t,n,i){var s,a,o=e,r=n,c=u.default.path.parse(o);if("c"===c.extension){var l=""===c.dir?"":c.dir+"/",d=i&&i.replace('"','"\\""'),h="/tmp/make"+Bs()(Math.random()),p=l+u.default.path.getFileName(c.name);a=["mkdir -p "+h+"/"+l,"ln -sf ~/workspace/"+o+" "+h+"/"+o,"cd "+h,'CFLAGS="-std=c11 -g -lm '+d+'" make '+p].join(" && "),s=h+"/"+p}else a="gcc -std=c11 -g -lm "+o+" -o "+(s="/tmp/program"+Bs()(Math.random()));return this._singleGdbTarget("c",{sourcePath:o,args:r,beforeCmd:a,executablePath:s,additionalCompilerFlags:i})},_fetchCommandInformation:function(e,t,n,i,s){switch(t){case zs:case Vs:return this._pythonTarget(e,t,n,i);case Hs:return this._javaTarget(e,t,n,i);case Gs:return this._singleJavaTarget(e,t,n,i,s.rootFolder);case Ks:return this._nodejsTarget(e,t,n,i);case Js:return this._denoTarget(e,t,n,i);case Ys:return this._gdbTarget(e,t,n,i);case Xs:return this._singleCppTarget(e,t,n,s.additionalCompilerFlags,i);case Qs:return this._singleCTarget(e,t,n,s.additionalCompilerFlags,i)}},_onSubmission:function(e,t){t.preventDefault(),t.stopPropagation();var n=E()(this),i=n.find("#type"),s=n.find("#name"),a=n.find("#command"),o=i.val(),r=s.val(),c=a.val(),l=n.find("#before").val(),d=n.find("#uid").val();if(!o)return pa(i,"Select a type");if(!r)return pa(s,"Enter a name");if(!c)return pa(a,a.data().error||"Enter a command");var h={rootFolder:n.find("#root-folder").val(),additionalCompilerFlags:n.find("#additional-compiler-flags").val()};e._fetchCommandInformation(c,o,l,a,h).then((function(t){t.uuid=d||u.default.GUID(),t.name=r,e.callback(t),n.empty()}))}};var ma=d.Z.create(n(86868));const ga=I().compile('<div id="debugger-targets-editor">\n\n    <h2>\n        Debugger Targets\n        <button id="debugger-create-button" class="btn btn-primary" autofocus>Create...</button>\n    </h2>\n\n    <p>\n        A <i>Debugger Target</i> defines the configuration for a specific debugger type.\n    </p>\n\n    <hr>\n\n    <div id="debugger-target-create">\n    </div>\n\n    <div id="debugger-target-list">\n    </div>\n\n</div>\n');ks.Z.registerPartial("java",'<div class="control-group">\n    <label class="control-label hint hint-top" for="command">\n        Debugger port: <i class="ss-icon">help</i>\n        <span class="hint-text">Specify port for attach</span>\n    </label>\n    <div class="controls">\n        <input type="number" name="debug-target-command" id="command" class="input-xlarge" value="{{current.command}}" placeholder="Command arguments..." maxlength="80" required data-required="true">\n    </div>\n</div>\n\n<div class="control-group">\n    <label class="control-label hint hint-top" for="agent">\n        Debugger instruction:\n    </label>\n    <div class="controls">\n        <input readonly type="text" name="debug-target-agent" id="agent" class="input-xlarge" value="{{current.agent}}" placeholder="Command arguments..." maxlength="80" required data-required="true">\n    </div>\n</div>\n\n<div class="control-group">\n    <label class="control-label hint hint-top" for="before">\n        Launch: <i class="ss-icon">help</i>\n        <span class="hint-text">Command line command to run before start debugger. It can be command for run your Java application: java -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=5105 MyClass</span>\n    </label>\n    <div class="controls">\n        <input type="text" name="debug-target-before" id="before" class="input-xlarge" value="{{current.before}}" placeholder="Compile and start command..." maxlength="800" required data-required="true">\n    </div>\n</div>\n'),ks.Z.registerPartial("java_single",'<div class="control-group">\n    <label class="control-label hint hint-top" for="root-folder">\n        Root folder: <i class="ss-icon">help</i>\n        <span class="hint-text">Java class root folder. Leave empty for project root</span>\n    </label>\n    <div class="controls">\n        <input type="text" name="debug-target-root-folder" id="root-folder" class="input-xlarge" value="{{current.rootFolder}}" placeholder="Root folder..." maxlength="80" required data-required="true">\n    </div>\n</div>\n\n<div class="control-group">\n    <label class="control-label hint hint-top" for="command">\n        Classname or file path: <i class="ss-icon">help</i>\n        <span class="hint-text">Specify Classname or file path</span>\n    </label>\n    <div class="controls">\n        <input type="text" name="debug-target-command" id="command" class="input-xlarge" value="{{current.command}}" placeholder="Classname..." maxlength="80" required data-required="true" data-error="Enter classname or file path">\n    </div>\n</div>\n\n<div class="control-group">\n    <label class="control-label hint hint-top" for="before">\n        Arguments: <i class="ss-icon">help</i>\n        <span class="hint-text">Pass arguments to program</span>\n    </label>\n    <div class="controls">\n        <input type="text" name="debug-target-before" id="before" class="input-xlarge" value="{{current.before}}" placeholder="Arguments..." maxlength="800" required data-required="true">\n    </div>\n</div>\n'),ks.Z.registerPartial("python",'<div class="control-group">\n    <label class="control-label hint hint-top" for="command">\n        Command arguments: <i class="ss-icon">help</i>\n        <span class="hint-text">Path to your script for debug</span>\n    </label>\n    <div class="controls">\n        <input type="text" name="debug-target-command" id="command" class="input-xlarge" value="{{current.command}}" placeholder="Command arguments..." maxlength="80" required data-required="true">\n    </div>\n</div>\n\n<div class="control-group">\n    <label class="control-label hint hint-top" for="before">\n        Before launch: <i class="ss-icon">help</i>\n        <span class="hint-text">Command line command for run before start debugger</span>\n    </label>\n    <div class="controls">\n        <input type="text" name="debug-target-before" id="before" class="input-xlarge" value="{{current.before}}" placeholder="Before launch..." maxlength="800" required data-required="true">\n    </div>\n</div>'),ks.Z.registerPartial("nodejs",'<div class="control-group">\n    <label class="control-label hint hint-top" for="command">\n        Command arguments: <i class="ss-icon">help</i>\n        <span class="hint-text">Path to your script for debug</span>\n    </label>\n    <div class="controls">\n        <input type="text" name="debug-target-command" id="command" class="input-xlarge" value="{{current.command}}" placeholder="Command arguments..." maxlength="80" required data-required="true">\n    </div>\n</div>\n\n<div class="control-group">\n    <label class="control-label hint hint-top" for="before">\n        Before launch: <i class="ss-icon">help</i>\n        <span class="hint-text">Command line command for run before start debugger</span>\n    </label>\n    <div class="controls">\n        <input type="text" name="debug-target-before" id="before" class="input-xlarge" value="{{current.before}}" placeholder="Before launch..." maxlength="800" required data-required="true">\n    </div>\n</div>'),ks.Z.registerPartial("deno",'<div class="control-group">\n  <label class="control-label hint hint-top" for="command">\n      Command arguments: <i class="ss-icon">help</i>\n      <span class="hint-text">Path to your script for debug</span>\n  </label>\n  <div class="controls">\n      <input type="text" name="debug-target-command" id="command" class="input-xlarge" value="{{current.command}}" placeholder="Command arguments..." maxlength="80" required data-required="true">\n  </div>\n</div>\n\n<div class="control-group">\n  <label class="control-label hint hint-top" for="before">\n      Before launch: <i class="ss-icon">help</i>\n      <span class="hint-text">Command line command for run before start debugger</span>\n  </label>\n  <div class="controls">\n      <input type="text" name="debug-target-before" id="before" class="input-xlarge" value="{{current.before}}" placeholder="Before launch..." maxlength="800" required data-required="true">\n  </div>\n</div>'),ks.Z.registerPartial("gdb",'<div class="control-group">\n    <label class="control-label hint hint-top" for="command">\n        Launch: <i class="ss-icon">help</i>\n        <span class="hint-text">Path to your program for debug</span>\n    </label>\n    <div class="controls">\n        <input type="text" name="debug-target-command" id="command" class="input-xlarge" value="{{current.command}}" placeholder="./my_program arg1 arg2 arg3" maxlength="256" required data-required="true">\n    </div>\n</div>\n\n<div class="control-group">\n    <label class="control-label hint hint-top" for="before">\n        Before launch: <i class="ss-icon">help</i>\n        <span class="hint-text">Command line command for run before start debugger</span>\n    </label>\n    <div class="controls">\n        <input type="text" name="debug-target-before" id="before" class="input-xlarge" value="{{current.before}}" placeholder="Before launch..." maxlength="800" required data-required="true">\n    </div>\n</div>\n'),ks.Z.registerPartial("cpp_single",'<div class="control-group">\n    <label class="control-label hint hint-top" for="command">\n        File path: <i class="ss-icon">help</i>\n        <span class="hint-text">Specify file path</span>\n    </label>\n    <div class="controls">\n        <input type="text" name="debug-target-command" id="command" class="input-xlarge" value="{{current.command}}" placeholder="File path..." required data-required="true">\n    </div>\n</div>\n\n<div class="control-group">\n    <label class="control-label hint hint-top" for="before">\n        Arguments: <i class="ss-icon">help</i>\n        <span class="hint-text">Pass arguments to program</span>\n    </label>\n    <div class="controls">\n        <input type="text" name="debug-target-before" id="before" class="input-xlarge" value="{{current.before}}" placeholder="Arguments..." maxlength="800" required data-required="true">\n    </div>\n</div>\n\n<div class="control-group">\n    <label class="control-label hint hint-top" for="additional-compiler-flags">\n        Additional compiler flags: <i class="ss-icon">help</i>\n        <span class="hint-text">Pass flags (CXXFLAGS) to GNU C/C++ compiler</span>\n    </label>\n    <div class="controls">\n        <input type="text" name="debug-target-additional-compiler-flags" id="additional-compiler-flags" class="input-xlarge" value="{{current.additionalCompilerFlags}}" placeholder="Compiler flags..." maxlength="800" required data-required="true">\n    </div>\n</div>\n');var ba=function(e){if(!i.default.currentUser.isAnonymous()){var t=i.default.currentProject.access.control;if("OWNER"===t||"ADMIN"===t||"WRITE_FILES"===t){if(!(this instanceof ba))return new ba(e);this.handlers=[],this.container=e;var n,s,a=E()(ga());this.container.append(a),this.form=(n=e,s=this._onEdit.bind(this),fa.parent=n,fa.callback=s,fa),this.list=function(e,t){Ls.parent=e,Ls.callback=t;var n=f().debounce(Ls.load.bind(Ls),400);return f().forEach(["file:change:","item:created:","item:moved:","item:moved:#file:"],(function(e){d.Z.subscribe(e+Rs,n)})),Ls}(e,this._onItemAction.bind(this)),this.list.load()}}},va=ba.prototype;va._onItemAction=function(e,t){if("remove"===e)f().remove(this.list.targets,(function(e){return e.uuid===t})),ma.appendSection({section:"debugger",data:this.list.targets});else if("edit"===e){var n=f().find(this.list.targets,(function(e){return e.uuid===t}));this.form.render(n)}else if("debug"===e){var i=f().find(this.list.targets,(function(e){return e.uuid===t}));i&&ma.startDebug(i)}},va._onEdit=function(e){f().remove(this.list.targets,(function(t){return t.uuid===e.uuid})),this.list.targets.push(e),ma.appendSection({section:"debugger",data:this.list.targets})},va._bindEvents=function(){var e=this;d.Z.on(this.container,"click.debugger","#debugger-create-button",(function(){e._renderCreateForm()}))},va._renderCreateForm=function(){this.form.render()},va.activate=function(){if(!this.container){const e=new Error("No permission");return e.close=!0,Promise.reject(e)}this.render();var e=this;f().delay((function(){e.container.find("#debugger-create-button").focus()}),100)},va.deactivate=function(){},va.close=function(){},va.render=function(){this._bindEvents()};const ya=ba;var wa=n(82244),_a=n(4728);n(57568);var ka=n(4728).aO,Pa=function(e,t,n){if(n||(n={}),n.isEditable=!!n.isEditable&&n.isEditable,n.prepend=!!n.prepend&&n.prepend,n.emptyMessage=f().isEmpty(n.emptyMessage)?"Empty":n.emptyMessage,t||(t={}),!(this instanceof Pa))return new Pa(e,t,n);var i={core:{check_callback:n.isEditable,multiple:!0,themes:{dots:!1,responsive:!1},data:[]},plugins:["search","unique","guttericons","wholerow"]};this.emptyDiv=E()('<div class="codio-debugger-tree-empty"></div>').text(n.emptyMessage),this.stringMessageDiv=E()('<div class="codio-debugger-tree-empty"></div>'),this.container=e,this.treeContainer=E()('<div class="codio-debugger-tree"></div>'),this.treeDiv=this.treeContainer.jstree(i);var s=this,a=!1;this.treeDiv.on("activate_node.jstree",(function(e,t){if(n.isEditable){a=!0;var i=t.node.data,o=t.node.text;s.tree.edit(t.node,i,(function(e,r,c){if(e.text===i||c)s.tree.rename_node(t.node,o);else if("function"==typeof n.onChange){var l=ka.CHANGE;n.onChange(e.text,l,i)}a=!1}))}})).on("hover_node.jstree",(function(e,t){!a&&f().isFunction(n.onRemove)&&s.showRemoveButton(t.node,(function(){n.onRemove(t.node.data)}))})).on("dehover_node.jstree",(function(e,t){!a&&f().isFunction(n.onRemove)&&s.hideRemoveButton(t.node)})),this.tree=E().jstree.reference(this.treeDiv);var o=n.prepend?"prepend":"append";this.container[o](this.emptyDiv,this.stringMessageDiv,this.treeContainer),this.setData(t)},Ca=Pa.prototype;Ca.createNodes=function e(t){var n=[];if(f().isArray(t))f().each(t,(function(t){n.push(e(t))}));else if(f().isObject(t)){var i=t.type?" <em>("+f().escape(t.type)+")</em>":"",s=f().escape(f().trim(t.name||t.watch))+i;if(null===t.value||f().isArray(t.value))n=f().isEmpty(t.value)?{text:s+" : <i>empty</i>",data:s}:{text:s,children:e(t.value)};else{var a=f().escape(f().trim(t.value));n=f().isEmpty(s)?{text:a}:{text:s+" : "+a,data:s}}}else n={text:f().escape(f().trim(t))};return n},Ca.show=function(){this.treeContainer.removeClass("hide"),this.emptyDiv.removeClass("hide"),this.stringMessageDiv.removeClass("hide")},Ca.hide=function(){this.emptyDiv.addClass("hide"),this.treeContainer.addClass("hide"),this.stringMessageDiv.addClass("hide")},Ca.setData=function(e){if(f().isEmpty(e))return this.emptyDiv.removeClass("hide"),this.treeContainer.addClass("hide"),void this.stringMessageDiv.addClass("hide");f().isString(e)?(this.stringMessageDiv.text(e).removeClass("hide"),this.emptyDiv.addClass("hide"),this.treeContainer.addClass("hide")):(this.emptyDiv.addClass("hide"),this.treeContainer.removeClass("hide"),this.stringMessageDiv.addClass("hide")),this.tree.settings.core.data=e,this.tree.refresh(!0)},Ca.showRemoveButton=function(e,t){var n=this,i=this.tree.get_node(e,!0).find(".jstree-wholerow");const s=E()('\n<span aria-label="Remove" title="Remove" class="icon-removeNode">\n  <span class="iconify icon-removeNode" data-icon="@codio:mdi:trash-can-outline"></span>\n</span>\n  ');i.append(s),d.Z.on(i,"click.remove-node",".iconify",(function(){n.tree.delete_node(e),t()}))},Ca.hideRemoveButton=function(e){this.tree.get_node(e,!0).find(".icon-removeNode").remove()};const xa=Pa;var Ea=I().compile('<div class="codio-debugger-breakpoints-list">\n  {{#each data}}\n  <div class="codio-debugger-breakpoints-item">\n    <input class="codio-debugger-breakpoint-checkbox" type="checkbox" id="codio-debugger-breakpoint-{{path}}" data-path="{{path}}" data-line="{{line}}" {{#if active}}checked{{/if}}>\n    <label class="codio-debugger-breakpoint-label" for="codio-debugger-breakpoint-{{path}}">{{path}} : {{add1 line}}</label>\n    <a href="javascript:void(0)" class="codio-debugger-breakpoint-remove" data-path="{{path}}" data-line="{{line}}">Remove</a>\n  </div>\n  {{/each}}\n</div>'),Sa=function(e,t){if(!(this instanceof Sa))return new Sa(e,t);this.content=E()(Ea()),this._options=t,this.container=e,this.container.append(this.content)},Ia=Sa.prototype;Ia.bindEvents=function(){var e=this;this.content.find('input[type="checkbox"]').change((function(){var t=E()(this).is(":checked"),n=e._options.onChange;if(f().isFunction(n)){var i=E()(this).data();n(i.path,i.line,t)}})),this.content.find(".codio-debugger-breakpoint-remove").click((function(t){t.preventDefault();var n=e._options.onRemove;if(f().isFunction(n)){var i=E()(this).data();n(i.path,i.line)}E()(this).parent().remove()}))},Ia.unbindEvents=function(){this.content.find('input[type="checkbox"]').off()},Ia.setData=function(e){this.container.empty(),f().isArray(e.data)&&(e.data=e.data.sort((function(e,t){return e.path<t.path?-1:e.path>t.path?1:e.line-t.line}))),this.content=E()(Ea(e)),this.container.append(this.content),this.unbindEvents(),this.bindEvents()};const Aa=Sa;var Ta=function(e,t,n){if(!(this instanceof Ta))return new Ta(e,t,n);this.container=e,this.uuid=t,this.options=n,this._init()},ja=Ta.prototype;ja._init=function(){},ja.connect=function(){},ja.disconnect=function(){},ja.clear=function(){},ja.write=function(){},ja.destroy=function(){};const Za=Ta;var Oa=n(19575).ED,Na=function(e,t,n){if(!(this instanceof Na))return new Na(e,t,n);Na._sc.constructor.call(this,e,t,n)};Oa(Na,Za);var Da=Na.prototype;Da._init=function(){this.output=E()('<pre class="debugger-console-output"></pre>'),this.container.append(this.output),this.options&&this.options.initialMessages&&this.options.initialMessages.forEach(this.write.bind(this))},Da.clear=function(){this.output.empty()},Da.write=function(e){this.output.append(e)},Da.destroy=function(){this.output&&(this.output.remove(),this.output=null)};const Ma=Na;var Ra=n(4244),La=n(78267),Fa=n(83680),Ba=n.n(Fa);n(471);var Ua=n(19575).ED,qa="0",Ha="2",Ga="0",Wa="1",za=function(e,t,n){if(!(this instanceof za))return new za(e,t,n);za._sc.constructor.call(this,e,t,n)};Ua(za,Za);var Va=za.prototype;Va._init=function(){this.textEncoder=new TextEncoder,this.textDecoder=new TextDecoder,this.output=E()('<div class="debugger-xterm-console-output"></div>'),this.container.append(this.output),this._openTerminal()},Va._openTerminal=function(){const e=this.fitAddon=new La.FitAddon;var t=this.term=new Ra.Terminal({screenReaderMode:!0});t.loadAddon(e),this._subscribe(),t.open(this.output[0]),this.safeFit()},Va.safeFit=function(){try{this.fitAddon.fit()}catch(e){}},Va.connect=function(e){if(this.term){this.socket&&this.disconnect(),this.clear();var t="https:"===window.location.protocol?"wss://":"ws://",n=i.default.currentProject.backendSubDomain+"-"+e+"."+it.Z.get("boxDomain");this.socket=new(Ba())(t+n+"/ws",["tty"],{binaryType:"arraybuffer"}),this.socket.onopen=this._onSocketOpen.bind(this),this.socket.onmessage=this._onSocketData.bind(this),this.termResizeHandler=this._onTerminalResize.bind(this),this.termResizeDisposable=this.term.onResize(this.termResizeHandler),this.termDataHandler=this._onTerminalData.bind(this),this.termDataDisposable=this.term.onData(this.termDataHandler),this.safeFit()}},Va.disconnect=function(){this.socket&&(this.term&&(this.termResizeDisposable.dispose(),this.termDataDisposable.dispose()),this.socket.onopen=null,this.socket.onmessage=null,this.socket.close(),this.socket=null)},Va._subscribe=function(){this.term.attachCustomKeyEventHandler(this._onTermKeydown.bind(this)),this.resizeListenerId=d.Z.subscribe("panel:size:change",(()=>this.safeFit()))},Va._onTermKeydown=function(e){var t=this.term._core.isMac,n=t&&e.metaKey||!t&&e.ctrlKey,i=n&&67===e.keyCode,s=n&&86===e.keyCode;if(i||s)return i&&document.execCommand("copy"),s&&document.execCommand("paste"),!1},Va._onSocketOpen=function(){this.socket.send(this.textEncoder.encode(JSON.stringify({AuthToken:""}))),this.safeFit()},Va._onSocketData=function(e){var t=e.data,n=String.fromCharCode(new Uint8Array(t)[0]),i=t.slice(1);switch(n){case qa:this.term.write(this.textDecoder.decode(i));break;case Ha:var s=JSON.parse(this.textDecoder.decode(i)),a=this;Object.keys(s).forEach((function(e){a.term[e]=s[e]}))}},Va._onTerminalResize=function(e){if(this.socket.readyState===WebSocket.OPEN){var t=JSON.stringify({columns:e.cols,rows:e.rows});this.socket.send(this.textEncoder.encode(Wa+t))}},Va._onTerminalData=function(e){this.socket.readyState===WebSocket.OPEN&&this.socket.send(this.textEncoder.encode(Ga+e))},Va.clear=function(){this.term.clear()},Va.write=function(){},Va.destroy=function(){this.disconnect(),this.resizeListenerId&&(d.Z.unsubscribe(this.resizeListenerId),this.resizeListenerId=null),this.term&&(this.term.dispose(),this.term=null),this.output&&(this.output.remove(),this.output=null)};const Ka=za,Ja=I().compile('<div class="codio-debugger-instance">\n    <div class="codio-debugger-actions">\n        {{> buttons}}\n    </div>\n    <div class="debugger-statusbar"></div>\n    <div class="panel-group debugger-info-panel" role="tablist" aria-multiselectable="true">\n        <div class="panel panel-default">\n            <div class="panel-heading" role="tab">\n                <h4 class="panel-title">\n                    <a class="toggleButton" role="button" data-toggle="collapse" data-parent="#debugger-collapse" href="#collapse-frames" aria-expanded="true" aria-controls="collapse-frames">\n                        Call Stack\n                    </a>\n                </h4>\n            </div>\n            <div class="panel-collapse collapse in collapse-frames" role="tabpanel">\n                <div class="codio-debugger-running-overlay hide">\n                    Program is running\n                </div>\n                <div class="panel-body codio-debugger-frames">\n                    Frames are not available\n                </div>\n            </div>\n        </div>\n        <div class="panel panel-default">\n            <div class="panel-heading" role="tab">\n                <h4 class="panel-title">\n                    <a class="toggleButton" role="button" data-toggle="collapse" data-parent="#debugger-collapse" href="#collapse-locals" aria-expanded="false" aria-controls="collapse-locals">\n                        Local variables\n                    </a>\n                </h4>\n            </div>\n            <div class="panel-collapse collapse in collapse-locals" role="tabpanel">\n                <div class="codio-debugger-running-overlay hide">\n                    Program is running\n                </div>\n                <div class="panel-body codio-debugger-locals">\n                </div>\n            </div>\n        </div>\n        <div class="panel panel-default">\n            <div class="panel-heading" role="tab">\n                <h4 class="panel-title">\n                    <a class="toggleButton" role="button" data-toggle="collapse" data-parent="#debugger-collapse" href="#collapse-watches" aria-expanded="false" aria-controls="collapse-watches">\n                        Watches\n                    </a>\n                    <button class="btn active codio-debugger-add-watch collapse-watches" aria-label="Add watches" title="Add watches">\n                        <span class="iconify-inline" data-icon="@codio:mdi:plus-thick"></span>\n                    </button>\n                </h4>\n            </div>\n            <div class="panel-collapse collapse in collapse-watches" role="tabpanel">\n                <div class="panel-body codio-debugger-watches">\n                    <input class="codio-debugger-watch-input hide">\n                </div>\n            </div>\n        </div>\n        <div class="panel panel-default">\n            <div class="panel-heading" role="tab">\n                <h4 class="panel-title">\n                    <a class="toggleButton" role="button" data-toggle="collapse" data-parent="#debugger-collapse" href="#collapse-breakpoints" aria-expanded="false" aria-controls="collapse-breakpoints">\n                        Breakpoints\n                    </a>\n                </h4>\n            </div>\n            <div class="panel-collapse collapse in collapse-breakpoints" role="tabpanel">\n                <div class="panel-body codio-debugger-breakpoints">\n                    No Breakpoints\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="panel-group debugger-console-panel" role="tablist" aria-multiselectable="true">\n\n        <div class="panel panel-default">\n            <div class="panel-heading" role="tabpanel">\n                <h4 class="panel-title">\n                    <a class="toggleButton" role="button" data-toggle="collapse" data-parent="#debugger-collapse" href="#collapse-console" aria-expanded="false" aria-controls="collapse-console">\n                        Console\n                    </a>\n                    <button class="btn btn-active codio-debugger-clear-console collapse-console" aria-label="Clear console" title="Clear console">\n                        <span class="iconify-inline" data-icon="@codio:mdi:trash-can-outline"></span>\n                    </button>\n                </h4>\n            </div>\n            <div class="panel-collapse collapse in collapse-console" role="tabpanel">\n                <div class="panel-body debugger-output-panel">\n                    <div class="debugger-before-output-container hide">\n                        <span class="debugger-output-container-title">Output before launch:</span>\n                    </div>\n                    <div class="debugger-program-output-container">\n                        <span class="debugger-output-container-title hide">Program output:</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'),Ya=I().compile('<ul>\n    {{#each frames}}\n    <li>\n        <span {{#if current}}class="codio-debugger-active-frame"{{/if}}></span>\n        {{#if source}}\n            <a href="#" data-uuid="{{source.uuid}}" data-frame="{{framePos}}">\n        {{/if}}\n        {{#if className}}\n            {{methodName}}():{{fileLine}}, {{className}} ({{packageName}})\n        {{/if}}\n        {{#unless className}}\n            {{fileName}}({{fileLine}}){{methodName}}()\n        {{/unless}}\n        {{#if source}}\n            </a>\n        {{/if}}\n    </li>\n    {{/each}}\n</ul>');var Qa=d.Z.create(n(86868)),Xa=n(4728).aO,$a=n(38299).y;ks.Z.registerPartial("buttons",'<div class="btn-toolbar">\n    <button class="btn" data-action="resume" title="Resume program" disabled aria-label="Resume program">\n        <span class="iconify" data-icon="@codio:mdi:play"></span>\n    </button>\n    <button class="btn hide" data-action="restart" title="Restart program" disabled aria-label="Restart program">\n        <span class="iconify" data-icon="@codio:mdi:refresh"></span>\n    </button>\n    <button class="btn" data-action="step-over" title="Step over" disabled aria-label="Step over">\n        <span class="iconify" data-icon="@codio:mdi:debug-step-over"></span>\n    </button>\n    <button class="btn" data-action="step-into" title="Step into" disabled aria-label="Step into">\n        <span class="iconify" data-icon="@codio:mdi:debug-step-into"></span>\n    </button>\n    <button class="btn" data-action="step-out" title="Step out" disabled aria-label="Step out">\n        <span class="iconify" data-icon="@codio:mdi:debug-step-out"></span>\n    </button>\n    <div class="spacer"></div>\n    <button class="btn" data-action="stop" title="Stop debugging" aria-label="Stop debugging">\n        <span class="iconify" data-icon="@codio:mdi:close-thick"></span>\n    </button>\n</div>\n');var eo=function(e,t){if(!(this instanceof eo))return new eo(e,t);this.config=e,this.container=t,this.content=E()(Ja()),$a(this.content),this.handlers=[],this.clearInfoDelay=null,this.programOutputBuffer=[],this._init()},to=eo.prototype;to._init=function(){var e=this.config.uuid;this._bindCollapsible(),this.beforeOutput=new Ma(this.content.find(".debugger-before-output-container"),e),this._localsTree=xa(this.content.find(".codio-debugger-locals"),[],{emptyMessage:"Frame is not available"}),this._watchesTree=xa(this.content.find(".codio-debugger-watches"),[],{emptyMessage:"No watch expressions",prepend:!0,isEditable:!0,onChange:function(t,n,i){Qa.editWatch({uuid:e},{watch:t,state:n,old:i})},onRemove:function(t){Qa.editWatch({uuid:e},{watch:t,state:Xa.REMOVE})}}),this._bindWatchesInput(),this._breakpointsUI=Aa(this.content.find(".codio-debugger-breakpoints"),{onChange:function(e,t,n){Qa.breakpointState({path:e},{state:!0,line:t,active:n})},onRemove:function(e,t){Qa.breakpointState({path:e},{state:!1,line:t})}}),this._initEvents()},to._bindCollapsible=function(){var e=E()(this.content).find('[data-toggle="collapse"]');d.Z.on(e,"click",(function(e){e.stopPropagation(),e.preventDefault();var t=E()(e.target).attr("href").replace("#",".");E()(t).toggle(),E()(e.target).toggleClass("closed")}))},to._initEvents=function(){var e=this.config.uuid,t=this.handlers;function n(t,n){return void 0!==n?"command:debug:"+t+":"+n:"command:debug:"+t+":"+e}function i(e){t.push(e)}i(d.Z.subscribe(n("console:init"),this._onConsoleInit.bind(this))),i(d.Z.subscribe(n("console:append"),this._onConsoleAppend.bind(this))),i(d.Z.subscribe(n("console:clear"),this._onClear.bind(this))),i(d.Z.subscribe(n("status-message"),this._onStatusMessageChange.bind(this))),i(d.Z.subscribe(n("debugger-state"),this._onBreakpointState.bind(this))),i(d.Z.subscribe(n("draw-frame"),this._onDrawFrame.bind(this))),i(d.Z.subscribe(n("draw-locals"),this._onDrawLocals.bind(this))),i(d.Z.subscribe(n("draw-breakpoints"),this._onDrawBreakpoints.bind(this))),i(d.Z.subscribe(n("draw-watches"),this._onDrawWatches.bind(this)));var s=this.content.find(".codio-debugger-actions");d.Z.on(s,"click.debugger","button.btn",this._onBtnClick.bind(this)),d.Z.on(this.content,"click",".codio-debugger-add-watch",this._onAddWatch.bind(this)),d.Z.on(this.content,"click",".codio-debugger-clear-console",this._onClear.bind(this))},to._onDrawLocals=function(e,t){var n=f().isString(t)?t:this._localsTree.createNodes(t);this._localsTree.setData(n)},to._onDrawWatches=function(e,t){var n=this._watchesTree.createNodes(t);this._watchesTree.setData(n)},to._onDrawBreakpoints=function(e,t){this._breakpointsUI.setData({data:t})},to._onDrawFrame=function(e,t){var n=E()(Ya({frames:t}));d.Z.on(n,"click.debugger","a",this._onFrameClick.bind(this)),this.content.find(".codio-debugger-frames").html(n)},to._onFrameClick=function(e){e.stopPropagation(),e.preventDefault();var t=this.config.uuid,n=E()(e.target).data("frame");return Qa.frame({uuid:t},n),!1},to._onBtnClick=function(e){var t=E()(e.target).closest("button").data("action"),n=this.config.uuid;Qa[t]&&Qa[t]({uuid:n})},to._getWatchesInput=function(){return this.content.find("input.codio-debugger-watch-input")},to._onAddWatch=function(){this._getWatchesInput().removeClass("hide").focus()},to._bindWatchesInput=function(){this._getWatchesInput().on("blur",this._onWatchesInputBlur.bind(this)).on("keydown",this._onWatchesInputKeydown.bind(this))},to._hideWatchesInput=function(){this._getWatchesInput().addClass("hide").val("")},to._onWatchesInputBlur=function(e){e.stopImmediatePropagation(),e.preventDefault();var t=E()(e.target).val(),n=this.config.uuid;f().isEmpty(t)||Qa.editWatch({uuid:n},{watch:t,state:Xa.ADD}),this._hideWatchesInput()},to._onWatchesInputKeydown=function(e){var t=e.which;27===t&&E()(e.target).val(""),13!==t&&27!==t||(e.stopImmediatePropagation(),e.preventDefault(),E()(e.target).blur())},to._onBreakpointState=function(e,t){var n=this,i=this.content.find(".codio-debugger-actions");switch(i.find("button").attr("disabled",!0),i.find('button[data-action="stop"]').attr("disabled",!1),t.state){case ca.PAUSED:this.clearInfoDelay=null,i.find('button[data-action="resume"]').removeClass("hide"),i.find('button[data-action="restart"]').addClass("hide"),this.content.find(".codio-debugger-running-overlay").addClass("hide"),n.content.find(".codio-debugger-frames").removeClass("codio-debugger-inactive-panel"),n.content.find(".codio-debugger-locals").removeClass("codio-debugger-inactive-panel");["resume","step-over","step-into","step-out"].forEach((function(e){i.find('button[data-action="'+e+'"]').attr("disabled",!1)}));break;case ca.RUNNING:i.find('button[data-action="resume"]').removeClass("hide"),i.find('button[data-action="restart"]').addClass("hide");var s=u.default.promise.delay(150).then((function(){s===n.clearInfoDelay&&(n.content.find(".codio-debugger-running-overlay").removeClass("hide"),n.content.find(".codio-debugger-frames").addClass("codio-debugger-inactive-panel"),n.content.find(".codio-debugger-locals").addClass("codio-debugger-inactive-panel"))}));this.clearInfoDelay=s;break;case ca.EXITED:this.clearInfoDelay=null,this.content.find(".codio-debugger-running-overlay").addClass("hide"),n.content.find(".codio-debugger-frames").removeClass("codio-debugger-inactive-panel"),n.content.find(".codio-debugger-locals").removeClass("codio-debugger-inactive-panel");var a=i.find('button[data-action="restart"]');a.removeClass("hide"),a.attr("disabled",!1),n._localsTree.setData([]),n.content.find(".codio-debugger-frames").text("Frames are not available"),i.find('button[data-action="resume"]').addClass("hide"),this.programOutput&&f().delay((function(){n.programOutput.disconnect()}),500),this.programOutputBuffer=[]}},to._onClear=function(){this.beforeOutput.clear(),this.programOutput.clear()},to._onConsoleInit=function(e,t){var n=this.config.uuid,i=this.content.find(".debugger-program-output-container");t.port?(this.programOutput||(this.programOutput=new Ka(i,n)),this.programOutput.connect(t.port)):this.programOutput=new Ma(i,n,{initialMessages:this.programOutputBuffer})},to._onConsoleAppend=function(e,t){var n=t.text;"before"===t.stage?(this.content.find(".debugger-before-output-container").removeClass("hide"),this.beforeOutput.write(n)):(this.content.find(".debugger-program-output-container .debugger-output-container-title").removeClass("hide"),this.programOutput?this.programOutput.write(n):this.programOutputBuffer.push(n)),this.content.find(".debugger-console-panel .panel-body")[0].scrollIntoView(!1)},to._onStatusMessageChange=function(e,t){this.content.find(".debugger-statusbar").text(t)},to.render=function(){return this.content},to.close=function(){this.handlers.forEach((function(e){d.Z.unsubscribe(e)})),this.programOutput&&this.programOutput.destroy()};const no=eo;var io=n(43440),so=n.n(io),ao=n(72129);n(28190);const oo=ao.default.containerManager;var ro=d.Z.create(n(86868)),co={},lo={},uo=null,ho=!1,po=null,fo=null;let mo=!1;function go(){return it.Z.get("backendSchema")+i.default.currentProject.backendSubDomain+"-9001."+it.Z.get("boxDomain")}function bo(){function e(){ho=!0,fo=null}null===fo&&(fo=function(){const e=u.default.promise.deferred(),t=E().ajax({url:go()+"/p/info",type:"GET",contentType:"application/json; charset=UTF-8",xhrFields:{withCredentials:!0},timeout:1e3});return t.then(e.resolve).fail((()=>e.reject(new Error("failed to connect to debugger")))),e.promise}().then(e).catch((function(){const e=i.default.currentProject.guid;return oo.run(e,"/usr/share/cdb/cdb.sh",{})})).then(e).catch(e))}function vo(){if(!uo){var e="WebSocket"in window;uo=new(so())(go(),{reconnect:{retries:10,min:1e3,factor:2},strategy:["online","timeout","disconnect"],websockets:e,pingTimeout:25e3,transport:{transports:["websocket"]}});var t=0;uo.on("open",(function(){f().each(co,(function(e,t){ro.connectionInit({uuid:t})})),t=0})),uo.on("reconnect",(function(){ho&&(++t>12||mo)&&(f().each(co,(function(e,t){ro.connectionOffline({uuid:t})})),mo||bo(),t=0,f().each(lo,(function(e){e.reject(new Error("connection failure"))})),lo={})})),uo.on("data",(function(e){var t=e;try{t=JSON.parse(e)}catch(e){}t.forEach((function(e){!function(e){var t=e.commandId;t?lo[t]&&(lo[t].resolve(e.data),delete lo[t]):ro.connectionData({uuid:e.debuggerTargetId,topic:e.topic},e.data)}(e)}))}))}}function yo(){uo&&(f().each(lo,(function(e){e.reject(new Error("connection closed"))})),uo.destroy(),uo=null,lo={},f().each(co,(function(e,t){ro.connectionOffline({uuid:t})})),co={})}d.Z.subscribe("project:shutdown",(function(){mo=!0,yo()})),d.Z.subscribe("app:timeChunkMsSpent",(()=>mo=!1));const wo=function(e){if(co[e])return co[e];var t=function(e){return bo(),vo(),function(t){if(!uo)return Promise.reject(new Error("no connection"));var n=u.default.promise.deferred(),i=u.default.GUID();return t.cid=i,"exit"===t.type?(null===po?uo.write(JSON.stringify([t])):(uo.write(JSON.stringify(po)),po=null),delete co[e],0===f().keys(co).length&&yo()):(null===po?(po=[t],setTimeout((function(){if(!uo)return po&&po.forEach((function(e){var t=e.cid;lo[t]&&lo[t].reject(new Error("no connection"))})),void(po=null);uo.write(JSON.stringify(po)),po=null}),1)):po.push(t),lo[i]=n),n.promise}}(e);return co[e]=t,t};var _o=n(72736),ko={};function Po(e,t,n,i){f().includes(e[t],la)&&(n?(e[t]=e[t].replace(la,n),i.updated=!0):i.canStart=!1)}const Co={updateConfigWithCurrent:async function(e){var t=f().cloneDeep(e),n={canStart:!0,updated:!1},s=function(){if(i.default&&i.default.currentEditor)return i.default.currentEditor.filename}();if(Po(t,"command",s,n),Po(t,"before",s,n),Po(t,"sourcePath",s,n),n.updated&&(t.uuid=t.uuid+s),!n.canStart)throw new Error("No active file for debug.");return t},_onStop:function(e){if(ko[e]){var t=ko[e].instance;t.close&&t.close().catch((()=>{})),d.Z.unsubscribe(ko[e].subId),delete ko[e]}},debug:function(e,t){var n=e.uuid;if(ko[n]){var i=ko[n].instance;ko[n].failed&&(i.config=e,i._onConnectionInit())}else{var s=d.Z.subscribe("command:debug:stop:"+n,this._onStop.bind(this,n));ko[n]={instance:{failed:!1},subId:s},_o.Z.emit(_o.F.DEBUGGER.OPEN,{type:e.type}),Te.Z.saveAllAndWait().then((function(){ko[n]&&(ko[n].instance=new t(e,wo(n)))}))}}};var xo=d.Z.create(n(86868)),Eo=function(e,t){if(!(this instanceof Eo))return new Eo(e,t);this.stream=t,this.config=e,this.uuid=e.uuid,this.handlers=[],this._initialiseDebugger=!1,this._init()},So=Eo.prototype;So._init=function(){this._subscribeEvents(),this._onConnectionInit()},So._subscribeEvents=function(){var e=this.uuid,t=this.handlers;function n(e){t.push(e)}function i(t,n){return n?"debugger:connection:"+t+":"+e:"command:debug:"+t+":"+e}n(d.Z.subscribe(i("init",!0),this._onConnectionInit.bind(this))),n(d.Z.subscribe(i("offline",!0),this._onConnectionOffline.bind(this))),n(d.Z.subscribe(i("data:#topic",!0),this._onConnectionData.bind(this))),n(d.Z.subscribe(i("frame"),((e,t)=>this._onChangeFrame(e,t).catch((()=>{}))))),n(d.Z.subscribe(i("resume"),(()=>this._onResume().catch((()=>{}))))),n(d.Z.subscribe(i("step-over"),(()=>this._onStepOver().catch((()=>{}))))),n(d.Z.subscribe(i("step-into"),(()=>this._onStepInto().catch((()=>{}))))),n(d.Z.subscribe(i("step-out"),(()=>this._onStepOut().catch((()=>{}))))),n(d.Z.subscribe(i("restart"),(()=>this._onRestart().catch((()=>{}))))),n(d.Z.subscribe(i("send-stdin"),(()=>this._onSendStdin().catch((()=>{}))))),n(d.Z.subscribe("command:debug:breakpoint-update",this._onBPUpdate.bind(this))),n(d.Z.subscribe(i("update-watch"),this._onWatchUpdate.bind(this)))},So._jid=function(){return{uuid:this.uuid}},So._command=function(e){return this._stream("command",{command:e})},So._stdin=function(e){return this._stream("stdin",{data:e})},So._stream=function(e,t){var n={uuid:this.uuid,type:e};return t&&f().assign(n,t),this.stream(n)},So._consoleMessage=function(e,t){xo.consoleAppend(this._jid(),{stage:t?"before":"program",text:e})},So._statusMessage=function(e){xo.statusMessageChange(this._jid(),e)},So._deactivateLineInEditor=function(e){e&&e.source&&xo.breakpointClear({path:e.source.path})},So._activateLineInEditor=function(e,t){t&&this._deactivateLineInEditor(t),e&&e.source&&f().defer((function(){var t=parseInt(e.fileLine,10)-1;xo.breakpointHit({path:e.source.path},t),i.default.ide.open("tree",e.source.path,{highlight:{ref:t,count:1,debuggerLine:!0}})}))},So.close=function(){return this.handlers.forEach((function(e){d.Z.unsubscribe(e)})),this._cleanupState(),this._stream("exit")},So._onRestart=async function(){var e=this;return Te.Z.saveAllAndWait().then((function(){xo.consoleClear(e._jid()),e._onConnectionInit(!0)}))},So._onSendStdin=async function(){},So._onConnectionInit=function(){},So._onConnectionOffline=function(){},So._onConnectionData=function(){},So._onChangeFrame=async function(){},So._onResume=async function(){},So._onStepOver=async function(){},So._onStepInto=async function(){},So._onStepOut=async function(){},So._onBPUpdate=function(){},So._onWatchUpdate=function(){};const Io=Eo;var Ao=n(19575).ED,To=n(19575).Bd.bold,jo=d.Z.create(n(86868)),Zo=function(e,t){if(!(this instanceof Zo))return new Zo(e,t);Zo._sc.constructor.call(this,e,t)};Ao(Zo,Io);var Oo=Zo.prototype;function No(){var e="/"+i.default.currentProject.path+"/install-software";je.Z.error(["It looks like Java is not installed.<br/>","Either connect your project to the appropriate ".concat(it.Z.get("whitelabel")," certified stack or "),"you can install Java from ","the 'Tools-><a href=\""+e+"\">Install software</a>' menu."].join(""))}Oo._setBreakpoints=function(){var e=this,t=[];return wa.ZP.breakpoints().then((function(n){var s=f().filter(n,(function(t){return(!e.config.rootFolder||f().startsWith(t.path,e.config.rootFolder))&&f().endsWith(t.path,".java")})),a=f().filter(s,(function(e){return e.active}));jo.drawBreakpoints(e._jid(),s);var o=[];return f().each(a,(function(e){if(i.default.currentProject.exists(e.path)){var n=i.default.currentProject.file(e.path).then((function(t){return qs.Z.parseClassInformation(t.content,e.path,e.line)})).then((function(n){t.push({item:e,information:n})}));o.push(n)}})),Promise.all(o)})).then((function(){var n=t.map((function(e){var t=e.information.packageName;return{classId:(t?t+".":"")+e.information.className,line:e.item.line}}));return e._command({type:"breakpoints",breakpoints:n})}))},Oo._parseFrame=function(e,t,n){var s=this,a=/^.*\[(\d+)\]\s(.+)\s\((.+):([\d,]+)\)$/;this.threadName=t,this.currFramePos=parseInt(n,10);var o=e.split("\n"),r=f().map(o,(function(e){var t=e.match(a);if(t){var n=t[2].split("."),i=n.pop(),o=n.pop(),r=o,c=n.join(".");o&&-1!==o.indexOf("$")&&(r=o.split("$")[0]);var l=t[4];l=l.replace(/,/g,"");var d=parseInt(t[1],10);return{framePos:d,methodName:i,packageName:c,className:o,parentClassName:r,fileName:t[3],fileLine:parseInt(l,10),pc:t[5],current:d===s.currFramePos}}})).filter((function(e){return!!e})),c=i.default.currentProject.files(),l=f().filter(c,(function(e){return f().find(r,(function(t){return(!s.config.rootFolder||f().startsWith(e.path,s.config.rootFolder))&&t.fileName===e.name}))})),d=[],u=[];return f().each(l,(function(e){var t=i.default.currentProject.file(e.path).then((function(t){return qs.Z.parseClassInformation(t.content,e.path)})).then((function(t){u.push({item:e,information:t})}));d.push(t)})),Promise.all(d).then((function(){var e=f().map(r,(function(e){var t=f().find(u,(function(t){return t.information.fileName===e.fileName&&t.information.packageName===e.packageName&&t.information.className===e.parentClassName}));return t&&(e.source={uuid:s.uuid,path:t.item.path}),e}));s.frames=e;var t=e[s.currFramePos-1];s._activateLineInEditor(t),jo.drawFrame(s._jid(),e)}))},Oo._calcWatches=function(){var e=this,t={};return _a.ZP.watches(this.uuid).then((function(n){var i=[];return f().each(n,(function(n){var s=e._command({type:"watches",watches:[n.watch]}).then((function(e){e.error||(t[n.watch]=e.result[n.watch])}));i.push(s)})),Promise.all(i)})).then((function(){var n=[];f().isEmpty(t)||f().each(t,(function(t,i){t=t.replace(e.threadName+"["+e.currFramePos+"] ","").replace(/Requested stack frame is no longer active: \d+\n/,"");var s=(t=f().trim(t)).split("\n"),a={watch:i,value:t,error:!1},o=s[0],r="com.sun.tools.example.debug.expr.ParseException: ";if(-1!==t.indexOf(r))o=o.replace(r,""),a.value=o,a.error=!0;else{var c=o.indexOf(i);a.value=-1!==c?t.substring(c+i.length+3):t}n.push(a)})),jo.drawWatches(e._jid(),n)}))},Oo._parseLocals=function(e){if(e.error)jo.drawLocals(this._jid(),e.error);else if(f().isEmpty(e.vars))jo.drawLocals(this._jid(),$s);else{var t=f().map(e.vars,(function(e,t){var n=e.split(t,2)[1]||"";return qs.Z.parseLocalVariableInformation(n,t)}));jo.drawLocals(this._jid(),t)}},Oo._initDebuggerState=function(){this._setBreakpoints(),this._calcWatches()},Oo._onBPUpdate=function(){this._setBreakpoints()},Oo._onWatchUpdate=function(){this._calcWatches()},Oo._onConnectionInit=function(){if(!this._initialiseDebugger){this._initialiseDebugger=!0,this._statusMessage(ea);var e=this;return this.stream(this.config).then((function(t){if(e._initialiseDebugger=!1,jo.consoleInit(e._jid(),{port:t.terminalPort}),t.error)switch(jo.debuggerState(e._jid(),{state:ca.EXITED}),t.code){case"BEFORE_ERROR":e._statusMessage("Got an error before initializing the debugger.");break;case"NO_TARGET":e._statusMessage("Could not open the connection for debugging.");e._consoleMessage(To('<a href="https://docs.codio.com/common/develop/ide/debugger/debugger.html#debugger" target="_blank">No connection help</a>\n\n'),!0);break;case"NO_PREREQUISITES":e._statusMessage("Error starting the debugger"),No()}else t.isContinuing?(jo.debuggerState(e._jid(),{state:ca.RUNNING}),e._statusMessage(ia),e._initDebuggerState(),e._command({type:"get_state"}).then((function(t){if(!t.error){var n=t.result;if(!n.isRunning){var i=n.frame;e._parseFrame(i.whereOutput,i.threadName,i.currFramePos),e._parseLocals(i.localsOutput),jo.debuggerState(e._jid(),{state:ca.PAUSED}),e._statusMessage(oa)}}}))):(jo.debuggerState(e._jid(),{state:ca.RUNNING}),e._statusMessage(ia),e._initDebuggerState())})).catch((function(){e._initialiseDebugger=!1,e._statusMessage(ta)}))}},Oo._onConnectionData=function(e,t){var n=e&&e.topic;"before"===n?(/javac?: (?:command )?not found/i.test(t)&&No(),this._consoleMessage(t)):"in"===n?this._processOutput(t):"exited"===n&&(this._cleanupState(),this._statusMessage("Program exited"),jo.debuggerState(this._jid(),{state:ca.EXITED}))},Oo._processOutput=function(e){if(e)switch(e.type){case"PAUSED_STATE":var t=e.frame;this._parseFrame(t.whereOutput,t.threadName,t.currFramePos),this._parseLocals(t.localsOutput),jo.debuggerState(this._jid(),{state:ca.PAUSED});var n=e.isException?aa:oa;this._statusMessage(n),this._changeFrameInProgress=!1,this._calcWatches();break;case"EXITED":this._statusMessage(e.output),this._cleanupState(),jo.debuggerState(this._jid(),{state:ca.EXITED})}},Oo._onConnectionOffline=function(){this._cleanupState(),this._statusMessage(na)},Oo._cleanupState=function(){if(jo.debuggerState(this._jid(),{state:ca.RUNNING}),f().isNumber(this.currFramePos)){var e=this.frames[this.currFramePos-1];this._deactivateLineInEditor(e)}this.threadName=null,this.currFramePos=null,this.frames=null},Oo._onResume=async function(){return this._resumeAction("cont")},Oo._resumeAction=function(e){return this._statusMessage(ra),this._cleanupState(),this._command({type:"resume",action:e})},Oo._onStepOver=async function(){return this._resumeAction("next")},Oo._onStepInto=async function(){return this._resumeAction("step")},Oo._onStepOut=async function(){return this._resumeAction("step up")},Oo._onChangeFrame=async function(e,t){if(!this._changeFrameInProgress){var n=parseInt(this.currFramePos,10),i=parseInt(t,10);if(n!==i){this._changeFrameInProgress=!0;var s=Math.abs(i-n),a=i-n>0?"up":"down";return this._cleanupState(),this._command({type:"change_frame",action:a+" "+s})}}};const Do=Zo,Mo={updateConfigWithCurrent:async function(e){var t=f().cloneDeep(e);if(f().includes(t.before,la)){if(i.default&&i.default.currentEditor){var n=i.default.currentEditor.filename;if(f().endsWith(n,".java"))return i.default.currentProject.file(n).then((function(e){return qs.Z.parseClassInformation(e.content,n)})).then((function(t){var i=t.className;t.packageName&&(i=t.packageName+"."+i);var s=e.before.replace(la,n).replace(la,i);return{uuid:e.uuid+n,type:Hs,command:e.command,before:s,single:!0,args:e.args,rootFolder:""}}));throw new Error("It should be java file.")}throw new Error("No active file for debug.")}return Promise.resolve(t)},debug:function(e){Co.debug(e,Do)}},{inherit:Ro}=u.default;var Lo=u.default.str.bold,Fo=d.Z.create(n(86868)),Bo=function(e,t){if(!(this instanceof Bo))return new Bo(e,t);this.defferedBreakpoints=!1,this.defferedWatches=!1,this.currentParsedOutput=[],this.lastProgramOutput="",this.commandDeferreds={},Bo._sc.constructor.call(this,e,t)};Ro(Bo,Io);var Uo=Bo.prototype;function qo(e){return f().isArray(e)||f().isObject(e)?f().map(e,(function(e){var t=f().has(e,"length")?"["+e.length+"]":"";return{name:JSON.stringify(e.name),type:e.type+t,value:qo(e.value)}})):JSON.stringify(e)}Uo._fullCommand=function(e){var t,n=u.default.promise.deferred(),i=(t=Bs()(Math.random()+Math.random()),parseInt(t.substring(0,8),16).toString());this.commandDeferreds[i]=n;var s=e+"\np '~~Codio_cmd_done "+i+"~~'";return this._command(s).catch((()=>{})),n.promise},Uo._processOutput=function(e){this.lastProgramOutput+=e;var t=this.lastProgramOutput.split("(Pdb) ");if(1!==t.length){t.shift();var n=this;t.forEach((function(e){var t=e.match(/^~~Codio_exit: (.+?)~~\n$/);if(t){var i=t[1];switch(i){case"on_error":return void n._statusMessage(aa);case"normal":n._statusMessage("Program exited normally.");break;case"error":n._statusMessage("Program exited with an error.");break;case"syntax_error":n._statusMessage("Program has a syntax error.");break;default:var s=i.split(":");s.length>1&&"sys_exit"===s[0]&&n._statusMessage("Program exited with the exit code: "+s[1])}return n._cleanupState(),void Fo.debuggerState(n._jid(),{state:ca.EXITED})}var a=e.match(/^'~~Codio_cmd_done (\w+)~~'\n$/);if(a){var o=a[1];n.commandDeferreds[o]&&(n.commandDeferreds[o].resolve(n.currentParsedOutput.join("")),delete n.commandDeferreds[o]),n.currentParsedOutput=[]}else n.currentParsedOutput.push(e)}));var i=n.currentParsedOutput.pop();this.lastProgramOutput="(Pdb) "+(i||"")}else this.lastProgramOutput=""},Uo._parseFrame=function(e){if(e){var t=this,n=e.split("\n");n.splice(0,3);var s=/^( {2}|> )(.*)\(([0-9]+)\)(.*)\(\)(->[0-9]*)?$/,a=-1,o=f()(n).reverse().map((function(e){var n=e.match(s);if(n){a++;var o="> "===n[1];o&&(t.currFramePos=a);var r=n[2],c=null;return 0===r.indexOf(sa)&&(r=r.substring(sa.length,r.length),i.default.currentProject.exists(r)&&(c={uuid:t.uuid,path:r})),{framePos:a,methodName:n[4],fileName:r,fileLine:n[3],source:c,current:o}}})).filter((function(e){return!!e})).value();this.frames=o;var r=o[t.currFramePos];t._activateLineInEditor(r),Fo.drawFrame(t._jid(),o)}},Uo._onBPUpdate=function(){this.frames?this._updateBreakpoints():this.defferedBreakpoints||(this.defferedBreakpoints=!0,this._statusMessage("Deferred breakpoints update - will be done on next stop"))},Uo._onWatchUpdate=function(){this.frames?this._calcWatches():this.defferedWatches||(this.defferedWatches=!0,this._statusMessage("Deferred watches update - will be done on next stop"))},Uo._updateBreakpoints=function(){var e=this;return this._fullCommand("break").then((function(t){var n=[],i=/^([0-9]+)\s+breakpoint.*$/;return t&&f().each(t.split("\n"),(function(e){var t=e&&e.match(i);t&&n.push("clear "+t[1])})),e._setBreakpoints(n)})).then((function(){}))},Uo._setBreakpoints=function(e){var t=this;return wa.ZP.breakpoints().then((function(n){var i=f().filter(n,(function(e){return f().endsWith(e.path,".py")})),s=f().filter(i,(function(e){return e.active}));Fo.drawBreakpoints(t._jid(),i);var a=e||[];if(f().each(s,(function(e){a.push("break "+sa+e.path+":"+(e.line+1))})),!f().isEmpty(a))return t._fullCommand(a.join("\n"))}))},Uo._fetchLocals=function(){var e=this;return this._fullCommand("print_locals").then((function(t){var n,i=f().trim(t).replace(/\(Pdb\) /g,""),s=i;try{s=JSON.parse(i)}catch(e){}n=f().isString(s)?s:qo(s),Fo.drawLocals(e._jid(),n)}))},Uo._calcWatches=function(){var e=this,t={};return _a.ZP.watches(this.uuid).then((function(n){var i=[];return f().each(n,(function(n){var s="pp "+n.watch,a=e._fullCommand(s);i.push(a),a.then((function(e){t[n.watch]=e}))})),Promise.all(i)})).then((function(){var n=[],i=/^\*{3} \w+Error: (.*)$/;f().isEmpty(t)||f().each(t,(function(e,t){var s={watch:t,value:e=f().trim(e).replace("(Pdb) ",""),error:!1},a=e.match(i);a&&(s.error=!0,s.value=a[1]),n.push(s)})),Fo.drawWatches(e._jid(),n)}))},Uo._currentDebuggerState=function(){var e=this;return this._fullCommand("where").then((function(t){if(f().isNumber(e.currFramePos)){var n=e.frames[e.currFramePos];e._deactivateLineInEditor(n)}var i=!!t;Fo.debuggerState(e._jid(),{state:ca.PAUSED}),i&&e._parseFrame(t)})).then((function(){e._calcWatches(),e._updateBreakpoints()})).then((function(){return e._fetchLocals()}))},Uo._onConnectionInit=function(){if(!this._initialiseDebugger){this._initialiseDebugger=!0,this._statusMessage(ea);var e=this;return this.stream(this.config).then((function(t){if(e._initialiseDebugger=!1,Fo.consoleInit(e._jid(),{port:t.terminalPort}),t.error)switch(t.code){case"BEFORE_ERROR":e._statusMessage("Got an error before initializing the debugger.");break;case"NO_TARGET":e._consoleMessage(Lo('<a href="https://docs.codio.com/common/develop/ide/debugger/debugger.html#debugger" target="_blank">No python file help</a>\n\n'),!0),e._statusMessage("Could not find the executable to debug.")}else e.failed=!1,e._statusMessage(ia),e._currentDebuggerState()})).catch((function(){e._initialiseDebugger=!1,e._statusMessage(ta)}))}},Uo._onConnectionOffline=function(){this._cleanupState(),this._statusMessage(na)},Uo._onConnectionData=function(e,t){var n=e&&e.topic;if("before"===n||"output"===n){f().each(['Traceback (most recent call last):\n  File "/usr/share/cdb/scripts/pdb_auto.py", line 31, in main\n','    dbg._runscript(mainpyfile)\n  File "/usr/lib/python2.7/pdb.py", line 1233, in _runscript\n','    self.run(statement)\n  File "/usr/lib/python2.7/bdb.py", line 400, in run\n    exec cmd in globals, locals\n'],(function(e){t=t.replace(e,"")})),f().isEmpty(t)||this._consoleMessage(f().escape(t),"before"===n)}else"in"===n?this._processOutput(t):"exited"===n&&Fo.debuggerState(this._jid(),{state:ca.EXITED})},Uo._onChangeFrame=async function(e,t){if(this._changeFrameInProgress)return;const n=this,i=parseInt(this.currFramePos,10),s=parseInt(t,10);if(i!==s){this._changeFrameInProgress=!0;const e=Math.abs(s-i),t=s-i>0?"up":"down",a=[];for(let n=0;n<e;n++)a.push(t);const o=this._fullCommand(a.join("\n")).then((function(){const e=parseInt(n.currFramePos,10);n.currFramePos=s;const t=n.frames[s],i=n.frames[e];return t.current=!0,i.current=!1,Fo.drawFrame(n._jid(),n.frames),n._activateLineInEditor(t,i),n._calcWatches()})).finally((function(){n._changeFrameInProgress=!1}));return Promise.all([o,n._fetchLocals()])}},Uo._onResume=async function(){return this._resumeAction("continue")},Uo._resumeAction=function(e){var t=this;return t._statusMessage(ra),t._cleanupState(),this._fullCommand(e).then((function(){t._statusMessage(oa)})).then((function(){return t._currentDebuggerState()}))},Uo._onStepOver=async function(){return this._resumeAction("next")},Uo._onStepInto=async function(){return this._resumeAction("step")},Uo._onStepOut=async function(){return this._resumeAction("return\nnext")},Uo._cleanupState=function(){if(Fo.debuggerState(this._jid(),{state:ca.RUNNING}),f().isNumber(this.currFramePos)){var e=this.frames[this.currFramePos];this._deactivateLineInEditor(e)}this.currFramePos=null,this.frames=null};const Ho=Bo,Go={updateConfigWithCurrent:Co.updateConfigWithCurrent,debug:function(e){Co.debug(e,Ho)}};var Wo=u.default.inherit,zo=u.default.str.bold,Vo=d.Z.create(n(86868)),Ko=function(e,t){if(!(this instanceof Ko))return new Ko(e,t);Ko._sc.constructor.call(this,e,t)};Wo(Ko,Io);var Jo=Ko.prototype;Jo._showInstallationInstructions=function(){var e="/"+i.default.currentProject.path+"/install-software";je.Z.error(["It looks like NodeJS is not installed.<br/>","Either connect your project to the appropriate ".concat(it.Z.get("whitelabel")," certified stack or "),"you can install NodeJS from ","the 'Tools-><a href=\""+e+"\">Install software</a>' menu."].join(""))},Jo.SUPPORTED_EXTENSIONS=["js","mjs"],Jo._onConnectionInit=function(){if(!this._initialiseDebugger){this._initialiseDebugger=!0,this._statusMessage(ea);var e=this;return this.stream(this.config).then((function(t){if(e._initialiseDebugger=!1,Vo.consoleInit(e._jid(),{port:t.terminalPort}),t.error)switch(Vo.debuggerState(e._jid(),{state:ca.EXITED}),t.code){case"BEFORE_ERROR":e._statusMessage("Got an error before initializing the debugger.");break;case"NO_TARGET":e._statusMessage("Could not find the executable to debug.");e._consoleMessage(zo('<a href="https://docs.codio.com/common/develop/ide/debugger/debugger.html#debugger" target="_blank">No connection help</a>\n\n'),!0);break;case"NO_PREREQUISITES":e._statusMessage("Error starting the debugger"),e._showInstallationInstructions()}else t.isContinuing?(Vo.debuggerState(e._jid(),{state:ca.RUNNING}),e._statusMessage(ra),e._setBreakpoints(),e._calcWatches(),e._command({type:"get_state"}).then((function(t){if(!t.error){var n=t.result;n.isRunning||(e._setCurrentState(n),Vo.debuggerState(e._jid(),{state:ca.PAUSED}),e._statusMessage(oa))}}))):(e._statusMessage(ia),e._setBreakpoints(),e._calcWatches())})).catch((function(){e._initialiseDebugger=!1,e._statusMessage(ta)}))}},Jo._onConnectionOffline=function(){this._cleanupState(),this._statusMessage(na)},Jo._onConnectionData=function(e,t){var n=e&&e.topic;"before"===n||"output"===n?this._consoleMessage(t,"before"===n):"in"===n?this._processOutput(t):"exited"===n&&(this._cleanupState(),this._statusMessage("Program exited"),Vo.debuggerState(this._jid(),{state:ca.EXITED}))},Jo._cleanupState=function(){if(f().isNumber(this.currFramePos)){var e=this.frames&&this.frames[this.currFramePos];e&&this._deactivateLineInEditor(e)}Vo.debuggerState(this._jid(),{state:ca.RUNNING}),this._clearState(),this.frames=null,this.backtrace=null},Jo._clearState=function(){if(f().isNumber(this.currFramePos)){var e=this.frames&&this.frames[this.currFramePos];e&&this._deactivateLineInEditor(e)}this.currFramePos=0},Jo._onWatchUpdate=function(){this._calcWatches()},Jo._calcWatches=function(){var e=this,t={};return _a.ZP.watches(this.uuid).then((function(n){var i=f().map(n,(function(n){return e._command({type:"evaluate",frameNum:e.currFramePos,expression:n.watch}).then((function(e){e.error||(t[n.watch]=e.result)}))}));return Promise.all(i)})).then((function(){var n=[];f().isEmpty(t)||(n=f().map(t,(function(e,t){var n=e.error||e.value&&(e.value.value||e.value.text);return{watch:t,value:f().toString(n),error:!!e.error}}))),Vo.drawWatches(e._jid(),n)}))},Jo._setBreakpoints=function(){var e=this;return wa.ZP.breakpoints().then((function(t){var n=f().filter(t,(function(t){return t.active&&e.SUPPORTED_EXTENSIONS.includes(u.default.path.getFileExtension(t.path))}));Vo.drawBreakpoints(e._jid(),n);var i=f().map(n,(function(e){return{fileName:sa+e.path,fileLine:e.line}}));return e._command({type:"breakpoints",breakpoints:i})}))},Jo._onBPUpdate=function(){this._setBreakpoints()},Jo._onChangeFrame=async function(e,t){var n=parseInt(this.currFramePos,10),i=parseInt(t,10);if(n!==i){var s=this;return this.currFramePos=i,Promise.all([this._command({type:"locals",frameNum:i}).then((function(e){e.error||e.result.error||Vo.drawLocals(s._jid(),e.result),s._parseBacktrace(s.backtrace)})),this._calcWatches()])}},Jo._parseBacktrace=function(e){var t=this;if(!e)return Vo.drawFrame(this._jid(),[]);var n=e.map((function(e,n){var s=e.fileName;s=f().replace(s,/[^\:]+:\/\//,"");var a=null;return f().startsWith(s,sa)&&(s=s.substring(sa.length,s.length),i.default.currentProject.exists(s)&&(a={uuid:t.uuid,path:s})),{framePos:n,methodName:e.methodName||"(anonymous function)",fileName:s,fileLine:e.fileLine+1,source:a,current:n===t.currFramePos}})),s=n[t.currFramePos];this.frames=n,this.backtrace=e,t._activateLineInEditor(s),Vo.drawFrame(t._jid(),n)},Jo._processOutput=function(e){if(e)switch(e.type){case"PARSE_FAILED_STATE":this._consoleMessage("Failed to parse the file "+e.params.url+":"+e.params.endColumn+"\n");break;case"PAUSED_STATE":this._setCurrentState(e.frame),Vo.debuggerState(this._jid(),{state:ca.PAUSED});var t=e.isException?aa:oa;this._statusMessage(t),this._calcWatches()}},Jo._setCurrentState=function(e){this.currFramePos=0,this._parseBacktrace(e.backtrace),Vo.drawLocals(this._jid(),e.locals),e.exception&&this._consoleMessage(e.exception+"\n")},Jo._onResume=async function(){return this._resumeAction()},Jo._resumeAction=function(e){return Vo.debuggerState(this._jid(),{state:ca.RUNNING}),this._statusMessage(ra),this._clearState(),this._command({type:"resume",action:e})},Jo._onSendStdin=function(e,t){return this._stdin(t)},Jo._onStepOver=async function(){return this._resumeAction("next")},Jo._onStepInto=async function(){return this._resumeAction("in")},Jo._onStepOut=async function(){return this._resumeAction("out")};const Yo=Ko,Qo={updateConfigWithCurrent:Co.updateConfigWithCurrent,debug:function(e){Co.debug(e,Yo)}};var Xo=u.default.inherit,$o=function(e,t){if(!(this instanceof $o))return new $o(e,t);$o._sc.constructor.call(this,e,t)};Xo($o,Yo);var er=$o.prototype;er.SUPPORTED_EXTENSIONS=["ts","js"],er._showInstallationInstructions=function(){var e="/"+i.default.currentProject.path+"/install-software";je.Z.error(["It looks like Deno is not installed.<br/>","Either connect your project to the appropriate ".concat(it.Z.get("whitelabel")," certified stack or "),"you can install Deno from ","the 'Tools-><a href=\""+e+"\">Install software</a>' menu."].join(""))};const tr=$o,nr={updateConfigWithCurrent:Co.updateConfigWithCurrent,debug:function(e){Co.debug(e,tr)}};function ir(e,t,n,i){this.message=e,this.expected=t,this.found=n,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,ir)}!function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(ir,Error);const sr={SyntaxError:ir,parse:function(e){var t,n=arguments.length>1?arguments[1]:{},i={},s={GdbOutput:ce},a=ce,o=/^[~@&]/,r={type:"class",value:"[~@&]",description:"[~@&]"},c=function(e,t){return{type:e,output:t}},l=/^[*+=\^]/,d={type:"class",value:"[*+=^]",description:"[*+=^]"},u=function(e,t,n,i){return{type:t,token:e,resultClass:n,results:ge(i)}},h="=",p={type:"literal",value:"=",description:'"="'},f=function(e,t){return{key:e,value:t}},m="{}",g={type:"literal",value:"{}",description:'"{}"'},b=function(){return{}},v="{",y={type:"literal",value:"{",description:'"{"'},w="}",_={type:"literal",value:"}",description:'"}"'},k=function(e){return ge(e)},P="[]",C={type:"literal",value:"[]",description:'"[]"'},x=function(){return[]},E="[",S={type:"literal",value:"[",description:'"["'},I="]",A={type:"literal",value:"]",description:'"]"'},T=function(e){return e},j=",",Z={type:"literal",value:",",description:'","'},O=function(e,t){return[e].concat(t.map((function(e){return e[1]})))},N=function(e,t){return[e].concat(t)},D=function(e){return e.map((function(e){return e[1]}))},M=/^[a-zA-Z_]/,R={type:"class",value:"[a-zA-Z_]",description:"[a-zA-Z_]"},L=/^[0-9a-zA-Z\-_]/,F={type:"class",value:"[0-9a-zA-Z-_]",description:"[0-9a-zA-Z-_]"},B=function(){return e.substring($,X)},U=/^[0-9]/,q={type:"class",value:"[0-9]",description:"[0-9]"},H='"',G={type:"literal",value:'"',description:'"\\""'},W=/^[^\\"]/,z={type:"class",value:'[^\\\\"]',description:'[^\\\\"]'},V=function(e){return e.join("")},K="\\",J={type:"literal",value:"\\",description:'"\\\\"'},Y={type:"any",description:"any character"},Q=function(e){switch(e){case"b":return"\b";case"f":return"\f";case"n":return"\n";case"r":return"\r";case"t":return"\t";default:return e}},X=0,$=0,ee=[{line:1,column:1,seenCR:!1}],te=0,ne=[],ie=0;if("startRule"in n){if(!(n.startRule in s))throw new Error("Can't start parsing from rule \""+n.startRule+'".');a=s[n.startRule]}function se(t){var n,i,s=ee[t];if(s)return s;for(n=t-1;!ee[n];)n--;for(s={line:(s=ee[n]).line,column:s.column,seenCR:s.seenCR};n<t;)"\n"===(i=e.charAt(n))?(s.seenCR||s.line++,s.column=1,s.seenCR=!1):"\r"===i||"\u2028"===i||"\u2029"===i?(s.line++,s.column=1,s.seenCR=!0):(s.column++,s.seenCR=!1),n++;return ee[t]=s,s}function ae(e,t){var n=se(e),i=se(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:i.line,column:i.column}}}function oe(e){X<te||(X>te&&(te=X,ne=[]),ne.push(e))}function re(e,t,n,i){return null!==t&&function(e){var t=1;for(e.sort((function(e,t){return e.description<t.description?-1:e.description>t.description?1:0}));t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}(t),new ir(null!==e?e:function(e,t){var n,i=new Array(e.length);for(n=0;n<e.length;n++)i[n]=e[n].description;return"Expected "+(e.length>1?i.slice(0,-1).join(", ")+" or "+i[e.length-1]:i[0])+" but "+(t?'"'+function(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,(function(e){return"\\x0"+t(e)})).replace(/[\x10-\x1F\x80-\xFF]/g,(function(e){return"\\x"+t(e)})).replace(/[\u0100-\u0FFF]/g,(function(e){return"\\u0"+t(e)})).replace(/[\u1000-\uFFFF]/g,(function(e){return"\\u"+t(e)}))}(t)+'"':"end of input")+" found."}(t,n),t,n,i)}function ce(){var t;return(t=function(){var t,n,s;t=X,o.test(e.charAt(X))?(n=e.charAt(X),X++):(n=i,0===ie&&oe(r));n!==i&&(s=fe())!==i?($=t,t=n=c(n,s)):(X=t,t=i);return t}())===i&&(t=function(){var t,n,s,a,o;t=X,n=function(){var t,n,s;t=X,n=[],U.test(e.charAt(X))?(s=e.charAt(X),X++):(s=i,0===ie&&oe(q));if(s!==i)for(;s!==i;)n.push(s),U.test(e.charAt(X))?(s=e.charAt(X),X++):(s=i,0===ie&&oe(q));else n=i;n!==i&&($=t,n=B());return t=n,t}(),n===i&&(n=null);n!==i?(l.test(e.charAt(X))?(s=e.charAt(X),X++):(s=i,0===ie&&oe(d)),s!==i&&(a=pe())!==i&&(o=he())!==i?($=t,t=n=u(n,s,a,o)):(X=t,t=i)):(X=t,t=i);return t}()),t}function le(){var t,n,s,a;return t=X,(n=pe())!==i?(61===e.charCodeAt(X)?(s=h,X++):(s=i,0===ie&&oe(p)),s!==i&&(a=de())!==i?($=t,t=n=f(n,a)):(X=t,t=i)):(X=t,t=i),t}function de(){var t;return(t=fe())===i&&(t=function(){var t,n,s,a;t=X,e.substr(X,2)===m?(n=m,X+=2):(n=i,0===ie&&oe(g));n!==i&&($=t,n=b());t=n,t===i&&(t=X,123===e.charCodeAt(X)?(n=v,X++):(n=i,0===ie&&oe(y)),n!==i&&(s=ue())!==i?(125===e.charCodeAt(X)?(a=w,X++):(a=i,0===ie&&oe(_)),a!==i?($=t,t=n=k(s)):(X=t,t=i)):(X=t,t=i));return t}(),t===i&&(t=function(){var t,n,s,a;t=X,e.substr(X,2)===P?(n=P,X+=2):(n=i,0===ie&&oe(C));n!==i&&($=t,n=x());t=n,t===i&&(t=X,91===e.charCodeAt(X)?(n=E,X++):(n=i,0===ie&&oe(S)),n!==i?(s=function(){var t,n,s,a,o,r;if(t=X,n=de(),n!==i){for(s=[],a=X,44===e.charCodeAt(X)?(o=j,X++):(o=i,0===ie&&oe(Z)),o!==i&&(r=de())!==i?a=o=[o,r]:(X=a,a=i);a!==i;)s.push(a),a=X,44===e.charCodeAt(X)?(o=j,X++):(o=i,0===ie&&oe(Z)),o!==i&&(r=de())!==i?a=o=[o,r]:(X=a,a=i);s!==i?($=t,t=n=O(n,s)):(X=t,t=i)}else X=t,t=i;return t}(),s===i&&(s=ue()),s!==i?(93===e.charCodeAt(X)?(a=I,X++):(a=i,0===ie&&oe(A)),a!==i?($=t,t=n=T(s)):(X=t,t=i)):(X=t,t=i)):(X=t,t=i));return t}())),t}function ue(){var e,t,n;return e=X,(t=le())!==i&&(n=he())!==i?($=e,e=t=N(t,n)):(X=e,e=i),e}function he(){var t,n,s,a,o;for(t=X,n=[],s=X,44===e.charCodeAt(X)?(a=j,X++):(a=i,0===ie&&oe(Z)),a!==i&&(o=le())!==i?s=a=[a,o]:(X=s,s=i);s!==i;)n.push(s),s=X,44===e.charCodeAt(X)?(a=j,X++):(a=i,0===ie&&oe(Z)),a!==i&&(o=le())!==i?s=a=[a,o]:(X=s,s=i);return n!==i&&($=t,n=D(n)),t=n}function pe(){var t,n,s,a;if(t=X,M.test(e.charAt(X))?(n=e.charAt(X),X++):(n=i,0===ie&&oe(R)),n!==i){for(s=[],L.test(e.charAt(X))?(a=e.charAt(X),X++):(a=i,0===ie&&oe(F));a!==i;)s.push(a),L.test(e.charAt(X))?(a=e.charAt(X),X++):(a=i,0===ie&&oe(F));s!==i?($=t,t=n=B()):(X=t,t=i)}else X=t,t=i;return t}function fe(){var t,n,s,a;if(t=X,34===e.charCodeAt(X)?(n=H,X++):(n=i,0===ie&&oe(G)),n!==i){for(s=[],W.test(e.charAt(X))?(a=e.charAt(X),X++):(a=i,0===ie&&oe(z)),a===i&&(a=me());a!==i;)s.push(a),W.test(e.charAt(X))?(a=e.charAt(X),X++):(a=i,0===ie&&oe(z)),a===i&&(a=me());s!==i?(34===e.charCodeAt(X)?(a=H,X++):(a=i,0===ie&&oe(G)),a!==i?($=t,t=n=V(s)):(X=t,t=i)):(X=t,t=i)}else X=t,t=i;return t}function me(){var t,n,s;return t=X,92===e.charCodeAt(X)?(n=K,X++):(n=i,0===ie&&oe(J)),n!==i?(e.length>X?(s=e.charAt(X),X++):(s=i,0===ie&&oe(Y)),s!==i?($=t,t=n=Q(s)):(X=t,t=i)):(X=t,t=i),t}function ge(e){var t={};return e.forEach((function(e){t[e.key]=e.value})),t}if((t=a())!==i&&X===e.length)return t;throw t!==i&&X<e.length&&oe({type:"end",description:"end of input"}),re(null,ne,te<e.length?e.charAt(te):null,te<e.length?ae(te,te+1):ae(te,te))}};var ar=function(e){if(!(this instanceof ar))return new ar(e);this.callbacks=e||{sendCommand:f().noop,onGdbPrompt:f().noop,onProgramOutput:f().noop,onExecStateChanged:f().noop},this.initialized=!1,this.commandDeferreds={},this.leftOutput=""},or=ar.prototype;function rr(e,t){if(f().startsWith(t,"(gdb)"))e.callbacks.onGdbPrompt();else{var n;try{n=sr.parse(t)}catch(e){return void console.error(e)}switch(n.type){case"@":e.callbacks.onProgramOutput(n.output);break;case"*":e.callbacks.onExecStateChanged({state:n.resultClass,params:n.results});break;case"^":var i=e.commandDeferreds[n.token];i&&(i.resolve({state:n.resultClass,params:n.results}),delete e.commandDeferreds[n.token])}}}or.command=function(e){var t,n=u.default.promise.deferred(),i=(t=Bs()(Math.random()+Math.random()),parseInt(t.substring(0,8),16).toString());this.commandDeferreds[i]=n;var s=this;return this.callbacks.sendCommand(i+e).then((function(t){t.error&&(n.reject(new Error("command ".concat(i+e," failed"))),delete s.commandDeferreds[i])})),n.promise},or.feedOutput=function(e){e&&function(e,t){for(var n=0;;){var i=t.indexOf("\n",n);if(-1===i)return void(e.leftOutput+=t.substring(n));var s=e.leftOutput+t.substring(n,i);e.leftOutput="",rr(e,s),n=i+1}}(this,e)};const cr=ar;var lr=u.default.str.bold,dr=d.Z.create(n(86868)),ur=new RegExp("^"+sa),hr=function(e,t){if(!(this instanceof hr))return new hr(e,t);this.initializedFuture=u.default.promise.deferred(),this.pipeline=new cr({sendCommand:this._command.bind(this),onGdbPrompt:Cr.bind(null,this),onProgramOutput:this._consoleMessage.bind(this),onExecStateChanged:_r.bind(null,this)}),this.deferredBreakpoints=!1,hr._sc.constructor.call(this,e,t)};(0,u.ED)(hr,Io);var pr=hr.prototype;function fr(e){return wa.ZP.breakpoints().then((function(t){var n=kr(e,'-interpreter-exec console "delete breakpoints"'),i=f()(t).map((function(t){var n="-break-insert "+(t.active?"":" -d ")+t.path+":"+(t.line+1);return kr(e,n).then((function(e){if("done"===e.state)return t}))})).value();return Promise.all(i).then((function(t){var n=t.filter((function(e){return!!e}));dr.drawBreakpoints(e._jid(),n)})),Promise.all([n,i])}))}function mr(e,t){var n="-data-evaluate-expression ";return(0===t||t)&&(n+=" --thread "+e.currThreadId+" --frame "+t+" "),_a.ZP.watches(e.uuid).then((function(t){var i=t.map((function(t){return kr(e,n+JSON.stringify(t.watch)).then((function(e){return{watch:t.watch,error:"done"!==e.state,value:e.params.value||e.params.msg}}))}));Promise.all(i).then((function(t){dr.drawWatches(e._jid(),t)}))}))}function gr(e){return kr(e,"-stack-list-frames").then((function(t){if("done"===t.state){var n=t.params.stack.filter((function(e){return"frame"===e.key})).map((function(t){var n=t.value,s=null,a=n.file,o=a&&a.replace(ur,"");i.default.currentProject.exists(o)&&(s={uuid:e.uuid,path:o});var r=Number(n.level);return{framePos:r,methodName:n.func,fileName:n.file,fileLine:Number(n.line),source:s,current:e.currStackPos===r}}));e.frames=n,dr.drawFrame(e._jid(),n)}}))}function br(e,t){var n="-stack-list-variables";return(0===t||t)&&(n+=" --thread "+e.currThreadId+" --frame "+t),kr(e,n+=" --all-values").then((function(t){if("done"===t.state){var n=t.params.variables.map((function(e){return{name:e.name,value:e.value}}));dr.drawLocals(e._jid(),n)}}))}function vr(e,t){return Promise.all([gr(e),br(e,t)])}function yr(e,t,n){if(i.default.currentProject.exists(t.source.path)){var s=e.frames&&e.frames[e.currStackPos];e._activateLineInEditor(t,s)}e.currStackPos=n}function wr(e){e.deferredBreakpoints&&(fr(e),e.deferredBreakpoints=!1),mr(e)}function _r(e,t){if("running"===t.state){e._cleanupState();var n=u.default.promise.delay(50).then((function(){n===e._runningStatusDelayFuture&&e._statusMessage(ra)}));e._runningStatusDelayFuture=n}else if("stopped"===t.state){switch(e._runningStatusDelayFuture=null,t.params.reason){case"exited-signalled":return e._statusMessage("Program exited with an error."),void dr.debuggerState(e._jid(),{state:ca.EXITED});case"exited":var i="Program exited with an error. Exit code: "+Number(t.params["exit-code"]);return e._statusMessage(i),void dr.debuggerState(e._jid(),{state:ca.EXITED});case"exited-normally":return e._statusMessage("Program exited normally."),void dr.debuggerState(e._jid(),{state:ca.EXITED});case"signal-received":var s="Program received signal "+t.params["signal-name"]+". "+t.params["signal-meaning"];e._statusMessage(s);break;default:e._statusMessage(oa)}e.currThreadId=t.params["thread-id"];var a=t.params.frame.file,o=a&&a.replace(ur,""),r={fileLine:Number(t.params.frame.line),source:{path:o}};yr(e,r,0),dr.debuggerState(e._jid(),{state:ca.PAUSED}),wr(e)}}function kr(e,t){return e.pipeline.command(t)}function Pr(e,t){const n=kr(e,t);return e._cleanupState(),n.then((()=>vr(e)))}function Cr(e){e.initializedFuture.resolve()}function xr(){var e="/"+i.default.currentProject.path+"/install-software";je.Z.error(["It looks like GDB is not installed.<br/>","Either connect your project to the appropriate ".concat(it.Z.get("whitelabel")," certified stack or "),"you can install GDB from ","the 'Tools-><a href=\""+e+"\">Install software</a>' menu."].join(""))}pr._onBPUpdate=function(){this.frames?fr(this):this.deferredBreakpoints||(this.deferredBreakpoints=!0)},pr._onWatchUpdate=function(){this.frames&&mr(this)},pr._initDebuggerState=function(){return Promise.all([fr(this),Pr(this,"-exec-run --start")])},pr._onConnectionInit=function(e){if(!this._isInitializingDebugger){this._isInitializingDebugger=!0,this._statusMessage(ea);var t=this,n=this.config;return e&&(n=f().defaults({forceRestart:!0},n)),this.stream(n).then((function(e){if(t._isInitializingDebugger=!1,dr.consoleInit(t._jid(),{port:e.terminalPort}),e.error)switch(dr.debuggerState(t._jid(),{state:ca.EXITED}),e.code){case"BEFORE_ERROR":t._statusMessage("Got an error before initializing the debugger.");break;case"NO_TARGET":t._consoleMessage(lr('<a href="https://docs.codio.com/common/develop/ide/debugger/debugger.html#debugger" target="_blank">No file to debug</a>\n\n'),!0),t._statusMessage("Could not find the executable to debug.");break;case"NO_PREREQUISITES":xr()}else e.isContinuing?(t._statusMessage("Resuming debug"),t.initializedFuture.resolve(),t._cleanupState(),kr(t,"-thread-info").then((function(e){if("done"===e.state){t.currThreadId=e.params["current-thread-id"];var n=f().find(e.params.threads,{id:t.currThreadId}),i=n.frame,s=n.frame.file,a=s&&s.replace(ur,""),o={fileLine:Number(i.line),source:{path:a}};yr(t,o,Number(i.level)),dr.debuggerState(t._jid(),{state:ca.PAUSED}),vr(t),wr(t)}}))):(t._statusMessage(ia),t.initializedFuture.promise.then((function(){t._initDebuggerState()})))})).catch((function(){t._isInitializingDebugger=!1,t._statusMessage(ta),dr.debuggerState(t._jid(),{state:ca.EXITED})}))}},pr._onConnectionOffline=function(){this._cleanupState(),this._statusMessage(na)},pr._onConnectionData=function(e,t){if("before"===(e=e&&e.topic)||"output"===e){if("before"===e){var n=/: not found|: command not found/i.test(t);this.config.single&&n&&xr()}this._consoleMessage(t,"before"===e)}else"in"===e&&this.pipeline.feedOutput(t)},pr._onChangeFrame=async function(e,t){if(!this._changeFrameInProgress)return this.currStackPos!==t?(yr(this,this.frames[t],t),Promise.all([vr(this,t),mr(this)])):void 0},pr._onSendStdin=function(e,t){return this._stdin(t)},pr._onResume=async function(){return Pr(this,"-exec-continue")},pr._onStepOver=async function(){return Pr(this,"-exec-next")},pr._onStepInto=async function(){return Pr(this,"-exec-step")},pr._onStepOut=async function(){if(this.frames&&this.frames.length>1)return Pr(this,"-exec-finish");je.Z.error("No frames for step out")},pr._cleanupState=function(){if(dr.debuggerState(this._jid(),{state:ca.RUNNING}),f().isNumber(this.currStackPos)&&this.frames){var e=this.frames[this.currStackPos];this._deactivateLineInEditor(e)}this.currThreadId=null,this.currStackPos=null,this.frames=null};const Er=hr,Sr={updateConfigWithCurrent:Co.updateConfigWithCurrent,debug:function(e){Co.debug(e,Er)}};var Ir=d.Z.create(n(86868));const Ar=I().compile('<div id="codio-debugger" class="ide-sidebar">\n    <div class="codio-debugger-header">\n        <ul class="tabbed debugger-tab-titles">\n        </ul>\n    </div>\n    <div class="active-debugger">\n    </div>\n</div>'),Tr=I().compile('{{#each targets}}\n<li {{#equals uuid ../active}}class="active"{{/equals}}><a href="#tab-{{uuid}}">{{name}}</a></li>\n{{/each}}');var jr=E()(Ar()),Zr=[],Or=null,Nr={};Nr[Hs]=Mo,Nr[zs]=Go,Nr[Vs]=Go,Nr[Ks]=Qo,Nr[Js]=nr,Nr[Ys]=Sr;const Dr={impl:Nr,listen:function(){d.Z.subscribe("command:debug:start",this.onStartDebug.bind(this)),d.Z.subscribe("command:debug:stop:#uuid",this.onStopDebug.bind(this)),wa.ZP.listen(),_a.ZP.listen()},_handleTabClick:function(e){e.preventDefault();var t=E()(e.target).attr("href");if(null!==t.match(/#tab-/)){var n=t.replace("#tab-","");this._openTab(n)}},_openTab:function(e){var t=jr.find(".tabbed li"),n=t.find('a[href="#tab-'+e+'"]').parent();t.removeClass("active"),n.addClass("active"),Or=e;var i=f().find(Zr,(function(t){return t.uuid===e}));i&&(jr.find(".codio-debugger-instance").detach(),jr.find(".active-debugger").append(i.ui.render()))},onStopDebug:function(e){var t=e.uuid,n=f().remove(Zr,(function(e){return e.uuid===t}));n&&n[0].ui.close(),f().isEmpty(Zr)?(jr.detach(),Ir.debuggerPanelSwitched()):(Or=Zr[0].uuid,this._renderTabs(),this._openTab(Or))},_renderTabs:function(){var e=E()(Tr({targets:Zr,active:Or})),t=jr.find(".codio-debugger-header");f().size(Zr)>1?t.removeClass("hide"):t.addClass("hide"),jr.find(".debugger-tab-titles").html(e),d.Z.on(e,"click.debugger","a",this._handleTabClick.bind(this))},onStartDebug:function(e,t){var n=this.impl[t.type];if(n){var i=Promise.resolve(t);n.updateConfigWithCurrent&&(i=n.updateConfigWithCurrent(t));var s=this;i.then((function(e){var t=E()("div.ide");0===t.find("#codio-debugger").length&&(t.append(jr),Ir.debuggerPanelSwitched());var i=f().find(Zr,(function(t){return t.uuid===e.uuid}));if(i)s._openTab(i.uuid);else{var a=f().cloneDeep(e);a.ui=new no(e),Zr.push(a),Or=e.uuid,s._renderTabs(),n.debug(e),s._openTab(e.uuid)}})).catch((function(e){je.Z.error(e.message)}))}}};i.default.register({info:_s,get:async function(){return ya}}),Dr.listen();const Mr=JSON.parse('{"name":"codio-lsp","description":"Language server","codio":{"global":true,"noFile":true,"title":"Language server","urls":"lsp"}}'),Rr=JSON.parse('{"toggle":{"key":"Shift+Alt+L","desc":"Toggle language Server settings"}}'),Lr=JSON.parse('{"enable_lsp_support":{"default":false,"type":"boolean","desc":"Enable language server support."}}');n(28190);var Fr=ao.default.containerManager,Br=null,Ur=!1,qr=0,Hr={},Gr={},Wr=[],zr=null,Vr=null,Kr=null;let Jr=Promise.resolve(),Yr=null;function Qr(){return it.Z.get("backendSchema")+i.default.currentProject.backendSubDomain+"-9002."+it.Z.get("boxDomain")}function Xr(){function e(){Ur=!0,Kr=null}null===Kr&&(Kr=function(){var e=E().ajax({url:Qr()+"/p/info",type:"GET",contentType:"application/json; charset=UTF-8",xhrFields:{withCredentials:!0},timeout:1e3});const t=u.default.promise.deferred();return e.then(t.resolve).fail((()=>t.reject(new Error("can not connect to lsp")))),t.promise}().then(e).catch((()=>{const t=i.default.currentProject.guid;return Fr.run(t,"/usr/share/codio/lsp-proxy-v2/lsp-proxy-v2.sh",{}).then(e).catch(e)})))}async function $r(){if(!Br)return;Br.destroy(),Br=null;const e=Vr?await u.default.promise.getState(Vr.promise):null;Vr&&e===u.default.promise.STATES.PENDING&&Vr.reject(new Error("primus connection closed")),Vr=null,f().each(Gr,(function(e){e.onDisconnect&&e.onDisconnect()}))}async function ec(e){nc(JSON.stringify(e),"in");var t=e.id,n=Hr[t];if(n)void 0!==e.error?n.reject(new Error(e.error)):n.resolve(e.result);else if(Gr[e.type]){var i=Gr[e.type].onNotification;i&&i(e)}}function tc(e,t,n,i){return async function(){await Jr,null===Vr&&(Vr=u.default.promise.deferred(),Xr(),Br&&Br.destroy(),Br=null,function(){var e="WebSocket"in window;Br=new(so())(Qr(),{reconnect:{retries:10,min:1e3,factor:2},strategy:["online","timeout","disconnect"],websockets:e,pingTimeout:25e3,transport:{transports:["websocket"]}});var t=0;Br.on("open",(async function(){t=0,await u.default.promise.getState(Vr.promise)===u.default.promise.STATES.PENDING&&Vr.resolve()})),Br.on("close",(function(){f().each(Gr,(function(e){e.onCloseConnection&&e.onCloseConnection()}))})),Br.on("reconnect",(function(){if(Ur){if(Yr)return $r();++t>12?$r():t%5==0&&Xr()}})),Br.on("data",(function(e){var t=e;try{t=JSON.parse(e),f().each(t,ec)}catch(e){}}))}());return Vr.promise}().then((function(){var s=++qr,a=function(e){return Hr[e]=u.default.promise.deferred(),Hr[e].promise}(s),o=JSON.stringify({jsonrpc:"2.0",id:s,method:e,params:n,type:t,notification:void 0!==i&&i});return Br.write(o),nc(o,"out"),a}))}function nc(e,t){Wr.unshift({message:e,direction:t})>50&&Wr.pop(),zr&&zr(Wr)}d.Z.subscribe("project:shutdown",(function(){$r(),Jr=new Promise((e=>{Yr=e}))})),d.Z.subscribe("app:timeChunkMsSpent",(()=>{Yr&&(Jr=Promise.resolve(),Yr(),Yr=null)}));const ic={sendMessage:function(e,t,n){return tc(e,t,n,!1)},sendNotification:function(e,t,n){return tc(e,t,n,!0)},registerTypeListener:function(e,t){Gr[e]=t},deregisterTypeListener:function(e){delete Gr[e]},terminate:$r,registerHistoryListener:function(e){zr=e,e&&e(Wr)}},sc=I().compile("<div class=\"scrollable\">\n    {{#each history}}\n    <p>\n        {{#equals direction 'in'}}<=={{/equals}}\n        {{#equals direction 'out'}}==>{{/equals}}\n        &nbsp;\n        {{message}}\n    </p>\n    {{/each}}\n</div>");var ac=function(e){if(!(this instanceof ac))return new ac(e);this.container=e,ic.registerHistoryListener(this.render.bind(this))},oc=ac.prototype;oc.activate=function(){},oc.deactivate=function(){},oc.close=function(){ic.registerHistoryListener(null)},oc.render=function(e){var t=E()(sc({history:e}));this.container.empty().append(t)};const rc=ac;var cc=n(94117).VF,lc=n(94117)._Q;const dc=new Error("IGNORE_ERROR");var uc=function(e,t,n){this._ready=u.default.promise.deferred(),this._type=e,this._diagnostics={},this._onDiagnostics=t,this._onInitError=n,this._requestsCache={},this._closing=!1,this._init().catch((()=>{}))},hc=uc.prototype;function pc(e){return 1===e||void 0===e?"error":"warning"}hc._init=function(){var e=this,t=this._type;return this._closing=!1,ic.sendMessage("codio/initLs",t,{}).then((function(){return ic.sendMessage("initialize",t,{rootUri:cc("")})})).then((function(){ic.registerTypeListener(e._type,e._getInterface()),e._ready.resolve()})).catch((function(t){e._ready.reject(t),e._onInitError&&e._onInitError()})),this._ready.promise},hc._getInterface=function(){return{onNotification:this._onNotification.bind(this),onDisconnect:()=>this._onDisconnect().catch((e=>{})),onCloseConnection:()=>this._onCloseConnection().catch((e=>{}))}},hc._onCloseConnection=function(){return this._ready||(this._ready=u.default.promise.deferred()),this._closing=!0,this._ready.reject(new Error("connection closed")),this._ready.promise},hc._onDisconnect=function(){return this._onCloseConnection()},hc._onRestart=function(){return this._closing?Promise.resolve():(this._ready&&this._ready.reject(new Error("reconnect")),this._ready=u.default.promise.deferred(),this._init())},hc._onNotification=function(e){if("textDocument/publishDiagnostics"===e.method){var t=e.params;this._diagnostics[t.uri]=(n=t.diagnostics,f().map(n,(function(e){return{from:{lineNumber:e.range.start.line+1,column:e.range.start.character+1},to:{lineNumber:e.range.end.line+1,column:e.range.end.character+1},severity:pc(e.severity),message:e.message}}))),this._onDiagnostics&&this._onDiagnostics(lc(t.uri))}else"codio/downLs"===e.method&&this._onRestart().catch((e=>{}));var n},hc._sendNotification=function(e,t){var n=this._type;return this._ready.promise.then((function(){return ic.sendNotification(e,n,t)}))},hc._sendMessage=function(e,t){if(this._closing)return Promise.reject(dc);const n=u.default.hashCode(JSON.stringify({method:e,params:t}),!0);if(void 0===this._requestsCache[n]){const i=this._type;this._requestsCache[n]=this._ready.promise.then((function(){return ic.sendMessage(e,i,t)})),this._requestsCache[n].finally((()=>{delete this._requestsCache[n]}))}return this._requestsCache[n]},hc.hover=async function(e,t){return this._sendMessage("textDocument/hover",{textDocument:{uri:cc(e)},position:{line:t.lineNumber-1,character:t.column-1}}).then((function(e){return e.contents})).catch((e=>{}))},hc.getDiagnostics=function(e){return this._diagnostics[cc(e)]||[]},hc.resolveItems=async function(e){if(!e||0===e.length)return e;const t=f().filter(e,(e=>!e.textEdit));if(0===t.length)return e;const n=f().sortBy(t,(e=>e.sortText?e.sortText:e.label)),i=f().filter(e,(e=>e.textEdit)),s=f().take(n,70),a=f().map(s,(e=>"python"===this._type?Promise.resolve(e):this._sendMessage("completionItem/resolve",e)));return Promise.all(a).then((e=>f().concat(i,e))).catch((e=>{}))},hc.hint=function(e,t){return this._sendMessage("textDocument/completion",{textDocument:{uri:cc(e)},position:{line:t.lineNumber-1,character:t.column-1}}).then((e=>{const t=f().isArray(e.items)?e.items:e;return 0===t.length?[]:this.resolveItems(t).then((e=>e)).catch((()=>Promise.resolve(t)))})).catch((e=>{}))},hc.didOpen=function(e,t){return this._sendNotification("textDocument/didOpen",{textDocument:{uri:cc(e),text:t,version:0}})},hc.didChange=function(e,t,n){return this._sendNotification("textDocument/didChange",{textDocument:{uri:cc(e),version:n},contentChanges:[{text:t}]})},hc.didClose=function(e){return this._sendNotification("textDocument/didClose",{textDocument:{uri:cc(e)}})};const fc=uc;var mc=n(12953),gc=d.Z.create(n(19423)),bc={},vc={},yc=!1,wc=null;function _c(e){gc.diagnosticsUpdated({fileName:e})}function kc(e,t){t&&!t.isDisposed()&&Ec(e,t.getValue()).catch((()=>{}))}function Pc(e){f().each(bc,(function(t,n){t.type===e&&xc(n).catch((e=>{}))})),delete vc[e],f().isEmpty(vc)&&Sc().catch((e=>{}))}async function Cc(e,t){if(t&&!t.isDisposed()){if(!bc[e]){const a=t.getLanguageId();vc[a]||(vc[a]=new fc(a,_c,Pc.bind(null,a)));var n=vc[a],i=t.getValue(),s=f().debounce(kc.bind(null,e,t),500,{maxWait:5e3});const o=t.onDidChangeModelContent(s);return bc[e]={count:1,model:t,type:a,version:0,disposableHandler:o},n.didOpen(e,i).catch((e=>{}))}bc[e].count++}}async function xc(e){if(bc[e]&&(bc[e].count--,0===bc[e].count)){var t=bc[e].type;bc[e].disposableHandler.dispose();var n=vc[t];return delete bc[e],n.didClose(e).then((()=>{if(function(e){return f().filter(bc,(t=>t.type===e)).length>0}(t)||(delete vc[t],ic.deregisterTypeListener(t)),f().isEmpty(bc))return Sc()}))}}async function Ec(e,t){if(bc[e]){var n=++bc[e].version,i=bc[e].type;return vc[i].didChange(e,t,n)}}async function Sc(){const e=f().map(bc,(function(e,t){return xc(t)}));try{await Promise.all(e)}catch{}return bc={},vc={},ic.terminate()}function Ic(){wc.then((function(e){e&&(yc=a.Z.get("codio-lsp").enable_lsp_support,d.Z.subscribe("settings:changed",(function(){var e=a.Z.get("codio-lsp").enable_lsp_support;yc!==e&&((yc=e)?je.Z.info("LSP support enabled. Please refresh/reload your browser for the change to be effective "):Sc().catch((()=>{})))})))}))}const Ac=e=>f().includes(mc.B,e),Tc=function(){wc=async function(){return!0}(),d.Z.subscribe("file:editor:activate",(function(e,t){const n=t.codeEditor;if(n&&n.lspSupport&&yc){const e=n.model();Ac(e.getLanguageId())&&async function(e,t){if(t&&!t.isDisposed()&&bc[e]&&1===bc[e].count){const n=t.getLanguageId();if(!vc[n])return;const i=vc[n],s=t.getValue();return i.didOpen(e,s).catch((e=>{}))}}(n.fileName,e).catch((()=>{}))}})),d.Z.subscribe("file:editor:open",(function(e,t){if(t&&t.lspSupport&&yc){const e=t.model();Ac(e.getLanguageId())&&Cc(t.fileName,e).catch((()=>{}))}})),d.Z.subscribe("file:editor:close",(function(e,t){t&&t.lspSupport&&yc&&xc(t.fileName).catch((()=>{}))})),d.Z.subscribe("file:editor:hint",(function(e,t){yc?async function(e,t,n,i){if(!bc[e])return;const s=bc[e].model;if(s.isDisposed())return;const a=s.getValue();return Ec(e,a).then((function(){var s=bc[e].type;return vc[s].hint(e,t,n||"").then((function(e){i&&i(e)}))}))}(t.fileName,t.position,t.curLine,t.cb).catch((()=>{})):t.cb(!1)})),d.Z.subscribe("file:editor:lint",(function(e,t){yc?function(e,t,n){if(bc[e]){var i=bc[e].type,s=vc[i].getDiagnostics(e);n&&n(s)}}(t.fileName,t.text,t.cb):t.cb([])})),d.Z.subscribe("file:editor:hover",(function(e,t){yc?async function(e,t,n){if(bc[e]){var i=bc[e].type;return vc[i].hover(e,t).then((function(e){n&&n(e)}))}}(t.fileName,t.position,t.cb).catch((()=>{})):t.cb()})),d.Z.subscribe("command:codio-lsp:toggle",(function(){wc.then((function(e){if(e){var t=a.Z.get("codio-lsp").enable_lsp_support;gc.projectSettingsUpdate({arg:{plugin:"codio-lsp",key:"enable_lsp_support",value:!t}})}else je.Z.info('Sorry, but LSP does not enabled in your organization account. Please contact us <a href="mailto:help@codio.com">help@codio.com</a> to find out more and to discuss this further.')}))})),d.Z.subscribe("settings:loaded",Ic)};i.default.register({info:Mr,hotkeys:Rr,settings:Lr,get:async function(){return rc}}),Tc();const jc=JSON.parse('{"name":"junit","description":"JUnit","codio":{"global":true,"noFile":true,"title":"JUnit","urls":"junit"}}'),Zc=JSON.parse('{"open":{"key":"Shift+Alt+J","desc":"Open and execute JUnit"}}'),Oc=JSON.parse('{"timeout":{"default":30,"type":"int","desc":"set time out for junit scripts."}}');var Nc=n(50156),Dc=d.Z.create(n(23112)),Mc=function(e){if(!(this instanceof Mc))return new Mc(e);this.container=e},Rc=Mc.prototype,Lc={},Fc=I().compile('<form action="/" method="post" class="form-horizontal codio-junit-form" novalidate>\n    <fieldset>\n        <div class="control-group">\n            <label class="control-label hint hint-top" for="junit-version">\n                JUnit version\n            </label>\n            <div class="controls">\n                <select id="junit-version" name="junit-version" class="input-xlarge" data-required="true">\n                    <option value="5.10.0" {{#equals jUnitVersion \'5.10.0\'}}selected{{/equals}}>JUnit5 v5.10.0</option>\n                    <option value="5" {{#equals jUnitVersion \'5\'}}selected{{/equals}}>JUnit5 v5.6.1</option>\n                    <option value="4.13.2" {{#equals jUnitVersion \'4.13.2\'}}selected{{/equals}}>JUnit4 v4.13.2</option>\n                    <option value="4" {{#equals jUnitVersion \'4\'}}selected{{/equals}}>JUnit4 v4.12</option>\n                </select>\n            </div>\n        </div>\n        <div class="control-group">\n            <label class="control-label hint hint-top" for="junit-main-source">\n                Source path:\n            </label>\n            <div class="controls">\n                <input type="text" id="junit-main-source" name="junit-main-source" class="input-xlarge" value="{{mainSource}}" placeholder="Sources..." maxlength="256" required data-required="true" autofocus>\n            </div>\n        </div>\n        <div class="control-group">\n            <label class="control-label hint hint-top" for="junit-test-source">\n                Tests source path:\n            </label>\n            <div class="controls">\n                <input type="text" id="junit-test-source" name="junit-test-source" class="input-xlarge" value="{{testSource}}" placeholder="Test sources..." maxlength="256" required data-required="true">\n            </div>\n        </div>\n        <div class="control-group">\n            <label class="control-label hint hint-top" for="junit-libraries">\n                Library path:\n            </label>\n            <div class="controls">\n                <input type="text" id="junit-libraries" name="junit-libraries" class="input-xlarge" value="{{libraries}}" placeholder="Libraries..." maxlength="1024" required data-required="true">\n            </div>\n        </div>\n        <div class="control-group">\n            <label class="control-label hint hint-top" for="junit-libraries">\n                Working directory:\n            </label>\n            <div class="controls">\n                <input type="text" id="junit-wd" name="junit-wd" class="input-xlarge" value="{{wd}}" placeholder="Working directory..." maxlength="1024" required data-required="true">\n            </div>\n        </div>\n\n        <hr/>\n\n        <div class="control-group">\n            <label class="control-label hint hint-top" for="junit-add-case">\n                Add test case:\n            </label>\n            <div class="controls">\n                <input type="text" id="junit-add-case" name="junit-add-case" class="input-xlarge" value="{{librariesPath}}" placeholder="Path to file or drop it..." maxlength="1024" required data-required="true">\n                <button type="button" class="btn" id="junit-add-case-btn">Add test case</button>\n            </div>\n        </div>\n\n        <hr/>\n\n        <div id="junit-test-cases">\n\n        </div>\n\n    </fieldset>\n</form>\n'),Bc=I().compile('<div class="control-group">\n    <label class="control-label hint hint-top">\n        <button class="remove-btn icon-button" aria-label="Remove test case" title="Remove test case">\n            <span class="iconify-inline" data-icon="@codio:mdi:trash-can-outline"></span>\n        </button>\n        Test case\n    </label>\n    <div class="controls">\n        <div class="junit-case-info">\n            {{#if jUnit5Case}}\n            <div><strong class="junit5-case">It is JUnit5 case</strong></div>\n            {{/if}}\n            <div><strong>Path:</strong> <span class="junit-case-path">{{casePath}}</span></div>\n            <div><strong>Class name:</strong> <span class="junit-case-class">{{className}}</span></div>\n        </div>\n        {{#if showExecute}}\n            <button type="submit" class="btn btn-primary" id="junit-execute-btn">Execute all</button>\n        {{/if}}\n    </div>\n</div>\n');Rc._save=function(){var e=this.container.find("#junit-main-source").val(),t=this.container.find("#junit-test-source").val(),n=this.container.find("#junit-libraries").val(),i=this.container.find("#junit-version").val(),s=this.container.find("#junit-wd").val(),a=[];Lc={};var o=this.container.find(".junit-case-info");return f().each(o,(function(e){var t=E()(e),n=t.find(".junit-case-path").text(),i=t.find(".junit-case-class").text(),s=t.find(".junit5-case").size()>0;Lc[n]=!0,a.push({path:n,className:i,jUnit5Case:s})})),Nc.ZP.updateSettingsContent({mainSource:e,testSource:t,libraries:n,cases:a,wd:s,jUnitVersion:i})},Rc._addTestCase=function(e){if(!f().isEmpty(e)&&i.default.currentProject.exists(e)){if(!Lc[e]){var t=this,n="";i.default.currentProject.file(e).then((function(t){return n=t.content,qs.Z.parseClassInformation(t.content,e)})).then((function(i){if(f().isEmpty(i.className))return void je.Z.error("Java class not found in "+e);if(f().includes(n,"@Test")||f().includes(n,"@ParameterizedTest")||f().includes(n,"@org.junit.jupiter.api.Test")||f().includes(n,"@org.junit.jupiter.params.ParameterizedTest")||f().includes(n,"extends")){var s=f().includes(n,".jupiter.");if(s){!(f().endsWith(i.className,"Test")||f().endsWith(i.className,"Tests"))&&je.Z.info("".concat(i.className," class name do not match against class names ending in Test or Tests. This test may not function correctly."))}var a=f().isEmpty(i.packageName)?i.className:i.packageName+"."+i.className;t._caseTemplate(e,a,s),t._save()}else je.Z.error("JUnit test not found in "+e)}))}}else je.Z.error("File not found: "+e)},Rc._caseTemplate=function(e,t,n){var i=E()(Bc({casePath:e,className:t,showExecute:f().isEmpty(f().keys(Lc)),jUnit5Case:n}));Lc[e]=!0;var s=this;this.container.find("#junit-test-cases").append(i),d.Z.on(i.find(".remove-btn"),"click",(function(e){e.preventDefault(),e.stopPropagation();var t=E()(this).parent().parent();Ae.Z.showConfirm({title:"Case remove confirmation",description:"Are you sure you want to remove this case?",onClose:function(e){e&&(t.remove(),s._save())}})}))},Rc._execute=function(){this._save().then((function(e){f().isEmpty(e.cases)?je.Z.error("No tests to execute"):Dc.execute()}))},Rc._bindEvents=function(){var e=this;d.Z.on(this.container.find("input"),"change",(function(){e._save()})),d.Z.on(this.container.find("#junit-version"),"change",(function(){e._save()})),d.Z.on(this.container.find("#junit-add-case-btn"),"click",(function(t){t.preventDefault(),t.stopPropagation();var n=e.container.find("#junit-add-case").val();e._addTestCase(n)})),d.Z.on(this.container.find("form"),"submit",(function(t){t.preventDefault(),t.stopPropagation(),e._execute()}))},Rc.open=function(){var e=this;return Nc.ZP.loadSettingsFromFile().then((function(t){Lc={},e.container.empty().append(E()(Fc(t))),f().each(t.cases,(function(t){e._caseTemplate(t.path,t.className,t.jUnit5Case||!1)})),e._bindEvents()}))},Rc.close=function(){},Rc.fileDrop=function(e){this._addTestCase(e)};const Uc=Mc;var qc=n(47753),Hc=n.n(qc),Gc=n(4629),Wc=n(82678);const zc=Gc.ZP.NO_TESTS,Vc=Gc.ZP.NO_JAVA,Kc=Gc.ZP.COMPILE_ERROR,Jc="display-name: ";var Yc=d.Z.create(n(23112)),Qc=function(e){if(!(this instanceof Qc))return new Qc(e);this.container=e},Xc=Qc.prototype,$c=I().compile('<div class="junit-results">\n{{#equals status \'pending\'}}\n  <strong>Please wait, your test case files are being executed.</strong>\n{{/equals}}\n{{#equals status \'fulfilled\'}}\n  <h3>\n    Tests Summary\n    <button class="btn btn-primary" id="junit-execute-btn">Re-execute</button>\n  </h3>\n  <div class="junit-summary-info">\n    <table>\n      <tr>\n        <td><strong>{{tests}}</strong></td>\n        <td><strong>{{failures}}</strong></td>\n        <td><strong>{{time}}s</strong></td>\n      </tr>\n      <tr>\n        <td>tests</td>\n        <td>failures</td>\n        <td>duration</strong></td>\n      </tr>\n    </table>\n  </div>\n  {{#each cases}}\n    <div class="junit-result-block">\n      <p class="junit-result-classname">{{classname}}</p>\n      <table class="junit-result-table">\n        <thead>\n          <tr>\n            <th>Test</th>\n            <th>Duration</th>\n            <th>Result</th>\n          </tr>\n        </thead>\n        <tbody>\n          {{#each cases}}\n            <tr>\n              <td>{{name}}</td>\n              <td>{{time}}s</td>\n              <td class="junit-result-{{#if failure}}failed{{/if}}{{#unless failure}}passed{{/unless}}"\n                  {{#if failure}}title="{{failure.message}}"{{/if}}\n              >\n                {{#if failure}}failed<i class="ss-icon ss-navigatedown"></i>{{/if}}{{#unless failure}}passed{{/unless}}\n              </td>\n            </tr>\n          {{#if failure}}\n            <tr class="hide">\n              <td colspan="3" class="junit-test-error-description">\n                {{#if failure.message}}\n                  <pre>Message: <b>{{failure.message}}</b></pre>\n                {{/if}}\n                <pre>{{failure.text}}</pre>\n              </td>\n            </tr>\n          {{/if}}\n          {{/each}}\n        </tbody>\n      </table>\n    </div>\n  {{/each}}\n{{/equals}}\n{{#equals status \'no_results\'}}\n  <strong>No active tests found</strong>\n{{/equals}}\n{{#equals status \'no_java\'}}\n  It looks like Java is not installed.<br/>\n  Either connect your project to the appropriate {{whitelabel}} certified stack or you can install Java from the Tools->\n  <a href="{{installSoftwareLink}}">Install software</a> menu.\n{{/equals}}\n{{#equals status \'error\'}}\n  <h3>\n    Tests Summary\n    <button class="btn btn-primary" id="junit-execute-btn">Re-execute</button>\n  </h3>\n  <strong>Compile or execution error:</strong>\n  <br/>\n  <pre>{{error}}</pre>\n{{/equals}}\n</div>\n');function el(e){return f().isString(e)?e.replace(/&#10;/g,"\n").replace(/&lf;/g,"\n"):e}function tl(e){let t=e.failure||e.error,n=e._name;if(f().isString(e["system-out"])){const t=e["system-out"].split("\n"),i=f().find(t,(e=>f().startsWith(e,Jc)));i&&(n=i.substring(Jc.length))}return{name:n,time:e._time,failure:!!t&&{message:el(t._message),text:el(t.__text||t.__cdata)}}}function nl(e,t){d.Z.on(e.find(".junit-result-failed"),"click",(function(){var e=E()(this).parent().next();e.toggleClass("hide");var t=E()(this).find("i");e.hasClass("hide")?(t.removeClass("ss-navigateup"),t.addClass("ss-navigatedown")):(t.removeClass("ss-navigatedown"),t.addClass("ss-navigateup"))})),d.Z.on(e.find("#junit-execute-btn"),"click",(function(){Yc.execute(),f().defer((function(){t.open()}))}))}Xc.open=async function(){var e=Wc.default.getCurrentExecutions(),t=this;const n=await u.default.promise.getState(e);function s(e){t.closed||(t.container.empty().append(E()($c({status:"error",error:e}))),nl(t.container,t))}this.container.empty().append(E()($c({status:n}))),e.then((function(e){var n,a,o,r;if(!t.closed)if(e.code===zc)t.container.empty().append(E()($c({status:"no_results"})));else if(e.code===Vc){var c="/"+i.default.currentProject.path+"/install-software";t.container.empty().append(E()($c({status:"no_java",installSoftwareLink:c})))}else if(e.code===Kc)s(e.stdout);else{var l=(new(Hc())).xml_str2json(e.stdout);l?(t.container.empty().append(E()($c((n=l.testsuite,a=f().isArray(n.testcase)?n.testcase:[n.testcase],o=f().groupBy(a,(function(e){return e._classname})),r=f().map(o,(function(e,t){return{classname:t,cases:f().map(e,tl)}})),{status:"fulfilled",failures:(n._failures?f().toInteger(n._failures):0)+(n._errors?f().toInteger(n._errors):0),tests:n._tests,time:n._time,timestamp:n._timestamp,cases:r})))),nl(t.container,t)):s(e.stdout)}})).catch((function(e){s(e)}))},Xc.close=function(){this.closed=!0};const il=Qc,sl=I().compile('<section class="filters">\n<ul class="tabbed">\n    <li><a href="#tab-settings">JUnit Settings</a></li>\n    <li><a href="#tab-executions">JUnit Executions</a></li>\n</ul>\n</section>\n<div class="scrollable">\n    <section class="data"></section>\n</div>\n');var al,ol=function(e){if(!(this instanceof ol))return new ol(e);this.container=e;var t=E()(sl({whitelabel:it.Z.get("whitelabel")}));this.container.append(t),d.Z.on(t,"click.junit",".tabbed a",this._handleTabClick.bind(this)),this._subId=d.Z.subscribe("junit:execute",(()=>{f().defer((()=>this._openTab("executions")))})),Wc.default.getStoredExecution()?this._openTab("executions"):this._openTab("settings")},rl=ol.prototype;rl._handleTabClick=function(e){e.preventDefault();var t=E()(e.target).attr("href");if(null!==t.match(/#tab-/)){var n=t.replace("#tab-","");this._openTab(n)}},rl._openTab=function(e){const t=this.container.find(".data");var n=this.container.find(".tabbed li"),i=n.find('a[href="#tab-'+e+'"]').parent();if(!i.hasClass("active")){n.removeClass("active"),i.addClass("active"),al&&al.close();var s=this;switch(e){case"settings":al=new Uc(t),f().delay((function(){s.container.find("#junit-main-source").focus()}),100);break;case"executions":al=new il(t),f().delay((function(){s.container.find("#junit-execute-btn").focus()}),100);break;default:return}al&&al.open()}},rl.activate=function(){const e=()=>{const e=new Error("Not allowed");return e.close=!0,Promise.reject(e)};if(i.default.currentUser.isAnonymous())return e();const t=i.default.currentProject.access.control;if("OWNER"!==t&&"ADMIN"!==t&&"WRITE_FILES"!==t)return e();this.render()},rl.deactivate=function(){},rl.close=function(){al&&al.close(),d.Z.unsubscribe(this._subId)},rl.render=function(){},rl.fileDrop=function(e,t,n){var i=n.path;return"file"===n.type&&al.fileDrop&&al.fileDrop(i),!0};const cl=ol;n(82678),d.Z.subscribe("command:junit:open",(function(){i.default.ide.open("junit")})),i.default.register({info:jc,hotkeys:Zc,settings:Oc,get:async function(){return cl}});const ll=JSON.parse('{"name":"userenv","description":"Environment Variables","codio":{"global":true,"noFile":true,"title":"Environment Variables","urls":"userenv"}}'),dl='<tr class="codio-userenv-tr-item">\n  <td>\n    <button class="btn codio-userenv-remove-btn" title="Remove variable" aria-label="Remove variable">\n      <span class="iconify-inline" data-icon="@codio:mdi:trash-can-outline"></span>\n    </button>\n  </td>\n  <td><input type="text" maxlength="120" class="codio-userenv-input codio-userenv-key" value="{{key}}" /></td>\n  <td><input type="text" maxlength="2048" class="codio-userenv-input codio-userenv-value" value="{{value}}"/></td>\n</tr>\n',ul=u.default.KeyCode,hl=I().compile('<form action="/" method="post" class="form-horizontal codio-userenv-form" novalidate>\n  <h1 class="codio-userenv-title">Environment Variables</h1>\n  <fieldset>\n    <table class="codio-userenv-table">\n      <thead>\n        <tr>\n          <th scope="col" class="codio-userenv-th-remove"></th>\n          <th scope="col" class="codio-userenv-th-key">\n            Key\n          </th>\n          <th scope="col" class="codio-userenv-th-value">\n            Value\n          </th>\n        </tr>\n      </thead>\n      <tbody>\n      <tr class="codio-userenv-empty hide"><td colspan="3">No environment variables</td></tr>\n      {{#each items}}\n        {{> userEnvItem this}}\n      {{/each}}\n      </tbody>\n    </table>\n  </fieldset>\n  <div class="codio-userenv-buttons">\n    <button class="btn btn-primary codio-userenv-save-btn" id="userenv_save">Save</button>\n    <button class="btn active codio-userenv-add-btn" id="userenv_add" type="button" aria-label="Add environment variable">Add Variable</button>\n  </div>\n</form>\n\n'),pl=I().compile(dl);ks.Z.registerPartial("userEnvItem",dl);const fl=class{constructor(e){this.container=e}load(){return this.cachedItems?Promise.resolve(this.cachedItems):(this.dataPromise||(this.dataPromise=ao.default.ProjectManager.getEnvVariables()),this.dataPromise.then((e=>(this.cachedItems=e,this.cachedItems))))}activate(){const e=i.default.currentProject.access.control;if(i.default.currentUser.isAnonymous()||"OWNER"!==e){const e=new Error("Not allowed");return e.close=!0,Promise.reject(e)}this.initialized||(this.container.block(),this.load().then((e=>{this.initialized=!0,this.render(e)})).catch((e=>{je.Z.error(e.message),this.dataPromise=null,this.cachedItems=null})).finally((()=>this.container.unblock())))}close(){d.Z.off(this.container,".user-env"),this.cachedItems=null,this.initialized=!1,this.container=null,this.dataPromise=null}bindEvents(){d.Z.on(this.container,"keydown.user-env",".codio-userenv-input",(e=>{(e.which||e.keyCode)===ul.RETURN&&(e.stopPropagation(),e.preventDefault())})),d.Z.on(this.container,"click.user-env",".codio-userenv-remove-btn",(e=>{e.preventDefault();const t=E()(e.currentTarget).closest("tr");this.cachedItems.splice(t.index()-1,1),t.remove(),this.updateNoItemsMessageVisibility()})),d.Z.on(this.container,"click.user-env","#userenv_add",(e=>{e.preventDefault();const t={key:"",value:""};this.cachedItems.push(t),this.container.find(".codio-userenv-table > tbody").append(E()(pl(t))),this.updateNoItemsMessageVisibility()})),d.Z.on(this.container,"click.user-env","#userenv_save",(e=>{e.preventDefault();const t=this.collectItems();null!==t&&ao.default.ProjectManager.setEnvVariables(t).then((()=>je.Z.success("Environment variables has been updated. It will be applied after box restart."))).catch((e=>je.Z.error(e.message)))}))}updateNoItemsMessageVisibility(){const e=this.container.find(".codio-userenv-empty");this.cachedItems.length?e.addClass("hide"):e.removeClass("hide")}collectItems(){const e=this.container.find(".codio-userenv-table > tbody > .codio-userenv-tr-item");return this.variablesIsValid(e)?E().map(e,(e=>{const t=E()(e);return{key:t.find(".codio-userenv-key").val(),value:t.find(".codio-userenv-value").val()}})):null}variablesIsValid(e){let t=!0;return E().each(e,((e,n)=>{const i=E()(n).find(".codio-userenv-key"),s=i.val().trim();let a=[];/^[0-9]+/.test(s)&&a.push("Key cannot start with a number."),/^[A-Z0-9_]+$/.test(s)||a.push("Key must contain only characters: _, A-Z, 0-9."),a.length>0&&(u.default.addErrorToInput(i,{title:a.join("<br/>"),append:!0}),t=!1)})),t}render(e){d.Z.off(this.container,".user-env");const t=E()(hl({items:e}));this.container.empty().append(t),this.updateNoItemsMessageVisibility(),this.bindEvents()}};d.Z.subscribe("command:userenv:open",(function(){i.default.ide.open("userenv")})),i.default.register({info:ll,hotkeys:{},settings:{},get:async function(){return fl}});const ml=JSON.parse('{"name":"virtual-machines","description":"Virtual machines VNC connection","codio":{"global":true,"singleton":true,"title":"VM","urls":["virtual-machines","virtual-machines-ssh","virtual-machines-nested"]}}');var gl=n(96577),bl=n(49088),vl=n(1650);const yl=(0,an.e)(tn._F);function wl(e,t){const n=new gl.ReportActiveRequest;return n.setAssignmentId(e),n.setOwnerId(t),new Promise(((e,t)=>{yl.reportActive(n,(0,sn.sd)(),((n,i)=>{n?t(new Error(n.message)):e(i)}))}))}function _l(e,t){const n=new gl.FetchTaskStatusRequest;n.setTaskId(e);let i=null;return new Promise(((s,a)=>{function o(){yl.fetchTaskStatus(n,(0,sn.sd)(),((t,n)=>{t?a(new Error(t.message)):n.getStatus()===gl.FetchTaskStatusResponse.TaskStatus.IN_PROGRESS?i=setTimeout((()=>o()),5e4):(null!=i&&(clearTimeout(i),i=null),vl.Z.unsubscribe("tasks/".concat(e)),n.getStatus()===gl.FetchTaskStatusResponse.TaskStatus.ERROR?a(new Error(n.getDescription())):s(n))}))}o(),vl.Z.subscribe("tasks/".concat(e),(e=>{e&&(f().isFunction(t)&&t(e),o())}))}))}const kl={};async function Pl(){const e=i.default.currentProject,{pairProgramming:t}=e,n=t&&t.enabled;if(e.writableCopy||n)return;let s,a;if(e.authorAssignment&&e.authorAssignment.course&&e.authorAssignment.course.details?(s=e.authorAssignment.course.details,a=e.authorAssignment.course.organizationId):e.eduStartedAssignmentInfo&&e.eduStartedAssignmentInfo.course&&e.eduStartedAssignmentInfo.course.details&&(s=e.eduStartedAssignmentInfo.course.details,a=e.eduStartedAssignmentInfo.course.organizationId),s&&s.computedVmOptions&&s.computedVmOptions.enabled){const e=await function(e,t){const n=new gl.FetchAmiRequest;return n.setOrganizationId(e),n.setId(t),new Promise(((e,t)=>{yl.fetchAmi(n,(0,sn.sd)(),((n,i)=>{n?t(new Error(n.message)):e(i.getAmi().toObject())}))}))}(a,s.computedVmOptions.amiId);return{...s.computedVmOptions,features:e.features}}}async function Cl(){const e=i.default.currentProject;return kl[e.guid]||(kl[e.guid]=Pl()),kl[e.guid]}var xl=n(56225),El=n(23318),Sl=n(70580);var Il=n(52102),Al={};const Tl={};function jl(){var e=Zl();f().isEqual(e,Al)||(Al=e,d.Z.trigger(Tl,"settings-changed",e))}const Zl=function(){return a.Z.get("terminal")};d.Z.subscribe("settings:changed",jl),d.Z.subscribe("settings:loaded",jl);const Ol=Tl;var Nl=n(45540);const Dl=JSON.parse('["ide:layout_default","ide:layout_simple","ide:layout_2_columns","ide:layout_2_rows","ide:layout_showcase","ide:panel_split_horizontal","ide:panel_split_vertical","ide:panel:join","ide:panel_close","ide:tab_close","ide:tab_close_all","ide:tab_close_others","ide:tab_close_left","ide:tab_close_right","ide:tab_switch_left","ide:tab_switch_right","ide:key_quick_open","ide:key_quick_run","ide:panel_switch_right","ide:panel_switch_left","ide:panel_switch_up","ide:panel_switch_down","ide:key_menu_focus"]'),Ml=I().compile('<div class="ssh-terminal-loading">Connecting...</div>\n<div class="ssh-terminal-message"></div>\n<div class="ssh-terminal-message-writable"></div>\n<div class="ssh-terminal-holder">\n</div>\n'),Rl=I().compile('<div id="ssh-reconnect-prompt">\n  <h4>\n    Your connection to the "{{#if credentials.username}}{{credentials.username}}@{{credentials.host}}{{else}}terminal{{/if}}{{#if credentials.port}}:{{credentials.port}}{{/if}}" has closed.&nbsp;\n    Click the Re-Connect button to restore the connection. If the connection isn\'t restored, click Restart Box and then the Re-Connect button.\n  </h4>\n  <div class="action-container">\n    <button class="btn close-connection btn-primary" tabindex="0" data-pos="2" title="Close tab" aria-label="Close tab">Close Tab</button>\n    {{#if project.isAdmin}}\n    <button class="btn restart-box" tabindex="0" data-pos="1" title="Restart Box" aria-label="Restart Box">Restart Box</button>\n    {{/if}}\n    <button class="btn re-connect" tabindex="0" data-pos="0" title="Re-connect" aria-label="Re-connect">RE-Connect</button>\n  </div>\n</div>\n'),Ll=I().compile('<div id="ssh-offline-prompt">\n  <h4>Your connection to your Box has been lost. You will automatically be reconnected when the connection is recovered.</h4>\n  <div class="action-container hide">\n    <button class="btn restart-box" tabindex="0" data-pos="0" title="Restart Box" aria-label="Restart Box">Restart Box</button>\n  </div>\n</div>\n'),Fl=I().compile('<div id="writable-prompt">\n    <button class="btn writable-btn" tabindex="0" data-pos="0" title="Writable Copy" aria-label="Writable Copy">Writable Copy</button>\n    <strong>\n        File system is read-only. To run code or make changes, make a writable copy.\n        To ensure the student\'s submission remains the same,\n        any changes you make will be deleted when you close the writable copy tab.\n    </strong>\n</div>\n');var Bl=0,Ul=[],ql=function(e,t,n,i){let s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];this.credentials=t,this.noFocusOnInit=n,this.container=e.html(Ml()),this.connecting=!0,this.subscriptions=[],this.canReconnect=s,this.header=e.find(".ssh-terminal-message"),this.writablePlacer=e.find(".ssh-terminal-message-writable"),this.send=i,this.holder=this.container.find(".ssh-terminal-holder"),this.id=function(){if(Ul.length>0)return Ul.shift();return Bl++}(),this.holder.data("id",this.id),this.active=!0,this.inputStorage=[],this.activeAndAlreadyFocused=!1,this._execTasks=[],this._execDebounced=f().debounce(this.runExec.bind(this),100,{maxWait:3e4}),this._resizeDebounced=f().debounce(this.resize.bind(this),100,{maxWait:1e3}),this.welcomeTextDoneCallback=f().debounce(this._welcomeTextDoneCallback.bind(this),200,{maxWait:3e3}),this.initialized=!1;var o=a.Z.descriptions().terminal.theme.values,r=a.Z.get("terminal").theme;r=f().includes(o,r)?r:"dark",this.holder.addClass("codio-terminal-"+r);const c=this.fitAddon=new La.FitAddon,l=this.term=new Ra.Terminal(this.getConfiguration());l.loadAddon(c),l.loadAddon(new Il.WebLinksAddon),this.initialize(),this.container.find(".xterm-helper-textarea").data("allowed-hotkeys",Dl.join(",")),this.bindEvents()};ql.prototype.initialize=function(){!this.initialized&&this.term&&this.holder.is(":visible")&&(this.term.open(this.holder[0]),this.resize(),!this.noFocusOnInit&&this.focus(),this.initialized=!0),this.forceRefresh()},ql.prototype.forceRefresh=function(){if(!this.term)return;const e=this.term._core;e._charSizeService&&e._charSizeService.measure(),this.resize()},ql.prototype.getTheme=function(){const e=a.Z.get("terminal"),t=a.Z.descriptions().terminal.theme.values;return"dark"===(f().includes(t,e.theme)?e.theme:"dark")?{background:"black",foreground:"white",selectionForeground:"#B2CEF0",selectionBackground:"#001C3E"}:{background:"white",foreground:"black",cursor:"black",selectionForeground:"#001C3E",selectionBackground:"#B2CEF0"}};const Hl=e=>Math.min(100,Math.max(8,e));ql.prototype.getConfiguration=function(){const e=a.Z.get("terminal"),t=e.font_size||14;return{screenKeys:!0,cursorBlink:!1,scrollback:e.scrollback||3e3,fontSize:Hl(t),fontFamily:'"Source Code Pro", Monaco, Menlo, Consolas, "Courier New", monospace',theme:this.getTheme(),screenReaderMode:!0}},ql.prototype._welcomeTextDoneCallback=function(){f().isEmpty(this._execTasks)||this._execDebounced(),this.resize(),this.welcomeTextDoneCallback=void 0},ql.prototype.onDataSend=function(e){this.send("data",{input:e,cols:this.term.cols,rows:this.term.rows})},ql.prototype.bindEvents=function(){var e=this.term,t=this;e.onTitleChange(this.loaded.bind(this)),e.onData((e=>this.onDataSend(e))),e.onKey((function(e){let{domEvent:t}=e;t.preventDefault()})),this.__settingsChangedCallback=function(n,i,s){n.holder.removeClass((function(e,t){return(t.match(/(^|\s)codio-terminal-\S+/g)||[]).join(" ")}));var o=a.Z.descriptions().terminal.theme.values,r=s.theme;r=f().includes(o,r)?r:"dark",n.holder.addClass("codio-terminal-"+r),e.options.theme=t.getTheme(),e.options.scrollback=s.scrollback||3e3;const c=s.font_size||14;e.options.fontSize=Hl(c),n.resize()}.bind(null,this),this.subscriptions.push(d.Z.on(Ol,"settings-changed",this.__settingsChangedCallback)),e.attachCustomKeyEventHandler((function(e){return!1!==t.hasFocus&&function(e,t){if(function(e,t){var n=e.term,i=n._core.isMac,s=n.getSelection(),a=i&&t.metaKey||!i&&t.ctrlKey,o=a&&67===t.keyCode,r=a&&86===t.keyCode;return s&&o||r}(e,t))return!1;var n=function(e){var t={charCode:e.charCode,altKey:e.altKey,code:e.code,ctrlKey:e.ctrlKey,key:e.key,keyCode:e.keyCode,metaKey:e.metaKey,shiftKey:e.shiftKey,target:e.target,srcElement:e.srcElement,which:e.which};return E().Event(e.type,t)}(t);if(d.Z.trigger(document,n),n.isPropagationStopped()||n.isDefaultPrevented())return t.stopPropagation(),t.preventDefault(),!1;return!0}(t,e)})),this.resizeLID=d.Z.on(window,"resize.panels",(()=>this._resizeDebounced())),this.subscriptions.push(d.Z.subscribe("education:writableCopyMenuVisibility",this._writableCopyCallback.bind(this)))},ql.prototype.activate=function(){f().defer((()=>this.initialize()));var e=this;this.active=!0,f().each(this.inputStorage,(function(t){e.term.write(t)})),this.inputStorage=[],this.activeAndAlreadyFocused=this.active&&this.hasFocus,this._writableCopyCallback(void 0,{state:Nl.Z.showWritableCopyButton()})},ql.prototype.deactivate=function(){this.active=!1,this.activeAndAlreadyFocused=!1},ql.prototype.destroy=function(){this.cleanup(),this.container.empty(),this.send("kill"),this.resizeLID&&(d.Z.unsubscribe(this.resizeLID),this.resizeLID=null)},ql.prototype.cleanup=function(){Ul.push(this.id),this._execDebounced&&this._execDebounced.cancel(),this.term.dispose(),f().each(this.subscriptions,(function(e){d.Z.unsubscribe(e)}))},ql.prototype.reConnectPrompt=function(){this.container.find(".ssh-terminal-loading").hide(),this.header.html(Rl({credentials:this.credentials||{},project:i.default.currentProject},{allowProtoPropertiesByDefault:!0}))},ql.prototype.offlinePrompt=function(e){if(this.container.find(".ssh-terminal-loading").hide(),e){if(this.canReconnect){const e=E()(Ll());setTimeout((()=>{e.find(".action-container").removeClass("hide")}),2e4),this.header.html(e)}}else this.header.empty()},ql.prototype._writableCopyCallback=function(e,t){let{state:n}=t;const{currentProject:s}=i.default;n&&s.isReadOnly?(this.writablePlacer.html(Fl({})),this.writablePlacer.find(".writable-btn").click((()=>{a.Z.hotkey.execute("education","writable")}))):this.writablePlacer.empty()},ql.prototype.focus=function(){var e=this;e.term&&e.term.focus(),e.hasFocus=!0,this.activeAndAlreadyFocused=this.active},ql.prototype.blur=function(){this.hasFocus=!1;this.activeAndAlreadyFocused=!this.active,this.term&&this.term.blur()},ql.prototype.write=function(e){this.loaded(),this.active?this.term.write(e):this.inputStorage.push(e)},ql.prototype.exec=function(e){this._execTasks.push(e),this._execDebounced()},ql.prototype.runExec=function(){if(this.connecting||this.term&&!this.term.textarea)return this._execDebounced();if(!f().isEmpty(this._execTasks)){var e=this._execTasks;this._execTasks=[];var t=f().last(e),n=f().isObject(t)&&t.noFocus;f().each(e,(e=>{e=f().isObject(e)?e.cmd:e,this.onDataSend("".concat(e,"\r"))})),!n&&this.focus()}},ql.prototype.loaded=function(){this.connecting&&(this.container.find(".ssh-terminal-loading").hide(),this.resize(),this.connecting=!1)},ql.prototype.resize=function(){var e=this.term;if(e&&this.holder.is(":visible")&&0!==this.holder.has(".xterm").length){try{var t;null!==(t=e._core)&&void 0!==t&&null!==(t=t._renderService)&&void 0!==t&&t.dimensions&&this.fitAddon.fit()}catch(e){}this.send("resize",{cols:e.cols,rows:e.rows})}};const Gl=ql,Wl="\0",zl="",Vl="",Kl="",Jl=0,Yl=2,Ql=3;const Xl=e=>new Promise(((t,n)=>{let i=0;const s=setInterval((()=>{i>9?(clearInterval(s),n(new Error("Maximum number of attempts exceeded"))):e.readyState===e.OPEN&&(clearInterval(s),t()),i++}),300)}));async function $l(e,t){if(e)if(e.readyState!==e.OPEN)try{await Xl(e),e.send(t)}catch(e){}else e.send(t)}const ed=class{constructor(e,t,n,i,s,a,o){this.textEncoder=new TextEncoder,this.textDecoder=new TextDecoder,this.terminalId=n,this.remoteAddr=e,this.getTokenFunc=t,this.checkRemoteTerminalF=s,this.closeTerminalClientF=a,this.container=i,this.wasClosed=!1,this.reconnectCount=0,this.terminal=null,this.websocket=null,this.initCmd=o}async initTerminal(e){this.terminal=new Gl(this.container,{},e,this.sendFunction.bind(this),!0),await this.connect()}async connect(){if(this.wasClosed)return;if(this.reconnectCount>=200)return void je.Z.error("Failed to connect to terminal");let e;this.reconnectCount++;try{e=await this.getTokenFunc()}catch(e){}if(!e)return void setTimeout((async()=>{await this.connect()}),1e3);if(this.wasClosed)return;const t="".concat(this.remoteAddr,"?accessToken=").concat(e,"&terminalId=").concat(this.terminalId);this.websocket=new WebSocket(t),this.websocket.binaryType="arraybuffer",this.websocket.onmessage=this.onSocketData.bind(this);const n=this;this.websocket.onclose=function(){n.wasClosed||(n.terminal&&n.terminal.offlinePrompt(!0),n.websocket=null,setTimeout((async function(){if(n.checkRemoteTerminalF){if(!await n.checkRemoteTerminalF())return void(n.terminal&&n.terminal.reConnectPrompt())}n.connect()}),1e3))},this.websocket.onerror=function(){n.websocket.close()},this.websocket.onopen=function(){n.terminal.offlinePrompt(!1),n.reconnectCount=0,n.initCmd&&n.websocket.send(n.textEncoder.encode(Wl+"".concat(n.initCmd,"\r"))),n.initCmd=null;let e=setInterval((()=>{if(n.wasClosed)clearInterval(e);else try{n.websocket&&n.websocket.send(n.textEncoder.encode(Vl))}catch(e){}}),3e4)}}onSocketData(e){const t=e.data;if(!(t instanceof ArrayBuffer))return;if(0===t.byteLength)return;switch(new Uint8Array(t.slice(0,1))[0]){case Yl:break;case Jl:this.terminal.write(this.textDecoder.decode(t.slice(1)));break;case Ql:this.closeTerminalClientF&&this.closeTerminalClientF();break;default:this.terminal.write(this.textDecoder.decode(t))}}sendFunction(e,t){if(this.websocket&&this.websocket.readyState===WebSocket.OPEN&&("data"===e&&this.websocket.send(this.textEncoder.encode(Wl+t.input)),"resize"===e)){const e=JSON.stringify({cols:t.cols,rows:t.rows});this.websocket.send(this.textEncoder.encode(zl+e))}}async destroy(e){e||(await $l(this.websocket,this.textEncoder.encode(Wl+"")),await $l(this.websocket,this.textEncoder.encode(Kl))),this.wasClosed=!0,this.terminal&&this.terminal.destroy(),this.terminal=null,this.websocket&&this.websocket.close(),this.websocket=null,this.terminalId=null,this.remoteAddr=null,this.getTokenFunc=()=>{},this.checkRemoteTerminalF=()=>{},this.closeTerminalClientF=()=>{},this.container=null,this.reconnectCount=0,this.initCmd=null}focus(){this.terminal&&this.terminal.focus()}blur(){this.terminal&&this.terminal.blur()}forceRefresh(){this.terminal&&this.terminal.forceRefresh()}activate(){this.terminal&&this.terminal.activate()}deactivate(){this.terminal&&this.terminal.deactivate()}resize(){this.terminal&&this.terminal.resize()}};var td=n(32398);const nd=(0,an.e)(tn.ub);function id(){const e=new td.ListImagesRequest;return new Promise(((t,n)=>{nd.listImages(e,(0,sn.sd)(),((e,i)=>{e?n(new Error(e.message)):t(f().map(i.getImagesList(),(e=>e.toObject())))}))}))}function sd(e,t){const n=new td.HostMachine;return n.setOwnerId(t),n.setAssignmentId(e),n}function ad(e,t){const n=new td.ListVmsRequest;return n.setHost(sd(e,t)),new Promise(((e,t)=>{nd.listVms(n,(0,sn.sd)(),((n,i)=>{n?t(new Error(n.message)):e(f().map(i.getVmsList(),(e=>e.toObject())))}))}))}const od=I().compile('<section class="vm-nested-tabs">\n<ul class="tabbed">\n    <li class="active"><a href="#tab-list" data-tab="list">Cyber Range</a></li>\n</ul>\n</section>\n<div class="vm-nested scrollable">\n    <section class="data" id="vm-nested-list">\n    </section>\n</div>\n'),rd=I().compile('<div class="vm-table">\n    <div class="vm-row vm-header">\n        <div class="vm-cell vm-header vm-cell-left">\n            Name\n        </div>\n        <div class="vm-cell vm-header vm-cell-management">\n            Management\n        </div>\n        <div class="vm-cell vm-header">\n            Actions\n        </div>\n    </div>\n{{#each images}}\n<div class="vm-row" id="vm-row-{{id}}">\n    <div class="vm-name vm-cell vm-cell-left">\n        {{name}}\n    </div>\n    <div class="vm-management vm-cell vm-cell-management">\n        {{#if processing}}\n            <div id="statusbar-{{id}}"></div>\n            <svg\n                    viewbox=\'0 0 20 20\'\n                    xmlns=\'http://www.w3.org/2000/svg\'\n                    fill=\'none\'\n                    stroke=\'currentColor\'\n                    stroke-width="2"\n                    class="vm-loader-icon vm-loader-icon-small"\n            >\n                <path d=\'m5.3379 2-4.666 8 4.666 8h9.3242l4.666-8-4.666-8z\' fill=\'none\' />\n            </svg>\n        {{else}}\n            {{#if vm}}\n                <button class="btn btn-danger" data-id="{{id}}" data-action="destroy">\n                    Destroy\n                </button>\n            {{else}}\n                <button class="btn btn-primary" data-id="{{id}}" data-action="create">\n                    Create\n                </button>\n            {{/if}}\n        {{/if}}\n    </div>\n    <div class="vm-actions vm-cell">\n        {{#if processing}}\n            <svg\n                viewbox=\'0 0 20 20\'\n                xmlns=\'http://www.w3.org/2000/svg\'\n                fill=\'none\'\n                stroke=\'currentColor\'\n                stroke-width="2"\n                class="vm-loader-icon vm-loader-icon-small"\n            >\n                <path d=\'m5.3379 2-4.666 8 4.666 8h9.3242l4.666-8-4.666-8z\' fill=\'none\' />\n            </svg>\n        {{else}}\n            {{#if vm}}\n                {{#if vm.status}}\n                    <button class="btn btn-success" data-id="{{id}}" data-action="open">\n                        Open\n                    </button>\n                    <button class="btn btn-primary" data-id="{{id}}" data-action="stop">\n                        Stop\n                    </button>\n                {{else}}\n                    <button class="btn btn-primary" data-id="{{id}}" data-action="start">\n                        Start\n                    </button>\n                {{/if}}\n            {{/if}}\n        {{/if}}\n    </div>\n</div>\n{{/each}}\n</div>\n'),cd=[{name:"clipboard-read",allowlist:"*"},{name:"clipboard-write",allowlist:"*"},{name:"fullscreen",allowlist:"*"}];class ld{constructor(e,t,n,i,s){var a,o;(this.container=e,this.assignmentId=t,this.ownerId=n,this.initiationPerformed=!1,this.imagesFilter=null,null!=s&&null!==(a=s.nestedRestriction)&&void 0!==a&&a.enabled)&&(this.imagesFilter=(null==s||null===(o=s.nestedRestriction)||void 0===o?void 0:o.vms)||[]);this.init(),this.actions={create:e=>this.createVmAction(e),start:e=>this.startVmAction(e),stop:e=>this.stopVmAction(e),open:e=>this.openVmAction(e),destroy:e=>this.destroyVmAction(e)},this.container.html(od({})),this.vmIframes={},this.taskListeners={},this.vmsToOpen={},i&&(this.vmsToOpen[i]={vmName:i,processing:!1})}statusChanges(e){f().isString(e)&&e.startsWith("vm-range")?this.checkChanges():gl.StatusResponse.MachineStatus.RUNNING===e||gl.StatusResponse.MachineStatus.INACTIVE===e?this.hideProgress():this.showProgress()}setOptions(e){this.switchTab("list"),e&&(this.vmsToOpen[e]={vmName:e,processing:!1},this.initiationPerformed&&this.runVmsInitiation())}runVmsInitiation(){f().each(this.vmsToOpen,(e=>{this.runVmInitiation(e).catch((()=>delete this.vmsToOpen[e.vmName]))}))}async runVmInitiation(e){if(e.processing)return;const t=this.currentState(this.images,this.vms),n=f().find(t,(t=>t.id===e.vmName||t.name.toLowerCase()===e.vmName.toLowerCase()));if(n){if(e.processing=!0,this.vmIframes[n.id])return this.switchTab(n.id),void delete this.vmsToOpen[n.vmName];n.vm||await this.createVmAction(n.id),n.vm&&n.vm.status||await this.startVmAction(n.id),await this.openVmAction(n.id),delete this.vmsToOpen[n.vmName]}}async init(){this.showProgress();const e=await Cl();if(!e||null==e||!e.features.nestedVirtualization)return this.hideProgress(),void this.container.html("<h2>Current VM configuration does not support Cyber Range</h2>");try{const[e,t]=await Promise.all([id(),ad(this.assignmentId,this.ownerId)]);null===this.imagesFilter?this.images=e:this.images=f().filter(e,(e=>f().includes(this.imagesFilter,e.name))),this.vms=t}catch(e){je.Z.error(e.message),this.images=[],this.vms=[]}this.initiationPerformed=!0,this.runVmsInitiation(),this.render(),this.hideProgress()}showProgress(){this.container.parent().find(".vm-loader").removeClass("hide").addClass("vm-nested-progress")}hideProgress(){this.container.parent().find(".vm-nested-progress").addClass("hide").removeClass("vm-nested-progress")}render(e){const t=this.currentState(this.images,this.vms,e),n=rd({images:t});this.container.find("#vm-nested-list").html(n),this.bindEvents()}currentState(e,t,n){if(n){const e=f().find(t,(e=>e.id===n));e?e.creating={}:(this.vms.push({creating:{},id:n}),t.push({creating:{},id:n}))}return f().map(e,(e=>{const n=f().cloneDeep(e);return n.vm=f().find(t,(t=>t.id===e.id)),n.vm&&(n.vm.creating&&(n.processing=!0,n.vm.creating.taskId&&this.registerTaskListener(n.vm.creating.taskId,"#statusbar-"+n.id).catch((()=>{}))),n.vm.started&&n.vm.started.taskId&&(n.processing=!0,this.registerTaskListener(n.vm.started.taskId).catch((()=>{}))),n.vm.stopped&&n.vm.stopped.taskId&&(n.processing=!0,this.registerTaskListener(n.vm.stopped.taskId).catch((()=>{})))),n}))}async checkChanges(){const e=this.currentState(this.images,this.vms),t=await ad(this.assignmentId,this.ownerId),n=this.currentState(this.images,t);f().isEqual(e,n)||(this.vms=t,this.render())}bindEvents(){d.Z.off(this.container,"click",".btn"),d.Z.off(this.container,"click","a");const e=d.Z.on.bind(d.Z,this.container);e("click",".btn",(e=>{const t=E()(e.target).data();this.actions[t.action]&&this.actions[t.action](t.id,t.image)})),e("click","a",(e=>{const t=E()(e.target).data("tab");this.switchTab(t)}))}_confirm(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const i=u.default.promise.deferred(),s={description:e,captcha:t,onClose:e=>{e?i.resolve(!0):i.reject(!1)}};return n&&(s.description2=n),Sl.Z.showConfirm(s),i.promise}async destroyVmAction(e){await this._confirm("Do you want to destroy the Virtual Machine?",!0)&&(this.render(e),this.destroyTab(e),await function(e,t,n){const i=new td.DestroyVmRequest;return i.setHost(sd(e,t)),i.setId(n),new Promise(((e,t)=>{nd.destroyVm(i,(0,sn.sd)(),((n,i)=>{if(n)return t(new Error(n.message));_l(i.getTaskId()).then((()=>e())).catch((e=>t(e)))}))}))}(this.assignmentId,this.ownerId,e),await this.checkChanges())}async registerTaskListener(e,t){if(this.taskListeners[e])return;this.taskListeners[e]=e;const n=null!=t?e=>{const n=E()(this.container).find(t);f().isObject(e)&&e.stage&&n.text(e.progress+"% "+e.stage)}:void 0;try{await _l(e,n),await this.checkChanges()}catch(e){console.error(e)}finally{delete this.taskListeners[e]}}async createVmAction(e){this.render(e);try{await function(e,t,n,i){const s=new td.CreateVmRequest;return s.setHost(sd(e,t)),s.setImageId(n),new Promise(((e,t)=>{nd.createVm(s,(0,sn.sd)(),((n,s)=>{if(n)return t(new Error(n.message));_l(s.getTaskId(),i).then((()=>e())).catch((e=>t(e)))}))}))}(this.assignmentId,this.ownerId,e,(t=>{const n=E()(this.container).find("#statusbar-"+e);f().isObject(t)&&t.stage&&n.text(t.progress+"% "+t.stage)}))}catch(e){je.Z.error(e.message)}await this.checkChanges()}async stopVmAction(e){if(await this._confirm("Do you want to stop the Virtual Machine?")){this.render(e),this.destroyTab(e);try{await function(e,t,n){const i=new td.StopVmRequest;return i.setHost(sd(e,t)),i.setId(n),new Promise(((e,t)=>{nd.stopVm(i,(0,sn.sd)(),((n,i)=>{if(n)return t(new Error(n.message));_l(i.getTaskId()).then((()=>e())).catch((e=>t(e)))}))}))}(this.assignmentId,this.ownerId,e)}catch(e){je.Z.error(e.message)}await this.checkChanges()}}async startVmAction(e){this.render(e);try{await function(e,t,n){const i=new td.StartVmRequest;return i.setHost(sd(e,t)),i.setId(n),new Promise(((e,t)=>{nd.startVm(i,(0,sn.sd)(),((n,i)=>{if(n)return t(new Error(n.message));_l(i.getTaskId()).then((()=>e())).catch((e=>t(e)))}))}))}(this.assignmentId,this.ownerId,e)}catch(e){je.Z.error(e.message)}await this.checkChanges()}switchTab(e){const t=this.container.find(".vm-nested");t.find("section").hide(),t.find("#vm-nested-"+e).show(),f().forEach(this.vmIframes,(e=>{e.hide()})),this.vmIframes[e]&&(this.vmIframes[e].show(),this.vmIframes[e].adjustSizeAndPosition());const n=this.container.find(".tabbed");n.find("li").removeClass("active"),n.find("[data-tab='".concat(e,"']")).parent().addClass("active")}destroyTab(e){const t=this.container.find(".vm-nested");this.container.find(".tabbed").find("[data-tab='".concat(e,"']")).parent().remove(),t.find("#vm-nested-"+e).remove(),this.vmIframes[e]&&(this.vmIframes[e].clean(),delete this.vmIframes[e])}openVmAction(e){if(this.vmIframes[e])return void this.switchTab(e);const t=f().find(this.vms,(t=>t.id===e));if(!t)return;const n=this.container.find(".vm-nested");this.container.find(".tabbed").append(E()('<li class="active"><a href="#tab-'.concat(e,'" data-tab="').concat(e,'">').concat(t.name,"</a></li>")));const i=E()('<section class="data vm-nested-iframe" id="vm-nested-'.concat(e,'">'));n.append(i),this.vmIframes[e]=new xl.Z(i,i,cd,"vm-nested-".concat(e,"-container"),"virtual-machines-nested",!0),this.vmIframes[e].src(t.vncUrl),this.switchTab(e)}destroy(){this.hideProgress(),d.Z.off(this.container,"click"),f().forEach(this.vmIframes,(e=>{e.clean()})),this.vmIframes=[],this.container.empty()}}const dd=I().compile('<div class="vm-loader hide">\n    <svg\n        viewbox=\'0 0 20 20\'\n        xmlns=\'http://www.w3.org/2000/svg\'\n        fill=\'none\'\n        stroke=\'currentColor\'\n        stroke-width="1"\n        class="vm-loader-icon"\n    >\n        <path d=\'m5.3379 2-4.666 8 4.666 8h9.3242l4.666-8-4.666-8z\' fill=\'none\' />\n    </svg>\n</div>\n<div class="codio-vm-actions">\n    <button class="codio-restart-vm-button btn">\n        Restart vm\n    </button>\n    <button class="codio-reset-vm-button btn">\n        Reset vm\n    </button>\n    <div class="codio-vm-log">\n        Fetching current status...\n    </div>\n    <div class="codio-vm-log-substatus">\n    </div>\n</div>\n<div class="scrollable codio-vm-iframe-container"></div>\n'),ud=d.Z.create({vmPing:"vm:ping"}),hd=[{name:"clipboard-read",allowlist:"*"},{name:"clipboard-write",allowlist:"*"},{name:"fullscreen",allowlist:"*"}];let pd,fd;const md=[],gd=f().debounce((()=>ud.vmPing()),5e3,{maxWait:3e4}),bd=e=>{const{assignment:t}=e;return t?t.projectBased?t.projectBased.id:t.bookBased.id:""},vd=function(){const e=i.default.currentProject;if(e.writableCopy)throw new Error("Assignment id required");if(e.isAuthorProject)return{ownerId:e.owner.id,assignmentId:e.authorAssignment.assignment.id,courseId:e.authorAssignment.course.id,computedVmOptions:e.authorAssignment.course.details.computedVmOptions};if(e.eduStartedAssignmentInfo)return{ownerId:e.owner.id,assignmentId:bd(e.eduStartedAssignmentInfo),courseId:e.eduStartedAssignmentInfo.course.id,computedVmOptions:e.eduStartedAssignmentInfo.course.details.computedVmOptions};throw new Error("Assignment id required")},yd=function(){fd||(fd=d.Z.subscribe("app:timeChunkMsSpent",(()=>function(){if(pd===gl.StatusResponse.MachineStatus.RUNNING){const{assignmentId:e,ownerId:t}=vd();wl(e,t).catch((()=>{wl(e,t).catch((e=>{let{message:t}=e;console.error(t)}))}))}}())))},wd=function(){const{ownerId:e,assignmentId:t}=vd();return function(e,t){const n=new gl.StatusRequest;return n.setAssignmentId(e),n.setOwnerId(t),new Promise(((e,t)=>{yl.status(n,(0,sn.sd)(),((n,i)=>{n?t(new Error(n.message)):e(i)}))}))}(t,e)};class _d{constructor(e,t){this.extensionName=e,this.filename=t}isSsh(){return"virtual-machines-ssh"===this.extensionName}isVnc(){return"virtual-machines"===this.extensionName}isNested(){return"virtual-machines-nested"===this.extensionName}}const kd=function(e,t,n,i){try{vd()}catch(e){throw new Error("Not allowed")}if(!(this instanceof kd))return new kd(e);this.extensionType=new _d(i,t),this.wasClosed=!1,this.container=e;const s=E()(dd({}));this.container.append(s),this._firstStatusFetch=!0,this._bindEvents();const{courseId:a,ownerId:o}=vd();this.nsSubId=vl.Z.subscribeLast("tasks/"+a+o,(e=>{const t=e||"";var n;f().isString(t)&&t.startsWith("vm-range")?this.extensionType.isNested()&&(null===(n=this.nested)||void 0===n||n.statusChanges(t)):(this._logSubStatus(t),this._fetchCurrentStatus())})),md.push(this.nsSubId),this._fetchCurrentStatus(),this._resizeDebounce=f().debounce(this.onResize.bind(this),100,{maxWait:3e3}),this._resizeDebounceSub=d.Z.subscribe("panel:size:change",this._resizeDebounce)};let Pd=kd.prototype;Pd.setOptions=function(e,t,n){var i;this.extensionType.isNested()&&(null===(i=this.nested)||void 0===i||i.setOptions(null==n?void 0:n.fileName))},Pd._fetchCurrentStatus=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;wd().then((e=>{var t;this.wasClosed||(this._updateCurrentStatus(e.getStatus()),this.extensionType.isNested()&&(null===(t=this.nested)||void 0===t||t.statusChanges(e.getStatus())))})).catch((()=>{e<5&&setTimeout((()=>this._fetchCurrentStatus(e+1)),5e3)}))},Pd._updateCurrentStatus=function(e){pd=e,this._firstStatusFetch&&this.showFProgress("Initiating..."),e===gl.StatusResponse.MachineStatus.INACTIVE&&(this._firstStatusFetch?(this._logCurrentStatus("Virtual machine is inactive, running start action."),this._startVirtualMachine()):(this._logCurrentStatus("Virtual machine is inactive."),this._cleanupExtension(),this.vncUrl="",this.terminalWsUrl="")),e===gl.StatusResponse.MachineStatus.STARTING&&(this._logCurrentStatus("Virtual machine is starting."),this.showFProgress("Initiating...")),e===gl.StatusResponse.MachineStatus.RUNNING&&(this._logCurrentStatus("Virtual machine is active, opening connection."),this._waitVncUrl()),e===gl.StatusResponse.MachineStatus.STOPPING&&(this._cleanupExtension(),this.showFProgress("Stopping..."),this._disableActionButtons(),this._logCurrentStatus("Virtual machine is stopping")),this._firstStatusFetch=!1},Pd.showFProgress=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.activeFProgressMessage!==e&&(this.activeFProgressMessage=e,this.container.find(".vm-loader").removeClass("hide"))},Pd.hideFProgress=function(){this.activeFProgressMessage="",this.container.find(".vm-loader").addClass("hide")},Pd._logCurrentStatus=function(e){this.container.find(".codio-vm-log").text(e)},Pd._logSubStatus=function(e){const t=e&&"Connected"!==e?"Action: ".concat(e):"";this.container.find(".codio-vm-log-substatus").text(t)},Pd._cleanupStartTimeout=function(){f().isNumber(this._startFailTimeoutId)&&clearTimeout(this._startFailTimeoutId),this._startFailTimeoutId=null},Pd._startVirtualMachine=async function(){const{assignmentId:e,ownerId:t}=vd();pd=gl.StatusResponse.MachineStatus.STARTING,this._disableActionButtons();const n=i.default.currentUser.get("details").get("ssh"),s=n&&n.public?n.public:"";try{const n=await function(e,t,n){const i=new gl.StartRequest;i.setAssignmentId(e),i.setOwnerId(t);const s=new gl.StartRequest.StartOptions;return s.setToken((0,bl.p)()),n&&s.setSshKey(n),i.setOptions(s),new Promise(((e,t)=>{yl.start(i,(0,sn.sd)(),((n,i)=>{n?t(new Error(n.message)):e(i)}))}))}(e,t,s);this._cleanupStartTimeout(),this._startFailTimeoutId=setTimeout((()=>{El.Z.captureMessage("VM failed to start",{extra:{projectId:i.default.currentProject.guid,projectName:i.default.currentProject.pathName,assignmentId:e,ownerId:t,sshKey:s,url:window.location.href}}),this._cleanupStartTimeout()}),18e4),await _l(n.getTaskId())}catch({message:e}){this.hideFProgress(),je.Z.error(e)}finally{this._cleanupStartTimeout()}try{await this._fetchCurrentStatus()}finally{this._enableActionButtons()}yd()},Pd._waitVncUrl=function(){this.haveCurrentWaitTask||(this.haveCurrentWaitTask=!0,this._disableActionButtons(),this.container.find(".codio-reset-vm-button").removeAttr("disabled","disabled"),this.waitVncUrl())},Pd.waitVncUrl=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e>20)return this.haveCurrentWaitTask=!1,void this._enableActionButtons();const{ownerId:t,assignmentId:n}=vd();try{const i=await function(e,t){const n=new gl.FetchConnectionOptionsRequest;return n.setAssignmentId(e),n.setOwnerId(t),new Promise(((e,t)=>{yl.fetchConnectionOptions(n,(0,sn.sd)(),((n,i)=>{n?t(new Error(n.message)):e(i)}))}))}(n,t);if(!i.getUrl()&&!i.getWsTerminal())return void setTimeout((()=>this.waitVncUrl(e+1)),5e3);this.haveCurrentWaitTask=!1,this._logCurrentStatus("Virtual machine is ready."),this._enableActionButtons(),this.hideFProgress();const s=this.vncUrl!==i.getUrl()||this.terminalWsUrl!==i.getWsTerminal();this.vncUrl!==i.getUrl()&&(this.vncUrl=i.getUrl()),this.terminalWsUrl!==i.getWsTerminal()&&(this.terminalWsUrl=i.getWsTerminal()),s&&this._renderExtension()}catch(e){this._enableActionButtons(),this.haveCurrentWaitTask=!1}},Pd.focus=function(){this.term&&this.term.focus()},Pd._getFrameTopContainer=function(){return this.frame?this.frame.getIframeEl().get():this.container.find(".codio-vm-iframe-container")},Pd.onResize=function(){this.term&&this.term.resize()},Pd._renderExtension=async function(){if(this.extensionType.isSsh()){if(f().isEmpty(this.terminalWsUrl))return void this.container.find(".codio-vm-iframe-container").text("Wrong options");const e=this.terminalWsUrl,t=async function(){return pd!==gl.StatusResponse.MachineStatus.RUNNING?null:"skip"};this.term=new ed(e,t,"codioVmTerminal",this.container.find(".codio-vm-iframe-container")),this.term.initTerminal().then((()=>{this.term.forceRefresh(),this.term.focus(),this._resizeDebounce()}))}else if(this.extensionType.isNested()){const{ownerId:e,assignmentId:t,computedVmOptions:n}=vd();this.nested=new ld(this.container.find(".codio-vm-iframe-container"),t,e,this.extensionType.filename,n)}else{const e=this.container.find(".codio-vm-iframe-container");this.frame=new xl.Z(e,e,hd,"codio-vm-iframes","virtual-machine",!0),this.frame.src(this.vncUrl)}},Pd._cleanupExtension=function(){this.extensionType.isSsh()?(this.term&&(this.term.destroy(),this.term=null),this.container.find(".codio-vm-iframe-container").empty()):this.extensionType.isNested()?this.nested&&(this.nested.destroy(),this.nested=null):this.frame&&(this.frame.src("about:blank"),this.frame.clean()),this.hideFProgress()},Pd._bindEvents=function(){function e(e,t){E()(t.target).closest(".btn").attr("disabled")||e()}this.container.find(".codio-restart-vm-button").click(e.bind(this,(()=>this._onRestartClick()))),this.container.find(".codio-reset-vm-button").click(e.bind(this,(()=>this._onResetClick()))),yd(),window.addEventListener("message",this._onMessage)},Pd._onMessage=function(e){try{"noVNCPing"===JSON.parse(e.data).method&&gd()}catch{}},Pd._onRestartClick=function(){this._confirm("Do you want to restart the Virtual Machine?").then((()=>this._restartAction())).catch((()=>{}))},Pd._onResetClick=function(){this._confirm("Do you want to reset the Virtual Machine?",!0,"<center>This will remove any changes you have made to the VM and return it to its original state.<br>This process can take several minutes.</center>").then((()=>this._resetAction())).catch((()=>{}))},Pd._restartAction=function(){this._cleanupStartTimeout();const{assignmentId:e,ownerId:t}=vd();(function(e,t){const n=new gl.StopRequest;return n.setAssignmentId(e),n.setOwnerId(t),new Promise(((e,t)=>{yl.stop(n,(0,sn.sd)(),((n,i)=>{n?t(new Error(n.message)):e(i)}))}))})(e,t).then((e=>_l(e.getTaskId()))).catch((e=>{let{message:t}=e;return je.Z.error(t)})).finally((()=>this._startVirtualMachine()))},Pd._resetAction=function(){this._cleanupStartTimeout(),this._logCurrentStatus("Resetting virtual machine");const{assignmentId:e,ownerId:t}=vd();this._disableActionButtons(),this._cleanupExtension(),this.showFProgress("Resetting..."),function(e,t){const n=new gl.TerminateRequest;return n.setAssignmentId(e),n.setOwnerId(t),new Promise(((e,t)=>{yl.terminate(n,(0,sn.sd)(),((n,i)=>{n?t(new Error(n.message)):e(i)}))}))}(e,t).then((e=>_l(e.getTaskId()))).catch((e=>{let{message:t}=e;return je.Z.error(t)})).finally((()=>this._startVirtualMachine()))},Pd._confirm=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const i=u.default.promise.deferred(),s={description:e,captcha:t,onClose:e=>{e?i.resolve():i.reject(new Error("Rejected"))}};return n&&(s.description2=n),Sl.Z.showConfirm(s),i.promise},Pd._disableActionButtons=function(){this.container.find(".codio-restart-vm-button").attr("disabled","disabled"),this.container.find(".codio-reset-vm-button").attr("disabled","disabled")},Pd._enableActionButtons=function(){this.container.find(".codio-restart-vm-button").removeAttr("disabled","disabled"),this.container.find(".codio-reset-vm-button").removeAttr("disabled","disabled")},Pd.close=function(){const{courseId:e,ownerId:t}=vd();vl.Z.unsubscribe("tasks/"+e+t,this.nsSubId);const n=md.indexOf(this.nsSubId);-1!==n&&md.splice(n,1),0===md.length&&(d.Z.unsubscribe(fd),fd=null),this._cleanupStartTimeout(),this.wasClosed=!0,window.removeEventListener("message",this._onMessage),this.frame&&this.frame.clean(),this.frame=null,this.term&&(this.term.destroy(),this.term=null),this.nested&&this.nested.destroy(),this.nested=null,gd.flush(),d.Z.unsubscribe(this._resizeDebounceSub),this._resizeDebounceSub=null},Pd.activate=function(){this.term&&this.term.activate()},Pd.deactivate=function(){this.term&&this.term.deactivate()};const Cd=kd,xd=I().compile('<div class="vms-dummy-extension dummy-extension">\r\n  <h3>Virtual machine not found. Ask your instructor to check the virtual machines in the course.</h3>\r\n</div>');const Ed=class{constructor(e){e.append(xd)}},Sd=I().compile('<div class="publish-virtual-machine-content">\n    <div>\n        <label for="publish-virtual-machine-name" class="publish-virtual-machine-name-label">Name</label>\n        <input id="publish-virtual-machine-name" placeholder="Name..." required/>\n    </div>\n    <div>\n        <label for="publish-virtual-machine-description" class="publish-virtual-machine-description-label">Description</label>\n        <textarea id="publish-virtual-machine-description" rows="6" placeholder="Description..."></textarea>\n    </div>\n</div>\n');let Id=null;function Ad(e,t){const n=i.default.currentProject;Cl()&&n.isAuthorProject&&function(e,t,n,i){const s=new gl.PublishRequest;return s.setAssignmentId(e),s.setOwnerId(t),s.setName(n),s.setDescription(i),new Promise(((e,t)=>{yl.publish(s,(0,sn.sd)(),((n,i)=>{if(n)return t(new Error(n.message));_l(i.getTaskId()).then((()=>e())).catch((e=>t(e)))}))}))}(n.authorAssignment.assignment.id,n.owner.id,e,t).then((()=>je.Z.info("Image was published"))).catch((e=>{let{message:t}=e;return je.Z.error(t)}))}d.Z.subscribe("command:vm:open",(async function(){const e=await Cl();if(!e||null==e||!e.features.vnc)return void je.Z.error("Not supported");f().defer((()=>i.default.ide.open("virtual-machines","",{title:"VM"})))})),d.Z.subscribe("command:vm:open-ssh",(async function(){const e=await Cl();if(!e||null==e||!e.features.ssh)return void je.Z.error("Not supported");f().defer((()=>i.default.ide.open("virtual-machines-ssh","",{title:"VM Terminal"})))})),d.Z.subscribe("command:vm:open-nested",(async function(e,t){const n=await Cl();if(!n||null==n||!n.features.nestedVirtualization)return void je.Z.error("Not supported");f().defer((()=>i.default.ide.open("virtual-machines-nested",(null==t?void 0:t.path)||"",{title:"Cyber Range",fileName:null==t?void 0:t.path})))})),d.Z.subscribe("command:vm:publish",(function(){const e=[{title:"Publish",type:1,onClick:()=>{t.find("#publish-virtual-machine-name").val()?Id.close(!0):je.Z.error("Name required.")}},{title:"Close",type:0,onClick:()=>Id.close(!1)}],t=E()(Sd({}));Id=new Ae.Z({title:"Publish Virtual Machine State",className:"publish-virtual-machine",content:t,buttons:e,width:500,onClose:function(e){if(!0!==e)return;Ad(t.find("#publish-virtual-machine-name").val(),t.find("#publish-virtual-machine-description").val())}})}));const Td={nestedVirtualization:"virtual-machine-extension-nested",ssh:"virtual-machine-extension-ssh",vnc:"virtual-machine-extension",publish:"virtual-machine-extension-publish"};d.Z.subscribe("project:open",(async()=>{const e=await Cl();e&&(h.ZP.setVisibility("virtual-machine",!0),f().forEach(Td,((t,n)=>{h.ZP.setVisibility(t,null==e?void 0:e.features[n])})),i.default.currentProject.authorAssignment||h.ZP.setVisibility("virtual-machine-extension-publish",!1))}));let jd=null;async function Zd(){if(!await async function(){return!!await Cl()}())return Ed;const e=i.default.currentProject,t=e.authorAssignment?e.authorAssignment.course:e.eduStartedAssignmentInfo.course;return ao.default.OrganizationManager.get(t.organizationId).then((e=>e.computedVmOptions&&e.computedVmOptions.enabled?Cd:Ed))}i.default.register({info:ml,hotkeys:{},settings:{},get:async function(){return null===jd&&(jd=Zd()),jd}});const Od=JSON.parse('{"name":"codio-autograde","description":"Test autograde script","codio":{"global":true,"noFile":true,"title":"Test Autograde Script","urls":"test-autograde"}}');var Nd=n(42270),Dd=n(76638),Md=n(26024),Rd=n(26059),Ld=n(76900);const Fd=d.Z.create(n(98322)),Bd=I().compile('<div class="codio-test-autograde">\n    <h2>\n        Test Autograde Script\n    </h2>\n    <form action="/">\n        <div class="main">\n            <div class="settings-form">\n                <div>\n                    <a href="javascript:void(0)" id="test-autograde-btn" class="btn btn-primary">Test script</a>\n                    <fieldset class="test-script-fieldset">\n                        <label for="test-script-name">Path to script</label>\n                        <div class="input-container">\n                            <input type="text" name="name" id="test-script-name" required autofocus placeholder="Path to script for test" value=".guides/scripts/autograde.sh" class="input-xlarge" maxlength="255">\n                        </div>\n                    </fieldset>\n                </div>\n                <div>\n                    <p id="codio-test-autograde-result" class="alert alert-info">\n                        No result for now\n                    </p>\n                </div>\n                <fieldset class="test-assessments-help-fieldset">\n                    <label>Generate Test Data for CODIO_AUTOGRADE_ENV</label>\n                    <a href="https://docs.codio.com/instructors/authoring/assessments/auto-grade-scripts.html#access-authored-content-assessment-results" target="_blank">\n                        <i class="ss-icon">info</i>\n                        <span>Need a little help?</span>\n                    </a>\n                </fieldset>\n                <div id="codio-test-autograde-assessments">\n                    No assessments stats\n                </div>\n            </div>\n        </div>\n        <footer></footer>\n    </form>\n</div>\n'),Ud=I().compile('{{#if code}}\n<h3 class="test-output-failed">\n    Script exited with non zero code, assignment submission will be failed\n</h3>\n{{else}}\n{{#exists grade}}\n<fieldset class="test-grade-fieldset">\n    <label>Grade</label>\n    <p>{{grade}}</p>\n</fieldset>\n{{/exists}}\n{{#if penalty}}\n<fieldset class="test-extraCredit-fieldset">\n    <label>Custom penalty</label>\n    <p>{{penalty}}</p>\n</fieldset>\n{{/if}}\n{{#if extraCredit}}\n<fieldset class="test-extraCredit-fieldset">\n    <label>Extra Credit</label>\n    <p>{{extraCredit}}</p>\n</fieldset>\n{{/if}}\n{{/if}}\n\n{{#equals version 2}}\n<fieldset class="test-output-fieldset">\n    <label for="test-output">Feedback</label>\n    <div id="test-feedback">\n    </div>\n</fieldset>\n{{/equals}}\n<fieldset class="test-output-fieldset">\n    <label for="test-output">Output</label>\n    <div>\n        <textarea id="test-output" readonly>{{message}}</textarea>\n    </div>\n</fieldset>\n'),qd=I().compile('<div class="codio-test-assessment-item codio-test-assessment-item--header">\n    <div class="codio-test-assessment-name"><span>Name</span></div>\n    <div class="codio-test-assessment-correct"><span>Is answered</span></div>\n    <div class="codio-test-assessment-correct"><span>Is correct</span></div>\n    <div class="codio-test-assessment-points"><span>Points Test<br/>Student Earned</span></div>\n</div>\n<hr/>\n{{#each assessments}}\n<div class="codio-test-assessment-item" id="{{ id }}">\n    <div class="codio-test-assessment-name">\n        <span class=\'codio-test-assessment-name-el\'>{{title}}</span>\n    </div>\n    <div class="codio-test-assessment-answered">\n        <fieldset>\n            <label class="switch">\n                <span class="visuallyhidden">Is correct</span>\n                <input type="checkbox" name="name" id="answered-{{id}}" required autofocus checked/>\n                <span class="switch-label"></span>\n                <span class="switch-handle"></span>\n            </label>\n        </fieldset>\n    </div>\n    <div class="codio-test-assessment-correct">\n        {{#if partialPoints}}\n        <span>Partial points (Max {{max}})</span>\n        {{else}}\n        <fieldset>\n            <label class="switch">\n                <span class="visuallyhidden">Is correct</span>\n                <input type="checkbox" name="name" id="correct-answer-{{id}}" required autofocus checked/>\n                <span class="switch-label"></span>\n                <span class="switch-handle"></span>\n            </label>\n        </fieldset>\n        {{/if}}\n    </div>\n    <div class="codio-test-assessment-points">\n        <fieldset>\n            {{#if partialPoints}}\n            <input type="number" name="name" id="correct-points-{{id}}" min="{{min}}" max="{{max}}" required autofocus placeholder="Points" value="1" class="input-xlarge" maxlength="255">\n            {{else}}\n            <input readonly type="number" name="name" id="correct-points-{{id}}" placeholder="Points" value="{{max}}" class="input-xlarge" maxlength="255">\n            {{/if}}\n        </fieldset>\n    </div>\n</div>\n<hr/>\n{{/each}}\n');var Hd=".codio",Gd=[];const Wd=function(e){if(!(this instanceof Wd))return new Wd(e);this.container=e;const t=E()(Bd());this.container.append(t),this.closed=!1;const n=this,i=d.Z.on.bind(d.Z,this.container);i("click.autograde","#test-autograde-btn",this._onFormSubmit.bind(this)),i("keyup.autograde",".codio-test-assessment-points input",(function(e){const t=E()(e.target).val(),i=E()(e.target).closest(".codio-test-assessment-item").attr("id");n.assessmentsContent.forEach((e=>{if(e.taskId===i){const n=e.source.incorrectPoints?parseInt(e.source.incorrectPoints,10):0,i=parseInt(e.source.points,10);t<n||t>i?this.classList.add("validation-error"):this.classList.remove("validation-error")}}))})),i("click.autograde",".codio-test-assessment-answered input",(function(e){const t=E()(e.target).prop("checked"),n=E()(e.target).closest(".codio-test-assessment-item"),i=n.find(".codio-test-assessment-correct input"),s=n.find(".codio-test-assessment-points input");i.attr("disabled",!t),s.attr("disabled",!t)})),Md.ZP.loadAssessmentsFromFile().then((e=>{if(e)return Promise.all([e,Rd._3.getAssessmentsUsageForProject(e)]).then((e=>{let[t,n]=e;return t.filter((e=>!(e.type in Ld.AQ))).map((e=>(e.usageInfo=f().find(n,{taskId:e.taskId}),e)))})).then((e=>{n.assessmentsContent=e;const t=e.filter((e=>e.usageInfo)).map((e=>({partialPoints:!!e.source.arePartialPointsAllowed,min:e.source.incorrectPoints?parseInt(e.source.incorrectPoints,10):0,max:parseInt(e.source.points,10),title:e.source.name,id:e.taskId})));n._drawAssessmentsContent(t)}))})),this._loadPrevUsedScripts().then((function(e){Gd=e;const n=f().last(e)||".guides/scripts/autograde.sh";t.find("#test-script-name").val(n)}))};var zd=Wd.prototype;zd._addError=function(e,t){var n=this.container.find(e);u.default.addErrorToInput(n,{title:t,noFocus:!1}),f().defer((function(){n.data("selectize")?n[0].selectize.focus():n.focus()}))},zd._onFormSubmit=function(){var e=this.container.find("form"),t=e.find("#test-script-name").val();if(!t)return this._addError("#test-script-name","Empty script path");var n={assessments:{stats:{total:0,answered:0,correct:0,totalPoints:0,points:0},info:[]},completedDate:new Date,course:{id:"dummy_course_id",project:"dummy_project_id",assignment:{id:"dummy_assignment_id"}}};if(this.assessmentsContent){const t=this;if(n.assessments.info=this.assessmentsContent.filter((e=>e.usageInfo)).map((i=>{const s=e.find("#answered-"+i.taskId).prop("checked"),a=e.find("#correct-answer-"+i.taskId).prop("checked"),o=parseInt(e.find("#correct-points-"+i.taskId).val(),10);if(i.source.arePartialPointsAllowed&&isNaN(o))return t._addError("#correct-points-"+i.taskId,"Points is required"),null;const r=parseInt(i.source.points,10)||0,c=parseInt(i.source.incorrectPoints,10)||0;return s&&(a||i.source.arePartialPointsAllowed&&o>0?(n.assessments.stats.correct++,n.assessments.stats.points+=o):i.source.incorrectPoints&&(n.assessments.stats.points-=c),n.assessments.stats.answered++,n.assessments.stats.totalPoints+=r),{name:i.source.name,points:r,incorrectPoints:c,answer:s?{correct:i.source.arePartialPointsAllowed?o>0:a,points:a||i.source.arePartialPointsAllowed?o:0-c}:null}})),f().some(n.assessments.info,(function(e){return null===e})))return;n.assessments.stats.total=n.assessments.info.length}e.find("#test-autograde-btn").disableButton("Executing...","loading"),this._showExecutionResult(t,"Executing...",!0);const s=this._showExecutionResult.bind(this,t);Te.Z.saveAllAndWait().then((function(){Nd.TC(i.default.currentProject.guid,t,n).then((function(e){return Dd.Z.onlyNsCallbackTask({message:e})})).then(s).catch((e=>s(e.message)))}))},zd._showExecutionResult=function(e,t,n){if(this.closed)return;n||this.container.find("#test-autograde-btn").enableButton();var i=this.container.find("#codio-test-autograde-result");if(i.removeClass(),n)return i.addClass("alert alert-info"),i.html(t);if(t&&t.message)try{t=JSON.parse(t.message)}catch(e){t=t.message}f().includes(t.stderr,e)&&0!==t.code&&(f().includes(t.stderr,"No such file or directory")?t="Script not found. Please check path to script: "+e:f().includes(t.stderr,"Permission denied")&&(t="Script have no permissions to execute. Run: chmod +x "+e+" in terminal")),f().isObject(t)&&0===t.code&&(f().pull(Gd,e),Gd.push(e),Fd.appendSection({section:"autogradeTestScripts",data:Gd}));const s=this._prepareContent(t);var a=Ud(s);i.html(a),2===s.version&&this._drawFeedback(s,i)},zd._drawFeedback=function(e,t){const n=t.find("#test-feedback");u.default.renderFeedback(e.feedback,e.format).then((e=>n.html(e)))},zd._prepareContent=function(e){var t={message:e};if(!f().isString(e)){t.grade=e.grade;var n=[];e.stdout&&n.push("Stdout:",e.stdout),e.stderr&&n.push("Stderr:",e.stderr),e.code&&n.push("Exit code: "+e.code),t.message=n.join("\n"),t.feedback=2===e.version&&e.feedback,t.version=e.version,t.format=e.format,t.code=e.code,t.extraCredit=e.extraCredit,t.penalty=e.penalty}return t},zd._drawAssessmentsContent=function(e){if(!this.closed){var t=E()(qd({assessments:e}));this.container.find("#codio-test-autograde-assessments").html(t)}},zd._loadPrevUsedScripts=function(){var e=i.default.currentProject;return e.exists(Hd)?e.file(Hd).then((function(e){try{var t=JSON.parse(function(e){return(new(Es())).strip(e)}(e.content));return t.autogradeTestScripts instanceof Array?t.autogradeTestScripts:[]}catch(e){return[]}})).catch((()=>[])):Promise.resolve([])},zd.focus=function(){this.container.find("#test-autograde-btn").focus()},zd.close=function(){this.closed=!0};const Vd=Wd;i.default.register({info:Od,get:async function(){return Vd}});const Kd=JSON.parse('{"name":"validate-jupyter","description":"Validate jupyter script","codio":{"global":true,"noFile":true,"title":"Test jupyter","urls":"validate-jupyter"}}');var Jd=n(69857);const Yd=I().compile('<div class="codio-jupyter">\n    <h2>\n        Validate Jupyter\n        <a href="javascript:void(0)" id="validate-jupyter-btn" class="btn btn-primary">Re-execute</a>\n    </h2>\n    <form action="/">\n        <div class="main">\n            {{#if error}}\n            {{error}}\n            {{/if}}\n            <div class="validate-jupyter-result">\n\n            </div>\n        </div>\n        <footer></footer>\n    </form>\n</div>\n'),Qd=I().compile('<div>\n    <h4>File: {{filename}}</h4>\n    <div>\n        <h5>Validate result</h5>\n        <pre class="alert alert-info">\n            {{validate}}\n        </pre>\n    </div>\n    <div>\n        <h5>Publish result</h5>\n        <pre class="alert alert-info">\n            {{assign}}\n        </pre>\n    </div>\n</div>\n');var Xd=".codio-jupyter",$d=function(e){if(!(this instanceof $d))return new $d(e);var t=i.default.currentProject.exists(Xd)?void 0:Xd+" not found";this.container=e;var n=E()(Yd({error:t}));this.container.append(n),this._runValidation(),this._bindEvents()},eu=$d.prototype;eu._runValidation=function(){this.container.find("#validate-jupyter-btn").disableButton("Executing...","loading");var e=this;this.container.find(".validate-jupyter-result").removeClass("alert alert-info").empty(),Jd.Fi(i.default.currentProject.guid).then((function(e){return Dd.Z.onlyNsCallbackTask({message:e})})).then((function(t){0!==t.code?e._onError(t.stdout+"\n"+t.stderr):e._renderResult(t.stdout)})).catch((function(t){e._onError(t&&t.message)}))},eu._bindEvents=function(){var e=this;this.container.find("#validate-jupyter-btn").click((function(){e._runValidation()}))},eu._renderResult=function(e){this.container.find("#validate-jupyter-btn").enableButton();var t=this.container.find(".validate-jupyter-result"),n=JSON.parse(e);f().each(n,(function(e,n){var i=E()(Qd({filename:n,validate:e.validate,assign:e.assign}));t.append(i)})),0===f().keys(n).length&&this._onError("No jupyter notebook(s) found.")},eu._onError=function(e){this.container&&(this.container.find(".validate-jupyter-result").empty().addClass("alert alert-info").append(e),this.container.find("#validate-jupyter-btn").enableButton())};const tu=$d;i.default.register({info:Kd,get:async function(){return tu}});const nu=JSON.parse('{"name":"change-player","description":"Code Playback","codio":{"global":true,"noFile":true,"title":"Code Playback","urls":"change-player"}}');n(59999),n(25304);var iu=n(68058),su=n(86048);var au=n(50276);const ou=I().compile('<div id="change-player">\n\n    <div class="change-player-header">\n        <div>\n            <strong>File:&nbsp;</strong>\n            <span id="change-player-file-name"/>&nbsp;\n            <i class="ss-icon ss-openfolder change-player-navigation-refresh" data-action="refresh" title="Open file" aria-label="Open file"/>\n        </div>\n    </div>\n\n    <div class="change-player-file" id="change-player-file">\n        <div id="change-player-loading"></div>\n        <div class="hide player-errors"></div>\n    </div>\n\n    <div class="change-player-navigation">\n        <div>\n            <input type="range" min="0" max="0" value="0" class="slider change-player-position" id="change-player-position" title="Code Playback Position" aria-label="Code Playback Position">\n        </div>\n        <div class="change-player-controls">\n            <i class="ss-icon ss-skipback change-player-navigation-skipback" data-action="skipback" title="Previous change" aria-label="Previous change"/>\n            <i class="ss-icon ss-play change-player-navigation-play" data-action="start" title="Play/Pause" aria-label="Play/Pause"/>\n            <i class="ss-icon ss-skipforward change-player-navigation-skipforward" data-action="skipforward" title="Next change" aria-label="Next change"/>\n            <div class="change-player-position-information"/>\n            <div class="change-player-navigation-empty" />\n            <div class="change-player-speed">\n                <strong>Speed</strong>\n                <select id="change-player-speed-select" title="Play speed" aria-label="Play speed">\n                    <option value="1">1 cps</option>\n                    <option value="2">2 cps</option>\n                    <option value="5">5 cps</option>\n                    <option value="10">10 cps</option>\n                    <option value="15">15 cps</option>\n                </select>\n            </div>\n        </div>\n    </div>\n\n</div>\n'),ru=I().compile('{{#if userInformation}}\n<div class="change-player-position-information-date">\n    {{dateTime}}\n</div>\n<div class="change-player-position-information-user">\n    <strong>Modified by:&nbsp;</strong><div  class="change-player-position-information-username">{{userInformation}}</div>\n</div>\n{{else}}\n<strong  class="change-player-position-information-na">\n    N/A\n</strong>\n{{/if}}\n'),cu=I().compile("<blockquote>\n    <h1>Code Playback Error</h1>\n    <div>\n        {{#equals errorCode '1'}}\n        History changes not found for file {{fileName}}\n        {{/equals}}\n        {{#equals errorCode '2'}}\n        Permission denied for file {{fileName}}\n        {{/equals}}\n        {{#equals errorCode '3'}}\n        Incorrect session passed\n        {{/equals}}\n        {{#equals errorCode '3'}}\n        File {{fileName}} precessing error\n        {{/equals}}\n    </div>\n</blockquote>\n"),lu="change-player-file-name";class du{constructor(e,t,n,i){this.currentPosition=e,this.endPosition=t,this.startPosition=e,this.step=n,this.startContent=i,this.timeline=new Array(t),this.speed=5}setSpeed(e){this.speed=e}addFrame(e,t){f().each(t.timeline,((t,n)=>{const i=n+this.step*e;i>this.endPosition||(this.timeline[i]=t)}))}resetPlay(){this.currentPosition=this.startPosition}moveToPosition(e){return this.currentPosition=e-1,this.getNextState()}currentPositionInformation(){return this.positionInformation(this.currentPosition)}positionInformation(e){return this.timeline[e]}timelineState(){const e=this.currentPosition+1,t=Math.floor(e/this.step),n=this.currentPosition+5*this.speed;return{needPreload:!this.timeline[e]||!this.timeline[n],nextFrame:this.timeline[e]?t+1:t,playDone:e>this.endPosition,currentPosition:this.currentPosition}}getNextState(){let e=this.currentPosition+1;if(e>this.endPosition&&(e=this.endPosition),this.timeline[e]){const t=this.timeline[e];if(t&&f().isString(t.content))return this.currentPosition=e,t.content}}}class uu{constructor(e,t){this.offset=e,this.timeline=t}}class hu{constructor(e,t,n){this.content=e,this.modified=t,this.modifiedBy=n}}const pu=function(e,t,n,s,a){if(i.default.currentUser.isAnonymous())return;if(!(this instanceof pu))return new pu(e,t,n,s,a);this.dmp=new diff_match_patch.diff_match_patch,this.tab=a.tab,this.container=e;const o=E()(ou({}));this._model=new Wn.yO(""),this.container.append(o),this._getAndStoreFileName(a&&a.filename),this.filename&&this.tab.setTitle("â–¶ "+this.filename),this._bindEvents(),this.playing=!1,this.hasPlayOnDrag=!1,this._debounceCloseConnection=f().debounce(this._closeConnection.bind(this),3e5),_o.Z.emit(_o.F.PLAGIARISM_PLAYER.OPEN)},fu=pu.prototype;fu._updateEditorSize=function(){this._editor&&this._editor.layout()},fu._bindEvents=function(){var e=this;document.addEventListener("visibilitychange",(function(){document.hidden?(e._onPausePlay(),e._debounceCloseConnection()):(e._debounceCloseConnection.cancel(),1!=e.closed&&e._restoreConnection())})),this._handlers=[d.Z.subscribe("ide:fullscreen:enter",this._updateEditorSize.bind(this)),d.Z.subscribe("ide:fullscreen:leave",this._updateEditorSize.bind(this))],this.container.find(".change-player-navigation-play").click((()=>{this.playing?this._onPausePlay():this._onStartPlay()})),this.container.find(".change-player-navigation-skipback").click((()=>{if(!this.playing&&this.fileTimeline){const e=this.fileTimeline.currentPosition-1;e>=this.fileTimeline.startPosition&&(this._playAtPosition(e),this._setTimelinePosition(e))}})),this.container.find(".change-player-navigation-skipforward").click((()=>{if(!this.playing&&this.fileTimeline){const e=this.fileTimeline.currentPosition+1;e<=this.fileTimeline.endPosition&&(this._playAtPosition(e),this._setTimelinePosition(e))}}));const t=this.container.find("#change-player-position");let n=!1;t.change((()=>{const e=t.val();this.hasPlayOnDrag=n,this._playAtPosition(e)})).mousedown((()=>{n=this.playing,this.hasPlayOnDrag=!1,this._onPausePlay()})).on("input",(e=>{const t=E()(e.target).val();this._playAtPosition(t)})),this.container.find("#change-player-speed-select").change((e=>{const t=parseInt(E()(e.target).val(),10);this.fileTimeline&&(this.fileTimeline.setSpeed(t),f().isNumber(this.playerInterval)&&(clearInterval(this.playerInterval),this.playerInterval=setInterval((()=>this._onPlayNext()),1e3/this.fileTimeline.speed)))})).val("5"),this.container.find(".change-player-navigation-refresh").click((()=>{this._loadAvailableFiles()}))},fu._loadAvailableFiles=function(){if(!this.charonClientMetadata)return this._loadFileMetadata(),void f().delay((()=>this._loadAvailableFiles()),100);const e=this.charonClientMetadata.interface,t=this.charonClientMetadata.client,n=new e.LoadAvailableFilesRequest;n.setProjectId(i.default.currentProject.assignmentProjectId);const s=this.charonClientMetadata.metadataConverter(this._getSession()),a=[];t.loadAvailableFiles(n,s).subscribe({onSubscribe:e=>e.request(Number.MAX_SAFE_INTEGER),onComplete:()=>au.Z.open((()=>a),(e=>this._changeFile(e))),onNext:e=>{const{path:t}=e.toObject();a.push({name:u.ET.parse(t).name,path:t})},onError:e=>je.Z.error(e)})},fu._changeFile=function(e){this.filename=e,iu.I_.set(lu,this.filename),this._loadFileMetadata(),this.filename&&this.tab.setTitle("â–¶ "+this.filename)},fu.setOptions=function(e,t,n){n.filename&&this.filename!==n.filename&&this._changeFile(n.filename)},fu._onStartPlay=function(){if(!this.fileTimeline)return;const e=this.container.find(".change-player-navigation-play");e.removeClass("ss-play"),e.addClass("ss-pause"),this.playing=!0;const{needPreload:t,playDone:n,nextFrame:i}=this.fileTimeline.timelineState();n&&this._resetPlay(),!this.loadingFrame&&t&&this._loadFileState(i),f().isNumber(this.playerInterval)||(this.playerInterval=setInterval((()=>this._onPlayNext()),1e3/this.fileTimeline.speed))},fu._setWithHighlight=function(e,t){const n=this._editor.getScrollTop(),i=this._editor.getScrollLeft(),s=this._editor.getPosition();let a=null;if(t&&f().isString(t.content)){const n=this.dmp.diff_main(t.content,e);this.dmp.diff_cleanupEfficiency(n);const i=f().map(n,(function(e){return e[1]}));this._model.setValue(i.join(""));let s=1,o=1;f().each(n,(e=>{const t=e[0],n=e[1].split("\n"),i=n.length-1,r=n[n.length-1].length,c=Wn.Zo.e6.fromPositions({lineNumber:s,column:o},{lineNumber:s+i,column:o+r});-1===t?this._editor.deltaDecorations([],[{range:c,options:{inlineClassName:"codePlaybackRemove"}}]):1===t&&this._editor.deltaDecorations([],[{range:c,options:{inlineClassName:"codePlaybackInsert"}}]),s+=i,o+=r,a||(a={lineNumber:s,column:o})}))}else this._model.setValue(e);a?(this._editor.setPosition(a),this._editor.scrollToPosition({lineNumber:a.lineNumber,column:1})):(this._editor.setScrollPosition(n,i),this._editor.setPosition(s))},fu._onPlayNext=function(){if(!this.fileTimeline)return f().isNumber(this.playerInterval)&&clearInterval(this.playerInterval);const e=this.fileTimeline.positionInformation(this.fileTimeline.currentPosition),t=this.fileTimeline.getNextState(),{needPreload:n,nextFrame:i,playDone:s,currentPosition:a}=this.fileTimeline.timelineState();!this.loadingFrame&&n&&this._loadFileState(i),f().isString(t)&&(this._setWithHighlight(t,e),this._setTimelinePosition(a)),s&&this._onPausePlay()},fu._resetPlay=function(){this.fileTimeline.resetPlay(),this._setWithHighlight(this.fileTimeline.startContent),this._setTimelinePosition(this.fileTimeline.startPosition)},fu._playAtPosition=function(e){if(!this.fileTimeline)return;const t=parseInt(e,10),n=this.fileTimeline.positionInformation(t-1),i=this.fileTimeline.moveToPosition(t);if(f().isString(i))this._setWithHighlight(i,n),this._drawPositionInformation(t),this.hasPlayOnDrag&&this._onStartPlay();else{const{nextFrame:t}=this.fileTimeline.timelineState();this.loadingFrame||this._loadFileState(t),f().delay((()=>this._playAtPosition(e)),200)}},fu._initTimeline=function(e,t){this.container.find("#change-player-position").attr("max",t).attr("min",e).val(e)},fu._setTimelinePosition=function(e){this.container.find("#change-player-position").val(e),this._drawPositionInformation(e)},fu._drawPositionInformation=function(e){if(this.fileTimeline){const t=e?this.fileTimeline.positionInformation(e):this.fileTimeline.currentPositionInformation(),n=ru(t?{userInformation:t.modifiedBy,dateTime:(0,u.yU)(t.modified)}:{});this.container.find(".change-player-position-information").empty().append(n)}},fu._onPausePlay=function(){if(!this.container)return;const e=this.container.find(".change-player-navigation-play");e.addClass("ss-play"),e.removeClass("ss-pause"),f().isNumber(this.playerInterval)&&clearInterval(this.playerInterval),this.playerInterval=void 0,this.playing=!1,this.loadingFrame=!1},fu._getAndStoreFileName=function(e){e&&(this.filename=e);const t=i.default.ide.panels.focus&&i.default.ide.panels.focus.activeTab();if(t&&!this.filename){"tree"===t.extensionName&&(this.filename=t.filename,iu.I_.set(lu,this.filename))}this.filename||(this.filename=iu.I_.get(lu)),this.filename&&!i.default.currentProject.exists(this.filename)&&(this.filename=null)},fu._closeConnection=function(){this.charonClientMetadata&&(this.charonClientMetadata.close(),this.charonClientMetadata=void 0)},fu._restoreConnection=function(){this.charonClientMetadata||window.createCharonClient({uri:it.Z.get("charon")}).subscribe({onSubscribe:function(e){e.request(Number.MAX_SAFE_INTEGER)},onNext:e=>{const{error:t,clientData:n}=e;t?(this.charonClientMetadata=void 0,je.Z.error(t)):n&&(this.charonClientMetadata=n)}})},fu._closeClient=function(){this.charonClientMetadata&&(this._closeConnection(),this.fileTimeline=void 0,this.playing=void 0,this.filename=void 0,this.metadataState=void 0)},fu._loadFileMetadata=function(){this.filename&&(this.container.find("#change-player-file-name").text(this.filename),this.container.find("#change-player-file").showFProgress("Loading file state")),this.charonClientMetadata?(this._onPausePlay(),this._loadFileInitialState()):window.createCharonClient({uri:it.Z.get("charon")}).subscribe({onSubscribe:function(e){e.request(Number.MAX_SAFE_INTEGER)},onNext:e=>{const{error:t,clientData:n}=e;this.loadingFrame=!1,t?(this.charonClientMetadata=void 0,je.Z.error(t)):n&&(this.charonClientMetadata=n,!this.metadataState&&this.filename&&this._loadFileInitialState())}})},fu.activate=function(){if(!this.container){const e=new Error("No permission");return e.close=!0,Promise.reject(e)}},fu.afterActivate=function(){!this._editor&&this.filename&&this._loadFileMetadata()},fu._getSession=function(){return(0,bl.p)()},fu._loadFileInitialState=function(){if(!this.charonClientMetadata)return;const e=this.charonClientMetadata.interface,t=this.charonClientMetadata.client,n=new e.InitialStateRequest;n.setProjectId(i.default.currentProject.assignmentProjectId),n.setPath(this.filename),this.container.find(".player-errors").addClass("hide");const s=this.charonClientMetadata.metadataConverter(this._getSession());t.initialState(n,s).subscribe({onComplete:e=>this._onInitialStateSubscribeComplete(e),onError:e=>this._onInitialStateSubscribeError(e)})},fu._onInitialStateSubscribeError=function(e){this._editor&&(this._editor.dispose(),this._editor=void 0);const t=this.container.find(".player-errors");t.removeClass("hide").empty(),t.append(cu({fileName:this.filename,errorCode:e.source.message})),this.container.find("#change-player-file").completeFProgress()},fu._onInitialStateSubscribeComplete=function(e){const t=e.toObject();this._model&&this._model.dispose(),this._model=new Wn.yO(t.startContent,void 0,this.filename),this.metadataState=t,this.fileTimeline=new du(t.startVersion,t.endVersion,t.step,t.startContent),this._initTimeline(t.startVersion,t.endVersion),this._initEditor(),this.container.find("#change-player-file").completeFProgress(),this._loadFileState(0)},fu._onLoadFileStateComplete=function(e,t,n,i){e=f().sortBy(e,[e=>e.version]);let s=t.content;const a=new Array(i+1);for(let t=e.length-1;t>=0;t--){const o=e[t];if(!o)break;a[o.version===n*i+i?i:o.version%i]=new hu(String(s),new Date(o.modified.seconds),o.modifiedBy);const r=f().map(o.changesList,(e=>e.insert?{p:e.insert.position,i:e.insert.insert}:{p:e.pb_delete.position,d:e.pb_delete.pb_delete}));s=su.Z.apply(s,r)}const o=new uu(n,a);this.fileTimeline.addFrame(n,o),this.loadingFrame=!1,this._drawPositionInformation()},fu._loadFileState=function(e){if(!this.charonClientMetadata)return;const t=this.charonClientMetadata.interface,n=this.charonClientMetadata.client,s=new t.LoadStatesRequest;let a;s.setProjectId(i.default.currentProject.assignmentProjectId),s.setPath(this.filename),s.setOffset(e||0);let o=[];const r=this.metadataState.step,c=this.charonClientMetadata.metadataConverter(this._getSession());n.loadStates(s,c).subscribe({onSubscribe:e=>{this.loadingFrame=!0,e.request(Number.MAX_SAFE_INTEGER)},onComplete:()=>{this._onLoadFileStateComplete(o,a,e,r)},onNext:e=>{const{log:t,snapshot:n}=e.toObject();n?a=n:t&&o.push(t)},onError:e=>{je.Z.error(e),this.loadingFrame=!1}})},fu._initEditor=function(){this._editor||(this._editor=new Wn.ZP(E()(document.getElementById("change-player-file")),this._model,{lineNumbers:!0,readOnly:!0,ariaLabel:"Code Playback",contextmenu:!0})),this._editor.setModel(this._model)},fu.deactivate=function(){this._onPausePlay()},fu.close=function(){this._onPausePlay(),this._closeClient(),this._handlers&&this._handlers.forEach((e=>d.Z.unsubscribe(e))),this._handlers=[],this._model&&this._model.dispose(),this.closed=!0};const mu=pu;i.default.register({info:nu,get:async function(){return mu}});const gu=JSON.parse('{"name":"stack-info","description":"Stack information","codio":{"global":true,"noFile":true,"title":"Stack information","urls":"stack-info"}}');var bu=n(4942);const vu=I().compile('<div>\n  <section class="error hide">\n    <section>\n      <p class="message"></p>\n    </section>\n  </section>\n  <div class="info hide">\n    <section class="section-info">\n      <h2>Stack: <small class="text-stack-name">loading information...</small></h2>\n      <p class="short-description"></p>\n    </section>\n    <section class="section-description">\n      <div class="long-description description--bordered rendered-markdown"></div>\n    </section>\n    <section class="section-description">\n      <div class="description--bordered container-info"></div>\n    </section>\n  </div>\n</div>\n');const yu=class{constructor(e){(0,bu.Z)(this,"activate",(function(){return this.loadData()})),(0,bu.Z)(this,"deactivate",(function(){})),(0,bu.Z)(this,"close",(function(){})),this.container=e;const t=E()(vu());this.container.append(t)}async loadData(){const e={};try{const t=await this.fetchStackInformation();e.stack=t}catch(t){e.stack={error:t.message}}try{const[t,n]=await this.fetchMachineInformation();e.machineInfo={lsbInfo:t,unameInfo:n}}catch(t){e.machineInfo={error:t.message}}this.render(e)}async callCommand(e){const t=i.default.currentProject.guid,n=e.split(" "),s=n.shift(),a=n,o=await ao.default.containerManager.run(t,s,{cwd:"/home/codio/workspace",args:a});if(0===o.code)return o.stdout;throw Error(o.stderr)}async fetchStackInformation(){var e=i.default.currentProject;if(e)return ao.default.StacksManager.getByVersionId(e.stackVersionId);throw Error("No project available")}async fetchMachineInformation(){return Promise.all([this.callCommand("lsb_release -sd"),this.callCommand("uname -ori")])}render(e){let{stack:t,machineInfo:n}=e;if(t.error)this.container.find(".error").removeClass("hide"),this.container.find(".error .message").text(t.error);else{this.container.find(".info").removeClass("hide"),this.container.find(".text-stack-name").text(t.name),this.container.find(".short-description").text(t.shortDescription);var i=this.container.find(".long-description");if(this._toHtml(t.longDescription).then((function(e){i.html(e)})),n){const{error:e,lsbInfo:t,unameInfo:i}=n;if(e)this.container.find(".container-info").addClass("error"),this.container.find(".container-info").text(e);else{const e="".concat(t," (").concat(i,")");this.container.find(".container-info").text(e)}}}}_toHtml(e){return u.default.markdown.render(e,{breaks:!0,sanitize:!0,allowedTags:"iframe|br",smartLists:!0}).catch((function(e){je.Z.error(e.message)}))}};i.default.register({info:gu,get:async function(){return yu}});const wu=JSON.parse('{"name":"stack-create","description":"Create Stack","codio":{}}');var _u=n(98296),ku=n.n(_u);function Pu(){return!!(Math.ceil(2*Math.random())-1)}function Cu(){for(var e=["html","css","javascript","c++","asp.net","java","flex","drupal","joomla","mssql","apollo","php"],t=[],n=0;n<5;n++){var i=Math.ceil(Math.random()*(e.length-1));t.push(e.splice(i,1)[0])}return t}function xu(){for(var e=Math.ceil(15*Math.random()),t="",n=0;n<e;n++)t+="changelog number "+n+"* Source: [https://github.com/h5bp/html5-boilerplate](https://github.com/h5bp/html5-boilerplate)\n";return t}function Eu(){for(var e=Math.ceil(15*Math.random())+1,t=[],n=1;n<e;n++){var i={id:u.default.GUID(),project_id:u.default.GUID(1),version:Pu()?"0.0."+n:null,description:xu(),state:Pu()?"READY":"processing",errorCode:"error code",timestamp:(new Date).getTime()-1e10+2592e5*n,installCount:Math.ceil(1e3*Math.random()),usage:Math.ceil(100*Math.random())};t.push(i)}return t}function Su(){var e="stack-"+u.default.GUID(1),t={id:u.default.GUID(),name:e,isPrivate:Pu(),slug:e,shortDescription:u.default.GUID(),longDescription:"# [HTML5 Boilerplate](http://html5boilerplate.com) \nHTML5 Boilerplate is a professional front-end template for building fast, \nrobust, and adaptable web apps or sites. This project is the product of many years of iterative development and combined\n community knowledge. It does not impose a specific development philosophy or\n framework, so you are free to architect your code in the way that you want.\n * Source: [https://github.com/h5bp/html5-boilerplate](https://github.com/h5bp/html5-boilerplate)\n * Homepage: [http://html5boilerplate.com](http://html5boilerplate.com)\n * Twitter: [@h5bp](http://twitter.com/h5bp)",tags:Cu(),imageUrl:"",versions:Eu(),ownerInfo:{id:u.default.GUID(),name:"name-"+u.default.GUID(1),slug:"slug-"+u.default.GUID(1),type:Pu()?"user":"organization"},isOwner:!0};return t.totalCount=function(e){for(var t=0,n=0;n<e.versions.length;n++)t+=e.versions[n].installCount;return t}(t),t.ready=Iu(t),t}function Iu(e){return!!f().find(e.versions,{state:"READY"})}function Au(e){return!!f().find(e.versions,(function(e){return"READY"!==e.state&&"ERROR"!==e.state}))}var Tu={};function ju(e,t){ao.default.StacksManager.getById(t).then((function(n){Au(n)?f().delay(ju.bind(null,e,t),2e3):e.resolve(n)}),(function(t){e.reject(t)}))}const Zu={getStack:Su,getStacks:function(e){for(var t=e||Math.ceil(150*Math.random()),n=[],i=0;i<t;i++)n.push(Su());return n},isStackReady:Iu,canCreateStacks:function(){return!i.default.currentUser.isAnonymous()},getVersionStr:function(e){return e.version||ku()(e.timestamp).format("Do MMMM YYYY")},waitForStackReady:function(e){if(Tu[e])return Tu[e].promise;var t=u.default.promise.deferred();return ju(t,e),t.promise.finally((()=>{Tu[e]=null})),Tu[e]=t,t.promise},isVersionBuildInProgress:Au,isLastBuildFailed:function(e){var t=e.versions;return t.length>1&&"ERROR"===t[t.length-1].state}};n(25818);const Ou=I().compile('<form id="stack-create" action="/" method="post">\n\n  <div class="centered new-stack-info">\n    <p>Current stack</p>\n    <p><strong>{{stackInfo.name}}</strong>({{stackInfo.version}})</p>\n\n    <p>Please select one of the following</p>\n\n    <fieldset class="radio stack-create-flag">\n      <label for="new-version">\n        <input id="new-version" type="radio" name="create-type" value="new-version">\n        <span>New Stack Version</span>\n      </label>\n\n      <label for="new-stack">\n        <input id="new-stack" type="radio" name="create-type" value="new-stack" checked>\n        <span>New Stack</span>\n      </label>\n\n    </fieldset>\n  </div>\n\n  <div class="new-stack-version hide">\n    {{#if canPublish}}\n    <p class="centered">Create a new version of the assignment project\'s stack.</p>\n    <fieldset>\n      <label for="stack-changelog">CHANGELOG</label>\n      <textarea class="form-textarea" id="stack-changelog" name="stack-changelog" placeholder="Short description of what has changed"></textarea>\n    </fieldset>\n    {{/if}}\n    {{#unless canPublish}}\n    <p>You are not able to create a new version of the current stack as you do not have permissions. If someone within your organization owns this stack then please ask them to make your Organization the owner. If it is a Codio certified stack then please select the New Stack option on the right.</p>\n    {{/unless}}\n  </div>\n\n  <div class="new-stack">\n    <p class="centered">Create a new Stack from the assignment project\'s current stack configuration.</p>\n    <fieldset>\n      <label for="stack-name">New Stack Name</label>\n      <input type="text" name="stackName" id="stack-name" required autofocus placeholder="Your stack name" class="input-xlarge" maxlength="60">\n    </fieldset>\n    <fieldset class="radio stack-public-flag">\n      <label for="stack-public">\n        <input id="stack-public" type="radio" name="public" value="public">\n        <span><i class="ss-icon">unlocked</i> Public</span>\n      </label>\n\n      <label for="stack-private">\n        <input id="stack-private" type="radio" name="public" value="private" checked>\n        <span><i class="ss-icon">locked</i> Private</span>\n      </label>\n    </fieldset>\n    <fieldset class="stack-owners">\n      <label for="owner">Owner</label>\n      <select class="select-stack-owner" name="owner" id="owner">\n        <option value="__me__" selected="selected">My account ({{username}})</option>\n        <optgroup label="Your Organizations">\n          {{#each organizations}}\n          <option value="{{id}}">{{details.name}}</option>\n          {{/each}}\n        </optgroup>\n      </select>\n    </fieldset>\n  </div>\n\n  <div class="buildingMessage-new-stack hide">\n    <strong>Stack build in progress.</strong>\n    You can close the window. Your stack will appear under the \'<a href="javascript:void(0)">My Stacks</a>\' tab in a few minutes.\n  </div>\n\n  <div class="buildingMessage-new-version hide">\n    <strong>Stack build in progress.</strong>\n    You can close the window. Your stack will appear under the \'<a href="javascript:void(0)" class="new-version-title">My Stacks</a>\' tab in a few minutes.\n  </div>\n\n</form>\n');var Nu={},Du=null,Mu=null,Ru=null,Lu=null;function Fu(e){var t=e.currentStack,n=i.default.currentProject.stackVersionId,s=function(e,t){if(e.isOwner)return!0;if("TEACHER"===i.default.currentUser.get("details").get("type")&&"ORGANIZATION"===e.ownerInfo.type){var n=f().find(t,(function(t){return t.id===e.ownerInfo.id}));return n&&n.owner}return!1}(t,e.organizations),a=f().find(t.versions,(function(e){return e.id===n})),o={name:t.name,version:a.version},r=E().extend(e,{canPublish:s,stackInfo:o,username:e.user.name()});return Mu=r,E()(Ou(r))}Nu.showDialog=function(e,t){Du&&Nu.closeDialog();var n=Fu(e);(Du=new Ae.Z({title:"Create Stack from current Project",keyboard:!1,width:400,content:n,onClose:function(){Du&&(Du=null)},buttons:[{title:"Create",onClick:function(){Nu.validate()&&t(!0)},type:1},{title:"Close",onClick:function(){t(!1)}}]})).content().find(".buildingMessage-new-stack a").click((function(){location.assign("/home/stacks")})),Du.content().find(".buildingMessage-new-version a").click((function(){Ru&&location.assign("/home/stacks/"+Ru.id)})),Du.content().find('input[name="create-type"]').click((function(){"new-version"===E()(this).val()?(Du.content().find(".new-stack-version").removeClass("hide"),Du.content().find(".new-stack").addClass("hide")):(Du.content().find(".new-stack-version").addClass("hide"),Du.content().find(".new-stack").removeClass("hide"))})),d.Z.on(Du.content().closest(".modal-scrollable"),"keydown",(function(e){27===(e.which||e.keyCode)&&Nu.closeDialog()})),e.buildPromise&&(Nu.disableDialog(),Nu.showBuildingMessage(Lu,Ru),e.buildPromise.then((function(){Nu.hideBuildingMessage(),Nu.enableDialog()})))},Nu.validate=function(){if("new-stack"===Du.content().find('input[name="create-type"]:checked').val())return Nu.validateStackName();return Nu.validateStackChangelog()&&Mu.canPublish},Nu.getRequestType=function(){return Du.content().find('input[name="create-type"]:checked').val()},Nu.getRequestData=function(e){if("new-version"===Nu.getRequestType())return{stackId:Mu.currentStack.id,source:i.default.currentProject.guid,description:Du.content().find("#stack-changelog").val(),version:Mu.currentStack.versions.length+1+"",updateProjectStack:e};var t=Nu.getStackName(),n=Du.content().find('input[name="public"]:checked').val(),s=Du.content().find("#owner").val(),a="private"===n,o={name:t,source:i.default.currentProject.guid,shortDescription:t,isPrivate:a,updateProjectStack:e};return a||(o.longDescription=t,o.tags=[t]),"__me__"!==s&&(o.owner=s),o},Nu.hideBuildingMessage=function(){Du&&(Du.content().find(".buildingMessage-"+Lu).addClass("hide"),Ru=null,Lu=null)},Nu.showBuildingMessage=function(e,t){Du&&(Ru=t,Lu=e,Du.content().find(".buildingMessage-"+e).removeClass("hide"),Du.preventClosing(!1),Du.buttons()[1].enable())},Nu.disableDialog=function(){Du&&(Du.preventClosing(!0),Du.buttons()[0].disable("Creating...","loading"),Du.buttons()[1].disable(),Du.content().find(":input").prop("disabled",!0))},Nu.disableActions=function(){Du&&(Du.preventClosing(!0),Du.buttons()[0].disable("Working...","loading"))},Nu.enableActions=function(){Du&&(Du.preventClosing(!1),Du.buttons()[0].enable(!0))},Nu.enableDialog=function(){if(Du){Du.preventClosing(!1);var e=Du.content();Du.buttons()[0].enable(!0),Du.buttons()[1].enable(),e.find(":input").prop("disabled",!1)}},Nu.closeDialog=function(){Du&&Du.close()},Nu.validateStackName=function(){if(Du){var e=Du.content().find("[name=stackName]"),t=e.val();return 0===t.length?(u.default.addErrorToInput(e,"Name cannot be empty"),!1):!(t.length>60)||(u.default.addErrorToInput(e,"Name is too long and cannot be more than 60 characters"),!1)}return!1},Nu.validateStackChangelog=function(){if(Du){const e=Du.content().find("[name=stack-changelog]");return 0!==e.val().length||(u.default.addErrorToInput(e,"Changelog can not be empty"),!1)}return!1},Nu.getStackName=function(){return Du?Du.content().find("[name=stackName]").val():null},Nu.showWarning=function(e){if(Du){var t=Du.content().find("input[name=stackName]");u.default.addErrorToInput(t,e)}};const Bu=Nu;var Uu=null;function qu(){Bu.closeDialog()}function Hu(e){var t,n=Bu.getRequestType();t="new-version"===n?ao.default.StacksManager.publishVersion(Bu.getRequestData(e)):ao.default.StacksManager.create(Bu.getRequestData(e)),Bu.disableDialog(),t.then((function(e){return Bu.showBuildingMessage(n,e),Uu=function(e){return Zu.waitForStackReady(e.id).then((function(){if(Zu.isLastBuildFailed(e)){var t='<a href="/home/stacks/'+e.id+'">dashboard</a>';je.Z.error("Stack build failed. Please check information in "+t)}return e}))}(e),Uu})).then((function(){qu()})).catch((function(e){let{message:t}=e;f().includes(t,"duplicate key error")&&(t="Stack name already exists"),je.Z.error(t)})).finally((function(){Uu=null,Bu.hideBuildingMessage(),Bu.enableDialog()}))}d.Z.subscribe("command:stack-create:open",(function(){var e;Promise.all([(e=i.default.currentProject,ao.default.StacksManager.getByVersionId(e.stackVersionId)),ao.default.OrganizationManager.getMyOrganizations()]).then((function(e){let[t,n]=e;!function(e,t){Bu.showDialog({projectName:i.default.currentProject.name,currentStack:e,organizations:t,user:i.default.currentUser,buildPromise:Uu},(function(e){if(!e)return qu();!function(e){var t=Ae.Z.showConfirm({title:"Change stack confirmation",captcha:!1,doNotCloseOpened:!0,buttons:[{title:"YES",type:1,onClick:function(){t&&t.close(),e(!0)}},{title:"NO",onClick:function(){t&&t.close(),e(!1)}}],description:["Would you like to switch the project to new stack version? ","Updating or changing the stack will result in the removal ","of all your manual changes outside of the project directory. ","Your project files will stay untouched."].join("")})}(Hu)}))}(t,n)})).catch((e=>{let{message:t}=e;return je.Z.error(t)}))}));const Gu={};var Wu={};Wu.info=wu,Wu.hotkeys={},Wu.get=async function(){return Gu},i.default.register(Wu);const zu=JSON.parse('{"name":"view-code","description":"code editor","codio":{"view":"code"}}');var Vu={};Vu.info=zu,Vu.get=function(){return i.default.loadModule((function(e){Promise.all([n.e(3255),n.e(8980)]).then(function(){var t=[n(88980)];e.apply(null,t)}.bind(this)).catch(n.oe)}))},i.default.register(Vu);const Ku=JSON.parse('{"name":"view-code-breakpoints","description":"code editor with breakpoints","codio":{"view":"code"}}');var Ju={};Ju.info=Ku,Ju.get=function(){return i.default.loadModule((function(e){Promise.all([n.e(3255),n.e(6098)]).then(function(){var t=[n(46098)];e.apply(null,t)}.bind(this)).catch(n.oe)}))},i.default.register(Ju);const Yu=JSON.parse('{"name":"view-markdown-code","description":"MarkDown code editor","codio":{"fileExt":["md","markdown"],"view":["preview","code","splitview"]}}');var Qu={};Qu.info=Yu,Qu.get=function(){return i.default.loadModule((function(e){Promise.all([n.e(3255),n.e(57)]).then(function(){var t=[n(80057)];e.apply(null,t)}.bind(this)).catch(n.oe)}))},i.default.register(Qu);var Xu=ao.default.ProjectManager,$u=function(){};function eh(){return!i.default.currentUser.isAnonymous()&&"OWNER"===i.default.currentProject.access.control}function th(e,t){return f().isUndefined(t)&&(t=[]),"git "+e+" "+t.join(" ")}var nh=$u.prototype;nh.init=function(){return this.executeBackground("init")},nh.pull=function(e){return this.execute("pull",e)},nh.checkout=function(e){return this.executeCheckout(e)},nh.createBranch=async function(e){var t,n,i=((t=e)?(/[^a-zA-Z-0-9-_\.]+/gi.test(t)||-1!==t.indexOf(".")&&/(^\.)|(\.$)+/gi.test(t))&&(n="Branch name contains invalid characters"):n="Branch name cannot be empty",n);if(i)throw new Error(i);return this.checkout(["-b",e])},nh.deleteBranch=function(e){return this.branch(["-D",e])},nh.switchBranch=function(e){return this.checkout([e])},nh.executeCheckout=function(e){return this.execute("checkout",e)},nh.branch=function(e){return this.execute("branch",e)},nh.push=function(e){return this.execute("push",e)},nh.executeBackground=function(e,t,n){return this.command(th(e,t),n)},nh.execute=async function(e,t){if(!eh())throw new Error("No access");(0,Vi.Z)(th(e,t),"git")},nh.command=function(e,t){if(!eh())return Promise.reject(new Error("No access"));var n=i.default.currentProject,s=n.owner.name,a=n.pathName;return Xu.git(s,a,e,t)},nh.getGitCredentialsList=function(){if(!eh())return Promise.reject(new Error("No access"));var e=i.default.currentProject,t=i.default.currentUser.name(),n=e.pathName;return Xu.getGitCredentialsList(t,n)},nh.getBranchesList=function(){return Promise.resolve({output:i.default.currentProject.branches})},nh.getRemotesList=function(){return this.executeBackground("remote",["-v"]).then((function(e){var t=e.output;e={remotes:[]};var n={},i=[];return E().each(t,(function(e,t){var s=t.match(/^([^\s]*)\s([^\s]*)/);if(null!==s){var a={name:s[1],link:s[2]};f().has(n,a.name)||(i.push(a),n[a.name]=1)}})),i}))},nh.deleteRemote=function(e,t){return this.executeBackground("remote",["rm",e],t)},nh.addRemote=function(e,t,n){return this.executeBackground("remote",["add",e,t],n)},nh.renameRemote=function(e,t,n){return this.executeBackground("remote",["rename",e,t],n)},nh.setRemoteUrl=function(e,t,n){return this.executeBackground("remote",["set-url",e,t],n)},nh.close=function(){this.container.remove()};const ih=$u;var sh=null;const ah=I().compile('<form action="/" method="post" class="form-horizontal">\n  <p>\n    Git is preinstalled on all {{whitelabel}} Boxes so you can access Git from the\n    Terminal (<code>Tools > Terminal</code>).\n    If you are looking for a friendly way of using Git, try using\n    <a href="https://github.com/FredrikNoren/ungit" target="_blank">Ungit</a>,\n    which is a great Git UI you can run in {{whitelabel}}. See <a href="https://intercom.help/codio/general-questions/ungit" target="_blank">Using Ungit in {{whitelabel}}</a>.\n  </p>\n  <label for="branchName">New branch name</label>\n  <input type="text" name="branchName" class="ac-input-large" value="" placeholder="New branch name..." autofocus required  maxlength="80" />\n\n</form>\n'),oh=I().compile('<form action="/" method="post">\n  <p>\n    Git is preinstalled on all {{whitelabel}} Boxes so you can access Git from the\n    Terminal (<code>Tools > Terminal</code>).\n    If you are looking for a friendly way of using Git, try using\n    <a href="https://github.com/FredrikNoren/ungit" target="_blank">Ungit</a>,\n    which is a great Git UI you can run in {{whi}}. See <a href="https://intercom.help/codio/general-questions/ungit" target="_blank">Using Ungit in {{whitelabel}}</a>.\n  </p>\n\n  <label for="branchName">Branch:</label>\n  <select name="branchName" class="select">\n    {{#each branches}}\n    <option value="{{this}}">{{this}}</option>\n    {{/each}}\n  </select>\n\n</form>\n'),rh=I().compile('<form action="/" method="post">\n  <p>\n    Git is preinstalled on all {{whitelabel}} Boxes so you can access Git\n    from the Terminal (<code>Tools > Terminal</code>).\n    If you are looking for a friendly way of using Git, try using\n    <a href="https://github.com/FredrikNoren/ungit" target="_blank">Ungit</a>,\n    which is a great Git UI you can run in {{whitelabel}}. See <a href="https://intercom.help/codio/general-questions/ungit" target="_blank">Using Ungit in {{whitelabel}}</a>.\n  </p>\n  <label for="branchName">Branch:</label>\n  <select name="branchName" class="select">\n    {{#each branches}}\n    <option value="{{this}}"{{#equals ../currentBranch this}} selected="selected"{{/equals}}>{{this}}</option>\n    {{/each}}\n  </select>\n</form>\n');function ch(e,t,n){var s,a,o,r;switch(sh&&sh.close(),e){case"delete-branch":s="Delete",a="Delete Branch",o="Deleting...",r=t.deleteBranch.bind(t);break;case"switch-branch":s="Switch",a="Switch Branch",o="Switching...",r=t.switchBranch.bind(t);break;case"create-branch":s="Create",a="New Branch",o="Creating...",r=t.createBranch.bind(t)}var c=function(e,t){if(t&&t.output){var n=t.output,s=i.default.currentProject.currentBranch;E().each(n,(function(e,t){n[e]=t.replace(/^[\s\*]*/,"")})),"delete-branch"===e&&f().forEach([s],(function(e){var t=n.indexOf(e);-1!==t&&n.splice(t,1)})),t={branches:n,currentBranch:s}}switch(e){case"delete-branch":return oh({...t,whitelabel:it.Z.get("whitelabel")});case"switch-branch":return rh({...t,whitelabel:it.Z.get("whitelabel")});case"create-branch":return ah({whitelabel:it.Z.get("whitelabel")})}}(e,n);sh=new Ae.Z({title:a,icon:"fork",content:c,onClose:function(){sh=null},buttons:[{title:s,onClick:function(){var e=sh.buttons()[0].element;e.disableButton(o,"loading"),r(sh?sh.content().find("[name=branchName]").val():null).then((()=>lh())).catch((t=>{je.Z.error(t.message),e.enableButton()}))},type:1},{title:"Cancel",onClick:lh}]})}function lh(){sh&&sh.close()}const dh={createBranchesDialog:ch.bind(null,"create-branch"),switchBranchesDialog:ch.bind(null,"switch-branch"),deleteBranchesDialog:ch.bind(null,"delete-branch")},uh='<div class="git-remote-item" data-remote-name="{{name}}" data-remote-link="{{link}}" data-remote-user="{{user}}" data-remote-pass="{{pass}}">\n  <div class="git-remote-item-view">\n    <div class="git-remote-item-data">\n      <span class="git-remote-text-name">{{name}}</span>\n      &nbsp;\n      <code class="git-remote-text-link">{{link}}</code>\n    </div>\n    <div class="btn-group">\n      <button type="button" class="btn git-remote-btn" data-action="edit">\n        <span class="iconify-inline" data-icon="@codio:mdi:pencil-outline"></span>\n      </button>\n      <button type="button" class="btn git-remote-btn" data-action="remove" aria-label="Delete Remote">\n        <span class="iconify-inline" data-icon="@codio:mdi:trash-can-outline"></span>\n      </button>\n    </div>\n  </div>\n\n  <div class="git-remote-item-edit hide">\n    <div class="git-remote-item-data">\n      <label for="name">Name</label>\n      <input name="name" type="text" class="git-remote-name" placeholder="origin" autofocus required value="{{name}}">\n\n      <label for="link">URL</label>\n      <input name="link" type="text" class="git-remote-link" placeholder="git@github.com:org/repo.git" required value="{{link}}">\n    </div>\n\n    <div class="btn-group">\n      <button type="button" class="btn git-remote-btn" data-action="save">\n        <b>Save </b><span class="iconify-inline" data-icon="@codio:mdi:floppy"></span>\n      </button>\n      <button type="button" class="btn git-remote-btn" data-action="remove" aria-label="Delete Remote">\n        <span class="iconify-inline" data-icon="@codio:mdi:trash-can-outline"></span>\n      </button>\n    </div>\n  </div>\n</div>\n';var hh=null,ph=null;const fh=I().compile('<p>\n  Git is preinstalled on all {{whitelabel}} Boxes so you can access Git from\n  the Terminal (<code>Tools > Terminal</code>).\n  If you are looking for a friendly way of using Git, try\n  using <a href="https://github.com/FredrikNoren/ungit" target="_blank">Ungit</a>,\n  which is a great Git UI you can run in {{whitelabel}}. See <a href="https://intercom.help/codio/general-questions/ungit" target="_blank">Using Ungit in {{whitelabel}}</a>.\n</p>\n<div class="git-remote-items">\n  {{#each remoteList}}\n  {{> remote-item}}\n  {{/each}}\n</div>\n'),mh=I().compile(uh);function gh(){!function(e){var t=E()(mh({name:"",link:""}));yh(t),t.find("button").click(bh),e.append(t)}(hh.dialogContent.find(".git-remote-items"))}function bh(){var e=E()(this),t=e.data("action"),n=hh.dialogContent.find(".git-remote-items"),i=e.closest(".git-remote-item"),s={name:i.data("remote-name"),link:i.data("remote-link")};switch(t){case"save":!function(e,t,n){var i=function(e){var t=e.find("input").serializeArray(),n={};return E().each(t,(function(e,t){n[t.name]=t.value})),n}(e);i.name=E().trim(i.name),i.link=E().trim(i.link);var s=i.name!==n.name,a=i.link!==n.link;if(!s&&!a)return void wh(e);var o=function(e,t,n){var i=t.find(".git-remote-name"),s=t.find(".git-remote-link");if(f().isEmpty(e.name))return u.default.addErrorToInput(i,"Should not be empty"),!1;var a=/\s/;if(-1!==e.name.search(a))return u.default.addErrorToInput(i,"Cannot contain spaces"),!1;var o=!0;if(n.children().each((function(n,i){i!==t[0]&&(E()(i).data("remote-name")===e.name&&(o=!1))})),!o)return u.default.addErrorToInput(i,"The remote with this name already exists"),!1;if(f().isEmpty(e.link))return u.default.addErrorToInput(s,"Should not be empty"),!1;if(-1!==e.link.search(a))return u.default.addErrorToInput(s,"Cannot contain spaces"),!1;return!0}(i,e,t);if(!o)return;var r,c={username:i.user,password:i.pass};if(n.name)if(s)if(a){var l={};f().isUndefined(n)||(l.username=n.user,l.password=n.pass),r=ph.deleteRemote(n.name,l).then((function(){return ph.addRemote(i.name,i.link,c)}))}else r=ph.renameRemote(n.name,i.name,c);else a&&(r=ph.setRemoteUrl(n.name,i.link,c));else r=ph.addRemote(i.name,i.link,c);r&&r.then((function(){!function(e,t){e.find(".git-remote-text-name").html(u.default.safeHtml(t.name)),e.find(".git-remote-text-link").html(u.default.safeHtml(t.link)),e.find(".git-remote-name").val(t.name),e.find(".git-remote-link").val(t.link),e.data("remote-name",t.name),e.data("remote-link",t.link)}(e,i),wh(e)})).catch((function(e){_h(e)}))}(i,n,s);break;case"remove":i.remove(),s.name&&ph.deleteRemote(s.name).catch((function(e){_h(e)}));break;case"edit":yh(i)}}function vh(e,t){var n=e?".git-remote-item-edit":".git-remote-item-view",i=e?".git-remote-item-view":".git-remote-item-edit";t.children(i).addClass("hide"),t.children(n).removeClass("hide")}var yh=vh.bind(null,!0),wh=vh.bind(null,!1);function _h(e){e=f().isUndefined(e.message)?e:e.message,je.Z.error(e)}ks.Z.registerPartial("remote-item",uh);const kh={showRemotesList:function(e,t){ph=t,hh&&hh.close();var n=E()(fh({remoteList:e,whitelabel:it.Z.get("whitelabel")}));n.find("button").click(bh),hh=new Ae.Z({title:"Git Remotes",icon:"uploadcloud",width:550,onClose:function(){hh=null},buttons:[{title:"Add Remote",onClick:gh},{title:"Close",type:1,onClick:function(){return hh.close(Ae.Z.IDCANCEL)}}],content:n})}},Ph=JSON.parse('{"name":"git","description":"Git","codio":{"title":"git","global":true,"noFile":true,"urls":"git"}}'),Ch=JSON.parse('{"pull":{"desc":"Git: pull from origin"},"push":{"desc":"Git: push to origin"},"show-create-branch":{"desc":"Git: create a new branch"},"show-switch-branch":{"desc":"Git: switch between branches"},"show-delete-branch":{"desc":"Git: delete a branch"},"remotes-show":{"desc":"Git: show remotes"}}');var xh={};xh.info=Ph,xh.settings={},xh.hotkeys=Ch;var Eh=new ih;xh.get=async function(){return Eh},d.Z.subscribe("command:git:pull",(function(){Eh.pull(["origin"])})),d.Z.subscribe("command:git:push",(function(){Eh.push(["origin"])})),d.Z.subscribe("command:git:show-create-branch",(function(){dh.createBranchesDialog(Eh)})),d.Z.subscribe("command:git:show-switch-branch",(function(){Eh.getBranchesList().then((function(e){dh.switchBranchesDialog(Eh,e)}))})),d.Z.subscribe("command:git:show-delete-branch",(function(){Eh.getBranchesList().then((function(e){dh.deleteBranchesDialog(Eh,e)}))})),d.Z.subscribe("command:git:remotes-show",(function e(){Eh.getRemotesList().then((function(e){return Eh.getGitCredentialsList().then((function(t){return f().each(e,(function(e){var n=t[e.link];f().isUndefined(n)||(e.user=n.user,e.pass=n.pass)})),e}))})).then((function(e){kh.showRemotesList(e,Eh)})).catch((function(t){var n=t&&t.message?t.message:t;f().includes(n.toLowerCase(),"not a git repository")?Ae.Z.showConfirm({title:"Init git repository?",description:"Not a git repository. Would you like init it?",onClose:function(t){t&&Eh.init().then(e)}}):je.Z.error(n)}))})),i.default.register(xh);var Sh=n(38406),Ih=ao.default.SSHManager,Ah={openCliTab:function(e){var t=e.username+"@"+e.host;t+=e.port?":"+e.port:"";var n=e.name||t;i.default.ide.open("terminal",n+"-"+(new Date).getTime(),"ssh "+n,t)},validateServer:function(e){var t=!0,n={};return f().each(e,(function(e,i){if("port"!==i&&"uid"!==i&&"name"!==i)return"username"!==i||/^[a-z0-9_][\.a-z0-9_\-]*[$]?$/.test(e)?void(E().trim(e)||(n[i]=!0,t=!1)):(t=!1,void(n[i]="Not a valid user name"))})),{success:t,errors:n}},saveServer:function(e,t){return Ih.saveServer(e,t).then((function(n){var i=t.name||t.username+"@"+t.host,s=["Target",'"'+u.default.safeHtml(i)+'"',e?"created.":"updated."].join(" ");je.Z.success(s),d.Z.publish("ssh.connection.manager:server-updated",n)})).catch((function(e){return je.Z.error(["Unable to create/update your target at this time. (<code>",u.default.safeHtml(e),"</code>). Please try again."].join(""))}))}};const Th=Ah,jh=I().compile('<form action="#" id="ssh-connection-form" class="form-horizontal" novalidate>\n\n    <h3 class="page-header">\n\t    {{#if server.uid}}Edit Server Details{{else}}Creating a New Server{{/if}}\n    </h3>\n\n    <fieldset id="deployment-target-common-inputs">\n        <input type="hidden" name="uid" value="{{server.uid}}" data-required="true">\n        <div class="control-group">\n            <label class="control-label hint hint-top" for="input-f-name">\n                Friendly name: <i class="ss-icon">help</i>\n                <span class="hint-text">A friendly name or alias.</span>\n            </label>\n            <div class="controls">\n                <input type="text" id="input-f-name" autofocus required data-required="true" placeholder="optional connection name..." name="name" value="{{server.name}}">\n            </div>\n        </div>\n\n        <div class="control-group">\n            <label class="control-label hint hint-top" for="ssh-username-input">\n                Username: <i class="ss-icon">help</i>\n                <span class="hint-text">The username to connect as.</span>\n            </label>\n            <div class="controls">\n                <input id="ssh-username-input" type="text" name="username" class="input-xlarge" value="{{server.username}}" placeholder="Username" maxlength="80" required data-required="true" data-error="Username is required">\n            </div>\n        </div>\n\n        <div class="control-group">\n            <label class="control-label hint hint-top" for="ssh-server-input">\n                Hostname: <i class="ss-icon">help</i>\n                <span class="hint-text">Server name or IP address of your server</span>\n            </label>\n            <div class="controls">\n                <input id="ssh-server-input" type="text" name="host" class="input-xlarge" value="{{server.host}}" placeholder="Server" maxlength="80" required data-required="true" data-error="Server name is required">\n            </div>\n        </div>\n\n        <div class="control-group">\n            <label class="control-label hint hint-top" for="ssh-port-input">\n                Port <small>(optional)</small>: <i class="ss-icon">help</i>\n                <span class="hint-text">The port number of your server. Leave blank to use the default</span>\n            </label>\n            <div class="controls">\n                <input id="ssh-port-input" type="text" name="port" class="input-small" value="{{server.port}}" placeholder="port number..." maxlength="80"  data-error="Port should be numeric">\n            </div>\n        </div>\n    </fieldset>\n\n    <div class="form-actions">\n        <button type="submit" class="save btn btn-primary">Save Details</button>\n        <button type="reset" class="btn">Cancel</button>\n    </div>\n\n</form>\n');var Zh=function(e,t){return this instanceof Zh?(this.tpl=t||jh,this.container=e,this.bindEvents(),{hide:f().bind(this.close,this),show:f().bind(this.render,this)}):new Zh(e)};Zh.prototype.bindEvents=function(){d.Z.on(this.container,"submit","form",f().bind(this.save,this)),d.Z.on(this.container,"click","button[type=reset]",f().bind(this.close,this))},Zh.prototype.render=function(e){this.container.html(this.tpl({server:e})).show(),this.container.find("input[name=name]").focus()},Zh.prototype.close=function(){return d.Z.publish("ssh.connection.manager:form-closed"),this.container.hide()},Zh.prototype.disable=function(){this.container.find(".save").disableButton("Saving...","loading"),this.container.find(":input").prop("disabled",!0)},Zh.prototype.enable=function(){this.container.find(".save").enableButton(),this.container.find(":input").prop("disabled",!1)},Zh.prototype.values=function(){var e=this.container.find(":input"),t={name:E().trim(e.filter('[name="name"]').val()),username:E().trim(e.filter('[name="username"]').val()),host:E().trim(e.filter('[name="host"]').val()),port:Math.abs(parseInt(e.filter('[name="port"]').val(),10)),uid:E().trim(e.filter('[name="uid"]').val())};return isNaN(t.port)&&delete t.port,t},Zh.prototype.validate=function(){var e=Th.validateServer(this.values()),t=this;return f().each(e.errors,(function(e,n){var i=t.container.find('[name="'+n+'"]'),s=f().isString(e)?e:i.data().error;u.default.addErrorToInput(i,s),i.focus()})),e.success},Zh.prototype.save=function(e){if(e.preventDefault(),e.stopPropagation(),this.validate()){this.disable();var t=this.values(),n=!t.uid;return n&&delete t.uid,Th.saveServer(n,t).then(f().bind((function(){this.close()}),this)).finally(f().bind((function(){this.enable()}),this))}};const Oh=Zh;var Nh={},Dh=f().partial(Dd.Z.request,"AccountSshManager");Nh.uploadKeyToRemote=function(e,t,n,i){return Dh("uploadKeyToRemote",{remote:{host:e,username:t,password:n,port:i}})};const Mh=Nh;var Rh=I().compile('<form action="/" class="form-horizontal" method="post" id="remote-ssh-dialog">\n    <p>Complete this form with the credentials for your remote server, and we will upload your {{whitelabel}} Public key to that server. This will then allow you to make secure connections between {{whitelabel}} and your server(s).</p>\n\n    <div class="control-group">\n        <label class="control-label" for="remote-ssh-host">Host:</label>\n        <div class="controls">\n            <input id="remote-ssh-host" type="text" name="host" class="window-prompt-input input-large" placeholder="Host..." autofocus value="{{server.host}}" />\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label" for="remote-ssh-username">Username:</label>\n        <div class="controls">\n            <input id="remote-ssh-username" type="text" name="username" class="input-large" placeholder="Username..." value="{{server.username}}">\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label" for="remote-ssh-password">Password:</label>\n        <div class="controls">\n            <input id="remote-ssh-password" type="password" name="password" placeholder="Password..." class="input-large">\n        </div>\n    </div>\n    <div class="control-group">\n        <label class="control-label" for="remote-ssh-port">Port:</label>\n        <div class="controls">\n            <input id="remote-ssh-port" type="text" name="port" class="input-large" placeholder="Port..." value="{{server.port}}">\n        </div>\n    </div>\n\n</form>'),Lh=I().compile('<div>\n    <p>Complete this form with the credentials for your remote server, and we will upload your {{whitelabel}} Public key to that server. This will then allow you to make secure connections between {{whitelabel}} and your server(s).</p>\n\n    <fieldset>\n        <label>Server</label>\n        <input id="remote-ssh-username" type="text" name="username" class="input-large" placeholder="Username" value="{{server.username}}">\n        <label class="text">@</label>\n        <input id="remote-ssh-host" type="text" name="host" class="window-prompt-input input-large" placeholder="Host" autofocus value="{{server.host}}" />\n        <label class="text">:</label>\n        <input id="remote-ssh-port" type="text" name="port" class="input-large" placeholder="Port" value="{{server.port}}">\n    </fieldset>\n\n    <fieldset>\n        <label>Password</label>\n        <input id="remote-ssh-password" type="password" name="password" placeholder="Password..." class="input-large">\n    </fieldset>\n\n</div>'),Fh=null;function Bh(){Fh&&Fh.close()}function Uh(e,t){if(Fh||t){var n,i,s,a,o,r,c,l,d,h,p=t||Fh.dialogContent,f=(i=(n=p).find("#remote-ssh-host"),s=n.find("#remote-ssh-username"),a=n.find("#remote-ssh-password"),o=n.find("#remote-ssh-port"),r=i.val().trim(),c=s.val().trim(),l=a.val(),d=o.val().trim(),h=!1,0===r.length?(u.default.addErrorToInput(i,{title:"Host should not be empty",append:!0}),h=!0):/[^\w\d\.-]/.test(r)?(u.default.addErrorToInput(i,{title:"Host contains invalid characters",append:!0}),h=!0):0===c.length?(u.default.addErrorToInput(s,{title:"Username should not be empty",append:!0}),h=!0):/^[a-z0-9_][\.a-z0-9_\-]*[$]?$/.test(c)?0===l.length?(u.default.addErrorToInput(a,"Password should not be empty"),h=!0):d.length>0&&!/^\d+$/.test(d)&&(u.default.addErrorToInput(o,"Port should contain digits only"),h=!0):(u.default.addErrorToInput(s,{title:"Not valid username",append:!0}),h=!0),0===d.length&&(d=void 0),{error:h,fields:{host:r,name:c,password:l,port:d}});if(!f.error){var m=f.fields;Fh&&(Fh.buttons()[0].element.disableButton("Uploading...","loading"),Fh.dialogContent.find(":input").prop("disabled",!0).addClass("disabled")),Mh.uploadKeyToRemote(m.host,m.name,m.password,m.port).then((function(){je.Z.info("Public Key Uploaded Successfully"),qh(),Bh(),e()})).catch((function(e){qh(),je.Z.error("Upload Public Key: "+u.default.safeHtml(e))}))}}}function qh(){Fh&&(Fh.buttons()[0].element.enableButton(),Fh.dialogContent.find(":input").prop("disabled",!1).removeClass("disabled"))}const Hh={open:function(e,t){return Fh&&Fh.close(),new Promise(((n,i)=>{const s=new Error("Upload public key canceled");Fh=new Ae.Z({title:"Upload Public Key",doNotCloseOpened:t,icon:"key",onClose:function(){Fh=null},onHide:function(){i(s)},buttons:[{title:"Upload",onClick:function(){Uh(n)}},{title:"Close",type:1,onClick:function(){Bh(),i(s)}}],content:Rh({server:e||{},whitelabel:it.Z.get("whitelabel")})}),d.Z.on(Fh.content().find("form"),"keyup","input",(function(e){if(13===e.which)return Uh(n)}))}))},form:function(e){return E()(Lh({server:e||{},whitelabel:it.Z.get("whitelabel")}))},upload:Uh};var Gh=ao.default.SSHManager;const Wh=I().compile('<div id="ssh-connections-editor">\n\n\t<h2>\n\t\tSSH Connection Manager\n\t\t<button id="ssh-create-button" class="btn btn-primary" autofocus>Create New</button>\n\t</h2>\n  <p>{{whitelabel}} makes its easy for you to connect and work with your remote servers, by providing a full-featured SSH command line interface (CLI) right within your project. Create and save a connection, then connect to that server via SSH at any time. Perfect for working with your development server while you edit code.</p>\n\n\t<hr>\n\n    <div class="loader">Loading, please wait...</div>\n\n\t<div class="form-holder"></div>\n\n\t<div id="ssh-connections-list"></div>\n</div>\n'),zh=I().compile('<div class="connection">\n    <h4>{{#if name}}{{name}}{{else}}{{username}}@{{host}}{{#if port}}:{{port}}{{/if}}{{/if}}</h4>\n\n    <div class="btn-toolbar">\n        <div class="btn-group">\n            <button class="btn" data-action="connect" title="connect" aria-label="connect">\n                <span class="iconify-inline" data-icon="@codio:mdi:connection"></span>\n            </button>\n            <button class="btn" data-action="copy-key" title="Upload key to server" aria-label="Upload key to server">\n                <span class="iconify-inline" data-icon="@codio:mdi:cloud-upload"></span>\n            </button>\n            <button class="btn" data-action="edit" title="Edit" aria-label="Edit">\n                <span class="iconify-inline" data-icon="@codio:mdi:pencil-outline"></span>\n            </button>\n            <button class="btn" data-action="remove" title="Remove" aria-label="Remove">\n                <span class="iconify-inline" data-icon="@codio:mdi:trash-can-outline"></span>\n            </button>\n        </div>\n    </div>\n    {{#if name}}\n    <div>\n        {{username}}@{{host}}{{#if port}}:{{port}}{{/if}}\n    </div>\n    {{/if}}\n</div>\n');var Vh=function(e){this.container=e.html(Wh({whitelabel:it.Z.get("whitelabel")})),this.subscriptions=[],this.connections=[],this.form=new Oh(this.container.find(".form-holder")),this.list=this.container.find("#ssh-connections-list"),this.bindEvents(),this.fetch()},Kh=Vh.prototype;Kh.bindEvents=function(){d.Z.on(this.container,"click","#ssh-create-button",f().bind(this.showForm,this)),d.Z.on(this.container,"click",'[data-action="edit"]',f().bind(this.editServer,this)),d.Z.on(this.container,"click",'[data-action="copy-key"]',(function(e){var t=E()(e.currentTarget).closest(".connection");Hh.open(t.data()).catch((()=>{}))})),d.Z.on(this.container,"click",'[data-action="remove"]',f().bind(this.deleteServer,this)),d.Z.on(this.container,"click",'[data-action="connect"]',f().bind(this.connectToServer,this)),this.subscriptions.push(d.Z.subscribe("ssh.connection.manager:form-closed",f().bind(this.showList,this))),this.subscriptions.push(d.Z.subscribe("ssh.connection.manager:server-updated",f().bind(this.updateServer,this)))},Kh.fetch=function(){Gh.fetchServers().then(f().bind((function(e){this.connections=e,this.container.find(".loader").hide(),this.renderList()}),this)).catch((function(e){je.Z.error(["Unable to fetch your servers at this time. (<code>",u.default.safeHtml(e),"</code>). Please try again."].join(""))}))},Kh.showForm=function(e){this.list.hide(),this.form.show(e)},Kh.showList=function(){return this.list.show()},Kh.renderList=function(){var e=this.connections;if(!e.length)return this.showForm();this.showList(),this.list.empty().append(f().map(e,(function(e){return E()(zh(e)).data(e)})));var t=this;f().delay((function(){t.container.find("#ssh-create-button").focus()}),100)},Kh.deleteServer=function(e){var t=E()(e.currentTarget).closest(".connection"),n=t.parent(),i=t.find("h4").text();if(confirm('Are you sure you wish to delete the target named "'+i+'"?'))return t.hide(),Gh.deleteServer(t.data().uid,t.data().host).then(f().bind((function(){var e=f().findKey(this.connections,{uid:t.data().uid});e&&this.connections.splice(e,1),je.Z.success('Target "'+u.default.safeHtml(i)+'" successfully deleted.'),t.remove(),0===n.find(".connection").length&&this.showForm()}),this)).catch((function(){je.Z.error('Error deleting target "'+u.default.safeHtml(i)+'"'),t.show()}))},Kh.editServer=function(e){var t=E()(e.currentTarget).closest(".connection");return this.showForm(t.data())},Kh.updateServer=function(e,t){var n=f().findKey(this.connections,{uid:t.uid});return n?this.connections[n]=t:this.connections.push(t),this.renderList()},Kh.connectToServer=function(e){return Th.openCliTab(E()(e.currentTarget).closest(".connection").data())},Kh.close=function(){f().each(this.subscriptions,(function(e){d.Z.unsubscribe(e)})),this.subscriptions=[],this.container.remove()};const Jh=Vh,Yh=ao.default.ProjectManager,Qh=I().compile('<div class="ssh-terminal-message need-subscription">\n  <h4>Terminal and Box access is only available if you have an active subscription.</h4>\n  <div class="action-container">\n    <a href=\'/home/billing\' class="btn subscribe" tabindex="0" data-pos="0" data-target="dashboard">Subscribe Today</a>\n    <button class="btn close-connection btn-primary" tabindex="0" data-pos="1">Close</button>\n  </div>\n</div>\n'),Xh=I().compile('<div id="ssh-reconnect-prompt">\n    <h4>You do not have administrative access to the box and terminal access is not allowed.</h4>\n</div>\n'),$h=I().compile('<div id="ssh-reconnect-prompt">\n  <h4>\n    Sorry but as this assignment is marked as completed, the terminal is no longer accessible.\n    Please contact your teacher if you require access to this assignment again.\n  </h4>\n</div>\n'),ep=5591,tp="editor",np="backend";function ip(e){e.terminal&&e.terminal.resize()}async function sp(e){return new Promise((t=>setTimeout(t,e)))}const ap=class{constructor(e,t,n,s,a){this.container=e,this.filename=t,this.type=n,this.ext=s,this.options=a,this.noFocusOnInit=a.noFocus||!1,this.sshConnectParams=null,this.initialized=!1,this.timeoutId=null,this.subscriptions=[],this.terminal=null,this.readyDeferred=u.default.promise.deferred(),this.pingUrl="https://".concat(i.default.currentProject.backendSubDomain,"-").concat(ep,".").concat(it.Z.get("boxDomain"),"/ping"),this.wsUrl="wss://".concat(i.default.currentProject.backendSubDomain,"-").concat(ep,".").concat(it.Z.get("boxDomain"),"/terminal/ws"),this._resizeDebounce=f().debounce(ip.bind(null,this),100,{maxWait:3e3}),this.runTerminalAttempts=0,this.wasClosed=!1,this.terminalPromise=null}close(){this._destroyTerminal(),this.wasClosed=!0,this.editor&&this.editor.close(),this.container.remove(),this.container=null,this.filename=null,this.type=null,this.ext=null,this.options=null,this.noFocusOnInit=!1,this.sshConnectParams=null,this.initialized=!1,this.timeoutId=null,f().each(this.subscriptions,(function(e){d.Z.unsubscribe(e)})),this.subscriptions=[],this.pingUrl=null,this.wsUrl=null,this.runTerminalAttempts=0,this.terminalPromise=null}async activate(){return Te.Z.saveAllAndWait().catch((()=>{})),this.terminalPromise||(this.terminalPromise=this.initTerminalPromise()),this.terminalPromise}async initTerminalPromise(){if(this.filename===tp||this.type===tp){if(this.initialized)return;return this.editor=new Jh(this.container),void(this.initialized=!0)}if(this.initialized)return;if(!this.type)return;this.type!==np&&(this.sshConnectParams=function(e){const t={};e=E().trim(e).split("@"),t.username=e[0],e=e[1].split(":"),t.host=e[0],e[1]&&(t.port=e[1]);return t}(this.type));const e=this.options.tab;if(e){if(e.filename!==this.filename)return;if(this.type===np)e.setTitle(this.options.title||"Terminal");else{const t=this.filename.split("-");t.pop();const n=t.join("-");e.setTitle("SSH "+n)}}this._bindEvents();try{await this._initTerminal()}catch(e){this.wasClosed||(je.Z.error("Failed to init terminal"),d.Z.publish("tab:close_by_path:"+this.filename))}this.initialized=!0}afterActivate(){this.terminal&&this.terminal.activate()}async closeTerminal(e){try{await this._destroyTerminal(e)}catch(e){}d.Z.publish("tab:close_by_path:"+this.filename)}_bindEvents(){const e=this,t=this.subscriptions;t.push(d.Z.on(e.container,"click",".re-connect",(async function(){try{E()(e.container).showFProgress(),await e._destroyTerminal(),await e._initTerminal(),E()(e.container).hideFProgress()}catch(t){je.Z.error("Failed to re-connect terminal"),d.Z.publish("tab:close_by_path:"+e.filename)}}))),t.push(d.Z.on(e.container,"click",".restart-box",(function(){a.A.execute("container","restart")}))),t.push(d.Z.on(e.container,"click",".close-connection",(function(){e._destroyTerminal(!0)}))),t.push(d.Z.subscribe("project:permissionsUpdated:#projectId",(function(){i.default.currentProject.readOnly&&e.closeTerminal()}))),t.push(d.Z.subscribe("project:closeTerminal",(function(t,n){n&&n.container===e.container&&e.closeTerminal()}))),t.push(d.Z.subscribe("panel:size:change",e._resizeDebounce))}deactivate(){this.terminal&&this.terminal.deactivate()}focus(){this.terminal&&this.terminal.focus()}resize(){this.terminal&&this.terminal.resize()}unfocus(){this.terminal&&this.terminal.blur()}ready(){return this.readyDeferred.promise}isBackend(){return this.type===np}async _initTerminal(){this._startTimer(),f().defer((()=>this._stopTimer.bind(this)));const e=i.default.currentProject;let t=!0;if(this.type===np){const n=await Mi.api.getCachedSubscriptions(),s=i.default.currentUser.get("details").get("created_at"),a=i.default.currentUser.isDummy(),o=it.Z.get("boxAccessCutoffDate"),r=Mi.hasAnyUsableSubscription(n);t=(a||r||s<o)&&e.isAdmin}if(!t){const t=e.eduStartedAssignmentInfo&&e.isReadOnly?$h():Xh();return void this.container.html(e.isAdmin?Qh():t)}await this._ensureTerminalRunning();const n=this,s=btoa(this.filename);this.terminal=new ed(this.wsUrl,(async function(){const t=e.guid;return(await Yh.getTerminalToken(t)).message}),s,this.container,(async function(){return n._pingTerminal()}),(function(){n.closeTerminal(!0)}),this._sshConnectCommand()),await this.terminal.initTerminal(this.noFocusOnInit),this.terminal.forceRefresh(),this.readyDeferred.resolve(),this._resizeDebounce()}_sshConnectCommand(){return this.sshConnectParams&&"ssh -p ".concat(this.sshConnectParams.port||22," ").concat(this.sshConnectParams.username,"@").concat(this.sshConnectParams.host)}async _pingTerminal(){if(!this.pingUrl)return!1;try{return 200===(await fetch(this.pingUrl)).status}catch(e){return!1}}async _ensureTerminalRunning(){if(await this._pingTerminal())return!0;await this._runTerminalInBox();let e=500;for(let t=0;t<40;t++){if(await this._pingTerminal())return!0;e=Math.max(2e3,e+250),await sp(e)}throw new Error("Terminal did not start")}async _runTerminalInBox(){this.runTerminalAttempts++;if(await Sh.default.startTerminal(ep).catch((()=>!1)))this.runTerminalAttempts=0;else{if(this.runTerminalAttempts>2)throw this.runTerminalAttempts=0,new Error("Start terminal error");await sp(2e3),await this._runTerminalInBox()}}_startTimer(){const e=this;this.timeoutId=setTimeout((function(){!e.terminal&&f().isNumber(e.timeoutId)&&(clearTimeout(e.timeoutId),je.Z.error("Sorry, but it has taken a little too long to connect to the terminal. Please try again by reloading Codio."),d.Z.publish("tab:close_by_path:"+e.filename))}),25e3)}_stopTimer(){f().isNumber(this.timeoutId)&&clearTimeout(this.timeoutId),this.timeoutId=null}async _destroyTerminal(e){this.readyDeferred=u.default.promise.deferred(),this.terminal&&await this.terminal.destroy(e),this.terminal=null}};var op=null;const rp=I().compile('<form action="/" method="post">\n  <p>\n    {{whitelabel}} makes its easy for you to connect and work with your\n    remote servers, by providing a full-featured SSH command\n    line interface (CLI) right within your project. Use this dialog\n    to quickly connect to any server via SSH. Perfect for working with\n    your development server while you edit code.\n  </p>\n\n  <label class="hint hint-top" for="input-f-name">\n    Friendly name <i class="ss-icon">help</i>\n    <span class="hint-text">A friendly name or alias. Only required if you are saving this connection for later use.</span>\n  </label>\n  <input type="text" id="input-f-name" autofocus placeholder="a friendly name..." name="name">\n\n  <label class="hint hint-top" for="input-username">\n    Username <i class="ss-icon">help</i>\n    <span class="hint-text">The username to connect as.</span>\n  </label>\n  <input type="text" id="input-username" required placeholder="username..." name="username" data-error="Username is required">\n\n  <label class="hint hint-top" for="input-server">\n    Hostname <i class="ss-icon">help</i>\n    <span class="hint-text">Server name or IP address of your server</span>\n  </label>\n  <input type="text" id="input-server" required placeholder="hostname..." name="host" data-error="Hostname is required">\n\n  <label class="hint hint-top" for="input-port">\n    Port <small>(optional)</small>: <i class="ss-icon">help</i>\n    <span class="hint-text">The port number of your server. Leave blank to use the default</span>\n  </label>\n  <input type="text" id="input-port" placeholder="port number..." name="port">\n\n</form>\n')({whitelabel:it.Z.get("whitelabel")});const cp={show:function(){op&&op.close();var e=u.default.promise.deferred();function t(t){var n={name:E().trim(op.content().find("[name=name]").val()),username:E().trim(op.content().find("[name=username]").val()),host:E().trim(op.content().find("[name=host]").val()),port:E().trim(op.content().find("[name=port]").val())||22},i=Th.validateServer(n);return i.success?(e.resolve(n),op.close(),t?Th.saveServer(!0,n):void 0):(E().each(i.errors,(function(e){var t=op.content().find('[name="'+e+'"]');const n=!0===i.errors[e]?t.data().error:i.errors[e];u.default.addErrorToInput(t,n),t.focus()})),e.reject(new Error("connect failed. parameters are not valid")))}var n=[{title:"Connect",onClick:t,type:1},{title:"Cancel",onClick:function(){e.reject(new Error("connection canceled")),op&&op.close()}}];i.default.currentUser.isAnonymous()||n.splice(1,0,{title:"Connect & Save",onClick:function(){t(!0)},type:1});var s=rp;return op=new Ae.Z({title:"New Server Connection",icon:"connection",content:s,onClose:function(){op=null},onHide:function(){e.reject(new Error("connection canceled"))},buttons:n}),d.Z.on(op.content().find("form"),"keyup","input",(function(e){if(13===e.which)return t()})),e.promise}},lp=JSON.parse('{"name":"terminal","description":"SSH terminal","codio":{"global":true,"title":{"editor":"SSH Connections"},"urls":"terminal"}}'),dp=JSON.parse('{"font_size":{"default":14,"type":"int","desc":"Font size."},"theme":{"default":"dark","type":"string","values":{"light":"light","dark":"dark"},"desc":"Terminal theme."},"scrollback":{"default":3000,"type":"int","desc":"Number of lines available in the scroll history."}}'),up=JSON.parse('{"show-connect-dialog":{"desc":"Quick Connect"},"show-connections-manager":{"desc":"Connections Manager"},"backend-connection":{"key":"Shift+Alt+T","desc":"Terminal. SSH connection to the box"}}');var hp={};hp.info=lp,hp.settings=dp,hp.hotkeys=up,hp.get=async function(){return ap},d.Z.subscribe("command:terminal:show-connections-manager",(function(){i.default.currentUser.isAnonymous()||i.default.ide.open("terminal","editor")})),d.Z.subscribe("command:terminal:show-connect-dialog",(function(){i.default.currentUser.isAnonymous()||cp.show().then((function(e){Th.openCliTab(e)})).catch((()=>{}))})),d.Z.subscribe("command:terminal:backend-connection",(function(){i.default.currentProject.isAdmin&&i.default.ide.open("terminal","backend-"+(new Date).getTime(),{title:"Terminal",view:"backend"})})),i.default.register(hp),n(23147);var pp={};pp.info=n(65670),pp.settings=n(62119),pp.hotkeys=n(61735),i.default.register(pp);const fp=I().compile('<section class="preview-buttons">\n    <a href="javascript:void(0)" aria-label="Open in new browser tab" title="Open in new browser tab" class="preview-expand"><i class="ss-icon">navigate</i></a>\n    <a href="javascript:void(0)" aria-label="Reload preview" title="Reload preview" class="preview-refresh"><i class="ss-icon">sync</i></a>\n    <a href="javascript:void(0)" aria-label="Stop loading preview" title="Stop loading preview" class="preview-stop"><i class="ss-icon">close</i></a>\n    <a href="javascript:void(0)" class="preview-spinner"><i class="svg icon icon-spinner" /></a>\n</section>\n\n<section id="address-input">\n    <form action="/" method="post" class="address-form" onsubmit="return false;">\n        <input type="text" class="address" placeholder="Enter a URL to preview...">\n    </form>\n</section>\n')();var mp=function(e,t){this.container=e,this.preview=t,this.fragment=E()(fp),this.container.prepend(this.fragment),this.addressField=this.fragment.find(".address"),this.addressForm=this.fragment.find(".address-form");var n=this.buttons=this.fragment.filter(".preview-buttons");d.Z.on(n,"click.preview",yp.bind(this)),d.Z.on(this.addressForm,"submit",vp.bind(this))},gp=mp.prototype;function bp(){this.addressField.val(this.addressField.data("url")),this.preview.refresh()}function vp(){this.addressField.data("url",this.addressField.val()),this.preview.refresh()}function yp(e){var t=E()(e.target).closest("a");t.hasClass("preview-stop")&&this.preview.stopLoading(),this.isEnabled&&(t.hasClass("preview-refresh")&&bp.call(this),t.hasClass("preview-expand")&&this.preview.expand())}Object.defineProperty(gp,"address",{get:function(){return this.addressField.data("url")||""},set:function(e){this.addressField.val(e).data("url",e)}}),gp.disable=function(){this.buttons.addClass("awaiting"),this.addressField.prop("disabled",!0),this.buttons.prop("disabled",!0),this.container.addClass("disabled"),this.isEnabled=!1},gp.enable=function(){this.buttons.removeClass("awaiting"),this.addressField.prop("disabled",!1),this.buttons.prop("disabled",!1),this.container.removeClass("disabled"),this.isEnabled=!0},gp.close=function(){d.Z.off(this.buttons,"click.preview"),d.Z.off(this.addressForm,"submit")},gp.focusAddressBar=function(){this.addressField.focus()};const wp=mp;var _p=n(72664),kp=n(84346),Pp=n(86190);function Cp(){var e=E()("#codio-preview-iframes");return 0===e.length&&(e=E()('<div id="codio-preview-iframes" class="codio-external-iframes"></div>').appendTo("body")),e}function xp(e,t){this.parent=e,this.policy=t,this.iframe=Ep(t).appendTo(Cp()),this.hide()}const Ep=e=>{const t=E()("<iframe>");if(e&&e.length){const n=f().map(e,(e=>{let{name:t,allowlist:n}=e;return"".concat(t," ").concat(n)})).join("; ");t.attr("allow",n)}return t};var Sp=xp.prototype;Sp.src=function(e){var t=u.default.promise.deferred(),n=(this.iframe.attr("class")||"").split(/\s+/);this.iframe.remove();var i=this.iframe=Ep(this.policy).appendTo(Cp());f().each(n,(function(e){i.addClass(e)})),this.iframe.attr("src",e);var s=this;return s.refresh(),this.iframe.load((function(){s.refresh(),t.resolve()})),t.promise},Sp.hide=function(){this.removeClass("show")},Sp.show=function(){this.addClass("show")},Sp.focus=function(){this.iframe&&this.iframe.focus()},Sp.addClass=function(e){this.iframe.addClass(e)},Sp.removeClass=function(e){this.iframe.removeClass(e)},Sp.refresh=async function(){this.parent&&(this.parent.find(".preview-frame").is(":visible")?(!function(e){var t=E()(e._container).closest(".editor-size-mark"),n=(t=0===t.length?e.parent[0]:t[0]).getBoundingClientRect(),i={top:n.top,left:n.left,width:n.right-n.left,height:n.bottom-n.top};e.iframe.css({top:i.top,left:i.left,width:i.width,height:i.height})}(this),this.show()):this.hide())},Sp.clean=function(){this.iframe.remove(),this.parent=null};const Ip=xp;var Ap=n(44952),Tp=d.Z.create(n(29265)),jp=n(68058).I_,Zp=n(9380).A,Op={},Np=null;function Dp(){var e=_p.Z.getCurrentFile(),t=e?u.default.path.parse(e).name:_p.Z.getProjectIndexFile();t="Current File "+function(e){return e?"("+u.default.truncate(e,20)+")":""}(t=e?t:""),Tp.updatePreviewMenuCurrentFile({title:t})}function Mp(){var e=Op.runMode();Tp.updatePreviewMenuRunP({onOff:{defaultValue:e===kp.ZP.RUN_MODE_PREVIEW}}),Tp.updatePreviewMenuButton({title:["Preview"][e]}),Rp()}function Rp(){var e="Project index ("+u.default.truncate(_p.Z.getProjectIndexFile(),20)+")";Tp.updatePreviewMenuProjectIndex({title:e})}Op.setPreviewInside=function(e){jp.set("preview-new-window",!e),Tp.updatePreviewMenuInside({onOff:{defaultValue:e}}),Tp.updatePreviewMenuNewWindow({onOff:{defaultValue:!e}})},Op.isPreviewInside=function(){return!jp.get("preview-new-window")},Op.setIndexDefault=function(e){jp.set("preview-default-index",e),Tp.updatePreviewMenuIndex({onOff:{defaultValue:e}}),Tp.updatePreviewMenuCurrentFile({onOff:{defaultValue:!e}})},Op.isIndexDefault=function(){return jp.get("preview-default-index")},Op.runMode=function(){var e=i.default.currentProject,t=kp.ZP.RUN_MODE_PREVIEW;return e&&!i.default.currentUser.isAnonymous()&&e.isAdmin&&(t=e.runMode),t},d.Z.subscribe("command:preview:inside",Op.setPreviewInside.bind(null,!0)),d.Z.subscribe("command:preview:new-window",Op.setPreviewInside.bind(null,!1)),d.Z.subscribe("command:preview:project-index",Op.setIndexDefault.bind(null,!0)),d.Z.subscribe("command:preview:current-file",Op.setIndexDefault.bind(null,!1)),d.Z.subscribe("command:preview:run-mode:#mode",(function(e){var t;if("preview"===e.mode)t=kp.ZP.RUN_MODE_PREVIEW;!function(e){var t=i.default.currentProject;if(t){var n={guid:t.guid,runMode:e};ao.default.ProjectManager.update(n).then(Mp)}}(t)})),d.Z.subscribe("tab:activated",Dp),d.Z.subscribe("tab:focus",Dp),d.Z.subscribe("tab:closed",Dp),d.Z.subscribe("panel:focus:change",Dp),d.Z.subscribe("project:open",(function(){Op.setPreviewInside(Op.isPreviewInside()),Tp.updatePreviewMenuInside({disabled:!1}),Op.setIndexDefault(Op.isIndexDefault())})),d.Z.subscribe("filetree:select:#file",(function(e){Np=e.file})),d.Z.subscribe("command:preview:set-default-index",(function(){var e=a.Z.get("preview");if(!e||e[kp.ZP.SETTINGS_INDEX]!==Np){var t={plugin:kp.ZP.EXT_NAME,key:kp.ZP.SETTINGS_INDEX,value:Np};Zp.execute("settings","update:project",t)}})),d.Z.subscribe("settings:changed",Rp);const Lp=Op;var Fp=n(68058).I_,Bp=n(9380).A,Up={};const qp=I().compile('<form action="/" method="post" class="ac-form-horizontal">\n    <p>Because this project is private, we protect your code by requiring authentication when previewing. This is to avoid unwanted users seeing your previews outside of {{whitelabel}}.</p>\n    <p>You can enable <b>Allow Private Static Preview</b> for your project (available via \'Project>Settingsâ€™) if you do not wish to authenticate with your {{whitelabel}} username and password each time you preview. If you can\'t recall your {{whitelabel}} password, you can change it via \'{{whitelabel}}>Account\' menu item\n        See <a href="https://docs.codio.com/common/develop/ide/editing/preview.html#preview" target="_blank">Preview in a {{whitelabel}} tab or new browser tab</a> for more information on Allow Private Static Preview.</p>\n    <p>This only applies to code being previewed over the standard ports 80 and 443. Previewing via any other port will have no authentication, because the code is being served from your application server, which we have no control over.</p>\n</form>\n')({whitelabel:it.Z.get("whitelabel")});Up.show=function(){var e=Fp.get("preview-warning-was-shown"),t=u.default.promise.deferred();if(i.default.currentProject.isPrivate&&!e){Fp.set("preview-warning-was-shown",!0);var n=new Ae.Z({title:"Warning",content:qp,buttons:[{title:"Continue",type:1,onClick:function(){return n.close(Ae.Z.IDCANCEL)}},{title:"Change password...",onClick:function(){return n.close(Ae.Z.IDOK)}}],onClose:function(e){e===Ae.Z.IDOK?(t.reject(new Error("preview go to change password")),Bp.execute("account","preferences",{show:"change-password"})):t.resolve()}});n.preventClosing(!0)}else t.resolve();return t.promise};const Hp=Up;var Gp={};function Wp(e,t){return function(e){return e||_p.Z.getProjectIndex()?Promise.resolve():(_p.Z.showIndexNotFound(),Promise.reject(new Error("no project index found")))}(e).then((function(){return!!t||Hp.show()}))}Gp.run=function(e,t){var n,i=Lp.isPreviewInside();i||(n=window.open("","_blank")),Te.Z.saveAllAndWait().then((function(){Wp(e,i).then((function(){e?_p.Z.openPreview(i,e,t,n):Lp.isIndexDefault()?_p.Z.openProjectIndex(i,void 0,n):_p.Z.openPreview(i,_p.Z.getCurrentFile(),void 0,n)})).catch((()=>{}))}))},Gp.getAddress=function(e,t,n){return e&&!n&&(n=_p.Z.getDefaultAddress(t,e)),Ap.Z.interpolate(n)},Gp.checkAddress=function(e){return _p.Z.addrInPreviewDomain(e)&&_p.Z.isDefaultPort(e)&&!_p.Z.inWhiteList(e)?Promise.reject({showInfo:!0,address:e}):Promise.resolve(e)};const zp=Gp,Vp=I().compile('<div class="preview-container {{#unless hideWarning}}warning{{/unless}}">\n    <section class="iframe-container">\n        <div class="preview-info">\n            <i class="icon icon-preview-menu-screen" />\n\n            <h4>Previewing server-side code.</h4>\n            <p>{{whitelabel}} provides very easy previewing options for both static content (HTML, CSS, JS) and dynamic content (PHP, Ruby, NodeJS, etc.). The {{whitelabel}} Preview menu lets you configure one-click shortcuts to do this. Please click on the link below for documentation.</p>\n\n            <h5><a href="https://docs.codio.com/common/develop/ide/editing/preview.html#preview" target="_blank">Preview Documentation</a></h5>\n\n            <h5>Web Servers</h5>\n            <p>Languages like PHP will require you to have a web server set up. If you have not yet done this, please refer to the <a href="https://docs.codio.com/common/develop/ide/boxes/installsw/install-software.html#installing-software-packages" target="_blank">Box Parts documentation</a>, where you will see how to install Apache or Nginx onto your Box. You can do all this from the <a href="https://docs.codio.com/common/develop/ide/boxes/terminal.html#terminal" target="_blank">Terminal</a>.</p>\n\n            <h5>Server-Side Applications</h5>\n            <p>Languages like Ruby and Node can run your application without the need for a web server, so you should treat this as Dynamic content when reading the <a href="https://docs.codio.com/common/develop/ide/editing/preview.html#preview" target="_blank">Preview Documentation</a>.\n\n            <p>If you require any further help, <a href="mailto:help@codio.com">just ask</a>.</p>\n        </div>\n        <div  class="preview-frame"></div>\n    </section>\n</div>\n');var Kp={};Kp[kp.Pl]=zp;var Jp=document.location.protocol,Yp=null;const Qp=[{name:"serial",allowlist:"*"},{name:"clipboard-read",allowlist:"*"},{name:"clipboard-write",allowlist:"*"},{name:"fullscreen",allowlist:"*"}];var Xp=function(e,t,n,i,s){if(!(this instanceof Xp))return new Xp(e,t,n,i,s);s=s||{},this.eventHandlers=[],this.tab=s.tab;var a=s.noWarning;if("preview-url"===i&&(i="preview",void 0===(t=iu.I_.get(_p.Z.previewStorageLinkId(t)))))return Promise.reject(new Error("No preview filename"));var o=!0===a||iu.nP.get("hide-preview-mixed-warning");const r=Vp({hideWarning:o,whitelabel:it.Z.get("whitelabel")});this.ext=i,this.fragment=E()(r),this.frame=new Ip(this.fragment.find(".preview-frame").parent(),Qp),this.frameContainer=this.fragment.find(".iframe-container"),this.filename=t,this.container=e,this.previewPanel=new wp(this.fragment,this),this.extension=_p.Z.findCompiledViewExtension(this.filename);var c=f().bind(this.eventHandlers.push,this.eventHandlers),l=f().debounce(this.adjust.bind(this),200);c(d.Z.subscribe("tab:activated:preview",l)),c(d.Z.subscribe("panel:size:change",l)),c(d.Z.subscribe("command:layout:save",l)),c(d.Z.subscribe("debug:panel_switched",l)),c(d.Z.subscribe("call:panelSwitched",l)),c(d.Z.subscribe("ide:fullscreen:#mode",ef.bind(null,this)));var u=this;return c(d.Z.subscribe("item:moved:#from:#to",(function(e){var t;u.filename===e.from&&(t=e.to,u.filename=t,u.refresh())}))),e.append(this.fragment),this.applyAddress().then(function(){return!s.noFocus&&this.previewPanel.focusAddressBar(),this}.bind(this)).catch(function(){this.close()}.bind(this))},$p=Xp.prototype;function ef(e,t,n){const i=e.frameContainer.find(".preview-frame");"enter"===t.mode?n!==e&&i.hide():i.show(),e.adjust()}function tf(e){var t=Kp[e.ext],n=e.previewPanel.address;return t.getAddress(e.filename,e.extension,n)}function nf(){return kp.Pl}function sf(e,t,n){var s;void 0!==n&&(iu.I_.set(_p.Z.previewStorageLinkId(n),t),t=n,s="preview-url"),i.default.currentProject.temporaryDisableProtectLayout(),Kp[e]&&Kp[e].run(t,s)}$p.stopLoading=function(){this.applyIframeAddr("about:blank"),this.previewPanel.enable()},$p.applyAddress=function(){var e=this,t=u.default.promise.deferred();return tf(e).then((function(e){return function(e){if(0===e.indexOf("http://")&&"https:"===Jp)return Pp.Z.openInNewWindow(e),Promise.reject(new Error("http - opened in new window"));return Promise.resolve(e)}(e)})).then((function(t){return e.previewPanel.address=t,function(e,t){var n=Kp[t];return n.checkAddress?n.checkAddress(e):Promise.resolve(e)}(t,e.ext)})).then((function(n){const i=new URL(n),s=!!u.default.path.getFileExtension(i.pathname)?i.pathname.split("/").pop():i.hostname;return e.tab.setTitle("".concat(s," - ").concat(n," - Preview")),e.filename=n,e.previewPanel.disable(),e.frame.parent.find(".preview-frame").show().siblings(".preview-info").hide(),t.resolve(),n})).then(u.default.waitAddress).then((function(t){return e.applyIframeAddr(t),e.frame.refresh()})).catch((function(n){if(n&&n.showInfo)return e.frame.parent.find(".preview-frame").hide().siblings(".preview-info").show(),void e.frame.refresh().then((function(){e.previewPanel.address=n.address,e.previewPanel.enable(),t.resolve()}));t.reject(new Error("Apply preview address failed"))})).then(t.resolve),t.promise},$p.adjust=function(){var e=this;f().defer((function(){e.frame.refresh()}))},$p.setUrl=function(e,t,n){this.filename=n,tf(this).then(function(e,t){e.previewPanel.address=t}.bind(null,this))},$p.expand=function(){window.open(this.previewPanel.address,"_blank")},$p.refresh=function(){var e=this;Te.Z.saveAllAndWait().then((function(){e.applyAddress().catch(function(){e.close()}.bind(e))}))},$p.applyIframeAddr=function(e){var t=this.frame,n=t.parent,i=new Ip(n,Qp);t.clean();var s=this;this.frame=i,i.refresh(),i.src(e).then((function(){s.previewPanel&&s.previewPanel.enable()}))},$p.close=function(){f().forEach(this.eventHandlers,(function(e){d.Z.unsubscribe(e)})),this.eventHandlers.length=0,this.frame.clean(),this.previewPanel&&(this.previewPanel.close(),this.previewPanel=null)},d.Z.subscribe("command:preview:tree-file",(function(){sf(nf(),Yp)})),d.Z.subscribe("command:preview:project",(function(){sf(nf())})),d.Z.subscribe("command:preview:tab-file",(function(e,t){sf(nf(),t.arg.tab.filename)})),d.Z.subscribe("filetree:select:#file",(function(e){Yp=e.file})),d.Z.subscribe("command:preview:url",(function(e,t){sf("preview",t.arg.file,t.arg.title)}));const af=Xp,of=JSON.parse('{"name":"preview","description":"Preview Extension","codio":{"global":true,"urls":["preview","preview-url"]}}'),rf=JSON.parse('{"index_file":{"type":"string","default":"","desc":"This value will be used when user previews the project."}}');i.default.register({info:of,hotkeys:{},settings:rf,get:async function(){return af}});const cf=I().compile('<div class="codio-tutor-header">\n<button class="btn btn-refresh" id="codio-tutor-refresg-code">\n    <i class="ss-icon">sync</i>Refresh code\n</button>\n<div class="codio-tutor-block-type">\n    {{#equals extension \'py\'}}\n    <label class="codio-tutor-block-type-label" for="pythonType">Execution type: </label>\n    <select name="pythonType" id="pythonType" class="codio-tutor-block-type-select">\n        <option value="py2">Python 2.x</option>\n        <option value="py" selected="selected">Python3.x</option>\n        <option value="py3anaconda">Python3.x + anaconda</option>\n    </select>\n    {{/equals}}\n</div>\n</div>\n<div class="codio-tutor-iframe-container">\n<iframe class="codio-tutor-iframe" frameBorder="0"/>\n<div class="codio-tutor-iframe-loader"></div>\n</div>\n'),lf=I().compile("<h1>\n    File {{filename}} not supported\n</h1>\n");var df=["py","java","cpp","c","rb","js","ts"],uf={py:"py=3",py2:"py=2",java:"cumulative=false&heapPrimitives=false&textReferences=false&rawInputLstJSON=%5B%5D&py=java",py3anaconda:"py=py3anaconda&rawInputLstJSON=%5B%5D&textReferences=false",c:"cumulative=false&heapPrimitives=false&textReferences=false&py=c&rawInputLstJSON=%5B%5D",cpp:"cumulative=false&heapPrimitives=false&textReferences=false&py=cpp&rawInputLstJSON=%5B%5D",ruby:"cumulative=true&heapPrimitives=true&textReferences=true&py=ruby&rawInputLstJSON=%5B%5D",js:"cumulative=false&heapPrimitives=false&textReferences=false&py=js&rawInputLstJSON=%5B%5D",ts:"cumulative=false&heapPrimitives=false&textReferences=false&py=ts&rawInputLstJSON=%5B%5D"},hf=function(e,t,n,i,s){if(!(this instanceof hf))return new hf(e,t,n,i,s);var a=u.default.path.getFileExtension(t);if(!f().includes(df,a))return this._notSupported(e,t);this._container=e,this._pyMode="py",this._initContainer(e,t,a);var o=this;f().defer((function(){o.runCode(t)}))},pf=hf.prototype;pf._initContainer=function(e,t,n){E()(cf({extension:n})).appendTo(e),this.iframe=e.find(".codio-tutor-iframe"),this.iframe.load((function(){e.find(".codio-tutor-iframe-loader").hide()})),"py"===n&&this._bindPythonEvents(e,t),this._bindRefreshEvent(e,t)},pf._notSupported=function(e,t){E()(lf({filename:t})).appendTo(e)},pf._getSizeOptions=function(){var e=this._container.find(".codio-tutor-iframe-container");return["&codeDivWidth=",e.width()/2,"&codeDivHeight=",e.height()-40].join("")},pf._bindRefreshEvent=function(e,t){var n=this;e.find("#codio-tutor-refresg-code").click((function(){n.runCode(t)}))},pf._bindPythonEvents=function(e,t){var n=this;e.find("#pythonType").change((function(){n._pyMode=E()(this).val(),n.runCode(t)}))},pf._getExtensionOptions=function(e){var t=u.default.path.getFileExtension(e);return"py"===t&&(t=this._pyMode),uf[t]||""},pf.runCode=function(e){var t=this.iframe,n=this._getSizeOptions(),s=this._getExtensionOptions(e),a=this._container;i.default.currentProject.file(e).then((function(e){var i=encodeURIComponent(e.content),o="https://pythontutor.com/iframe-embed.html?date="+(new Date).getTime()+"#code="+i+"&"+s+n;a.find(".codio-tutor-iframe-loader").show(),t.attr("src",o)}))};const ff=hf,mf=JSON.parse('{"name":"tutor","description":"Code tutor","codio":{"global":true,"urls":["tutor","tutor-url"]}}');i.default.register({info:mf,hotkeys:{},settings:{},get:async function(){return ff}});const gf=JSON.parse('{"name":"view-images","description":"view image files","codio":{"fileExt":["png","jpeg","jpg","tiff","gif","bmp","ico"],"view":"image","no-auto-loading":true}}'),bf={};class vf{constructor(e){this.container=e.container,this.filename=e.filename,this.render()}render(){const{currentProject:e}=i.default,t=e.backendSubDomain,n=it.Z.get("boxDomain"),s="https://".concat(t,".").concat(n,"/").concat(this.filename),a=E()('<img src="'.concat(s,'"/>'));this.container.addClass("ac-image-viewer"),this.container.append(a)}close(){this.container&&this.container.empty()}}(0,bu.Z)(vf,"info",gf),(0,bu.Z)(vf,"settings",bf);const yf=vf;var wf={};wf.info=gf,wf.settings=bf,wf.get=async function(){return yf},i.default.register(wf);const _f=JSON.parse('{"name":"view-audio","description":"play audio files","codio":{"fileExt":["aac","flac","mp3","oga","wav"],"view":"audio","no-auto-loading":true}}'),kf={};class Pf{constructor(e){this.container=e.container,this.filename=e.filename,this.render()}render(){const{currentProject:e}=i.default,t=e.backendSubDomain,n=it.Z.get("boxDomain"),s="https://".concat(t,".").concat(n,"/").concat(this.filename),a=E()("<audio src='".concat(s,"' preload='metadata' controls />"));this.container.addClass("ac-audio-player"),this.container.append(a)}close(){this.container&&this.container.empty()}}(0,bu.Z)(Pf,"info",_f),(0,bu.Z)(Pf,"settings",kf);const Cf=Pf,xf={};xf.info=_f,xf.settings=kf,xf.get=async function(){return Cf},i.default.register(xf);const Ef=JSON.parse('{"name":"view-video","description":"play video files","codio":{"fileExt":["ogg","webm","mkv","mp4"],"view":"video","no-auto-loading":true}}'),Sf={};class If{constructor(e){this.container=e.container,this.filename=e.filename,this.render()}render(){const{currentProject:e}=i.default,t=e.backendSubDomain,n=it.Z.get("boxDomain"),s="https://".concat(t,".").concat(n,"/").concat(this.filename),a=E()("<video src='".concat(s,"' preload='metadata' controls >").concat("Your browser does not support the video tag.","</video>"));a.addClass("ac-video-player-control"),this.container.addClass("ac-video-player"),this.container.append(a)}close(){this.container&&this.container.empty()}}(0,bu.Z)(If,"info",Ef),(0,bu.Z)(If,"settings",Sf);const Af=If,Tf={};Tf.info=Ef,Tf.settings=Sf,Tf.get=async function(){return Af},i.default.register(Tf);const jf=JSON.parse('{"name":"view-code-javascript","description":"Javascript code editor","codio":{"view":"code","fileExt":["js","mjs","cjs"]}}');var Zf={};Zf.info=jf,Zf.get=function(){return i.default.loadModule((function(e){Promise.all([n.e(2988),n.e(3255),n.e(2943)]).then(function(){var t=[n(48893)];e.apply(null,t)}.bind(this)).catch(n.oe)}))},i.default.register(Zf);const Of=JSON.parse('{"name":"view-code-typescript","description":"Typescript code editor","codio":{"view":"code","fileExt":["ts"]}}');var Nf={};Nf.info=Of,Nf.get=function(){return i.default.loadModule((function(e){Promise.all([n.e(2988),n.e(3255),n.e(9032)]).then(function(){var t=[n(47376)];e.apply(null,t)}.bind(this)).catch(n.oe)}))},i.default.register(Nf);const Df=JSON.parse('{"name":"multi-upload","description":"Multi-upload extension","codio":{"global":true}}');var Mf={};Mf.info=Df,Mf.settings={},Mf.get=async function(){return Qt},i.default.register(Mf);const Rf=JSON.parse('{"name":"fork","description":"Copy Project","codio":{}}');var Lf=n(59050);const Ff=0,Bf=1,Uf=2,qf=3,Hf=4,Gf=5,Wf=I().compile('<form action="/" method="post">\n\n  {{#if deprecated}}\n  <h4>\n    Deprecated stack type - project cannot be copied\n  </h4>\n  {{/if}}\n  {{#unless deprecated}}\n  {{#unless isAnonymous}}\n  {{#if scenario1}}\n  <p>\n    This project shares the same name with a project that already exists in your account.\n    If you still wish to copy this project, please choose a different name.\n    This new copy will then be assigned this new name.\n  </p>\n  {{/if}}\n  {{#if scenario2}}\n  <p>\n    You have already copied this project more than once. You can find these copies at\n    <ul>{{#each forksList}}<li><a href="javascript:void(0)" data-url="{{link}}">{{title}}</a></li>{{/each}}</ul>\n    Do you wish to continue and create a new copy? If you do, then\n    please choose a new name for this copy. Please note, that this will\n    not affect your current copies.\n  </p>\n  {{/if}}\n  {{#if scenario3}}\n  <p>\n    You have already copied this project at\n    {{#each forksList}}&nbsp;<a href="javascript:void(0)" data-url="{{link}}">{{title}}</a>{{/each}}.\n    Do you wish to continue and create a new copy? If you do, then\n    please choose a new name for this copy. Please note, that this\n    will not affect your current copy.\n  </p>\n  {{/if}}\n  {{#if scenario4}}\n  <p>\n    This project shares the same name with a project that already exists in\n    your account. If you still wish to copy this project, please choose\n    a different name. This new copy will then be assigned this new name.\n  </p>\n  {{/if}}\n\n  <label for="projectName">New Project Name</label>\n  <input id="projectName" type="text" name="projectName" value="{{defaultValue}}" maxlength="80" autofocus />\n  {{else}}\n  <p>\n    Please be aware that as an anonymous user who is not currently signed in, any projects you\n    create will not persist. In order to keep your projects around for future use, you should\n    <a href="javascript:void(0)" data-url="/p/signup">sign up</a> for a {{whitelabel}} account as soon as possible.\n  </p>\n  {{/unless}}\n\n  {{#if showCloneOptions}}\n  <div class="fork-types-selector">\n    <h4>Clone Options</h4>\n\n    <fieldset class="radio">\n      <label>\n        <input type="radio" name="type" value="project" checked>\n        <span><i class="ss-icon">folder</i> Only Project</span>\n      </label>\n      <label>\n        <input type="radio" name="type" value="box" checked>\n        <span><i class="ss-icon">box</i> Only Box</span>\n      </label>\n      <label>\n        <input type="radio" name="type" value="both" checked>\n        <span><i class="ss-icon">box</i> Box & Project</span>\n      </label>\n    </fieldset>\n  </div>\n  {{/if}}\n  {{/unless}}\n\n</form>\n');var zf={},Vf=null;zf.showDialog=function(e,t){Vf&&zf.closeDialog();var n=[];1!==i.default.currentProject.generation&&n.push({title:"Continue",onClick:function(){(zf.validateNewProjectName()||e.isAnonymous)&&t(!0)},type:1}),n.push({title:"Cancel",onClick:function(){t(!1)}});var s=function(e){var t=E().extend(e,{});return t.defaultValue=e.projectName,t["scenario"+e.scenario]=!0,t.deprecated=1===i.default.currentProject.generation,t.whitelabel=it.Z.get("whitelabel"),E()(Wf(t))}(e);Vf=new Ae.Z({title:"Create Copy",icon:"fork",width:650,content:s,onClose:function(){Vf&&(d.Z.off(Vf.content().find("a"),"click.fork"),Vf=null)},buttons:n}),d.Z.on(Vf.content().find("a"),"click.fork",(function(e){var t=E()(e.target).data("url");t&&i.default.router.redirectTo(t),zf.closeDialog()}))},zf.disableForkSelection=function(){Vf&&Vf.content().find(".fork-types-selector input").prop("disabled",!0)},zf.disableDialog=function(){if(Vf){Vf.preventClosing(!0),Vf.buttons()[0].disable("Copying...","loading"),Vf.buttons()[1].disable();var e=Vf.content();e.find(":input").prop("disabled",!0),e.parent().hide()}},zf.enableDialog=function(){if(Vf){Vf.preventClosing(!1);var e=Vf.content();Vf.buttons()[0].enable(!0),Vf.buttons()[1].enable(),e.find(":input").prop("disabled",!1),e.parent().show()}},zf.closeDialog=function(){Vf&&Vf.close()},zf.validateNewProjectName=function(){if(Vf){var e=Vf.content().find("[name=projectName]"),t=e.val(),n=u.default.isProjectNameNotValid(t);return n&&u.default.addErrorToInput(e,n),!n}return!1},zf.getDestProjectName=function(){return Vf?Vf.content().find("[name=projectName]").val():null},zf.getForkType=function(){return Vf?Vf.content().find('input[name="type"]:checked').val():null},zf.showWarning=function(e){if(Vf){var t=Vf.content().find("[name=projectName]");u.default.addErrorToInput(t,e)}};const Kf=zf;n(59999);var Jf=!1,Yf=!1;function Qf(e){return e&&e.project||i.default.currentProject}const Xf=function(e){var t=Qf(e),n=t.guid,s=t.name;Te.Z.saveAllAndWait().then((function(){return ao.default.ProjectManager.checkProjectClonable(n)})).then((function(e){if(Yf=e,i.default.currentUser.isAnonymous())nm(t,Hf,s);else if(i.default.currentUser.getAccountUid()!==t.ownerId)Lf.Z.loadUserProjectsList((function(e){var n,i=function(e,t){for(var n=e.forks||[],i=[],s=[],a=0,o=n.length;a<o;a++)n[a].guid&&i.push(n[a].guid);return E().each(t,(function(e,t){-1!==E().inArray(t.guid,i)&&s.push(function(e){return{link:"/"+e.owner+"/"+e.pathName,title:e.name}}(t))})),s}(t,e),a=tm(s,e),o=0!==i.length,r=1<i.length;n=o?r?Uf:qf:a?Bf:Ff,f().isUndefined(n)||nm(t,n,s,i)}));else{nm(t,Yf?Hf:Gf,s)}}))},$f=function(e,t,n){Kf.disableDialog();var i="Cloning a Box can take some time depending on the amount of data to be cloned. Please be patient.";switch(n){case"box":break;case"project":default:i="Copying a Project.";break;case"both":i="Copying a Project. "+i}return E()("div.ac").showFProgress(i),ao.default.ProjectManager.fork(e.guid,t,n).then((function(e){return E()("div.ac").completeFProgress().then((function(){var t,n,i;je.Z.success("Project Copied"),em(),t=e.accountName,n=e.projectName,i="/"+t+"/"+n,location.assign(i)}))})).catch((function(e){let{message:t}=e;E()("div.ac").hideFProgress(),je.Z.error(t),Kf.enableDialog()}))};function em(){Kf.closeDialog()}function tm(e,t){var n=f()(t).map("name");return f().includes(n,e)}function nm(e,t,n,s){var a=Yf||t===Gf;Kf.showDialog({scenario:t,projectName:n,forksList:s,showCloneOptions:a,isAnonymous:i.default.currentUser.isAnonymous()},(function(t){if(!t)return em();if(!Jf){Jf=!0;var n=Kf.getDestProjectName(),i=Kf.getForkType();Lf.Z.loadUserProjectsList((function(t){tm(n,t)?Kf.showWarning("Project with this name already exists"):$f(e,n,i),Jf=!1}))}}))}d.Z.subscribe("command:project:fork",(function(e,t){Qf(t).eduStartedAssignmentInfo||Xf(t)}));const im={doForkWithDialog:Xf,doFork:$f};var sm={};sm.info=Rf,sm.settings={},sm.get=async function(){return im},i.default.register(sm);const am=JSON.parse('{"name":"project-settings","description":"Project Settings","codio":{"global":true,"noFile":true,"title":"Project Settings","urls":"project-settings"}}');var om=n(3717),rm=n.n(om);var cm=d.Z.create(n(36656)),lm=function(e,t){if(!(this instanceof lm))return new lm(t,e);this.project=e,this.container=t,this.subs={}},dm=lm.prototype,um=I().compile('<form action="/" id="project-settings-general">\n  <div class="main">\n      <div class="settings-form">\n          <input type="hidden" id="project-guid" name="guid" value="{{project.guid}}">\n\n          {{#unless isAnonymous}}\n          <fieldset>\n              <label for="project-name">Project Name</label>\n              <div class="input-container">\n                  <input type="text" name="name" id="project-name" required autofocus placeholder="Your project name" value="{{project.name}}" class="input-xlarge" maxlength="85" {{#unless isOwner}}readonly{{/unless}}>\n              </div>\n          </fieldset>\n          {{/unless}}\n\n          <fieldset>\n              <label for="project-description">Project description</label>\n              <textarea name="description" id="project-description" placeholder="Your project description" rows="4">{{project.description}}</textarea>\n          </fieldset>\n\n          {{#if isOwner}}\n          {{#unless isAnonymous}}\n          {{#unless project.isPrivateBitbucket}}\n          <fieldset class="radio project-public-flag">\n              <label for="project-public">\n                  <input id="project-public" type="radio" name="public" value="public" {{#if project.isPublic}}checked{{/if}}>\n                  <span><i class="ss-icon">unlocked</i> Public</span>\n              </label>\n\n              <label for="project-private">\n                  <input id="project-private" type="radio" name="public" value="private" {{#if project.isPrivate}}checked{{/if}}>\n                  <span><i class="ss-icon">locked</i> Private</span>\n              </label>\n              <p class="subscription-visibility help-block"><strong>A Subscription is required to make this project Private. <a href="/home/billing" target="_blank">Create a subscription now</a>.</strong></p>\n          </fieldset>\n          {{/unless}}\n\n          <fieldset>\n              <label>Allow Box Cloning</label>\n              <label class="switch">\n                  <span class="visuallyhidden">Allow Box Cloning</span>\n                  <input type="checkbox" name="is_box_clonable" id="project-box-clonable" {{#if project.is_box_clonable}}checked{{/if}} aria-describedby="project-box-clonable-label">\n                  <span class="switch-label" aria-hidden="true"></span>\n                  <span class="switch-handle" aria-hidden="true"></span>\n              </label>\n              <p id="project-box-clonable-label" class="help-block">Allow Box cloning? When your project is copied, only the project root and its contents are cloned for other users. To allow another user to clone the Box as well as the project, check this box.</p>\n          </fieldset>\n          {{#if project.isOwner}}\n          <fieldset {{#if project.isPublic}}class="hide"{{/if}} id="is-private-preview-allowed-field">\n              <label>Allow Private Static Preview</label>\n              <label class="switch">\n                  <span class="visuallyhidden">Allow Private Static Preview</span>\n                  <input type="checkbox" name="is_private_preview_allowed" id="is-private-preview-allowed" {{#if project.is_private_preview_allowed}}checked{{/if}} aria-describedby="is-private-preview-allowed-label">\n                  <span class="switch-label" aria-hidden="true"></span>\n                  <span class="switch-handle" aria-hidden="true"></span>\n              </label>\n              <p class="help-block" id="is-private-preview-allowed-label">\n                  Enable this option to preview static content in your private project without authentication. See&nbsp;\n                  <a href="https://docs.codio.com/common/develop/ide/editing/preview.html#preview" target="_blank">preview documentation</a>&nbsp;for more details.\n              </p>\n          </fieldset>\n          <fieldset {{#unless project.is_private_preview_allowed}}class="hide"{{/unless}} id="secure-domain-field">\n          <label>Secure backend domain url</label>\n          <p>\n              <a href="{{project.secureBackendDomain}}" target="_blank" id="secure-domain-link">\n                  {{project.secureBackendDomain}}\n              </a>&nbsp;\n              <a href="javascript:void(0)" id="regenerate-secure-domain" class="btn">Regenerate domain</a>\n          </p>\n          </fieldset>\n          {{/if}}\n          {{#if project.isOwner}}\n          <fieldset>\n              <label>Protect dynamic ports</label>\n              <label class="switch">\n                  <span class="visuallyhidden">Protect dynamic ports</span>\n                  <input type="checkbox" name="dynamicPortProtection" id="project-protect-dynamic" {{#if project.dynamic_port_protection}}checked{{/if}} aria-describedby="project-protect-dynamic-label">\n                  <span class="switch-label" aria-hidden="true"></span>\n                  <span class="switch-handle" aria-hidden="true"></span>\n              </label>\n              <p id="project-protect-dynamic-label" class="help-block">Enable this to restrict preview to the owner of the box.</p>\n          </fieldset>\n          {{/if}}\n\n          {{/unless}}\n          {{/if}}\n      </div>\n      <div class="make-public">\n          <p><strong>Warning!</strong></p>\n          <p>\n            This Project is currently private, and you cannot edit a private project without a\n            subscription. <a href="/home/billing" target="_blank">Create a subscription now</a>,\n            or simply make this project public.\n          </p>\n          <p>\n            <button class="make-public-btn btn btn-primary" type="button">Make this project public</button>\n            <span>or</span>\n            <a href="/home/billing" target="_blank">Create a Subscription</a>\n          </p>\n      </div>\n  </div>\n\n  <footer>\n    <div>\n      <a href="javascript:void(0)" id="project-settings-save" class="btn btn-primary">Save Changes</a>\n    </div>\n    <div>\n      {{#unless hideExport}}\n        <a href="javascript:void(0)" id="project-export" class="btn">Export</a>\n      {{/unless}}\n      {{#unless hideDelete}}\n        <a href="javascript:void(0)" id="project-delete" class="btn btn-danger">{{#exists project.authorAssignment}}Discard changes{{else}}Delete{{/exists}}</a>\n      {{/unless}}\n    </div>\n  </footer>\n</form>\n');function hm(e){e.find("#project-settings-save").disableButton("Updating...","loading"),e.find(":input").prop("disabled",!0)}function pm(e){e.find("#project-settings-save").enableButton();var t=e.find(":input");f().each(t,(function(e){var t=E()(e),n=t.data("is_disabled")||!1;t.prop("disabled",n),t.removeData("is_disabled")}))}dm._bindEvents=function(){var e=d.Z.on.bind(d.Z,this.container),t=this;e("click.project-settings","#project-settings-save",this._onFormSubmit.bind(this)),e("click.project-settings","#project-delete",(()=>cm.deleteProject())),e("click.project-settings","#project-export",E().proxy(this._onProjectExport,this)),e("keydown.project-settings",'input[name="name"]',(function(e){13===e.which&&t.container.find("#project-settings-save").click()})),e("click.project-settings",".make-public-btn",this._makePublicHandler.bind(this)),e("click.project-settings","#project-public",this._tooglePublicState.bind(this,!0)),e("click.project-settings","#project-private",this._tooglePublicState.bind(this,!1)),e("click.project-settings","#regenerate-secure-domain",this._regenerateSecureDomain.bind(this)),e("click.project-settings","#is-private-preview-allowed",this._tooglePreviewState.bind(this)),this.eventOnUpdate=d.Z.subscribe("project:preferencesUpdated",(function(){t._updateSubs().then(E().proxy(t._onUpdated,t))})),this.eventOnSubscriptionUpdated=d.Z.subscribe("billing:update",(function(){t._updateSubs()}))},dm._regenerateSecureDomain=function(){var e=this.container.find("#regenerate-secure-domain");e.disableButton("Updating...","loading");var t=this;Ae.Z.showConfirm({title:"Regenerate secure domain",description:["Select Yes to generate a new backend domain URL. ","Access by the old URL will no longer function"].join(""),onClose:function(n){n?ao.default.ProjectManager.regenerateSecureDomain(t.project.guid).catch((function(t){e.enableButton(),t&&je.Z.error(t.message)})):e.enableButton()}})},dm._tooglePreviewState=function(){var e=this.container.find('input[name="is_private_preview_allowed"]');e.prop("checked")&&!this.project.is_private_preview_allowed&&Ae.Z.showConfirm({title:"Allow Private Static Preview",description:["Are you sure you want to enable private static preview? ","This will allow you the ability to preview static content ","without authentication. A special URL will be generated."].join(""),onClose:function(t){t||e.removeAttr("checked")}})},dm._tooglePublicState=function(e){var t=this.container.find("#is-private-preview-allowed-field"),n=this.container.find("#secure-domain-field"),i=this.container.find('input[name="is_private_preview_allowed"]').prop("checked");e?(t.addClass("hide"),n.addClass("hide")):(t.removeClass("hide"),i&&n.removeClass("hide"))},dm._makePublicHandler=function(){var e=this.container.find(".make-public-btn");e.disableButton("Updating...","loading");var t=f().cloneDeep(this.project);t.is_public=!0,ao.default.ProjectManager.update(t).then((function(){cm.projectSettingsRefresh({projectName:t.pathName})})).catch((function(t){e.enableButton(),t&&je.Z.error(t.message)}))},dm._updateVisibilityControls=function(){var e=Mi.hasAnyUsableSubscription(this.subs)||i.default.currentUser.isInTrial()||i.default.currentUser.isDummy(),t=this.container,n=t.find('.project-public-flag > label[for="project-private"]');t.find(".subscription-visibility").hide(),n.removeClass(),n.find("input").removeAttr("disabled"),this.project.isPublic&&!e&&(t.find(".subscription-visibility").show(),n.addClass("disabled"),n.find("input").attr("disabled","disabled")),this._privateProjectsRequired&&(t.find("#project-private").attr("checked","checked"),t.find("#project-public").removeAttr("checked"),t.find('.project-public-flag > label[for="project-public"]').hide())},dm._onUpdated=function(){var e=this.container;e.find("#project-name").val(this.project.name),e.find("#project-description").val(this.project.description),e.find("#project-box-clonable").prop("checked",this.project.is_box_clonable),e.find("input:radio[name=public]:nth(0)").attr("checked",this.project.isPublic),e.find("input:radio[name=public]:nth(1)").attr("checked",!this.project.isPublic);var t=e.find("#secure-domain-field"),n=this.project.secureBackendDomain;n&&!this.project.isPublic?(t.removeClass("hide"),t.find("#secure-domain-link").attr("href",n).text(n),this.container.find("#regenerate-secure-domain").enableButton()):t.addClass("hide")},dm._addError=function(e,t){var n=this.container.find("[name="+e+"]");u.default.addErrorToInput(n,{title:t,noFocus:!1}),f().defer((function(){n.data("selectize")?n[0].selectize.focus():n.focus()}))},dm._processSubmit=function(){var e=this,t=i.default.currentUser.isAnonymous(),n=this.project,s=this.container.find("#project-name"),a=t?n.name:E().trim(s.val()),o=this.container.find("#project-description").val(),r=this.container.find('input[name="is_box_clonable"]').prop("checked"),c=this.container.find("#project-protect-dynamic").prop("checked"),l=this.project.is_private_preview_allowed;if(!function(t,n){var i=u.default.isProjectNameNotValid(t);return i&&e._addError(n,i),!i}(a,"name"))return Promise.reject(new Error("Project name is not valid"));hm(this.container);var d,h=this.container.find(".project-public-flag input:radio[name=public]:checked");return(d=!!t||!n.isPrivateBitbucket&&(0===h.length||"public"===h.val()))||(l=this.container.find('input[name="is_private_preview_allowed"]').prop("checked")),Te.Z.saveAllAndWait().then((function(){var e;return e=n.isOwner?{name:a,is_public:d,description:o,is_box_clonable:r,is_private_preview_allowed:l,dynamic_port_protection:c}:{name:a,description:o},n.update(e)})).then((function(){je.Z.success("Project successfully updated."),pm(e.container),e.container.find(".project-name").html(a),e.container.find(".open-without-subscription").addClass("hide")})).catch((function(t){t&&je.Z.error(t.message),pm(e.container)}))},dm._onProjectExport=function(){var e=this.project.guid;cm.exportProject({guid:e})},dm._updateSubs=function(){var e=this;return Mi.api.getCachedSubscriptions().then((function(t){e.subs=t}))},dm._onFormSubmit=function(){if("disabled"!==this.container.find("#project-settings-save").attr("disabled")){var e=this;return hm(this.container),e._processSubmit().then((function(){e._updateVisibilityControls()})).finally((function(){pm(e.container)}))}},dm.open=function(){this.container.empty();var e=i.default.currentProject,t=this;return this.orgs=ao.default.OrganizationManager.getMyOrganizations(),Mi.api.getCachedSubscriptions().then((function(e){return t.subs=e,t.orgs})).then((function(n){f().isEmpty(n)?t._privateProjectsRequired=!1:t._privateProjectsRequired=f().every(n,(function(e){return e.details.privateProjectsRequired}));const s=e.eduStartedAssignmentInfo&&!e.isOpenedByTeacher&&Nl.Z.getDisableDownloadByStudent(e.eduStartedAssignmentInfo);t.container.append(E()(um({project:t.project,isAnonymous:i.default.currentUser.isAnonymous(),hideDelete:!e.isOwner||e.eduStartedAssignmentInfo&&!e.isOpenedByTeacher,hideExport:s,isOwner:e.isOwner},{allowProtoMethodsByDefault:!0,allowProtoPropertiesByDefault:!0}))),t._updateVisibilityControls()})).then(t._bindEvents.bind(t))},dm.close=function(){d.Z.unsubscribe(this.eventOnUpdate),d.Z.unsubscribe(this.eventOnSubscriptionUpdated),d.Z.off(this.container)};const fm=lm;n(39197),n(25818);var mm=n(19575).ED;function gm(){qi().apply(this,arguments)}function bm(){Bi().apply(this,arguments)}mm(gm,qi()),gm.prototype.getLocalResults=function(e,t){t(this.stacks)},gm.prototype.setStacks=function(e){this.stacks=e},mm(bm,Bi()),bm.prototype.getSearchProps=function(){return["name","owner","shortDescription","longDescription","tag"]},bm.prototype.getSearchTokens=function(){return{name:"Name",owner:"Owner",desc:"Description",private:"Private",public:"Public",tag:"Tag",myOrgs:"My Organizations",version:"Version"}},bm.prototype.doName=function(e,t){return this.compare(e,t.name.toLowerCase())},bm.prototype.doOwner=function(e,t){return!(!t.ownerInfo||!t.ownerInfo.name)&&this.compare(e,t.ownerInfo.name.toLowerCase())},bm.prototype.doDesc=function(e,t){return!!t.description&&(this.compare(e,t.shortDescription.toLowerCase())||this.compare(e,t.longDescription.toLowerCase()))},bm.prototype.doPrivate=function(e,t){return t.isPrivate},bm.prototype.doPublic=function(e,t){return!t.isPrivate},bm.prototype.doTag=function(e,t){if(!f().isArray(t.tags)||0===t.tags.length)return!1;var n=this,i=!1;return f().each(t.tags,(function(t){return!(i=n.compare(e,t.toLowerCase()))})),i},bm.prototype.doMyOrgs=function(e,t){return t.myOrg};const vm={getSearchEngine:function(e){var t=new(Li()),n=new gm([new bm]);return n.setStacks(e),t.addProvider(n),t.setStacks=function(e){this.clean(),n.setStacks(e)},t}};var ym=null,wm=I().compile('<section class="filters">\n  <ul class="tabbed">\n    <li id="my-tab-link">\n      <a data-tab="my" href="javascript:void(0)">My Stacks</a>\n    </li>\n      <li id="certified-tab-link">\n          <a data-tab="certified" href="javascript:void(0)">Certified</a>\n      </li>\n    <li id="popular-tab-link">\n      <a data-tab="popular" href="javascript:void(0)">Popular</a>\n    </li>\n    <li id="all-tab-link">\n      <a data-tab="all" href="javascript:void(0)">All</a>\n    </li>\n  </ul>\n\n  <div class="form">\n    <label class="search">\n      <div class="btn-group search-filter">\n        <a class="btn dropdown-toggle" data-toggle="dropdown" href="javascript:void(0)">\n          Filters <span class="caret"></span>\n        </a>\n        <ul class="dropdown-menu">\n          <li><a class="filter-item" tabindex="-1" href="javascript:void(0)" data-value="myOrgs:">My Organizations</a></li>\n          <li><a tabindex="-1" href="https://docs.codio.com/common/develop/projects/access-projects.html#search-projects" target="_blank">Advanced queries</a></li>\n        </ul>\n      </div>\n      <i class="ss-icon">search</i>\n      <input type="search" id="search-field" placeholder="Search...">\n    </label>\n  </div>\n</section>\n\n<section class="ordering">\n  <div class="paginate-container pagination"></div>\n\n  <select class="selectbox filter">\n    <option value="name" selected="selected">Name</option>\n    <option value="totalCount">Downloads</option>\n    <option value="owner">Owner</option>\n  </select>\n\n  <div id="filter-buttons" class="buttons">\n    <button id="filter-asc" data-order="asc" class="active btn">\n      <i class="ss-icon">ascend</i>\n    </button>\n    <button id="filter-desc" data-order="desc" class="btn">\n      <i class="ss-icon">descend</i>\n    </button>\n  </div>\n</section>\n\n<div class="stacks-list-container list {{#if isSelection}}selection-mode{{/if}}"></div>\n'),_m=I().compile('{{#equals items.length 0}}\r\n\r\n  <div class="block-notice">\r\n    {{#if search}}\r\n      <p>Your search - <strong>{{search}}</strong> - did not match any stack.</p>\r\n      <small>\r\n        <p>Suggestions:</p>\r\n        <ul>\r\n          <li>Make sure that all words are spelled correctly.</li>\r\n          <li>Try different keywords.</li>\r\n          <li>Try more general keywords.</li>\r\n          <li>Try fewer keywords.</li>\r\n        </ul>\r\n      </small>\r\n    {{else}}\r\n      {{#if myStacks}}\r\n        {{#if isOwner}}\r\n          <p>It looks like you haven\'t created any stacks yet. Get started by browsing through what is available under <a data-tab="all" href="javascript:void(0)">All Stacks</a> or by clicking on the <a href="/home/stacks/new" class="btn btn-primary create-stack-btn">Create Stack</a> button.</p>\r\n          <p>If you want to learn more, take a look at our <a href="https://docs.codio.com/common/develop/stacks/stacks.html" target="_blank">docs</a>.</p>\r\n        {{else}}\r\n          <p>it looks like the user haven\'t created any stacks yet.</p>\r\n        {{/if}}\r\n      {{else}}\r\n        <p>it looks like no stacks available yet.</p>\r\n      {{/if}}\r\n    {{/if}}\r\n  </div>\r\n\r\n{{else}}\r\n\r\n  <table class="stacks-list">\r\n    <thead>\r\n      <th class="image"></th>\r\n      <th class="name"></th>\r\n      <th class="downloads"></th>\r\n      <th class="action"></th>\r\n    </thead>\r\n    <tbody>\r\n      {{#each items}}\r\n        <tr><td></td></tr>\r\n        <tr {{#unless ready}}class="disabled"{{/unless}} data-id="{{id}}">\r\n          <td class="image">\r\n            {{logoImage imageUrl name}}\r\n            {{#if isPrivate}}<i class="ss-icon qtip-here" title="Private">locked</i>{{/if}}\r\n          </td>\r\n          <td class="name {{#if shortDescription}}description{{/if}}">\r\n            {{#if ../isSelection}}\r\n              <a href="javascript:void(0)" class="select-stack-btn">\r\n            {{else}}\r\n              <a href="/home/stacks/{{id}}">\r\n            {{/if}}\r\n              {{#equals ownerInfo.type \'ORGANIZATION\'}}\r\n                <span class="stack-owner-org">{{toupper ownerInfo.name}} / </span>\r\n              {{else}}\r\n                <span class="stack-owner">{{#if ownerInfo}}{{#if ownerInfo.name}}{{toupper ownerInfo.name}}{{/if}}{{/if}} / </span>\r\n              {{/equals}}\r\n              {{name}}\r\n              <small>{{shortDescription}}</small>\r\n            </a>\r\n            <ul class="tags">\r\n              {{#each tags}}\r\n                <li class="stack-tag" data-tag="{{this}}">{{this}}</li>\r\n              {{/each}}\r\n            </ul>\r\n          </td>\r\n          <td class="downloads">\r\n            {{totalCount}}<i class="ss-icon qtip-here" title="Installations">downloadcloud</i>\r\n          </td>\r\n          <td class="action">\r\n            {{#if ../isSelection}}\r\n              {{#if ready}}\r\n                <button class="btn select-stack-btn"><i class="ss-icon qtip-here" title="Use this Stack">navigate</i> Select</button>\r\n              {{/if}}\r\n            {{else}}\r\n              {{#if ready}}\r\n                <a href="javascript:void(0)" class="use-stack-btn">\r\n                  <i class="ss-icon circular-icon qtip-here" title="Use this Stack to create a Project">navigate</i>\r\n                </a>\r\n              {{else}}\r\n                {{#if error}}\r\n                  <a href="/home/stacks/{{id}}" class="use-stack-btn">\r\n                    <i class="ss-icon circular-icon qtip-here" title="Show Stack Details">alert</i>\r\n                  </a>\r\n                {{else}}\r\n                  <a href="{{#if ../isSelection}}javascript:void(0){{else}}/home/stacks/{{id}}{{/if}}">\r\n                    <i class="ss-icon circular-icon qtip-here" title="Build in progress...">cloud</i>\r\n                  </a>\r\n                {{/if}}\r\n              {{/if}}\r\n            {{/if}}\r\n          </td>\r\n        </tr>\r\n      {{/each}}\r\n    </tbody>\r\n  </table>\r\n\r\n{{/equals}}\r\n'),km=null,Pm=null,Cm=[],xm=[],Em=null,Sm=null,Im=10,Am="codio-stacks-ordering",Tm=!1,jm=!1,Zm=[];function Om(e){return Am+"."+e}function Nm(e){return ym=E()(wm({canCreate:Zu.canCreateStacks(),isSelection:e})),Pm=vm.getSearchEngine([]),ym.find(".selectbox.filter").selectize({sortField:[{field:"$order",direction:"asc"}]}),function(){if(ym){var e=ym.find("#search-field");d.Z.on(e,"input",(function(){Bm(Pm,e)})),d.Z.on(ym,"click","a[data-tab]",(function(){Dm(E()(this).data("tab"))})),d.Z.on(ym.find(".selectbox.filter"),"change",(function(e){e.preventDefault(),iu.I_.set(Om(Sm),Rm()),Fm()}));var t=ym.find("#filter-buttons > button");d.Z.on(t,"click",(function(e){e.preventDefault();var n=E()(this);n.hasClass("active")||(t.removeClass("active"),n.addClass("active"),iu.I_.set(Om(Sm),Rm()),Fm())})),d.Z.on(ym,"click","a.filter-item",qm)}}(),u.default.showFastFade(km,ym)}function Dm(e,t){if(Tm){Sm=e;var n=u.default.promise.deferred();ym?n.resolve():Nm(t).then(n.resolve);var i=ym.find("#"+e+"-tab-link");if(!i.hasClass("active"))return ym.find("ul.tabbed > li").removeClass("active"),i.addClass("active"),rm().start(),n.promise.then(Gm.bind(null,e)).then((function(n){if(i.addClass("active"),Tm&&ym&&Sm===e){if(jm&&"my"===e&&f().isEmpty(n))return jm=!1,Dm("certified",t);f().each(n,(function(e){e.ready=Zu.isStackReady(e),e.error=Zu.isLastBuildFailed(e),e.myOrg=e.ownerInfo&&"ORGANIZATION"===e.ownerInfo.type&&!!Zm[e.ownerInfo.id]}));var s=iu.I_.get(Om(e));s=s||function(e){return"my"===e?{by:"name",order:"asc"}:{by:"totalCount",order:"desc"}}(e),function(e){if(e&&ym){var t=ym.find("#filter-buttons");t.find("button").removeClass("active"),t.find("button[data-order="+e.order+"]").addClass("active"),ym.find(".filter.selectbox")[0].selectize.setValue(e.by)}}(s),"certified"===e&&(n=f().filter(n,(function(e){var t=e.ownerInfo.slug;return"codio"===t||"codio-certified"===t}))),n=Lm(n),Cm=xm=n;var a="my"===e,o=ym.siblings(".stacks-list-container"),r=ym.find(".selectbox")[0].selectize,c=r.getValue();if(a?(o.removeClass("show-owner"),r.removeOption("owner")):(o.addClass("show-owner"),r.addOption({text:"Owner",value:"owner",$order:3})),a&&"owner"===c)r.setValue("name"),Fm(e);else{Pm.setStacks(Cm);var l=ym.find("#search-field");Bm(Pm,l,e)}}})).catch((function(e){je.Z.error(e.message)})).finally((function(){rm().done()}))}}function Mm(){var e=Hm(),t=(e.page-1)*e.perPage;!function(e){d.Z.off(ym.find("ul.tags"),"click","li"),d.Z.off(ym.find(".use-stack-btn"),"click"),d.Z.off(ym.find(".select-stack-btn"),"click"),ym.find(".qtip-here").qtip("destroy",!0);var t=E()(_m({canCreate:Zu.canCreateStacks(),items:e,isSelection:!!Em,isOwner:!0,myStacks:"my"===Sm,search:ym.find("#search-field").val()}));ym.siblings(".stacks-list-container").empty().append(t),ym.find(".qtip-here").qtip(),function(){d.Z.on(ym.find(".select-stack-btn"),"click",(function(e){e.preventDefault();var t=E()(this).closest("tr").data("id"),n=f().find(Cm,{id:t});f().isFunction(Em)&&Em(n)}));var e=ym.find("#search-field");d.Z.on(ym.find("ul.tags"),"click","li",(function(t){t.preventDefault();var n=E()(this).data("tag");e.val('tag:"'+n+'"'),Bm(Pm,e)})),d.Z.on(ym.find(".use-stack-btn"),"click",(function(e){e.preventDefault();var t=E()(this).closest("tr").data("id"),n=f().findLast(f().find(Cm,{id:t}).versions,{state:"READY"});i.default.router.redirectTo("/home/projects/new?stackVersion="+n.id)}))}()}(xm.slice(t,t+e.perPage))}function Rm(){return{by:ym.find(".filter.selectbox")[0].selectize.getValue(),order:ym.find("#filter-buttons > button.active").data("order")}}function Lm(e){var t=Rm();switch(t.by){case"owner":e=f().sortBy(e,(function(e){return[e.ownerInfo&&e.ownerInfo.name?e.ownerInfo.name.toLowerCase():"",e.name.toLowerCase()]}));break;case"name":e=f().sortBy(e,(function(e){return e.name.toLowerCase()}));break;case"totalCount":e=f()(e).chain().sortBy((function(e){return e.name.toLowerCase()})).sortBy("totalCount").value()}return"desc"===t.order&&e.reverse(),e}function Fm(e){Cm=xm=Lm(Cm),Pm.setStacks(Cm);var t=ym.find("#search-field");Bm(Pm,t,e)}function Bm(e,t,n){Um();var s=2===i.default.currentProject.generation?"lxc":"old";e.search("version:"+s+" "+t.val(),(function(e){(!n||n&&Sm===n)&&function(e){xm=e,Mm();var t=ym.siblings(".ordering");0===e.length?t.hide():(t.show(),n=ym.find(".paginate-container"),i=Hm(),Um(),xm.length>Im&&n.pagination({currentPage:i.page,items:xm.length,itemsOnPage:Im,displayedPages:3,prevText:"directleft",nextText:"directright",onPageClick:function(){Mm()}}));var n,i}(e)}))}function Um(){var e=ym.find(".paginate-container");e.data("pagination")&&(e.pagination("destroy"),e.data("pagination",null))}function qm(e){e.preventDefault();var t=ym.find("#search-field");t.val(E()(this).data("value")),Bm(Pm,t)}function Hm(){var e=1,t=ym.find(".paginate-container");return t.data("pagination")&&(e=t.pagination("getCurrentPage")),{perPage:Im,page:e}}function Gm(e){switch(e){case"my":return ao.default.StacksManager.my();case"certified":case"popular":case"all":return ao.default.StacksManager.all()}}async function Wm(){if(ym)return ym.find(".qtip-here").qtip("destroy",!0),Sm=null,Cm=xm=Pm=Em=null,ym.find(".selectbox.filter")[0].selectize.destroy(),u.default.hideFastFade(km).then((function(){ym&&(d.Z.off(ym,"click","a[data-tab]"),d.Z.off(ym.find("#search-field"),"input"),d.Z.off(ym.find(".selectbox.filter"),"change"),d.Z.off(ym.find("#filter-buttons > button"),"click"),d.Z.off(ym,"click","a.filter-item")),ym.remove(),ym=null}))}const zm={show:function(e,t,n,i){return Tm=!0,km=e,Em=n,t=t||"certified",jm=i,rm().start(),ao.default.OrganizationManager.getMyOrganizations().then((function(e){return f().each(e,(function(e){Zm[e.id]=e})),Dm(t,!!n)})).catch((function(e){je.Z.error(e.message)})).finally((function(){rm().done()}))},hide:function(){return Tm=!1,Wm()}};n(25818);var Vm=function(e,t){if(!(this instanceof Vm))return new Vm(t,e);this.project=e,this.container=t},Km=Vm.prototype,Jm=I().compile('<div id="project-stack-settings">\r\n  <form action="/">\r\n    <div class="main">\r\n      <fieldset class="stack-select">\r\n        <label for="stack">Current Stack</label>\r\n        <span class="input-append project-stack">\r\n          <input type="text" id="stack" name="stack" class="stack-browse-input" placeholder="Choose a stack..." readonly>\r\n          <i class="ss-icon">dropdown</i>\r\n        </span>\r\n      </fieldset>\r\n\r\n      <fieldset class="stack-version-select">\r\n        <label for="stack-version">Version</label>\r\n        <select id="stack-version" name="stack"></select>\r\n      </fieldset>\r\n\r\n      <p class="warning">\r\n        Updating or changing the stack will result in the removal of all your manual changes outside of the project directory. Your project files will stay untouched.\r\n      </p>\r\n    </div>\r\n\r\n    <footer>\r\n      {{#unless inIde}}<a href="/home/projects" class="btn">Cancel</a>{{/unless}}\r\n      <button class="btn btn-primary">Save</button>\r\n    </footer>\r\n  </form>\r\n\r\n  <div class="stacks-page">\r\n    <header>\r\n      <h3>Select a Stack</h3>\r\n      <button id="close-stacks-browser" class="btn">Close</button>\r\n    </header>\r\n    <div class="stacks-container"></div>\r\n  </div>\r\n</div>\r\n');Km._updateProjectStack=function(e){e.preventDefault();var t=this;Ae.Z.showConfirm({title:"Change stack confirmation",captcha:!0,description:["Updating or changing the stack will result in the removal ","of all your manual changes outside of the project directory. ","Your project files will stay untouched."].join(""),onClose:function(e){if(e){t.container.find("button").disableButton("Saving...","loading"),t.container.find(":input").prop("disabled",!0);var n=t.container.find("#stack-version").val(),s=f().includes(n,":latest");ao.default.ProjectManager.changeStack(t.project.guid,n.replace(":latest",""),s).then((function(){je.Z.success("Stack updated successfully"),0===i.default.router.getURL().indexOf("/home/projects")&&(window.location="/home/projects")}),(function(){je.Z.error("Stack failed to update. Please try again.")})).finally((function(){t.container.find("button").enableButton(),t.container.find(":input").prop("disabled",!1)}))}}})},Km._onStackChanged=function(e,t){this._hideStackBrowser(),this._setStack(e,t)},Km._hideStackBrowser=function(e){e&&e.preventDefault();var t=this;zm.hide().then((function(){E()("#project-settings > .filters").show(),t.container.find(".stacks-page").hide(),t.container.find("form").show()}))},Km._handleChooseStack=function(e){if(!("click"!==e.type&&"keydown"!==e.type||"keydown"===e.type&&"Enter"!==e.key)){e.preventDefault();var t=this,n=this.container.find(".stacks-container");zm.show(n,"my",this._onStackChanged.bind(this),!0).then((function(){t.container.find("form").hide(),t.container.find(".stacks-page").show(),E()("#project-settings > .filters").hide()}))}},Km._bindEvents=function(){var e=d.Z.on.bind(d.Z,this.container);e("keydown.project-stack-settings",".project-stack",this._handleChooseStack.bind(this)),e("click.project-stack-settings",".project-stack",this._handleChooseStack.bind(this)),e("submit.project-stack-settings","form",this._updateProjectStack.bind(this)),e("click.project-stack-settings","#close-stacks-browser",this._hideStackBrowser.bind(this))},Km._setStack=function(e){var t=null,n=this.container.find("#stack-version"),i=this.container.find("button");e?i.enableButton():i.disableButton(),n[0].selectize&&n[0].selectize.destroy(),e&&this.project.stackVersionId&&(t=f().find(e.versions,{id:this.project.stackVersionId}));const s=this.container.find("#stack"),a=e&&e.ownerInfo&&e.ownerInfo.name?e.ownerInfo.name:"",o=e&&e.name||"";e&&s.val(a+" / "+o),n.empty();var r=e&&e.versions||[];if(r=f().filter(r,(function(e){return"READY"===e.state})),!f().isEmpty(r)&&(this.project.isAuthorProject||this.project.isBookWriter)){var c=E()('<option value="'+f().last(r).id+':latest">Use the latest version</option>');n.append(c)}f().eachRight(r,(function(e){var t=Zu.getVersionStr(e),i=E()('<option value="'+e.id+'">'+t+"</option>");n.append(i)}));(!t||t&&this.project.isLatestStack&&(this.project.isAuthorProject||this.project.isBookWriter)?n.find("option:enabled").first():n.find('option[value="'+t.id+'"]')).attr("selected","selected"),n.selectize()},Km._openStack=function(e){this.container.empty(),this.container.append(E()(Jm({inIde:!!E()(".ide").length}))),this._setStack(e),this._bindEvents();var t=this;f().delay((function(){var e=t.container.find("#stack");e&&e.focus()}),100)},Km.open=function(){var e=this;return async function(e){return e?ao.default.StacksManager.getByVersionId(e):{}}(this.project.stackVersionId).then((function(t){e._openStack(t)})).catch((function(){e._openStack(null)}))},Km.close=function(){this._hideStackBrowser();var e=this.container.find("#stack-version")[0];e&&e.selectize&&e.selectize.destroy(),d.Z.off(this.container)};const Ym=Vm,Qm=function(e){if(!(this instanceof Qm))return new Qm(e);this.container=e},Xm=Qm.prototype,$m=I().compile('<div class="project-forwarding-settings">\n    <p>This function is now deprecated. To synchronise local code workspace files with a {{whitelabel}} box see\n        <a href="https://docs.codio.com/common/develop/ide/tools/desktopapp.html#id1" target="_blank">Desktop App</a>\n    </p>\n</div>\n');Xm.open=function(){return Promise.resolve(this.container.empty().append(E()($m({whitelabel:it.Z.get("whitelabel")}))))},Xm.close=function(){};const eg=Qm;var tg="Standard",ng={"1gb":"1 Gb","2gb":"2 Gb","8gb":"8 Gb","4gb":"4 Gb","16gb":"16 Gb",gpu:"GPU",Standard:"Standard",cgroupv1:"cgroupv1"};n(25818);var ig=function(e,t){if(!(this instanceof ig))return new ig(t,e);this.project=e,this.container=t},sg=ig.prototype,ag=I().compile('<div id="project-gigabox-settings">\n  <form action="/">\n    <div class="main">\n      {{#if noSlots}}\n        <fieldset>\n          You have Standard Box.\n        </fieldset>\n      {{else}}\n      <fieldset class="gigabox-select">\n        <label for="gigabox-slot">Memory (RAM)</label>\n        <select id="gigabox-slot" name="gigabox-slot"></select>\n      </fieldset>\n      {{/if}}\n    </div>\n\n    <footer>\n      {{#unless inIde}}<a href="/home/projects" class="btn">Cancel</a>{{/unless}}\n      {{#unless noSlots}}<button class="btn btn-primary">Save</button>{{/unless}}\n    </footer>\n  </form>\n</div>\n');sg._updateProjectSlot=function(e){e.preventDefault(),this.container.find("button").disableButton("Saving...","loading"),this.container.find(":input").prop("disabled",!0);var t=this,n=this.container.find("#gigabox-slot").val(),s=n.split("/");s=n===tg?null:{boxType:s[1],ownedByOrg:s[0]};var a={guid:i.default.currentProject.guid,gigaBoxSlot:s};ao.default.ProjectManager.update(a).then((function(){je.Z.success("Project updated successfully")})).catch((function(e){var t=e&&e.message||"";je.Z.error("Project failed to update. Please try again."+t)})).finally((function(){t.container.find("button").enableButton(),t.container.find(":input").prop("disabled",!1)}))},sg._bindEvents=function(){d.Z.on.bind(d.Z,this.container)("submit.project-gigabox-settings","form",this._updateProjectSlot.bind(this))},sg._setSlot=function(e){var t=i.default.currentProject.gigaBoxSlot,n=this.container.find("#gigabox-slot"),s=this.container.find("button");e?s.enableButton():s.disableButton(),n[0].selectize&&n[0].selectize.destroy();var a=f().reduce(e,(function(e,t){var n=f().reduce(t.slots,(function(e,n,i){return 0===n||e.push({value:t.org+"/"+i,label:ng[i]+" - "+t.name}),e}),[]);return e.concat(n)}),[]);a.unshift({value:tg,label:tg}),a.sort((function(e,t){var n=function(e){if(e===tg)return 0;var t=parseInt(e,10);return isNaN(t)?e.charCodeAt(0):t};return n(e.label)-n(t.label)})),n.empty(),f().each(a,(function(e){var t=E()('<option value="'+e.value+'">'+e.label+"</option>");n.append(t)}));var o;o=null===t||t===tg?tg:t.ownedByOrg+"/"+t.boxType,n.find('option[value="'+o+'"]').attr("selected","selected"),n.selectize()},sg._openSlots=function(e){this.container.empty();var t=0===e.length;this.container.append(E()(ag({inIde:!!E()(".ide").length,noSlots:t}))),!t&&this._setSlot(e),this._bindEvents()},sg.open=function(){var e,t=this;return(e=t.project,ao.default.OrganizationManager.getMyOrganizations().then((function(t){let n;if(e.authorAssignment){const i=e.authorAssignment.course.organizationId,s=f().find(t,(e=>e.id===i));n=s&&null!==s.gigaBoxes?[s]:[]}else n=f().filter(t,(e=>null!==e.gigaBoxes));return f().map(n,(function(e){return{org:e.id,slots:e.gigaBoxes,name:e.details.name}}))})).catch((function(e){je.Z.error(e.message)}))).then((function(e){t._openSlots(e)})).catch((function(){t._openSlots(null)}))},sg.close=function(){var e=this.container.find("#gigabox-slot")[0];e&&e.selectize&&e.selectize.destroy(),d.Z.off(this.container)};const og=ig;n(8151);const rg=I().compile('<section class="filters" {{#if noSubscription}}style="display: none;"{{/if}}>\n  <ul class="tabbed">\n    <li class="active"><a href="#tab-general">General Settings</a></li>\n    {{#unless isAnonymous}}\n    {{#if showStackSettings}}\n    <li><a href="#tab-stack">Stack Settings</a></li>\n    {{/if}}\n    <li><a href="#tab-forwarding">Forwarding Settings</a></li>\n    {{#if showGigaBoxSettings}}\n    <li><a href="#tab-gigabox">GigaBoxes Settings</a></li>\n    {{/if}}\n    {{/unless}}\n  </ul>\n</section>\n<div class="scrollable">\n  <section class="data {{#if noSubscription}}no-subscription{{/if}}"></section>\n</div>\n');var cg,lg=function(e,t,n,s,a){if(!(this instanceof lg))return new lg(e,t,n,s,a);t=t||i.default.currentProject,this.project=t,this.container=e;var o=2===t.generation,r=i.default.currentUser.get("details").get("type"),c=o&&"STUDENT"!==r,l=E()(rg({projectName:t.name,isAnonymous:i.default.currentUser.isAnonymous(),noSubscription:n,showStackSettings:o,showGigaBoxSettings:c})),h=this;d.Z.on(l,"click.project-settings",".tabbed a",this._handleTabClick.bind(this));var p=window.location.hash.replace("#tab-","")||a&&a.tabName||"general";this._openTab(p,l,n).then((function(){return u.default.showFastFade(h.container,l)})).then((function(){h.container.find("#project-name").focus()}))},dg=lg.prototype;dg._handleTabClick=function(e){e.preventDefault();var t=E()(e.target).attr("href");if(null!==t.match(/#tab-/)){var n=t.replace("#tab-","");this._openTab(n)}},dg._openTab=function(e,t){var n=this.container.find(".tabbed li");f().isUndefined(t)?t=this.container.find(".data"):(n=t.find(".tabbed li"),t=t.find(".data"));var i=n.find('a[href="#tab-'+e+'"]').parent();switch(n.removeClass("active"),i.addClass("active"),cg&&cg.close(),e){case"general":cg=new fm(this.project,t);break;case"stack":cg=new Ym(this.project,t);break;case"forwarding":cg=new eg(t);break;case"gigabox":cg=new og(this.project,t);break;default:return}return rm().start(),cg.open().catch((()=>{})).finally((()=>rm().done()))},dg.cleanup=function(){d.Z.off(this.container,".project-settings"),cg&&cg.close(),cg=void 0};const ug=lg;function hg(e){i.default.ide.open("project-settings",void 0,{tabName:e.tab})}i.default.register({info:am,get:async function(){return ug}}),d.Z.subscribe("command:project:preferences",hg),d.Z.subscribe("command:project:preferences-tab:#tab",hg);const pg=JSON.parse('{"name":"codio-user-settings","description":"User Settings","codio":{"global":true,"noFile":true,"urls":"user-preferences","title":"User Preferences"}}');var fg=n(28755);const mg=i.default.get("view-codio-settings-code"),gg=d.Z.create(fg),bg=".settings";const vg=()=>{i.default.currentProject&&!i.default.currentProject.readOnly&&i.default.currentProject.exists(bg)&&"file"===i.default.currentProject.getFileInfo(bg).type&&i.default.currentProject.file(bg).then((function(e){f().defer((function(){var t=e.content,n=a.Z.defaultContent(t);t!==n&&(e.content=n)}))}))};d.Z.subscribe("item:created:"+bg,vg),d.Z.subscribe("item:moved:"+bg,vg),d.Z.subscribe("ide:open",vg);const yg=class{constructor(e,t,n){this._container=e,this._filename=t||"",this._showSwitchButton=n||!1,this._drawn=!1,this._active=!1,this._save=f().debounce(this._saveTimeouted.bind(this),800,{maxWait:5e3})}_saveTimeouted(e){e.saveSection("details"),a.Z.user(e.get("details").get("settings"))}_onSave(e){const t=this._editor.model().getValue();e.get("details").set("settings",t),this._save(e)}_onUpdate(){const e=i.default.currentUser.get("details").get("settings");if(this._editor&&this._editor.editor()){const t=this._editor.editor().getPosition();this._editor.model().setValue(e),this._editor.editor().setPosition(t)}}async _init(e,t,n){e=a.Z.defaultContent(e);const i=await mg();this._editor=new i({container:this._container,filename:"",fileContent:e,readOnly:!this._isUserSettings,showSwitchButton:this._showSwitchButton}),this._updateEvId=d.Z.subscribe("settings:changed:user",this._onUpdate.bind(this)),this._fsHandlerId=d.Z.subscribe("ide:fullscreen:#mode",this._onFullscreen.bind(this)),await this._activateEditor(n),this._onChangeDisposable=this._editor.editor().onDidChangeModelContent(this._onSave.bind(this,t))}_onFullscreen(e,t){this._active&&this._editor&&("enter"===e.mode?t===this?this._editor.enterFullscreen():this._editor.hide():this._editor.leaveFullscreen(),this._editor.updateSize())}async _activateEditor(e){this._editor&&(this._active=!0,await this._editor.activate(e),await this._editor.afterActivate(),this._editor.editor().focus())}activate(e,t){if(this._drawn){if(this._active)return;this._activateEditor(e)}else{const n=i.default.currentUser;this._isUserSettings=t&&"user-preferences"===t.extensionName,this._init(n.get("details").get("settings"),n,e),this._drawn=this._active=!0}}afterActivate(){this._editor&&gg.focus({editor:this._editor._default.editor()})}deactivate(){this._active=!1,this._editor&&gg.out(this._editor._default.editor())}close(){this._updateEvId&&(d.Z.unsubscribe(this._updateEvId),this._updateEvId=null),this._fsHandlerId&&(d.Z.unsubscribe(this._fsHandlerId),this._fsHandlerId=null),this._onChangeDisposable&&this._onChangeDisposable.dispose(),this._onChangeDisposable=null,this._container.empty(),this._editor&&this._editor.close(),this._editor=null}};n(26433);var wg={};wg.info=pg,wg.settings={},wg.hotkeys={},wg.get=async function(){return yg},i.default.register(wg);const _g=JSON.parse('{"name":"codio-settings-manager","description":"Settings Manager"}');var kg=".settings",Pg={section:/^\s*\[\s*([^\]]*)\s*]\s*$/,param:/(^\s*([\w\.\-_]+)\s*=\s*)(.*?)\s*$/,comment:/^\s*;.*$/},Cg="user",xg="project";function Eg(e,t){var n=t||!f().isUndefined(e.value);return e&&e.plugin&&e.key&&n}function Sg(e,t,n){var s=n?jg:Tg;if(t=f().isArray(t)?t:[t],t=f().filter(t,(function(e){return Eg(e,n)})),!(e!==Cg&&e!==xg||f().isEmpty(t)))if(e===Cg){if(i.default.currentUser.isAnonymous())return;var o=i.default.currentUser.get("details").get("settings");o=s(o,t),i.default.currentUser.get("details").set("settings",o),i.default.currentUser.saveSection("details"),a.Z.user(o)}else Ag(kg,t,Tg)}function Ig(e,t,n){i.default.currentProject.file(e).then((function(e){var i=a.Z.defaultContent(e.content);i=n(i,t),f().defer((function(){e.content=i,a.Z.project(i),e.close()}))}))}function Ag(e,t,n){i.default.currentProject.exists(e)?Ig(e,t,n):i.default.currentProject.createFile(e,"").then((function(){Ig(e,t,n)}))}function Tg(e,t){var n,i=(e=e||"").split(/\r\n|\r|\n/),s=[],a=null,o=[];t=f().groupBy(t,"plugin");var r=f().clone(t);return i.forEach((function(e,i){if(!Pg.comment.test(e))if(Pg.param.test(e)){n=e.match(Pg.param);var c=t[a]&&f().find(t[a],{key:n[2]});c&&(e=e.replace(Pg.param,"$1"+c.value),f().remove(r[a],{key:n[2]}))}else Pg.section.test(e)&&(n=e.match(Pg.section),a=n[1],t[a]&&(o[a]=i));s.push(e)})),f().forEach(r,(function(e,t){f().forEach(e,(function(e){var n=e.key+" = "+e.value;f().has(o,t)?s.splice(o[t]+1,0,n):(s.push("["+t+"]",n),o[t]=s.length)})),o=function(e){var t,n=[];return e.forEach((function(e,i){!Pg.comment.test(e)&&Pg.section.test(e)&&(t=e.match(Pg.section),n[t[1]]=i)})),n}(s)})),e=s.join("\n")}function jg(e,t){var n,i=(e=e||"").split(/\r\n|\r|\n/),s=[],a=null;return t=f().groupBy(t,"plugin"),i.forEach((function(e){if(!Pg.comment.test(e))if(Pg.param.test(e)){if(n=e.match(Pg.param),t[a]&&f().find(t[a],{key:n[2]}))return}else Pg.section.test(e)&&(n=e.match(Pg.section),a=n[1]);s.push(e)})),e=s.join("\n")}d.Z.subscribe("command:settings:updateMany",(function(e,t){!function(e){e=f().filter(e,Eg);var t=f().groupBy(e,(function(e){return e.type})),n=t[Cg],s=t[xg];if(!f().isEmpty(n)&&!i.default.currentUser.isAnonymous()){var o=i.default.currentUser.get("details").get("settings");o=Tg(o,n),i.default.currentUser.get("details").set("settings",o),i.default.currentUser.saveSection("details"),a.Z.user(o)}f().isEmpty(s)||Ag(kg,s,Tg)}(t=t&&t.arg?t.arg:[])})),d.Z.subscribe("command:settings:update:#type",(function(e,t){t=t&&t.arg?t.arg:{},Sg(e.type,t,!1)})),d.Z.subscribe("command:settings:remove:#type",(function(e,t){t=t&&t.arg?t.arg:{},Sg(e.type,t,!0)}));const Zg={};var Og={};Og.info=_g,Og.settings={},Og.get=async function(){return Zg},i.default.register(Og);const Ng=JSON.parse('{"name":"emmet","description":"Emmet settings and hotkeys"}'),Dg=JSON.parse('{"expand_abbreviation":{"key":{"win":"Ctrl-E","mac":"Cmd-E"},"desc":"Expand abbreviation"},"expand_abbreviation_with_tab":{"key":"Tab","desc":"Expand abbreviation with tab"},"match_pair_outward":{"key":{"win":"Ctrl-D","mac":"Cmd-D"},"desc":"Match pair outward"},"match_pair_inward":{"key":{"win":"Shift-Ctrl-D","mac":"Shift-Cmd-D"},"desc":"Match pair inward"},"wrap_with_abbreviation":{"key":{"win":"Shift-Ctrl-A","mac":"Shift-Cmd-A"},"desc":"Wrap with abbreviation"},"next_edit_point":{"key":"Ctrl-Alt-Right","desc":"Next edit point"},"prev_edit_point":{"key":"Ctrl-Alt-Left","desc":"Prev edit point"},"merge_lines":{"key":{"win":"Shift-Ctrl-M","mac":"Shift-Cmd-M"},"desc":"Merge lines"},"split_join_tag":{"key":{"win":"Shift-Ctrl-J","mac":"Shift-Cmd-J"},"desc":"Split/join tag"},"remove_tag":{"key":{"win":"Ctrl-K","mac":"Cmd-K"},"desc":"Remove tag"},"evaluate_math_expression":{"key":{"win":"Shift-Ctrl-Y","mac":"Shift-Cmd-Y"},"desc":"Evaluate math expression"},"increment_number_by_1":{"key":"Ctrl-Up","desc":"Increment number by 1"},"decrement_number_by_1":{"key":"Ctrl-Down","desc":"Decrement number by 1"},"increment_number_by_01":{"key":"Alt-Up","desc":"Increment number by 01"},"decrement_number_by_01":{"key":"Alt-Down","desc":"Decrement number by 01"},"increment_number_by_10":{"key":"Ctrl-Alt-Up","desc":"Increment number by 10"},"decrement_number_by_10":{"key":"Ctrl-Alt-Down","desc":"Decrement number by 10"},"select_next_item":{"key":{"win":"Shift-Ctrl-.","mac":"Shift-Cmd-."},"desc":"Select next item"},"select_previous_item":{"key":{"win":"Shift-Ctrl-,","mac":"Shift-Cmd-,"},"desc":"Select previous item"},"reflect_css_value":{"key":{"win":"Ctrl-B","mac":"Cmd-B"},"desc":"Reflect css value"}}'),Mg=()=>{};d.Z.subscribe("settings:changed",Mg),d.Z.subscribe("settings:loaded",Mg),d.Z.subscribe("command:emmet:key_toggle:#param",(function(e){i.default.currentUser.isAnonymous()||a.Z.hotkey.execute("settings","update:user",{plugin:"emmet",key:e.param,value:!a.Z.get("emmet")[e.param]})}));var Rg={};Rg.info=Ng,Rg.settings={},Rg.hotkeys=Dg,i.default.register(Rg);const Lg=JSON.parse('{"name":"sharing","description":"Sharing project"}');var Fg=n(42152),Bg=n.n(Fg);var Ug=n(73219);const qg=JSON.parse('{"updateShareMenuItem":"menu:update:share"}'),Hg=I().compile('<div id="project-sharing">\n  <p class="project-sharing-info u-centered">\n    Use the link below to share a copy of your project.\n  </p>\n  {{#if sharingLink}}\n  <form class="project-sharing-form">\n    <label for="project-sharing-link">Sharing Link</label>\n    <div class="project-sharing-input-container">\n      <input id="project-sharing-link" type="text" value="{{sharingLink}}" readonly>\n      <button class="btn project-sharing-link-copy" aria-label="Copy to clipboard" data-clipboard-target="#project-sharing-link" type="button">\n        <span class="iconify iconify-inline" data-icon="@codio:mdi:content-copy"></span>\n      </button>\n    </div>\n  </form>\n  <div class="project-sharing-divider">\n    <hr/>Or<hr/>\n  </div>\n  {{/if}}\n  <div class="project-sharing-regenerate">\n    {{#if sharingLink}}\n    <button class="btn btn-danger project-sharing-remove-btn" type="button">Remove Sharing Link</button>\n    {{/if}}\n    <button class="btn btn-primary project-sharing-regenerate-btn" type="button">\n      {{#if sharingLink}}Regenerate{{else}}Generate{{/if}} Sharing Link\n    </button>\n  </div>\n</div>\n'),Gg=d.Z.create(qg);let Wg=null,zg=null;const Vg=e=>{if(e)return"".concat(window.location.origin,"/home/projects?sharedToken=").concat(e)},Kg=e=>{Wg=new Ae.Z({title:"Share your project",content:Hg({sharingLink:Vg(e)}),width:500,onHide:()=>{Wg=null,zg&&zg.destroy()},onShow:()=>{},buttons:[{title:"Close",onClick:function(){return Wg.close(Ae.Z.IDCANCEL)}}]}),Jg(Wg.content())},Jg=e=>{d.Z.on(e,"click",".project-sharing-regenerate-btn",(async()=>{try{e.find(".project-sharing-form").length>0&&await Ug.Z.deleteSharedProjectToken(i.default.currentProject.guid);const t=await Ug.Z.generateSharedProjectToken(i.default.currentProject.guid);Wg&&Yg(Hg({sharingLink:Vg(t)}))}catch(e){je.Z.error("Error while generating sharing project link: ".concat(e.message))}})),d.Z.on(e,"click",".project-sharing-remove-btn",(()=>{Ae.Z.showConfirm({title:"Remove sharing link confirmation",description:"Are you sure you want to remove sharing link?",doNotCloseOpened:!0,onClose:async e=>{if(e)try{await Ug.Z.deleteSharedProjectToken(i.default.currentProject.guid),Wg&&Wg.content(Hg({}))}catch(e){je.Z.error("Error while removing sharing project link: ".concat(e.message))}return!0}})})),zg=new(Bg())(".project-sharing-link-copy"),zg.on("success",(e=>{je.Z.success("Successfully copied to clipboard.",1e3),e.clearSelection()}))},Yg=e=>{d.Z.off(Wg.content()),zg&&zg.destroy(),Wg&&Wg.content(e),Jg(Wg.content())};d.Z.subscribe("command:project:share",(async()=>{try{const e=await Ug.Z.fetchSharedProjectToken(i.default.currentProject.guid);Kg(e)}catch(e){je.Z.error("Error while fetching sharing project link: ".concat(e.message))}})),d.Z.subscribe("project:open",(()=>{const{eduStartedAssignmentInfo:e}=i.default.currentProject;e&&Gg.updateShareMenuItem({visible:!1})}));const Qg={};i.default.register({info:Lg,get:async function(){return Qg}});const Xg=JSON.parse('{"name":"search","description":"Codio project wide search and replace","codio":{"urls":["search"],"noFile":true,"noStateSave":true,"title":"Search Results"}}'),$g=JSON.parse('{"key_searchProject":{"key":"Ctrl+H","desc":"Find in project"},"key_replaceProject":{"key":"Ctrl+Shift+H","desc":"Replace in project"}}');var eb=n(64998);const tb=/^(\S.*):$/,nb=/^(\s*)(\d+)(:|-)(\s+)(.*)$/,ib=ao.default.search;class sb extends Ei.Z{constructor(e,t){const n=new Wn.yO("","codio-search");super({container:e,fileName:t,readOnly:!0,fileContent:n});const i=this._s_searchParams=eb.ZP.decodeParams(t);this._s_container=e,this._s_model=n,0===i.locations.length?delete i.locations:i.locations=i.locations.split(" "),this._s_initSearch(),this._s_appendResults("Searching ".concat(i.pattern,"....\n")),this._s_bindEvents()}_s_initSearch(){ib.search(this._s_searchParams).then((e=>this._s_checkStatus(0,e)))}_s_bindEvents(){this._s_fullscreenSubscribe=d.Z.subscribe("ide:fullscreen:#mode",((e,t)=>{if(t===this)switch(e.mode){case"enter":this.enterFullscreen();break;case"leave":this.leaveFullscreen()}}))}_s_appendResults(e,t){const n=this._s_model;t=void 0===t?n.getLineCount():t,n.replaceRange(e,{lineNumber:t,column:1}),this.editor()&&this.editor().setPosition({lineNumber:1,column:1})}_highlightMatches(){if(this._s_highlights||!this._s_parsed)return;const{pattern:e,flags:t}=this._s_searchParams,{ignoreCase:n,regexp:i,wholeWorld:s}=t,a=this._s_model.findMatches(e,!1,i,!n,s,!1).filter((e=>{let{range:t}=e;const n=this._s_parsed[t.startLineNumber];return n&&"result"===n.type})).map((e=>{let{range:t}=e;return{range:t,options:{inlineClassName:"search-highlight"}}}));this._s_highlights=this.editor().deltaDecorations([],a)}activate(){return super.activate.apply(this,arguments).then((()=>{this.editor().setModel(this._s_model),this.editor().setOption("lineNumbers","off"),this._highlightMatches()}))}afterActivate(){super.afterActivate.call(this,arguments);const e=this.editor();e&&(this._s_onMouseDownDisposable=e.onMouseDown(this._s_onClick.bind(this)))}deactivate(){return this._s_clean(),super.deactivate.call(this,arguments)}close(){return d.Z.unsubscribe(this._s_fullscreenSubscribe),this._s_parsed=null,this._s_clean(),this._s_model&&!this._s_model.isDisposed()&&this._s_model.dispose(),super.close.call(this,arguments)}_s_onready(e,t){let n="";n+=t?'More than 100 results found for "'+this._s_searchParams.pattern+'", only first 100 are shown.':"Found "+e+' match(es) for "'+this._s_searchParams.pattern+'".',e>0&&(n+=" Double click on the line to open the file."),this._s_model.replaceRange("",{lineNumber:1,column:1},{lineNumber:2,column:1}),this._s_appendResults(n+"\n",1)}_s_onClick(e){if(this._s_parsed){if(f().isNumber(this._s_clickTimeout)){clearTimeout(this._s_clickTimeout),this._s_clickTimeout=null;const t=e.target.position,n=this._s_parsed[t.lineNumber],s=n.range?n.range.startLineNumber:n.lineNumber;i.default.ide.helpers.openFileAndGoToLine(n.path,s)}this._s_clickTimeout=setTimeout((()=>{this._s_clickTimeout=null}),500)}}_s_checkStatus(e,t){const n="log-entry/"+t.logEntryId;let i=null;ao.default.standardCallbackTask({message:t.taskId}).then((e=>{this._s_onready(e.totalMatches,e.moreResults),vl.Z.unsubscribe(n,i)})).catch((e=>{let{message:t}=e;je.Z.error(t),vl.Z.unsubscribe(n,i)})),i=vl.Z.subscribeAll(n,(e=>{if(!e)return;let t=e.split("\n");t.shift(),(e=t.join("\n"))&&e.length>0&&(this._s_appendResults((e=>(e=(e=e.replaceAll("<codio-search-file","\n<codio-search-file")).replaceAll("</codio-search-file>","</codio-search-file>:")).replace(/(<(\/?codio-search[^>]+)>)/gi,""))(e)),this._s_parsed=(e=>{const t=e.split(/\r?\n/),n=[];let i=null;for(let e=0;e<t.length;e++){const s=e+1,a=t[e],o=tb.exec(a);if(o){const[,e]=o;i=e,n[s]={type:"file",path:e,range:Wn.Zo.e6.fromPositions({lineNumber:s,column:0},{lineNumber:s,column:a.length})}}if(!i)continue;const r=nb.exec(a);if(r){const[,,e,t]=r;n[s]={type:"result",path:i,lineNumber:parseInt(e,10),resultOffset:(e+t+"").length+2}}}return n})(this._s_model.getValue()),this._highlightMatches())}))}_s_clean(){this._s_onMouseDownDisposable&&this._s_onMouseDownDisposable.dispose(),this._s_onMouseDownDisposable=null;const e=this.editor();e&&(this._s_highlights&&this.editor().deltaDecorations(this._s_highlights,[]),this._s_highlights=null,e.setOption("lineNumbers",null))}}const ab=sb;n(27090),n(35373);var ob={info:Xg,settings:{},hotkeys:$g,get:async function(){return ab}};i.default.register(ob);const rb=JSON.parse('{"name":"shortcuts","description":"Shortcuts List Viewer","codio":{"global":true,"title":"Shortcuts","urls":"shortcuts"}}');var cb;function lb(e){cb=function(e){var t={};return f().each(e,(function(e,n){f().each(e,(function(e){f().isEmpty(e.key)||f().isEmpty(e.desc)||(t[n]=t[n]||[],t[n].push({title:u.default.formatKey(e.key),description:e.desc}))}))})),t}(a.Z.hotkey.compiledDescription());var t=E()(I().compile('<section>\n    <div>\n        <form class="form-search" onsubmit="return false;">\n            <input type="text"\n                   autofocus\n                   class="input-medium search-query shortcut-search {{#if asDialog}}as-dialog{{/if}}"\n                   placeholder="Find a shortcut..."\n                   aria-label="Find a shortcut">\n        </form>\n        <p>These are your keyboard shortcuts, which include any customisations you may have made. You can customise\n            these by editing your User preferences, which can be found in <code>Codio > Preferences -> User</code>.</p>\n    </div>\n    <div class="shortcuts-descriptions {{#if asDialog}}as-dialog{{/if}}">\n        {{#eachObject shortcuts}}\n        <table class="table table-hover table-striped">\n            <thead>\n                <tr>\n                    <th class="shortcuts-section" data-id="{{_key}}" colspan="2" tabindex="0">{{_key}}</th>\n                </tr>\n            </thead>\n            <tbody>\n                {{#each items}}\n                <tr class="shortcuts-item" data-id="{{title}}">\n                    <td class="shortcuts-item-key" tabindex="0"><code>{{{title}}}</code></td>\n                    <td class="shortcuts-item-command" tabindex="0">{{description}}</td>\n                </tr>\n                {{/each}}\n            </tbody>\n        </table>\n        {{/eachObject}}\n    </div>\n</section>')({shortcuts:cb,asDialog:e})),n=t.find(".shortcut-search");return d.Z.on(n,"keyup.shortcuts",(function(){!function(e,t){e=e.toUpperCase(),f().each(t,(function(t,n){var i=!1;f().each(t,(function(t){var n=t.title.toUpperCase(),s=t.description.toUpperCase();n.indexOf(e)>-1||s.indexOf(e)>-1?(i=!0,E()('.shortcuts-item[data-id="'+t.title+'"]').show()):E()('.shortcuts-item[data-id="'+t.title+'"]').hide()}));var s=i?"show":"hide";E()('.shortcuts-section[data-id="'+n+'"]')[s](),E()('.shortcuts-item[data-section="'+n+'"]')[s]()}))}(n.val(),cb)})),t}var db=function(e){if(!(this instanceof db))return new db(e);E()(e).append(lb(!1)),f().delay((function(){E()(e).find(".shortcut-search").focus()}),100)};d.Z.subscribe("command:shortcuts:show",(function(){i.default.ide.isClosed?(0,Ae.Z)({title:"Shortcuts",content:lb(!0),buttons:Ae.Z.MB_OK}):i.default.ide.open("shortcuts","","Shortcuts")}));const ub=db;var hb={};hb.info=rb,hb.settings={},hb.get=async function(){return ub},i.default.register(hb);const pb=JSON.parse('{"name":"quick-open","description":"Open files with the keyboard","codio":{}}');var fb={};fb.info=pb,fb.hotkeys={},fb.get=async function(){return au.Z},i.default.register(fb);const mb=JSON.parse('{"name":"command-bar","description":"Run any action with the keyboard","codio":{}}');const gb={filterCommands:function(e,t){return t=t.toUpperCase(),f().filter(e,(function(e){return-1!==e.name.toUpperCase().indexOf(t)}))},sortFunc:function(e,t){var n=e.name.toUpperCase().split(":"),i=t.name.toUpperCase().split(":"),s=n[0],a=i[0],o=n[1],r=i[1];return s>a?1:s<a?-1:o>r?1:o<r?-1:0}};var bb=n(15454);const vb={};var yb=n(9380).A,wb=null;const _b=I().compile('<ul aria-labelledby="itemsList" role="listbox" id="itemsList" tabindex="0" class="list command-bar">\n  {{#each items}}\n    <li role="none">\n        <a role="option" href="#" tabindex="-1" data-index="{{@index}}">\n            <div class="name" title="{{name}}">{{name}}</div>\n            <div class="hotkey">{{hotkey}}</div>\n            <div class="command hide">{{command}}</div>\n        </a>\n    </li>\n  {{/each}}\n</ul>\n');var kb=null,Pb=function(){return u.default.promise.defer().then((function(){if(!kb){const e=(()=>{const e=i.default.currentProject;vb.project=vb.project||{},e.eduStartedAssignmentInfo&&(vb.project.share=!0),(e.eduStartedAssignmentInfo&&e.isOwner&&!e.isOpenedByTeacher||e.isAuthorProject)&&(vb.project.delete=!0),e.eduStartedAssignmentInfo&&!e.isOpenedByTeacher&&Nl.Z.getDisableDownloadByStudent(e.eduStartedAssignmentInfo)&&(vb.project["export:zip"]=!0);return vb})();kb=[],f().each(yb.descriptions(),(function(t,n){f().each(t,(function(t,i){e[n]&&e[n][i]||kb.push({command:i,name:n+": "+t.desc,hotkey:u.default.formatKey(t.default)})}))})),kb.sort(gb.sortFunc)}return kb}))},Cb=function(e,t){var n,s;e?(n=e.find(".name").html(),s=e.find(".command").html()):t&&(n=t.name,s=t.command);var a=i.default.ide.panels.focus&&i.default.ide.panels.focus.activeTab();const o=(e,t)=>e&&yb.execute(e.split(":")[0],t);a?(wb.close(),a.focus().then((()=>o(n,s)))):(wb.close(),o(n,s))};function xb(e,t,n){return u.default.promise.defer().then((function(){return gb.filterCommands(e,t)})).then((function(e){return u.default.promise.defer(e)})).then((function(e){return n()?Promise.reject(new Error("query cancelled")):e.sort(gb.sortFunc)}))}var Eb=function(){if(!i.default.ide.isClosed){if(!wb){var e={title:"Command Bar",maxItems:500,allowedHotkeys:"command-bar:key_quick_run",searchPlaceholder:"enter first few letters of a command to run...",listTemplate:_b,filterOnQueryChanged:xb,callback:Cb};wb=new bb.Z(Pb.bind(this),e)}wb.toggle()}};d.Z.subscribe("command:ide:key_quick_run",f().debounce(Eb,200)),d.Z.subscribe("project:close",(function(){wb&&wb.close(),wb=null}));const Sb={open:Eb};var Ib={};Ib.info=mb,Ib.hotkeys={},Ib.get=async function(){return Sb},i.default.register(Ib);const Ab=JSON.parse('{"name":"container","description":"Container Managers","codio":{}}'),Tb=JSON.parse('{"restart":{"desc":"Restart the box"},"reset":{"desc":"Reset user home on the box to original state"}}');var jb=ao.default.containerManager,Zb=null;function Ob(e){if(null===Zb){var t=i.default.currentProject;t&&t.isAdmin&&(Zb=Ae.Z.showConfirm({description:"Do you want to "+e+" the box for '"+t.name+"' Project?",captcha:"reset"===e,onClose:Nb.bind(null,e),onHide:function(){Zb=null}}))}}function Nb(e,t){if(t)return function(e,t){e.preventClosing(!0);var n=e.buttons()[0],i=t.charAt(0).toUpperCase()+t.slice(1);n.disable(i+"ing...","loading"),e.buttons()[1].disable(),e.content().find(":input").prop("disabled",!0)}(Zb,e),jb[e](i.default.currentProject.guid).then(Db.bind(null,e)).catch((function(e){let{message:t}=e;je.Z.error(u.default.safeHtml(t)),Zb.close()})),!1}function Db(e,t){if(t){var n="reset"===e?e:e+"ed";je.Z.success("The box was "+n),u.default.checkGigaBoxStatus(i.default.currentProject,ao.default)}else je.Z.error("Fail to "+e+" the box");Zb.close()}d.Z.subscribe("command:container:reset",Ob.bind(null,"reset")),d.Z.subscribe("command:container:restart",Ob.bind(null,"restart"));const Mb={},Rb=I().compile('<div id="container-project-info">\n  <p>The following information is specific to this project, and details the different ways you can access your Project and its Box. If you need a hand with anything, please <a href="mailto:help@codio.com">drop us a line</a>.</p>\n\n  <section>\n    <h4>Web: <small>Dynamic content</small></h4>\n    <p>You can run your server applications on port 80 or any port between 1024 and 9999.\n      To access the port add it to the box domain name as shown bellow</p>\n    <pre><code>https://{{ domain }}-80.{{ boxDomain }}\nhttps://{{ domain }}-&lt;1024-9999&gt;.{{ boxDomain }}</code></pre>\n\n    <p><small>* Access using <code>https://{{ domain }}.{{ boxDomain }}:&lt;1024-9999&gt;</code> is deprecated due to security reasons.</small></p>\n  </section>\n\n  <section>\n    <h4>Web: <small>Static content</small></h4>\n    <pre><code><a target="_blank" href="https://{{ domain }}.{{ boxDomain }}">https://{{ domain }}.{{ boxDomain }}</a></code></pre>\n  </section>\n\n  <section>\n    <h4>Stack: <small>Information</small></h4>\n    Click <a class="stack-info-link" href="{{stackInfoLink}}">here</a> to show stack information.\n  </section>\n\n</div>\n');var Lb;function Fb(){Lb=null}d.Z.subscribe("command:container:info",(function(){var e=function(){var e=i.default.currentProject;if(!e)return!1;var t=[];i.default.router&&i.default.router.getURL()&&(t=f().take(i.default.router.getURL().split("/"),3)).push("stack-info");var n={domain:e.backendSubDomain,boxDomain:it.Z.get("boxDomain"),sshHost:e.sshHost,sshPort:e.sshPort,fileServer:e.userFileServer,stackInfoLink:t.join("/"),containerServer:null};return 1===e.generation?Promise.resolve(n):ao.default.ProjectManager.fetchContainerServer(e.guid).then((function(e){return n.containerServer=e,n})).catch((function(){return n}))}();e&&!Lb&&e.then((function(e){var t=E()(Rb(e));Lb=new Ae.Z({title:"Project Box Info",content:t,onClose:Fb,onHide:Fb,buttons:Ae.Z.MB_OK,width:700,height:"535px"}),d.Z.on(t.find(".stack-info-link"),"mouseup",(function(){Lb.close()}))}))}));var Bb={};Bb.info=Ab,Bb.hotkeys=Tb,Bb.get=async function(){return Mb},i.default.register(Bb);const Ub=JSON.parse('{"name":"sync-structure","description":"Synchronization structure","codio":{}}'),qb=JSON.parse('{"sync":{"desc":"Synchronize the file structure"}}');var Hb=n(31706);d.Z.subscribe("command:file:sync_structure",(function(){var e=E()("#tree-progress");e.showFProgress(null,10,!1),Hb.Z.syncStructure(i.default.currentProject.guid).then((function(){e.completeFProgress()}))}));const Gb={};var Wb={};Wb.info=Ub,Wb.hotkeys=qb,Wb.get=async function(){return Gb},i.default.register(Wb);const zb=JSON.parse('{"name":"guides","description":"Codio Guides support","codio":{"urls":["guides","guides-edit"],"view":["preview","code","splitview"],"global":true,"noFile":true,"title":{"guides":"Guide","installed":"Guides Editor"}}}'),Vb=JSON.parse('{"font_size":{"default":18,"type":"int","desc":"Guides font size."},"sync_font_size":{"default":false,"type":"boolean","desc":"Sync guides font size with editor and terminal font sizes."},"theme":{"default":"light","type":"list","values":{"light":"light","charcoal":"charcoal","paper":"paper","dyslexic":"dyslexic"},"desc":"Guides theme."},"editor_theme_before_dyslexic":{"default":"","type":"string","desc":"Editor theme before dyslexic theme in guides was applied."}}'),Kb=JSON.parse('{"pre_edit":{"desc":"Edit Guide","key":{"win":"Ctrl+Alt+G","mac":"Cmd+Alt+G"}},"view":{"desc":"Play Guide"},"remove_custom_css":{"desc":"Remove custom CSSs from Guides"},"add_custom_css":{"desc":"Add custom CSS to Guides"},"md_toolbar_bold":{"desc":"Make selected text bold in guides markdown editor","key":{"win":"Ctrl+B","mac":"Cmd+B"}},"md_toolbar_italic":{"desc":"Make selected text italic in guides markdown editor","key":{"win":"Ctrl+I","mac":"Cmd+I"}},"md_toolbar_u_list":{"desc":"Convert selected text into innumerate list","key":{"win":"Ctrl+U","mac":"Cmd+U"}},"md_toolbar_o_list":{"desc":"Convert selected text into ordered list","key":{"win":"Ctrl+,","mac":"Cmd+,"}},"md_toolbar_code":{"desc":"Create code block with selected text","key":{"win":"Ctrl+D","mac":"Cmd+D"}},"md_toolbar_run":{"desc":"Create command button","key":{"win":"Ctrl+M","mac":"Cmd+M"}}}');var Jb=n(43033),Yb=n(73546),Qb=n.n(Yb),Xb=n(28893),$b=n(15061),ev=n(72523).w_,tv=n(72523).Yn;function nv(e){var t=u.default.path.getFileExtension(e);return ev[t]}const iv={getMediaPlayerSource:function(e){var t=u.default.path.makePath(tv,e);return{src:e=_p.Z.url(t),type:nv(e)}}};Jb.default.registerPlugin("markers",Qb());var sv=n(72523).vK,av=null,ov=null,rv=null,cv=!1;const lv=d.Z.create(n(10742));function dv(e,t,n){cv=!1;var i=e.media;av={section:e,media:i,actionMap:f().groupBy(i.actions,"time"),times:f()(i.actions).sortBy("time").map("time").value(),runMap:{},getPanel:t,lastTime:0};var s=rv.find(".media-player-container"),a=function(){s.removeClass("media-player-hidden"),lv.mediaPlayerInitialized(),n?ov.play():ov.load()};ov?(ov.reset(),uv(i.source),a()):function(e,t){var n=rv.find("#player_media_player");ov=(0,Jb.default)(n[0],{},(function(){uv(e.source,this),this.volume(.5),this.markers({markerTip:{display:!1},markers:e.actions}),this.on("timeupdate",mv),this.on("ended",gv),this.on("seeked",fv);var n=this;this.on("canplay",(function(){av&&n.markers.reset(av.media.actions),cv=!0})),t()}))}(i,a)}function uv(e,t){t=t||ov;var n=iv.getMediaPlayerSource(e);i.default.currentProject.eduStartedAssignmentInfo&&(n=e),t.src(n)}async function hv(e,t){var n=(await Xb.ZP.getMetadata()).getSectionTabs(av.section.id),i=av.section.getMediaTabs(n,e,t);i.needCloseAll?$b.Z.closeAllTabs():f().forEach(i.map.toClose,(function(e){e.close(av.getPanel).catch(u.default.error.checkErrorForIgnore)})),f().forEach(i.map.toOpen,(function(e){e.open(av.getPanel)})),i.needPause&&pv(),av.runMap=[];var s=f().findLast(av.times,(function(e){return e<=t}));av.actionMap[s]&&(av.runMap[s]=!0),av.lastTime=t,av.seeked=!1}function pv(){ov&&ov.pause()}function fv(){av.seeked&&hv(av.lastTime,Math.round(ov.currentTime()))}function mv(){if(cv){var e=ov.currentTime(),t=Math.round(e);if(av&&!av.seeked)if(Math.abs(t-av.lastTime)>1)av.seeked=!0;else{av.lastTime=t;var n=f().findLast(av.times,(function(e){return e<=t})),i=av.actionMap[n];!av.runMap[n]&&i&&hv(n-1,n)}}}function gv(){E()(".guides-button-next").click()}const bv={runSection:f().throttle((function(e,t,n,i){rv=e;var s=t&&t.media;s&&!s.disabled?f().defer((function(){!function(e,t,n){e.media.type===sv.AUDIO&&dv(e,t,n)}(t,n,i)})):(pv(),rv.find(".media-player-container").addClass("media-player-hidden"),lv.mediaPlayerStopped())}),1e3),pause:pv,cleanup:function(){ov&&(ov.dispose(),ov=null),av=null,rv=null,lv.mediaPlayerClosed()}};var vv=n(61478),yv=null,wv=null,_v=null,kv=null;const Pv={setContainer:function(e){kv=e},getContainer:function(){return kv},setAssessmentId:function(e){yv=e},getAssessmentId:function(){return yv},setRubricsInfo:function(e){_v=e},getRubricsInfo:function(){return _v},setAssessmentStats:function(e){wv=e},getAssessmentStats:function(){return wv}};function Cv(){var e=Pv.getAssessmentId(),t=Pv.getAssessmentStats();if(e&&t)return f().find(t,(function(t){return t.id===e}))}const xv={isRubricAssessment:function(e){return Ld.ZP.FREE_TEXT===e.type||Ld.ZP.GRADE_BOOK===e.type},checkVisibility:function(e,t,n){n===t?E()(e).find("i").hide():E()(e).find("i").show()},assessmentPosition:function(){return f().findIndex(Pv.getAssessmentStats(),(function(e){return Pv.getAssessmentId()===e.id}))},getCurrentAssessment:Cv,getPoints:function(e){var t=Cv();if(!t)return"";var n=t.answer&&t.answer.attempt?t.answer.attempt.points:null,i=t.details.points,s=t.answer&&f().isFinite(t.answer.attempt.points)?n:e?"?":"";return""===s?"":t.task.arePartialPointsAllowed?s+"/"+i+(e?" point(s)":""):s+(e?" point(s)":"")},getCurrentAdjustValue:function(){var e=Pv.getContainer();if(e){var t=e.find(".assessments-grade-rubrics--adjust-input");if(t.length){var n=parseInt(t.val(),10);if(f().isFinite(n))return n}return 0}},getCurrentCommentsValue:function(){var e=Pv.getContainer();if(e){var t=e.find(".assessments-grade-rubrics--adjust-textarea");return t.length?t.val():""}}};var Ev=n(88228),Sv=n(79165);const Iv=I().compile(Sv);var Av=d.Z.create(n(10742));function Tv(e,t,n){var i={adjustValue:xv.getCurrentAdjustValue(),comments:xv.getCurrentCommentsValue()};t&&(i.uuid=t);var s=xv.getCurrentAssessment();return s.answer&&s.answer.attempt&&s.answer.attempt.id&&(i.answerId=s.answer.attempt.id),jv().then((function(t){if(t)return Dv(!0),vv.Z.applyAssessmentGradingRubrics(e,Pv.getAssessmentId(),i).then((function(){return Nv(!1,n)}))})).catch((function(e){Dv(!1),je.Z.error(e.message)}))}function jv(){var e=xv.getCurrentAssessment();return!e.answer&&e.draft&&f().isString(e.draft.text)?new Promise((e=>{var t=Ae.Z.showConfirm({description:"This answer is in draft mode, submitting answer will force draft to answer",doNotCloseOpened:!0,onHide:function(){f().defer((function(){E()(t.documentActiveElement).focus()}))},onClose:function(t){e(t)}})})):Promise.resolve(!0)}function Zv(e,t,n){return jv().then((function(i){if(i)return Dv(!0),vv.Z.changeRubric(e,t).then((function(){return Nv(n)}))})).catch((function(e){je.Z.error(e.message),Dv(!1)}))}function Ov(e){return f()(e).keyBy((function(e){return e[0]})).mapValues((function(e){return e[1]})).value()}function Nv(e,t){var n=i.default.currentProject;Dv(!0);return Promise.all([vv.Z.loadRubrics(),vv.Z.findCourse(n.course.id,n.eduStartedAssignmentInfo.started.assignmentId,n.eduStartedAssignmentInfo.started.assignee.userId,n.eduStartedAssignmentInfo.started.assignee.groupId,{assignment:{stats:!0,guideStats:!0,started:{project:!0,grade:!0,assessmentStats:!0,assessmentStates:!0}}})]).then((function(n){let[s,a]=n;Av.assignmentRubricsReloaded(s),Av.courseReloaded(a);var o=function(e){var t=i.default.currentProject,n=t.eduStartedAssignmentInfo.started.assignmentId;const{assignee:s}=t.eduStartedAssignmentInfo.started;var a=f()(e.unitsList).map("assignmentsList").flatten().value(),o=f().find(a,(function(e){return(e.projectBased?e.projectBased.id:e.bookBased.id)===n})),r=o.projectBased||o.bookBased,c=f().find(e.startedAssignments,(function(e){const t=e.assignee;return t.groupId&&t.groupId===s.groupId||t.userId&&t.userId===s.userId})),l=f().mapValues(Ov(c.assessmentStatesMap),"value"),d=f().keyBy(c.answersList,"assessmentId"),u=f().keyBy(r.guidesStats.assessmentsList,"id"),h=Ov(c.rubricsMap);return f()(r.guidesStats.sectionsList).map((function(e){var t="";try{t=JSON.parse(e.playbackMetadataJson).title}catch(e){}return f()(e.assessmentIdsList).map((function(e){var n=u[e];Ev.ZP.updateAssessmentType(n),n.sectionTitle=t;var i=l[e];try{i=JSON.parse(i)}catch(e){}return n.draft=i,n.answer=d[e],n.answer&&n.answer.attempt&&(n.answer.attempt=Ev.ZP.convertAttemptOrAssessmentTask(n.answer.attempt,!0)),n.task=Ev.ZP.convertAttemptOrAssessmentTask(n.task),n.rubric=h[n.id],n})).sortBy((function(e){return e.details.name.toLowerCase()})).value()})).flatten().value()}(a);Pv.setRubricsInfo(s);var r=f().filter(o,(function(e){return xv.isRubricAssessment(e)}));Pv.setAssessmentStats(r),t||Av.gradeAssessmentsRender(e)})).finally((function(){Dv(!1)}))}function Dv(e){var t=Pv.getContainer();if(t){var n=t.find(".assessments-grade-rubrics--points"),i=xv.getPoints(!0);e&&(i=E()(Iv())),n.empty().append(i)}}const Mv={applyRubric:Tv,changeRubricCall:Zv,reloadStats:Nv,checkUnsaved:function(){var e=xv.getCurrentAssessment(),t=0,n="";return e.rubric&&(t=e.rubric.adjustValue,n=e.rubric.comments),(t!==xv.getCurrentAdjustValue()||n!==xv.getCurrentCommentsValue())&&(Tv(!1,void 0,!0),!0)},saveAdjustPoints:function(e,t){xv.getCurrentAdjustValue()!==t.adjustValue&&Tv(!1)},addRubric:function(){Zv(!1,{message:"Message",weight:1},!0)}};var Rv=n(79791);const Lv=I().compile('<div class="assessments-grade-rubrics--item {{#equals position 1}}assessments-grade-rubrics--predefinedAlign{{/equals}}" data-uuid="{{uuid}}">\n    <a class="select {{activeClass}} assessments-grade-rubrics--item-position-{{position}}" href="#">{{position}}</a>\n    {{#if custom}}\n    <span class="assessments-grade-rubrics--span">\n        -{{weight}}\n    </span>\n    {{/if}}\n    <div class="assessments-grade-rubrics--div {{activeClass}} {{#equals custom false}}predefined{{/equals}}" title="{{message}}">\n        {{message}}\n    </div>\n    {{#equals custom true}}\n    {{#equals readOnly false}}\n    <button class="assessments-grade-rubrics--itemClose icon-button" title="Remove rubric" aria-label="Remove rubric">\n        <span class="iconify-inline" data-icon="@codio:mdi:trash-can-outline"></span>\n    </button>\n    {{/equals}}\n    {{/equals}}\n</div>\n');var Fv=u.default.KeyCode;function Bv(e){e.stopPropagation(),e.preventDefault()}function Uv(e,t,n){return Bv(n),Mv.applyRubric(t,e)}function qv(e,t,n,i){Bv(i);var s=E()('<input type="text" maxlength="1000" class="assessments-grade-rubrics--message"/>').val(n).click(Bv).blur((function(){const e=(0,Rv.xh)(n);t.find(".assessments-grade-rubrics--div").empty().append(e)})).change((function(e){const t=Hv(E()(e.target).closest(".assessments-grade-rubrics--item").data("uuid"));t.message=E()(e.target).val(),t.message!==n&&Mv.changeRubricCall(!1,t)}));t.find(".assessments-grade-rubrics--div").empty().append(s),s.focus()}function Hv(e){const t=Pv.getRubricsInfo(),n=f().find(t.rubricsList,(t=>t.uuid===e));return f().cloneDeep(n)}function Gv(e,t,n,i){Bv(i);var s=Date.now(),a=E()('<input type="number" max="1000" min="-1000" class="assessments-grade-rubrics--input"/>').val(n).click(Bv).blur((function(e){Date.now()-s<50||(o(e),t.find(".assessments-grade-rubrics--span").empty().append("-"+n))})).keydown((function(e){(e.keyCode||e.which)===Fv.RETURN&&o(e)}));function o(e){const t=Hv(E()(e.target).closest(".assessments-grade-rubrics--item").data("uuid"));t.weight=parseInt(a.val(),10),f().isFinite(t.weight)&&t.weight!==n&&Mv.changeRubricCall(!1,t)}t.find(".assessments-grade-rubrics--span").empty().append(a),a.focus()}function Wv(e,t){Bv(t),Ae.Z.showConfirm({description:"Do you want to remove rubric item?",captcha:!0,doNotCloseOpened:!0,onClose:function(e){if(e){const e=Hv(E()(t.target).closest(".assessments-grade-rubrics--item").data("uuid"));Mv.changeRubricCall(!0,e)}}})}const zv={renderRubricItem:function(e,t,n,i,s){var a="",o=e.rubric&&f().includes(e.rubric.rubricsList,n.uuid);if(!e.rubric||f().isEmpty(e.rubric.rubricsList)){var r=e.details.points,c=e.answer&&e.answer.attempt&&f().isFinite(e.answer.attempt.points)?e.answer.attempt.points:null;null!==c&&(r===c&&1===t||0===c&&0===t)&&(o=!0)}if(o)switch(t){case 0:a="active-red";break;case 1:a="active-green";break;default:a="active"}const l=!(!n.context||!n.context.assessmentId),d=(0,Rv.xh)(n.message);var u=E()(Lv({activeClass:a,position:t,weight:n.weight,uuid:n.uuid,message:n.message,custom:t>1,readOnly:l}));i.append(u),u.find(".assessments-grade-rubrics--div").html(d),u.find("a.select").click(Uv.bind(null,n.uuid,!!a)),t>1&&!l&&(u.find(".assessments-grade-rubrics--itemClose").click(Wv.bind(null,t)),u.click(Gv.bind(null,t,u,n.weight)),u.find(".assessments-grade-rubrics--div").click(qv.bind(null,t,u,n.message)),s&&f().defer((function(){u.trigger("click")})))},selectRubricItem:function(e){E()(".assessments-grade-rubrics--item-position-".concat(e)).trigger("click")}};var Vv=n(83638),Kv=n(38524);const Jv=I().compile('<div class="assessment-grade-container">\n  <div class="header">\n    <a class="assessments-grade-left" href="#">\n      <i class="icon ss-icon icon-left ss-pika" type="pika">\n        left\n      </i>\n    </a>\n    <a class="assessments-grade-right" href="#">\n      <i class="icon ss-icon icon-right ss-pika" type="pika">\n        right\n      </i>\n    </a>\n    <h3 class="title">Assessments grading</h3>\n  </div>\n  <div class="content"></div>\n  <div class="footer">\n    <div class="hint">\n      Use left/right or page up/page down arrows to navigate assessments.&nbsp;\n      Use 0-9 for select rubric, +/insert for add rubric\n    </div>\n    <button class="btn btn-primary close-btn">Close</button>\n  </div>\n</div>'),Yv=I().compile('<div class="assessments-grade-info">\n    <div class="assessments-grade-info-row">\n        <div class="assessments-grade-info-item">\n            Section\n        </div>\n        <div class="assessments-grade-info-item">\n            Assessment Name\n        </div>\n        <div class="assessments-grade-info-item assessments-grade-info-item--width">\n            Points\n        </div>\n        <div class="assessments-grade-info-item assessments-grade-info-item--width">\n            Type\n        </div>\n        <div class="assessments-grade-info-item assessments-grade-info-item--width">\n            Correct\n        </div>\n    </div>\n    <div class="assessments-grade-info-row assessments-grade-info-row--data">\n        <div class="assessments-grade-info-item">\n            {{section}}\n        </div>\n        <div class="assessments-grade-info-item">\n            {{name}}\n        </div>\n        <div class="assessments-grade-info-item assessments-grade-info-item--width">\n            {{points}}\n        </div>\n        <div class="assessments-grade-info-item assessments-grade-info-item--width">\n            {{#equals type \'grade-book\'}}\n            <i class="svg icon assessments-grade--type-img icon-grade-book"/>\n            {{/equals}}\n            {{#equals type \'free-text\'}}\n            <i class="svg icon assessments-grade--type-img icon-free-text"/>\n            {{/equals}}\n            {{#equals type \'llm-based-rubric\'}}\n            <i class="svg icon assessments-grade--type-img icon-llm-based-rubric"/>\n            {{/equals}}\n            {{#equals type \'llm-based-auto-rubric\'}}\n            <i class="svg icon assessments-grade--type-img icon-llm-based-rubric"/>\n            {{/equals}}\n        </div>\n        <div class="assessments-grade-info-item assessments-grade-info-item--width">\n            {{#equals correctIcon undefined}}\n                {{#if draft}}\n                    <span class="assessments-grade-info-item--draft">draft</span>\n                {{else}}\n                    {{#if date}}\n                    <span class="assessments-grade-info-item--grade">grade</span>\n                    {{/if}}\n                {{/if}}\n            {{else}}\n                <i class="icon ss-icon icon-{{correctIcon}} ss-pika" type="pika" title="{{correctIconTitle}}">{{correctIcon}}</i>\n            {{/equals}}\n        </div>\n    </div>\n</div>\n{{#if date}}\n<div class="assessments-grade-field">\n    <div class="assessments-grade-field-title">\n        Date\n    </div>\n    <div class="assessments-grade-field-value">\n        {{date}}\n    </div>\n</div>\n{{/if}}\n{{#equals type \'free-text\'}}\n<div class="assessments-grade-field">\n    <div class="assessments-grade-field-title">\n        Question\n    </div>\n    <div class="assessments-grade-field-value assessments-grade-field-instructions">\n        {{question}}\n    </div>\n</div>\n{{/equals}}\n'),Qv=I().compile('<div class="assessments-grade-field--answers">\n    <div class="assessments-grade-field--answers-container {{#equals type \'grade-book\'}}hide{{/equals}}">\n    {{#if rationale}}\n    <div class="assessments-grade-field">\n        <div class="assessments-grade-field-title">\n            Rationale\n        </div>\n        <div class="assessments-grade-field-value assessments-grade-field-rationale">\n            {{rationale}}\n        </div>\n    </div>\n    {{/if}}\n    <div class="assessments-grade-field">\n        <div class="assessments-grade-field-title">\n            {{#equals type \'free-text\'}}\n            Student answer\n            {{/equals}}\n            {{#equals type \'grade-book\'}}\n            Answer\n            {{/equals}}\n        </div>\n        <div class="assessments-grade-field-value assessments-grade-field-question {{#equals type \'grade-book\'}}hide{{/equals}}">\n            {{answer}}\n        </div>\n    </div>\n    </div>\n    <div class="assessments-grade-field-rubrics">\n    </div>\n</div>\n'),Xv=I().compile('{{#if partialPoints}}\n<div class="assessments-grade-rubrics--options" title=\'Copy rubrics\'>\n    <i class="icon ss-icon icon-gear ss-pika" type="pika">gear</i>\n</div>\n{{/if}}\n<div class="assessments-grade-rubrics--total">\n    Total points:\n    <div class="assessments-grade-rubrics--points">\n        {{points}}\n    </div>\n</div>\n<div class="assessments-grade-rubrics--content">\n</div>\n{{#if partialPoints}}\n<button class="btn btn-primary assessments-grade-rubrics--button">\n    <i class="icon ss-icon icon-add ss-pika" type="pika">add</i>\n    &nbsp;Add Rubric Item\n</button>\n<div class="assessments-grade-rubrics--adjust">\n    Points adjust:\n    <input type="number" min="-1000" max="1000" class="assessments-grade-rubrics--adjust-input" value="{{adjustValue}}"/>\n</div>\n{{/if}}\n<textarea placeholder="Provide specific assessment comments..." class="assessments-grade-rubrics--adjust-textarea">{{comments}}</textarea>\n<div class="assessments-grade-rubrics--comments-preview"></div>\n\n\n'),$v=I().compile('<div id="assessments-grade">\n    <div class="assessments-grade-content">\n        <i class="spinner assessments-grade-rubrics--loader svg icon icon-loader-dark" />\n    </div>\n</div>\n');var ey,ty=d.Z.create(n(10742)),ny=u.default.KeyCode;function iy(e,t){document.addEventListener("keydown",ay,!1),E()(window).on("beforeunload",sy),e&&(e.find(".assessments-grade-left").click(oy.bind(null,-1)),e.find(".assessments-grade-right").click(oy.bind(null,1)),e.find(".close-btn").click(dy.bind(null,t)))}function sy(){if(Mv.checkUnsaved())return"Please wait, data saving in progress"}function ay(e){var t=e.keyCode||e.which,n=e.target.tagName;if(!(("TEXTAREA"===n||"INPUT"===n)&&!f().includes([ny.HOME,ny.END,ny.INSERT],t)))switch(t){case ny.PAGE_UP:case ny.RIGHT:oy(1);break;case ny.PAGE_DOWN:case ny.LEFT:oy(-1);break;case ny.INSERT:case ny.PLUS:Mv.addRubric();break;default:var i=t-ny.ZERO;t>=ny.NUMPAD0&&(i=t-ny.NUMPAD0);var s=Pv.getRubricsInfo();i>=0&&i<s.rubricsList.length&&zv.selectRubricItem(i)}}function oy(e){var t=xv.assessmentPosition()+e,n=Pv.getAssessmentStats();if(!(t<0||t>=n.length)){Mv.checkUnsaved();var i=n[t];Pv.setAssessmentId(i.id),cy()}}function ry(){return ly(xv.getCurrentCommentsValue(),".assessments-grade-rubrics--comments-preview")}async function cy(e){var t,n,i=xv.getCurrentAssessment(),s=xv.assessmentPosition(),a=Pv.getAssessmentStats().length-1;xv.checkVisibility(".assessments-grade-left",0,s),xv.checkVisibility(".assessments-grade-right",a,s);var o={section:i.sectionTitle,name:i.details.name,type:i.type,rationale:i.details.guidance?i.details.guidance.value:"",question:i.details.instructions,partialPoints:i.task.arePartialPointsAllowed,points:xv.getPoints()};if(i.draft&&f().isString(i.draft.text)&&(o.answer=i.draft.text,o.draft=!0),i.answer){if(i.answer.status&&i.answer.status.pending)delete o.draft;else{const e=i.answer.attempt.points>0,t=e&&i.answer.attempt.points<i.details.points;o.correctIcon=t?"percent":e?"check":"close",o.correctIconTitle=t?"partial":e?"passed":"failed"}var r=i.answer.submittedAt,c=new Date(1e3*r.seconds+r.nanos/1e6);o.date=u.default.formatDateFullUS(c),0===i.details.points&&(delete o.draft,delete o.date,delete o.correctIcon);var l=i.answer.attempt.answer;l&&(o.answer=l)}var d=E()(Yv(o)),h=E()(Qv(o));if((o.answer||i.type===Ld.ZP.GRADE_BOOK)&&xv.isRubricAssessment(i)&&0!==i.details.points){var p=f().cloneDeep(o);p.points=xv.getPoints(!0),i.rubric&&(p.adjustValue=i.rubric.adjustValue,p.comments=i.rubric.comments);var m=E()(Xv(p));h.find(".assessments-grade-field-rubrics").append(m);var g=h.find(".assessments-grade-rubrics--content"),b=Pv.getRubricsInfo();let t=null;const n=f()(b.rubricsList).map(((n,i)=>{e&&i===b.rubricsList.length-1&&(t=n.uuid);return{rubric:n,rubricOrder:i>1?n.context?n.context.order+10:i+5e3:i}})).sort(((e,t)=>e.rubricOrder-t.rubricOrder)).filter((e=>{let{rubric:t,rubricOrder:n}=e;return!(!i.task.arePartialPointsAllowed&&n>1)&&!(t.context&&t.context.assessmentId!==i.id)})).map((e=>{let{rubric:t}=e;return t})).value();f().each(n,((e,n)=>{zv.renderRubricItem(i,n,e,g,t===e.uuid)})),h.find(".assessments-grade-rubrics--button").click(Mv.addRubric);const s=async e=>{await u.default.promise.iterateAsync(e,(function(e){return vv.Z.changeRubric(!1,{weight:e.weight,message:e.message})})),Mv.reloadStats().catch((e=>{let{message:t}=e;je.Z.error(t)}))};h.find(".assessments-grade-rubrics--options").click((()=>{Vv.Z.openDialog(s)}));var v=h.find(".assessments-grade-rubrics--adjust-input");v.blur((function(){Mv.saveAdjustPoints(v,p)})).keydown((function(e){(e.keyCode||e.which)===ny.RETURN&&Mv.saveAdjustPoints(v,p)}));var y=h.find(".assessments-grade-rubrics--adjust-textarea");y.change((function(){y.val()!==p.comments&&Mv.applyRubric(!1)})).keyup((function(){ry()}))}var w=Pv.getContainer();if(!w)return;var _=w.find(".assessments-grade-content");_.empty().append(d).append(h);const k=void 0===(null==i||null===(t=i.task)||void 0===t?void 0:t.previewType)?Ld.im.PLAIN:null==i||null===(n=i.task)||void 0===n?void 0:n.previewType;var P;o.answer&&k===Ld.im.MARKDOWN&&u.default.markdown.render(o.answer).then((function(e){_.find(".assessments-grade-field-question").html(e)})),o.question&&u.default.markdown.render(o.question).then((function(e){_.find(".assessments-grade-field-instructions").html(e)})),await Promise.all([ry(),o.rationale&&(P=o.rationale,ly(P,".assessments-grade-field-rationale"))]),k!==Ld.im.MARKDOWN&&k!==Ld.im.RAW||MathJax.Hub.Queue(["Typeset",MathJax.Hub])}function ly(e,t){var n=Pv.getContainer();if(n){var i=n.find(t);return u.default.markdown.render(e,{noReact:!0},null,[Kv.mO]).then((e=>i.html(e)))}}function dy(e){Pv.getContainer().remove(),document.removeEventListener("keydown",ay,!1),E()(window).off("beforeunload",sy),ey&&d.Z.unsubscribe(ey),ty.redrawAssessments(),Pv.setContainer(null),e()}const uy={showGrading:function(e,t,n){const i=E()(Jv());if(e.append(i),Pv.setAssessmentId(t),Nl.Z.getEduStartedAssignmentInfo()){var s=E()($v());i.find(".content").append(s),Pv.setContainer(i),ey=d.Z.subscribe("guides:grade:render_assessments",(function(e,t){cy(t)})),Mv.reloadStats().then((function(){iy(i,n)})).catch((e=>{let{message:t}=e;je.Z.error(t)}))}else n()}};var hy=n(51442);var py=n(98053),fy=n(79589);const my=I().compile('<div class="assessment-output-container">\n  <div class="codio-assessment codio-assessment-{{typeClass}}">\n    <div class="content codio-button-result {{state}} {{#if isDyslexic}}dyslexic{{/if}}">\n      <div class="output"></div>\n    </div>\n  </div>\n  <button class="btn close-btn" title="Collapse code snippet" aria-label="Collapse code snippet">\n    <i class="ss-icon">contract</i>\n  </button>\n</div>'),gy=I().compile('\n<div class="assessment-output-container">\n  <div class="codio-assessment-{{typeClass}}">\n    <div class="content codio-button-result {{state}} {{#if isDyslexic}}dyslexic{{/if}}">\n      <div class="codio-button-result-icon codio-button-result-icon-{{iconState.iconName}}" title="{{iconState.title}}"></div>\n      <div class="last-run">\n        LAST RUN <span>on {{dateToLocaleStr timestamp}}</span>\n      </div>\n      {{#exists pointsInfo}}\n      <div><strong>Score :</strong> {{pointsInfo.points}} out of {{pointsInfo.maxPoints}}</div>\n      {{/exists}}\n      {{{ output }}}\n    </div>\n  </div>\n</div>\n'),by={},vy="output",yy="diff",wy={};wy[Ld.ZP.CODE_OUTPUT_COMPARE]="compare",wy[Ld.ZP.TEST]="test",wy[Ld.ZP.SENSE_NETWORK]="sense-network";const _y=(e,t,n)=>{const i=n===yy?vy:yy,s=f().size(t)>1;let a=py.Z.get(e);return a?a.expandOutputSwitchText=s&&"Show ".concat(i):a=new py.Z(e.find(".output"),{paths:[],isExpandedOutput:!0,expandOutputSwitchText:s&&"Show ".concat(i)}),e.data("view",n),e.find(".switch-view").html("Show ".concat(i)),a.content=t[n],a},ky=(e,t,n,i)=>{d.Z.on(e,"click",".switch-view",(n=>{n.preventDefault(),Py(e,t,i)})),d.Z.on(e,"click",".close-btn",(t=>{t.preventDefault(),d.Z.unsubscribe(by[e.id]),delete by[e.id],(e=>{d.Z.off(e),e.remove()})(e),n()})),by[e.id]=d.Z.subscribe("guides:units:switch_output_view",((n,s)=>{const a=py.Z.get(e);a&&s.iframeId===a.id&&Py(e,t,i)}))},Py=(e,t,n)=>{const i=e.data("view"),s=_y(e,t,i===yy?vy:yy);return(0,fy.Uf)(s._container,n,!0).then((()=>s._refresh(s)))},Cy=(e,t,n)=>{let{outputs:i,view:s,timestamp:a,pointsInfo:o,type:r,state:c,iconState:l}=t;return hy.Z.getCurrentTheme().then((t=>{const d=hy.Z.getTheme(t),u=!f().isUndefined(d)&&d.dyslexic;e.empty();const h=E()(my({typeClass:wy[r],isDyslexic:u,state:c})),p=f().mapValues(i,(e=>gy({typeClass:wy[r],timestamp:a,showTypeSwitcher:f().size(i)>1,pointsInfo:o,output:e,isDyslexic:u,state:c,switchText:s===yy?"Show output":"Show diff",iconState:l}))),m=_y(h,p,s);ky(h,p,n,t),e.append(h),h.find(".close-btn").focus();return(0,fy.Uf)(m._container,t,!0).then((()=>m._refresh(m)))}))};var xy=n(86179),Ey=n(51751),Sy=n(34335),Iy=n(55010),Ay=[],Ty=[],jy=null;const Zy={init:function(e){jy!==e&&(jy=e,Ay=[],Ty=[])},addNext:function(e){Ty=[],f().last(Ay)!==e&&Ay.push(e)},getPrev:function(e){if(f().isEmpty(Ay))return-1;{const t=Ay.pop();return Ty.push(e),t}},getNext:function(){return-1},hasHistoryPrev:function(){return!f().isEmpty(Ay)},hasHistoryNext:function(){return!1},clear:function(e){Ay=f().filter(Ay,(function(t){return t!==e})),Ty=f().filter(Ty,(function(t){return t!==e}))}};var Oy=n(8450),Ny=n(9380).A,Dy=n(85099).tj,My=n(26059)._3,Ry=d.Z.create(n(10742));const Ly=d.Z.createSync(n(57066)),Fy=function(e,t,n,s,a){t=parseInt(t,10),f().isNaN(t)&&(t=0),this.tab=a.tab,this.step=t,this._filterSeq=0,this.container=e,this.reviewSkipDialog=null,this.collapsedPanelOnStart=!1,this.needCalculateTeacherInitialStep=A.ZP.isTeacher()&&!i.default.currentProject.isTemporary,Zy.init("player"),this.module={},Xb.ZP.getMetadata().then((e=>{this.bindEvents(),By(e)})),A.ZP.isPreview()&&A.ZP.setViewSwitcher(!0),Ry.playerOpen(A.ZP.showAsTeacher())};function By(e){const t=i.default.currentProject;if(t&&t.eduStartedAssignmentInfo&&e.hideMenu){A.ZP.showAsTeacher();u.default.isIframe()?A.ZP.showAsTeacher()?h.ZP.attach():h.ZP.detach():h.ZP.setItemsVisibility(A.ZP.showAsTeacher())}}function Uy(e){e.container.find(".navigation-container .btn-group").removeClass("open")}const qy=(e,t)=>{const n=e.container.find(".player-container"),i=e.container.find(".expand-view-container");t?(n.addClass("awayhidden"),i.removeClass("hide")):(i.addClass("hide"),n.removeClass("awayhidden"))};function Hy(e,t,n){let{id:i,focusedElId:s}=n;qy(e,!0);const a=e.container.find(".expand-view-container");uy.showGrading(a,i,(()=>{var t;qy(e,!1),null===(t=Jy(e))||void 0===t||t.focusEl(s)}))}const Gy=(e,t,n)=>{qy(e,!0);const i=e.container.find(".expand-view-container");Cy(i,n,(()=>{var t;qy(e,!1),null===(t=Jy(e))||void 0===t||t.focusEl(n.focusedElId)}))};function Wy(e){var t=e.container.find(".guides-iframe");t.length>0&&e.item.contentType===T.default.CONTENT_TYPE_MARKDOWN&&xy.ZP.updateIframeCss(t.parent())}function zy(e){var t=Jy(e);t&&(t.scripts=e.metadata.scripts)}var Vy=Fy.prototype;function Ky(e,t){if(e.item&&e._model){var n=e.item;t?(async function(e,t){var n=e.container.find("iframe.guides-iframe");if(n.length>0){var i=e.metadata.suppressPageNumbering;return xy.ZP.renderBody({metadata:e.metadata,section:t,container:n.parent(),isScrollReset:!1,suppressPageNumbering:i,useSubmitButtons:e.metadata.useSubmitButtons,useMarkAsComplete:e.metadata.useMarkAsComplete,hideBackToDashboard:e.metadata.hideBackToDashboard})}}(e,n).catch((()=>{})),function(e,t){var n=$b.Z.getLayout();bv.runSection(e.container,t,$b.Z.getPanel.bind(null,n))}(e,n)):(e.step=e.metadata.getSectionPosition(n.id),mw(e))}}function Jy(e){return Dy.get(e.container)}function Yy(e){return Sy.Z.setStep(e)}function Qy(e){var t;return e.children?(f().forEach(e.children,(function(e){if(t=Qy(e))return!1})),t):e}function Xy(e,t){var n;return f().forEach(e,(function(e){return"page"===e.type&&e.id===t?(n=e,!1):("chapter"!==e.type&&"section"!==e.type||!(n=e.id&&e.id===t?e.pageId?e:Qy(e):Xy(e.children,t)))&&void 0})),n}function $y(e){const t=Jy(e);t&&(My.removeState(t.id),t.cleanup())}function ew(e){const t=i.default.currentProject,n=e.metadata,s=A.ZP.showAsTeacher();if(!s&&f().isEmpty(n.getSections().filter((e=>!e.teacherOnly)))){return void function(e,t){const n=new Oy.Z({title:t,type:T.yj.PAGE,isFakeSection:!0});e.item=n,e.tab.setTitle("Guide"),tw(e,e.container),Ry.treeAddFilter({plugin:"guides-player",filter:"hide",path:[".codio",T.default.GUIDES_FOLDER],seq:e._filterSeq++}),xy.ZP.renderPlayerItem(e.container,e.metadata,n,{suppressPageNumbering:!0}).catch((()=>{}))}(e,"No pages are available for student")}const a=e.step,o=n.getSection(a);if(!o){let i;if(t.isBookReader){const e=Xy(t.guides.bookStructure.children,t.bookAssignmentPages[0]);i=e&&n.getSectionPosition(e.pageId)||0}else{const e=n.getSection(0);i=e?n.getSectionPosition(e.id):-1}if(i>-1)return void nw(e,i)}if(o&&o.teacherOnly&&!s){const t=ww(n,a);return void nw(e,t)}const r=function(e,t){return!f().isEqual(e.item,t)}(e,o);if(!r&&e.isRendered)return;if(f().isUndefined(o)){const t=n.sectionsCount()?"".concat(a," step not found"):"No pages found";return void e.container.append(t)}const c={metadata:e.metadata,step:e.step,prevStep:e.prevStep};return Yy(a).then((function(){if(!e.layoutApplied){if(e.blockRender=function(e,t,n){return $b.Z.set(e,t,n,A.ZP.isEditorOpen())}(c.metadata,c.step,c.prevStep),e.blockRender)return $y(e),Promise.reject(new Error("Applying layout"));e.layoutApplied=!0}e.item=o,e.tab.setTitle("Guide"),e.isRendered=!0;var t=o.contentModel.then((function(t){e._model=t,e._onContentChangeDisposable&&e._onContentChangeDisposable.dispose(),e._onContentChangeDisposable=t.onDidChangeModelContent(e._itemUpdateHandler)}));tw(e,e.container),Ry.treeAddFilter({plugin:"guides-player",filter:"hide",path:[".codio",T.default.GUIDES_FOLDER],seq:e._filterSeq++});var s=$b.Z.getLayout(),r=$b.Z.getLayoutInfo(n,e.prevStep,a);return xy.ZP.renderPlayerItem(e.container,n,o,{anchor:e.anchor,layoutInfo:r}).then((function(){zy(e),mw(e),Ow(e),function(e){var t=e.item;Iy.Z.breadcrumbsPage(t.id).then((function(t){const n=e.container.find("header small");let i="";if(t){const e=" -> ",n=f().unescape(t).split(e);let s=f().escape(n[0]);if(i='<span class="header-chapter">'.concat(s,"</span>"),n.length>1){const t=f().escape("".concat(e).concat(n[1]));i+='<span class="header-section">'.concat(t,"</span>")}}n.html(i)}))}(e),e.updateEditBtn(),bv.runSection(e.container,o,$b.Z.getPanel.bind(null,s),!0)})).then((function(){if(My.setState(Jy(e)),!i.default.ide.panels.isOpen(null,"guides-edit")){var t=o.paths;if(f().isEmpty(t))for(var s,r=a-1;r>-1;r--){const e=n.getSection(r);if(s=e.paths,!f().isEmpty(s)&&(!e.layout||e.layout.includes("-tree"))){t=s;break}}Ry.treeRemoveFilter({plugin:"guides-player-step",seq:e._filterSeq++}),t=f().filter(t,(function(e){return"{reset}"!==e})),t.length>0&&(Ry.treeAddFilter({plugin:"guides-player-step",filter:"hide",seq:e._filterSeq++}),Ry.treeAddFilter({plugin:"guides-player-step",filter:"show",path:t,seq:e._filterSeq++}),$b.Z.getCurrentLayout().includes("-tree")&&Ry.treeOpenNode(void 0,{path:t}))}Ry.sectionRendered({id:o.id,anchor:e.anchor})})).catch((()=>{})),t}))}function tw(e,t){if(0===t.children().length){var n=(u=f().filter(hy.Z.themes(),{dyslexic:!1}),h=f().filter(hy.Z.themes(),{dyslexic:!0}),p=f().range(12,31,2),xy.ZP.playSettingsMenu(u,h,p)),s=e.metadata.hideSectionsToggle,a=!0,o=i.default.ide.panels,r=o.allPanels(),c=o.isOpen(null,"filetree");(f().size(r)<2||2===f().size(r)&&c&&c.active)&&(a=!1);var l=xy.ZP.renderPlayer(n,a,s);e.unbindDDListeners&&e.unbindDDListeners(),e.unbindDDListeners=rs(l.find(".guide-preferences-container")),t.append(l),function(e,t){i.default.currentProject.examMode.forwardOnlyNavigation?e.container.find(".guides-button-prev").hide():d.Z.on(t,"click",".guides-button-prev",kw.bind(null,e));d.Z.on(t,"click",".guides-button-next",vw.bind(null,e)),d.Z.on(t,"click",".js-guides-font-plus",xw.bind(null,e,!0)),d.Z.on(t,"click",".js-guides-font-minus",xw.bind(null,e,!1)),d.Z.on(t,"click",".js-change-font",xw.bind(null,e,null)),d.Z.on(t,"click",".js-change-theme",Sw.bind(null,e)),d.Z.on(t,"click",".js-reset-style",Iw.bind(null,e)),d.Z.on(t,"click",".js-code-comments",Aw),d.Z.on(t,"click",".show-feedback",Tw),d.Z.on(t,"click",".js-reset-section",Zw.bind(null,e)),d.Z.on(t,"click","#guides-settings-mark-complete:not(.disabled)",jw),d.Z.on(t,"click",".js-view-switch",fw.bind(null,e)),d.Z.on(t,"click",".guides-button-grading",sw.bind(null,e)),d.Z.on(t,"click",".guides-button-collapse",aw.bind(null,e)),d.Z.on(t,"click",".guides-editor-code-switch",ow.bind(null,e)),d.Z.on(t,"click",".guides-player-toggle-nav-book",hw.bind(null,e)),e._resetContent=d.Z.subscribe("guides:current_files:reset",Zw.bind(null,e)),e._backToDashSubscription=d.Z.subscribe("guides:units:back_to_dash",pw.bind(null,e,Nl.Z.goToDashboard.bind(null,e))),e._gotoAssessmentHandlerId=d.Z.subscribe("guides:assessment:goto",iw.bind(null,e)),e._goToSectionHandlerId=d.Z.subscribe("guides:section:goto_title",pw.bind(null,e,Cw.bind(null,e))),e._goToSectionByIdHandlerId=d.Z.subscribe("guides:section:goto_id",(function(t,n){Cw(e,n)})),e._goToNextSectionHandlerId=d.Z.subscribe("guides:section:goto_next",pw.bind(null,e,yw.bind(null,e))),e._goToPreviousSectionHandlerId=d.Z.subscribe("guides:section:goto_prev",pw.bind(null,e,Pw.bind(null,e)));const n=i.default.currentProject;(n.isUserAssignee||n.isOpenedByTeacher)&&(e._eduStartedAssignmentLoadedHandler=d.Z.subscribe("education:edu_started_assignment_info_loaded",Nw));e.showEditButton=!n.eduStartedAssignmentInfo&&n.isUserOwner,e._closeNavigationHandler=d.Z.subscribe("guides:book:nav_close",dw.bind(null,e)),e._openNavigationHandler=d.Z.subscribe("guides:book:nav_open",uw.bind(null,e)),e._mediaInitializedHandler=d.Z.subscribe("guides:media:initialized",e.updateEditBtn.bind(e)),e._mediaClosedHandler=d.Z.subscribe("guides:media:closed",e.updateEditBtn.bind(e)),e._mediaStoppedHandler=d.Z.subscribe("guides:media:stopped",e.updateEditBtn.bind(e))}(e,l),Ow(e),e.metadata.collapsedOnStart&&a&&!e.collapsedPanelOnStart&&(e.collapsedPanelOnStart=!0,Ry.collapsePanel({id:e.tab.panel.id}))}var u,h,p}function nw(e,t,n,i){return n||e.step!==t||e.anchor!==i?(n||(e.prevStep=e.step),e.layoutApplied=!1,e.step=t,e.anchor=i,e.isRendered=!1,Xb.ZP.getMetadata().then((function(t){return e.metadata=t,ew(e)})).then((function(){e.tab&&(e.tab.filename=""+e.step),Ny.execute("layout","save"),mw(e),e.updateEditBtn()})).catch((()=>{}))):Promise.resolve()}function iw(e,t,n){Zy.addNext(e.item.id),nw(e,n.usageInfo.section.index)}function sw(e,t){t.preventDefault(),i.default.ide.open("grading","")}function aw(e,t){t.preventDefault(),Ry.collapsePanel({id:e.tab.panel.id})}function ow(e,t){t.preventDefault(),Ry.backToEdit()}function rw(e,t){const n=e.find(".guides-editor-code-switch");t?n.removeClass("hide"):n.addClass("hide")}function cw(e,t){e.showEditButton=t,rw(e.container,t)}function lw(e,t){const n=e.container.find(".guides-player-toggle-nav-book"),i=n.is(":focus");n.attr("aria-expanded",t),i&&t?E()("#codio-book-navigation").focus():i||t||e.container.find(".player-container").focus()}function dw(e){lw(e,!1)}function uw(e){lw(e,!0)}function hw(){var e=E()("#codio-book-navigation");!e.length||e.hasClass("hide")?Ry.openBookNavigation():Ry.closeBookNavigation()}function pw(e,t,n,i){var s=Jy(e);s&&i.iframeId===s.id&&t(i)}function fw(e){var t=e.container.find("#view-as-teacher").prop("checked");A.ZP.getViewSwitcher()!==t&&(A.ZP.setViewSwitcher(t),By(e.metadata),nw(e,e.step,!0),Ry.changeView(t))}function mw(e){var t=e.container,n=e.metadata,i=e.step,s=t.find(".navigator-container"),a=t.find(".navigator.guides-button-prev"),o=t.find(".navigator.guides-button-next"),r=-1!==_w(n,i)||Zy.hasHistoryPrev(),c=-1!==ww(n,i)||Zy.hasHistoryNext();function l(e,t){t?e.removeClass(T.xu).removeAttr(T.xu):e.addClass(T.xu).attr(T.xu,!0)}l(a,r),l(o,c),c||r?s.show():s.hide()}function gw(e){const t=e.container,n=t.find(".navigator.guides-button-prev"),i=t.find(".navigator.guides-button-next");!n.is("[".concat(T.xu,"]"))&&n.addClass(T.xu),!i.is("[".concat(T.xu,"]"))&&n.addClass(T.xu)}function bw(e){const t=e.container,n=t.find(".navigator.guides-button-prev"),i=t.find(".navigator.guides-button-next");!n.is("[".concat(T.xu,"]"))&&n.removeClass(T.xu),!i.is("[".concat(T.xu,"]"))&&i.removeClass(T.xu)}function vw(e,t){t.preventDefault(),E()(t.target).closest("button").hasClass(T.xu)||(gw(e),yw(e))}function yw(e){function t(){if(e.nextStepInProgress)return;const t=Zy.getNext(e.item.id),n=e.metadata.getSectionPosition(t);var i=ww(e.metadata,e.step);-1===t?Zy.addNext(e.item.id):i=n,e.nextStepInProgress=nw(e,i).finally((()=>{e.nextStepInProgress=null}))}if(i.default.currentProject.examMode.forwardOnlyNavigation){const n=e.item;My.hasDraftedNotAnsweredAssessments(n.id).then((n=>{n?e.reviewSkipDialog||(e.reviewSkipDialog=Ae.Z.showConfirm({title:"Warning",buttons:[{title:"Review Answer",type:1,onClick:function(){return e.reviewSkipDialog.close(Ae.Z.IDNO)}},{title:"Skip Question",onClick:function(){return e.reviewSkipDialog.close(Ae.Z.IDYES)}}],description:["You will not be able to return to this page but there are assessments on this page that have not been answered/submitted. ",'If you wish to review and answer/submit the assessments click "Review Answer" but to proceed to the next page without answering/submitting click "Skip Question"'].join("<br/><br/>"),doNotCloseOpened:!0,width:550,onHide:function(){e.reviewSkipDialog=null,bw(e)},onClose:function(n){e.reviewSkipDialog=null,n?t():bw(e)}})):t()})).catch((e=>{let{message:t}=e;return je.Z.error(t)}))}else t()}function ww(e,t){t++;var n=e.getSections();if(A.ZP.showAsTeacher())return t<n.length?t:-1;for(;t<n.length;){if(!n[t].teacherOnly)return t;t++}return-1}function _w(e,t){if(t--,A.ZP.showAsTeacher())return t;for(var n=e.getSections();t>-1;){if(!n[t].teacherOnly)return t;t--}return-1}function kw(e,t){t.preventDefault(),E()(t.target).closest("button").hasClass(T.xu)||(gw(e),Pw(e))}function Pw(e){if(i.default.currentProject.examMode.forwardOnlyNavigation)return;const t=Zy.getPrev(e.item.id),n=e.metadata.getSectionPosition(t);nw(e,-1!==n?n:_w(e.metadata,e.step))}function Cw(e,t){var n,i=t.sectionTitle,s=t.sectionId,a=t.optionalAnchor;if(!i&&!s)return;var o=A.ZP.showAsTeacher();if(i){var r=e.metadata.getSections();n=f().findIndex(r,(function(e){return(!e.teacherOnly||o)&&e.title.toLowerCase()===i.toLowerCase()}))}else{var c=e.metadata.getSectionById(s);n=o||!c.teacherOnly?e.metadata.getSectionPosition(s):-1}const l=e.metadata.getSectionPosition(e.item.id);-1!==n&&(n!==e.step&&-1!==l&&Zy.addNext(e.item.id),nw(e,n,void 0,a))}function xw(e,t,n){var i=Jy(e);if(!f().isUndefined(i)){var s=i.fontSize;if(f().isNull(t)){var a=E()(n.target).closest("a");s=parseInt(a.attr("data-size"),10)}else t?s+=2:s-=2;i.fontSize=s,Ow(e),Ew(s)}return n.preventDefault(),!1}function Ew(e){Ry[e?"projectSettingsUpdate":"projectSettingsRemove"]({arg:[{plugin:"editor",key:"font_size",value:e},{plugin:"terminal",key:"font_size",value:e}]})}function Sw(e,t){var n=E()(t.target).closest("a");if(!n.hasClass("active")){var i=n.attr("data-theme");hy.Z.applyTheme(i),Ow(e)}}function Iw(e){var t=Jy(e);f().isUndefined(t)||(t.fontSize=null),hy.Z.applyTheme(),Ow(e),Ew()}Vy.updateContainerAndOptions=function(e,t){this.blockRender=null,this.tab=t.tab,this.container=e,this.bindEvents()},Vy.bindEvents=function(){var e=this;this._switchToEdit=[d.Z.subscribe("command:guides:switch_to_edit:show",cw.bind(null,e,!0)),d.Z.subscribe("command:guides:switch_to_edit:hide",cw.bind(null,e,!1)),d.Z.subscribe("panel:expand:#id",cw.bind(null,e,!0))];var t=f().debounce(Wy.bind(null,this),400),n=f().debounce(zy.bind(null,this),400),i=f().debounce(Ky.bind(null,this,!0),400),s=Ky.bind(null,this,!1);this._sectionsUpdateHandler=s,this._itemUpdateHandler=i,this._styleCssChangesHandlerId=A.ZP.onFileChange(T.default.CSS_FILE,t),this._metadataChanged=[d.Z.subscribe("guides:theme_changed",t),d.Z.subscribe("settings:changed",t),d.Z.subscribe("guides:scripts_changed",(function(){n(),e._itemUpdateHandler()}))],this._sectionsUpdateHandlerId=d.Z.subscribe("guides:updated",this._sectionsUpdateHandler),this._onIframeClick=d.Z.subscribe("guides:iframe:click",Uy.bind(null,this)),this._onAssessmentGrade=d.Z.subscribe("guides:assessment:grade",Hy.bind(null,this)),this._onExpandOutput=d.Z.subscribe("guides:assessment:expandOutput",Gy.bind(null,this))};const Aw=()=>{i.default.ide.open("code-comments","")},Tw=()=>{Ry.showFeedback()};function jw(){var e=Nl.Z.getEduStartedAssignmentInfo();!!e.started.completed&&e.started.completed.completed?Ry.markAsUncompleted():Ry.markAsCompleted()}function Zw(){if(!A.ZP.isUnit())return void je.Z.info("Not possible. The project is not a course unit.");var e=function(){var e=i.default.ide.panels.getOpenedTabs("tree");return f().uniq(f().compact(f().map(e,"filename")))}();if(0===e.length)return void je.Z.info("Nothing is open for a restore.");new Promise(((t,n)=>{Ae.Z.showConfirm({title:"Restore current files content?",description:["These files content will be restored to the original content, all your"," changes will be lost: <br>",e.join("<br>")].join(""),onHide:function(){n(new Error("Restore current files content not confirmed"))},onClose:function(e){e?t():n(new Error("Restore current files content not confirmed"))}})})).then((function(){return Te.Z.saveAllAndWait()})).then((function(){return E()("body").block(),Ly.beforeFileRestore(e),Sy.Z.resetState(e)})).then((function(){je.Z.info("Files have been reset.")})).catch((function(e){let{message:t}=e;t&&je.Z.error("Reset error:"+u.default.safeHtml(t))})).finally((function(){Ly.afterFileRestore(e),E()("body").unblock()}))}function Ow(e){Nw();var t=Jy(e);f().isUndefined(t)||f().defer((function(){hy.Z.getCurrentTheme().then((function(t){e.container.find(".js-change-theme").removeClass("active"),e.container.find('.js-change-theme[data-theme="'+t+'"]').addClass("active")}));var n=t.fontSize||Ey.ZP.get("font_size");e.container.find(".js-change-font").removeClass("active"),e.container.find('.js-change-font[data-size="'+n+'"]').addClass("active")}))}function Nw(){if(i.default.currentProject.eduStartedAssignmentInfo){var e=Nl.Z.getCompleteBtnInfo();if(e){var t=E()("#guides-settings-mark-complete");if(e.show){e.disabled&&t.addClass(T.xu);var n=e.completed?"Mark as Uncompleted":"Mark as Completed",s=E()("<a>",{href:"javascript:void(0)",text:n});t.empty().append(s),t.removeClass("hide")}else t.addClass("hide")}}}async function Dw(e){var t=i.default.currentProject,n=null;if(f().each(t.bookAssignmentPages,(function(e){return!(n=Iy.Z.searchItem(e,t.guides.bookStructure))})),n)return Yy(e.getSectionPosition(n.pageId))}function Mw(){if(e=i.default.currentProject,t=e.eduStartedAssignmentInfo,n=e.exists(T.default.GUIDES_ROOT_METADATA_FILE),s=e.guides&&!f().isEmpty(e.guides.metadata),!e||!(!t&&n||s))return Promise.reject({close:!0});var e,t,n,s;if(this.blockRender)return;const a=My.fetchGuideState(),o=this;return Promise.all([this.getInitialStep(),Xb.ZP.getMetadata()]).then((function(e){let[t,n]=e;return f().isUndefined(t)||(o.step=t),My.setState(Jy(o)),o.metadata=n,ew(o)})).then((()=>a.then(Ry.onActivatePlayer)))}function Rw(e){e.isRendered=!1,xy.ZP.cleanup(),bv.pause(),e._onContentChangeDisposable&&e._onContentChangeDisposable.dispose(),e._onContentChangeDisposable=null}Vy.activate=function(){if(!this.activating)return this.activating=!0,function(e){return Promise.all([Xb.ZP.getMetadata(),e.getInitialStep()]).then((function(e){let[t,n]=e;var s=i.default.currentProject;if(s.isBookReader&&f().isUndefined(n)){n=n||0;var a=t.getSection(n);if(!a)return Dw(t);var o=Iy.Z.searchItem(a.id,s.guides.bookStructure,!0);if(!(f().isEmpty(s.bookAssignmentPages)||o&&f().includes(s.bookAssignmentPages,o.id)))return Dw(t)}}))}(this).then(Mw.bind(this)).finally((()=>{this.activating=!1}))},Vy.updateEditBtn=function(){rw(this.container,this.showEditButton)},Vy.afterActivate=function(){this.updateEditBtn()},Vy.getInitialStep=function(){return this.needCalculateTeacherInitialStep?(()=>{const e=My.fetchGuideState();return this.needCalculateTeacherInitialStep=!1,e.then((e=>{return t=e,Sy.Z.getTeacherInitialStep(t);var t}))})():Sy.Z.getStep()},Vy.beforeDeactivate=async function(){const e=Jy(this);return e?e.updateGuidesFrameData():null},Vy.deactivate=function(){Rw(this)},Vy.isCloseable=function(){const e=this.metadata;return!A.ZP.isUnit()||e&&e.allowGuideClose},Vy.beforeClose=function(){$y(this)},Vy.unbindEvents=function(){d.Z.unsubscribe(this._styleCssChangesHandlerId),d.Z.unsubscribe(this._sectionsUpdateHandlerId),d.Z.unsubscribe(this._onIframeClick),d.Z.unsubscribe(this._metadataChanged),d.Z.unsubscribe(this._switchToEdit),d.Z.unsubscribe(this._resetContent),d.Z.unsubscribe(this._backToDashSubscription),d.Z.unsubscribe(this._gotoAssessmentHandlerId),d.Z.unsubscribe(this._goToSectionHandlerId),d.Z.unsubscribe(this._goToSectionByIdHandlerId),d.Z.unsubscribe(this._goToNextSectionHandlerId),d.Z.unsubscribe(this._goToPreviousSectionHandlerId),d.Z.unsubscribe(this._eduStartedAssignmentLoadedHandler),d.Z.unsubscribe(this._closeNavigationHandler),d.Z.unsubscribe(this._openNavigationHandler),d.Z.unsubscribe(this._onAssessmentGrade),d.Z.unsubscribe(this._onExpandOutput),d.Z.unsubscribe(this._mediaInitializedHandler),d.Z.unsubscribe(this._mediaClosedHandler),d.Z.unsubscribe(this._mediaStoppedHandler)},Vy.close=function(){this.activating=!1,A.ZP.isUnit()||(h.ZP.setItemsVisibility(!0),Ry.treeRemoveFilter({plugin:"guides-player",seq:this._filterSeq++}),Ry.treeRemoveFilter({plugin:"guides-player-step",seq:this._filterSeq++})),this.item&&Sy.Z.setCurrentEditorSectionId(this.item.id),Ry.playerClose(),Rw(this),bv.cleanup(),this.unbindEvents(),this.unbindDDListeners&&this.unbindDDListeners();const{ide:e}=i.default,{isClosed:t,isClosing:n}=e;var s;this.blockRender||n||t||(Ry.renderedPlayerClose(),s=i.default.ide.panels.isOpen(void 0,"filetree"),f().isUndefined(s)&&i.default.ide.panels.addTreePanel(i.default.ide.panels.child.children[0]))},Vy.focus=function(){this.container.find("iframe.guides-iframe").focus()},d.Z.subscribe("guides:removed",(function(){const e=i.default.ide.panels.getAllOpened(void 0,"guides");f().each(e,(e=>{e&&e.panel.closeTab(e,!0).catch(u.default.error.checkErrorForIgnore)}))}));const Lw=Fy;n(62102),n(84426);var Fw=n(89506);function Bw(){var e=E()(".btn-group.open"),t=E()(".guides-edit");t.length||(t=E()(".guides")),function(e,t){var n=t.find("> .dropdown-menu");n.width(n.width())}(0,e),function(e,t){var n=t.find(".dropdown-scrollable");if(0!==n.length){var i=t.find(".dropdown-menu").css("margin-bottom").replace("px",""),s=e.outerHeight()-e.find("header").outerHeight()-i;n.css("max-height",s)}}(t,e)}function Uw(e,t){var n=t.offset(),i=parseInt(t.data("offset-x"),10)||10,s=parseInt(t.data("offset-y"),10)||30,a=n.top+s;if(e.css("top",a),e.hasClass("pull-right")){var o=E()("body").outerWidth()-n.left+i;e.css("right",o)}else{var r=n.left+i;e.css("left",r)}}function qw(e,t){var n=E()(t.target);n.attr("aria-expanded",!0);var i=n.closest(".btn-group");if(Bw(),i.hasClass("dropdown-append-to-body")){var s=E()("body"),a=s.find(".dropdown-to-body");a.length||(a=E()("<div />"),s.append(a)),a.removeClass(),a.addClass("dropdown-to-body guides-edit guides-play"),a.addClass(i.attr("class").replace("dropdown-append-to-body",""));var o=i.find("> .dropdown-menu");Uw(o,i),a.append(o),a.data("parent",i)}}function Hw(e){var t=E()(e.target);t.attr("aria-expanded",!1);var n=t.closest(".btn-group");if(n.hasClass("dropdown-append-to-body")){var i=E()("body").children(".dropdown-to-body");n.append(i.children()),i.remove()}}function Gw(){E()("body").find(".btn-group.open").each((function(e,t){(t=E()(t)).hasClass("dropdown-append-to-body")||Bw(),t.hasClass("dropdown-to-body")&&Uw(t.children().first(),t.data("parent"))}))}const Ww=function(e){d.Z.on(e,"dropdown.open",".dropdown-toggle",qw.bind(null,e)),d.Z.on(e,"dropdown.close",".dropdown-toggle",Hw),d.Z.on(window,"resize.panels",Gw)};var zw=n(83668),Vw=n(98670),Kw=n(53425),Jw=n(83933);const Yw=async()=>{let e;const t=u.default.promise.deferred(),n="".concat(location.origin,"/home/sandboxes/browser/").concat((()=>{var e,t;const{currentProject:n}=i.default;return(null===(e=n.authorAssignment)||void 0===e||null===(e=e.course)||void 0===e?void 0:e.organizationId)||(null===(t=n.course)||void 0===t?void 0:t.organizationId)})()),s='<iframe src="'.concat(n,'" style="width: 100%; height: 100%; border: none;"></iframe>');return window.addEventListener("message",(n=>{var i,s;if(!n.data)return;let a=null;try{a=JSON.parse(n.data)}catch{}a&&"sandboxSelect"===(null===(i=a)||void 0===i?void 0:i.action)&&(t.resolve(a.data),null===(s=e)||void 0===s||s.close())}),!1),e=new Jw.Z({title:"Select a sandbox",content:s,width:1e3,height:600,buttons:Jw.Z.MB_CANCEL,onClose:function(){e=null,t.resolve(null)}}),t.promise};class Qw{constructor(e,t,n,i){this.metadata=t,this.section=n,this.container=e,this.options=i;const s=Kw.XA(this.metadata,this.section);this.form=xy.ZP.settingsForm(zw.v.CONFIGURE_LAYOUT,s),this._bindEvents(),this.container.append(this.form)}static showConfirmation(e){return new Promise((t=>{Ae.Z.showConfirm({title:"Confirmation",buttons:Ae.Z.MB_OKCANCEL,description:e,onClose:function(e,n){t(n===Ae.Z.IDOK)}})}))}_addFileHandler(e){return e=E()(e),t=>{t.preventDefault(),this._addFileToOpenTab(e)}}_addFileToOpenTab(e,t,n){n=f().isNumber(n)?n:Kw.GO(e);const i=Kw.to(Kw.Tj(e)),s=e.find("ul.files"),a=E()(xy.ZP.fileInput({panel:n,panelsData:i})).hide();a.find(".args input").val(t||""),e.trigger("change"),s.append(a),a.velocity("fadeIn",{display:"flex",complete:function(){s.scrollTop(s[0].scrollHeight+120)}})}_removeFileHandler(e){const t=e.closest("form");e.velocity("fadeOut",{complete:function(){e.remove(),t.trigger("change")}})}_tabTypeChangeHandler(e){const t=e.closest("form");t.trigger("change");const n=e.closest(".file-elem"),i=e.attr("data-type"),s=n.find(".input-container"),a=Kw.sW(n),o=Kw.to(Kw.Tj(t));s.empty(),s.append(xy.ZP.inputArgs(i,{...a,panelsData:o})),e.closest(".input-switch-type").find("input").val(i);const r=xy.ZP.fileInput({type:i}).find(".switch-file-type").html();n.find(".switch-file-type").html(r)}_updateOpenedTabs(e,t,n){const i=Kw._6(e),s=Kw.GO(e),a=Kw.H8(e),o=Kw.H8(t),r=e.find(".file-elem");if(r.length>i-1){r.filter((function(){const e=E()(this),t=e.find(".file-type").val();return("file"===t||"preview"===t)&&""===f().trim(e.find(".args input").val())})).each((function(){if(E()(this).remove(),e.find(".file-elem").length<=i-1)return!1}))}const c=t=>{const n=t?t.siblings():e.find(".file-elem");return f().map(n.find(".panel select"),(e=>parseInt(E()(e).val(),10)))},l=Kw.hO(n);e.find(".file-elem").each((function(){const e=E()(this);let t=parseInt(e.find(".panel select").val(),10);if(t===o)t=a;else if(!f().includes(l,t)){const n=c(e),i=f().difference(l,n);t=i.length?i[0]:s}const i=xy.ZP.panelSelector({panel:t,panelsData:Kw.to(n)});e.find(".layout-file-panel-selector").replaceWith(i)}));const d=c(),u=f().difference(l,d),h=e.find(".file-elem").length;if(h<i-1)for(let t=0;t<i-h-1;t++)this._addFileToOpenTab(e,"",u[t])}_onLayoutChange(e,t){const n=Kw.Yv(t,Kw.vE(e),Kw.Y2(e)),i=Kw.Tj(e);this._updateOpenedTabs(e,n,i)}_addFolderToPath(e){const t=this.form,n=t.find(".show-file-tree-list"),i=xy.ZP.renderPathsItem(e);n.append(i),t.trigger("change")}_bindEvents(){const{form:e}=this,t=this;d.Z.on(e,"change",(()=>{e.data("changed",!0)})),d.Z.on(e,"click",".add-btn",this._addFileHandler(e)),d.Z.on(e,"click",".remove-btn",(function(e){e.preventDefault(),t._removeFileHandler(E()(this).closest(".file-elem"))})),d.Z.on(e,"click",".switch-file-type .dropdown-menu a",(function(){t._tabTypeChangeHandler(E()(this))})),d.Z.on(e,"change","#guidesOnLeft",(function(){const n="configure-layout--guides-on-left";this.checked?e.addClass(n):e.removeClass(n);const i=Kw.Yv(Kw.p8(e),Kw.vE(e),!this.checked),s=Kw.Tj(e);t._updateOpenedTabs(e,i,s)})),d.Z.on(e,"click",".browse-sandbox",(async function(){const e=E()(this).closest(".input-container"),t=await Yw();t&&(e.find('input[name="track"]').val(t.trackId),e.find('input[name="sandbox"]').val(t.sandboxId))})),(0,Vw.Y)(e,"#close-all",".js-close-terminal-session-container"),(0,Vw.Y)(e,"#showFileTree",".js-show-folders"),d.Z.on(e,"click",".page-settings-layout-item-container",(function(){const n=E()(this),i=n.closest(".page-settings-layout-list").find(".page-settings-layout-item-container.layout-active");i.removeClass("layout-active"),n.addClass("layout-active"),t._onLayoutChange(e,i.data("layout"),n.data("layout"))})),d.Z.on(e,"click",".show-file-tree-input-add",(function(){const e=E()(this),n=e.closest(".show-file-tree-input-container").find("input");t._addFolderToPath(n.val()),n.val(""),e.prop("disabled",!0)})),d.Z.on(e,"input",".show-file-tree-input-container input",(function(){const e=E()(this);e.closest(".show-file-tree-input-container").find(".show-file-tree-input-add").prop("disabled",""===f().trim(e.val()))})),d.Z.on(e,"click",".show-file-tree-list-item-remove",(function(){E()(this).closest(".show-file-tree-list-item").remove()})),d.Z.on(e,"submit",(e=>{var t;e.preventDefault(),(null===(t=this.options)||void 0===t?void 0:t.onSubmit)&&this.options.onSubmit()})),d.Z.on(e,"click","#cancel-btn",(e=>{var t;e.preventDefault(),(null===(t=this.options)||void 0===t?void 0:t.onCancel)&&this.options.onCancel()}))}async fileDrop(e){const t=E()(e.event.target);if(t.hasClass("open-tabs-dnd-area")){if("dir"===e.type)return;await Qw.showConfirmation("Do you want the file to be added to Open Tabs?")&&this._addFileToOpenTab(this.form,e.path)}if(t.hasClass("show-folders-dnd-area")){await Qw.showConfirmation("Do you want the path to be added to Show Folders?")&&this._addFolderToPath(e.path)}t.hasClass("js-input-drop-target")&&t.val(e.path)}isChanged(){return this.form.data("changed")}collect(){return Kw.KM(this.section,this.form)}destroy(){this.form.remove(),this.form=null,this.section=null,this.container.empty(),this.container=null}}const Xw=Qw;const $w=class{constructor(e,t,n){this.metadata=t,this.container=e,this.options=n;const i=(e=>({theme:e.theme,scripts:e.scripts.join("\n"),suppressPageNumbering:e.suppressPageNumbering,hideMenu:e.hideMenu,allowGuideClose:e.allowGuideClose,useSubmitButtons:e.useSubmitButtons,useMarkAsComplete:e.useMarkAsComplete,collapsedOnStart:e.collapsedOnStart,hideSectionsToggle:e.hideSectionsToggle,hideBackToDashboard:e.hideBackToDashboard,protectLayout:e.protectLayout}))(this.metadata);this.form=xy.ZP.settingsForm(zw.v.GLOBAL,i),this._bindEvents(),this.container.append(this.form)}_bindEvents(){const{form:e}=this;d.Z.on(e,"change",(()=>{e.data("changed",!0)})),d.Z.on(e,"submit",(e=>{var t;e.preventDefault(),(null===(t=this.options)||void 0===t?void 0:t.onSubmit)&&this.options.onSubmit()})),d.Z.on(e,"click","#cancel-btn",(e=>{var t;e.preventDefault(),(null===(t=this.options)||void 0===t?void 0:t.onCancel)&&this.options.onCancel()}))}isChanged(){return this.form.data("changed")}collect(){return{theme:(e=this.form).find("#theme").val(),scripts:e.find("#scripts").val(),suppressPageNumbering:!(0,Vw.w)(e,"#page-numbering"),hideMenu:(0,Vw.w)(e,"#hide-menu"),allowGuideClose:(0,Vw.w)(e,"#allow-guide-close"),useSubmitButtons:(0,Vw.w)(e,"#use-submit-buttons"),useMarkAsComplete:(0,Vw.w)(e,"#use-mark-as-complete"),collapsedOnStart:(0,Vw.w)(e,"#collapsed-on-start"),hideSectionsToggle:(0,Vw.w)(e,"#hide-sections-toggle"),hideBackToDashboard:(0,Vw.w)(e,"#hide-back-to-dashboard"),protectLayout:(0,Vw.w)(e,"#protect-layout")};var e}destroy(){this.form.remove(),this.form=null,this.metadata=null,this.container.empty(),this.container=null}};var e_=n(36008),t_=n(72523).Yn,n_=n(72523).Cs,i_=n(72523).Tb,s_=null;function a_(){var e=i.default.currentProject.files({isCaseSensitive:!1,filesSeparate:!0});return u.default.promise.defer().then((function(){var t=[],n=e.length;return f().forEach(e,(function(e){var i=e.path.toLowerCase(),s=u.default.path.getFileExtension(i);f().startsWith(i,t_+"/")&&f().includes(n_,s)&&(e.lowerPath=i,e.lowerName=e.name.toLowerCase(),e.selfScore=n-1,t.push(e))})),t}))}function o_(e){e.addClass("media-source-dlg"),e.append(xy.ZP.renderMediaUploadContainer());var t=e.find(".media-source-upload-input");d.Z.on(t,"change",r_),d.Z.on(e,"click",".media-source-btn",(function(e){e.preventDefault(),t.click()}))}function r_(e){if(e.preventDefault(),!f().isEmpty(this.files)){var t=this.files[0];if(!function(e){var t=u.default.path.getFileExtension(e.name);return f().includes(n_,t)?!((e.size||e.fileSize)>i_&&(je.Z.error("You exceed maximum file size."),1)):(je.Z.error("File should be .mp3 or .ogg"),!1)}(t))return;!function(){var e=e_.Z.getDialog();if(e){e_.Z.disable(),e.content().find(".media-source-btn").text("Uploading..."),e.preventClosing(!0)}}(),function(e){var t=Qe.validateItem(e.name,t_);if(!t){var n=u.default.path.makePath(t_,e.name);return i.default.currentProject.uploadFile(n,e).then((function(){return n}))}return Promise.reject(new Error(t))}(t).then((function(e){s_(e),e_.Z.close()})).catch((function(e){let{message:t}=e;!function(){var e=e_.Z.getDialog();if(e){e_.Z.enable(),e.content().find(".media-source-btn").text("Upload File"),e.preventClosing(!1)}}(),je.Z.error(t)}))}}d.Z.subscribe("project:close",(function(){e_.Z.close()}));const c_={open:function(e){var t={title:"Select or Upload File",searchPlaceholder:"enter first few letters of a file to select...",onSelect:s_=e,getData:a_,beforeRender:o_};e_.Z.open(t)}};var l_=n(72523),d_=n(72523).aI,u_=n(72523).Yn,h_=null,p_=null,f_=!1;function m_(e){e.preventDefault();var t=E()(this);c_.open((function(e){var n=e.substr(u_.length+1);t.closest(".media-source-container").find(".media-source-txt-input").val(n),E_(n),h_.play()}))}function g_(e){e.preventDefault();var t=E()(this).closest("form").trigger("change");t.trigger("change"),b_(t.find(".media-actions-container"),function(e){const t=e.data("layout");return{time:h_?Math.round(h_.currentTime()):0,panel:Kw.GO(t)}}(t))}function b_(e,t){const n=e.closest("form").data("layout"),i=Kw.to(n);var s=xy.ZP.renderMediaActionItem(t,i),a=t.type||d_.FILE_OPEN;s.removeClass().addClass("media-action-item media-action-item-"+a);var o=s.find(".media-action-item-type");d.Z.on(o,"change",(function(e){e.preventDefault();var t=E()(this).val();s.removeClass().addClass("media-action-item media-action-item-"+t);var n=xy.ZP.renderMediaActionTypeFields(t,null,i);s.find(".media-item-action-type-fields").empty().append(n)})),d.Z.on(s.find(".media-action-item-time"),"change",v_),e.append(s),h_&&w_()}function v_(){var e=E()(this).val();f().includes(e,"_")||w_()}function y_(){var e=I_(p_.find(".media-actions-container"),!0);return f().compact(e)}function w_(){!function(e){h_.markers.reset(e)}(y_())}function __(e){e.preventDefault(),E()(this).closest("form").trigger("change"),E()(this).closest(".media-action-item").remove(),w_()}function k_(e,t){u.default.addErrorToInput(e,{title:t,noIcon:!0})}function P_(e,t){k_(e,f().capitalize(t)+" is required")}function C_(e){var t=e.find("[name=time]").val();if(!f().includes(t,"_"))return{time:t=ku().duration("00:"+t).asSeconds()}}function x_(e){var t={action:e.find("[name=action]"),tabType:e.find("[name=tab_type]"),time:e.find("[name=time]"),type:e.find(".media-action-item-type"),content:e.find("[name=content]"),panel:e.find("[name=panel]"),reference:e.find("[name=reference]"),lines:e.find("[name=lines]")},n=t.panel.val(),i={action:t.action.val(),tabType:t.tabType.val(),time:t.time.val(),type:t.type.val(),content:t.content.val()||"",panel:n?parseInt(n,10):void 0,reference:t.reference.val(),lines:parseInt(t.lines.val(),10)};if(f().includes(i.time,"_"))k_(t.time,"Wrong time format");else if(i.time=ku().duration("00:"+i.time).asSeconds(),function(e,t){var n=!f().isUndefined(t.panel)&&isNaN(t.panel),i=[d_.PAUSE,d_.CLOSE_ALL,d_.TERMINAL_CLOSE];if(!f().includes(i,t.type)&&n)return k_(e.panel,"Panel should be a number or empty"),!1;switch(t.type){case d_.FILE_OPEN:case d_.FILE_CLOSE:if(!t.content)return P_(e.content,"filename"),!1;break;case d_.RUN_COMMAND:if(!t.content)return P_(e.content,"command"),!1;break;case d_.HIGHLIGHT:if(!t.content)return P_(e.content,"filename"),!1;if(!t.reference&&!f().isNumber(t.lines))return k_(e.reference,"Lines or Reference is required"),!1}return!0}(t,i))return f().omitBy(i,f().isUndefined)}function E_(e,t){p_.find(".media-player").removeClass("media-disabled"),i.default.currentProject.eduStartedAssignmentInfo||(t=t||h_).src(iv.getMediaPlayerSource(e))}function S_(){h_&&(h_.markers.destroy(),h_.dispose(),h_=null),p_=null}function I_(e,t){var n=[],i=t?C_:x_;return e.find(".media-action-item:not(.media-action-item-header)").each((function(){n.push(i(E()(this)))})),n}Jb.default.registerPlugin("markers",Qb()),d.Z.subscribe("guides:settings:close",(function(){S_()}));const A_={renderMediaForm:function(e,t,n){const{media:i}=n,s=t.getLayout(n.id),a=i?i.type:l_.vK.AUDIO;S_(),p_=e.find("#media");var o=xy.ZP.renderMediaForm(i,a);o.data("layout",s);var r=i?i.actions:[],c=o.find(".media-actions-container");f().forEach(r,(function(e){b_(c,e)})),p_.find(".media-form").empty().append(o).show(),u.default.promise.defer().then((function(){!function(e){h_&&h_.dispose(),h_=(0,Jb.default)("editor_media_player",{},(function(){p_.find(".media-player").removeClass("invisible"),e?E_(e.source,this):(p_.find(".media-player").addClass("media-disabled"),f_=!0),this.volume(.5),this.markers({markerTip:{display:!1},markers:y_()})}))}(i)}));var l=p_.find("form");return function(e){d.Z.on(e,"click",".add-action-btn",g_),d.Z.on(e,"click",".media-action-item-remove-btn",__),d.Z.on(e,"click","input.media-source-input",m_),d.Z.on(e,"click",".media-source-txt-input, .change-source-btn",(function(t){t.preventDefault(),e.find(".media-source-input").click()})),d.Z.on(e,"click.disabled",".media-player-disabled",(function(e){e.preventDefault(),e.stopImmediatePropagation()}))}(l),function(e){var t="shown.bs.tab.guides.media",n=e.find('a[data-toggle="tab"]');d.Z.off(n,t),d.Z.on(n,t,(function(){"#media"===E()(this).attr("href")&&h_&&!f_&&(h_.load(),d.Z.off(n,t))}))}(e),l},collect:function(e){var t={type:e.find("#type"),name:e.find("#name"),source:e.find("#sourceTxt"),disabled:e.find("#disabled")},n={type:t.type.val(),name:t.name.val(),source:t.source.val(),disabled:t.disabled.is(":checked")};if(n.name)if(n.source){var i=I_(e);if(!f().some(i,f().isEmpty))return n.actions=i,n}else P_(t.source,"source");else P_(t.name,"name")}};var T_=n(57836);const j_=I().compile('<div class="blueprints-settings-update-item" data-id="{{id}}" data-name="{{name}}">\n    <button class="blueprints-settings-delete-item-action remove-btn icon-button" aria-label="Delete Blueprint" title="Delete Blueprint">\n        <span class="iconify-inline" data-icon="@codio:mdi:trash-can-outline"></span>\n    </button>\n    <div class="blueprints-settings-update-item-name blueprints-settings-select-item-name">\n        {{name}}\n    </div>\n</div>\n');const Z_=class{constructor(e,t,n,i){this.metadata=t,this.container=e,this.options=i,this.section=n,this.form=xy.ZP.settingsForm(zw.v.BLUEPRINTS,{}),this._bindEvents(),this.container.append(this.form),this._renderList().catch(console.error)}_bindEvents(){const{form:e}=this;d.Z.on(e,"click","#cancel-btn",(e=>{var t;e.preventDefault(),(null===(t=this.options)||void 0===t?void 0:t.onCancel)&&this.options.onCancel()})),d.Z.on(e,"click","#create-blueprint-btn",(async t=>{const n=f().trim(e.find(".blueprints-settings-create-new-name").val());if(0===n.length||n.length>50)return void je.Z.error("Name should be between 1 and 50 characters long.");t.preventDefault();const i=await T_.Z.getInstance().load(),s=f().find(i,(e=>f().trim(e.name).toLowerCase()===n.toLowerCase()));s?Ae.Z.showConfirm({title:"Update blueprint confirmation",description:"Please confirm that you want to update the blueprint with the name: ".concat(n),onClose:e=>(e&&this.performUpdate(n,s.id).catch(console.error),!0)}):this.performUpdate(n).catch(console.error)}))}_disableAllButtons(){this.form.find(".blueprints-settings-container").find(".btn").prop("disabled",!0)}_enableAllButtons(){this.form.find(".blueprints-settings-container").find(".btn").prop("disabled",!1)}async _renderList(){const e=await T_.Z.getInstance().load(),t=this.container.find(".blueprints-settings-update-existing");t.empty(),f().isEmpty(e)?t.append("<strong>You do not have any blueprints yet.</strong>"):(f().each(e,(e=>{const n=j_(e);t.append(n)})),this._bindItemEvents())}_bindItemEvents(){const{form:e}=this;d.Z.on(e,"click",".blueprints-settings-delete-item-action",(e=>{e.preventDefault();const t=E()(e.currentTarget).closest(".blueprints-settings-update-item"),n=t.data("id"),i=t.data("name");Ae.Z.showConfirm({title:"Delete blueprint confirmation",description:"Please confirm that you want to delete the blueprint with the name: ".concat(i),onClose:e=>(e&&this.performDelete(n).catch(console.error),!0)})})),d.Z.on(e,"click",".blueprints-settings-select-item-name",(t=>{t.preventDefault();const n=E()(t.currentTarget).closest(".blueprints-settings-update-item").data("name");e.find(".blueprints-settings-create-new-name").val(n)}))}async performDelete(e){this._disableAllButtons();try{await T_.Z.getInstance().delete(e),await this._renderList()}catch(e){je.Z.error(e.message)}this._enableAllButtons()}async performUpdate(e,t){this._disableAllButtons();try{await T_.Z.getInstance().save(this.section,e,t),await this._renderList()}catch(e){je.Z.error(e.message)}this._enableAllButtons()}isChanged(){return!1}collect(){return{}}destroy(){this.form.remove(),this.form=null,this.metadata=null,this.container.empty(),this.container=null}};let O_=null,N_=null,D_=null,M_=null,R_=null,L_=null,F_=null,B_=function(){},U_=function(){};function q_(){switch(O_){case zw.v.CONFIGURE_LAYOUT:return R_.collect();case zw.v.GLOBAL:return L_.collect();case zw.v.MEDIA:return{media:A_.collect(N_.find("#media form"))};default:return}}const H_=async e=>{try{await B_(e),G_()}catch{}},G_=()=>{W_(),O_=null,N_=null,D_=null,M_=null,U_()},W_=function(){var e,t,n;null===(e=R_)||void 0===e||e.destroy(),R_=null,null===(t=L_)||void 0===t||t.destroy(),L_=null,null===(n=F_)||void 0===n||n.destroy(),F_=null;const i=N_.find("form");d.Z.off(i),i.remove()};function z_(e){O_=e,W_();const t=N_.find("#".concat(e));switch(e){case zw.v.MEDIA:{const e=A_.renderMediaForm(N_,D_,M_);d.Z.on(t,"click","#cancel-btn",G_),d.Z.on(e,"submit",(e=>{e.preventDefault();const t=q_();t.media&&H_(t)}));break}case zw.v.ASSESSMENTS:t.find(".assessment-editor").length&&(t.find(".assessment-editor").remove(),Rd.R0.renderAssessmentsList()),d.Z.on(t,"click","#cancel-btn",G_);break;case zw.v.CONFIGURE_LAYOUT:R_=new Xw(t,D_,M_,{onSubmit:()=>H_(R_.collect()),onCancel:G_});break;case zw.v.GLOBAL:L_=new $w(t,D_,{onSubmit:()=>H_(L_.collect()),onCancel:G_});break;case zw.v.BLUEPRINTS:F_=new Z_(t,D_,M_,{onSubmit:()=>H_(F_.collect()),onCancel:G_})}}const V_=()=>{if(O_===zw.v.CONFIGURE_LAYOUT)return R_.isChanged();if(O_===zw.v.GLOBAL)return L_.isChanged();if(O_===zw.v.BLUEPRINTS)return F_.isChanged();const e=O_===zw.v.ASSESSMENTS?".assessment-editor":"form";return N_.find("#".concat(O_)).find(e).data("changed")};async function K_(e){const t=O_===zw.v.ASSESSMENTS,n=t?".assessment-editor":"form",i=e.find("#".concat(O_)).find(n);if(!V_())return!0;const s=await new Promise((e=>{const t=new Ae.Z({title:"Warning",content:E()("<h4>You have unsaved changes. Do you wish to save these?</h4>"),icon:"alert",width:500,buttons:[{title:"Yes",type:1,onClick:function(){return t.close(Ae.Z.IDOK)}},{title:"No",onClick:function(){return t.close(Ae.Z.IDCANCEL)}}],onClose:function(t){setTimeout((function(){e(t===Ae.Z.IDOK)}),100)}});t.preventClosing(!0)}));if(s){if(t)return Rd.R0.submitAssessment(i,!1,!1);{const e=await q_();return await B_(e),!0}}return!0}const J_={show:function(e,t,n,i){t.find(".settings").remove(),B_=i.saveFunction,U_=i.closeFunction,D_=n.metadataLink,M_=n.sectionLink,N_=xy.ZP.renderSettings(),Rd.R0.init(N_.find("#".concat(zw.v.ASSESSMENTS)),n.editor,D_,M_,U_),n.assessment||Rd.R0.renderAssessmentsList(),E()(t).append(N_),Ww(N_),z_(e),N_.find("#".concat(e)).removeClass("hide"),n.assessment&&Rd.R0.renderAssessmentEditor(n.assessment,!1)},changeSettingsType:e=>{K_(N_).then((function(t){t&&(z_(e),N_.find(".settings-container").addClass("hide"),N_.find("#".concat(e)).removeClass("hide"))}))},checkUnsaved:function(){return K_(N_)},activate:()=>{Rd.R0.activate()},deactivate:()=>{Rd.R0.cleanup()},getSettingsType:()=>O_,fileDrop:e=>{var t;switch(O_){case zw.v.ASSESSMENTS:var n;null!==(n=N_)&&void 0!==n&&n.find(".assessment-editor").length&&Rd.R0.fileDrop(e.path,e.event);break;case zw.v.CONFIGURE_LAYOUT:null===(t=R_)||void 0===t||t.fileDrop(e)}}};var Y_=n(50352),Q_=n(88009),X_=n(6989),$_=n(46544),ek=n(4418);var tk=n(91296);const nk=I().compile('<div class="scrollable generate-form-container">\n  <div class="generate-content generate-form">\n    <h3 class="generate-form-title">Generate content</h3>\n    <form action="/" method="post" class="generate-form-form">\n      <fieldset class="generate-form-prompt-container">\n        <label class="generate-form-prompt-label">Topic</label>\n        {{#if topic.courseName }}\n          <div><strong>Course: </strong>{{topic.courseName}}</div>\n        {{/if}}\n        {{#if topic.moduleName }}\n        <div><strong>Module: </strong>{{topic.moduleName}}</div>\n        {{/if}}\n        {{#if topic.assignmentName }}\n        <div><strong>Assignment: </strong>{{topic.assignmentName}}</div>\n        {{/if}}\n        {{#if topic.pageName }}\n        <div><strong>Page: </strong>{{topic.pageName}}</div>\n        {{/if}}\n      </fieldset>\n      <fieldset class="generate-form-prompt-container">\n        <label for="generate-content-requirements" class="generate-form-prompt-label">Optional requirements:</label>\n        <textarea\n          id="generate-content-requirements"\n          class="generate-form-prompt-text" rows="4"\n          placeholder="Add any requirements you have for the output.\n\nExample:\nProvide code samples for multiple functional programming languages."></textarea>\n      </fieldset>\n    </form>\n    <div class="generate-form-controls">\n      <button type="button" class="btn btn-primary generate-form-generate-button">Generate</button>\n    </div>\n    <hr class="generate-form-spacer" />\n    <div class="generate-form-preview-container">\n      {{> aEditorGenContentPreview}}\n    </div>\n    <footer class="generate-form-footer">\n      <button type="button" class="btn btn-primary generate-form-save-button" disabled>Approve</button>\n      <button type="button" class="btn btn-default generate-form-cancel-button">Cancel</button>\n    </footer>\n  </div>\n</div>\n'),ik=I().compile(tk);let sk=[];const ak=e=>e.find(".generate-content").data("index"),ok=e=>{const t=ak(e);return f().isNumber(t)?sk[t]:null};const rk=async e=>lk(e,$_.rK.DOWN),ck=async e=>lk(e,$_.rK.UP),lk=async(e,t)=>{const n=ok(e);if(!n)return;const s=i.default.currentUser.getAccountUid(),{runId:a}=n;try{const n=await $_.dK(s,a,t);((e,t)=>{const n=i.default.currentUser.getAccountUid(),s=f().findIndex(sk,(t=>t.runId===e));s>-1&&(sk[s].upVote=t.upVotesList.includes(n),sk[s].downVote=t.downVotesList.includes(n))})(n.runId,n),pk(e)}catch(e){throw new Error(e.message)}},dk=(e,t,n,i)=>{sk=[],((e,t,n,i)=>{const s=(t,n)=>{t.preventDefault();const i=ak(e);e.find(".generate-content").data("index",i+n),pk(e)};d.Z.on(e,"click",".generate-form-preview-arrow-back",(function(e){s(e,-1)})),d.Z.on(e,"click",".generate-form-preview-arrow-forward",(function(e){s(e,1)})),d.Z.on(e,"click",".generate-form-generate-button",(function(n){n.preventDefault(),hk(e,t)})),d.Z.on(e,"click",".generate-form-save-button",(function(t){t.preventDefault();const s=ok(e);e.remove(),n(),i.resolve(null==s?void 0:s.content)})),d.Z.on(e,"click",".generate-form-cancel-button",(function(t){t.preventDefault(),e.remove(),n(),i.resolve(null)})),d.Z.on(e,"click",".generate-form-upvote-btn",(function(t){t.preventDefault(),ck(e)})),d.Z.on(e,"click",".generate-form-downvote-btn",(function(t){t.preventDefault(),rk(e)}))})(e,t,n,i)},uk=(e,t,n,s,a)=>{const o=u.default.promise.deferred(),r=function(e){var t,n;const{authorAssignment:s}=i.default.currentProject;if(!s)return{};const{assignment:a,course:o,unit:r}=s,c=(null==o||null===(t=o.details)||void 0===t?void 0:t.name)||"",l=(null==r?void 0:r.name)||"",d=(null==a||null===(n=a.settings)||void 0===n?void 0:n.name)||"";return{pageName:!e||f().includes(e.toLowerCase(),"new page")?"":e,courseName:c,moduleName:l,assignmentName:d}}(null==e?void 0:e.title),c=E()(nk({topic:r}));return f().isFunction(n)&&n(),t.append(c),f().isFunction(s)&&s(),dk(c,r,a,o),o.promise},hk=async(e,t)=>{(e=>{const t=e.find(".generate-form");t.addClass("generate-form--progress"),t.find(".generate-form-generate-button").prop("disabled",!0).html("Generating..."),e.find(".generate-form-save-button").prop("disabled",!0),t.find(".generate-form-form :input").prop("disabled",!0)})(e);try{const n=e.find("#generate-content-requirements").val(),i=await fk((e=>{let t=[];const{pageName:n,courseName:i,moduleName:s,assignmentName:a}=e;return i&&t.push("Course: ".concat(i)),s&&t.push("Module: ".concat(s)),a&&t.push("Assignment: ".concat(a)),n&&t.push("Page: ".concat(n)),t.join("")})(t),n);((e,t,n)=>{const i=e.find("#generate-content-requirements").val();sk.push({requirements:i,content:t,runId:n}),e.find(".generate-content").data("index",sk.length-1)})(e,i.content,i.runId),pk(e)}catch(e){je.Z.error("Failed to generate content: ".concat(e.message))}finally{(e=>{const t=e.find(".generate-form");t.removeClass("generate-form--progress");const n=!f().isEmpty(sk);t.find(".generate-form-generate-button").prop("disabled",!1).html(n?"Regenerate":"Generate"),n&&e.find(".generate-form-save-button").prop("disabled",!1),t.find(".generate-form-form :input").prop("disabled",!1)})(e)}},pk=e=>{const t=ok(e),n=ak(e);if(!t)return;e.find("#generate-content-requirements").val(t.requirements);const i=e.find(".generate-form-preview-container"),s=E()(ik({content:t.content,disableBack:0===n,disableForward:n===sk.length-1,upVote:t.upVote,downVote:t.downVote}));s.find(".js-markdown").each(((e,t)=>{const n=E()(t);n.html(u.default.markdown.renderSync(n.text()))}));const a=i.find(".generate-form-preview");a.length?a.replaceWith(s):i.append(s)},fk=async(e,t)=>{const n=(0,ek.pi)();return $_.Bq(i.default.currentProject.guid,e,t,n)};var mk=n(75036),gk=n(9380).A,bk=n(85099).tj,vk=d.Z.create(n(28755)),yk=d.Z.create(n(10742)),wk=n(26059)._3,_k=n(26059).R0,kk=u.default.KeyCode;const Pk=40,Ck=new Wn.yO(""),xk=it.Z.get("ecornellFibEnabledInOrgs")||[];var Ek=function(e,t,n,i,s){f().isEmpty(t)||(t=f().toFinite(t)),f().isFinite(t)||(t=0),this.markdownEditor=s.markdownEditor,this.step=t,this._filterSeq=0,this.container=e,this.tab=s.tab,this.view=n,Zy.init("editor");var a=f().debounce(Ak.bind(null,this),400);this._styleCssChangesHandlerId=A.ZP.onFileChange(T.default.CSS_FILE,a),this._metadataChanged=d.Z.subscribe("guides:theme_changed",a),this._onIframeClick=d.Z.subscribe("guides:iframe:click",Ik.bind(null,this)),this._sectionAssessmentIds=[],this._sectionAssignmentsInlineWidgets=[],yk.treeAddFilter({plugin:"guides-editor",filter:"show",seq:this._filterSeq++}),yk.treeAddFilter({plugin:"guides-editor",filter:"show",path:[".codio",T.default.GUIDES_FOLDER],seq:this._filterSeq++})},Sk=Ek.prototype;function Ik(e){e.container.find("nav.toolbar .btn-group").removeClass("open")}function Ak(e){e.metadata&&e.metadata.theme&&e.step&&e.step.contentType===T.default.CONTENT_TYPE_MARKDOWN&&xy.ZP.updateIframeCss(e.container.find(".guides-iframe").parent(),e.metadata.theme)}function Tk(e,t,n){vP(e),Zy.clear(n.deleted);var i=e.item,s=i.id;(e.step=e.metadata.getSectionPosition(s),f().includes(n.deleted,s))?je.Z.info("The section "+u.default.safeHtml(i.title)+" was removed"):f().find(n.updated,{id:i.id})&&Zk(e)}function jk(e,t,n){pP(e)&&fP(e),Zy.addNext(e.item.id),PP(e,n.usageInfo.section.index).then((function(){e.editor.setPosition(n.usageInfo.section.pos),"preview"!==e.view&&f().defer((function(){e.editor.scrollToLine(n.usageInfo.section.pos.lineNumber)}))}))}function Zk(e){var t=e.item,n=t.title,i=e.metadata.suppressPageNumbering,s=Y_.ZP.generateTitle(t,i);return e.container.find(".guides-editor-title span").html(f().escape(s)),e.container.find(".guides-editor-title-input").val(n),Iy.Z.breadcrumbsPage(t.id).then((function(t){e.container.find(".guides-editor-title small").html(t||"")}))}function Ok(e){e._gotoAssessmentHandlerId=d.Z.subscribe("guides:assessment:goto",jk.bind(null,e)),e._sectionChangedHandlerId=d.Z.subscribe("guides:updated",Tk.bind(null,e)),e._goToSectionHandlerId=d.Z.subscribe("guides:section:goto_title",eP.bind(null,e,TP.bind(null,e))),e._goToSectionByIdHandlerId=d.Z.subscribe("guides:section:goto_id",(function(t,n){TP(e,n)})),e._goToNextSectionHandlerId=d.Z.subscribe("guides:section:goto_next",eP.bind(null,e,IP.bind(null,e))),e._goToPreviousSectionHandlerId=d.Z.subscribe("guides:section:goto_prev",eP.bind(null,e,AP.bind(null,e))),e._bookItemRenamedHandlerId=d.Z.subscribe("guides:book:item_renamed",Zk.bind(null,e)),e._closeNavigationHandler=d.Z.subscribe("guides:book:nav_close",Qk.bind(null,e)),e._openNavigationHandler=d.Z.subscribe("guides:book:nav_open",Xk.bind(null,e)),e._editAssessmentFromLibraryHandlerId=d.Z.subscribe("guides:assessment:edit",(function(t,n){uP(e,zw.v.ASSESSMENTS,n.assessment)})),e._assessmentDisconnectedHandler=d.Z.subscribe("guides:assessment:disconnected",(function(){NP(e,e.container)})),e._mediaSettingsOpenHandler=d.Z.subscribe("ribbon:media:open",(()=>hP(e,zw.v.MEDIA))),e._generateContentHandler=d.Z.subscribe("ribbon:generate-content",(()=>async function(e){const t=pP(e);if(t){if(!await J_.checkUnsaved())return;fP(e)}const n=e.container.find(".guides-content-right-bar"),i=await uk(e.item,n,(()=>cP(e)),(()=>lP(e)),(()=>dP(e)));if(i&&e._model){const t=e._model.getFullModelRange();e._model.replaceRange(i,t.getStartPosition(),t.getEndPosition())}}(e))),e._generateAssessmentHandler=d.Z.subscribe("guides:assessment:generate",((t,n)=>async function(e,t){let{assessment:n,regenerate:i}=t;const s=pP(e);if(s){if(!await J_.checkUnsaved())return;fP(e)}const a=e.container.find(".guides-content-right-bar"),o=i?"regenerate":"generate";let r=await mk[o](a,n,(()=>cP(e)),(()=>lP(e)),(()=>dP(e)));r=f().merge(n,r),uP(e,zw.v.ASSESSMENTS,r)}(e,n))),e._expandOutputHandler=d.Z.subscribe("guides:assessment:expandOutput",((t,n)=>Nk(e,t,n)))}const Nk=(e,t,n)=>{Dk(e,!0);const i=e.container.find("#md-expand .expand-view-container");Cy(i,n,(()=>{var t;Dk(e,!1),null===(t=zk(e))||void 0===t||t.focusEl(n.focusedElId)}))},Dk=(e,t)=>{const n=e.container.find("#md-preview"),i=e.container.find("#md-expand");t?(n.addClass("awayhidden"),i.removeClass("hide")):(i.addClass("hide"),n.removeClass("awayhidden"))},Mk=e=>e.container.find(".guides-content-right-bar .generate-form-container").length>0;async function Rk(e,t){e.metadata=t,function(e){var t=function(e,t){e[t]&&(d.Z.unsubscribe(e[t]),delete e[t])};t(e,"_sectionChangedHandlerId"),t(e,"_gotoAssessmentHandlerId"),t(e,"_editAssessmentFromLibraryHandlerId"),t(e,"_assessmentDisconnectedHandler")}(e),Ok(e);const n=t.getSections(),i=Sy.Z.getCurrentEditorSectionId(),s=null!==i?t.getSectionPosition(i):-1,a=-1!==s?s:0;e.step=a;const o=t.getSection(a);if(f().isUndefined(o))throw new Error("no step found");Sy.Z.setCurrentEditorSectionId(o.id),A.ZP.setEditorOpen(!0),e.item=o,e.tab.rename(f().toString(a)),e.tab.setTitle("Guide Editor");let r=e.container;return e.isRendered||(e.view=e.view||e.tab.view||"code",r=xy.ZP.renderEditorItem(o,n,e.view),e.container.empty().append(r),mP(e),vP(e),function(e,t){const n=d.Z.on.bind(d.Z,t);n("click",".next",IP.bind(null,e)),n("click",".guides-settings-global",hP.bind(null,e,zw.v.GLOBAL)),n("click",".guides-settings-configure-layout",hP.bind(null,e,zw.v.CONFIGURE_LAYOUT)),n("click",".guides-editor-title",kP.bind(null,e)),n("blur",".guides-editor-title-input",_P.bind(null,e)),n("keyup",".guides-editor-title-input",yP.bind(null,e)),n("submit",".guides-editor-title-form",wP.bind(null,e)),n("click",".guides-button-prev",CP(e,!1)),n("click",".guides-button-next",CP(e,!0)),n("click",".guides-button-add-page",SP.bind(null,e)),n("click",".preview-switch-type",tP.bind(null,e)),n("click",".guides-editor-preview-switch",nP),n("change","#split_view",iP.bind(null,e)),T_.Z.getInstance().supportSave()&&(n("click",".guides-editor-save-blueprint",hP.bind(null,e,zw.v.BLUEPRINTS)),t.find(".guides-editor-save-blueprint").removeClass("hide"));const i=t.find(".btn-group-assessment > .dropdown-menu");d.Z.on(i,"click",".assessment-create",oP.bind(null,e)),d.Z.on(i,"click",".assessment-view-existing",(()=>uP(e,zw.v.ASSESSMENTS))),d.Z.on(i,"click",".assessment-edit",rP.bind(null,e)),d.Z.on(t.find(".toolbar"),"keydown",".dropdown-toggle",(function(e){const t=e.which||e.keyCode;t!==kk.RETURN&&t!==kk.DOWN||(e.stopPropagation(),e.preventDefault(),E()(this).closest(".btn-group").toggleClass("open"))})),d.Z.on(window,"resize.panels",(function(){bP(e),gP(e)})),n("click",".guides-editor-toggle-nav-book",$k.bind(null,e))}(e,r)),e.isRendered=!0,e.editor&&(e.editor.setModel(Ck),e.editor.setOption("readOnly",!0)),Zk(e),o.contentModel.then((function(t){return e.editor?(e._model=t,e._sectionAssessmentIds=(0,Y_.B5)(t.getValue(),e.item.contentType),NP(e,r),e._modelUpdateHandler=Lk.bind(null,e),e._onChangeDisposable&&e._onChangeDisposable.dispose(),e._onChangeDisposable=e._model.onDidChangeModelContent(e._modelUpdateHandler),e.editor.setOption("readOnly",!!o.readOnly),yk.sectionRendered({id:o.id,anchor:e.anchor}),pP(e)?J_.activate():e.ribbon&&e.ribbon.show(),Vk(e,t).then((()=>{wk.getAssessments().then((function(n){Gk(e,t,n)}))}))):Promise.reject({close:!0})}))}async function Lk(e){var t=(0,Y_.B5)(e._model.getValue(),e.item.contentType);return e._sectionAssessmentIds.length===t.length&&0===f().difference(e._sectionAssessmentIds,t).length||(e._sectionAssessmentIds=t),new Promise((t=>{wk.getAssessments().then((n=>{f().defer((()=>{Gk(e,e._model,n),t()}))}))}))}function Fk(e,t,n,i){const s=t.getLineContent(n),a=new RegExp("\\{[^\\|]+\\|assessment\\}\\(".concat(i,"\\)"),"g").exec(s);if(!a)return;const o=a.index+a[0].length-i.length-1,r=a.index+a[0].length-1,c=e.editor.getOffsetForColumn(n,o),l=e.editor.getOffsetForColumn(n,r),d=e.editor.getLayoutInfo().contentLeft,u=e.editor.getTopForPosition(n,o),h=e.editor.getScrollTop();return{left:c+d+10-e.editor.getScrollLeft(),top:u-h+1,width:l-c}}function Bk(e,t){return"<i aria-label='".concat(t,"' title='").concat(t,"' class='svg icon ").concat(e," guides-assessment-inline-widget-type'/>")}function Uk(e){switch(e.type){case Ld.PS:return"Standard Code Test";case Ld.UF:return"Advanced Code Test";case Ld.nh:return"Parsons Puzzle";case Ld.aR:return"Multiple Choice";case Ld.UX:return"Fill in the Blanks";case Ld.Zb:return"eCornell Fill in the Blanks";case Ld.D4:return"Free Text Autograde";case Ld._N:return"Math Assessment";case Ld.V1:return"Free Text";case Ld.Vf:return"Grade Book";case Ld.FD:return"Random";default:return""}}function qk(e,t,n,i){const s=Fk(e,t,i,n.taskId),a=e.editor.getLineHandle(i),o=function(e){const t=Uk(e);switch(e.type){case Ld.PS:return Bk("icon-coc",t);case Ld.UF:return Bk("icon-code-test",t);case Ld.nh:return Bk("icon-parsons",t);case Ld.aR:return Bk("icon-mcq",t);case Ld.UX:case Ld.Zb:return Bk("icon-fib",t);case Ld.D4:return Bk("icon-free-text-auto",t);case Ld._N:return Bk("icon-math",t);case Ld.V1:return Bk("icon-free-text",t);case Ld.Vf:return Bk("icon-grade-book",t);case Ld.FD:return Bk("icon-random",t);case Ld.LG:return Bk("icon-splice",t);case Ld.Xl:case Ld.dj:return Bk("icon-llm-based-rubric",t);default:return""}}(n),r=Uk(n),c="Edit: ".concat(r,": ").concat(n.source.name),l="Edit: ".concat(o," ").concat(n.source.name),h=E()('<button class="guides-assessment-inline-widget btn-primary" title="'.concat(c,'">').concat(l,"</button>"));d.Z.on(h,"click",(t=>{t.preventDefault(),uP(e,zw.v.ASSESSMENTS,n)}));const p=h.get(0);p.style.left="".concat(s.left,"px"),p.style.top="".concat(s.top,"px"),p.style.width="".concat(s.width,"px");const f=e.editor.getOption("lineHeight")-5;p.style.lineHeight="".concat(f,"px");const m=u.default.GUID(4),g={getId:function(){return m},getDomNode:function(){return p},getPosition:function(){return null}};return e.editor.addOverlayWidget(g),{id:m,assessmentId:n.taskId,el:h,overlayWidget:g,lineHandle:a}}function Hk(e){f().each(e._sectionAssignmentsInlineWidgets,(t=>function(e,t){let{overlayWidget:n,el:i}=t;e.editor&&e.editor.removeOverlayWidget(n),i&&i.remove()}(e,t))),e._sectionAssignmentsInlineWidgets=[]}function Gk(e,t,n){if(Hk(e),!e.item||e.item.contentType===T.default.CONTENT_TYPE_HTML||!e.editor._editor.getModel())return;const i=t.getLinesContent();f().each(i,((i,s)=>{const a=(0,Y_.B5)(i,e.item.contentType);f().each(a,(i=>{const a=f().find(n,{taskId:i});a&&!(a.type in Ld.AQ)&&e._sectionAssignmentsInlineWidgets.push(qk(e,t,a,s+1))}))}))}function Wk(e){f().each(e._sectionAssignmentsInlineWidgets,(t=>{if(t&&null!==t.lineHandle.getLineNumber()){const n=Fk(e,e._model,t.lineHandle.getLineNumber(),t.assessmentId);if(!n)return;const i=t.el.get(0);i.style.left="".concat(n.left,"px"),i.style.top="".concat(n.top,"px"),i.style.width="".concat(n.width,"px")}}))}function zk(e){return bk.get(e.container)}function Vk(e,t){if(f().isUndefined(e.markDownEditorInstance)){var n={fileContent:t,container:e.container.find("div.main.guides-content-editor"),fileName:e.item.contentPath,tab:e.tab,view:e.view,showIcons:!1,renderFunction:function(t){return xy.ZP.renderBody({metadata:e.metadata,section:e.metadata.getSection(e.step),container:t,isScrollReset:!1,theme:e.metadata.theme,suppressPageNumbering:e.metadata.suppressPageNumbering,useSubmitButtons:e.metadata.useSubmitButtons,useMarkAsComplete:e.metadata.useMarkAsComplete,hideBackToDashboard:e.metadata.hideBackToDashboard,skipFocusOnSectionChange:!0}).then((function(){wk.setState(zk(e)),function(e){var t=zk(e);t&&(t.scripts=e.metadata.scripts)}(e)}))}};e.markDownEditorInstance=e.markdownEditor(n),e.ribbon&&e.ribbon.clear(),e.ribbon=new Q_.Z(e.container.find(".ribbon-panel-place"),t,e.editor)}return DP(e,"activate",e.editor).then((function(){return DP(e,"afterActivate",e.editor)}))}function Kk(e,t,n){e.editor&&n&&e.editor.layout()}function Jk(e){var t,n=e.editor;n&&(f().isUndefined(e._model)||(e.markDownEditorInstance&&e.markDownEditorInstance.afterActivate(e.editor),e._focusHandlerId=f().bind(e._editorFocusHandler,e),e._onFocusDisposable&&e._onFocusDisposable.dispose(),e._onFocusDisposable=n.onDidFocus(e._focusHandlerId),vP(e),t=i.default.ide.panels.isOpen(void 0,"filetree"),f().isUndefined(t)&&i.default.ide.panels.addTreePanel(i.default.ide.panels.child.children[0])))}function Yk(e,t){const n=e.container.find(".guides-editor-toggle-nav-book"),i=n.is(":focus");n.attr("aria-expanded",t),i&&t?f().delay((()=>E()("#codio-book-navigation").focus()),100):i||t||e.container.find(".guides-editor-container").focus()}function Qk(e){Yk(e,!1)}function Xk(e){Yk(e,!0)}function $k(){var e=E()("#codio-book-navigation");!e.length||e.hasClass("hide")?yk.openBookNavigation():yk.closeBookNavigation()}function eP(e,t,n,i){var s=zk(e);s&&i.iframeId===s.id&&t(i)}function tP(e,t){var n=E()(t.target).closest("a");n.length||(n=E()(t.target).closest("button"));var i=n.data("type");"fullscreen"===i?function(e){var t=e.tab.panel;t.hasFocus||t.focus(),f().defer((function(){gk.execute("ide","fullscreen")}))}(e):"refresh"===i?function(e){var t=zk(e);t&&t.redraw()}(e):"preview"===i?(t.preventDefault(),t.stopPropagation(),yk.preview()):sP(e,i)}function nP(){yk.preview()}function iP(e,t){sP(e,E()(t.currentTarget).is(":checked")?"splitview":"code")}function sP(e,t){Te.Z.saveAllAndWait().then((function(){e.tab.switchType(t).then((()=>{mP(e),vP(e),Wk(e)}))}))}function aP(e){e.container.find(".guides-editor-title-form, .guides-editor-title").toggle()}function oP(e,t){var n=E()(t.currentTarget).data("type");"assessment-library"===n?_k.addFromLibrary():(t.preventDefault(),uP(e,zw.v.ASSESSMENTS,f().cloneDeep(X_._V[n])))}function rP(e,t){var n=E()(t.currentTarget).data("taskid");wk.getAssessments().then((function(i){var s=f().find(i,{taskId:n});s&&(t.preventDefault(),uP(e,zw.v.ASSESSMENTS,s))}))}const cP=e=>{e.container.find(".guides-content-right-bar").empty(),e.container.addClass("right-bar-opened")},lP=e=>{e.editor.layout()},dP=e=>{e.container.removeClass("right-bar-opened"),e.editor.layout()};async function uP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zw.v.GLOBAL,n=arguments.length>2?arguments[2]:void 0;if(pP(e)){try{if(!await J_.checkUnsaved())return}catch(e){je.Z.error("settings save failed")}fP(e)}const i=e.container.find(".guides-settings-".concat(t)),s=e.container.find(".guides-content-right-bar");cP(e);var a=e.item;i.addClass("active"),J_.show(t,s,{editor:e.editor,metadataLink:e.metadata,sectionLink:a,assessment:n},{saveFunction:async function(t){function n(e){a[e]=f().isUndefined(t[e])?a[e]:t[e]}function i(n){e.metadata[n]=f().isUndefined(t[n])?e.metadata[n]:t[n]}return f().isUndefined(t.isCloseAll)&&(t.isCloseAll=f().some(a.actions,(function(e){return e.path.match(/^#tabs/)}))),f().isUndefined(t.actions)&&(t.actions=f().filter(a.actions,(function(e){return!e.path.match(/^#tabs/)}))),t.isCloseAll&&t.actions.unshift({action:"close",path:"#tabs"}),n("actions"),n("layout"),n("paths"),n("teacherOnly"),n("media"),n("learningObjectives"),n("closeTerminalSession"),i("theme"),i("scripts"),i("suppressPageNumbering"),i("hideMenu"),i("allowGuideClose"),i("useSubmitButtons"),i("useMarkAsComplete"),i("collapsedOnStart"),i("hideSectionsToggle"),i("hideBackToDashboard"),i("protectLayout"),async function(){var e="contentType";if(void 0!==t[e]&&a[e]!==t[e])return await new Promise(((e,t)=>{Ae.Z.showConfirm({title:"Warning",buttons:Ae.Z.MB_OKCANCEL,description:"You are changing content type. Content will be lost.",onClose:function(n,i){i===Ae.Z.IDOK?e():t(new Error("changing content cancelled"))}})})),function(){var e="contentType";return a.setContentType(f().isUndefined(t[e])?a[e]:t[e])}().then((function(){yk.contentTypeChanged()}))}().then((async function(){await Promise.all([e.metadata.save(),a.save()]),vP(e)}))},closeFunction:()=>fP(e)}),yk.settingsOpen()}const hP=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zw.v.GLOBAL,n=arguments.length>2?arguments[2]:void 0;n&&n.preventDefault(),pP(e)?t!==J_.getSettingsType()?(e.container.find(".guides-settings").removeClass("active"),J_.changeSettingsType(t),e.container.find(".guides-settings-".concat(t)).addClass("active")):J_.checkUnsaved().then((t=>t&&fP(e))).catch((()=>{})):uP(e,t)},pP=e=>e.container.find(".guides-content-right-bar > .settings").length>0;function fP(e){J_.deactivate();const t=e.container;dP(e);t.find(".guides-settings.active").removeClass("active"),yk.settingsClose(),mP(e),t.find(".settings").remove(),f().defer((async()=>{const t=await wk.getAssessments();Gk(e,e._model,t)}))}function mP(e){if(!e.container)return;const t="preview"===e.tab.viewType,n=e.container.find(".btn-group-assessment");pP(e)||(t?n.hide():n.show())}function gP(e){var t=E()(".preview-switch-type.refresh");"splitview"===e.view?(t.css("top",e.container.find("header").outerHeight()+35),t.show()):t.hide()}function bP(e){const t=e.container.find(".navigation-container .header"),n=e.container.height()-t.height()-Pk;e.container.find(".btn-group-assessment .dropdown-menu").first().css("max-height",n)}function vP(e){!function(e){const t=e.container.find("nav.toolbar"),n=t.find(".guides-button-prev"),i=t.find(".guides-button-next"),s=t.find(".guides-button-add-page"),a=e.metadata.sectionsCount(),o=e.step>0,r=e.step<a-1;function c(e,t){t?e.removeClass(T.xu).removeAttr(T.xu):e.addClass(T.xu).attr(T.xu,!0)}var l,d;c(n,o),c(i,r),l=s,d=i,r?(l.addClass("hide"),d.removeClass("hide")):(d.addClass("hide"),l.removeClass("hide"))}(e),gP(e),function(e){if(!e.container)return;const t="guides-editor-view-type-switch-container--ribbon",n=e.container.find(".guides-editor-view-type-switch-container");e.item&&e.item.contentType===T.default.CONTENT_TYPE_MARKDOWN?n.addClass(t):n.removeClass(t)}(e),function(e){if(e.container){var t=e.container.find(".guides-editor-split-view-switch-container");e.item&&e.item.contentType===T.default.CONTENT_TYPE_HTML?t.addClass("hide"):t.removeClass("hide")}}(e)}function yP(e,t){if(13===t.keyCode&&(t.preventDefault(),_P(e)),27===t.keyCode){t.preventDefault();var n=e.container.find(".guides-editor-title span").text();e.container.find(".guides-editor-title-input").val(n),aP(e)}}function wP(e,t){t.preventDefault()}function _P(e){if(!e.container.find(".guides-editor-title-form").is(":visible"))return!1;var t=e.container.find(".guides-editor-title-input").val();if(""===t)return aP(e),!1;aP(e);const n=e.editor.getOption("readOnly");return e.editor.setOption("readOnly",!0),e.editor.setOption("domReadOnly",!1),e.metadata.renameNode(e.item.id,t).then((()=>{Zk(e)})).finally((()=>{e.editor&&e.editor.setOption("readOnly",n)})),e.editor&&e.editor.focus(),!1}function kP(e){aP(e),e.container.find(".guides-editor-title-input").focus().select()}async function PP(e,t,n,i){if(e.markDownEditorInstance&&e._model){n=!f().isUndefined(n)&&n;var s=e.step===t;e.step=t,e.anchor=i;var a=e.metadata.getSection(t);if(a){Sy.Z.setCurrentEditorSectionId(a.id);var o=Promise.resolve();const t=pP(e),i=J_.getSettingsType();t&&(o=J_.checkUnsaved().then((()=>fP(e))));return Mk(e)&&dP(e),o.then((function(){a.contentType===T.default.CONTENT_TYPE_HTML&&"splitview"===e.tab.viewType&&sP(e,"code");var o=a.contentType!==e.item.contentType;return e.item=a,t&&i!==zw.v.MEDIA&&uP(e,i),async function(e,t,n,i){var s=e.item;Zk(e).then((()=>{vP(e)})),NP(e,e.container),n&&wk.getAssessments(),e.tab.rename(f().toString(e.step)),e.tab.setTitle("Guide Editor");const a=await s.contentModel,o=e.editor.getScrollTop();if(e._onChangeDisposable&&e._onChangeDisposable.dispose(),e._onScrollDisposable&&e._onScrollDisposable.dispose(),e._model=a,e._onChangeDisposable=e._model.onDidChangeModelContent(e._modelUpdateHandler),function(e,t){e.markDownEditorInstance.setModel(t)}(e,e._model),await Lk(e),e._onScrollDisposable=e.editor.onDidScrollChange((()=>{Wk(e)})),Wk(e),i){e.editor.setScrollTop(o);var r=e.markDownEditorInstance;r.syncScrollEditor&&r.syncScrollEditor()}e.editor.setOption("readOnly",!!s.readOnly),yk.sectionRendered({id:s.id,anchor:e.anchor}),e.ribbon&&(e.ribbon.swapDoc(a),s.contentType===T.default.CONTENT_TYPE_HTML?e.ribbon.hide():e.ribbon.show());t&&kP(e)}(e,n,o,s)}))}}}function CP(e,t){return function(n){n.preventDefault(),E()(this).hasClass(T.xu)||function(e,t){t?IP(e):AP(e)}(e,t)}}function xP(e){e.preventDefault();const t=E()(e.target).data("value");yk.bookAddPage({shouldEdit:!1,options:{blueprintId:t},callback:function(e){yk.goToSectionById({sectionId:e.pageId})}})}function EP(e,t){e.container.find("#menu-dropdown-blueprints-last-page").removeClass("hide");const n=e.container.find(".btn-group-blueprints-last-page");e._unbindlistDropdownEvents||(e._unbindlistDropdownEvents=rs(n));e.container.find(".btn-group-blueprints-last-page > .dropdown-menu").empty().append(t),d.Z.on(t,"click",".blueprints-selector-item",xP.bind(null))}function SP(e){e.container.find("#menu-dropdown-blueprints-last-page").addClass("hide");const t=T_.Z.getInstance().blueprintsDropdown();t?EP(e,t):yk.bookAddPage({shouldEdit:!1,callback:function(e){yk.goToSectionById({sectionId:e.pageId})}})}function IP(e){const t=Zy.getNext(e.item.id);let n=e.metadata.getSectionPosition(e.item.id)+1;-1===t?Zy.addNext(e.item.id):n=t,PP(e,n)}function AP(e){const t=Zy.getPrev(e.item.id);let n=e.step-1;-1!==t&&(n=e.metadata.getSectionPosition(t)),PP(e,n)}function TP(e,t){var n,i=t.sectionTitle,s=t.sectionId,a=t.optionalAnchor;if(!i&&!s)return;if(t.focus&&e.focus(),i){var o=e.metadata.getSections();n=f().findIndex(o,(function(e){return e.title.toLowerCase()===i.toLowerCase()}))}else n=e.metadata.getSectionPosition(s);const r=e.metadata.getSectionPosition(e.item.id);r!==n&&-1!==n&&(n!==e.step&&-1!==r&&Zy.addNext(e.item.id),PP(e,n,void 0,a))}function jP(e,t){Hk(e),e._onChangeDisposable&&e._onChangeDisposable.dispose(),e._onChangeDisposable=null,e._onScrollDisposable&&e._onScrollDisposable.dispose(),e._onScrollDisposable=null,e._onFocusDisposable&&e._onFocusDisposable.dispose(),e._onFocusDisposable=null;var n=e.editor;n&&(n.setOption("wordWrap",null),n.setOption("domReadOnly",null),n.setOption("minimap",null),n.cleanup(),e.editor=null,e._focusHandlerId=null,e.markDownEditorInstance&&DP(e,"close"),delete e.markDownEditorInstance),ZP(e),e.ribbon&&e.ribbon.clear(),t&&(e.isRendered=!1,_k.cleanup())}function ZP(e){e.fsHandlerId&&d.Z.unsubscribe(e.fsHandlerId),e._sectionChangedHandlerId&&d.Z.unsubscribe(e._sectionChangedHandlerId),e._gotoAssessmentHandlerId&&d.Z.unsubscribe(e._gotoAssessmentHandlerId),e.settingsOpenHandlerId&&d.Z.unsubscribe(e.settingsOpenHandlerId),e.assessmentAddedHandlerId&&d.Z.unsubscribe(e.assessmentAddedHandlerId),e.contentTypeUpdatedHandlerId&&d.Z.unsubscribe(e.contentTypeUpdatedHandlerId),e._goToSectionHandlerId&&d.Z.unsubscribe(e._goToSectionHandlerId),e._goToSectionByIdHandlerId&&d.Z.unsubscribe(e._goToSectionByIdHandlerId),e._goToNextSectionHandlerId&&d.Z.unsubscribe(e._goToNextSectionHandlerId),e._goToPreviousSectionHandlerId&&d.Z.unsubscribe(e._goToPreviousSectionHandlerId),e._bookItemRenamedHandlerId&&d.Z.unsubscribe(e._bookItemRenamedHandlerId),e._closeNavigationHandler&&d.Z.unsubscribe(e._closeNavigationHandler),e._openNavigationHandler&&d.Z.unsubscribe(e._openNavigationHandler),e._editAssessmentFromLibraryHandlerId&&d.Z.unsubscribe(e._editAssessmentFromLibraryHandlerId),e._assessmentDisconnectedHandler&&d.Z.unsubscribe(e._assessmentDisconnectedHandler),e._mediaSettingsOpenHandler&&d.Z.unsubscribe(e._mediaSettingsOpenHandler),e._generateContentHandler&&d.Z.unsubscribe(e._generateContentHandler),e._unbindAssessmentsManageEvents&&e._unbindAssessmentsManageEvents()}const OP=(e,t,n)=>{pP(e)&&fP(e),function(e,t){const{assessment:n}=t;t.newAssessmentInfo=t.newAssessmentInfo||{};var i=t.newAssessmentInfo.toNewPage;if(i||e.item.contentType!==T.default.CONTENT_TYPE_HTML)if(i)IP(e);else{let i=e.editor.getPosition();if(t.newAssessmentInfo.insertAfter){i={lineNumber:e.editor.findNextMatch(t.newAssessmentInfo.insertAfter,{lineNumber:0,column:0}).range.startLineNumber+1,column:0}}var s=t.newAssessmentInfo.prefix||"";e.editor.replaceRange(s+Y_.ZP.generateAssessmentString(n)+"\n",i),t.newAssessmentInfo.duplicate&&uP(e,zw.v.ASSESSMENTS,n)}else if("code-output-compare"===n.type||"test"===n.type){var a='<button onclick="'+("codio.assessments.check('"+n.taskId+"')")+'">Run</button>\n',o='<pre data-codio-assessment-output="'+n.taskId+'"></pre>\n';e.editor.replaceRange(a+o,e.editor.getPosition())}}(e,n)};function NP(e,t){const n=t.find(".btn-group-assessment > .dropdown-menu");var s=e.item.contentType===T.default.CONTENT_TYPE_HTML;e.dfdShowAssessmentDd||(e.dfdShowAssessmentDd=Promise.all([Fw.d9(),ao.default.OrganizationManager.getMyOrganizations()]).then((function(e){let[t,n]=e;const s=i.default.currentUser.get("details").get("type"),a=f().map(n,(e=>e.id)),o=!!f().find(a,(e=>f().includes(xk,e)));return{showLibrary:!f().isEmpty(t)&&"STUDENT"!==s,showEcornellFib:o}})).catch((function(){return{}}))),e.dfdShowAssessmentDd.then((function(i){var a=e.item,o=xy.ZP.renderAssessmentsDropdown(!a.readOnly,s,i.showLibrary&&!s,i.showEcornellFib&&!s);n.empty().append(o),bP(e),e._unbindAssessmentsManageEvents&&e._unbindAssessmentsManageEvents(),e._unbindAssessmentsManageEvents=rs(t.find(".btn-group-assessment"))}))}async function DP(e,t,n){const i=e.markDownEditorInstance;if(i&&f().isFunction(i[t]))return i[t].call(i,n)}function MP(){const e=i.default.ide.panels.getAllOpened(void 0,"guides-edit");f().each(e,(e=>{if(e)return e.panel.closeTab(e,!0).catch(u.default.error.checkErrorForIgnore)}))}Sk._editorFocusHandler=function(){vk.focus({editor:this.editor,filename:this.fileName})},Sk.activate=function(e){const t=i.default.currentProject.exists(T.default.GUIDES_ROOT_METADATA_FILE);if(!t||A.ZP.isUnit()){const e=new Error(t?"":"Guides description file does not exists");return e.close=!0,Promise.reject(e)}wk.fetchGuideState().catch((e=>{let{message:t}=e;return je.Z.error(t)}));var n=this;return n.editor=e,this._onScrollDisposable&&this._onScrollDisposable.dispose(),this._onScrollDisposable=e.onDidScrollChange((()=>{Wk(this)})),e.setOption("wordWrap","on"),e.setOption("minimap",{enabled:!1}),ZP(n),n.fsHandlerId=d.Z.subscribe("ide:fullscreen:#mode",Kk.bind(null,n)),n.settingsOpenHandlerId=d.Z.subscribe("guides:settings:open",(()=>{lP(n),mP(n)})),n.contentTypeUpdatedHandlerId=d.Z.subscribe("guides:contentType_changed",(function(){n._sectionAssessmentIds=(0,Y_.B5)(n._model.getValue(),n.item.contentType),wk.getAssessments().then((function(e){Gk(n,n._model,e)})),NP(n,E()("body"))})),n.assessmentAddedHandlerId=d.Z.subscribe("guides:assessment:added",OP.bind(null,n)),Xb.ZP.getMetadata().then((function(e){return async function(e,t){t.sectionsCount()||(await Iy.Z.addPage({title:"New Page"}),e.step=0)}(n,e).then((()=>Rk(n,e)))}))},Sk.afterActivate=function(){return Jk(this,this.parser)},Sk.beforeDeactivate=function(){DP(this,"beforeDeactivate")},Sk.deactivate=function(){this.cleanupIframeClient(),DP(this,"deactivate"),jP(this)},Sk.cleanupIframeClient=function(){const e=zk(this);e&&(wk.removeState(e.id),e.cleanup())},Sk.beforeClose=async function(){if(pP(this)){await J_.checkUnsaved()&&J_.deactivate()}this.cleanupIframeClient()},Sk.close=function(){this._model&&(this._onChangeDisposable&&this._onChangeDisposable.dispose(),this._onChangeDisposable=null,this._onScrollDisposable&&this._onScrollDisposable.dispose(),this._onScrollDisposable=null),yk.treeRemoveFilter({plugin:"guides-editor",seq:this._filterSeq++}),jP(this,!0),d.Z.unsubscribe(this._styleCssChangesHandlerId),d.Z.unsubscribe(this._metadataChanged),d.Z.unsubscribe(this._onIframeClick),A.ZP.setEditorOpen(!1),Xb.ZP.close(),this.ribbon&&this.ribbon.clear()},Sk.switchType=function(e,t,n){this.view!==n&&(this.view=n,DP(this,"close").then((()=>(delete this.markDownEditorInstance,this.container.find(".guides-content-editor").empty(),Vk(this,this._model)))).then((()=>DP(this,"setTab",this.tab))).then((()=>{wk.getAssessments().then((e=>{Gk(this,this._model,e)}))})).then((()=>gk.execute("layout","save"))))},Sk.fileDrop=function(e,t,n){if(pP(this))return J_.fileDrop(n),!0;const i=n.path,s=n.type;if(!u.default.path.isImage(i,s))return!0;let a;return a=this.item.contentType===T.default.CONTENT_TYPE_MARKDOWN?"!["+u.default.path.getFileName(n.path)+"]("+n.path+")":'<img alt="'.concat(u.default.path.getFileName(n.path),'" src="').concat(n.path,'"/>'),e.replaceRange(a+"\n",n.position,n.position),!0},Sk.focus=function(){this.editor&&this.editor.focus()},d.Z.subscribe("guides:removed",MP),d.Z.subscribe("guides:close",MP);const RP=Ek,LP=e=>{const t=i.default.ide.panels.getOpenedTabs(e)[0];if(t&&!t.active)return i.default.ide.panels.open(e)};var FP=n(10742);const BP=d.Z.create(FP);var UP=T.default.BOOK_TYPES.PAGE,qP=null;const HP=()=>LP("guides-edit")||Promise.resolve();const GP=function(e,t,n){var i={"Add Chapter":{label:"Add chapter",action:function(){BP.bookAddChapter()}},"Add Section":{label:"Add section",action:function(){BP.bookAddSection()}},"Add Page":{separator_after:!0,label:"Add page",action:function(){HP().then((()=>{BP.bookAddPage({shouldEdit:!0,callback:function(e){BP.goToSectionById({sectionId:e.pageId})}})}))}},Rename:{label:"Rename",action:function(){var n=e.data.title&&f().trim(e.data.title),i=e.text;t.edit(e,n,(function(s,a,o){var r=s.text&&f().trim(s.text);n===r||o?t.rename_node(e,i):BP.bookRenameItem({id:s.id,title:r})}))}},Remove:{label:"Delete",separator_after:!0,action:function(){BP.bookRemoveItem()}},Duplicate:{label:"Duplicate",action:function(){qP=t.get_selected(),BP.bookCopyItems({ids:qP,id:e.id})}},Copy:{label:"Copy",action:function(){qP=t.get_selected()}}};qP&&(i.Paste={label:"Paste",action:function(){BP.bookCopyItems({ids:qP,id:e.id})}});var s=function(e,t){for(var n=e.get_parent(t.id),i=e.get_json(n),s=!1,a=!1,o=null,r=null,c=f().isArray(i)?i:i.children,l=0,d=c.length;l<d;l++)if(c[l].id===t.id){s=l!==d-1,(a=l>0)&&(o=c[l-1].id),s&&(r=c[l+1].id);break}return{canLevelUp:"#"!==n,canUp:a,canDown:s,downNode:r,upNode:o,parent:n}}(t,e),a=s.canUp&&!n;a&&(i.Up={label:"Up",action:function(){t.move_node(e,t.get_node(s.upNode),"before")}});var o=s.downNode&&!n;if(o&&(i.Down={label:"Down",action:function(){t.move_node(e,t.get_node(s.downNode),"after")}}),s.canLevelUp&&!n&&(i.LevelUp={label:"Level Up",action:function(){t.move_node(e,s.parent,"before")}}),e.type!==UP&&!n){var r=e.data&&e.data.pageId,c=r?"Remove":"Add";if(i.LinkPage={separator_before:!0,label:c+" Content",action:function(){HP().then((()=>{BP.bookLinkPage({id:e.id,link:!r})}))}},!r){const t=T_.Z.getInstance().blueprintsRightMenu((async t=>{await HP(),BP.bookLinkPage({id:e.id,link:!r,options:{blueprintId:t}})}));t&&(i.LinkPage.submenu=t,i.LinkPage._class="blueprints-selector-item")}}if((a||o||s.canLevelUp)&&!n&&(i.Paste?i.Paste.separator_after=!0:i.Copy.separator_after=!0),n&&(delete i.Rename,delete i["Add Chapter"],delete i["Add Section"],delete i["Add Page"]),i["Add Page"]){const e=T_.Z.getInstance().blueprintsRightMenu((async e=>{await HP(),BP.bookAddPage({shouldEdit:!0,options:{blueprintId:e},callback:function(e){BP.goToSectionById({sectionId:e.pageId})}})}));e&&(i["Add Page"].submenu=e,i["Add Page"]._class="blueprints-selector-item")}return i};n(57568);var WP=d.Z.create(n(10742)),zP=n(68058).I_,VP=T.default.BOOK_TYPES.PAGE,KP=T.default.BOOK_TYPES.SECTION,JP=T.default.BOOK_TYPES.CHAPTER;const YP=T.default.TREE_NAME;function QP(){return i.default.currentProject.guid+":guides_tree_state"}function XP(e){zP.set(QP(),JSON.stringify(e))}var $P=function(e,t){if(!(this instanceof $P))return new $P(e);this.isEditor=t,this.scrollPosition=null,this.movingItems=[];var n=this,s={name:YP,core:{check_callback:function(){return t},multiple:t,themes:{dots:!1,responsive:!1},data:[],force_text:!0},types:{page:{valid_children:["none"],icon:"jstree-iconify mdi-book-open-page-variant",a_attr:{type:"page"}},section:{valid_children:[VP,KP],icon:"jstree-iconify mdi-book-open",a_attr:{type:"section"}},chapter:{valid_children:[VP,KP],icon:"jstree-iconify mdi-bookshelf",a_attr:{type:"chapter"}},"#":{valid_children:[VP,KP,JP]}},contextmenu:{select_node:!0,show_at_node:!1,items:function(e){if(t){var i=n.allSelected().length>1;return GP(e,n.tree,i)}}},dnd:{is_draggable:function(){return t},large_drag_target:!0,large_drop_target:!0},plugins:["types","guttericons","wholerow","multiline"]};t&&(s.plugins.push("contextmenu"),s.plugins.push("dnd")),this.container=e,this.treeContainer=E()('<div class="codio-book-tree"></div>'),this.container.append(this.treeContainer),this.treeDiv=this.treeContainer.jstree(s),this.tree=E().jstree.reference(this.treeDiv),this.container.on("scroll",(function(){n.scrollPosition=n.container.scrollTop()||0}));const a=f().debounce((e=>{const t=this.tree.get_node(e.parent),n=f().findIndex(t.children,(e=>f().includes(this.movingItems,e)));WP.bookMoveItems({targetId:e.parent,ids:[...this.movingItems],position:-1!==n?n:void 0}),this.movingItems=[]}),500);this.treeDiv.on("move_node.jstree",(function(){const[,e]=arguments;n.movingItems.push(e.node.id),a(e)})).on("activate_node.jstree",(function(e,s){const a=n.allSelected();t&&n.updateTrashIconsVisibility(a);const o=s.node,r=o.data&&o.data.pageId,c=o.data&&o.data.anchor;if(r&&1===a.length&&!o.a_attr.disabled&&!i.default.currentProject.examMode.forwardOnlyNavigation){(LP("guides-edit")||LP("guides")||Promise.resolve()).then((()=>{WP.goToSectionById({sectionId:r,optionalAnchor:c,focus:!0})}))}})).on("after_open.jstree",(function(e,t){n.treeState[t.node.id]=!0,XP(n.treeState)})).on("after_close.jstree",(function(e,t){n.treeState[t.node.id]=!1,XP(n.treeState)})).on("hover_node.jstree",(function(e,i){let{node:s}=i;t&&n.nodeHovered(e,s)})).on("dehover_node.jstree",(function(e,i){let{node:s}=i;t&&n.nodeUnHovered(e,s)})).on("refresh.jstree",(function(){if(null!==n.scrollPosition&&n.container.scrollTop(n.scrollPosition),n.nodeToSelect){if(n.selectNode(n.nodeToSelect),t){var e=n.tree.get_node(n.nodeToSelect),i=e.data&&e.data.pageId,s=e.data&&e.data.anchor;i&&WP.goToSectionById({sectionId:i,optionalAnchor:s})}delete n.nodeToSelect}f().forEach(n.nodeAppearancesToWait,(function(e,t){var i=n.tree.get_node(t);i&&(delete n.nodeAppearancesToWait[t],e.resolve(i))})),t&&f().defer((()=>{const e=n.allSelected();n.updateTrashIconsVisibility(e)}))})).on("loaded.jstree",(function(){n.loaded=!0,n.tree.refresh(!0)}))},eC=$P.prototype;function tC(e,t){var n=[],s=function(e){if(!e||!e.type)return{};var t={type:e.type.toLowerCase()};e.disabled&&(t.disabled=e.disabled);var n=i.default.currentProject;return n.isBookReader&&!f().isEmpty(n.bookAssignmentPages)&&(f().includes(n.bookAssignmentPages,e.id)||(n.showAllBookPages?t.nonUnitPage=!0:t.disabled=!0)),t}(e);if(!f().isArray(e)){var a={text:e.title,id:e.id,type:e.type,data:{pageId:e.pageId,title:e.title,anchor:e.anchor},a_attr:s,li_attr:s};return e.children&&(f().each(e.children,(function(e){n.push(tC(e,t))})),a.children=n,a.state={opened:!f().isBoolean(t[e.id])||t[e.id]}),a}return f().each(e,(function(e){n.push(tC(e,t))})),n}eC.updateTrashIconsVisibility=function(e){this.treeDiv.find(".jstree-themeicon-trash").each(((t,n)=>{f().includes(e,E()(n).data("node").id)||E()(n).remove()})),f().each(e,(e=>{this.showTrashIcon(this.tree.get_node(e,!1))}))},eC.showTrashIcon=function(e){const t=this.tree.get_node(e.id,!0);if(!t||t.children(".jstree-themeicon-trash").length)return;if(t.find("input").length)return;const n=E()('\n<span aria-label="Delete" title="Delete" class="jstree-icon jstree-themeicon jstree-themeicon-custom jstree-themeicon-trash">\n  <span class="iconify-inline" data-icon="@codio:mdi:trash-can-outline"></span>\n</span>\n'),i=this;n.data({node:e}).click((function(e){e.preventDefault(),e.stopPropagation();const t=E()(this).data("node");t&&(i.tree.is_selected(t)||i.selectNode(t.id),f().defer((()=>{WP.bookRemoveItem()})))})),t.prepend(n)},eC.nodeHovered=function(e,t){f().isInteger(this.hoverTimeoutTimer)&&clearTimeout(this.hoverTimeoutTimer),this.hoverTimeoutTimer=setTimeout((()=>this.showTrashIcon(t)),10)},eC.nodeUnHovered=function(e,t){f().isInteger(this.hoverTimeoutTimer)&&clearTimeout(this.hoverTimeoutTimer),this.hoverTimeoutTimer=void 0;const n=this.tree.get_node(t.id,!0);n&&!this.tree.is_selected(t)&&n.children(".jstree-themeicon-trash").remove()},eC._moveToVisible=function(e){var t=this.tree.get_node(e,!0);if(!t||t.is(":visible")){var n=t.offset().top,i=n+26,s=this.container.offset().top,a=s+this.container.height();if(n-s<0||i>a){var o=(this.container.scrollTop()||0)+n-s;this.container.scrollTop(o)}}},eC.selectNode=function(e){this.nodeToSelect=e,this.tree.deselect_all();var t=this.tree.get_node(e);t&&(this._moveToVisible(e),this.tree.select_node(t),t.type!==VP&&this.tree.open_node(t))},eC.waitNodeAppear=function(e){this.nodeAppearancesToWait||(this.nodeAppearancesToWait={});var t=this.tree.get_node(e);return t?Promise.resolve(t):(e in this.nodeAppearancesToWait||(this.nodeAppearancesToWait[e]=u.default.promise.deferred()),this.nodeAppearancesToWait[e].promise)},eC.treeToBook=function(e){e||(e=this.tree.get_json());var t=[],n=this;return f().each(e,(function(e){var i={title:e.data.title,id:e.id,type:e.type};e.data.pageId&&(i.pageId=e.data.pageId),e.type!==VP&&(i.children=n.treeToBook(e.children)),t.push(i)})),t},eC.createNodes=tC,eC.show=function(){this.treeContainer.removeClass("hide")},eC.hide=function(){this.treeContainer.addClass("hide")},eC.selected=function(){var e=this.tree.get_selected();return f().head(e)},eC.lastElementId=function(){var e;return null===(e=f().last(this.tree.get_json()))||void 0===e?void 0:e.id},eC.allSelected=function(){return this.tree.get_selected()},eC.markToOpen=function(e){this.treeState[e]=!0},eC.setData=function(e,t){var n;this.nodeToSelect=t,this.treeState||(this.treeState=(n=zP.get(QP()))?JSON.parse(n):{}),f().isEmpty(e)?this.treeContainer.addClass("hide"):(this.treeContainer.removeClass("hide"),this.tree.settings.core.data=tC(e,this.treeState),this.loaded&&this.tree.refresh(!0))},eC.deactivate=function(){this.loaded=!1,this.tree.destroy(),this.scrollPosition=null,this.movingItems=[]};const nC=$P;var iC=ao.default.search;const sC=I().compile('<div class="book-search-result">\n{{#if inProgress}}\n  <h3>Search in progress, please wait...</h3>\n{{/if}}\n{{#if noMatches}}\n  <h3>No matches found</h3>\n{{/if}}\n{{#if results}}\n  {{#each results}}\n    <div class="book-search-result-item" data-id="{{id}}">\n      <h4>{{title}}</h4>\n      <span>{{text}}</span>\n    </div>\n  {{/each}}\n{{/if}}\n</div>');var aC=d.Z.create(n(10742)),oC=/<codio\-search\-result\s+file='(.+?)'\s+line='(\d+?)'\s*>/,rC=function(e){if(!(this instanceof rC))return new rC(e);this.container=e},cC=rC.prototype;function lC(e,t){var n=u.default.promise.deferred();return Te.Z.saveAllAndWait().then((function(){return iC.search({pattern:t,flags:{regexp:!1,ignoreCase:!0,wholeWord:!1},locations:[".guides/content/**"]})})).then((function(t){!function(e,t){var n="log-entry/"+e.logEntryId,i=null,s="";ao.default.standardCallbackTask({message:e.taskId}).then((function(e){t(e.totalMatches,e.moreResults,s),vl.Z.unsubscribe(n,i)})).catch((function(e){let{message:t}=e;je.Z.error(t),vl.Z.unsubscribe(n,i)})),i=vl.Z.subscribeAll(n,(function(e){if(e){var t=e.split("\n");t.shift(),(e=t.join("\n"))&&e.length>0&&(s+=e)}}))}(t,(function(t,i,s){0===t?n.resolve([]):e._processSearchResult(s).then((function(e){e=f().compact(e),n.resolve(e)}))}))})).catch((function(){n.resolve([])})),n.promise}function dC(e){var t=u.default.promise.deferred();return f().defer((function(){var n=i.default.currentProject.guides,s=[];n&&n.metadata&&n.metadata.sections&&f().each(n.metadata.sections,(function(t){if(t.content&&t.content.markdown){var n=t.content.markdown.split("\n"),i=f().findIndex(n,(function(t){return t&&f().includes(t.toLowerCase(),e)}));if(-1!==i){var a={line:i,text:n[i],title:t.title,id:t.id};s.push(a)}}})),t.resolve(s)})),t.promise}cC.updateContent=function(e){this.currentContent&&this.currentContent.hasClass("hide")||(this.currentContent&&this.currentContent.remove(),this.currentContent=E()(sC(e)),this.container.append(this.currentContent))},cC._processSearchResult=function(e){var t=e.split("\n"),n=f().filter(t,(function(e){return e.match(oC)})),i=f().map(n,(function(e){var t=e.match(oC),n=t[1],i=e.split("</codio-search-result>"),s=f().map(i,(function(e){return e.match(oC)?e.replace(oC,""):e})).join(""),a=s.indexOf(":")+1;return Iy.Z.pageInfoByName(n).then((function(e){if(e)return{file:n,line:t[2],text:s.substring(a,s.length),title:e.title,id:e.id}}))}));return Promise.all(i)},cC._bindResultClick=function(){this.currentContent.find(".book-search-result-item").click((function(){var e=E()(this).data("id");aC.goToSectionById({sectionId:e})}))},cC._detectSkipFileSearch=function(){var e=i.default.currentProject.guides;return!!(e&&e.metadata&&e.metadata.sections)&&f().every(e.metadata.sections,(function(e){return e.content&&void 0!==e.content.markdown}))},cC.show=function(e){this.currentContent&&this.currentContent.removeClass("hide"),this.updateContent({inProgress:!0,text:e});var t,n=this;i.default.currentProject.eduStartedAssignmentInfo?(void 0===this.skipFileSearch&&(this.skipFileSearch=this._detectSkipFileSearch()),t=function(e,t,n){var i=n?Promise.resolve([]):lC(e,t);return Promise.all([dC(t),i]).then((function(e){let[t,n]=e;return t.concat(n)}))}(n,e,this.skipFileSearch)):t=lC(n,e),t.then((function(t){!function(e,t,n){f().isEmpty(n)?e.updateContent({noMatches:!0}):(e.updateContent({results:n,text:t}),e._bindResultClick())}(n,e,t)}))},cC.hide=function(){this.currentContent&&this.currentContent.addClass("hide")};const uC=rC,hC=I().compile('<a class="add-chapter btn" href="javascript:void(0)">\n    <i class="ss-icon">books</i>\n    Add chapter\n</a>\n<a class="add-section btn" href="javascript:void(0)">\n    <i class="ss-icon">book</i>\n    Add section\n</a>\n<a class="add-page btn" href="javascript:void(0)">\n    <i class="ss-icon">textfile</i>\n    Add page\n</a>\n');var pC=d.Z.create(n(10742)),fC=function(e){this.content=E()(hC()),e.find("footer").html(this.content),this.container=e,this._bindEvents()},mC=fC.prototype;mC._bindEvents=function(){var e=this;d.Z.on(this.container,"click",".add-chapter",e._onAddChapter.bind(e)),d.Z.on(this.container,"click",".add-section",e._onAddSection.bind(e)),d.Z.on(this.container,"click",".add-page",e._onAddPage.bind(e))},mC._onAddChapter=function(){pC.bookAddChapter()},mC._onAddSection=function(){pC.bookAddSection()},mC._renderBlueprintsSubmenu=function(e){this.container.find("#menu-dropdown-blueprints").removeClass("hide");const t=this.container.find(".btn-group-blueprints");this._unbindlistDropdownEvents||(this._unbindlistDropdownEvents=rs(t));this.container.find(".btn-group-blueprints > .dropdown-menu").empty().append(e),d.Z.on(e,"click",".blueprints-selector-item",(e=>{const t=E()(e.target).data("value");pC.bookAddPage({shouldEdit:!0,options:{blueprintId:t},callback:function(e){pC.goToSectionById({sectionId:e.pageId})}})}))},mC._onAddPage=function(){this.container.find("#menu-dropdown-blueprints").addClass("hide");(LP("guides-edit")||Promise.resolve()).then((()=>{const e=T_.Z.getInstance().blueprintsDropdown();e?this._renderBlueprintsSubmenu(e):pC.bookAddPage({shouldEdit:!0,callback:function(e){pC.goToSectionById({sectionId:e.pageId})}})}))},mC.destroy=function(){var e;null===(e=this._unbindlistDropdownEvents)||void 0===e||e.call(this)};const gC=fC;var bC=n(49067);var vC=d.Z.create(n(10742));const yC=I().compile('{{#if isSearchAvailable}}\n<div class="toolbar {{#if isBookReader}}toolbar--withSettings{{/if}}">\n    <input aria-label="Search Content" type="text" name="search" id="codio-book-search" placeholder="Search Content" value="" class="input-xlarge" maxlength="200">\n    <button type="button" class="icon-button book-search-close" aria-label="Remove search" title="Remove search">\n        <span class="iconify iconify-inline" data-icon="@codio:mdi:close-thick"></span>\n    </button>\n    {{#if isBookReader}}\n    <button class="btn guides-book-show-settings btn-only-icon" title="Settings" aria-label="Settings">\n        <span class="iconify iconify-inline" data-icon="@codio:mdi:cog"></span>\n    </button>\n    {{/if}}\n</div>\n{{/if}}\n<div class="settings hide">\n    <form>\n        <label id="unit-structure-hidden-label">Hide non-assignment content</label>\n    <fieldset>\n        <label class="switch">\n            <span class="visuallyhidden">Hide non-assignment content</span>\n            <input\n              type="checkbox"\n              id="unit-structure-hidden"\n              {{#if isDisabledStructureHidden}}checked{{/if}}\n              {{#if disableSwitcher}}disabled{{/if}}\n              aria-describedby="unit-structure-hidden-label"\n            >\n            <span class="switch-label" aria-hidden="true"></span>\n            <span class="switch-handle" aria-hidden="true"></span>\n        </label>\n        <p class="help-block">Show content covered by assignment</p>\n    </fieldset>\n    </form>\n</div>\n<div class="actions {{#unless isEditor}}hide{{/unless}}">\n    <button class="add-chapter btn" type="button">\n        <span class="iconify iconify-inline" data-icon="@codio:mdi:bookshelf"></span>\n        Add chapter\n    </button>\n    <button class="add-section btn" type="button">\n        <span class="iconify iconify-inline" data-icon="@codio:mdi:book-open"></span>\n        Add section\n    </button>\n    <div class="btn-group btn-group-blueprints">\n        <button\n            class="add-page btn"\n            type="button"\n            aria-expanded="false"\n            data-toggle="dropdown"\n            title="Add page"\n            aria-label="Add page"\n            aria-controls="menu-dropdown-blueprints"\n            aria-haspopup="true"\n        >\n            <span class="iconify iconify-inline" data-icon="@codio:mdi:book-open-page-variant"></span>\n            Add page\n        </button>\n        <ul class="dropdown-menu" role="menu" id="menu-dropdown-blueprints">\n        </ul>\n    </div>\n</div>\n');var wC=function(e,t){var n=i.default.currentProject;this.content=E()(yC({isBookReader:n.isBookReader,isDisabledStructureHidden:bC.ZP.isDisabledStructureHidden(),disableSwitcher:n.isBookReader&&!n.showAllBookPages,isSearchAvailable:!i.default.currentProject.examMode.forwardOnlyNavigation,isEditor:t})),e.find("header").html(this.content),e.find(".book-search-close").hide(),this.container=e,this._bindEvents()},_C=wC.prototype;_C._bindEvents=function(){var e=this;d.Z.on(this.container,"click",".guides-editor-toggle-nav-book",e._onToggle.bind(e)),d.Z.on(this.container,"change","#codio-book-search",e._onChange.bind(e)),d.Z.on(this.container,"keyup","#codio-book-search",e._onKeyUp.bind(e)),d.Z.on(this.container,"click",".book-search-close",e._onClearSearch.bind(e)),d.Z.on(this.container,"click",".guides-book-show-settings",e._onSettingsClick.bind(e)),d.Z.on(this.container,"click","#unit-structure-hidden",e._onToggleStructure.bind(e)),d.Z.on(this.container,"click",".guides-editor-nav-book-close",e._onToggle.bind(e))},_C._onSettingsClick=function(){this.container.find(".settings").toggleClass("hide")},_C._onToggleStructure=function(){var e=this.container.find("#unit-structure-hidden").prop("checked");bC.ZP.setDisabledStructureHidden(e),vC.bookRefreshTree()},_C._onClearSearch=function(){this.clearEmitted=!0,this.container.find("#codio-book-search").val(""),this.container.find(".book-search-close").hide(),vC.bookClearSearch()},_C._onKeyUp=function(){this.clearEmitted=!1,this.container.find("#codio-book-search").val()?this.container.find(".book-search-close").show():this.container.find(".book-search-close").hide()},_C._onChange=function(){var e=this;f().delay((function(){if(!e.clearEmitted){var t=e.container.find("#codio-book-search").val();t?vC.bookSearch({text:t}):e._onClearSearch()}}),100)},_C._onToggle=function(){vC.closeBookNavigation()};const kC=wC;var PC=n(44674);n(57568);var CC=n(45113);const xC="course",EC="unit",SC="assignment",IC="assignmentDrafted",AC=e=>{const t=(0,CC.c1)(e),n=!e.projectBased||e.projectBased.isPublished;return{id:t,text:(0,CC.bz)(e).name,type:n?SC:IC}},TC=e=>({id:e.id,text:e.name,type:EC,children:f()(e.assignmentsList).filter((e=>!(0,CC.bz)(e).hidden)).map(AC).value()});var jC=n(88275);const ZC="my",OC="latest",NC=async(e,t,n)=>{LC();const s=(0,CC.c1)(e);try{const e=await $_.Mp(s,it.Z.get("defaultStack"),t);open("/".concat(i.default.currentUser.name(),"/").concat(e.projectSlug),n?"_blank":"_self")}catch(e){FC();let{message:t}=e;"StackException"===t&&(t="The stack used in this assignment is private and not accessible to you.\n            We recommend you discuss this with the creator of the assignment."),je.Z.error(t)}},DC=async e=>new Promise((t=>{Ae.Z.showConfirm({title:"Warning",description:e,buttons:Ae.Z.MB_OKCANCEL,onClose:function(e){return t(e),!0}})})),MC=async(e,t,n,i,s)=>{const a=(0,CC.mH)(e,t),o=n.stackVersionId,r=a.stackVersionId.split(":")[1],c=(e=>e&&e.versions?f()(e.versions).filter((e=>"READY"===e.state)).reverse().value():[])(i);if(!f().isEmpty(c)&&"latest"===r&&f().first(c).id!==o){const e=await DC((e=>"There is a newer version of the stack ".concat(e?e.name:""," this assignment is using.\n            Would you like to switch to the new version? Please be aware that if you do this, then any\n            changes you may have made outside the workspace folder will be lost."))(i));if(e){const e="".concat(f().first(i.versions).id,":latest");try{await Ug.Z.changeStack(n.projectId,e,!0),NC(t,!1,s)}catch(e){je.Z.error(e.message)}return}}NC(t,!1,s)},RC=async(e,t,n,s,a)=>{var o;const r=(0,CC.mH)(e,n);if(t&&!r||!t&&r)return void NC(n,!1,a);if(!t&&!r){return void(await DC("As this assignment has not been published, a new empty project will be created.")&&NC(n,!1,a))}const c=i.default.currentUser.account,l=t.createdAt,d=null!==r.createdById&&c!==r.createdById,u=f()(n.projectBased.versionIdsList||[]).map((t=>e.versions[t])).filter((e=>e.createdById===c&&e.createdAt>l)).maxBy((e=>e.createdAt));let h;if(u)h=u.id;else{const e=f()(n.projectBased.versionDescriptorsList).filter((e=>e.initiatedAt<l)).minBy((e=>-e.initiatedAt));h=e&&e.id}const p=h!==(null===(o=n.projectBased.latestVersionId)||void 0===o?void 0:o.value);if((d||n.projectBased.isLatestVersionPulled)&&r.createdAt>l||p){const i=await new Promise((e=>{const t=new Ae.Z({title:"There is a new published version",content:"Do you want to edit the assignment from the last version you edited\n        or from the latest published version?\n        If you select the latest published version,\n        your last version will be updated",width:600,buttons:[{title:"My last version",css:"btn-primary",onClick:()=>t.close(ZC)},{title:"Latest published version",css:"btn-danger",onClick:()=>t.close(OC)},{title:"Close",onClick:()=>t.close()}],onHide:function(){e()},onClose:function(t){return e(t),!0}})}));i===OC?NC(n,!0,a):i===ZC&&MC(e,n,t,s,a)}else MC(e,n,t,s,a)},LC=()=>{E()("body").block({content:E()('<div class="ui-blocker-content">\n  <span>Opening assignment. Please wait...</span>\n</div>\n'),className:"ui-blocker-with-message"})},FC=()=>{E()("body").unblock()},BC=I().compile('<div class="guides-course-info-error">\n  <p>\n    {{message}}\n  </p>\n  <button class="btn guides-course-info-retry" type="button">Retry</button>\n</div>\n'),UC=[SC,IC];const qC=class{constructor(e){this.container=e,this.refreshCourseInfo()}onNodeClick(e){var t;const{authorAssignment:n}=i.default.currentProject,s=null==n||null===(t=n.assignment)||void 0===t?void 0:t.id;if(e.id===s||!f().includes(UC,e.type))return;const a=this.allAssignments[e.id],o=(0,CC.bz)(a);Ae.Z.showConfirm({title:"Warning",description:'Are you sure you want to go to "'.concat(o.name,'" assignment?'),onClose:e=>(e&&this.openAssignment(a),!0)})}async refreshCourseInfo(){try{if(!this.treeContainer){var e;const{authorAssignment:t}=i.default.currentProject,n=null==t||null===(e=t.assignment)||void 0===e?void 0:e.id;this.treeContainer=E()('<div class="guides-course-info-tree"></div>'),this.container.html(this.treeContainer),this.treeDiv=this.treeContainer.jstree((e=>({name:"Course structure",core:{themes:{dots:!1,responsive:!1},data:[],force_text:!0},types:{course:{icon:"jstree-iconify mdi-book",a_attr:{type:xC}},unit:{icon:"jstree-iconify mdi-view-module",a_attr:{type:EC}},assignment:{icon:"jstree-iconify mdi-assignment",a_attr:{type:SC}},assignmentDrafted:{icon:"jstree-iconify mdi-assignment-late",a_attr:{type:IC}}},conditionalselect:t=>(e(t),!1),plugins:["wholerow","types","conditionalselect"]}))(this.onNodeClick.bind(this))),this.tree=E().jstree.reference(this.treeDiv),this.treeDiv.on("refresh.jstree",(()=>{this.tree.select_node(this.tree.get_node(n))}))}this.course=await this.loadCourseInfo(),this.allAssignments=f()(this.course.unitsList).flatMap((e=>e.assignmentsList)).keyBy(CC.c1).value(),this.tree.settings.core.data=(e=>{const t={id:e.id,text:e.details.name,type:xC};return t.children=f()(e.unitsList).filter((e=>f().isEmpty(e.assignmentsList)||f().some(e.assignmentsList,(e=>!(0,CC.bz)(e).hidden)))).map(TC).value(),[t]})(this.course),this.tree.refresh(!0)}catch(e){this.showError(e.message)}}openAssignment(e){(async(e,t,n)=>{const i=(0,CC.c1)(t);if(t.projectBased){const s=(0,CC.mH)(e,t);try{const[a,o]=await Promise.all([$_.mj(i).catch((()=>null)),s&&jC.Z.getByVersionId(s.stackVersionId)]);RC(e,a,t,o,n)}catch(e){je.Z.error(e.message)}}else location.href="/home/teacher/".concat(e.id,"/edit-book-based/").concat(i)})(this.course,e)}async loadCourseInfo(){const{authorAssignment:e}=i.default.currentProject;return $_.wK(e.course.id,null,null,null,{assignment:{version:!0}})}showError(e){this.container.html(BC({message:e}))}destroy(){var e;null===(e=this.tree)||void 0===e||e.destroy(),this.tree=null,this.treeDiv=null,this.container.empty()}},HC=I().compile('<div id="codio-book-navigation" tabindex="0" class="{{#if showTabs}}codio-book-navigation--withTabs{{/if}} hide ide-sidebar">\n    {{#if showTabs}}\n    <section class="filters codio-book-navigation-tabs">\n        <ul class="tabbed">\n            <li class="active"><a data-tab="toc" href="javascript:void(0)">TOC</a></li>\n            <li><a data-tab="course" href="javascript:void(0)">Course</a></li>\n        </ul>\n    </section>\n    {{/if}}\n    <button class="btn guides-editor-nav-book-close btn-only-icon" title="Close sections list" aria-label="Close sections list">\n        <span class="iconify iconify-inline" data-icon="@codio:mdi:close-thick"></span>\n    </button>\n    <div class="codio-book-navigation-panels">\n        <div class="codio-book-navigation-panel-toc">\n            <header class="header"></header>\n            <div class="navigation-content"></div>\n        </div>\n        <div class="codio-book-navigation-panel-course hide">\n            Loading...\n        </div>\n    </div>\n</div>\n');var GC=d.Z.create(n(10742)),WC=null,zC=!0,VC=function(e){const{isAuthorProject:t,isBook:n}=i.default.currentProject;this.content=E()(HC({showTabs:t&&!n})),this.tree=new nC(this.content.find(".navigation-content"),e),this.search=new uC(this.content.find(".navigation-content"),e),this.isEditor=e,e&&(this.actionBar=new gC(this.content)),this.toolBar=new kC(this.content,e),t&&!n&&(this.courseInfo=new qC(this.content.find(".codio-book-navigation-panel-course"))),this._bindEvents()},KC=VC.prototype;function JC(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=e.tree.selected()||e.tree.lastElementId();return i&&e.tree.markToOpen(i),t(i).then((function(t){const i=e.tree.waitNodeAppear(t.id);return e._refreshTree().then((function(){return i})).then((function(i){if(n){const t=i.data.title&&f().trim(i.data.title),n=i.text;e.tree.tree.edit(i,t,(function(s,a,o){e.tree.selectNode(i.id);const r=s.text&&s.text.trim();t===r||o?e.tree.tree.rename_node(i,n):GC.bookRenameItem({id:s.id,title:r})}))}return t}))}))}KC._bindEvents=function(){var e=this,t=[],n=function(e){t.push(e)};n(d.Z.subscribe("guides:book:add_chapter",e._addChapter.bind(e))),n(d.Z.subscribe("guides:book:add_section",e._addSection.bind(e))),n(d.Z.subscribe("guides:book:add_page",e._addPage.bind(e))),n(d.Z.subscribe("guides:book:remove_item",(function(t,n){e._removeItem((null==n?void 0:n.ids)||e.tree.allSelected(),{skipConfirmation:!(null==n||!n.ids),callback:null==n?void 0:n.callback,errorCallback:null==n?void 0:n.errorCallback})}))),n(d.Z.subscribe("guides:book:rename_item",(function(t,n){e._renameItem(n)}))),n(d.Z.subscribe("guides:book:moveItems",(function(t,n){e._moveItems(n.targetId,n.ids,n.position)}))),n(d.Z.subscribe("guides:book:search",(function(t,n){e._search(n.text)}))),n(d.Z.subscribe("guides:book:clear_search",(function(){e._toogleSearch()}))),n(d.Z.subscribe("guides:section:update",(function(t,n){Iy.Z.onSectionsUpdate(n.id),e._refreshTree()}))),n(d.Z.subscribe("guides:section:rendered",(function(t,n){e._activateItem(n.id,n.anchor)}))),n(d.Z.subscribe("guides:book:copy_items",(function(t,n){e._copyItems(n.id,n.ids)}))),n(d.Z.subscribe("guides:book:link_page",(function(t,n){e._linkPage(n.id,n.link,{options:null==n?void 0:n.options,callback:null==n?void 0:n.callback,errorCallback:null==n?void 0:n.errorCallback})}))),n(d.Z.subscribe("guides:book:refresh_tree",(function(){Promise.all([Xb.ZP.getMetadata(),Sy.Z.getStep(),Iy.Z.load()]).then((function(t){let[n,i,s]=t;i=i||0;var a=n.getSection(i),o=a&&Iy.Z.searchItem(a.id,s,!0);e._refreshTree(o?o.id:void 0)}))}))),n(d.Z.subscribe("guides:view:change",(function(){e._refreshTree()}))),d.Z.on(this.content.find(".tabbed"),"click","a",(function(){const t=E()(this);t.closest("li").hasClass("active")||e._activateTab(t)})),this.unbind=t,WC&&e._activateItem(WC)},KC._activateTab=function(e){this.content.find(".tabbed li").removeClass("active"),e.closest("li").addClass("active");const t=e.data("tab");this.content.find(".codio-book-navigation-panels > div").addClass("hide"),this.content.find(".codio-book-navigation-panel-".concat(t)).removeClass("hide")},KC._activateItem=function(e,t){var n=this;Iy.Z.nodeIdByPageIdAndAnchor(e,t).then((function(e){e&&n.tree.selectNode(e)}))},KC._unbindEvents=function(){f().each(this.unbind,(function(e){d.Z.unsubscribe(e)}))},KC._addChapter=async function(e,t){try{let e;f().isNumber(null==t?void 0:t.insertInto)?(e=await Iy.Z.addChapterToPosition(t.insertInto,t.insertBefore,t.options),await this._refreshTree()):e=await JC(this,(function(e){return Iy.Z.addChapter("New Chapter",e,null==t?void 0:t.options)}),null==t?void 0:t.shouldEdit),(null==t?void 0:t.callback)&&t.callback(e)}catch(e){(null==t?void 0:t.errorCallback)&&t.errorCallback(e)}},KC._addSection=async function(e,t){try{let e;null!=t&&t.parentId||f().isNumber(null==t?void 0:t.insertInto)?(e=await Iy.Z.addSectionToPosition(t.parentId,null==t?void 0:t.insertInto,t.insertBefore,null==t?void 0:t.options),await this._refreshTree()):e=await JC(this,(function(e){return Iy.Z.addSection("New Section",e,null==t?void 0:t.options)}),null==t?void 0:t.shouldEdit),(null==t?void 0:t.callback)&&t.callback(e)}catch(e){(null==t?void 0:t.errorCallback)&&t.errorCallback(e)}},KC._addPage=async function(e,t){try{const e={title:"New Page",...(null==t?void 0:t.options)||{}};let n;null!=t&&t.parentId||f().isNumber(null==t?void 0:t.insertInto)?(n=await Iy.Z.addPageToPosition(t.parentId,null==t?void 0:t.insertInto,t.insertBefore,e),await this._refreshTree()):n=await JC(this,(function(e){const n=(null==t?void 0:t.options)||{};return n.title=n.title||"New Page",Iy.Z.addPage(n,e)}),null==t?void 0:t.shouldEdit),(null==t?void 0:t.callback)&&t.callback(n)}catch(e){(null==t?void 0:t.errorCallback)&&t.errorCallback(e)}},KC._linkPage=async function(e,t){let{options:n,callback:i,errorCallback:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{await Iy.Z.linkPage(e,t,n),await this._refreshTree(),i&&i()}catch(e){s&&s(e)}},KC._findFirstSibling=function(e,t){var n=this.tree.tree,i=n.get_parent(e.id),s=n.get_node(i);if(!s)return null;var a=s.children,o=a.indexOf(e.id);return a.length-1===o?this._findFirstSibling(s,t):this._findFirstNodeId(a[o+1],t)},KC._findFirstNodeId=function(e,t){var n=this.tree.tree.get_node(e);return t===e?this._findFirstSibling(n,t):n&&n.data&&n.data.pageId?n.id:f().isArray(n.children)&&n.state.opened&&n.children.length>0?this._findFirstNodeId(n.children[0],t):this._findFirstSibling(n,t)},KC._checkParentsExcluded=function(e,t){var n=this.tree.tree.get_parent(e);return n?n===t?null:this._checkParentsExcluded(n,t):e},KC._removeLastPageDialog=function(){const e=Ae.Z.showWarning({title:"".concat(it.Z.get("whitelabel")," Guides must include at least one page"),description:"If you wish to remove Guides from this assignment/project, close guides and manually delete the .guides folder in the file tree.",buttons:[{title:"Close Guides",type:1,onClick:()=>(GC.guidesClose(),e&&e.close())},{title:"Cancel",onClick:()=>e&&e.close()}]})};function YC(e,t,n){var i=[];return f().each(e,(function(e){var s=e.pageId&&t.getSectionById(e.pageId);if(s||e.children){if(s&&s.teacherOnly&&!n)return!0;e.children&&(e.children=YC(e.children,t,n))}i.push(e)})),i}KC._removeItem=async function(e,t){const n=await Iy.Z.load(),i=n?Iy.Z.flatNodes(n.children):[],s=f().filter(i,(e=>e.pageId)),a=f()(e).map((e=>{const t=(0,PC.d3)(e,n);return(t?Iy.Z.flatPages([t]):[]).map((e=>e.pageId))})).flattenDeep().uniq().value(),o=async()=>{const t=await Iy.Z.removeItems(e),n=((e,t)=>{let n=0;f().forEach(t,(t=>{const i=f().findIndex(e,(e=>e.id===t.id));i>n&&(n=i)}));const i=f().keyBy(t,(e=>e.id));let s=null;return n+1<e.length&&(s=f().find(e,(e=>!!e.pageId&&!i[e.id]),n+1)),s||(s=f().findLast(e,(e=>!!e.pageId&&!i[e.id]),n)),s})(i,t),s=n?this.tree.tree.get_node(n.id):null;return this._refreshTree(s)};if(s.length>a.length){if(t.skipConfirmation){try{await o(),t.callback&&t.callback()}catch(e){t.errorCallback&&t.errorCallback(e)}return}var r,c;if(e.length>1)r="Delete multiple items",c="Are you sure you wish to delete items?";else{const t=(0,PC.d3)(e[0],n),i=1===e.length?t.type:"";c='Are you sure you wish to delete the "'+(1===e.length?t.title:"")+'" '+i+"?",r="Delete the "+i+"?"}Ae.Z.showConfirm({title:r,description:c,onClose:e=>{e&&o()}})}else this._removeLastPageDialog()},KC._renameItem=async function(e){let{id:t,title:n,callback:i,errorCallback:s}=e;try{await Iy.Z.renameItem(t,n),this._refreshTree(),GC.bookItemRenamed(t),i&&i()}catch(e){je.Z.error(e.message),s&&s(e)}},KC._moveItems=function(e,t,n){Iy.Z.moveItems(e,t,n).then((()=>{this._refreshTree()})).catch((e=>{let{message:t}=e;return je.Z.error(t)}))},KC._copyItems=function(e,t){Iy.Z.copyItems(e,t).then((()=>{this._refreshTree()})).catch((e=>{let{message:t}=e;return je.Z.error(t)}))},KC._search=function(e){this.tree.hide(),this.search.show(e)},KC._toogleSearch=function(){this.tree.show(),this.search.hide()},KC.activate=function(){var e=E()("div.ide");0===e.find("#codio-book-navigation").length&&e.append(this.content),this._refreshTree(),WC&&this._activateItem(WC)},KC.deactivate=function(){var e,t;this.tree&&this.tree.deactivate(),null===(e=this.courseInfo)||void 0===e||e.destroy(),this.content&&this.content.remove(),this._unbindEvents(),null===(t=this.actionBar)||void 0===t||t.destroy()},KC.isHidden=function(){return zC},KC.show=function(){E()("div.ide").find("#codio-book-navigation").removeClass("hide"),zC=!1,this.activate(),GC.panelSizeChange()},KC.hide=function(){E()("div.ide").find("#codio-book-navigation").addClass("hide"),zC=!0,GC.panelSizeChange()},KC._refreshTree=async function(e){this.search.hide(),this.tree.show();try{const[t,n]=await Promise.all([Iy.Z.load(),Xb.ZP.getMetadata()]);let{children:i}=t;this.isEditor||(i=YC(f().cloneDeep(i),n,A.ZP.showAsTeacher())),this.tree.setData(i,e)}catch(e){this.tree.setData([]),je.Z.error(e.message)}},d.Z.subscribe("guides:section:rendered",(function(e,t){WC=t.id}));const QC=VC;var XC,$C=null,ex=null;function tx(){$C||($C=new QC(XC)).activate()}function nx(){XC||ix()}function ix(e){e&&Sy.Z.setBookState(!1),$C&&$C.deactivate(),$C=null}function sx(){$C&&!$C.isHidden()&&$C.show()}function ax(){tx(),Sy.Z.setBookState(!0),$C.show()}function ox(){$C&&$C.hide()}const rx=function(e){$C&&e!==XC&&($C.deactivate(),$C=null),XC=e,tx(),Sy.Z.getBookState().then((function(e){e&&tx()})),ex||(ex=[d.Z.subscribe("guides:book:nav_open",ax),d.Z.subscribe("guides:book:nav_close",ox),d.Z.subscribe("guides:editor:close",ix.bind(null,!1)),d.Z.subscribe("guides:player:close",nx.bind(null,!1)),d.Z.subscribe("guides:player:open",sx)])};var cx=null,lx=function(e,t,n,i,s){if(!(this instanceof lx))return new lx(e,t,n,i,s);"guides-edit"===i?((s=s||{}).markdownEditor=lx.markdownEditor,this.plugin=new RP(e,t,n,i,s),rx(!0)):(cx instanceof Lw?(this.plugin=cx,this.plugin.updateContainerAndOptions(e,s)):this.plugin=new Lw(e,t,n,i,s),rx(!1)),cx=this.plugin},dx=lx.prototype;f().each(["activate","afterActivate","beforeDeactivate","deactivate","beforeClose","close","focus","unfocus","getFile","switchType","fileDrop"],(function(e){dx[e]=function(){if(f().isFunction(this.plugin[e]))return this.plugin[e].apply(this.plugin,arguments)}}));const ux=lx;var hx=n(44067),px=n(81644),fx=n(58269),mx=n(93702);const gx=d.Z.create({goToSection:"guides:section:goto_id",editAssessment:"guides:assessment:edit",getGuidesPageInfo:"guides:player:getPageInfo",bookAddChapter:"guides:book:add_chapter",bookAddSection:"guides:book:add_section",bookAddPage:"guides:book:add_page",bookRemoveItem:"guides:book:remove_item",bookRenameItem:"guides:book:rename_item",bookLinkPage:"guides:book:link_page"}),bx={guides:{onCommandExecute:{},onCommandResult:{},assessments:{onExecute:{},onResult:{}}}},vx=e=>{const t={type:e.type,time:e.time,content:e.fileNameOrCommand||"",lines:f().isNumber(e.lines)?e.lines:null};switch(e.type){case window.codioIDE.guides.structure.MEDIA_ACTION_TYPE.FILE_OPEN:return{...t,action:"open",tabType:"file",panel:e.panel};case window.codioIDE.guides.structure.MEDIA_ACTION_TYPE.FILE_CLOSE:return{...t,action:"close",tabType:"file",panel:e.panel};case window.codioIDE.guides.structure.MEDIA_ACTION_TYPE.TERMINAL_OPEN:return{...t,action:"open",tabType:"terminal",panel:e.panel};case window.codioIDE.guides.structure.MEDIA_ACTION_TYPE.TERMINAL_CLOSE:return{...t,action:"close",tabType:"terminal",panel:e.panel};case window.codioIDE.guides.structure.MEDIA_ACTION_TYPE.RUN_COMMAND:return{...t,action:"open",tabType:"terminal",panel:e.panel};case window.codioIDE.guides.structure.MEDIA_ACTION_TYPE.HIGHLIGHT:return{...t,action:"open",tabType:"file",panel:e.panel,reference:e.reference};default:return t}},yx=e=>{if("close"===e.action)return;let t;const n={};return 0===e.path.indexOf("#preview: ")?(t=window.codioIDE.guides.structure.ACTION_TYPE.PREVIEW,n.url=e.path.replace("#preview: ","")):0===e.path.indexOf("#terminal: ")?(t=window.codioIDE.guides.structure.ACTION_TYPE.TERMINAL,n.command=e.path.replace("#terminal: ","")):0===e.path.indexOf("#tutor: ")?(t=window.codioIDE.guides.structure.ACTION_TYPE.VISUALIZER,n.fileName=e.path.replace("#tutor: ","")):0===e.path.indexOf("#vm: ")?(t=window.codioIDE.guides.structure.ACTION_TYPE.VM,n.fileName=e.path.replace("#vm: ","")):0===e.path.indexOf("#vmssh: ")?(t=window.codioIDE.guides.structure.ACTION_TYPE.VM_TERMINAL,n.fileName=e.path.replace("#vmssh: ","")):0===e.path.indexOf("#vmnested: ")?(t=window.codioIDE.guides.structure.ACTION_TYPE.VM_NESTED,n.command=e.path.replace("#vmnested: ","")):0===e.path.indexOf("#earsketch: ")?(t=window.codioIDE.guides.structure.ACTION_TYPE.EARSKETCH,n.fileName=e.path.replace("#earsketch: ","")):0===e.path.indexOf("#jupyter-lab: ")?(t=window.codioIDE.guides.structure.ACTION_TYPE.JUPYTER_LAB,n.fileName=e.path.replace("#jupyter-lab: ","")):f().isUndefined(e.ref)?(t=window.codioIDE.guides.structure.ACTION_TYPE.FILE,n.fileName=e.path):(t=window.codioIDE.guides.structure.ACTION_TYPE.HIGHLIGHT,n.fileName=e.path,n.reference=e.ref,n.lines=e.lineCount),{type:t,panel:e.panel,...n}},wx=e=>{const t={};return"open"!==e.action&&"close"!==e.action||(t.panel=e.panel,t.fileNameOrCommand=e.content||""),"highlight"===e.type&&(t.reference=e.reference,t.lines=e.lines),{type:e.type,time:e.time,...t}},_x=async(e,t)=>{var n,i;if(!t)return null;const s=(0,Kw.XA)(e,t),a=await window.codioIDE.files.getContent(t.contentPath),o=t.json;return{title:o.title,layout:s.layout,guidesOnLeft:s.guidesOnLeft,actions:(null===(n=o.files)||void 0===n?void 0:n.map(yx).filter((e=>e)))||[],content:a,showFileTree:s.showFileTree,showFolders:o.path,closeAllTabs:t.isCloseAll,closeTerminalSession:o.closeTerminalSession,teacherOnly:o.teacherOnly,learningObjectives:o.learningObjectives,media:o.media?{...o.media,actions:(null===(i=o.media.actions)||void 0===i?void 0:i.map(wx))||[]}:void 0}},kx=function(e){var t,n;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=f().merge({...i},{...e}),a=(null===(t=s.actions)||void 0===t?void 0:t.map((e=>(e=>{const t={action:"open",panel:e.panel};switch(e.type){case window.codioIDE.guides.structure.ACTION_TYPE.FILE:return{...t,path:e.fileName};case window.codioIDE.guides.structure.ACTION_TYPE.PREVIEW:return{...t,path:"#preview: ".concat(e.url)};case window.codioIDE.guides.structure.ACTION_TYPE.TERMINAL:return{...t,path:"#terminal: ".concat(e.command)};case window.codioIDE.guides.structure.ACTION_TYPE.HIGHLIGHT:return{...t,path:e.fileName,ref:e.reference,lineCount:e.lines};case window.codioIDE.guides.structure.ACTION_TYPE.VISUALIZER:return{...t,path:"#tutor: ".concat(e.fileName)};case window.codioIDE.guides.structure.ACTION_TYPE.VM:return{...t,path:"#vm: ".concat(e.fileName)};case window.codioIDE.guides.structure.ACTION_TYPE.VM_TERMINAL:return{...t,path:"#vmssh: ".concat(e.command)};case window.codioIDE.guides.structure.ACTION_TYPE.VM_NESTED:return{...t,path:"#vmnested: ".concat(e.command)};case window.codioIDE.guides.structure.ACTION_TYPE.EARSKETCH:return{...t,path:"#earsketch: ".concat(e.fileName)};case window.codioIDE.guides.structure.ACTION_TYPE.JUPYTER_LAB:return{...t,path:"#jupyter-lab: ".concat(e.fileName)}}})(e))))||[];s.closeAllTabs&&a.unshift({path:"#tabs",action:"close"});const o=(0,Kw.Yv)(s.layout,s.showFileTree,s.guidesOnLeft);return{type:s.type,title:s.title,value:s.content,files:a,layout:o,path:s.showFileTree?s.showFolders:[],teacherOnly:s.teacherOnly,closeTerminalSession:s.closeTerminalSession,learningObjectives:s.learningObjectives,media:s.media?{type:"audio",name:s.media.name,source:s.media.source,disabled:!!s.media.disabled,actions:null===(n=s.media.actions)||void 0===n?void 0:n.map(vx)}:void 0}},Px=async()=>{try{await(async e=>{const t=i.default.ide.panels.getOpenedTabs(e)[0];if(!t)throw new Error("tab not found");if(t&&!t.active)return i.default.ide.panels.open(e)})("guides-edit")}catch{throw new Error("guides editor should be opened")}};window.codioIDE=window.codioIDE||{},window.codioIDE.guides={getMetadata:async()=>{if(!i.default.currentProject)throw new Error("project not found");return(0,px.sd)()},getUnusedMetadataInfo:async()=>(await(0,px.sd)()).getUnusedMetadataInfo(),refreshMetadataCaches:async()=>(await(0,px.sd)()).refreshMetadataCaches(),structure:{getStructure:async()=>{if(!i.default.currentProject)throw new Error("project not found");return hx.Z.getBookStructure()},add:async function(e,t){var n;let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;if(!i.default.currentProject)throw new Error("project not found");if(null==e||!e.type)throw new Error("settings should have type property");if(null==e||!e.title)throw new Error("settings should have title property");await Px();const a=await hx.Z.getBookStructure();if(e.type===T.yj.CHAPTER&&t)throw new Error("parent should be null for chapter");let o=t?Iy.Z.searchItem(t,a):null;if(e.type===T.yj.SECTION&&o&&o.type!==T.yj.CHAPTER)throw new Error("parent should be null or a chapter");if(e.type===T.yj.PAGE&&(null===(n=o)||void 0===n?void 0:n.type)===T.yj.PAGE)throw new Error("parent should be a chapter or section");if(e.content&&!e.layout)throw new Error("layout is required for items with content");const r=u.default.promise.deferred();o=o||a;const{children:c}=o;let l=s>=0&&s<c.length;const d={parentId:t,insertInto:s,options:kx(e),insertBefore:l,callback:r.resolve,errorCallback:r.reject};return e.type===T.yj.CHAPTER?gx.bookAddChapter(d):e.type===T.yj.SECTION?gx.bookAddSection(d):gx.bookAddPage(d),r.promise},update:async(e,t)=>{if(!i.default.currentProject)throw new Error("project not found");if(!e)throw new Error("id should be a string");if(!t)throw new Error("settings should be an object");if(t.type)throw new Error("type should not be updated");await Px();const n=hx.Z.getBookStructure(),s=(0,px.sd)(),[a,o]=await Promise.all([n,s]),r=Iy.Z.searchItem(e,a);if(!r)throw new Error("item not found");const c=o.getSectionById(r.pageId),l=await _x(o,c)||{title:r.title},d=kx(t,l),{value:h,type:p,...m}=d;if(t.title&&t.title!==l.title){const n=u.default.promise.deferred();gx.bookRenameItem({id:e,title:t.title,callback:n.resolve,errorCallback:n.reject}),await n.promise}if(!r.pageId){const t=u.default.promise.deferred();return gx.bookLinkPage({id:e,link:!0,options:{value:h,...m},callback:t.resolve,errorCallback:t.reject}),t.promise}const{title:g,content:b,...v}=t;if(!f().isUndefined(b)||!f().isEmpty(v))return h&&await c.setValue(h),await c.update({...m}),c.save()},delete:async e=>{if(!i.default.currentProject)throw new Error("project not found");if(!f().isArray(e))throw new Error("ids should be an array");await Px();const t=await hx.Z.getBookStructure();if(e=e.filter((e=>Iy.Z.searchItem(e,t))),!e.length)return;const n=u.default.promise.deferred();return gx.bookRemoveItem({ids:e,callback:n.resolve,errorCallback:n.reject}),n.promise},get:async e=>{if(!i.default.currentProject)throw new Error("project not found");if(!e)throw new Error("id should be a string");const t=hx.Z.getBookStructure(),n=(0,px.sd)(),[s,a]=await Promise.all([t,n]),o=Iy.Z.searchItem(e,s);if(!o)throw new Error("item not found");const r=o.pageId?a.getSectionById(o.pageId):null;return{structure:o,settings:await _x(a,r)}},ITEM_TYPES:{CHAPTER:T.yj.CHAPTER,SECTION:T.yj.SECTION,PAGE:T.yj.PAGE},ACTION_TYPE:{FILE:"file",PREVIEW:"preview",TERMINAL:"terminal",HIGHLIGHT:"highlight",VISUALIZER:"visualizer",VM:"vm",VM_TERMINAL:"vm_terminal",EARSKETCH:"earsketch",JUPYTER_LAB:"jupyter_lab"},MEDIA_ACTION_TYPE:{FILE_OPEN:"file_open",FILE_CLOSE:"file_close",TERMINAL_OPEN:"terminal_open",TERMINAL_CLOSE:"terminal_close",RUN_COMMAND:"run_command",HIGHLIGHT:"highlight",CLOSE_ALL:"close_all",PAUSE:"pause"},LAYOUT:{L_1_PANEL:"1-panel",L_2_PANELS:"2-panels",L_3_COLUMNS:"3-columns",L_3_CELL:"3-cell",L_4_CELL:"4-cell"}},openEditor:e=>{const t=void 0!==e?{step:e}:void 0;A.ZP.edit(null,t)},isEditorOpen:A.ZP.isEditorOpen,goToSection:e=>{gx.goToSection(e)},getGuidesPageInfo:async()=>i.default.ide.panels.getOpenedTabs("guides")[0]?new Promise((e=>{gx.getGuidesPageInfo((t=>e(t)))})):{content:"",name:""},onCommandExecute:e=>{if(!f().isFunction(e))throw new Error("Callback should be a function");window.codioIDE.guides.onCommandExecute._handler||(window.codioIDE.guides.onCommandExecute._handler=d.Z.subscribe("guides:command:onExecute",((e,t)=>{f().forEach(bx.guides.onCommandExecute,(e=>e(t.cmd)))})));const t=crypto.randomUUID();return bx.guides.onCommandExecute[t]=e,()=>{delete bx.guides.onCommandExecute[t],window.codioIDE.guides.onCommandExecute._handler&&f().isEmpty(bx.guides.onCommandExecute)&&d.Z.unsubscribe(window.codioIDE.guides.onCommandExecute._handler)}},onCommandResult:e=>{if(!f().isFunction(e))throw new Error("Callback should be a function");window.codioIDE.guides.onCommandResult._handler||(window.codioIDE.guides.onCommandResult._handler=d.Z.subscribe("guides:command:onResult",((e,t)=>{let{command:n,output:i,err:s}=t;f().forEach(bx.guides.onCommandResult,(e=>e(n,i,s)))})));const t=crypto.randomUUID();return bx.guides.onCommandResult[t]=e,()=>{delete bx.guides.onCommandResult[t],window.codioIDE.guides.onCommandResult._handler&&f().isEmpty(bx.guides.onCommandResult)&&d.Z.unsubscribe(window.codioIDE.guides.onCommandResult._handler)}}},window.codioIDE.guides.assessments={list:async()=>{if(!i.default.currentProject)throw new Error("project not found");return Rd.ZP.assessments.getAssessments()},findIds:(e,t)=>Y_.ZP.findAssessmentsIds(e,t),openEditor:e=>{gx.editAssessment(e)},generate:async e=>{if(!i.default.currentProject)throw new Error("project not found");if(!(0,mk.canGenerate)({type:e.assessmentType}))throw new Error("Cannot generate assessment of type ".concat(e.assessmentType,"."));const t=await(0,mk.generateAssessmentFromData)(i.default.currentProject.guid,e.assessmentType,e.guidesContent,e.filesList,e.userIntro),n=(0,fx.My)(t.assessment.type),s=X_._V[t.assessment.type]||{},a=f().defaultsDeep(t.assessment,s);return{assessment:await Rd.ZP.assessments.add(n,a.type,a.source,{},{doNotCreateFile:!0}),files:t.files}},save:async(e,t)=>{if(!i.default.currentProject)throw new Error("project not found");if(e.taskId=e.taskId||e.type+"-"+u.default.hashCode(u.default.GUID()),await(0,Md.aX)(e),t){const e=f().map(t,(async e=>{try{(await mx.Z.initFile(e.path,e.content)).content=e.content}catch(t){throw new Error("Error during saving file assessment ".concat(e.path,": ").concat(t.message))}}));await Promise.all(e)}},onExecute:e=>{if(!f().isFunction(e))throw new Error("Callback should be a function");window.codioIDE.guides.assessments.onExecute._handler||(window.codioIDE.guides.assessments.onExecute._handler=d.Z.subscribe("guides:assessments:onExecute",((e,t)=>{f().forEach(bx.guides.assessments.onExecute,(e=>e(t)))})));const t=crypto.randomUUID();return bx.guides.assessments.onExecute[t]=e,()=>{delete bx.guides.assessments.onExecute[t],window.codioIDE.guides.assessments.onExecute._handler&&f().isEmpty(bx.guides.assessments.onExecute)&&d.Z.unsubscribe(window.codioIDE.guides.assessments.onExecute._handler)}},onResult:e=>{if(!f().isFunction(e))throw new Error("Callback should be a function");window.codioIDE.guides.assessments.onResult._handler||(window.codioIDE.guides.assessments.onResult._handler=d.Z.subscribe("guides:assessments:onResult",((e,t)=>{let{assessmentId:n,result:i}=t;f().forEach(bx.guides.assessments.onResult,(e=>e(n,i)))})));const t=crypto.randomUUID();return bx.guides.assessments.onResult[t]=e,()=>{delete bx.guides.assessments.onResult[t],window.codioIDE.guides.assessments.onResult._handler&&f().isEmpty(bx.guides.assessments.onResult)&&d.Z.unsubscribe(window.codioIDE.guides.assessments.onResult._handler)}},ASSESSMENT_TYPES:{ADVANCED_CODE_TEST:Ld.ZP.TEST,FILL_IN_THE_BLANKS:Ld.ZP.FILL_IN_THE_BLANKS,MULTIPLE_CHOICE:Ld.ZP.MULTIPLE_CHOICE,FREE_TEXT:Ld.ZP.FREE_TEXT,FREE_TEXT_AUTO:Ld.ZP.FREE_TEXT_AUTO,STANDARD_CODE_TEST:Ld.ZP.CODE_OUTPUT_COMPARE,PARSONS_PUZZLE:Ld.ZP.PARSONS_PUZZLE,LLM_BASED_RUBRIC:Ld.ZP.LLM_BASED_RUBRIC,LLM_BASED_AUTO_RUBRIC:Ld.ZP.LLM_BASED_AUTO_RUBRIC,SPLICE:Ld.ZP.SPLICE,GRADE_BOOK:Ld.ZP.GRADE_BOOK},GENERATE_ALLOWED_TYPES:{FILL_IN_THE_BLANKS:Ld.ZP.FILL_IN_THE_BLANKS,MULTIPLE_CHOICE:Ld.ZP.MULTIPLE_CHOICE,FREE_TEXT:Ld.ZP.FREE_TEXT,STANDARD_CODE_TEST:Ld.ZP.CODE_OUTPUT_COMPARE,PARSONS_PUZZLE:Ld.ZP.PARSONS_PUZZLE}},i.default.register({info:zb,settings:Vb,hotkeys:Kb,get:function(){return A.ZP.getInitPromise().then((function(){return i.default.get("view-markdown-code")().then((function(e){return ux.markdownEditor=e,ux}))}))}});const Cx=JSON.parse('{"name":"qr-code-preview","description":"QR Code for Preview URL","codio":{"global":true,"noFile":true,"title":"QR Code for Preview URL","urls":"qr-code-preview"}}');n(80801);const xx=I().compile('<div id="qr-code-preview">\r\n\r\n    <h2>QR Code for Preview URL <small>{{project.name}}</small></h2>\r\n\r\n    <div class="qrCodeCanvas"></div>\r\n\r\n</div>\r\n');var Ex=function(e){if(!(this instanceof Ex))return new Ex(e);this.container=e,this.container.append(E()(xx({project:i.default.currentProject},{allowProtoMethodsByDefault:!0,allowProtoPropertiesByDefault:!0}))),this.handler=d.Z.subscribe("project:rename",(function(){e.find("#qr-code-preview > h2 > small").html(i.default.currentProject.name)}));var t="http://"+i.default.currentProject.backendSubDomain+"."+it.Z.get("boxDomain");this.container.find(".qrCodeCanvas").empty().qrcode(t)};Ex.prototype.close=function(){this.container&&this.container.empty(),this.handler&&d.Z.unsubscribe(this.handler)};const Sx=Ex;i.default.register({info:Cx,get:async function(){return Sx}}),d.Z.subscribe("command:project:qr-code-preview",(function(){i.default.ide.open("qr-code-preview")}));const Ix=JSON.parse('{"name":"guides-deprecated","description":"Guides deprecation message","codio":{"urls":"tour","global":true}}');var Ax=I().compile('<div>\n    <p>Annotations are not used anymore.</p>\n    <p>Please use guides.</p>\n    <p>\n        <a target="_blank" href="">Annotations to Guides migration</a>\n    </p>\n</div>');function Tx(){var e=E()(Ax());(0,Ae.Z)({title:"Annotations are deprecated",content:e,buttons:Ae.Z.MB_OK})}d.Z.subscribe("file:open:annotations.md",Tx);const jx=Tx;i.default.register({info:Ix,settings:{},get:async function(){return jx}}),n(78705);var Zx={};Zx.info=n(73151),Zx.settings={},Zx.hotkeys={},i.default.register(Zx);const Ox=JSON.parse('{"name":"codio-iframe-sample","description":"Iframe sample app","codio":{"global":true,"noFile":true,"title":"IFRAME Sample","urls":"iframe-sample"}}'),Nx=d.Z.create(n(19559));window.addEventListener("message",Mx,!1);var Dx=function(e,t){var n=this._iframe=e;this._id=t,n.attr("data-client-id",t),n.data("client-instance",this),this._ready=u.default.promise.deferred(),this._readyPromise=this._ready.promise,this._isLoaded=!1,this._events={},this._dfd={},this._saveQueue=[]};function Mx(e){try{var t=JSON.parse(e.data);if("iframe-extension"!==t.type)return;var n=t.codioId,i=E()('iframe[data-client-id="'+n+'"]').data("client-instance");f().isUndefined(i)||function(e,t){e.onMessage(t)}(i,t)}catch(e){}}var Rx=Dx.prototype;function Lx(e,t,n,i){e.send("callback",{error:n,opId:t,msg:i})}function Fx(e,t,n){e.then((function(e){Lx(t,n,!1,e)})).catch((function(e){Lx(t,n,!0,e)}))}async function Bx(e){var t=i.default.currentProject;if(!t)throw new Error("No Project Opened");if(e=(0,u.qg)(e),t.exists(e))throw new Error("File exists");var n=u.default.path.parse(e),s=n.name,a=n.dir;return a.length>0&&!t.exists(a)&&await Ux(a),t.createFile(s,a)}async function Ux(e){var t=u.default.path.parse(e),n=t.name,s=i.default.currentProject;if(!s)throw new Error("No Project Opened");if(e=(0,u.qg)(e),s.exists(e))throw new Error("File exists");var a=t.dir;return a.length>0&&!s.exists(a)&&await Ux(a),s.createFolder(n,t.dir)}async function qx(e,t){const n=i.default.currentProject;if(!n)throw new Error("No Project Opened");e=(0,u.qg)(e);let s=Promise.resolve();return n.exists(e)||(s=Bx(e)),s.then((function(){const n="scratch-".concat(u.default.GUID(),".tmpfile");return function(e,t,n){return fetch(e).then((e=>e.arrayBuffer())).then((e=>new File([e],t,{type:n})))}("data:text/plain;base64,"+t,n,"text/plain").then((async t=>(await lt("upload",t,n,(()=>{}))).promise.then((t=>i.default.currentProject.uploadFromS3File(e,t.Bucket,t.Key)))))}))}function Hx(e,t){var n=t.args,s=t.opId;Fx(async function(e,t){var n=i.default.currentProject;if(!n)throw new Error("No Project Opened");e=(0,u.qg)(e);var s=Promise.resolve();return n.exists(e)||(s=Bx(e)),s.then((function(){return n.file(e)})).then((function(e){if(e.content===t)return Promise.reject(new Error("File content does not changed"));e.content=t})).then(u.default.promise.delay(50)).then((function(){return Te.Z.saveAllAndWait()}))}(n.file,n.content),e,s)}function Gx(e,t){var n=t.args,s=t.opId;Fx(async function(e){var t=i.default.currentProject;if(!t)throw new Error("No Project Opened");if(e=(0,u.qg)(e),!t.exists(e))throw new Error("File does not exist");return t.file(e).then((function(t){return{content:t.content,filename:e}}))}(n),e,s)}function Wx(e,t){var n=t.opId;Fx(async function(){const e=i.default.currentProject;if(!e)throw new Error("No Project Opened");return e.files()}(),e,n)}function zx(e){if(!e._activeSave){const t=e._saveQueue.length-1;if(e._saveQueue.length>0){const n=e._saveQueue.pop(),{args:i,opId:s}=n,{path:a,content:o}=i,r=qx(a,o);e._activeSave=r,r.finally((()=>{const n=f().take(e._saveQueue,t);e._saveQueue=f().slice(e._saveQueue,t),f().forEach(n,(t=>{const{opId:n}=t;Fx(Promise.resolve(),e,n)})),Fx(r,e,s),delete e._activeSave,zx(e)}))}}}function Vx(e,t){e._saveQueue.push(t),zx(e)}function Kx(e,t){const{args:n,opId:s}=t;Fx(async function(e){const t=i.default.currentProject;if(!t)throw new Error("No Project Opened");if(e=(0,u.qg)(e),!t.exists(e))throw new Error("File does not exist");return t.getBinaryFileContent(e).then((function(t){return{content:u.default.arrayBufferToBase64(t),filename:e}}))}(n),e,s)}function Jx(e,t){const{args:n,opId:s}=t;Fx(async function(e){const t=i.default.currentProject;if(!t)throw new Error("No Project Opened");if(e=(0,u.qg)(e),!t.exists(e))throw new Error("File does not exist");const n=t.backendSubDomain,s=it.Z.get("boxDomain");return{filePath:"https://".concat(n,".").concat(s,"/").concat(e),filename:e}}(n),e,s)}function Yx(e,t){var n=t.args,s=t.opId;Fx(async function(e){var t=i.default.currentProject;if(!t)throw new Error("No Project Opened");if(e=(0,u.qg)(e),!t.exists(e))throw new Error("File does not exist");return t.deleteItems([e])}(n),e,s)}function Qx(e){const t=function(e){var t;let n=e.message;const i=null===(t=e.context)||void 0===t||null===(t=t.error)||void 0===t||null===(t=t.traceback)||void 0===t?void 0:t.join("\n").replace(/\x1B\[[^m]+m/g,"");return f().isEmpty(i)||(n+="\n"+i),n}(e.data);i.default.currentError=t,Nx.onErrorState({isError:!0,output:t})}function Xx(e,t,n){e.send("event",{eventId:t,msg:n})}function $x(e,t,n,i){var s=d.Z.subscribe(t,i);e._events[n]=s}Object.defineProperties(Rx,{id:{get:function(){return this._id}},iframe:{get:function(){return this._iframe}},ready:{get:function(){return this._readyPromise}},filename:{get:function(){return this._filename},set:function(e){this._filename=e,this.send("setFileName",e)}}}),Rx.loadComplete=function(){this._isLoaded||(this._isLoaded=!0,this._ready.resolve())},Rx.send=function(e,t){!function(e,t){e._readyPromise.then((function(){var n=JSON.stringify(t);e._iframe[0].contentWindow&&e._iframe[0].contentWindow.postMessage(n,"*")}))}(this,{action:e,args:t})},Rx.action=function(e,t){const n=u.default.GUID();this.send("action",{action:e,eventId:n,msg:t}),this._dfd[n]=u.default.promise.deferred();let i=2e4;return"callSave"===e&&(i=3e5),setTimeout((()=>{this._dfd[n].reject(new Error("action timeout exception "+e))}),i),this._dfd[n].promise},Rx.hasChanges=function(){return this._isLoaded?this.action("hasChanges"):Promise.resolve(!1)},Rx.callSave=function(){return this.action("callSave").then((()=>{if(this._activeSave)return this._activeSave}))},Rx.getContext=function(){return this._isLoaded?this.action("getContext").catch((e=>(console.error("getContext error",e),Promise.resolve(null)))):Promise.resolve(null)},Rx.onMessage=function(e){var t,n=e.args;switch(e.action){case"getFile":Gx(this,n);break;case"saveFile":Hx(this,n);break;case"subscribeFileChange":!function(e,t){var n=t.filename,i=t.eventId;$x(e,"file:change:"+n,i,(function(t,s){Xx(e,i,{content:s,filename:n})}))}(this,n);break;case"unsubscribeFileChange":case"unsubscribeProjectUpdate":!function(e,t){d.Z.unsubscribe(e._events[t]),delete e._events[t]}(this,n);break;case"subscribeProjectUpdate":!function(e,t){var n=t.eventId;$x(e,"item:created:#path",n,(function(t){var i={fileCreated:!0,path:t.path};Xx(e,n,i)})),$x(e,"item:deleted:#path",n,(function(t){var i={fileDeleted:!0,path:t.path};Xx(e,n,i)})),$x(e,"item:moved:#from:#to",n,(function(t){var i={fileMoved:!0,from:t.from,to:t.to};Xx(e,n,i)})),$x(e,"project:permissionsUpdated:#projectId",n,(function(){var t=i.default.currentProject.readOnly;Xx(e,n,{readOnly:t})}))}(this,n);break;case"createFile":!function(e,t){var n=t.args,i=t.opId;Fx(Bx(n),e,i)}(this,n);break;case"deleteFile":Yx(this,n);break;case"getFilesList":Wx(this,n);break;case"loaded":!function(e){e.loadComplete(),e.send("loaded",e.filename),e.send("setFileOptions",{readOnly:i.default.currentProject.readOnly})}(this);break;case"saveBinaryFile":Vx(this,n);break;case"getBinaryFile":Kx(this,n);break;case"getBinaryFilePath":Jx(this,n);break;case"action":!function(e,t){const n=t.eventId,i=e._dfd[n];i&&i.resolve(t.result)}(this,n);break;case"event":"error"===(t=n).event&&Qx(t)}},Rx.close=function(){return d.Z.unsubscribe(f().values(this._events)),Promise.resolve()};const eE=Dx;var tE=function(){var e=E()('<div class="iframe-extension-containers"></div>');return E()("body").append(e),tE=function(){return e},e};function nE(e,t){this._container=e,this._id=u.default.GUID(),this._ready=u.default.promise.deferred(),this._readyPromise=this._ready.promise;const n=function(e,t,n,i){const s=E()('<iframe title="Content Plugin">');let a="?codioId="+t;e.indexOf("?")>-1&&(a=a.replace("?","&"));const o=e.split("#");let r=o[0]+a;return o[1]&&(r+="#"+o[1]),s.addClass("iframe-extension-iframe"),s.attr("allow","camera *;microphone *"),tE().append(s),n.showFProgress("Loading file..."),u.default.waitAddress(o[0]).then((()=>{s[0].addEventListener("load",(()=>{n.hideFProgress(),i()})),s.attr("src",r)})),s}(t,this.id,e,(()=>{this._ready.resolve()}));this._iframe=n,n.data("instance",this),this._client=new eE(n,this.id),this._hidden=!0,this._manipluateProgress=!0,this.refresh()}var iE=nE.prototype;Object.defineProperties(iE,{container:{get:function(){return this._container}},id:{get:function(){return this._id}},hidden:{get:function(){return this._hidden}},filename:{get:function(){return this._filename},set:function(e){this._filename=e,this._client.filename=e}},ready:{get:function(){return this._readyPromise}}}),iE.hide=function(){this.hidden||(this._iframe.removeClass("iframe-extension-iframe--visible"),this._iframe.css({top:"-1000000px",left:"-1000000px"})),this._hidden=!0},iE.show=function(){this.hidden&&this.ready.then((()=>{this._iframe.addClass("iframe-extension-iframe--visible"),this._hidden=!1,this.refresh()}))},iE.appendTo=function(e){this._container=e,this.refresh()},iE.refresh=function(){if(!this.hidden){var e=this._container[0].getBoundingClientRect(),t={top:e.top,left:e.left,width:e.right-e.left,height:e.bottom-e.top};this._iframe.css({top:t.top,left:t.left,width:t.width,height:t.height})}},iE.close=function(){return this._client.close().then((()=>{this._iframe.remove()}))},iE.hasChanges=function(){return this._client.hasChanges()},iE.showProgress=function(e){this._manipluateProgress&&(this._container.showFProgress(e),this.hide())},iE.hideProgress=function(){this._manipluateProgress&&(this._container.hideFProgress(),this.show())},iE.manipulateProgress=function(e){this._manipluateProgress=e},iE.callSave=function(){return this.showProgress("Saving and closing"),this._client.callSave().finally((()=>{this.hideProgress()}))},iE.getContext=function(){return this._client.getContext()},iE.action=function(){return this._client.action(...arguments)},iE.getReady=function(){return this._client.ready},nE.get=function(e){return E()("#"+e).data("instance")},nE.find=function(e){return e.find("iframe.iframe-extension").data("instance")};const sE=nE;var aE=function(e,t,n,i,s){if(!(this instanceof aE))return new aE(e,t,n,i,s);this._options=s||{},this._tab=s.tab,this._isFile=s.isFile,this._contentLocation=s.content,this.container=E()('<div class="iframe-extension-helper">'),this.filename=t,e.append(this.container)};function oE(e){e.refresh()}function rE(e,t,n){"enter"===t.mode?(n!==e&&e.hide(),e.refresh()):e._iframe.show()}function cE(e){e.save()}var lE=aE.prototype;lE.beforeLoad=function(){return Promise.resolve()},lE.enterFullscreen=function(){this._iframe.refresh()},lE.leaveFullscreen=function(){this._iframe.show(),this.refresh()},lE.hide=function(){this._iframe.hide()},lE.setTab=function(e){this.tab=e},lE.activate=function(){!function(e){e._iframe||(e._iframe=new sE(e.container,e._contentLocation),e._iframe.filename=e.filename)}(this),function(e){e._eventHandlers=e._eventHandlers||[];var t=e._eventHandlers.push.bind(e._eventHandlers);e._isFile||t(d.Z.subscribe("ide:fullscreen:#mode",rE.bind(null,e))),t(d.Z.subscribe("tab:activated:preview",oE.bind(null,e))),t(d.Z.subscribe("panel:size:change",oE.bind(null,e))),t(d.Z.subscribe("command:layout:save",oE.bind(null,e))),t(d.Z.subscribe("command:education:save_before_completed",cE.bind(null,e)))}(this)},lE.refresh=function(){this._iframe&&this._iframe.refresh()},lE.afterActivate=function(){this._iframe&&this._iframe.show()},lE.deactivate=function(){this._iframe&&this._iframe.hide()},lE.beforeClose=function(){return Promise.resolve()},lE.close=async function(){let e;return d.Z.unsubscribe(this._eventHandlers),this._iframe&&(e=await this._iframe.close(),this._iframe=null),this.container&&this.container.remove(),this._closed=!0,e},lE.destroyIframe=function(){this._iframe&&(this._iframe.close(),this._iframe=null)},lE.recreateIframe=function(){!0!==this._closed&&(this._iframe=new sE(this.container,this._contentLocation),this._iframe.filename=this.filename,this.afterActivate())},lE.hasChanges=async function(){return!!this._iframe&&this._iframe.hasChanges()},lE.callSave=async function(){if(this._iframe)return this._iframe.callSave()},lE.save=async function(){await this.hasChanges()&&await this.callSave()},lE.getContext=async function(){if(this._iframe)return this._iframe.getContext()},lE.getReady=function(){return this._iframe.getReady()},lE.action=async function(){if(this._iframe)return this._iframe.action(...arguments)},lE.showProgress=function(e){this._iframe&&this._iframe.showProgress(e)},lE.hideProgress=function(){this._iframe&&this._iframe.hideProgress()},lE.manipulateProgress=function(e){this._iframe&&this._iframe.manipulateProgress(e)};const dE=aE;var uE=n(19575).ED,hE=function(e,t,n,i,s){if(!(this instanceof hE))return new hE(e,t,n,i,s);(s=s||{}).content="//codio.test/ext/iframe/sample/static/test.html",hE._sc.constructor.call(this,e,t,n,i,s)};uE(hE,dE);const pE=hE;i.default.register({info:Ox,get:function(){return pE}});const fE=JSON.parse('{"name":"Codio Crunch","description":"Codio Crunch","codio":{"fileExt":["crunch"],"view":"code"}}');var mE=n(19575).ED,gE=function(e){if(!(this instanceof gE))return new gE(e);(e=e||{}).content=it.Z.get("crunchContentUrl");var t=e.container,n=e.filename,i=e.view,s=e.ext;e.isFile=!0,gE._sc.constructor.call(this,t,n,i,s,e)};mE(gE,dE);const bE=gE;i.default.register({info:fE,get:async function(){return bE}});const vE=JSON.parse('{"name":"Codio Flode","description":"Codio Flode","codio":{"fileExt":["flode"],"view":"code"}}');var yE=n(19575).ED,wE=function(e){if(!(this instanceof wE))return new wE(e);(e=e||{}).content=it.Z.get("flodeContentUrl");var t=e.container,n=e.filename,i=e.view,s=e.ext;e.isFile=!0,wE._sc.constructor.call(this,t,n,i,s,e)};yE(wE,dE);const _E=wE;i.default.register({info:vE,get:async function(){return _E}});const kE=JSON.parse('{"name":"Codio Blockly","description":"Codio Blockly","codio":{"fileExt":["blockly"],"view":"code"}}');var PE=n(19575).ED,CE=function(e){if(!(this instanceof CE))return new CE(e);(e=e||{}).content=it.Z.get("blocklyContentUrl");var t=e.container,n=e.filename,i=e.view,s=e.ext;e.isFile=!0,CE._sc.constructor.call(this,t,n,i,s,e)};PE(CE,dE);const xE=CE;i.default.register({info:kE,get:async function(){return xE}});const EE=JSON.parse('{"name":"Codio Flow","description":"Codio Blockly","codio":{"fileExt":["flow"],"view":"code"}}');var SE=n(19575).ED,IE=function(e){if(!(this instanceof IE))return new IE(e);(e=e||{}).content=it.Z.get("flowContentUrl");var t=e.container,n=e.filename,i=e.view,s=e.ext;e.isFile=!0,IE._sc.constructor.call(this,t,n,i,s,e)};SE(IE,dE);const AE=IE;i.default.register({info:EE,get:async function(){return AE}});const TE=JSON.parse('{"name":"Codio Scratch","description":"Codio Scratch","codio":{"fileExt":["sb3"],"view":"code","sync":false}}'),jE=function(e){if(!(this instanceof jE))return new jE(e);e=e||{};const t=it.Z.get("scratchContentUrl"),n=new URL(window.location.protocol+t),s=it.Z.get("scratchBackpackUrl"),a=(0,bl.p)(),o=i.default.currentUser.getAccountUid(),r=n.searchParams;r.set("backpack_host",s),r.set("username",o),r.set("token",a),n.search=r.toString(),e.content=n.toString();const c=e.container,l=e.filename,d=e.view,u=e.ext;e.isFile=!0,jE._sc.constructor.call(this,c,l,d,u,e)};(0,u.ED)(jE,dE);jE.prototype.beforeClose=function(e){const t=t=>t?e?this.callSave():function(){const e=u.default.promise.deferred(),t=new Ae.Z({title:"Warning",content:E()("<h4>You have unsaved changes. Do you wish to save these?</h4>"),icon:"alert",width:500,buttons:[{title:"Yes",type:1,onClick:function(){return t.close(Ae.Z.IDOK)}},{title:"No",onClick:function(){return t.close(Ae.Z.IDNO)}}],onClose:function(t){setTimeout((function(){let n=null;switch(t){case Ae.Z.IDOK:n=!0;break;case Ae.Z.IDNO:n=!1;break;case Ae.Z.IDCANCEL:n=null}e.resolve(n)}),100)}});return e.promise}().then((e=>{switch(e){case!0:return this.callSave();case!1:return Promise.resolve();case null:{const e=new Error("show unsaved cancelled");return e.ignore=!0,Promise.reject(e)}}})):Promise.resolve();return i.default.currentProject.readOnly?Promise.resolve():this.hasChanges().then(t).catch((e=>this._iframe?-1!==e.message.indexOf("timeout")?Promise.resolve():Promise.reject(e):Promise.resolve()))};const ZE=jE;i.default.register({info:TE,get:async function(){return ZE}});const OE=JSON.parse('{"name":"earsketch","description":"Earsketch","codio":{"global":true,"title":"Earsketch","urls":"earsketch"}}'),NE=function(e,t,n,s,a){if(!(this instanceof NE))return new NE(e,t,n,s,a);a=a||{};const o=it.Z.get("earsketchContentUrl"),r=new URL(window.location.protocol+o),c=i.default.currentProject.guid;r.searchParams.set("projectId",c),a.content=r.toString(),NE._sc.constructor.call(this,e,t,n,s,a)};(0,u.ED)(NE,dE);NE.prototype.beforeClose=function(e){return i.default.currentProject.readOnly?Promise.resolve():this.hasChanges().then((t=>t?e?this.callSave():function(){const e=u.default.promise.deferred(),t=new Ae.Z({title:"Warning",content:E()("<h4>You have unsaved changes. Do you wish to save these?</h4>"),icon:"alert",width:500,buttons:[{title:"Yes",type:1,onClick:function(){return t.close(Ae.Z.IDOK)}},{title:"No",onClick:function(){return t.close(Ae.Z.IDNO)}}],onClose:function(t){setTimeout((function(){let n=null;switch(t){case Ae.Z.IDOK:n=!0;break;case Ae.Z.IDNO:n=!1;break;case Ae.Z.IDCANCEL:n=null}e.resolve(n)}),100)}});return e.promise}().then((e=>{switch(e){case!0:return this.callSave();case!1:return Promise.resolve();case null:{const e=new Error("show unsaved cancelled");return e.ignore=!0,Promise.reject(e)}}})):Promise.resolve())).catch((e=>this._iframe?Promise.reject(e):Promise.resolve()))};const DE=NE;i.default.register({info:OE,get:async function(){return DE}});const ME=JSON.parse('{"name":"Codio Jeroo","description":"Codio Jeroo","codio":{"fileExt":["jev","jsc"],"view":"code","sync":false}}'),RE=function(e){if(!(this instanceof RE))return new RE(e);const t={domain:i.default.currentProject.backendSubDomain,boxDomain:it.Z.get("boxDomain")};(e=e||{}).content="https://".concat(t.domain,"-").concat("7501",".").concat(t.boxDomain,"/?fileName=").concat(e.filename);const n=e.container,s=e.filename,a=e.view,o=e.ext;e.isFile=!0,this.extensionName="jeroo",RE._sc.constructor.call(this,n,s,a,o,e)};(0,u.ED)(RE,dE);const LE=RE;i.default.register({info:ME,get:async function(){return LE}});const FE=JSON.parse('{"name":"Jupyter","description":"Codio Juyter","codio":{"fileExt":["ipynb"],"view":"code","sync":false}}');const BE=class extends dE{constructor(e,t,n,i,s){super(e,t,n,i,s)}async localHasChanges(){return Promise.race([this.hasChanges(),u.default.promise.delay(500,!1)])}async beforeCloseWithAutosave(e){const t=async t=>{if(!t)return;if(e)return this.callSave();switch(await this.showUnsavedWarning()){case!0:return this.callSave();case!1:return;case null:{const e=new Error("show unsaved cancelled");throw e.ignore=!0,e}}};if(!i.default.currentProject.readOnly)try{return t(await this.localHasChanges())}catch(e){if(this._iframe)throw e}}showUnsavedWarning(){const e=u.default.promise.deferred(),t=new Ae.Z({title:"Warning",content:E()("<h4>You have unsaved changes. Do you wish to save these?</h4>"),icon:"alert",width:500,buttons:[{title:"Yes",type:1,onClick:function(){return t.close(Ae.Z.IDOK)}},{title:"No",onClick:function(){return t.close(Ae.Z.IDNO)}}],onClose:async function(t){let n=null;switch(t){case Ae.Z.IDOK:n=!0;break;case Ae.Z.IDNO:n=!1;break;case Ae.Z.IDCANCEL:n=null}e.resolve(n)}});return e.promise}};const UE=class extends BE{constructor(e){const t={domain:i.default.currentProject.backendSubDomain,boxDomain:it.Z.get("boxDomain")};(e=e||{}).content="https://".concat(t.domain,"-3000.").concat(t.boxDomain,"/notebooks/").concat(e.filename);const n=e.container,s=e.filename,a=e.view,o=e.ext;e.isFile=!0,super(n,s,a,o,e),this.extensionName="jupyter",this.bindEvents()}async save(){await super.save()}showLoader(){this.showProgress("Loading file...")}async onMarkAsComplete(){this.showProgress("Prepare for mark as complete..."),this.manipulateProgress(!1),await this.save()}onCancelMarkAsComplete(){this.manipulateProgress(!0),this.hideProgress()}onSetComplete(){this.manipulateProgress(!0),this.destroyIframe(),this.recreateIframe(),this.hideProgress()}bindEvents(){this._eventHandlers=this._eventHandlers||[];const e=this._eventHandlers.push.bind(this._eventHandlers);e(d.Z.subscribe("command:education:mark_as_uncompleted",this.showLoader.bind(this))),e(d.Z.subscribe("command:education:mark_as_completed",this.onMarkAsComplete.bind(this))),e(d.Z.subscribe("education:set_completed",this.onSetComplete.bind(this))),e(d.Z.subscribe("command:education:cancel_mark_as_completed",this.onCancelMarkAsComplete.bind(this)))}async beforeClose(e){return this.beforeCloseWithAutosave(e)}};i.default.register({info:FE,get:async function(){return UE}});const qE=JSON.parse('{"name":"Jupyter Lab","description":"Codio Jupyter Lab","codio":{"global":true,"title":"Jupyter Lab","urls":"jupyter-lab"}}'),HE=I().compile('<div class="no-jupyter">\n    <h1>Jupyter Lab is not installed.</h1>\n</div>\n');const GE=class extends BE{constructor(e,t,n,s,a){const o={domain:i.default.currentProject.backendSubDomain,boxDomain:it.Z.get("boxDomain")};(a=a||{}).filename=a.filename||t;let r="https://".concat(o.domain,"-3000.").concat(o.boxDomain,"/lab");a.filename&&(r+="/tree/".concat(a.filename));const c=new URL(r);a.content=c.toString(),super(e,t,n,s,a),this.extensionName="jupyter-lab",this.bindEvents()}async beforeClose(e,t,n){return this.beforeCloseWithAutosave(n)}async activate(){if(await this.checkJupyterLabInstalled())return super.activate();this.showError(this._options.tab.template)}async afterActivate(){super.afterActivate(),(0,A.wr)()&&!(0,A.IR)()&&(await this.getReady(),setTimeout((async()=>{try{await this.action("hideNbgraderMenu")}catch(e){}}),200))}getPackagesList(){const e=i.default.currentProject.guid;return this._pipRunP=this._pipRunP||ao.default.containerManager.run(e,"pip",{cwd:"/home/codio/workspace",args:["list"]}),setTimeout((()=>{this._pipRunP=void 0}),3e3),this._pipRunP.then((e=>{if(0===e.code)return e.stdout;throw new Error(e.stderr)}))}checkJupyterLabInstalled(){return this.getPackagesList().then((e=>e.includes("jupyterlab "))).catch((e=>{throw e}))}showError(e){const t=HE();e.empty(),e.append(t),this._iframe&&this._iframe.hide()}async save(){await super.save()}showLoader(){this.showProgress("Loading file...")}async onMarkAsComplete(){this.showProgress("Prepare for mark as complete..."),this.manipulateProgress(!1),await this.save()}onCancelMarkAsComplete(){this.manipulateProgress(!0),this.hideProgress()}onSetComplete(){this.manipulateProgress(!0),this.destroyIframe(),this.recreateIframe(),this.hideProgress()}bindEvents(){this._eventHandlers=this._eventHandlers||[];const e=this._eventHandlers.push.bind(this._eventHandlers);e(d.Z.subscribe("command:education:mark_as_uncompleted",this.showLoader.bind(this))),e(d.Z.subscribe("command:education:mark_as_completed",this.onMarkAsComplete.bind(this))),e(d.Z.subscribe("education:set_completed",this.onSetComplete.bind(this))),e(d.Z.subscribe("command:education:cancel_mark_as_completed",this.onCancelMarkAsComplete.bind(this)))}};i.default.register({info:qE,get:async function(){return GE}});const WE=JSON.parse('{"name":"Codio Pencilcode","description":"Codio Pencilcode","codio":{"fileExt":["pencilcode"],"view":"code","sync":false}}'),{path:zE}=u.default,VE=function(e){if(!(this instanceof VE))return new VE(e);const t={domain:i.default.currentProject.backendSubDomain,boxDomain:it.Z.get("boxDomain")};e=e||{};const n=zE.getFileName(e.filename);e.content="https://".concat(t.domain,"-8008.").concat(t.boxDomain,"/edit/").concat(n);const s=e.container,a=e.filename,o=e.view,r=e.ext;e.isFile=!0,VE._sc.constructor.call(this,s,a,o,r,e)};(0,u.ED)(VE,dE);const KE=VE;i.default.register({info:WE,get:async function(){return KE}});const JE=JSON.parse('{"name":"Codio Pyret","description":"Codio Pyret","codio":{"fileExt":["pyret","arr"],"view":"code","sync":false}}'),YE=function(e){if(!(this instanceof YE))return new YE(e);(e=e||{}).content=it.Z.get("pyretContentUrl");const t=e.container,n=e.filename,i=e.view,s=e.ext;e.isFile=!0,YE._sc.constructor.call(this,t,n,i,s,e)};(0,u.ED)(YE,dE);YE.prototype.beforeClose=function(){const e=u.default.promise.deferred(),t=t=>t?function(){const e=u.default.promise.deferred(),t=new Ae.Z({title:"Warning",content:E()("<h4>You have unsaved changes. Do you wish to save these?</h4>"),icon:"alert",width:500,buttons:[{title:"Yes",type:1,onClick:function(){return t.close(Ae.Z.IDOK)}},{title:"No",onClick:function(){return t.close(Ae.Z.IDNO)}}],onClose:function(t){setTimeout((function(){let n=null;switch(t){case Ae.Z.IDOK:n=!0;break;case Ae.Z.IDNO:n=!1;break;case Ae.Z.IDCANCEL:n=null}e.resolve(n)}),100)}});return e.promise}().then((t=>{switch(t){case!0:return this.callSave().then(e.resolve);case!1:return e.resolve();case null:{const t=new Error("show unsaved cancelled");return t.ignore=!0,e.reject(t)}}})):e.resolve();return i.default.currentProject.readOnly?e.resolve():this.hasChanges().then(t).catch(e.reject),e.promise};const QE=YE;i.default.register({info:JE,get:async function(){return QE}});const XE=JSON.parse('{"name":"PDF","description":"pdf","codio":{"fileExt":["pdf"],"view":"code","sync":false}}'),$E=function(e){if(!(this instanceof $E))return new $E(e);const t=i.default.currentProject.backendSubDomain+"."+it.Z.get("boxDomain");(e=e||{}).content="https://".concat(t,"/").concat(e.filename);const n=e.container,s=e.filename,a=e.view,o=e.ext;e.isFile=!0,$E._sc.constructor.call(this,n,s,a,o,e)};(0,u.ED)($E,dE);const eS=$E;i.default.register({info:XE,get:async function(){return eS}});const tS=JSON.parse('{"name":"Codio Draw.io","description":"Codio Draw.io","codio":{"fileExt":["drawio"],"view":"code","sync":false}}');const nS=class extends dE{constructor(e){e=e||{};const t=it.Z.get("drawioContentUrl"),n=new URL(window.location.protocol+t);n.searchParams.set("mode","codio"),n.hash="C",e.content=n.toString();const s=e.container,a=e.filename,o=e.view,r=e.ext;e.isFile=!0,super(s,a,o,r,e),(0,bu.Z)(this,"beforeClose",(function(e){const t=t=>t?e?this.callSave():this.showUnsavedWarning().then((e=>{switch(e){case!0:return this.callSave();case!1:return Promise.resolve();case null:{const e=new Error("show unsaved cancelled");return e.ignore=!0,Promise.reject(e)}}})):Promise.resolve();return i.default.currentProject.readOnly?Promise.resolve():this.hasChanges().then(t).catch((e=>this._iframe?Promise.reject(e):Promise.resolve()))}))}showUnsavedWarning(){const e=u.default.promise.deferred(),t=new Ae.Z({title:"Warning",content:E()("<h4>You have unsaved changes. Do you wish to save these?</h4>"),icon:"alert",width:500,buttons:[{title:"Yes",type:1,onClick:function(){return t.close(Ae.Z.IDOK)}},{title:"No",onClick:function(){return t.close(Ae.Z.IDNO)}}],onClose:function(t){setTimeout((function(){let n=null;switch(t){case Ae.Z.IDOK:n=!0;break;case Ae.Z.IDNO:n=!1;break;case Ae.Z.IDCANCEL:n=null}e.resolve(n)}),100)}});return e.promise}};i.default.register({info:tS,get:async function(){return nS}});const iS=JSON.parse('{"name":"Codio Sandbox","description":"Codio Sandbox","codio":{"title":{"targets":"Sandbox"},"urls":"sandbox"}}');const sS=class extends dE{constructor(e,t,n,s,a){var o,r,c,l,d,u,h,p,f,m,g;const[b,v]=t.split("|"),y=i.default.currentProject,w=null!==(o=null!==(r=null==y||null===(c=y.authorAssignment)||void 0===c?void 0:c.assignment)&&void 0!==r?r:null==y||null===(l=y.eduStartedAssignmentInfo)||void 0===l||null===(l=l.assignment)||void 0===l?void 0:l.projectBased)&&void 0!==o?o:null==y||null===(d=y.eduStartedAssignmentInfo)||void 0===d||null===(d=d.assignment)||void 0===d?void 0:d.bookBased,_=(null===(u=y.eduStartedAssignmentInfo)||void 0===u?void 0:u.started)||null,k=_&&null!==(h=y.eduStartedAssignmentInfo)&&void 0!==h&&h.isTeacher?(null===(p=_.assignee)||void 0===p?void 0:p.userId)||(null===(f=_.assignee)||void 0===f?void 0:f.groupId):null,P=new URLSearchParams;P.set("trackId",b||""),P.set("sandboxId",v||""),P.set("courseId",(null===(m=y.authorAssignment)||void 0===m||null===(m=m.course)||void 0===m?void 0:m.id)||(null===(g=y.course)||void 0===g?void 0:g.id)||""),P.set("assignmentId",(null==w?void 0:w.id)||""),k&&P.set("assigneeId",k),a.content="".concat(it.Z.get("sandboxUrl"),"?").concat(P.toString()),super(e,t,n,s,a)}},aS=I().compile('<div class="sandbox-dummy-extension dummy-extension">\r\n  <h3>Sandbox not found. Ask your instructor to check the sandboxes in the course.</h3>\r\n</div>');const oS=class{constructor(e){e.append(aS)}};let rS=null;i.default.register({info:iS,hotkeys:{},get:async function(){return null===rS&&(rS=async function(){const e=i.default.currentProject,t=e.authorAssignment?e.authorAssignment.course:e.eduStartedAssignmentInfo.course;return null!=t&&t.organizationId?ao.default.OrganizationManager.get(t.organizationId).then((e=>{var t;return null!==(t=e.sandboxes)&&void 0!==t&&t.enabled?sS:oS})):oS}()),rS}}),d.Z.subscribe("app:timeChunkMsSpent",(function(e,t){var n;const s=i.default.currentProject;if(!s)return;if(i.default.currentUser&&i.default.currentUser.incognitoLogin)return;const{writableCopy:a,isOpenedByTeacher:o,isUserAssignee:r}=s;if(!r||o||a)return;(null===(n=s.eduStartedAssignmentInfo)||void 0===n||null===(n=n.started)||void 0===n||null===(n=n.completed)||void 0===n?void 0:n.completed)||$_.X(s.guid,t).catch((function(){$_.X(s.guid,t).catch((e=>{je.Z.error(e.message)}))}))})),d.Z.subscribe("app:timeChunkMsSpent",(function(e,t){if(i.default.currentUser&&i.default.currentUser.incognitoLogin)return;const n=i.default.currentProject;n&&ao.default.ProjectManager.incrementTimeSpent(n.guid,t).catch((function(){ao.default.ProjectManager.incrementTimeSpent(n.guid,t).catch((e=>{je.Z.error(e.message)}))}))}));var cS="codio-migrated-to-lxc",lS="info-shown",dS="https://codio.com/home/stacks/63e76d5d-0791-4183-b1f4-34bf2e59e81b/?tab=details",uS="https://docs.codio.com/common/develop/ide/boxes/installsw/install-software.html#installing-software-packages";d.Z.subscribe("project:open:#projectId",(function(){var e=i.default.currentProject,t=e.getPluginData(cS)[lS];if(e&&e.migrated&&!t){var n="/"+e.path+"/install-software",s="/"+e.path+"/project-settings#tab-stack";Ae.Z.showPrompt({buttons:Ae.Z.IDYES,icon:"alert",title:"Generation 1 stacks are no longer available",width:540,content:["Your archived project has been automatically migrated to the Generation 2 ",'<a target="_blank" href="',dS,'">Empty Stack</a>.<br/>',"You can change the stack used with this project ","(go to Project>Settings>",'<a href="',s,'">Stack Settings</a>)'," or ",'<a href="',n,'">install components</a> as required ','<a target="_blank" href="',uS,'">(see Installing Software)</a>.'].join(""),onClose:function(t){t&&e.setPluginData(cS,lS,!0)}})}}));var hS=n(47295);const pS=d.Z.create(n(76946));async function fS(){const e=function(){const e=new Ae.Z({title:"Processing",content:"We are preparing AWS account and generating access url, please wait...",buttons:[]});return e.preventClosing(!0),e}(),t=async function(){var e,t,n,s;const a=i.default.currentProject,o=a.authorAssignment?null==a||null===(e=a.authorAssignment)||void 0===e?void 0:e.course:null==a||null===(t=a.eduStartedAssignmentInfo)||void 0===t?void 0:t.course,r=a.authorAssignment?null==a||null===(n=a.authorAssignment)||void 0===n?void 0:n.assignment:null==a||null===(s=a.eduStartedAssignmentInfo)||void 0===s||null===(s=s.assignment)||void 0===s?void 0:s.projectBased;if(!o||!r)throw new Error("Should have education context");return(0,$_.T$)(o.id,r.id,a.owner.id)}();try{return await t}finally{e.close()}}async function mS(){try{const{url:e}=await fS();await hS.Z.run(i.default.currentProject.guid,"/home/codio/chrome-linux/chrome",{args:["--enable-unsafe-swiftshader",e],timeout:-1,env:{GOOGLE_API_KEY:"no",GOOGLE_DEFAULT_CLIENT_ID:"no",GOOGLE_DEFAULT_CLIENT_SECRET:"no"}})}catch(e){je.Z.error("Failed to open AWS console: ".concat(e.message))}}d.Z.subscribe("project:open",f().defer.bind(f(),(function(){var e,t,n;const s=i.default.currentProject,a=s.authorAssignment?null==s||null===(e=s.authorAssignment)||void 0===e?void 0:e.course:null==s||null===(t=s.eduStartedAssignmentInfo)||void 0===t?void 0:t.course;if(!a)return;(null===(n=a.details)||void 0===n||null===(n=n.awsCloudLearningOptions)||void 0===n?void 0:n.enabled)&&h.ZP.setVisibility("aws-cloud-learning",!0)}))),d.Z.subscribe("command:aws-cloud-learning:open",(async function(){try{const{url:e}=await fS();_p.Z.openPreview(!1,e)}catch(e){je.Z.error("Failed to open AWS tab: ".concat(e.message))}})),d.Z.subscribe("command:aws-cloud-learning:open-terminal",(async function(){return pS.openPreview({arg:{file:"https://{{domain3050}}/",title:"AWS Cloud Learning"}}),mS()})),d.Z.subscribe("command:aws-cloud-learning:open-from-guides",(function(){return mS()}));const gS=JSON.parse('{"name":"view-pdf","description":"Pdf viewer","codio":{"fileExt":["pdf"],"view":"none","no-auto-loading":true,"close-extension-ide-tab":true}}'),bS={};function vS(e){var t=e.filename,n="//"+i.default.currentProject.backendDomain+"/"+t;window.open(n)}vS.info=gS,vS.settings=bS;const yS=vS;var wS={};wS.info=gS,wS.settings=bS,wS.get=async function(){return yS},i.default.register(wS);const _S=JSON.parse('{"name":"view-jsonc","description":"json with comments code editor","codio":{"view":"code","fileExt":["codio-menu","codio","codio-jupyter"]}}');var kS={};kS.info=_S,kS.get=function(){return i.default.loadModule((function(e){Promise.all([n.e(3255),n.e(131)]).then(function(){var t=[n(40131)];e.apply(null,t)}.bind(this)).catch(n.oe)}))},i.default.register(kS);const PS=JSON.parse('{"name":"view-html-code","description":"html code editor","codio":{"view":"code","fileExt":["html","htm","shtml","xhtml","mdoc","jsp","asp","aspx","jshtm"]}}');var CS={};CS.info=PS,CS.get=function(){return i.default.loadModule((function(e){Promise.all([n.e(3255),n.e(5710)]).then(function(){var t=[n(15710)];e.apply(null,t)}.bind(this)).catch(n.oe)}))},i.default.register(CS);const xS=JSON.parse('{"name":"view-txt-code","description":"txt code editor","codio":{"view":"code","fileExt":["txt"]}}'),ES={};ES.info=xS,ES.get=function(){return i.default.loadModule((function(e){Promise.all([n.e(3255),n.e(2913)]).then(function(){var t=[n(92913)];e.apply(null,t)}.bind(this)).catch(n.oe)}))},i.default.register(ES);const SS=it.Z.get("intercomAppId");function IS(e){f().isFunction(window.Intercom)&&ao.default.OrganizationManager.getMyOrganizations().then((function(e){if(!i.default.currentUser.incognitoLogin){var t=i.default.currentUser,n=t.get("details"),s=n.get("created_at");s=s?Math.round(s/1e3):void 0,s=isNaN(s)?void 0:s;var a=f().map(e,(function(e){var t=e.createdTimestampMs;return t=t?Math.round(t/1e3):void 0,t=isNaN(t)?void 0:t,{company_id:e.id,name:e.details.name,created_at:t}})),o={app_id:SS,email:n.get("email"),user_id:t.account,username:t.name(),name:n.getName(),is_suspended:t.isSuspended(),is_staff:t.isStaff(),created_at:s,project_count:t.projectCount,referrer:n.get("referrer"),companies:a};return console.debug("INTERCOM",o),o}})).then((function(t){t&&window.Intercom(e,t)})).catch((e=>{let{message:t}=e;je.Z.error(t)}))}d.Z.subscribe("app:started",(function(){IS("boot")})),d.Z.subscribe("route:changed",(function(){i.default.currentUser.isAnonymous()||i.default.currentUser.incognitoLogin?f().isFunction(window.Intercom)&&window.Intercom("shutdown"):IS("update")}));const AS={show:function(){if(window.Intercom)return window.Intercom("show"),!0}},TS=I().compile('<div class="support-dlg-content">\n  {{#each urls}}\n  <div class="support-dlg-option-container">\n    <input id="external_support_{{@index}}" type="radio" name="support_option" value="{{url}}" {{#if isDefault}}checked{{/if}}>\n    <label for="external_support_{{@index}}">{{text}}</label>\n  </div>\n  {{/each}}\n  <div class="support-dlg-option-container">\n    <input id="codio_support" type="radio" name="support_option" value="codio">\n    <label for="codio_support">To report a problem trying to access the {{whitelabel}} platform</label>\n  </div>\n</div>\n');var jS=u.default.promise.deferred();function ZS(){var e=i.default.currentProject;e&&e.eduStartedAssignmentInfo&&!e.isOpenedByTeacher?jS.promise.then((function(e){if(f().isEmpty(e))OS();else var t=E()(TS({urls:e,whitelabel:it.Z.get("whitelabel")})),n=new Ae.Z({title:"You want to contact Support",content:t,buttons:Ae.Z.MB_OKCANCEL,width:600,onClose:function(e){if(e===Ae.Z.IDOK){var t=n.content().find('[name="support_option"]:checked').val();"codio"===t?OS():window.open(t,"_blank")}}})})):OS()}function OS(){AS.show()||window.open("mailto:help@codio.com","_blank")}d.Z.subscribe("project:open",f().defer.bind(f(),(async function(){try{await(()=>{var e=i.default.currentProject;if(e&&e.eduStartedAssignmentInfo&&!e.isOpenedByTeacher){var t=e.course.details.contactUrlsList||[];t[e.course.details.defaultContactUrlIndex]&&(t[e.course.details.defaultContactUrlIndex].isDefault=!0),f().isEmpty(t)?ao.default.OrganizationManager.get(e.course.organizationId).then((e=>jS.resolve(e.details.contactUrls||[]))).catch((e=>jS.reject(e))):jS.resolve(t)}return jS.promise})()}catch{}}))),d.Z.subscribe("project:close",(function(){jS=u.default.promise.deferred()})),d.Z.subscribe("command:support:show",ZS);const NS=JSON.parse('{"name":"code-comments","description":"Comment student code","codio":{"global":true,"noFile":true,"title":"Code comments","urls":"code-comments"}}');var DS=n(60620),MS={};MS.info=NS,MS.hotkeys={},MS.get=async function(){return DS.ZP},i.default.register(MS);const RS=JSON.parse('{"name":"grading","description":"Grading","codio":{"global":true,"noFile":true,"title":"Grading","urls":"grading"}}');var LS=n(23060);const FS=(0,an.e)(tn.mf,!0);var BS=n(79435);const US=I().compile('<div class="assignments-grading-rubrics-tab-title">\r\n  <h3>ASSIGN A GRADE</h3>\r\n</div>\r\n<div class="assignments-grading-rubric-table-container">\r\n  <div class="assignments-grading-rubrics-table">\r\n    <div class="assignments-grading-rubrics-table-row grading-rubrics-table-header">\r\n      <div class="assignments-grading-rubrics-table-cell"></div>\r\n      {{#each template.pointsList}}\r\n      <div class="assignments-grading-rubrics-table-cell">\r\n      <span class="assignments-grading-rubrics-table-cell-content">\r\n        {{this}}\r\n      </span>\r\n      </div>\r\n      {{/each}}\r\n    </div>\r\n    {{#eachWithIndex template.rubricsList}}\r\n    <div class="assignments-grading-rubrics-table-row" data-index={{index}}>\r\n      <div class="assignments-grading-rubrics-table-cell">\r\n      <span class="assignments-grading-rubrics-table-cell-content">\r\n        {{title}}\r\n      </span>\r\n        <div class="assignments-grading-rubrics-table-percent">\r\n          {{weight}}%\r\n        </div>\r\n      </div>\r\n      {{#each gradesList}}\r\n      <div class="assignments-grading-rubrics-table-cell is-grade-cell {{#unless ../../readOnly}}is-clickable{{/unless}}" data-cell-id="{{id}}">\r\n        <span class="assignments-grading-rubrics-table-cell-content">\r\n          {{value}}\r\n        </span>\r\n      </div>\r\n      {{/each}}\r\n    </div>\r\n    {{/eachWithIndex}}\r\n  </div>\r\n</div>\r\n<div class="assignments-grading-rubric-footer">\r\n  <span>Result grade is&nbsp;</span>\r\n  <span class="assignments-grading-rubric-footer-value">0</span>\r\n</div>\r\n<div class="assignments-grading-rubrics-footer-buttons">\r\n  {{#if readOnly}}\r\n  <button class="btn assignments-grading-rubrics-footer-button assignments-grading-rubrics-footer-cancel-button">Close</button>\r\n  {{else}}\r\n  <button class="btn btn-primary assignments-grading-rubrics-footer-button assignments-grading-rubrics-footer-apply-button">Apply</button>\r\n  <button class="btn assignments-grading-rubrics-footer-button assignments-grading-rubrics-footer-cancel-button">Cancel</button>\r\n  {{/if}}\r\n</div>\r\n'),qS=I().compile('<div class="assignments-grading-rubric-no-template">\r\n  Looks like you do not choose grading template for this assignment. <br />Go to&nbsp;\r\n  <a href="/home/teacher/{{courseId}}" data-target="dashboard" >course assignments page</a>\r\n  &nbsp;and choose template on assignment settings screen\r\n</div>');const HS=class{constructor(e){this.container=e,this.activeRow=0,this.readOnly=!0,this.content=null}generateRubricsContent(e,t,n){return t?E()(US({grades:n.rubrics,template:t,readOnly:this.readOnly})):E()(qS({courseId:e}))}bindEvents(e,t){const n=this;d.Z.on(this.content,"click",".assignments-grading-rubrics-table-cell.is-clickable",(function(){const t=E()(this),i=t.closest(".assignments-grading-rubrics-table-row");n.activeRow=i.data("index"),n.updateActiveRow(),i.find(".assignments-grading-rubrics-table-cell").removeClass("is-active"),t.addClass("is-active"),n.updatePercentAndApplyBtnState(e)})),d.Z.on(this.content,"click",".assignments-grading-rubrics-footer-cancel-button",(function(){t(n.calculateResult(e),!1),n.close()})),d.Z.on(this.content,"click",".assignments-grading-rubrics-footer-apply-button",(function(){t(n.calculateResult(e),!0),n.close()}))}updateActiveRow(){const e=this.content.find(".assignments-grading-rubrics-table-row:not(.grading-rubrics-table-header)");e.removeClass("is-active"),this.readOnly?e.addClass("is-active"):e.eq(this.activeRow).addClass("is-active")}setGrades(e){const t=e.rubrics,n=f().map(t,(function(e){return".assignments-grading-rubrics-table-cell[data-cell-id="+e+"]"}));this.content.find(n.join(",")).addClass("is-active")}pointsView(e){return this.calculateResult(e).percent}updatePercentAndApplyBtnState(e){const t=this.collectGrades();this.content.find(".assignments-grading-rubric-footer-value").text(this.pointsView(e));const n=this.content.find(".assignments-grading-rubrics-footer-apply-button");this.readOnly||(e&&t.length===e.rubricsList.length?n.prop("disabled",!1):n.prop("disabled",!0))}showRubrics(e,t,n,i,s){this.activeRow=0,this.readOnly=n,this.content=this.generateRubricsContent(i,e,t),this.content.find(".assignments-grading-rubric-footer-value").text(this.pointsView(this.content)),!this.readOnly&&this.bindEvents(e,s),this.container.empty().append(this.content).show(),this.updateActiveRow(),this.setGrades(t),this.updatePercentAndApplyBtnState(e)}collectGrades(){return this.content.find(".assignments-grading-rubrics-table-cell.is-active").map((function(){return String(E()(this).data("cell-id"))})).get()}calculateResult(e){const t=this.collectGrades(),n={grades:t,percent:0,points:0},i=e?f().max(e.pointsList):0;if(!e||!i)return n;const s=f().sumBy(e.rubricsList,(function(n){const i=f().findIndex(n.gradesList,(function(e){return f().includes(t,e.id)}));if(-1===i)return 0;return(n.weight||0)*e.pointsList[i]/100}));return{points:Math.round(s),percent:Math.round(100*s/i),grades:t}}close(){d.Z.off(this.content),this.content=null,this.container&&this.container.empty()}},GS='<tr class="assignments-grading-table-grade-row" data-grade-type="{{gradeInfo.type}}">\r\n  <td class="assignments-grading-table-header-gradingType">\r\n    {{#if gradeInfo.teacherOrOverride}}\r\n      {{#if gradeInfo.grade}}\r\n        {{gradeInfo.teacherName}}{{#equals gradeInfo.type "Override"}} *{{/equals}}\r\n      {{else}}\r\n        {{#equals gradeInfo.type "Teacher"}}\r\n        {{gradeInfo.type}}\r\n        {{/equals}}\r\n      {{/if}}\r\n    {{else}}\r\n      {{gradeInfo.type}}\r\n    {{/if}}\r\n  </td>\r\n  {{#equals gradeInfo.type "Override"}}\r\n  <td></td>\r\n  {{/equals}}\r\n  {{#unless isFinalGrade}}\r\n  <td>\r\n    {{gradeInfo.weight}}\r\n  </td>\r\n  {{/unless}}\r\n  <td>\r\n    {{#if gradeInfo.grade}}{{gradeInfo.grade.grade}}{{/if}}\r\n  </td>\r\n  <td class="assignments-grading-table-comment-icon-cell">\r\n    {{#if gradeInfo.grade}}{{#if gradeInfo.grade.comments}}<i class="ss-icon">comment</i>{{/if}}{{/if}}\r\n  </td>\r\n  <td>\r\n    {{#if gradeInfo.grade}}{{#if gradeInfo.grade.datetime}}\r\n      {{formatTimestamp gradeInfo.grade.datetime \'MMM Do h:mma\'}}\r\n    {{/if}}{{/if}}\r\n  </td>\r\n  {{#if isTeacher}}\r\n  <td>\r\n    {{#if gradeInfo.teacherOrOverride}}\r\n    {{#if gradeInfo.grade}}\r\n    <button class="btn assignments-grading-button assignments-grading-edit-button">Edit</button>\r\n    {{else}}\r\n      {{#equals gradeInfo.type "Teacher"}}\r\n      <button class="btn assignments-grading-button assignments-grading-edit-button">Add Grade</button>\r\n      {{else}}\r\n      <button class="btn assignments-grading-button assignments-grading-edit-button">Override Grade</button>\r\n      {{/equals}}\r\n    {{/if}}\r\n    {{/if}}\r\n  </td>\r\n  {{/if}}\r\n</tr>\r\n{{#if gradeInfo.grade}}{{#if gradeInfo.grade.comments}}\r\n<tr class="assignments-grading-table-comment-row assignments-grading-table-comment-row--{{gradeInfo.type}}">\r\n  <td colspan="{{#if isFinalGrade}}5{{else}}6{{/if}}">\r\n    <div class="assignments-grading-comments" {{#if gradeInfo.grade.renderedCommentsId}}id="{{gradeInfo.grade.renderedCommentsId}}"{{/if}}>\r\n      {{gradeInfo.grade.comments}}\r\n    </div>\r\n  </td>\r\n</tr>\r\n{{/if}}{{/if}}\r\n{{#equals gradeInfo.type "Override"}}\r\n{{#if gradeInfo.grade}}\r\n<tr class="assignments-grading-table-hintRow">\r\n  <td colspan="5">\r\n    * Result grade overridden manually\r\n  </td>\r\n</tr>\r\n{{/if}}\r\n{{/equals}}\r\n',WS=I().compile(GS),zS=I().compile('<tr class="assignments-grading-table-grade-row assignments-grading-table-grade-row--edit" data-grade-type="{{gradeInfo.type}}">\r\n  <td class="assignments-grading-table-header-gradingType">\r\n    {{#if gradeInfo.grade}}\r\n      {{gradeInfo.teacherName}}\r\n    {{else}}\r\n      {{gradeInfo.type}}\r\n    {{/if}}\r\n  </td>\r\n  <td></td>\r\n  <td>\r\n    <input\r\n      class="assignments-grading-input-field"\r\n      type="number"\r\n      {{#if hasGradingTemplate}}\r\n        {{#exists rubricSelectedValue}}\r\n          value="{{rubricSelectedValue}}"\r\n        {{else}}\r\n          value="{{#exists gradeInfo.grade}}{{gradeInfo.grade.grade}}{{else}}0{{/exists}}"\r\n        {{/exists}}\r\n      {{else}}\r\n          value="{{#exists gradeInfo.grade}}{{gradeInfo.grade.grade}}{{else}}0{{/exists}}"\r\n      {{/if}}\r\n      {{#exists gradeInfo.grade}}\r\n      value="{{gradeInfo.grade.grade}}"\r\n      {{/exists}}\r\n      min="0"\r\n      max="100"\r\n      {{#equals gradeInfo.type "Teacher"}}{{#if hasGradingTemplate}}readonly{{/if}}{{/equals}}\r\n      placeholder="100"\r\n    />\r\n  </td>\r\n  <td class="assignments-grading-table-comment-icon-cell">\r\n    <select id="feedback-{{gradeInfo.type}}" title="Format">\r\n      <option {{#equals gradeInfo.format 0}}selected{{/equals}} value="0">Text</option>\r\n      <option {{#equals gradeInfo.format 1}}selected{{/equals}} value="1">Markdown</option>\r\n      <option {{#equals gradeInfo.format 2}}selected{{/equals}} value="2">Html</option>\r\n    </select>\r\n  </td>\r\n  <td>\r\n    {{#unless gradeInfo.grade}}\r\n      <button class="btn assignments-grading-button assignments-grading-cancel-button">Cancel</button>\r\n    {{else}}\r\n      {{#equals gradeInfo.type "Teacher"}}\r\n      <button class="btn assignments-grading-button assignments-grading-cancel-button">Cancel</button>\r\n      {{else}}\r\n      <button class="btn assignments-grading-button assignments-grading-remove-button">Remove</button>\r\n      {{/equals}}\r\n    {{/unless}}\r\n  </td>\r\n  <td>\r\n    <button class="btn assignments-grading-button assignments-grading-done-button">Done</button>\r\n  </td>\r\n</tr>\r\n<tr class="assignments-grading-table-comment-row--edit assignments-grading-table-comment-row--{{gradeInfo.type}}">\r\n  <td colspan="6">\r\n    <textarea\r\n      class="assignments-grading-table-comment-ta"\r\n      placeholder="place your comment here..."\r\n      maxlength="4000"\r\n    >{{#exists gradeInfo}}{{#if gradeInfo.grade}}{{gradeInfo.grade.comments}}{{/if}}{{/exists}}</textarea>\r\n  </td>\r\n</tr>\r\n'),VS=I().compile('<div class="assignments-grading-header">\r\n  <div class="assignments-grading-assignmentName">Grade for "{{ aSettings.name }}"</div>\r\n  {{#if isCompleted}}\r\n  <div class="assignments-grading-completedDate">Completed date: {{ completedDate }}</div>\r\n  {{/if}}\r\n</div>\r\n{{#if gradingEnabled}}\r\n<div class="assignments-grading-panel">\r\n  <div class="assignments-grading-panel-header">\r\n    Grade Components\r\n  </div>\r\n  <div class="assignments-grading-panel-inner">\r\n    <table class="assignments-grading-table">\r\n      {{> gradeHeader isTeacher=isTeacher}}\r\n      <tbody>\r\n      {{#each grades}}\r\n      {{> grade gradeInfo=this isTeacher=../isTeacher}}\r\n      {{/each}}\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</div>\r\n{{/if}}\r\n<div class="assignments-grading-panel assignments-grading-panel-final">\r\n  <div class="assignments-grading-panel-header">\r\n    Grade Adjustments\r\n  </div>\r\n  <div class="assignments-grading-panel-inner">\r\n    <table class="assignments-grading-table assignments-grading-table-final">\r\n      {{> gradeHeader isTeacher=isTeacher isFinalGrade=true}}\r\n      <tbody>\r\n      {{#if showCombinedGrade}}\r\n      <tr class="assignments-grading-table-grade-row" data-grade-type="Combined">\r\n        <td class="assignments-grading-table-header-gradingType">Combined Grade</td>\r\n        <td></td>\r\n        <td>\r\n          <div class="assignments-grading-table-gradeView">\r\n            {{#if gradesInfo}}\r\n            {{#if gradesInfo.grade}}{{ gradesInfo.grade.value }}{{/if}}\r\n            {{/if}}\r\n          </div>\r\n        </td>\r\n        <td class="assignments-grading-table-comment-icon-cell">\r\n        </td>\r\n        <td></td>\r\n        {{#if isTeacher}}\r\n        <td></td>\r\n        {{/if}}\r\n      </tr>\r\n      {{/if}}\r\n      {{#if showLatePenalty}}\r\n      <tr class="assignments-grading-table-grade-row" data-grade-type="Penalty">\r\n        <td class="assignments-grading-table-header-gradingType">Late Penalty</td>\r\n        <td></td>\r\n        <td>\r\n          <div class="assignments-grading-table-gradeView">\r\n            {{#if gradesInfo}}\r\n            {{#if latePenalty}}-{{ latePenalty }}{{/if}}\r\n            {{/if}}\r\n          </div>\r\n        </td>\r\n        <td class="assignments-grading-table-comment-icon-cell">\r\n        </td>\r\n        <td></td>\r\n        {{#if isTeacher}}\r\n        <td class="form-fieldset assignments-grading-penaltyDisabled">\r\n          <label class="toggle">\r\n            <input type="checkbox" id="set_penalty_disabled" {{#if penaltyInfo.penaltyDisabled}}checked{{/if}}/>\r\n            <span class="toggle-label"></span>\r\n            <span class="toggle-handle"></span>\r\n          </label>\r\n          <label class="form-label" for="set_penalty_disabled">Do not apply penalty</label>\r\n        </td>\r\n        {{/if}}\r\n      </tr>\r\n      {{/if}}\r\n      {{#if showFinalGrade}}\r\n      <tr class="assignments-grading-table-grade-row" data-grade-type="Final">\r\n        <td class="assignments-grading-table-header-gradingType assignments-grading-table-header-finalGrade">Final Grade</td>\r\n        <td></td>\r\n        <td>\r\n          <div\r\n            class="assignments-grading-table-gradeView {{#if penaltyInfo.hasPenalty}}assignments-grading-table-gradeView--penalty{{/if}}"\r\n            title="{{ penaltyInfo.title }}"\r\n          >\r\n            {{#if gradesInfo}}\r\n            {{#if gradesInfo.gradeFinal}}{{ gradesInfo.gradeFinal.value }}{{ else }}{{ gradesInfo.grade.value }}{{/if}}\r\n            {{/if}}\r\n          </div>\r\n        </td>\r\n        <td class="assignments-grading-table-comment-icon-cell">\r\n        </td>\r\n        <td></td>\r\n        {{#if isTeacher}}\r\n        <td></td>\r\n        {{/if}}\r\n      </tr>\r\n      {{/if}}\r\n\r\n      {{#if gradesInfo}}\r\n      {{#if gradesInfo.comments}}\r\n      <tr class="assignments-grading-table-comment-row grading-table-comment-row--Final">\r\n        <td></td>\r\n        <td colspan="5">{{ gradesInfo.comments.value }}</td>\r\n      </tr>\r\n      {{/if}}\r\n      {{/if}}\r\n      {{#unless pairProgrammingEnabled}}\r\n      {{> grade gradeInfo=overrideGrade isTeacher=isTeacher isFinalGrade=true}}\r\n      {{/unless}}\r\n      <tr class="assignments-grading-table-grade-row" data-grade-type="ExtraCredit">\r\n        <td class="assignments-grading-table-header-gradingType">\r\n          Extra Credit\r\n        </td>\r\n        <td></td>\r\n        <td>\r\n          {{#if extraCredit}}\r\n          {{ extraCredit }}\r\n          {{/if}}\r\n        </td>\r\n        <td></td>\r\n        <td></td>\r\n        <td>\r\n          {{#if extraCredit}}\r\n          <button class="btn assignments-grading-button extraCredit-edit-button">Edit</button>\r\n          {{ else }}\r\n          <button class="btn assignments-grading-button extraCredit-edit-button">Add Extra Credit</button>\r\n          {{/if}}\r\n        </td>\r\n      </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</div>\r\n{{#if regradeRequest}}\r\n<div class="assignments-grading-panel">\r\n  <div class="assignments-grading-panel-header">\r\n    Regrade Request\r\n  </div>\r\n  <div class="assignments-grading-panel-inner">\r\n    <table class="assignments-grading-table">\r\n      <thead>\r\n        <tr class="assignments-grading-table-regrade-header-row">\r\n          <td colspan="5" class="assignments-grading-table-header-regrade-message">Message</td>\r\n          <td class="assignments-grading-table-header-regarde-acions">Actions</td>\r\n        </tr>\r\n      </thead>      \r\n      <tbody>\r\n        <tr class="assignments-grading-table-regrade-row">\r\n          <td colspan="5" class="assignments-grading-table-row-regrade-message">{{ regradeRequest }}</td>\r\n          <td class="assignments-grading-table-row-regarde-acions">\r\n            <button class="btn assignments-grading-button regradeRequest-reject-button">Reject</button>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</div>\r\n{{/if}}\r\n'),KS=I().compile('<div class="assignments-grading-container"></div>\n<div class="assignments-rubrics-container"></div>\n'),JS=I().compile('<tr class="assignments-grading-table-grade-row assignments-grading-table-grade-row--edit">\n  <td class="assignments-grading-table-header-gradingType">\n      Extra Credit\n  </td>\n  <td></td>\n  <td>\n    <input\n      class="assignments-grading-input-field"\n      type="number"\n      {{#exists extraCredit}}\n      value="{{extraCredit}}"\n      {{/exists}}\n      min="0"\n      max="100"\n      placeholder="0"\n    />\n  </td>\n  <td></td>\n  <td>\n      <button class="btn assignments-grading-button extraCredit-remove-button">Remove</button>\n  </td>\n  <td>\n      <button class="btn assignments-grading-button extraCredit-done-button">Done</button>\n  </td>\n</tr>\n'),YS=I().compile('<tr class="assignments-grading-table-regrade-row assignments-grading-table-regrade-row--edit">\n  <td colspan="4" class="assignments-grading-table-row-regrade-message">\n    <textarea\n    class="assignments-grading-table-comment-ta"\n    placeholder="Place teacher comments here..."\n    maxlength="4000"\n    ></textarea>\n  </td>\n  <td class="assignments-grading-table-row-regarde-acions">\n    <button class="btn assignments-grading-button regradeRequest-cancel-button">Cancel</button>\n  </td>\n  <td class="assignments-grading-table-row-regarde-acions">\n    <button class="btn assignments-grading-button regradeRequest-done-button">Done</button>\n  </td>\n</tr>\n'),QS="Assessments",XS="Script",$S="Teacher",eI="Override",tI="Final";ks.Z.registerPartial("grade",GS),ks.Z.registerPartial("gradeHeader",'<thead>\r\n  <tr class="assignments-grading-table-header-row">\r\n    <td class="assignments-grading-table-header-gradingType">\r\n      {{#if isFinalGrade}}Adjustment{{else}}Grade Component{{/if}}\r\n    </td>\r\n    {{#if isFinalGrade}}\r\n    <td></td>\r\n    {{else}}\r\n    <td class="assignments-grading-table-header-weight">Weight</td>\r\n    {{/if}}\r\n    <td class="assignments-grading-table-header-grade">Grade</td>\r\n    <td class="assignments-grading-table-header-comments">Comments</td>\r\n    <td class="assignments-grading-table-header-time">Time</td>\r\n    {{#if isTeacher}}\r\n    <td class="assignments-grading-table-header-actions">Actions</td>\r\n    {{/if}}\r\n  </tr>\r\n</thead>\r\n');class nI{constructor(e){if(!(this instanceof nI))return new nI(e);this.content=null,this.gradesInfo=null,this.template=null,this.extraCredit=null,this.gradesProcessed=[],this.container=e,this.container.append(E()(KS())),this.rubrics=new HS(e.find(".assignments-rubrics-container")),this.pendingReradeRequest=null,this.showGrading()}getASettings(e){return e.projectBased?e.projectBased.settings:e.bookBased.settings}showGrading(){const e=i.default.currentProject;if(e&&(e.isOpenedByTeacher||e.isUserAssignee)&&e.eduStartedAssignmentInfo){let t;const n=e.eduStartedAssignmentInfo.assignment,i=this.getASettings(n),s=i.gradingTemplate;t=s?((e,t)=>{const n=new LS.FindTemplateRequest;n.setOrganizationId(e),t&&n.setTemplateId((0,sn.x$)(t));const i=FS.find(n,(0,sn.sd)());return new Promise(((e,t)=>{const n=[];i.on("data",(e=>{n.push(e.toObject())})),i.on("end",(()=>{e(n)})),i.on("error",(e=>t(e))),i.on("status",(i=>{0===i.code?e(n):t(new Error(i.details))}))}))})(e.course.organizationId,s).then((e=>e?e[0]:null)).catch((()=>null)):Promise.resolve(null),this.pendingReradeRequest=i.allowRegradeRequest&&e.eduStartedAssignmentInfo.started.regradeRequests.find((e=>e.status===BS.ZI.PENDING)),Promise.all([$_.ZN(e.course.id,e.eduStartedAssignmentInfo.started.assignmentId,e.eduStartedAssignmentInfo.started.assignee),t]).then((e=>{let[t,n]=e;return this.template=n,this.initGrades(t).then((()=>this.render()))})).catch((function(e){je.Z.error(e.message)}))}}render(){this.generateGradingContent().then((e=>{this.container.find(".assignments-grading-container").empty().append(e)}))}reloadGradesOnSetGrade(){const e=i.default.currentProject;$_.ZN(e.course.id,e.eduStartedAssignmentInfo.started.assignmentId,e.eduStartedAssignmentInfo.started.assignee).then((e=>this.initGrades(e).then((()=>this.render())))).catch((function(e){je.Z.error(e.message)}))}renderGradeEdit(e){return E()(zS({hasGradingTemplate:!!this.template,gradeInfo:e,isFinalGrade:e.type===eI||e.type===tI}))}getGradeOverride(){const{gradeOverrideMap:e}=this.gradesInfo||{},{assignee:t}=i.default.currentProject.eduStartedAssignmentInfo.started;return e&&t.userId?e[t.userId]:null}generateGradingContent(){const e=i.default.currentProject,t=e.eduStartedAssignmentInfo.assignment,n=e.isOpenedByTeacher,s=this.getASettings(t),a=s.grading,o=a.assessments.enabled||a.script.enabled||a.custom.enabled,r=i.default.currentProject.pairProgramming,c=r&&r.enabled,l=e.eduStartedAssignmentInfo.started,d=l.completed&&l.completed.completed,h=d&&u.default.formatDateFullUSWithoutTZ(l.completed.completedAt),p=this.gradesInfo?this.gradesInfo.grade.value-this.gradesInfo.gradeFinal.value:null,m=this.gradesInfo&&this.hasGrade(a,this.gradesInfo),g=this.gradesInfo&&!f().isEmpty(this.gradesInfo.gradeOverrideMap),b=(0,CC.vc)(t)||this.gradesInfo&&this.gradesInfo.customPenalty&&f().isNumber(this.gradesInfo.customPenalty.value),v=m&&!g;return this.processGrade(eI,null,this.getGradeOverride()).then((i=>{const a=E()(VS({isTeacher:n,isLtiEnabled:e.isLtiEnabled,hasGradingTemplate:!!this.template,aSettings:s,gradingEnabled:o,gradesInfo:this.gradesInfo,grades:this.gradesProcessed,overrideGrade:i,penaltyInfo:this.getPenaltyInfo(t,this.gradesInfo),extraCredit:this.extraCredit,pairProgrammingEnabled:c,isCompleted:d,completedDate:h,showCombinedGrade:b&&m&&!g,showFinalGrade:v,latePenalty:p,showLatePenalty:!g,regradeRequest:this.pendingReradeRequest&&this.pendingReradeRequest.requestMessage}));return this.content=a,this.bindEvents(),this.putRenderedContent(i),f().each(this.gradesProcessed,(e=>this.putRenderedContent(e))),a}))}initGrades(e){this.gradesProcessed=[],this.gradesInfo=e?e[0]:null;const t=i.default.currentProject.eduStartedAssignmentInfo.assignment,n=this.getASettings(t).grading;return Promise.all([this.processGrade(QS,n.assessments,this.gradesInfo&&this.gradesInfo.assessmentsGrade),this.processGrade(XS,n.script,this.gradesInfo&&this.gradesInfo.scriptGrade),this.processGrade($S,n.custom,this.gradesInfo&&this.gradesInfo.teacherGrade)]).then((e=>{let[t,n,i]=e;this.gradesProcessed.push(t,n,i),this.gradesProcessed=f().compact(this.gradesProcessed),this.extraCredit=this.getExtraCredit(this.gradesInfo)}))}processGrade(e,t,n){return n=n||{},t&&!t.enabled?Promise.resolve(null):(n.type=e,t&&(n.weight=t.weight||0),n.grade&&n.grade.datetime&&(n.grade.datetime=new Date(1e3*n.grade.datetime.seconds+n.grade.datetime.nanos/1e6)),n.teacherOrOverride=e===$S||e===eI,(n.teacherOrOverride||e===XS)&&n.grade&&f().isString(n.grade.comments)?u.default.renderFeedback(n.grade.comments,n.format+1).then((e=>(n.grade.renderedComments=e,n.grade.renderedCommentsId=u.default.GUID(),n))):Promise.resolve(n))}putRenderedContent(e){e&&e.grade&&e.grade.renderedCommentsId&&this.content.find("#".concat(e.grade.renderedCommentsId)).html(e.grade.renderedComments)}renderGrade(e){return E()(WS({hasGradingTemplate:!!this.template,gradeInfo:e,isFinalGrade:e.type===eI||e.type===tI,isTeacher:i.default.currentProject.isOpenedByTeacher}))}renderExtraCreditEdit(e){return E()(JS({extraCredit:e}))}renderRejectRegradeRequest(){return E()(YS())}async validateGrade(e){if(!((e=parseInt(e,10))>=0&&e<=100))throw new Error("Your grade exceeds the limit from 0 to 100.")}setGrade(e,t,n,s){return this.validateGrade(e).then((()=>{const a=i.default.currentProject;return $_.wo({courseId:a.course.id,assignmentId:a.eduStartedAssignmentInfo.started.assignmentId,assignee:a.eduStartedAssignmentInfo.started.assignee,grade:e,comments:t,rubrics:s,format:n})}))}setOverride(e,t,n,s,a){return this.validateGrade(e).then((()=>{const o=i.default.currentProject,{assignee:r}=o.eduStartedAssignmentInfo.started;return $_.bg({courseId:o.course.id,assignmentId:o.eduStartedAssignmentInfo.started.assignmentId,studentId:r.userId,grade:e,comments:t,remove:!!a,rubrics:s,format:n})}))}setExtraCredit(e,t){return this.validateGrade(e).then((()=>{const n=i.default.currentProject,{assignee:s}=n.eduStartedAssignmentInfo.started;return $_.kM({courseId:n.course.id,assignmentId:n.eduStartedAssignmentInfo.started.assignmentId,assignee:s,extraCredit:e,remove:!!t})}))}setPenaltyDisabled(e){const t=i.default.currentProject,{assignee:n}=t.eduStartedAssignmentInfo.started;return $_.sI({courseId:t.course.id,assignmentId:t.eduStartedAssignmentInfo.started.assignmentId,assignee:n,penaltyDisabled:e})}bindEvents(){const e=this;d.Z.on(this.content,"click",".assignments-grading-table-comment-icon-cell",(function(){const e=E()(this).closest(".assignments-grading-table-grade-row");if(e.hasClass("assignments-grading-table-grade-row--edit"))return;const t=e.data("grade-type");e.siblings(".assignments-grading-table-comment-row--"+t).toggleClass("active")})),d.Z.on(this.content,"click",".assignments-grading-edit-button",(function(){const t=E()(this).closest(".assignments-grading-table-grade-row"),n=t.data("grade-type"),i=n===eI,s=e.getGradeOverride(),a=e.gradesInfo?e.gradesInfo.teacherGrade:null,o=i?s:a;t.siblings(".assignments-grading-table-comment-row--"+n).remove(),t.replaceWith(e.renderGradeEdit(o||{type:n,teacherOrOverride:!0})),E()("#feedback-".concat(n)).selectize()})),d.Z.on(this.content,"click",".assignments-grading-cancel-button",(function(){const t=E()(this).closest(".assignments-grading-table-grade-row--edit"),n=t.data("grade-type"),i=n===eI,s=e.getGradeOverride(),a=e.gradesInfo?e.gradesInfo.teacherGrade:null,o=i?s:a;t.siblings(".assignments-grading-table-comment-row--"+n).remove(),t.replaceWith(e.renderGrade(o||{type:n,teacherOrOverride:!0})),e.putRenderedContent(o)})),d.Z.on(this.content,"click",".assignments-grading-remove-button",(function(){e.setOverride(0,"",0,[],!0).then((function(){e.reloadGradesOnSetGrade()})).catch((function(e){je.Z.error(e.message)}))})),d.Z.on(this.content,"click",".assignments-grading-done-button",(function(){const t=E()(this).closest(".assignments-grading-table-grade-row--edit"),n=t.data("grade-type"),s=i.default.currentProject.isOpenedByTeacher,a=n===eI,o=e.getGradeOverride(),r=e.gradesInfo?e.gradesInfo.teacherGrade:null,c=a?o:r,l=t.find(".assignments-grading-input-field"),d=l.val(),u=t.siblings(".assignments-grading-table-comment-row--"+n).find(".assignments-grading-table-comment-ta").val(),h=parseInt(t.find("#feedback-".concat(n)).val(),10);let p=[];if(e.template&&s&&!a){const e=c&&c.rubricsList||[];p=l.data("rubrics")||e}(a?e.setOverride.bind(e):e.setGrade.bind(e))(d,u,h,p).then((function(){const t=e.getASettings(i.default.currentProject.eduStartedAssignmentInfo.assignment),n=i.default.currentProject.eduStartedAssignmentInfo.started.regradeRequests.filter((e=>e.status===BS.ZI.PENDING)).length>0;if(t.allowRegradeRequest&&n)return $_.ch(i.default.currentProject.eduStartedAssignmentInfo.started.assignmentId,i.default.currentProject.eduStartedAssignmentInfo.started.assignee).then((()=>{e.pendingReradeRequest=null}));Promise.resolve()})).then((function(){e.reloadGradesOnSetGrade()})).catch((function(e){je.Z.error(e.message)}))})),d.Z.on(this.content,"click",".extraCredit-edit-button",(function(){const t=E()(this).closest(".assignments-grading-table-grade-row"),n=e.getExtraCredit(e.gradesInfo);t.replaceWith(e.renderExtraCreditEdit(n))})),d.Z.on(this.content,"click",".extraCredit-remove-button",(function(){e.setExtraCredit(0,!0).then((function(){e.reloadGradesOnSetGrade()})).catch((function(e){je.Z.error(e.message)}))})),d.Z.on(this.content,"click",".extraCredit-done-button",(function(){const t=E()(this).closest(".assignments-grading-table-grade-row--edit").find(".assignments-grading-input-field").val();e.setExtraCredit(t,!1).then((function(){e.reloadGradesOnSetGrade()})).catch((function(e){je.Z.error(e.message)}))})),d.Z.on(this.content,"click",".regradeRequest-reject-button",(function(){E()(this).closest(".assignments-grading-table-regrade-row").replaceWith(e.renderRejectRegradeRequest())})),d.Z.on(this.content,"click",".regradeRequest-cancel-button",(function(){e.render()})),d.Z.on(this.content,"click",".regradeRequest-done-button",(async function(){const t=i.default.currentProject,n=E()(this).closest(".assignments-grading-table-regrade-row--edit").find(".assignments-grading-table-comment-ta").val();try{await $_.QH(t.eduStartedAssignmentInfo.started.assignmentId,t.eduStartedAssignmentInfo.started.assignee,n),e.pendingReradeRequest=null,e.render()}catch(e){je.Z.error(e.message)}})),d.Z.on(this.content,"click",".assignments-grading-input-field",(function(t){const n=E()(this),s=n.closest(".assignments-grading-table-grade-row--edit").data("grade-type")===$S;if(e.template&&s){t.preventDefault();const a=e.gradesInfo?e.gradesInfo.teacherGrade:null,o=a&&a.rubricsList||[],r={rubrics:n.data("rubrics")||o,percent:n.val()};e.container.find(".assignments-grading-container").hide(),e.rubrics.showRubrics(e.template,r,!s,i.default.currentProject.course.id,e.onRubricChanged.bind(e,n))}})),d.Z.on(this.content.find("input.assignments-grading-percent-input"),"keydown",(function(e){return e.keyCode<=57||e.keyCode>=96&&e.keyCode<=105})),d.Z.on(this.content,"click","#set_penalty_disabled",(function(){const t=E()(this),n=t.is(":checked");e.setPenaltyDisabled(n).then((function(){e.reloadGradesOnSetGrade()})).catch((function(e){t.prop("checked",!n),je.Z.error(e.message)}))}))}onRubricChanged(e,t,n){n&&e.val(t.percent).data("rubrics",t.grades),this.container.find(".assignments-grading-container").show()}isPenaltyApplied(e,t){var n;if(!i.default.currentProject.penaltyReached)return!1;const s=(0,CC.bz)(e),a=(null===(n=t.completed)||void 0===n?void 0:n.completed)&&Date.parse(t.completed.completedAt)||Date.now(),o=6e4*i.default.currentProject.penaltyExtendMin;return a>new Date(Date.parse(s.due.at)+o).getTime()}getPenaltyInfo(e,t){var n;let s="";const a=this.isPenaltyApplied(e,i.default.currentProject.eduStartedAssignmentInfo.started),o=f().isNumber(null==t||null===(n=t.customPenalty)||void 0===n?void 0:n.value),r=a&&!this.getGradeOverride();if(o)s="Penalty from grading script ".concat(t.customPenalty.value," total");else if(r){const n=(0,CC.bz)(e),a=6e4*i.default.currentProject.penaltyExtendMin,o=new Date(Date.parse(n.due.at)+a);if(t){const e=t.grade.value-t.gradeFinal.value;s="penalties applied of ".concat(e," points total from due ").concat((0,u.yU)(o))}else{const{deductionPercent:e,deductionIntervalMinutes:t}=n.penaltyV2||{},i=60===t?"1 hour":"1 day";s="penalties will be applied from the due ".concat((0,u.yU)(o)," by ").concat(e,"% every ").concat(i)}}const c=t&&t.penaltyDisabled;return{hasPenalty:(o||r)&&!c,penaltyDisabled:c,title:s}}hasGrade(e,t){const{assignee:n}=i.default.currentProject.eduStartedAssignmentInfo.started,s=t&&t.gradeOverride,a=s&&n&&n.userId&&s[n.userId];return t&&(a||e.assessments.enabled&&!!t.assessmentsGrade||e.script.enabled&&!!t.scriptGrade||e.custom.enabled&&!!t.teacherGrade)}getExtraCredit(e){const{extraCredit:t}=e||{};return t&&t.grade&&t.grade.grade}close(){d.Z.off(this.content),this.container&&this.container.empty(),this.gradesProcessed=null,this.gradesInfo=null,this.template=null,this.extraCredit=null,this.content=null,this.rubrics=null}}const iI=nI;i.default.register({info:RS,get:async function(){if(i.default.currentUser&&"STUDENT"===i.default.currentUser.get("details").get("type"))throw new Error("Not allowed");return iI}});var sI=n(18566),aI=n.n(sI);const oI=I().compile('<div class="got-to-call-footer-text-chat">\n  <button\n    class="call-footer-text-chat-button call-footer-btn btn invisible"\n    title="Chat"\n    aria-label="Chat"\n    id="callToggleChatBtn"\n  >\n    <i class="ss-icon">chat</i>\n    <span class="call-footer-btn-text">Chat</span>\n  </button>\n</div>\n<div class="call-footer-video-chat">\n  <button\n    id="callToggleMicBtn"\n    class="call-footer-video-chat-button call-footer-btn btn"\n    title="Turn on microphone"\n    aria-label="Turn on microphone"\n  >\n    <i class="ss-icon">mic</i>\n    <div class="call-footer-btn-off"></div>\n  </button>\n  <button\n    id="callToggleCallBtn"\n    class="call-footer-video-chat-button call-footer-btn btn"\n    title="Start the call"\n    aria-label="Start the call"\n  >\n    <i class="ss-icon">call</i>\n  </button>\n  <button\n    id="callToggleCamBtn"\n    class="call-footer-video-chat-button call-footer-btn btn"\n    title="Turn on camera"\n    aria-label="Turn on camera"\n  >\n    <i class="ss-icon">facetime</i>\n    <div class="call-footer-btn-off"></div>\n  </button>\n</div>\n<div class="call-footer-settings">\n  <button\n    id="callToggleSettingsBtn"\n    class="call-footer-settings-button call-footer-btn btn"\n    title="Settings"\n    aria-label="Settings"\n    disabled\n  >\n    <i class="ss-icon">settings</i>\n  </button>\n</div>\n'),rI=d.Z.create(n(30011)),cI=e=>e.find(".call-footer-btn-off").hasClass("hide");const lI=class{constructor(e){this.container=e,this.init()}init(){this.container.append(E()(oI())),this.bindEvents()}toggleMic(e){const t=E()(e.currentTarget);t.find(".call-footer-btn-off").toggleClass("hide"),rI.publishMic({needPublish:cI(t)})}toggleCam(e){const t=E()(e.currentTarget);t.find(".call-footer-btn-off").toggleClass("hide"),rI.publishCam({needPublish:cI(t)})}toggleSettings(e){const t=E()(e.currentTarget);t.hasClass("call-btn--active")?rI.showSettings({show:!1}):(t.addClass("call-btn--active"),rI.showSettings({show:!0}))}toggleChat(e){const t=E()(e.currentTarget);t.hasClass("call-btn--active")?(t.removeClass("call-btn--active"),rI.showChat({show:!1})):(t.addClass("call-btn--active"),rI.showChat({show:!0}))}bindEvents(){d.Z.on(this.container,"click.call-footer","#callToggleCallBtn",(()=>{rI.togglePublishStream()})),d.Z.on(this.container,"click.call-footer","#callToggleMicBtn",this.toggleMic.bind(this)),d.Z.on(this.container,"click.call-footer","#callToggleCamBtn",this.toggleCam.bind(this)),d.Z.on(this.container,"click.call","#callToggleSettingsBtn",this.toggleSettings.bind(this)),d.Z.on(this.container,"click.call","#callToggleChatBtn",this.toggleChat.bind(this)),this.footerEvents=[d.Z.subscribe("call:settings:closed",(()=>{this.container.find("#callToggleSettingsBtn").removeClass("call-btn--active")})),d.Z.subscribe("call:chat:closed",(()=>{this.container.find("#callToggleChatBtn").removeClass("call-btn--active")}))]}needPublishAudio(){const e=this.container.find("#callToggleMicBtn");return cI(e)}needPublishVideo(){const e=this.container.find("#callToggleCamBtn");return cI(e)}disableButtons(){this.container.find("button:not(.call-footer-text-chat-button)").attr("disabled",!0)}enableCallButtons(){this.container.find(".call-footer-video-chat button").attr("disabled",!1)}enableSettingBtn(){this.container.find("#callToggleSettingsBtn").attr("disabled",!1)}hideChatBtn(){this.container.find("#callToggleChatBtn").addClass("invisible")}showChatBtn(){this.container.find("#callToggleChatBtn").removeClass("invisible")}destroy(){this.container&&this.container.remove(),this.footerEvents&&d.Z.unsubscribe(this.footerEvents),this.container=null}},dI=I().compile('<div id="inline-modal-{{id}}" class="inline-modal">\n  <button class="inline-modal-close-btn" title="Close" aria-label="Close">Ã—</button>\n  <div class="inline-modal-body"></div>\n</div>');const uI=class{constructor(e,t,n){this.container=e,this.content=t,this.closeCallback=n,this.id=u.default.GUID(2),this.modalContainer=E()(dI({id:this.id})),this.modalContainer.find(".inline-modal-body").append(this.content),this.bindEvents()}bindEvents(){d.Z.on(this.modalContainer,"click.inline-modal",".inline-modal-close-btn",(()=>{this.close()}))}open(){this.container.append(this.modalContainer)}close(){this.modalContainer.detach(),this.closeCallback&&this.closeCallback()}destroy(){this.modalContainer.remove(),this.container=null,this.modalContainer=null,this.content=null}},hI=d.Z.create(n(30011)),pI=I().compile('<fieldset class="call-settings-content">\n  <div>\n    <label for="microphoneSource">Microphone</label>\n    <select id="microphoneSource" class="call-settings-select">\n      {{#each audioInput}}\n      <option value="{{deviceId}}" {{#equals selectedAudioSrcId deviceId}}selected{{/equals}}>{{label}}</option>\n      {{/each}}\n    </select>\n  </div>\n  <div>\n    <label for="cameraSource">Camera</label>\n    <select id="cameraSource" class="call-settings-select">\n      {{#each videoInput}}\n      <option value="{{deviceId}}" {{#equals selectedVideoSrcId deviceId}}selected{{/equals}}>{{label}}</option>\n      {{/each}}\n    </select>\n  </div>\n</fieldset>');const fI=class{constructor(e,t,n,i){this.container=e,this.initModal(t,n,i)}initModal(e,t,n){const i=f().groupBy(n,"kind");this.content=E()(pI({...i,selectedVideoSrcId:e,selectedAudioSrcId:t})),this.bindSettingsEvents(this.content),this.settingsModal=new uI(this.container,this.content,this.onSettingsClose.bind(this))}bindSettingsEvents(){d.Z.on(this.container,"change.call-settings","#microphoneSource",(e=>{const t=E()(e.currentTarget).val();hI.changeMicrophoneSource({deviceId:t})})),d.Z.on(this.container,"change.call-settings","#cameraSource",(e=>{const t=E()(e.currentTarget).val();hI.changeCameraSource({deviceId:t})})),this.openSettingsHandler=d.Z.subscribe("call:showSettings",((e,t)=>{let{show:n}=t;n?(this.settingsModal.open(),this.content.find(":input").first().focus()):this.settingsModal.close()}))}onSettingsClose(){hI.settingsClosed()}destroy(){this.openSettingsHandler&&d.Z.unsubscribe(this.openSettingsHandler),d.Z.off(this.container,".call-settings")}},mI=e=>f().map(e,(e=>bI(e.connection))).filter((e=>!!e)).sort(),gI=e=>{const t=e.data?e.data.split(",actualName="):[];return{userName:t[1]||"",gravatarId:t[0].replace("gravatarId=","")||""}},bI=(e,t)=>gI(e).userName||t,vI=e=>"".concat("call-stream-").concat(e);let yI=u.default.promise.deferred(),wI={},_I=null,kI=null,PI=!1,CI=!1,xI={};const EI=()=>wI,SI=()=>_I,II=()=>kI,AI=e=>{kI=e},TI=()=>PI,jI=e=>{PI=e},ZI=()=>CI,OI=()=>{yI=u.default.promise.deferred(),wI={},_I=null,kI=null,CI=!1,xI={}},NI=d.Z.create(n(30011)),DI=u.default.KeyCode,MI=I().compile('<div class="call-text-chat-close-button-container">\n  <button class="call-text-chat-close-button" aria-label="Close chat">\n    <i class="ss-icon call-text-chat-close-button-icon">close</i>\n  </button>\n</div>\n<div class="call-text-chat-history"></div>\n<div class="call-text-chat-footer">\n  <textarea\n    class="call-text-chat-ta"\n    rows="1"\n    aria-labelledby="callChatSendBtn"\n    placeholder="Enter your message here..."\n  ></textarea>\n  <button\n    id="callChatSendBtn"\n    class="btn call-text-chat-send-btn"\n    type="button"\n    aria-label="Send a message"\n    disabled\n  >\n    <i class="ss-icon">send</i>\n  </button>\n</div>\n'),RI=I().compile('<div class="call-text-chat-history-message">\n  <div class="call-text-chat-history-message-info">\n    <img\n      class="call-text-chat-history-message-info-img"\n      src="{{imageSrc}}"\n      alt="Avatar of {{userName}}"\n    >\n    <div class="call-text-chat-history-message-info-name">\n      {{userName}}\n    </div>\n    <div class="call-text-chat-history-message-info-date">\n      on {{formatDateFullUS timestamp}}\n    </div>\n  </div>\n  <div class="call-text-chat-history-message-text">{{message}}</div>\n</div>\n');const LI=class{constructor(e){this.container=e,this.init()}init(){const e=E()(MI({}));this.container.append(e),this.bindEvents()}bindEvents(){d.Z.on(this.container,"click.call-chat",".call-text-chat-send-btn",(()=>{this.sendMessage(this.container.find(".call-text-chat-ta").val())})),d.Z.on(this.container,"keydown.call-chat",".call-text-chat-ta",this.onKeyDown.bind(this)),d.Z.on(this.container,"input.call-chat",".call-text-chat-ta",this.onChange.bind(this)),d.Z.on(this.container,"click.call-chat",".call-text-chat-close-button",this.toggleChat.bind(this,{show:!1}));SI().on("signal:msg",this.drawMessage.bind(this)),this.showChatHandler=d.Z.subscribe("call:showChat",this.toggleChat.bind(this)),this.publishStartedHandler=d.Z.subscribe("call:publishStarted",(()=>{this.enableControls()})),this.publishStoppedHandler=d.Z.subscribe("call:publishStopped",(()=>{this.disableControls()}))}onKeyDown(e){const t=E()(e.target),n=this.container.find(".call-text-chat-send-btn");let i=e.which||e.keyCode;e.shiftKey||i!==DI.RETURN||!t.val()||n.attr("disabled")||this.sendMessage(t.val())}onChange(e){const t=E()(e.target);this.disableSendButton(""===t.val())}disableControls(){this.disableInput(!0),this.disableSendButton(!0)}enableControls(){const e=this.container.find(".call-text-chat-ta");this.disableInput(!1),e.val()&&this.disableSendButton(!1)}disableInput(e){this.container.find(".call-text-chat-ta").attr("disabled",e)}disableSendButton(e){this.container.find(".call-text-chat-send-btn").attr("disabled",e)}sendMessage(e){SI().signal({type:"msg",data:e},(e=>{e?je.Z.error("Error sending signal: ".concat(e.name," ").concat(e.message)):(this.container.find(".call-text-chat-ta").val(""),this.disableSendButton(!0))}))}isScrolledToBottom(){const e=this.container.find(".call-text-chat-history"),{scrollHeight:t}=e.get(0),n=t-e.outerHeight();return Math.ceil(e.scrollTop())>=n}drawMessage(e){const t=this.isScrolledToBottom(),n=gI(e.from),{userName:i,gravatarId:s}=n,a=e.data,o="//www.gravatar.com/avatar/".concat(s),r=E()(RI({imageSrc:o,userName:i||"Anonymous",timestamp:Date.now(),message:a}));if(this.container.find(".call-text-chat-history").append(r),t){const e=this.container.find(".call-text-chat-history");e.scrollTop(e.get(0).scrollHeight)}var c,l;SI().connection.id!==e.from.id&&(c="New message from ".concat(i),l={body:a,icon:o},"Notification"in window&&("granted"===Notification.permission?new Notification(c,l):"denied"!==Notification.permission&&Notification.requestPermission().then((e=>{"granted"===e&&new Notification(c,l)}))))}toggleChat(e,t){let{show:n}=t;n?this.container.removeClass("hide"):(this.container.addClass("hide"),NI.chatClosed())}destroy(){this.container.remove(),this.container=null;SI().off("signal:msg"),this.showChatHandler&&d.Z.unsubscribe(this.showChatHandler),this.publishStartedHandler&&d.Z.unsubscribe(this.publishStartedHandler),this.publishStoppedHandler&&d.Z.unsubscribe(this.publishStoppedHandler)}},FI=e=>{if("OT_USER_MEDIA_ACCESS_DENIED"===e.name){return"Permission denied for the A/V connection. "+"<a href='".concat("https://docs.codio.com/common/develop/ide/editing/av-chat.html#permissions",'\' target="_blank">Click here</a>')+" to read how to re-enable permissions on your browser"}return e.message},BI=d.Z.create(n(30011)),UI=async()=>{const{currentProject:e}=i.default;if(!e)return Promise.reject(new Error("No project"));try{await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(e){const t=new Error(e.message);throw t.name="OT_USER_MEDIA_ACCESS_DENIED",t}return(()=>{const{currentProject:e}=i.default,{guid:t}=e;return ao.O.loadSession(t)})()},qI=()=>{const e=SI();e.on("streamCreated",(e=>{const{stream:t}=e;(e=>{wI[e.id]=e})(t),BI.sessionStreamCreated({stream:t})})),e.on("streamDestroyed",(e=>{const{stream:t}=e;var n;n=t.id,delete wI[n],BI.sessionStreamDestroyed({stream:t})})),e.on("exception",(e=>HI(FI(e)))),e.on("streamPropertyChanged",(e=>{BI.streamPropertyChanged({event:e})}))},HI=e=>{e&&je.Z.error(e.message||e)},GI=()=>{if(!ZI()){CI=!0;UI().then((e=>{const{apiKey:t,sessionId:n,token:i}=e,s=aI().initSession(t,n);(e=>{_I=e,yI.resolve()})(s),s.connect(i,HI),qI()})).catch((e=>{OI(),HI(FI(e)),BI.destroyCall()}))}},WI=d.Z.create(n(30011)),zI=I().compile('<div class="call">\n  <div class="call-top">\n    <div class="call-video-chat"></div>\n    <div class="call-connection-info"></div>\n  </div>\n  <div class="call-divider hide" tabindex="0" role="separator"></div>\n  <div class="call-bottom">\n    <div class="call-resize-chat"></div>\n    <div class="call-text-chat hide"></div>\n    <div class="call-footer"></div>\n  </div>\n</div>'),VI=I().compile('<div id="{{id}}" class="call-video-chat-item">\n  <div class="call-video-chat-item-info">\n    <div class="call-video-chat-item-info-status">\n      <i class="ss-icon">mic</i>\n      <div class="call-video-chat-item-info-status-off {{#if hasAudio}}hide{{/if}}"></div>\n    </div>\n    <div class="call-video-chat-item-info-name">{{userName}}</div>\n  </div>\n</div>\n'),KI={insertMode:"append",width:"100%",height:"100%"};let JI=!1;const YI=u.default.KeyCode,QI=[YI.UP,YI.DOWN];const XI=e=>(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1,!1),$I=function(e,t,n){if(JI){const i=t.height()-e.pageY+t.offset().top;eA(i,t,n),XI(e)}},eA=(e,t,n)=>{const i=tA(t,-e),s=tA(n,e);f().isNumber(i)&&f().isNumber(s)&&(nA(t,i),nA(n,s))};function tA(e,t){return e.height()+t}function nA(e,t){e.css("height",t+"px")}const iA=(e,t)=>{JI&&(JI=!1),t.off("mouseup mousemove")},sA=class{constructor(e){this.container=e,this.callActivated=!1,this.activate()}activate(){this.callActivated||(this.callActivated=!0,ZI()||GI(),yI.promise.then((()=>this.activateCall())).catch(this.handleError))}addVideoChatItem(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=E()(VI({id:e,userName:t,hasAudio:n}));this.container.find(".call-video-chat").append(i)}removeVideoChatItem(e){this.container.find("#".concat(e)).remove()}addSubscriberIdToVideoChatItem(e,t){this.container.find("#".concat(e)).data("subscriberId",t)}getSubscriberIdByVideoChatElId(e){return this.container.find("#".concat(e)).data("subscriberId")}getPublishOptions(){return{showControls:!1,publishAudio:this.footer&&this.footer.needPublishAudio(),publishVideo:this.footer&&this.footer.needPublishVideo()}}activateCall(){const e=E()(zI());this.footer=new lI(E()(e.find(".call-footer"))),this.container.find(".call-loading").remove(),this.container.append(e);const{currentUser:t}=i.default,n=t.displayName(),s=vI(t.getAccountUid());this.addVideoChatItem(s,n),this.footer.disableButtons(),this.bindEvents(),f().defer((()=>{this.initPublisher(s),this.updateConnectionsInfo(),this.resize()}))}initChat(){this.chat=new LI(this.container.find(".call-text-chat"))}initPublisher(e){const t=aI().initPublisher(e,{...KI,...this.getPublishOptions()},(e=>{e?(this.handleError(FI(e)),(e=>"OT_USER_MEDIA_ACCESS_DENIED"===e.name)(e)&&WI.destroyCall()):(this.bindPublisherEvents(),this.initSettingsModal(),this.initChat(),this.footer.enableCallButtons())}));AI(t)}initSettingsModal(){aI().getDevices(((e,t)=>{if(e)this.handleError(e);else{this.footer.enableSettingBtn();const e=II(),n=e.getVideoSource().deviceId,i=e.getAudioSource().deviceId;this.settings=new fI(this.container.find(".call-video-chat"),n,i,t),this.bindSettingsEvents()}}))}handleError(e){e&&je.Z.error(e.message||e)}bindEvents(){this.bindSessionEvents(),this.bindFooterEvents(),this.bindChatEvents();const e=f().debounce(this.resize.bind(this),200,{maxWait:1e3});this.resizeListenerId=d.Z.subscribe("panel:size:change",e),this.bindResizeEvents()}updateConnectionsInfo(){const e=this.container.find(".call-connection-info");if(this.isOnCall())!e.hasClass("hide")&&e.addClass("hide");else{const t=(e=>{let t="There is no one else on the call.<br/>Click the green call button to start the call.<br/>Others in this project will be notified that there is an active call to join.",n=[];if(f().size(e)&&(n=mI(e)),n.length>0){let e;if(1===n.length)e="".concat(n[0]," is on the call.");else{const t=n.reduce(((e,t,i)=>"".concat(e,", ").concat(i===n.length-1?"and ":"").concat(t)));e="".concat(t," are on the call.")}t="".concat(e,"<br/>Click the green call button to join the call.")}return t})(EI());e.html(t),e.removeClass("hide")}}isOnCall(){return TI()}subscribeStream(e){const t=vI(e.id);this.addVideoChatItem(t,bI(e.connection),e.hasAudio);const n=SI().subscribe(e,t,{...KI,showControls:!1},(e=>{e?this.handleError(e):(this.addSubscriberIdToVideoChatItem(t,n.id),(e=>{xI[e.id]=e})(n))}))}unsubscribeStream(e){const t=vI(e.id),n=this.getSubscriberIdByVideoChatElId(t);this.removeVideoChatItem(t);const i=xI[n];(e=>{delete xI[e]})(i);const s=SI();i&&s.unsubscribe(i)}bindSessionEvents(){this.sessionEvents=[d.Z.subscribe("call:session:streamCreated",((e,t)=>{let{stream:n}=t;this.updateConnectionsInfo(),this.isOnCall()&&this.subscribeStream(n),this.resize()})),d.Z.subscribe("call:session:streamDestroyed",((e,t)=>{let{stream:n}=t;this.updateConnectionsInfo(),this.unsubscribeStream(n),this.resize()})),d.Z.subscribe("call:session:streamPropertyChanged",((e,t)=>{let{event:n}=t;const{stream:i}=n;SI().getSubscribersForStream(n.stream).length&&this.toggleStreamMicStatus(i.id,i.hasAudio)}))]}toggleStreamMicStatus(e,t){const n=vI(e),i=this.container.find("#".concat(n)).find(".call-video-chat-item-info-status-off");i.removeClass("hide"),t&&i.addClass("hide")}bindFooterEvents(){this.footerEvents=[d.Z.subscribe("call:publishMic",((e,t)=>{let{needPublish:n}=t;const{currentUser:s}=i.default;this.toggleStreamMicStatus(s.getAccountUid(),n);const a=II();a&&a.publishAudio(n)})),d.Z.subscribe("call:publishCam",((e,t)=>{let{needPublish:n}=t;const i=II();i&&i.publishVideo(n)})),d.Z.subscribe("call:togglePublishStream",(()=>{this.isOnCall()?this.unpublish():this.publish()})),d.Z.subscribe("call:showChat",((e,t)=>{let{show:n}=t;this.showResize(n),this.resize()}))]}bindChatEvents(){this.chatEvents=[d.Z.subscribe("call:chat:closed",(()=>{this.showResize(!1),this.resize()}))]}bindResizeEvents(){const e=this.container.find(".call-divider");this.resizeEvents=[d.Z.on(e,"mousedown",this.mouseDownHandler.bind(this)),d.Z.on(e,"keydown",this.keyDownHandler.bind(this))]}unbindResizeEvents(){f().forEach(this.resizeEvents,(e=>{d.Z.off(e)})),delete this.resizeEvents}bindSettingsEvents(){this.settingsEvents=[d.Z.subscribe("call:settings:changeMicrophoneSource",((e,t)=>{let{deviceId:n}=t;II().setAudioSource(n).catch((()=>{}))})),d.Z.subscribe("call:settings:changeCameraSource",((e,t)=>{let{deviceId:n}=t;II().setVideoSource(n).catch((()=>{}))}))]}resize(){const e=this.container.find(".call-video-chat"),t=e.width(),n=e.height(),i=this.container.find(".call-video-chat-item");if(!t||!n)return;const{width:s,height:a}=((e,t,n)=>{const i=(e,t,n)=>1.32*e/Math.ceil(n/e)>t||e===n?e:i(++e,t,n);let s=e/i(1,e/t,n)-10,a=s/1.33;const o=t-10;return a>o&&(a=o,s=1.33*a),{width:s,height:a}})(t,n,i.length);i.width(s),i.height(a)}bindPublisherEvents(){const e=II();if(!e)return;const t=EI();e.on("streamCreated",(()=>{if(this.container.find(".call").addClass("call--connected"),f().each(t,this.subscribeStream.bind(this)),this.footer.showChatBtn(),f().isEmpty(t)){const{currentProject:e}=i.default,{guid:t}=e;ao.O.startCall(t)}jI(!0),WI.publishStarted(),this.updateConnectionsInfo(),this.resize()})),e.on("streamDestroyed",(e=>{e.preventDefault(),this.container.find(".call").removeClass("call--connected"),f().each(t,this.unsubscribeStream.bind(this)),this.footer.hideChatBtn(),jI(!1),WI.publishStopped(),this.updateConnectionsInfo(),this.resize()}))}showResize(e){const t=e?"removeClass":"addClass";this.container.find(".call-divider")[t]("hide"),e||this.container.find(".call-top, .call-bottom").height("50%")}publish(){const e=SI(),t=II();e.publish(t,this.handleError)}unpublish(){const e=SI(),t=II();e&&e.unpublish(t)}unbindEvents(){const e=II();e&&e.off(),this.sessionEvents&&d.Z.unsubscribe(this.sessionEvents),this.footerEvents&&d.Z.unsubscribe(this.footerEvents),this.settingsEvents&&d.Z.unsubscribe(this.settingsEvents),this.resizeListenerId&&d.Z.unsubscribe(this.resizeListenerId),this.chatEvents&&d.Z.unsubscribe(this.chatEvents),this.unbindResizeEvents()}close(){this.callActivated=!1;const e=II();e&&e.destroy(),this.unbindEvents(),AI(null),WI.publishStopped(),this.container&&this.container.empty(),this.container=null,this.footer&&this.footer.destroy(),this.footer=null,this.settings&&this.settings.destroy(),this.settings=null,this.chat&&this.chat.destroy(),this.chat=null,this.sessionEvents=null,this.footerEvents=null,this.settingsEvents=null,this.resizeListenerId=null,this.chatEvents=null}mouseDownHandler(e){const t=this.container.find(".call-top"),n=this.container.find(".call-bottom"),i=this.container.find(".call");JI=!0,d.Z.on(i,"mousemove",(e=>{$I(e,t,n)})),d.Z.on(i,"mouseup",(e=>{iA(e,i)})),XI(e)}keyDownHandler(e){const t=this.container.find(".call-top"),n=this.container.find(".call-bottom");let i=e.which||e.keyCode;if(QI.includes(i)){switch(i){case YI.UP:eA(10,t,n);break;case YI.DOWN:eA(-10,t,n)}XI(e)}}},aA=d.Z.create(n(30011)),oA=I().compile('<div id="codio-call" class="call-panel ide-sidebar">\n  <button class="call-panel-close-btn" type="button" aria-label="Close call" title="Close call">\n    <i class="ss-icon call-panel-close-btn-icon">close</i>\n  </button>\n  <div class="call-loading">\n    Loading...\n  </div>\n</div>\n');let rA=null,cA=null,lA=[];aI().setLogLevel(aI().NONE);const dA=e=>{mA().then((t=>{const{currentProject:n}=i.default;t&&n&&n.eduStartedAssignmentInfo&&aA.updateMenuItemsVisibility({visible:t,active:e})})).catch((e=>{let{message:t}=e;je.Z.error(t)}))},uA=()=>{const e=TI();return f().size(EI())>0||e},hA=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;mA().then((t=>{t&&(GI(),f().delay((()=>{(ZI()||SI())&&pA()}),e))})).catch((e=>{let{message:t}=e;je.Z.error(t)}))},pA=()=>{const e=E()("div.ide-container");if(0===e.find("#codio-call").length){const t=E()(oA());e.append(t),cA=new sA(t),d.Z.on(t,"click",".call-panel-close-btn",fA),lA=[d.Z.subscribe("ide:fullscreen:enter",(()=>t.addClass("hide"))),d.Z.subscribe("ide:fullscreen:leave",(()=>t.removeClass("hide")))],aA.callPanelSwitched()}},fA=()=>{cA&&cA.close(),cA=null,lA&&d.Z.unsubscribe(lA);E()("div.ide-container").find("#codio-call").remove(),aA.callPanelSwitched()},mA=()=>(rA||(rA=ao.default.OrganizationManager.getMyOrganizations().then((e=>{const{course:t}=i.default.currentProject;if(t){return!e.find((e=>e.id===t.organizationId)).details.hideAVCall}return f().some(e,(e=>!e.details.hideAVCall))}))),rA);(()=>{d.Z.subscribe("project:open",(()=>{const{currentProject:e}=i.default,t=e&&e.projectCallStartDate;dA(),t&&hA(1e3)})),d.Z.subscribe("project:permissionsUpdated",dA),d.Z.subscribe("project:callStarted",hA),d.Z.subscribe("project:close",(()=>{const e=SI();e&&e.disconnect(),OI()})),d.Z.subscribe("call:publishStarted",(()=>{dA(uA())})),d.Z.subscribe("call:publishStopped",(()=>{dA(uA())})),d.Z.subscribe("call:session:streamCreated",(()=>{dA(uA())})),d.Z.subscribe("call:session:streamDestroyed",(()=>{dA(uA())})),d.Z.subscribe("command:call:open",pA),d.Z.subscribe("call:destroy",fA)})();const gA=JSON.parse('{"name":"pair-programming","description":"Pair programming"}'),bA={},vA=f().partial(Dd.Z.request,"CollaborationManager");bA.getActiveCollaborationUsers=function(e){return vA("getActiveCollaborationUsers",{projectId:e})},bA.driverTransferRequest=function(e){return vA("driverTransferRequest",{projectId:e.projectId})},bA.updateCollaborationDriver=function(e,t,n){return vA("updateCollaborationDriver",{projectId:e,userId:t,grant:n})},bA.getCurrentDriverId=function(e){return vA("getCurrentDriverId",{projectId:e})};const yA=bA,wA=I().compile('<div class="collaboration-active-users"></div>\n<div class="collaboration-controls">\n  <div class="form-fieldset">\n    <label class="toggle">\n      <input\n        type="checkbox"\n        id="shared-focus"\n        role="switch"\n        {{#if enforcedSharedFocus}}disabled{{/if}}\n        {{#if sharedFocusEnabled}}checked{{/if}}\n      />\n      <span class="toggle-label" aria-hidden="true"></span>\n      <span class="toggle-handle" aria-hidden="true"></span>\n    </label>\n    <label class="form-label" for="shared-focus">Shared focus</label>\n  </div>\n  <div class="form-fieldset">\n    <label class="toggle">\n      <input\n        type="checkbox"\n        id="driver"\n        role="switch"\n        {{#if driver}}checked{{/if}}\n      />\n      <span class="toggle-label" aria-hidden="true"></span>\n      <span class="toggle-handle" aria-hidden="true"></span>\n    </label>\n    <label class="form-label" for="driver">Driver (Editing control)</label>\n  </div>\n</div>\n<a href="https://docs.codio.com/students/courses/pair-programming.html" target="_blank" class="main-form-help-link">\n  <i class="ss-icon">info</i> <span class="help-link-text">Need a little help?</span>\n</a>\n'),_A=I().compile('<div class="collaboration-active-users-list" tabindex="0" aria-describedby="collaboration-active-users-list-info">\n  <span id="collaboration-active-users-list-info">\n    Pair programming with:\n    {{#each activeUsers}}\n    <span class="collaboration-active-users-list-user-name {{#if this.isDriver}}driver{{/if}}">\n      {{ this.shortName }}\n    </span>\n    {{/each}}\n  </span>\n</div>\n'),kA=I().compile('<h4 class="driver-transfer-dialog">{{requestorUserName}} has requested driver access</h4>'),PA=d.Z.create(n(90101)),CA="granted",xA="denied";class EA{constructor(e){if(!(this instanceof EA))return new EA(e);this.container=e,this.currentDriverId="",this.activeUsers=[],this._applingFlag=!1,this.activityFunction=f().debounce((()=>{this.setInactive()}),15e3),this.sharedFocusEnabled=!1;const t=i.default.currentProject.pairProgramming;this.enforcedSharedFocus=t&&t.enforcedSharedFocus;const n=i.default.currentProject.guid;yA.getCurrentDriverId(n).then((e=>{this.currentDriverId=e.currentDriverId,PA.driverUpdated(this.currentDriverId),this.activityFunction(),this.render()})).then((()=>this.updateUsersList()))}bindEvents(e){d.Z.on(e.find("#shared-focus"),"click",(()=>{this.sharedFocusEnabled=e.find("#shared-focus").prop("checked"),this.subscribeDriverCursorPositionEvent()})),d.Z.on(e.find("#driver"),"click",(()=>{this.updateCollaboration(e.find("#driver").prop("checked"))})),d.Z.subscribe("project:driverTransferReq",((t,n)=>{this.updateUsersList();const s=n.eventUserId===i.default.currentUser.account,a=this.currentDriverId===i.default.currentUser.account;s&&this.currentDriverId===i.default.currentUser.account&&e.find("#driver").prop("checked",!0),!s&&a&&this.showDialog(n)})),d.Z.subscribe("project:collaborationDriverUpdate",((t,n)=>{if(this.updateUsersList(),this._applingFlag=!1,n.status===CA){this.currentDriverId=n.requestorUserId;const t=n.requestorUserId===i.default.currentUser.account;e.find("#driver").prop("checked",t),this.updateReadOnly(),this.drawActiveUsersList(),this.activityFunction(),PA.driverUpdated(this.currentDriverId)}if(n.status===xA&&n.requestorUserId===i.default.currentUser.account){const t=n.requestorUserId!==i.default.currentUser.account;e.find("#driver").prop("checked",t),n.eventUserId!==i.default.currentUser.account&&je.Z.info("Driver has denied access")}})),d.Z.subscribe("file:editor:activate",(()=>{this.currentDriverId&&this.updateReadOnly()})),d.Z.subscribe("file:editor:change",(()=>{this.activityFunction(),f().isEmpty(this.currentDriverId)&&!this._applingFlag&&(yA.updateCollaborationDriver(i.default.currentProject.guid,i.default.currentUser.account,!0),this._applingFlag=!0)})),d.Z.subscribe("project:collaborationActiveUsersUpdate",((e,t)=>{this.currentDriverId!==t.currentDriverId&&(this.currentDriverId=t.currentDriverId,PA.driverUpdated(this.currentDriverId),this.updateReadOnly()),this.updateUsersList()})),d.Z.subscribe("guides:codioAssessmentBtnClick",(()=>{this.currentDriverId||yA.updateCollaborationDriver(i.default.currentProject.guid,i.default.currentUser.account,!0)})),this.subscribeDriverCursorPositionEvent()}subscribeDriverCursorPositionEvent(){this.enforcedSharedFocus||this.sharedFocusEnabled?this.driverCursorPositionHandler=d.Z.subscribe("shareman:cursors",((e,t)=>{t.forEach((e=>{this.currentDriverId===e.userId&&i.default.ide.open("tree",e.file,{})}))})):d.Z.unsubscribe(this.driverCursorPositionHandler)}setInactive(){this.currentDriverId===i.default.currentUser.account&&(this._applingFlag=!0,yA.updateCollaborationDriver(i.default.currentProject.guid,"",!0))}updateUsersList(){const e=i.default.currentProject.guid;return yA.getActiveCollaborationUsers(e).then((e=>{const t=i.default.currentUser.account;this.activeUsers=e.filter((e=>e.userId!==t)).map((e=>(e.shortName=e.lastName?"".concat(e.firstName," ").concat(e.lastName.charAt(0)):e.displayName,e))),this.drawActiveUsersList()})).catch((e=>{let{message:t}=e;return je.Z.error(t)}))}updateReadOnly(){const e=!f().isEmpty(this.currentDriverId)&&this.currentDriverId!==i.default.currentUser.account;PA.setReadOnlyForNavigator(e)}updateCollaboration(e){return!1===e?this.setInactive():this.currentDriverId?(this.currentDriverId===i.default.currentUser.account?this.container.find("#driver").prop("checked",!0):(je.Z.info("Please wait for driver to grant access"),this.container.find("#driver").prop("checked",!1)),void yA.driverTransferRequest({projectId:i.default.currentProject.guid})):(this._applingFlag=!0,yA.updateCollaborationDriver(i.default.currentProject.guid,i.default.currentUser.account,!0),void this.container.find("#driver").prop("checked",!0))}showDialog(e){const t=i.default.currentProject.guid,n=new Ae.Z({title:"Driver role transfer",content:E()(kA({requestorUserName:e.requestorUserName})),width:500,onClose:()=>{},buttons:[{title:"Grant",type:1,onClick:()=>{yA.updateCollaborationDriver(t,e.eventUserId,!0),n.close()}},{title:"Decline",onClick:()=>{yA.updateCollaborationDriver(t,e.eventUserId,!1),n.close()}}]})}render(){const e=E()(wA({driver:this.currentDriverId===i.default.currentUser.account,enforcedSharedFocus:this.enforcedSharedFocus,sharedFocusEnabled:this.enforcedSharedFocus||this.sharedFocusEnabled}));this.bindEvents(e),this.container.empty().append(e)}drawActiveUsersList(){const e=E()(_A({activeUsers:this.activeUsers.map((e=>({shortName:e.shortName.toUpperCase(),isDriver:e.isDriver})))}));this.container.find(".collaboration-active-users").empty().append(e)}}const SA=EA,IA={};IA.info=gA,IA.hotkeys={},IA.get=async function(){return SA},d.Z.subscribe("ide:open",(()=>{const e=i.default.currentProject.pairProgramming;if(e&&e.enabled&&!i.default.currentProject.writableCopy){const e=E()('<div class="collaboration-bar">');e.insertBefore(".ide-container"),new SA(e)}})),i.default.register(IA);const AA=JSON.parse('{"open":"aiHelpBot:open","opened":"aiHelpBot:opened","close":"aiHelpBot:close","closed":"aiHelpBot:closed","call":"aiHelpBot:call","showTooltip":"aiHelpBot:showTooltip","hideTooltip":"aiHelpBot:hideTooltip"}'),TA="text",jA="button",ZA="user",OA="assistant",NA=I().compile('<div\n  class="ai-help-bot-history-message ai-help-bot-history-message-type--{{type}} ai-help-bot-history-message-owner--{{owner}} {{#if isBotResponse}}ai-help-bot-history-message-final-response{{/if}}"\n  {{#if id}}data-id="{{id}}"{{/if}}\n  {{#if messageId}}data-message-id="{{messageId}}"{{/if}}\n>\n  {{#equals type "button"}}\n    <button class="ai-help-bot-history-message-text-container">\n      {{#if showMenu}}\n      <span class="iconify-inline" data-icon="@codio:mdi:replay"></span>\n      {{/if}}\n      {{text}}\n    </button>\n  {{else}}\n    <div class="ai-help-bot-history-message-text-container">\n      <div class="ai-help-bot-history-message-text-row">\n        <div class="ai-help-bot-history-message-text">{{text}}</div>\n        {{#if typing}}\n        <div class="ai-help-bot-history-message-typing-container">\n          <div class="ai-help-bot-history-message-typing">\n            <span></span>\n            <span></span>\n            <span></span>\n          </div>\n        </div>\n        {{/if}}\n      </div>\n      <div class="ai-help-bot-history-message-footer">\n        <div class="ai-help-bot-history-message-footer-vote-actions">\n          <button class="ai-help-bot-history-vote-up ai-help-bot-icon-btn {{#if upVote}}ai-help-bot-icon-btn--active{{/if}}">\n            <span class="iconify-inline" data-icon="@codio:mdi:thumb-up"></span>\n          </button>\n          <button class="ai-help-bot-history-vote-down ai-help-bot-icon-btn {{#if downVote}}ai-help-bot-icon-btn--active{{/if}}">\n            <span class="iconify-inline" data-icon="@codio:mdi:thumb-down"></span>\n          </button>\n        </div>\n      </div>\n    </div>\n  {{/equals}}\n</div>\n'),DA="asc",MA="desc",RA="thinking-message-id";class LA{constructor(){this.historyPromise=$_.Mt(i.default.currentProject.guid),this.debounceScrollListener=f().debounce(this._scrollListener.bind(this),200)}static serverMessageRoleToOwner(e){switch(e){case $_.in.CHAT_ROLE_BOT:return OA;case $_.in.CHAT_ROLE_USER:return ZA}}static ownerToServerMessageRole(e){switch(e){case OA:return $_.in.CHAT_ROLE_BOT;case ZA:return $_.in.CHAT_ROLE_USER}}async _scrollListener(e){if(0===E()(e.currentTarget).scrollTop()){if(await u.default.promise.getState(this.historyPromise)===u.default.promise.STATES.FULFILLED){var t;const e=await this.historyPromise;if(null===(t=e.pagination)||void 0===t||!t.nextPage)return;this.historyPromise=$_.Mt(i.default.currentProject.guid,e.pagination);const n=await this.historyPromise,s=this.container.find(".ai-help-bot-history-message").eq(0);this._showLoadedHistoryMessages(n.messages),this.container.scrollTop(s.offset().top)}}}setContainer(e){this.container=e,this._bindEvents()}_bindEvents(){d.Z.on(this.container,"scroll",this.debounceScrollListener),d.Z.on(this.container,"click",".ai-help-bot-history-vote-up, .ai-help-bot-history-vote-down",(function(e){e.preventDefault();const t=E()(this);if(t.hasClass("ai-help-bot-icon-btn--active"))return;const n=t.closest(".ai-help-bot-history-message").data("message-id"),i=t.hasClass("ai-help-bot-history-vote-up")?1:-1;try{$_.yA(n,i),t.closest(".ai-help-bot-history-message-footer-vote-actions").find(".ai-help-bot-icon-btn").removeClass("ai-help-bot-icon-btn--active"),t.addClass("ai-help-bot-icon-btn--active")}catch({message:e}){je.Z.error(e)}}))}scrollHistoryToBottom(){var e;null===(e=this.container)||void 0===e||e.scrollTop(this.container.get(0).scrollHeight)}_getUserInfo(e){if(e===ZA){const e=i.default.currentUser.get("details").get("email"),t=i.default.currentUser.get("details").getName();return{gravatarHash:e?Bs()(e):"",username:i.default.currentUser.name(),fullName:t}}let t="Codio Virtual Coach";return"Codio"!==it.Z.get("whitelabel")&&(t="Virtual Coach"),{icon:"robot",username:"Coach",fullName:t}}addMessage(e,t){if(!this.container)return;const n=E()(NA({...e,userInfo:"none"!==e.owner?this._getUserInfo(e.owner):null}));if(t?this.container.prepend(n):this.container.append(n),e.text instanceof E()){n.find(".ai-help-bot-history-message-text").html(e.text)}return t||this.scrollHistoryToBottom(),n}removeAllButtons(){this.container.find(".ai-help-bot-history-message-type--button").remove()}removeAllMenuButtons(){this.container.find(".ai-help-bot-history-message-type--button:not([data-id])").remove()}_getThinkingAnimationMessage(){return this.container?this.container.find('.ai-help-bot-history-message[data-message-id="'.concat(RA,'"]')):null}showThinkingAnimation(){this._getThinkingAnimationMessage().length||this.addMessage({messageId:RA,type:TA,owner:OA,text:"",typing:!0})}hideThinkingAnimation(){const e=this._getThinkingAnimationMessage();e&&e.remove()}async loadAndShowHistory(){let e=await this.historyPromise;e.messages.length?this._showLoadedHistoryMessages(e.messages):this.addMessage({type:TA,owner:OA,text:"Need help?"})}_getLastIndexesMap(e){const t={};return e.forEach((e=>{const n=t[e.messageId];t[e.messageId]=!n||n<e.index?e.index:n})),t}_sortMessages(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:MA;return f().orderBy(e,["createdAt","index"],[t,t])}_showLoadedHistoryMessages(e){const t=this._sortMessages(e),n=this._getLastIndexesMap(t);f().forEach(t,(e=>{const t=LA.serverMessageRoleToOwner(e.role);this.addMessage({messageId:e.messageId,type:TA,owner:t,text:t===OA?u.default.markdown.renderSync(e.text):e.text,isBotResponse:n[e.messageId]===e.index,upVote:f().includes(e.upVotesList,i.default.currentUser.getAccountUid()),downVote:f().includes(e.downVotesList,i.default.currentUser.getAccountUid())},!0)}))}async getMessages(){const e=await $_.Mt(i.default.currentProject.guid);return f().map(this._sortMessages(e.messages,DA),(e=>({content:e.text,role:LA.serverMessageRoleToOwner(e.role)})))}}const FA=LA;const BA=class{constructor(){}isVisible(){throw new Error("isVisible is not implemented")}async start(){throw new Error("start is not implemented")}};var UA=n(15094);const qA="Jupyter",HA="jupyter-lab",GA=[qA,HA],WA=async()=>{const e=[],t=await(async()=>{const e=f()(i.default.ide.panels.getOpenedTabs(["tree","jupyter-lab"])).filter("activated").uniqBy("filename").map((e=>UA.Z.cached(e.filename)?null:e.extension)).compact().value();return Promise.all(e)})(),n=await(async e=>{const t=[];for(const n of e)GA.includes(n.extensionName)&&t.push((async()=>{let e;return e=n.extensionName===HA?await n.getContext():await n.extension.getContext(),{context:e,ext:n}})());return Promise.all(t)})(t);for(const t of n)switch(t.ext.extensionName){case HA:t.context&&e.push({path:t.context.path,content:t.context.cells});break;case qA:t.context&&e.push({path:t.ext.filename,content:t.context})}return e},zA=async()=>{const{currentProject:e,currentError:t,currentUser:n}=i.default;if(!e)throw new Error("project not found");let s={};const{eduStartedAssignmentInfo:a}=e;if(a){var o;const{assignment:e,course:t}=a,n=(0,CC.bz)(e);s={courseName:(null==t||null===(o=t.details)||void 0===o?void 0:o.name)||"",assignmentName:(null==n?void 0:n.name)||""}}const r=await window.codioIDE.guides.getGuidesPageInfo(),c=await WA(),l=(e=>e.map((e=>e.content?e.content.filter((e=>"markdown"===e.type)).map((e=>e.content)).join("\n"):"")).join("\n"))(c);r.content=[r.content].concat(l).join("\n");let d=(0,ek.pi)();const u=(e=>{const t=[];for(const n of e)t.push({path:n.path,content:n.content?n.content.filter((e=>"code"===e.type)).map((e=>e.content)).join("\n"):""});return t})(c);return d=d.concat(u),{guidesPage:r,assignmentData:{...s,userId:n.getAccountUid(),userName:n.displayName(),userLogin:n.name()},jupyterContext:c,files:d,error:{errorState:!!t,text:t}}},VA=()=>{const e=i.default.ide.panels.getOpenedTabs("guides")[0];return null==e?void 0:e.active};const KA=class extends BA{constructor(){super(),this.id="codio-summarize",this.text="Summarize what I need to do",this.requestType=$_.Td.SUMMARIZE}isVisible(){var e;const{assignment:t}=i.default.currentProject.eduStartedAssignmentInfo||{};if(!t)return!1;return((null===(e=(0,CC.bz)(t).ai)||void 0===e?void 0:e.chatBotSettings)||{}).summarizeButton&&VA()}async start(e){try{const t={guidesContent:(await zA()).guidesPage.content};e._makeRequestStream(this.requestType,t)}catch(e){je.Z.error(e.message)}}};const JA=class extends BA{constructor(){super(),this.id="codio-explain-error",this.text="Explain an error",this.requestType=$_.Td.EXPLAIN_ERROR}isVisible(){var e;const{assignment:t}=i.default.currentProject.eduStartedAssignmentInfo||{};if(!t)return!1;return((null===(e=(0,CC.bz)(t).ai)||void 0===e?void 0:e.chatBotSettings)||{}).explainErrorButton}async start(e){var t;let{defaultData:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n=n||{};let i=null===(t=n)||void 0===t?void 0:t.errorMessage;try{if(i)e.write(i,ZA);else try{i=await e.input("Please paste your error text below")}catch(e){return}const t=await zA(),n={errorOutput:i,guidesContent:t.guidesPage.content,files:t.files};e._makeRequestStream(this.requestType,n)}catch({message:e}){je.Z.error(e)}}};const YA=class extends BA{constructor(){super(),this.id="codio-help-what-next",this.text="Provide a hint on what to do next",this.requestType=$_.Td.NEXT_TO_DO}isVisible(){var e;const{assignment:t}=i.default.currentProject.eduStartedAssignmentInfo||{};if(!t)return!1;return((null===(e=(0,CC.bz)(t).ai)||void 0===e?void 0:e.chatBotSettings)||{}).nextTodoButton&&VA()}async start(e){try{const t=await zA(),n={guidesContent:t.guidesPage.content,files:t.files};e._makeRequestStream(this.requestType,n)}catch({message:e}){je.Z.error(e)}}};const QA=class extends BA{constructor(e,t,n){super(),this.id=e,this.text=t,this.callback=n}async _runCallback(e,t,n){try{await t(n)}catch(t){e.write("Error: ".concat(t.message||"Unexpected error")),e._showMenu()}}isVisible(){return!0}async start(e){let{params:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._runCallback(e,this.callback,t)}},XA=I().compile('<div class="ai-help-bot collapsed" id="aiHelpBot">\n  <div class="ai-help-bot-header">\n    <button type="button" class="ai-help-bot-icon-btn ai-help-bot-expand" aria-label="Expand Coach Bot">\n      <span class="iconify-inline" data-rotate="90deg" data-icon="@codio:mdi:arrow-expand"></span>\n    </button>\n    <button type="button" class="ai-help-bot-icon-btn ai-help-bot-collapse" aria-label="Collapse Coach Bot">\n      <span class="iconify-inline" data-rotate="90deg" data-icon="@codio:mdi:arrow-collapse"></span>\n    </button>\n    <div class="ai-help-bot-header-text">Coach</div>\n    <button class="ai-help-bot-close-btn ai-help-bot-icon-btn" aria-label="Close coach bot">\n      <span class="iconify" data-icon="@codio:mdi:close-thick"></span>\n    </button>\n  </div>\n  <div class="ai-help-bot-history"></div>\n  <div class="ai-help-bot-warning hide">\n    These results were generated using AI. Please check responses.\n    <a\n      href="https://docs.codio.com/develop/tools/student-virtual-coach.html#student-virtual-coach"\n      target="_blank"\n    >More information</a>.\n  </div>\n  <div class="ai-help-bot-footer hide">\n    <textarea\n      class="ai-help-bot-ta"\n      rows="3"\n      aria-labelledby="hintBotSendBtn"\n      placeholder="Enter your message here..."\n    ></textarea>\n    <button\n      id="helpBotSendBtn"\n      class="ai-help-bot-send-btn"\n      type="button"\n      aria-label="Send"\n      disabled\n    >\n      <span class="iconify-inline" data-icon="@codio:mdi:send"></span>\n    </button>\n  </div>\n</div>\n'),$A=I().compile('<div class="ai-help-bot-tooltip">\n  <button type="button" aria-label="Close tooltip" class="ai-help-bot-tooltip-close-btn">\n    <span class="iconify" data-icon="@codio:mdi:close-thick"></span>\n  </button>\n  <div class="ai-help-bot-tooltip-message">\n    {{message}}\n  </div>\n</div>\n'),eT=I().compile('<button class="ai-help-bot-main-button {{#if fullscreenShown}}ai-help-bot-main-button--fullscreen{{/if}}" aria-label="Open coach bot" type="button">\n  <span class="iconify" data-icon="@codio:mdi:robot"></span>\n</button>\n'),tT=d.Z.create(AA),nT=()=>u.default.isIframe()&&u.default.fullscreenSupport();let iT=[new KA,new JA,new YA];const sT=0,aT=1,oT=2;class rT{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.text="",this.options=t,e&&this.setMessage(e)}setMessage(e){this.message=e,this.textEl=e.find(".ai-help-bot-history-message-text"),this.typingEl=e.find(".ai-help-bot-history-message-typing-container")}getMessage(){return this.message}getText(){return this.text}write(e,t){if(this.closed)return"Stream is closed";this.typingEl.remove(),t?this.text=e:this.text+=e;const n=u.default.markdown.renderSync(this.text);this.textEl.html(n),this.options.onWrite&&this.options.onWrite()}end(){this.typingEl.remove(),this.closed=!0}}class cT{constructor(){this.helpBotContainer=null,this.handlers=null,this.history=new FA,this.inputDfd=null,this.preambles=[],this.warningMessageStatus=sT}static getVisibleMenu(){return f().filter(iT,(e=>e.isVisible()))}static refreshBotButtonVisibility(){cT.hideBotButton();if(!cT.getVisibleMenu().length)return!1;const e=E()("div.ide-container");if(!e.find(".ai-help-bot-main-button").length){const t=E()(eT({fullscreenShown:nT()}));e.append(t),d.Z.on(t,"click",(e=>{e.preventDefault(),tT.open()}))}return!0}static hideBotButton(){E()("div.ide-container").find(".ai-help-bot-main-button").remove()}static register(e){let{id:t,name:n,callback:i}=e;iT.push(new QA(t,n,i)),cT.refreshBotButtonVisibility()}static deregister(e){iT=f().filter(iT,(t=>t.id!==e)),cT.refreshBotButtonVisibility()}static showTooltip(e,t){if(cT.hideTooltip(),!e)return;const n=E()($A({message:e}));d.Z.on(n,"click",(()=>t())),d.Z.on(n,"click",".ai-help-bot-tooltip-close-btn",(e=>{e.preventDefault(),e.stopPropagation(),cT.hideTooltip()}));const i=E()("div.ide-container");let s=i.find(".ai-help-bot-tooltip-container").eq(0);if(!s.length){const e=nT()?"ai-help-bot-tooltip-container--fullscreen":"";s=E()('<div class="ai-help-bot-tooltip-container '.concat(e,'"></div>')),i.append(s)}s.empty().append(n)}static hideTooltip(){E()("div.ide-container").find(".ai-help-bot-tooltip-container").empty()}_addMenuButton(){this.history.removeAllMenuButtons(),this.write("Show help topics",OA,{message:{showMenu:!0,type:jA},skipPreambles:!0})}async input(e,t){var n;null===(n=this.inputDfd)||void 0===n||n.reject(new Error("Cancelled")),this.inputDfd=u.default.promise.deferred(),e&&this.write(e,OA);const i=this.helpBotContainer.find(".ai-help-bot-ta");return t=t||"",i.val(t),this.helpBotContainer.find(".ai-help-bot-send-btn").prop("disabled",0===t.length),this.helpBotContainer.find(".ai-help-bot-footer").removeClass("hide"),this._addMenuButton(),i.focus(),this.inputDfd.promise}_makeRequestStream(e,t,n,s){const a=this.writeStream({skipPreambles:!0});this._addMenuButton();const o=f().map(this.preambles,(e=>(e.text=f().isFunction(e.getText)?e.getText():e.text,e.role=FA.ownerToServerMessageRole(e.owner),e))),r=e=>{c===this.lastRequestPromise?(a.write(e.message||"Unexpected error"),n&&n({error:e}),this.lastRequestPromise=null):n&&n({error:e,interrupted:!0})},c=$_.SO(i.default.currentProject.guid,e,t,o,s,{next:async e=>{if(this.warningMessageStatus=aT,c===this.lastRequestPromise){if(e.start&&a.write(e.start.text),e.delta&&a.write(e.delta.textDelta),e.stop){a.write(e.stop.textFull,!0);const t=a.getMessage();t.data("message-id",e.stop.messageId),t.addClass("ai-help-bot-history-message-final-response"),null!=s&&s.preventMenu?this.history.removeAllButtons():this._showMenu()}this.history.scrollHistoryToBottom()}},error:r,complete:()=>{c===this.lastRequestPromise?(n&&n({result:a.getText()}),this.lastRequestPromise=null):n&&n({interrupted:!0})}}).catch(r);this.lastRequestPromise=c}_makeRequest(e,t,n,s){let a="";const o=e=>{r===this.lastRequestPromise?(n&&n({error:e}),this.lastRequestPromise=null):n&&n({error:e,interrupted:!0})},r=$_.SO(i.default.currentProject.guid,e,t,[],{hideFromHistory:!0,...s},{next:async e=>{this.warningMessageStatus=aT,r===this.lastRequestPromise&&e.stop&&(a=e.stop.textFull)},error:o,complete:()=>{r===this.lastRequestPromise?(n&&n({result:a}),this.lastRequestPromise=null):n&&n({interrupted:!0})}}).catch(o);this.lastRequestPromise=r}_startActionById(e,t,n){const i=cT.getVisibleMenu(),s=f().find(i,(t=>t.id===e));s&&this._startAction(s,{defaultData:t,dropPreambles:!0,params:n})}_startAction(e){let{defaultData:t,dropPreambles:n,params:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.helpBotContainer.find(".ai-help-bot-footer").addClass("hide"),this.history.removeAllButtons(),n&&(this.preambles=[]),this.write(e.text,ZA),e.start(this,{defaultData:t,params:i})}_showMenu(){var e;this.history.removeAllButtons(),null===(e=this.inputDfd)||void 0===e||e.reject(new Error("Cancelled")),this.inputDfd=null,this.helpBotContainer.find(".ai-help-bot-footer").addClass("hide");const t=cT.getVisibleMenu();f().forEach(t,(e=>{this.write(e.text,e.owner||"none",{message:{id:e.id,type:jA},skipPreambles:!0})}))}_onMenuItemClick(e){e.preventDefault();const t=E()(e.currentTarget);if(t.data("action"))return void this._startAction(t.data("action"));const n=t.data("id");n?this._startActionById(n):this._showMenu()}_onSendBtnClick(e){e.preventDefault(),this._sendMessage()}_sendMessage(){const e=this.helpBotContainer.find(".ai-help-bot-ta").val();this.write(e,ZA),this.helpBotContainer.find(".ai-help-bot-footer").addClass("hide"),this.inputDfd.resolve(e)}_onInputChange(e){this.helpBotContainer.find(".ai-help-bot-send-btn").prop("disabled",""===f().trim(E()(e.currentTarget).val()))}_onKeyDown(e){const t=E()(e.target),n=this.helpBotContainer.find(".ai-help-bot-send-btn");let i=e.which||e.keyCode;e.shiftKey||i!==u.default.KeyCode.RETURN||!t.val()||n.attr("disabled")||this._sendMessage()}_showWithTransition(){this.helpBotContainer.css("width",0).css("height",0),this.helpBotContainer.removeClass("hide"),f().defer((()=>{this.helpBotContainer.css("width","").css("height","")}))}_hideWithTransition(){this.helpBotContainer.css("width",0).css("height",0),d.Z.on(this.helpBotContainer,"transitionend.hide-transition",(()=>{d.Z.off(this.helpBotContainer,"transitionend.hide-transition"),this.helpBotContainer.addClass("hide"),this.helpBotContainer.css("width","").css("height","")}))}_addListeners(){d.Z.on(this.helpBotContainer,"click",".ai-help-bot-close-btn",this.close.bind(this)),d.Z.on(this.helpBotContainer,"click",".ai-help-bot-history-message-type--button",this._onMenuItemClick.bind(this)),d.Z.on(this.helpBotContainer,"click",".ai-help-bot-send-btn",this._onSendBtnClick.bind(this)),d.Z.on(this.helpBotContainer,"keydown",".ai-help-bot-ta",this._onKeyDown.bind(this)),d.Z.on(this.helpBotContainer,"input propertychange",".ai-help-bot-ta",this._onInputChange.bind(this)),d.Z.on(this.helpBotContainer,"click",".ai-help-bot-collapse, .ai-help-bot-expand",(()=>{this.helpBotContainer.toggleClass("collapsed")})),this.handlers=[d.Z.subscribe("ide:fullscreen:enter",(()=>this.helpBotContainer.addClass("hide"))),d.Z.subscribe("ide:fullscreen:leave",(()=>{this.opened&&this.helpBotContainer.removeClass("hide")}))]}async open(){cT.hideTooltip();const e=E()("div.ide-container");if(e.find(".ai-help-bot").length)return this.opened||(this._showWithTransition(),this.history.scrollHistoryToBottom()),void tT.opened();this.helpBotContainer=E()(XA()),this.helpBotContainer.css("width",0).css("height",0),this.history.setContainer(this.helpBotContainer.find(".ai-help-bot-history"));try{await this.history.loadAndShowHistory()}catch(e){this.write("Could not load Coach Bot history - ".concat(e.message))}this._showMenu(),e.append(this.helpBotContainer),f().defer((()=>{this.helpBotContainer.css("width","").css("height","")})),this.history.scrollHistoryToBottom(),this._addListeners(),this.opened=!0,tT.opened()}async call(e){let{id:t,defaultValues:n,params:i}=e;await this.open(),this._startActionById(t,n,i)}showWarningMessage(){this.warningMessageStatus===aT&&(this.warningMessageStatus=oT,this.helpBotContainer.find(".ai-help-bot-warning").removeClass("hide"))}write(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:OA,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i={owner:t,type:TA,text:e,...null==n?void 0:n.message};t===OA&&""!==e&&this.showWarningMessage();const s=this.history.addMessage(i);return(null==n||!n.skipPreambles)&&this.preambles.push(i),s}writeStream(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new rT(null,{onWrite:()=>{this.history.scrollHistoryToBottom(),this.showWarningMessage()}}),{message:n,...i}=e,s=this.write("",OA,{message:{typing:!0,...n,getText:()=>t.getText()},...i});return s?(t.setMessage(s),t):null}showButton(e,t){this.write(e,ZA,{message:{id:"callback",type:jA},skipPreambles:!0}).data("action",new QA("",e,t)),this._addMenuButton()}ask(e,t,n){f().isFunction(t)&&(n=t={stream:!0}),t||(t={stream:!0}),f().isUndefined(t.stream)&&(t.stream=!0),t.stream?this._makeRequestStream($_.Td.CUSTOM,e,n,t):this._makeRequest($_.Td.CUSTOM,e,n,t)}close(){this._hideWithTransition(),this.opened=!1,tT.closed()}async getHistory(){return this.history.getMessages()}showThinkingAnimation(){this.history.showThinkingAnimation()}hideThinkingAnimation(){this.history.hideThinkingAnimation()}showMenu(){this._showMenu()}}const lT=cT;var dT=n(95638);const uT=d.Z.create(AA);let hT=null;const pT=async e=>{hT||(hT=new lT),await hT.open(),(null==e?void 0:e.id)&&hT.call(e)},fT=()=>{lT.refreshBotButtonVisibility();!lT.getVisibleMenu().length&&hT&&(hT._showMenu(),hT.close())};class mT{constructor(e){this.stream=e}write(e){return this.stream.write(e)}end(){this.stream.end()}}const gT=d.Z.create({open:"aiHelpBot:open",close:"aiHelpBot:close",call:"aiHelpBot:call",showTooltip:"aiHelpBot:showTooltip",hideTooltip:"aiHelpBot:hideTooltip",register:"aiHelpBot:register",deregister:"aiHelpBot:deregister",showButton:"aiHelpBot:showButton",write:"aiHelpBot:write",input:"aiHelpBot:input",getContext:"aiHelpBot:getContext",ask:"aiHelpBot:ask",getHistory:"aiHelpBot:getHistory",showMenu:"aiHelpBot:showMenu",getLlmProxyDetails:"aiHelpBot:getLlmProxyDetails",showThinkingAnimation:"aiHelpBot:showThinkingAnimation",hideThinkingAnimation:"aiHelpBot:hideThinkingAnimation",writeStream:"aiHelpBot:writeStream"});window.codioIDE=window.codioIDE||{},window.codioIDE.coachBot={open:e=>{gT.open(e)},close:()=>{gT.close()},call:e=>{gT.call(e)},showTooltip:(e,t)=>{gT.showTooltip({message:e,callback:()=>{t&&t()}})},hideTooltip:()=>{gT.hideTooltip()},register:(e,t,n)=>{if(!f().isFunction(n))throw new Error("Callback should be a function");gT.register({id:e,name:t,callback:n})},deregister:e=>{gT.deregister(e)},write:(e,t)=>{gT.write({text:e,ownerType:t})},writeStream:()=>new Promise(((e,t)=>{gT.writeStream({callback:n=>{n||t(new Error("Failed to create a stream")),e(new mT(n))}})})),showButton:(e,t)=>{if(!f().isFunction(t))throw new Error("Callback should be a function");gT.showButton({text:e,callback:t})},getContext:async()=>new Promise(((e,t)=>{gT.getContext((n=>n.error?t(n.error):e(n.context)))})),ask:async(e,t,n)=>{if(e.messages){if(0===e.messages.findIndex((e=>e.role===OA)))throw new Error("first message must use the USER role");let t;e.messages.forEach((e=>{if(e.role===t)throw new Error("roles must alternate between USER and ASSISTANT");t=e.role}))}return new Promise(((i,s)=>{gT.ask({data:e,options:t,onDone:e=>{n&&n(e),null!=e&&e.error?s(e.error):i(e)}})}))},input:async(e,t)=>new Promise(((n,i)=>{gT.input({text:e,defaultText:t,callback:e=>{let{error:t,input:s}=e;t?i(t):n(s)}})})),getHistory:async()=>new Promise(((e,t)=>{gT.getHistory((n=>n.error?t(n.error):e(n.messages)))})),showMenu:()=>{gT.showMenu()},getLlmProxyDetails:async()=>new Promise(((e,t)=>{gT.getLlmProxyDetails((n=>{n.error?t(n.error):e(n.detailsList)}))})),showThinkingAnimation:()=>{gT.showThinkingAnimation()},hideThinkingAnimation:()=>{gT.hideThinkingAnimation()},MESSAGE_ROLES:{USER:ZA,ASSISTANT:OA}},d.Z.subscribe("project:open",(()=>{lT.refreshBotButtonVisibility()})),d.Z.subscribe("aiHelpBot:open",((e,t)=>{pT(t)})),d.Z.subscribe("aiHelpBot:opened",(()=>{lT.hideBotButton()})),d.Z.subscribe("aiHelpBot:close",(()=>{hT&&hT.close()})),d.Z.subscribe("aiHelpBot:closed",(()=>{lT.refreshBotButtonVisibility()})),d.Z.subscribe("aiHelpBot:call",((e,t)=>{hT&&hT.call(t)})),d.Z.subscribe("aiHelpBot:showTooltip",((e,t)=>{lT.showTooltip(t.message,t.callback)})),d.Z.subscribe("aiHelpBot:hideTooltip",(()=>{lT.hideTooltip()})),d.Z.subscribe("aiHelpBot:register",((e,t)=>{lT.register(t)})),d.Z.subscribe("aiHelpBot:deregister",((e,t)=>{lT.deregister(t)})),d.Z.subscribe("aiHelpBot:showButton",((e,t)=>{hT&&hT.showButton(t.text,t.callback)})),d.Z.subscribe("aiHelpBot:write",((e,t)=>{let{text:n,ownerType:i}=t;hT&&hT.write(n,i)})),d.Z.subscribe("aiHelpBot:writeStream",((e,t)=>{let{callback:n}=t;n(hT?hT.writeStream():null)})),d.Z.subscribe("aiHelpBot:getContext",(async(e,t)=>{try{t({context:await zA()})}catch(e){t({error:e})}})),d.Z.subscribe("aiHelpBot:ask",((e,t)=>{let{data:n,options:i,onDone:s}=t;hT?hT.ask(n,i,s):s(new Error("Coach bot is closed"))})),d.Z.subscribe("aiHelpBot:input",(async(e,t)=>{let{text:n,defaultText:i,callback:s}=t;if(hT)try{s({input:await hT.input(n,i)})}catch(e){s({error:e})}else s({error:new Error("Coach bot is closed")})})),d.Z.subscribe("aiHelpBot:getHistory",(async(e,t)=>{try{if(!hT)return t({error:new Error("Coach bot is closed")});t({messages:await hT.getHistory()})}catch(e){t({error:e})}})),d.Z.subscribe("aiHelpBot:showMenu",(()=>{hT&&hT.showMenu()})),d.Z.subscribe("aiHelpBot:getLlmProxyDetails",(async(e,t)=>{try{var n,s;const e=(null===(n=i.default.currentProject)||void 0===n||null===(n=n.course)||void 0===n?void 0:n.id)||(null===(s=i.default.currentProject)||void 0===s||null===(s=s.authorAssignment)||void 0===s||null===(s=s.course)||void 0===s?void 0:s.id);if(!e)return t({error:new Error("Course is not defined")});t(await $_.eb(e))}catch(e){t({error:e})}})),d.Z.subscribe("aiHelpBot:showThinkingAnimation",(()=>{var e;null===(e=hT)||void 0===e||e.showThinkingAnimation()})),d.Z.subscribe("aiHelpBot:hideThinkingAnimation",(()=>{var e;null===(e=hT)||void 0===e||e.hideThinkingAnimation()})),d.Z.subscribe("ide:onErrorState",(async(e,t)=>{let{isError:n,output:i,format:s}=t;const a=lT.getVisibleMenu();if(!f().find(a,(e=>"codio-explain-error"===e.id)))return;if(uT.hideTooltip(),!n||!i)return;const o=await u.default.renderFeedback(i,s||dT.tC.TEXT);uT.showTooltip({message:"I can help explain the errorâ€¦",callback:()=>{uT.hideTooltip(),pT({id:"codio-explain-error",defaultValues:{errorMessage:E()(o).text()}})}})})),d.Z.subscribe("tab:activated:guides",(()=>{fT()})),d.Z.subscribe("tab:deactivated:guides",(()=>{fT()}));const bT=d.Z.create(n(65534)),vT=I().compile('<div id="speed-grader-panel" class="speed-grader-panel">\n  <span class="speed-grader-previous-group">\n    <button\n      type="button"\n      id="speed-grader-previous-ungraded-btn"\n      class="btn speed-grader-previous-ungraded-btn speed-grader-previous-btns"\n      title="Previous ungraded"\n      aria-label="Previous ungraded">\n      << &nbsp;&nbsp; Previous ungraded\n    </button>\n    <button\n      type="button"\n      id="speed-grader-previous-btn"\n      class="btn speed-grader-previous-btn speed-grader-previous-btns"\n      title="Previous"\n      aria-label="Previous">\n      < &nbsp;&nbsp; Previous\n    </button>\n  </span>\n\n  <span class="speed-grader-title">\n    {{title}}\n  </span>\n\n  <span class="speed-grader-next-group">\n    <button\n      type="button"\n      id="speed-grader-next-btn"\n      class="btn speed-grader-next-btn speed-grader-next-btns"\n      title="Next"\n      aria-label="Next">\n      Next &nbsp;&nbsp; >\n    </button>\n    <button\n      type="button"\n      id="speed-grader-next-ungraded-btn"\n      class="btn speed-grader-next-ungraded-btn speed-grader-next-btns"\n      title="Next ungraded"\n      aria-label="Next ungraded">\n      Next ungraded &nbsp;&nbsp; >>\n    </button>\n  </span>\n</div>\n');let yT=null;const wT=async()=>{const e=i.default.currentProject;if(!e.eduStartedAssignmentInfo||!e.isOpenedByTeacher)return void bT.visible({visible:!1});const{assignmentId:t,assignee:n,course:s}=CT(),a=await(0,$_.wn)(t,n,!s.details.doNotGroupQueue),{queueReadySize:o,queueGradedSize:r,isGraded:c,queueReadyPosition:l,queueGradedPosition:d,isBusy:u}=a,h=o+r;if(0===h)return void bT.visible({visible:!1});if(l<1&&d<1)return void bT.visible({visible:!1});u&&je.Z.error("The item is busy. Please try again later or go to the next item.");const p=(0,CC.bz)(e.eduStartedAssignmentInfo.assignment);let f=(null==p?void 0:p.name)||"";f=f.length>25?f.substring(0,25)+"...":f;const m=e.assigneeInfo.assigneeName,g="".concat(m," | ").concat(f," | ").concat(l+d," of ").concat(h,", ").concat(o," Ungraded");_T(g,{previous:l+d<=1,previousUngraded:l<=(c?0:1),next:l===o&&d===r,nextUngraded:l===o}),PT()},_T=(e,t)=>{const n=E()("#content"),i=n.find(".ide-container");if(0===n.find("#speed-grader-panel").length){const n=E()(vT({title:e||""}));d.Z.on(n,"click",".speed-grader-previous-ungraded-btn",(()=>{kT({isNext:!1,shouldBeUngraded:!0})})),d.Z.on(n,"click",".speed-grader-next-ungraded-btn",(()=>{kT({isNext:!0,shouldBeUngraded:!0})})),d.Z.on(n,"click",".speed-grader-previous-btn",(()=>{kT({isNext:!1,shouldBeUngraded:!1})})),d.Z.on(n,"click",".speed-grader-next-btn",(()=>{kT({isNext:!0,shouldBeUngraded:!1})})),n.find(".speed-grader-next-btn").prop("disabled",t.next),n.find(".speed-grader-previous-btn").prop("disabled",t.previous),n.find(".speed-grader-next-ungraded-btn").prop("disabled",t.nextUngraded),n.find(".speed-grader-previous-ungraded-btn").prop("disabled",t.previousUngraded),i.before(n)}bT.visible({visible:!0})},kT=async e=>{let{isNext:t,shouldBeUngraded:n}=e;const{assignmentId:i,assignee:s,course:a}=CT();try{const e=await(0,$_.si)({assignmentId:i,assignee:s,isAssignmentQueue:!a.details.doNotGroupQueue,isNext:t,shouldBeUngraded:n}),o=await(0,$_.YE)(e.assignmentId,e.assignee),r=u.default.getProjectIdeUrl(o);location.assign(r)}catch(e){je.Z.error(e.message)}},PT=function(){yT||(yT=d.Z.subscribe("app:timeChunkMsSpent",(()=>function(){const{assignmentId:e,assignee:t}=CT();(0,$_.bC)(e,t)}())))},CT=()=>{const e=i.default.currentProject;return{assignmentId:e.eduStartedAssignmentInfo.started.assignmentId,assignee:e.eduStartedAssignmentInfo.started.assignee,course:e.eduStartedAssignmentInfo.course}};d.Z.subscribe("project:open",(()=>{wT()}));const xT=JSON.parse('{"name":"feedback","description":"Student feedback","codio":{"global":true,"noFile":true,"title":"Student feedback","urls":"feedback"}}');var ET=n(2769);i.default.register({info:xT,get:async function(){return ET.ZP}});n(75212),n(4264);var ST=n(21796),IT=n.n(ST),AT=n(86150),TT=n.n(AT);n(85548);IT().microphone=TT();let jT={controls:!0,autoplay:!1,bigPlayButton:!1,loop:!1,fluid:!0,controlBar:{fullscreenToggle:!1},plugins:{record:{audio:!0,debug:!0,audioMimeType:"audio/webm",maxLength:3600},wavesurfer:{backend:"WebAudio",waveColor:"#36393b",progressColor:"black",displayMilliseconds:!0,debug:!0,cursorWidth:1,hideScrollbar:!0,plugins:[IT().microphone.create({bufferSize:4096,numberOfInputChannels:1,numberOfOutputChannels:1,constraints:{video:!1,audio:!0}})]}}};const ZT=class{constructor(e,t){this.container=e,this.options=t,this.id=u.default.GUID(4);const n=(e=>{let t;switch(u.default.path.getFileExtension(e)){case"wav":t="audio/wav";break;case"ogg":t="audio/ogg";break;case"webm":t="audio/webm";break;default:t=void 0}return t})(t.path);if(n)jT=f().set(jT,"plugins.record.audioMimeType",n),this.createPlayer(e,jT);else{const n=u.default.path.getFileExtension(t.path);e.find(".record-audio-panel-info").text('File type "'.concat(n,'" is not supported'))}}createPlayer(e,t){this.playerEl=this.createMediaElement(),e.find(".record-audio-panel-body").prepend(this.playerEl),this.player=(0,Jb.default)(this.playerEl[0],{...t},(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n]})),this.bindEvents()}bindEvents(){this.player.ready((()=>{this.player.record().getDevice()})),this.player.on("deviceError",(()=>{this.player.deviceErrorCode,this.updateStatus("device error code ".concat(this.player.deviceErrorCode))})),this.player.on("error",((e,t)=>{console.error(t),this.updateStatus(t)})),this.player.on("startRecord",(()=>{this.updateStatus("started recording")})),this.player.on("finishRecord",(()=>{this.player.recordedData,this.player,this.updateStatus("finished recording"),this.updateOnSaveCallback()}))}updateOnSaveCallback(){this.options.callbacks&&(this.options.callbacks.enableSave(),this.options.callbacks.onSaveCallback=()=>this.saveBinaryFile(this.options.path,this.player.recordedData))}async createFile(e){var t=i.default.currentProject;if(!t)throw new Error("No Project Opened");if(e=(0,u.qg)(e),t.exists(e))throw new Error("File exists");var n=u.default.path.parse(e),s=n.name,a=n.dir;if(a.length>0&&!t.exists(a))throw Error("should not be a directory");return t.createFile(s,a)}async saveBinaryFile(e,t){const n=i.default.currentProject;if(!n)throw new Error("No Project Opened");e=(0,u.qg)(e);try{n.exists(e)||await this.createFile(e);const s="record-audio-".concat(u.default.GUID(),".tmpfile");this.onProgress(0);const a=await lt("upload",t,s,(e=>{this.onProgress(e-e/10>>0)})),o=await a.promise;this.onProgress(90),await i.default.currentProject.uploadFromS3File(e,o.Bucket,o.Key),this.onProgress(100),this.updateStatus("sound uploaded to ".concat(e))}catch(e){je.Z.error("error on save audio ".concat(e)),console.error("error on save recorded audio",e),this.updateStatus(e)}}onProgress(e){const t=this.container.find(".progress-bar");t.removeClass("hidden");const n=t[0];n.style.width=e+"%",n.innerHTML=parseInt(e,10)+"%"}createMediaElement(){return E()("<audio id='".concat(this.id,"' class='video-js vjs-default-skin'></audio>"))}isRecording(){return this.player.record().isRecording()}startRecording(){this.player.record().start()}stopRecording(){this.player.record().stop()}destroy(){this.player&&(this.player.record().destroy(),this.player=null,this.playerEl.remove())}updateStatus(e){}},OT=I().compile('<div id="record-audio-panel" class="record-audio-panel">\n  <div class="record-audio-panel-info">File will be saved to "{{path}}"</div>\n  <div class="record-audio-panel-body"></div>\n  <div class="record-audio-panel-status">\n    <div class="progress-bar hidden"></div>\n  </div>\n</div>\n');const NT=class{constructor(){this.bindEvents()}bindEvents(){d.Z.subscribe("guides:record-audio:path",this.showRecorder)}showRecorder(e,t){if(0===E()("#content").find("#record-audio-panel").length){const e=E()(OT({path:t.path})),n={onSaveCallback:()=>{}},i=new ZT(e,{path:t.path,callbacks:n}),s=(0,Ae.Z)({title:"Record audio",content:e,buttons:[{title:"Save",type:1,onClick:async function(){try{await n.onSaveCallback(),s.close()}catch(e){je.Z.error(e)}}},{title:"Close",class:"mb-cancel",onClick:function(){s.close(Ae.Z.IDCANCEL)}}],width:500,onHide:()=>{i.destroy()}});s.buttons()[0].disable(),n.enableSave=()=>{s.buttons()[0].enable()}}}};new NT;const DT=I().compile('<div id="info-bar-panel" class="info-bar-panel">\n  {{#if studentInfo}}\n    <span class="info-bar-studentInfo">\n      {{studentInfo.assigneeName}} | {{studentInfo.assignmentName}}\n    </span>\n  {{/if}}\n</div>\n');let MT=!1;const RT=async()=>{const e=(()=>{var e;if(MT)return null;const t=i.default.currentProject;if(!t.eduStartedAssignmentInfo||!t.isOpenedByTeacher||t.isTemporary)return null;const n=(0,CC.bz)(t.eduStartedAssignmentInfo.assignment);return{assigneeName:(null==t||null===(e=t.assigneeInfo)||void 0===e?void 0:e.assigneeName)||"",assignmentName:(null==n?void 0:n.name)||""}})();if(!!!e)return;const t=E()("#content"),n=t.find(".ide-container");if(0===t.find("#info-bar-panel").length){const t=E()(DT({studentInfo:e}));n.before(t)}};d.Z.subscribe("speedGrader:visible",((e,t)=>{const{visible:n}=t;MT=n,RT()}));var LT=n(56609);const FT=JSON.parse('{"type":"single","params":{"width":"50%","height":"50%","focus":false,"canFocus":false},"children":[{"type":"vertical","params":{"width":"50%","height":"50%"},"children":[{"type":"single","params":{"width":"200px","fixed":true},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":0},"children":[{"type":"tab","params":{"ext":"filetree","active":true,"title":"Filetree"}}]}]},{"type":"horizontal","params":{"width":"50%","height":"50%"},"children":[{"type":"vertical","params":{"width":"50%","height":"50%"},"children":[{"type":"single","params":{"width":"30%","height":"50%","focus":true,"canFocus":true},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":0},"children":[]}]},{"type":"vertical","params":{"width":"60%","height":"50%"},"children":[{"type":"single","params":{"width":"50%","height":"50%","focus":false,"canFocus":true},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]},{"type":"single","params":{"width":"50%","height":"50%","focus":false,"canFocus":true},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]}]}]},{"type":"single","params":{"width":"50%","height":"50%","focus":false,"canFocus":true},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]}]}]}]}'),BT=JSON.parse('{"type":"single","params":{"width":"50%","height":"50%","focus":false,"canFocus":false},"children":[{"type":"vertical","params":{"width":"50%","height":"50%"},"children":[{"type":"single","params":{"width":"200px","fixed":true},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":0},"children":[{"type":"tab","params":{"ext":"filetree","active":true,"title":"Filetree"}}]}]},{"type":"vertical","params":{"width":"50%","height":"50%"},"children":[{"type":"single","params":{"width":"50%","height":"50%","focus":false,"canFocus":true},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":0},"children":[]}]},{"type":"single","params":{"width":"50%","height":"50%","focus":true,"canFocus":true},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]}]}]}]}'),UT=JSON.parse('{"type":"single","params":{"width":"50%","height":"50%","focus":false,"canFocus":false},"children":[{"type":"vertical","params":{"width":"50%","height":"50%"},"children":[{"type":"single","params":{"width":"200px","fixed":true},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":0},"children":[{"type":"tab","params":{"ext":"filetree","active":true,"title":"Filetree"}}]}]},{"type":"horizontal","params":{"width":"50%","height":"50%"},"children":[{"type":"single","params":{"width":"50%","height":"50%","focus":true,"canFocus":true},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":0},"children":[]}]},{"type":"single","params":{"width":"50%","height":"50%","focus":false,"canFocus":true},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]}]}]}]}'),qT=JSON.parse('{"type":"single","params":{"canFocus":false},"children":[{"type":"vertical","children":[{"type":"single","params":{"width":"200px","fixed":true},"children":[{"type":"tabs","children":[{"type":"tab","params":{"active":false,"title":"Filetree","ext":"filetree"}}]}]},{"type":"single","params":{"focus":true,"width":"50%"},"children":[{"type":"tabs","children":[{"type":"tab","params":{"filename":{"names":["readme.md","readme.markdown"],"caseSensitive":false},"active":true,"ext":"tree","view":"preview"}}]}]}]}]}'),HT=JSON.parse('{"type":"single","params":{"canFocus":false},"children":[{"type":"vertical","children":[{"type":"single","params":{"width":"200px","fixed":true},"children":[{"type":"tabs","children":[{"type":"tab","params":{"active":false,"title":"Filetree","ext":"filetree"}}]}]},{"type":"single","params":{"focus":true,"width":"50%"},"children":[{"type":"tabs","children":[]}]}]}]}');n(47403);var GT={v:"vertical",s:"single",h:"horizontal",t1:"tabs",t2:"tab"};function WT(e,t,n){n=n||[],f().isUndefined(e)||!1!==t.call(null,e,n)&&f().forEach(e.children,(function(e,i){WT(e,t,n.concat([i]))}))}function zT(e){return f().isUndefined(e)?"single":GT[e]}function VT(e){var t={type:"single",params:{canFocus:!1},children:[]};return t.children.push({type:zT(e.t),children:[]}),f().forOwn(e,(function(e,n){if(!(n.indexOf("c")<0)){var i=n.substring(1).split(".");f().reduce(i,(function(t,n,s){var a,o;return f().isUndefined(t.children)&&(t.children=[]),f().isUndefined(t.children[n])&&(t.children[n]={}),i.length-1===s&&(t.children[n]=(a=e,o={params:{}},f().forEach(a,(function(e){f().includes(Object.keys(GT),e)?o.type=zT(e):f().isNaN(+e)?e.match(/^[hw]\d/)?f().merge(o.params,function(e){var t={};e.lastIndexOf("f")===e.length-1&&(t.fixed=!0,e=e.substring(0,e.length-1));var n=e.substring(0,1),i="";return"w"===n?i="width":"h"===n&&(i="height"),t[i]=e.substring(1),t}(e)):0===e.indexOf("//")?f().merge(o.params,function(e){var t=e.split("//");return{ext:t[1],filename:t[2],view:t[3]}}(e)):"f"===e&&(o.params.focus=!0):o.params.activeTabIndex=+e})),o)),t.children[n]}),t.children[0])}})),t}const KT={showcase:FT,column2:BT,row2:UT,default:qT,defaultWorkingCopy:HT,toUrl:function(e){var t={};return WT(e.children[0],(function(e,n){if(f().isEmpty(n))(function(e){return e.type&&f().includes(["horizontal","vertical"],e.type)})(e)&&(t.t=e.type.substring(0,1));else{var i,s,a="c"+n.join("."),o=f().merge({type:e.type},e.params);t[a]=(i=o,s=[],f().forOwn(i,(function(e,t){switch(t){case"type":s.push(f().findKey(GT,(function(t){return t===e})));break;case"activeTabIndex":e>0&&s.push(e);break;case"width":case"height":var n=t.substring(0,1)+e;n+=i.fixed?"f":"",s.push(n);break;case"filename":var a="//"+(i.ext||"tree");f().isUndefined(e)||(a+="//"+e,f().isString(i.view)&&(a=a+"//"+i.view)),s.push(a);break;case"focus":e&&s.push("f")}})),s)}})),E().param(t)},parseQuery:function(e){if(f().isString(e)){var t=E().deparam(e);if(!f().isUndefined(t.t))return VT(t)}}};var JT=n(56386),YT=n(2774),QT=n(2774).rc,XT=d.Z.create(n(10270)),$T=function(e){this.id=f().uniqueId(),this.children=[],this.isPanel=!0,e=f().defaults(e||{},{width:"100%",height:"100%",fixed:!1,collapsed:0}),this.template=null,this.appended=!1,this.panel=e.panel,this.width=e.width,this.height=e.height,this.fixed=e.fixed,this.collapsed=e.collapsed,this.oldWidth=e.oldWidth},ej=$T.prototype;function tj(e,t,n){if(e._latestDeepFocus)return e._latestDeepFocus;switch(e.type){case"single":return e;case"vertical":return tj(e[t],t,n);case"horizontal":return tj(e[n],t,n);default:return null}}Object.defineProperty(ej,"width",{get:function(){return this._width},set:function(e){this._width!==e&&(XT.panelChangeSize({panel:this,orientation:"width",new:e,old:this._width}),this._width=e)}}),Object.defineProperty(ej,"height",{get:function(){return this._height},set:function(e){this._height!==e&&(XT.panelChangeSize({panel:this,orientation:"height",new:e,old:this._height}),this._height=e)}}),ej.collapse=function(e){if(!this.collapsed&&this.container){this.oldWidth=this.container.width();var t=QT+"px";this.container.css("width",t),this.container.addClass("panel-collapsed");var n=this.container.find(".panel-expand");return n.show(),n.addClass("panel-expand-"+e),this.width=t,this.collapsed=e,!0}return!1},ej.expand=function(){if(this.collapsed&&this.container){var e=this.oldWidth+"px";this.container.css("width",e),this.container.removeClass("panel-collapsed");var t=this.container.find(".panel-expand");return t.hide(),t.removeClass("panel-expand-"+this.collapsed),this.width=e,this.collapsed=0,!0}return!1},ej.addChild=function(e){e.panel=this,this.children.push(e)},ej.addChildren=function(e){f().forEach(e,f().bind(this.addChild,this))},ej.render=function(e){var t=this;if(this.appended)return this.template.show();e&&(t.container=e),f().forEach(this.children,(function(e){e.render(t.template)})),t.container.append(t.template),this.appended=!0,this.collapsed&&(t.container.addClass("panel-collapsed"),t.container.find(".panel-expand").show(),t.container.find(".panel-expand").addClass("panel-expand-"+this.collapsed))},ej.isOpen=function(e,t){return f()(this.children).map((function(n){return n.isOpen(e,t)})).compact().first()},ej.getAllOpened=function(e,t){return f()(this.children).map((function(n){return n.isOpen(e,t)})).compact().value()},ej.closeAllTabs=async function(e,t){const n=f().map(this.children,(function(n){return f().isFunction(n.closeAllTabs)?n.closeAllTabs(e,t):f().isFunction(n._closeTabs)?n._closeTabs(e,t):void 0}));return f().isFunction(this._closeTabs)?Promise.all([...n,this._closeTabs(e,t)]):Promise.all(n)},ej.showHelpBlock=function(){f().each(this.children,(function(e){f().isFunction(e.showHelpBlock)&&e.showHelpBlock()}))},ej.hideHelpBlock=function(){f().each(this.children,(function(e){f().isFunction(e.hideHelpBlock)&&e.hideHelpBlock()}))},ej.detach=function(){this.template.detach(),this.appended=!1},ej.remove=async function(){this.appended=!1;var e=f().invokeMap(this.children,"remove");await Promise.all(f().flattenDeep(e)),this.template.remove()},ej.serialize=function(){var e=f().map(this.children,(function(e){return e.serialize()}));return{type:this.type,params:{width:this.width,height:this.height,fixed:this.fixed,collapsed:this.collapsed,oldWidth:this.oldWidth},children:e}},ej._setFocus=function(e){this._latestDeepFocus=e,this.panel&&"function"==typeof this.panel._setFocus&&this.panel._setFocus(e)},ej.searchNeighborhood=function(e){return function(e,t){var n=e.panel;if(n){if(-1!==["Left","Right"].indexOf(t)){if("vertical"===n.type){if("Right"===t&&e!==n.right)return tj(n.right,"left","top");if("Left"===t&&e!==n.left)return tj(n.left,"right","top")}}else if("horizontal"===n.type){if("Up"===t&&e!==n.top)return tj(n.top,"left","bottom");if("Down"===t&&e!==n.bottom)return tj(n.bottom,"left","top")}if("function"==typeof n.searchNeighborhood)return n.searchNeighborhood(t)}return null}(this,e)};const nj=$T,ij=I().compile('<div class="panel-container">\n    <div class="panel-expand">\n        <button type="button" class="panel-expand-menu" aria-label="Expand Guides pane">\n          <svg class="panel-expand-menu-left-icon" width="24" height="24" version="1.1" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n            <path d="m9 6h12v2h-12v-2m0 5h12v2h-12v-2m0 5h12v2h-12z"/>\n            <path d="m8 7-5 5 5 5z"/>\n          </svg>\n          <svg class="panel-expand-menu-right-icon" width="24" height="24" version="1.1" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n            <path d="m3 6h12v2h-12v-2m0 5h12v2h-12v-2m0 5h12v2h-12z"/>\n            <path d="m16 7 5 5-5 5z"/>\n          </svg>\n        </button>\n    </div>\n    <div class="panel-editor"></div>\n</div>\n');var sj=d.Z.create(n(10270)),aj=function(e){aj._sc.constructor.call(this,e),e=f().defaults(e||{},{width:"50%",height:"50%",canFocus:!0,focus:!1,collapsed:0}),this.id=f().uniqueId(),this.children=[],this.canFocus=e.canFocus,this.hasFocus=e.focus,this.type=YT.V5.SINGLE,this.template=E()(ij()),this.width=e.width,this.height=e.height,this.collapsed=e.collapsed,this.oldWidth=e.oldWidth,this._registerEvents()};u.default.inherit(aj,nj);var oj=aj.prototype;oj._registerEvents=function(){this._registerTemplateEvents(),this._eventSizeChange=d.Z.subscribe("panel:size:change",this._updateEditor.bind(this)),this._focusHandler=this.focus.bind(this),this._expandFocusHandler=d.Z.on(this.template.find(".panel-expand"),"click",(()=>sj.expandPanel({id:this.id})))},oj._unregisterEvents=function(){d.Z.unsubscribe(this._eventSizeChange),this._disposableEditorFocusHandler&&(this._disposableEditorFocusHandler.dispose(),this._disposableEditorFocusHandler=null),this.canFocus&&d.Z.off(this.template,"click",this._focusHandler),d.Z.off(this.template.find(".panel-expand"),"click",this._expandFocusHandler)},oj._registerTemplateEvents=function(){this.canFocus&&d.Z.on(this.template,"click",this._focusHandler)},oj._updateEditor=function(){this._editor&&this._editor.layout()},Object.defineProperty(oj,"tabs",{get:function(){return this.children[0]}}),oj.focus=function(){if(this.canFocus&&(this.panel&&this.panel._setFocus(this),!this.template.hasClass("focus"))){E()(".ide").find(".panel-container").removeClass("focus"),this.template.addClass("focus");var e=this,t=function(){e.tabs.focus(),e.hasFocus=!0,sj.panelChangeFocus(e)};navigator.userAgent.match(/msie/i)?f().delay(t,200):t()}},oj.addTab=function(e,t){e.panel=this,this.tabs.addTab(e,t)},oj.detachTab=function(e){return this.tabs.detachTab(e)},oj.closeTab=function(e,t){return this.tabs.closeTab(e,t)},oj.activateTab=function(e,t){this.children[0].activateTab(e,t),this._updateEditor()},oj.open=function(e,t,n){n=n||{};var i=this.isOpen(t,e);return f().isUndefined(i)?(i=this.tabs.open(e,t,n),!n.noFocus&&this.focus()):(i.setOptions(n),this.activateTab(i,n.view),!n.noFocus&&this.focus()),i},oj.getTab=function(e){return this.tabs.getTab(e)},oj.getTabs=function(e){return f()(this.children).map((t=>t.isPanel?t.getTabs(e):(t=>f().filter(t,(t=>t.extensionName!==e)))(this.tabs.children))).flatten().value()},oj._closeTabs=async function(e,t){if(!this.canFocus)return;const n=this,i=f().clone(this.tabs.children),s=f().map(i,(function(i){if(i&&!f().includes(e,i.extensionName))return n.closeTab(i,t).catch(u.default.error.checkErrorForIgnore)}));return Promise.all(s)},oj.moveTab=function(e,t){return this.tabs.moveTab(e,t)},oj.activeTab=function(){return this.tabs._activeTab},oj.remove=async function(){this._unregisterEvents(),await aj._sc.remove.apply(this,arguments),this._editor&&this._editor.close(),await u.default.promise.delay(10),this._editor=null},oj.render=function(e){var t=this;this.appended&&this.template.detach(),e&&(t.container=e),f().forEach(this.children,(function(e){e.render(t.template)})),t.container.append(t.template),t._registerTemplateEvents(),t._updateEditor(),this.appended=!0,this.collapsed&&(t.container.addClass("panel-collapsed"),t.container.find(".panel-expand").show(),t.container.find(".panel-expand").addClass("panel-expand-"+this.collapsed))},oj.editor=function(){return this._editor||(this._editor=new Wn.ZP(this.template.find(".panel-editor")[0]),this._disposableEditorFocusHandler=this._editor.onDidFocus(this._focusHandler)),this._editor},oj.detach=function(){this.template.detach(),this.appended=!1},oj.serialize=function(){var e=f().map(this.children,(function(e){return e.serialize()}));return{type:this.type,params:{width:this.width,height:this.height,focus:this.hasFocus,canFocus:this.canFocus,fixed:this.fixed,collapsed:this.collapsed,oldWidth:this.oldWidth},children:e}};const rj=aj;var cj=n(6836).n,lj=n(2774).V5,dj=n(2774).rc,uj=n(2774).y4,hj=d.Z.create(n(10270));const pj=I().compile('<div class="vertical-panel-container split-panel-container">\n  <div class="left"></div>\n  <div\n    class="divider"\n    role="separator"\n    tabindex="0"\n    aria-label="Move panel divider"\n  ></div>\n  <div class="right"></div>\n</div>\n');var fj=function(e){fj._sc.constructor.call(this,e),this.type=lj.VERTICAL,this.template=E()(pj());const t=(0,u.xD)(4);this.template.find(".left").attr("id",t);this.template.find(".divider").attr("id","divider-".concat(this.id)).attr("aria-controls",t).attr("aria-valuenow",50),this._debounceResize=f().debounce(this._resizeListener.bind(this),200),this._registerEvents()};(0,u.ED)(fj,nj);var mj=fj.prototype;mj._unregisterEvents=function(){d.Z.unsubscribe(this._eventPanelExpand),d.Z.unsubscribe(this._eventPanelCollapse),d.Z.unsubscribe(this._eventSizeChange)},mj._resizeListener=function(){var e;const t=this.left.template.width(),n=(null===(e=this.right)||void 0===e?void 0:e.template.width())||0,i=Math.ceil(100*t/(t+n));this.template.find("#divider-".concat(this.id)).attr("aria-valuenow",i)},mj._registerEvents=function(){var e=this;this._eventPanelExpand=d.Z.subscribe("panel:expand:#id",(function(t){e.left.id===t.id&&e.expandLeft(),e.right.id===t.id&&e.expandRight()})),this._eventPanelCollapse=d.Z.subscribe("panel:collapse:#id",(function(t){e.left.id===t.id&&e.collapseLeft(),e.right.id===t.id&&e.collapseRight()})),this._eventSizeChange=d.Z.subscribe("panel:size:change",this._debounceResize)},mj.getTabs=function(e){return f().concat(this.left.getTabs(e),this.right.getTabs(e))},Object.defineProperty(mj,"left",{get:function(){return this.children[0]}}),Object.defineProperty(mj,"right",{get:function(){return this.children[1]}}),mj.expandRight=function(){this._expand(this.right,this.left,this.template.children(".left"))},mj.expandLeft=function(){this._expand(this.left,this.right,this.template.children(".right"))},mj._expand=function(e,t,n){e.expand();const i=this.template.width()-e.oldWidth-uj+"px";n.css("width",i),t.width=i,e.container.find(".tabs-container").show(),hj.panelResizeEnd()},mj._collapse=function(e,t,n,i,s){const a=n.width()-dj+i.width()+"px";e.collapse(s),t.expand(),i.css("width",a),t.width=a,n.find(".tabs-container").hide(),n.find(".panel-expand-menu").focus(),hj.panelResizeEnd()},mj.collapseRight=function(){this._collapse(this.right,this.left,this.template.children(".right"),this.template.children(".left"),"right")},mj.collapseLeft=function(){this._collapse(this.left,this.right,this.template.children(".left"),this.template.children(".right"),"left")},mj.remove=function(){return this._unregisterEvents(),this._debounceResize&&this._debounceResize.cancel(),this._debounceResize=null,fj._sc.remove.apply(this,arguments)},mj.render=function(e){var t=this;cj(t,"width"),f().forEach(["left","right"],(function(e){var n=t.template.children("."+e);n.css("width",t[e].width),t[e].fixed&&n.addClass("flex-fixed"),t[e].render(n)})),e.append(t.template)},mj.focus=function(){this.right.focus()};const gj=fj;var bj=n(6836);const vj=I().compile('<div class="horizontal-panel-container split-panel-container">\n  <div class="top"></div>\n  <div\n    class="divider"\n    role="separator"\n    tabindex="0"\n    aria-label="Move panel divider"\n  ></div>\n  <div class="bottom"></div>\n</div>\n');var yj=function(e){yj._sc.constructor.call(this,e),this.type=YT.V5.HORIZONTAL,this.template=E()(vj());const t=(0,u.xD)(4);this.template.find(".top").attr("id",t);this.template.find(".divider").attr("id","divider-".concat(this.id)).attr("aria-controls",t).attr("aria-valuenow",50),this._debounceResize=f().debounce(this._resizeListener.bind(this),200),this._registerEvents()};(0,u.ED)(yj,nj);var wj=yj.prototype;wj._resizeListener=function(){var e;const t=this.top.template.height(),n=(null===(e=this.bottom)||void 0===e?void 0:e.template.height())||0,i=Math.ceil(100*t/(t+n));this.template.find("#divider-".concat(this.id)).attr("aria-valuenow",i)},wj._registerEvents=function(){this._eventSizeChange=d.Z.subscribe("panel:size:change",this._debounceResize)},wj._unregisterEvents=function(){d.Z.unsubscribe(this._eventSizeChange)},wj.getTabs=function(e){return f().concat(this.top.getTabs(e),this.bottom.getTabs(e))},Object.defineProperty(wj,"top",{get:function(){return this.children[0]}}),Object.defineProperty(wj,"bottom",{get:function(){return this.children[1]}}),wj.remove=function(){return this._unregisterEvents(),this._debounceResize&&this._debounceResize.cancel(),this._debounceResize=null,yj._sc.remove.apply(this,arguments)},wj.render=function(e){var t=this;(0,bj.n)(t,"height"),f().forEach(["top","bottom"],(function(e){var n=t.template.children("."+e);t[e].render(n),n.css("height",t[e].height),t[e].fixed&&n.addClass("flex-fixed")})),e.append(t.template)},wj.focus=function(){this.bottom.focus()};const _j=yj;var kj=n(19575).ET,Pj=n(2774).V5,Cj=d.Z.create(n(10270));const xj=I().compile('<div class="tab-container editor-size-mark"></div>\n');var Ej=function(e){e=f().clone(e),e=f().defaults(e||{},{active:!1}),this._fullscreen=!1,this.filename=e.filename||"",this.title=this._generateTitle(this.filename,e.ext,e.title),this.active=e.active,this.activated=!1,this.panel=e.panel,e.options=e.options||{},this.options=e.options;var t=this.template=E()(xj());this.template.addClass(e.ext),this.extensionName=e.ext,!e.view&&u.default.markdown.isReadme(this.filename)?this.viewType="preview":this.viewType=e.view;var n=this.filename;this.syncing=0,this._subscriptions=[],this.dragging=!1;var s=this;if(e.options.tab=this,this.extData=i.default.getByUrl(e.ext),void 0===this.extData)this.ready=Promise.reject(new Error("No extension")),this.extension=Promise.reject(new Error("No extension"));else{var a=this.extData.info.name;this.ready=new Promise(((o,r)=>{this.extension=i.default.create(a,t,n,this.viewType,e.ext,e.options).then((function(e){if(f().isUndefined(e))throw new Error("Extension was not created");return s.closing&&s.active||o(),e})).catch((e=>r(e)))}))}this._subscribe()},Sj=Ej.prototype;function Ij(e){var t=e.panel;if(t){var n=t.hasFocus?"focus":"unfocus";return e._callExtensionSync(n)}}Sj.setOptions=function(e){return this._callExtensionSync("setOptions",e)},Sj._subscribe=function(){var e=this._subscriptions.push.bind(this._subscriptions);e(d.Z.subscribe("filetree:file:drop",this._fileDrop.bind(this))),e(d.Z.subscribe("panel:focus:change",Ij.bind(null,this))),e(d.Z.subscribe("dialog:close",Ij.bind(null,this))),e(d.Z.subscribe("tab:activated",Ij.bind(null,this))),e(d.Z.subscribe("tab:focus",Ij.bind(null,this)))},Sj._fileDrop=function(e,t){if(this.template&&this.template.is(t.tab)){let e=null;const n=this.panel&&this.panel.editor();if(this.activated&&n){e=n.getPosition();n.getLineCount()===t.line&&(e={lineNumber:t.line+1,column:1})}t.position=e,this._callExtension("fileDrop",t).then((i=>{!i&&e&&this.activated&&n.replaceRange(t.path+"\n",e,e)}))}},Sj._unsubscribe=function(){var e=this;f().forEach(this._subscriptions,(function(t){t=e._subscriptions.pop(),d.Z.unsubscribe(t)}))},Sj._generateTitle=function(e,t,n){if(f().isString(n))return n;if(f().isObject(n)&&f().has(n,e))return n[e];f().isUndefined(e)&&(e="");var i=kj.parse(e).name;return"tree"===t?i:f().template("<%= file %> (<%= ext %>)")({file:i,ext:t})},Sj._callExtension=function(e,t){return this.extension.then((n=>{var i;if(n&&(f().isFunction(n[e])||"AsyncFunction"===(null===(i=n[e])||void 0===i?void 0:i.constructor.name))){const i=this.panel&&this.panel.editor();return n[e].call(n,i,this,t)}}))},Sj._callExtensionSync=function(e,t){return this.extension.then((n=>{if(n&&f().isFunction(n[e])){const i=this.panel&&this.panel.editor();return n[e].call(n,i,this,t)}}))},Sj._callExtensionSyncClose=function(e,t){return this.extension.then((n=>{var i;if(n&&("function"===E().type(n[e])||"AsyncFunction"===(null===(i=n[e])||void 0===i?void 0:i.constructor.name))){const i=this.panel&&this.panel.editor();var s=n[e].call(n,i,this,t);return s||Promise.resolve()}}))},Sj.switchType=async function(e){if(e)return this.viewType=e,this._callExtensionSync("switchType",e)},Sj.switchToNextType=async function(){return this._callExtensionSync("switchToNextType")},Sj.render=function(e){var t=this;const n=E()('<div class="blocker-container" />');e.find("> .blocker-container").remove(),e.append(n),n.showFProgress(null,0);var i=(new Date).getTime();return this._callExtension("activate").then((function(){var e=(new Date).getTime()-i<1e3;return n.completeFProgress(e)})).then((function(){if(t.closing||!t.active)return;e.find("> .blocker-container").remove(),e.find(".tab-container").detach(),e.append(t.template);const n=t.panel&&t.panel.editor();return n&&t.editorViewState&&f().defer((()=>{n.restoreViewState(t.editorViewState),t.editorViewState=null})),t._callExtensionSync("afterActivate")})).catch((function(e){e&&e.close&&t.panel.closeTab(t).catch(u.default.error.checkErrorForIgnore)}))},Sj.setTitle=function(e){this.title=e,this.panel&&(this.panel.tabs.tabbar.render(),this.panel.tabs.tabbar.activate(this.panel.tabs._activeTabIndex))},Sj.rename=function(e){let t;const n=this.panel&&this.panel.editor();this.activated&&n&&n.isVisible()&&(t=n.saveViewState()),this.filename=e,this.title=this._generateTitle(e,this.extensionName),this._unsubscribe(),this._subscribe(),this._callExtension("rename",e).then((()=>n&&t&&n.restoreViewState(t)))},Sj.detach=function(){this.deactivate(),this.panel=null},Sj.activate=function(e){if(this.activated)return Promise.resolve();this.active=!0;var t=this;return this.render(e).then((function(){if(!t.closing&&t.active)return t.activated=!0,Cj.tabActivated({extension:t.extensionName},t),t.getFileName()}))},Sj.deactivate=function(){const e=this.panel&&this.panel.editor();if(this.active&&e&&e.isVisible()&&(this.editorViewState=e.saveViewState()),this.active=!1,!this.activated)return Promise.resolve();var t=this;return this.fullscreen=!1,this._callExtension("beforeDeactivate").finally((function(){return t.activated=!1,t._callExtension("deactivate")})).finally((function(){t.template.detach(),Cj.tabDeactivated({extension:t.extensionName},t)}))},Sj.dragstart=function(){this.dragging=!0},Sj.dragend=function(){this.dragging=!1},Sj.serialize=function(){var e=this.extensionName,t=i.default.getByUrl(e);if(t){var n=t.info;if(f().has(n,"codio")&&f().has(n.codio,"noStateSave")&&!0===n.codio.noStateSave)return}return{type:Pj.TAB,params:{filename:this.filename,ext:e,active:this.activated,title:this.title,view:this.viewType}}},Object.defineProperty(Sj,"dirty",{get:function(){return i.default.currentProject?this.getShareFile().then((function(e){return!(!e||!e.save)&&e.save.dirty})):Promise.resolve(!1)}}),Object.defineProperty(Sj,"fullscreen",{get:function(){return this._fullscreen},set:function(e){var t=i.default.getByUrl(this.extensionName);t&&!0===t.info.codio.noFullscreen?this._fullscreen=!1:(e=!!e,this._fullscreen!==e&&(this._fullscreen=e,function(e,t){var n=t?"addClass":"removeClass";e.template[n]("fullscreen"),e.panel._updateEditor(),e.extension.then((function(e){t?Cj.enterFullscreen(e):Cj.leaveFullscreen(e)}))}(this,e)))}}),Sj.focus=function(){return this._callExtensionSync("focus")},Sj.getFileName=function(){return this.filename?Promise.resolve(this.filename):this.extension.then((function(e){if(e&&f().isFunction(e.getFile))return e.getFile()}))},Sj.getShareFile=function(){return this.getFileName().then((function(e){return i.default.currentProject.getShareFile(e)}))},Sj.close=function(e,t){return this._unsubscribe(),this._callExtensionSyncClose("close",t).then((t=>(this.active&&e&&e.find(".blocker-container").remove(),this.template.remove(),Cj.tabClosed(),t)))},Sj.beforeClose=async function(e){let t=await this._callExtension("isCloseable");if(t=void 0===t||t,!t){const e=new Error("Close tab is not allowed");throw e.ignore=!0,e}if(await this._callExtension("beforeClose",e),i.default.currentProject.protectLayout){const e=new Error("Layout is protected. Close tab is not allowed");throw e.ignore=!0,e}},d.Z.subscribe("command:ide:fullscreen",(function(){var e=i.default.ide;if(e.panels.focus){var t=e.panels.focus.activeTab();t&&(t.fullscreen=!t.fullscreen)}}));const Aj=Ej,Tj=JSON.parse('[{"title":"Preview static","command":"preview:tab-file","ext":["tree"]},{"title":"Code Playback","noDefaults":true,"command":"file:open","params":{"ext":"change-player"},"context":{"project":["OWNER","ADMIN","READ"]},"ext":["tree"]},{"separator":"true","ext":["tree"],"isfile":true},{"title":"Close File","command":"ide:tab_close","isfile":true},{"title":"Close Other Files","command":"ide:tab_close_others","isfile":true},{"title":"Close All Files","command":"ide:tab_close_all","isfile":true},{"separator":true,"isfile":true},{"title":"Close Files to the Right","command":"ide:tab_close_right","isfile":true},{"title":"Close Files to the Left","command":"ide:tab_close_left","isfile":true}]');var jj=n(9380).A,Zj=i.default.get("codio-right-menu"),Oj=n(10947).q;function Nj(e,t){var n,s,a=this,o={onBeforeShow:function(e){s=null;var a=E()(e.target).closest(".tab");if(0===a.length)return!1;s=t.getTab(a);var o=function(e,t){return f().filter(e,(function(e){return(!i.default.currentProject.protectLayout||!e.isfile)&&(!f().isArray(e.ext)||-1!==f().indexOf(e.ext,t))}))}(Tj,s.extensionName);n.setItems(o)},onSelect:function(e){var n=this.getNode(e);if(n.command&&s){var i=n.command.split(":"),a=i.shift(),o=i.join(":");f().defer((function(){const e=f().extendWith({filename:s.filename,tabbar:t,tab:s},n.params||{});jj.execute(a,o,e)}))}}};this.state=Zj&&Zj().then((function(t){(n=a.rightMenu=new t(e,null,null,o)).setItems(Tj)}))}Nj.prototype.remove=function(){var e=this;this.state&&this.state.then((function(){e.rightMenu&&e.rightMenu.remove()}))},d.Z.subscribe("tab:right-menu:update:#id",(function(e,t){var n=e.id,i=Oj(Tj,n);i&&f().forOwn(t,(function(e,t){i[t]=e}))}));const Dj=Nj;n(9781);var Mj=d.Z.create(n(10270));const Rj=I().compile('<div class="tabbar">\n  {{#each tabs}}\n    <div data-id="{{@index}}" class="tab {{#if activated}}active{{/if}}" draggable="true">\n      <div class="dirty {{isDirty}}">*</div>\n      <div class="title">\n        <a tabindex="0" href="javascript:void(0)" title="{{title}}" aria-label="{{title}} tab" draggable="false">{{title}}</a>\n      </div>\n      {{#if ../showClose}}\n      {{#unless extData.info.codio.hideClose}}\n      {{#unless hideClose}}\n      <div class="close-tab">\n        <button type="button" class="close-button" title="Close {{title}} tab" aria-label="Close {{title}} tab">\n          <span class="close-button-icon">Ã—</span>\n        </button>\n      </div>\n      {{/unless}}\n      {{/unless}}\n      {{/if}}\n    </div>\n  {{/each}}\n\n</div>\n');var Lj=function(e,t){this.container=e,this.tabs=t,this.template=Rj,this.fragment=null,this.rightMenu=null,this.eventHandles=[],this.showClose=!i.default.currentProject.protectLayoutValue,this.attached=!1,function(e){var t=f().bind(e.eventHandles.push,e.eventHandles);function n(n,i){t(d.Z.subscribe(n,(function(t,n){var s=n?n.arg:null,a=s&&s.tabbar,o=s&&s.tabbar===e?e:null;a||o||!e.tabs.panel.hasFocus||(o=e);var r=s?s.tab:null;o&&!r&&(r=o.tabs.panel.activeTab()),o&&r&&i(t,o,r)})))}n("command:ide:tab_close",(function(e,t,n){t.tabs.closeTab(n).catch(u.default.error.checkErrorForIgnore)})),n("command:ide:tab_close_others",(function(e,t,n){t.tabs.closeOthersTabs(n).catch(u.default.error.checkErrorForIgnore)})),n("command:ide:tab_close_all",(function(e,t){t.tabs.closeAll().catch(u.default.error.checkErrorForIgnore)})),n("command:ide:tab_close_right",(function(e,t,n){t.tabs.closeRightTabs(n).catch(u.default.error.checkErrorForIgnore)})),n("command:ide:tab_close_left",(function(e,t,n){t.tabs.closeLeftTabs(n).catch(u.default.error.checkErrorForIgnore)})),n("command:ide:tab_switch_right",(function(e,t,n){t.tabs.switchToNextTab(n,!0)})),n("command:ide:tab_switch_left",(function(e,t,n){t.tabs.switchToNextTab(n)})),t(d.Z.subscribe("shareman:dirty",(function(t,n){e.updateDirty(f().last(t.split(":")),n.dirty)})))}(this),this.updateEvId=d.Z.subscribe("settings:changed:#mode",this.onUpdateDirtySettings.bind(this))},Fj=Lj.prototype,Bj=!1;Fj.onUpdateDirtySettings=function(){var e=a.Z.get("ide").highlight_unsaved_tabs;this.fragment&&(e?this.fragment.removeClass("no-dirty"):this.fragment.addClass("no-dirty"))},Fj.getTab=function(e){var t=E()(e).data("id");return this.tabs.children[t]},Fj._bindEvents=function(e){var t=this,n=function(){var e=E()(this);if(!e.hasClass("active")){var n=e.data("id");Mj.activate({id:t.tabs.panel.id},n)}},s=function(e){e.preventDefault()},a=".tab";const o=".close-tab .close-button";E().Velocity.State.isMobile?(d.Z.on(e,"touchmove",a,s),d.Z.on(e,"touchmove",o,s),d.Z.on(e,"touchend",a,n),d.Z.on(e,"touchend",o,n)):(d.Z.on(e,"click",a,n),d.Z.on(e,"click",o,(function(e){e.preventDefault();var n=E()(this).closest(".tab").data("id");return Mj.close({id:t.tabs.panel.id},n),!1}))),d.Z.on(e,"dragstart",".tab",(function(e){var n=t.getTab(this),s=E()(this).data("id");i.default.ide.panels.dragSrc={tab:n,id:s,tabEl:E()(this),panel:t.tabs.panel},e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("Text",""),Bj=!0})),d.Z.on(e,"dragover",(function(e){return e.preventDefault&&e.preventDefault(),e.dataTransfer.dropEffect="move",!1})),d.Z.on(e,"dragover",".tab",(function(e){return e.preventDefault&&e.preventDefault(),e.dataTransfer.dropEffect="move",!1})),e.find(".tab").dndhover().on({dndHoverStart:function(e){if(Bj)return e.stopPropagation(),E()(this).addClass("dragover"),!1},dndHoverEnd:function(e){if(Bj)return e.stopPropagation(),E()(this).removeClass("dragover"),!1}}),e.dndhover().on({dndHoverStart:function(){Bj&&E()(this).addClass("default-dragover")},dndHoverEnd:function(){Bj&&E()(this).removeClass("default-dragover")}});const r=()=>{Bj&&(e.removeClass("default-dragover"),i.default.ide.panels.dragSrc.tabEl.removeClass("dragover"),i.default.ide.panels.dragSrc.tab.dragend(),Bj=!1)};d.Z.on(e,"drop",".tab",(function(e){if(Bj){e.stopPropagation&&e.stopPropagation();var n=E()(this).data("id"),s=i.default.ide.panels.dragSrc;return s&&(i.default.ide.panels.moveTab(s.panel,t.tabs.panel,s.id,n),r()),!1}})),d.Z.on(e,"drop",(function(e){if(Bj){e.stopPropagation&&e.stopPropagation();var n=i.default.ide.panels.dragSrc;return n&&(i.default.ide.panels.moveTab(n.panel,t.tabs.panel,n.id),r()),!1}})),d.Z.on(e,"dragend",".tab",(function(){r()}))},Fj.find=function(e){if(this.fragment)return this.fragment.find('[data-id="'+e+'"]')},Fj.updateDirty=function(e,t){var n=this.fragment&&this.fragment.is(":visible"),i=this.tabs.findAllTabs(e);if(n&&i){var s=f().findIndex(this.tabs.children,i);!function(e,t){var n=e.find("div.dirty");t?n.addClass("show"):n.removeClass("show")}(this.find(s),t)}},Fj.render=async function(){const e=await Promise.all(f().map(this.tabs.children,(async e=>{const t=await e.dirty?"show":"",n=await e.extension;let i=!1;return f().isFunction(n.isCloseable)&&(i=!n.isCloseable()),{title:e.title,activated:e.activated,extData:e.extData,hideClose:i,isDirty:t}}))),t=this.fragment;if(this.fragment=E()(this.template({tabs:e,showClose:this.showClose})),this.rightMenu&&this.rightMenu.remove(),this.rightMenu=new Dj(this.fragment,this),this._bindEvents(this.fragment),!this.attached)return this.container.append(this.fragment),void(this.attached=!0);t.replaceWith(this.fragment),this.onUpdateDirtySettings(),Mj.tabbarRendered()},Fj.activate=function(e){this.fragment&&(this.fragment.find("div.tab").removeClass("active"),this.find(e).addClass("active"))},Fj.remove=function(){this.rightMenu&&this.rightMenu.remove(),this.rightMenu=null,f().forEach(this.eventHandles,(function(e){d.Z.unsubscribe(e)})),this.updateEvId&&d.Z.unsubscribe(this.updateEvId),this.eventHandles.length=0},E().event.props.push("dataTransfer");const Uj=Lj;var qj=n(9380).A,Hj=n(2774).V5,Gj=I().compile('<div class="tab-container help-tab">\n    <div>\n        <h1>Need help getting started?</h1>\n        <ul>\n            <li id="empty-help-play-guides"><a class="a--primaryBg" href="javascript:void(0)" data-command="guides:pre_play">Play Guides</a></li>\n            <li id="empty-help-edit-guides"><a class="a--primaryBg" href="javascript:void(0)" data-command="guides:pre_edit">Create or Edit Guides</a></li>\n            <li>\n                Click on a file in the file tree to open it or <a class="a--primaryBg" href="javascript:void(0)" data-command="ide:new_file">create a file</a>\n            </li>\n        </ul>\n    </div>\n</div>\n');const Wj=I().compile('<div class="tabs-container"></div>\n');var zj=!1,Vj=[{title:"Save",class:"mb-yes",onClick:function(){this.close(Ae.Z.IDYES)},type:1},{title:"Close",class:"mb-no",onClick:function(){this.close(Ae.Z.IDNO)}},{title:"Cancel",class:"mb-cancel",onClick:function(){this.close(Ae.Z.IDCANCEL)}}],Kj="CLOSE_RIGHT",Jj="CLOSE_LEFT",Yj="CLOSE_OTHERS",Qj=function(e){f().bindAll(this,["_storeActiveTab","_activateTab","_registerCommands","activate","deactivate","findTab","findAllTabs","isOpen","isChild","getTab","activateTab","detachTab","renameTabByPath","closeTabByPath","closeTabByExt","_showPrompt","_promptCloseHandler","_closeTab","closeTab","closeAll","closeOthersTabs","closeLeftTabs","closeRightTabs","switchToNextTab","switchToNextViewType","open","render","showHelpBlock","hideHelpBlock","addTab","addChildren","moveTab","remove","focus","serialize"]),this.children=[],this.activeTabSequence=0,e=f().defaults(e||{},{active:!1,activeTabIndex:0}),this._activeTabIndex=e.activeTabIndex,this.active=e.active,this._panel=e.panel,this.template=E()(Wj());var t={terminal:qj.getCurrentKey("terminal:backend-connection"),fileOpen:qj.getCurrentKey("ide:key_quick_open")};this.helpTab=E()(Gj(t)),zj&&this.helpTab.addClass("hide"),this.tabbar=new Uj(this.template,this),this.eventHandles=[],this.registeredCommands=!1,this._opening=[],this._tabToActivate=null,this._viewToActivate=null},Xj=Qj.prototype;async function $j(e){if(!f().isUndefined(e))return e.deactivate()}function eZ(e,t,n){var i={};return null===t||f().isUndefined(t)||""===t||(i={filename:t}),n&&(i.extensionName=n),f().find(e,i)}function tZ(e,t){var n=f().findIndex(e,t);n>-1&&e.splice(n,1)}function nZ(e,t){return f().isObject(t)&&(t=iZ(e,t)),e.children[t]}function iZ(e,t){return f().findIndex(e.children,t)}function sZ(e,t){var n=[],i=function(e,t){var n=[],i=(t=t||{}).type;if(i){var s=t.current,a=e.children,o=f().indexOf(a,s);switch(i){case Kj:if(-1!==o)for(var r=0,c=o;r<=c;r++)n.push(a[r]);break;case Jj:if(-1!==o)for(var l=o,d=a.length;l<d;l++)n.push(a[l]);break;case Yj:s&&n.push(s)}}return n}(e,t),s=e.children;return f().forEach(s,(function(t){-1===f().indexOf(i,t)&&n.push(e.closeTab.bind(e,t))})),i.length=0,f().reduce(n,((e,t)=>e.catch(u.default.error.checkErrorForIgnore).finally(t)),Promise.resolve())}Object.defineProperty(Xj,"_activeTab",{get:function(){return this.children[this._activeTabIndex]}}),Xj._storeActiveTab=function(e){this.activeTabSequence++,e.sequence=this.activeTabSequence},Xj._activateTab=function(e,t){var n=this;if(e=e||n._tabToActivate,t=t||n._viewToActivate,e)return this.template.find(".help-tab").remove(),e.viewType!==t&&e.switchType(t),n._activeTabIndex=f().indexOf(n.children,e),n._storeActiveTab(e),e.activate(this.template).then((function(){qj.execute("layout","save"),n.tabbar.activate(n._activeTabIndex),n._tabToActivate=null,n._viewToActivate=null}))},Xj._registerCommands=function(){if(!this.registeredCommands){var e=this;e.panel.id;var t=f().bind(this.eventHandles.push,this.eventHandles);t(d.Z.subscribe("tab:activate:"+e.panel.id,(function(t,n){e.activateTab(n)}))),t(d.Z.subscribe("tab:close:"+e.panel.id,(function(t,n){e.closeTab(n).catch(u.default.error.checkErrorForIgnore)}))),t(d.Z.subscribe("tab:close_by_path:#path",(function(t,n){n=n||{},e.closeTabByPath(t.path,n.recursive,n.force)}))),t(d.Z.subscribe("tab:close_by_ext:#ext",(function(t,n){n=n||{},e.closeTabByExt(t.ext,n.force)}))),t(d.Z.subscribe("tab:rename:#oldName:#newName",(function(t,n){e.renameTabByPath(t.oldName,t.newName,n)}))),t(d.Z.subscribe("command:ide:switch_view_type",(function(){e.switchToNextViewType()}))),this.registeredCommands=!0}},Object.defineProperty(Xj,"hasTabs",{get:function(){return!f().isEmpty(this.children)}}),Object.defineProperty(Xj,"panel",{get:function(){return this._panel},set:function(e){this._panel=e,f().forEach(this.children,(function(t){t.panel=e}))}}),Xj.activate=function(){this.active||(this.active=!0)},Xj.deactivate=function(){this.active&&(this.active=!1)},Xj.findTab=function(e,t){return eZ(this.children,e,t)},Xj.findAllTabs=function(e){return".guides/metadata.md"===e?this.findTab(null,"guides-edit"):eZ(this.children,e)},Xj.isOpen=function(e,t){var n;return f().isEmpty(this._opening)||(n=eZ(this._opening,e,t)),f().isUndefined(n)&&(n=this.findTab(e,t)),n},Xj.isChild=function(e){return f().includes(this.children,e)||f().includes(this._opening,e)},Xj.getTab=function(e,t){var n=null;return f().isString(e)?n=this.findTab(e,t):f().isNumber(e)?n=this.children[e]:this.isChild(e)&&(n=e),n},Xj.activateTab=function(e,t){var n=this.getTab(e);n&&(this._tabToActivate=n,this._viewToActivate=t,this._activeTab&&this._activeTab!==n?$j(this._activeTab).then(f().bind(this._activateTab,this)):this._activateTab(n,t))},Xj.detachTab=async function(e){const t=this.getTab(e);if(t)return $j(t).finally((()=>{const e=iZ(this,t);if(-1!==e){var n=this._activeTabIndex,i=this.children[n],s=e===n?0:e<n?-1:1;this.children.splice(e,1);var a=!1;if(0===this.children.length)a=!0;else if(0===s){var o=f().max(this.children,(function(e){return e.sequence})),r=-1;o&&(r=f().indexOf(this.children,o)),-1!==r?this.activateTab(r):this.activateTab(0)}else this._activeTabIndex=f().indexOf(this.children,i);this.tabbar.render(),a&&this._renderHelpTab(),qj.execute("layout","save")}}))},Xj._renderHelpTab=function(){this.template.append(this.helpTab);const e=i.default.currentProject;if(e.eduStartedAssignmentInfo)this.helpTab.find("#empty-help-edit-guides").addClass("hide"),e.guides&&e.guides.metadata&&e.guides.metadata.sections&&e.guides.metadata.sections.length||this.helpTab.find("#empty-help-play-guides").addClass("hide");else{e.exists(T.q9)?this.helpTab.find("#empty-help-play-guides").removeClass("hide"):this.helpTab.find("#empty-help-play-guides").addClass("hide")}},Xj.renameTabByPath=function(e,t,n){!n&&(n={});var s=n.recursive,a=n.saveLayout,o=[];if(f().forEach(this.children,(function(n){var i=n.filename;if(i)if(i===e)n.rename&&o.push(n.rename.bind(n,t));else if(s&&0===i.indexOf(e+"/")){var a=i.replace(e,t);n.rename&&o.push(n.rename.bind(n,a))}})),!f().isEmpty(o)&&(f().each(o,(function(e){e()})),this.tabbar.render(),!1!==a&&qj.execute("layout","save"),this._panel.hasFocus)){var r=this._panel.activeTab();r&&r.filename&&i.default.ide.panels.replaceUrl("tree",r.filename)}},Xj.closeTabByPath=function(e,t,n){var i=this,s=[];f().forEach(i.children,(function(n){var i=n.filename;i&&(i===e||t&&0===i.indexOf(e+"/"))&&s.push(n)})),f().forEach(s,(function(e){i.closeTab(e,n).catch(u.default.error.checkErrorForIgnore)}))},Xj.closeTabByExt=function(e,t){var n=this,i=[];f().forEach(n.children,(function(t){var n=t.extensionName;n&&n===e&&i.push(t)})),f().forEach(i,(function(e){n.closeTab(e,t).catch(u.default.error.checkErrorForIgnore)}))},Xj._showPrompt=function(e){return new Promise((t=>{Ae.Z.showConfirm({title:"Unsaved Changes",description:"The file <code>"+e.filename+"</code> has unsaved changes. If you close without saving those,changes will be lost!.<br/>What do you want to do?",doNotCloseOpened:!0,buttons:Vj,onClose:(n,i)=>t(this._promptCloseHandler(n,i,e))})}))},Xj._promptCloseHandler=function(e,t,n){const i=new Error("unsaved changes - cancel");switch(t){case Ae.Z.IDYES:return n.getShareFile().then((function(e){if(e&&e.save)return e.save();throw new Error("Can not save")}));case Ae.Z.IDNO:return Promise.resolve();case Ae.Z.IDCANCEL:default:return Promise.reject(i)}},Xj._closeTab=async function(e,t){var n=this.template;try{await e.beforeClose(t)}catch(e){if(!t)throw e}return e.closing=!0,await e.close(n,t),this.detachTab(e)},Xj.closeTab=function(e,t){var n=nZ(this,e);if(!n)return Promise.resolve();var s=this;return n.dirty.then((function(e){if(e&&i.default.ide.panels.getSameTabsCount(n.filename,n.extensionName)<2){var a=i.default.currentProject.getShareFile(n.filename);a&&a.save&&a.save()}return s._closeTab(n,t)}))},Xj.closeAll=function(){return sZ(this)},Xj.closeOthersTabs=function(e){var t=nZ(this,e);if(t)return sZ(this,{current:t,type:Yj})},Xj.closeLeftTabs=function(e){var t=nZ(this,e);if(t)return sZ(this,{current:t,type:Jj})},Xj.closeRightTabs=function(e){var t=nZ(this,e);if(t)return sZ(this,{current:t,type:Kj})},Xj.switchToNextTab=function(e,t){var n=nZ(this,e);if(n){var i=iZ(this,n)+(t?1:-1);i<0&&(i=this.children.length-1),i===this.children.length&&(i=0),this.activateTab(i)}},Xj.switchToNextViewType=function(){if(this.panel.hasFocus){var e=this._activeTab;e&&e.switchToNextType()}},Xj.open=function(e,t,n){var i=new Aj({title:(n=n||{}).title,panel:this.panel,ext:e,filename:t,view:n.view,options:n});this._opening.push(i);var s=this;return i.ready.then((function(){s.addTab(i),s.activateTab(i)})).catch((()=>tZ(s._opening,i))),i},Xj.render=async function(e){if(this._registerCommands(),await this.tabbar.render(),f().isEmpty(this.children))this._renderHelpTab();else{var t=this._activeTab,n=this._activeTabIndex;t&&(t.activate(this.template),this.tabbar.activate(n))}d.Z.on(this.template,"click",(function(e){var t=E()(e.target).closest("a").data("command");if(!f().isEmpty(t)){var n=t.split(":"),i=n.shift();t=n.join(":"),qj.execute(i,t)}})),e.append(this.template)},Xj.showHelpBlock=function(){this.helpTab.removeClass("hide")},Xj.hideHelpBlock=function(){this.helpTab.addClass("hide")},Xj.addTab=function(e,t){e.panel=this.panel,f().isUndefined(t)?(this.children.push(e),this._storeActiveTab(e)):(this._activeTabIndex>=t&&(this._activeTabIndex+=1),this.children.splice(t,0,e)),tZ(this._opening,e),(e.active||this._activeTab===e)&&f().defer(this.activateTab.bind(this),e),this.tabbar.render()},Xj.addChildren=function(e){e=f().filter(e,(function(e){return e instanceof Aj}));var t=this;f().forEach(e,(function(e){e.panel=t.panel,t._opening.push(e),e.ready.then((function(){t.addTab(e)})).catch((()=>tZ(t._opening,e)))}))},Xj.moveTab=function(e,t){if((t>this.children.length-1||f().isUndefined(t))&&(t=this.children.length-1),e!==t&&this._activeTab){var n=this._activeTab;return n.deactivate().then(function(){var i=this.children.splice(e,1)[0];this.children.splice(t,0,i),this._activeTabIndex=f().indexOf(this.children,n),this.tabbar.render(),this.activateTab(i)}.bind(this))}},Xj.remove=async function(){try{const e=f().invokeMap(this.children,"beforeClose",!0);await Promise.all(f().flattenDeep(e))}catch(e){}f().forEach(this.eventHandles,(function(e){d.Z.unsubscribe(e)})),this.eventHandles.length=0,this.template.remove();var e=f().invokeMap(this.children,"close",void 0,!0);try{await Promise.all(f().flattenDeep(e))}finally{this.children=[],this._tabToActivate=null,this.tabbar.remove(),d.Z.off(this.template)}},Xj.focus=function(){var e=this._activeTab;e&&e.focus()},Xj.serialize=function(){var e=f()(this.children).map((function(e){return e&&e.serialize&&e.serialize()})).compact().value();return{type:Hj.TABS,params:{active:this.active,activeTabIndex:this._activeTabIndex},children:e}},d.Z.subscribe("guides:player:open",(function(){zj=!0,i.default.ide.panels.hideHelpBlock()})),d.Z.subscribe("guides:player:close_rendered",(function(){zj=!1,i.default.ide.panels.showHelpBlock()}));const aZ=Qj;var oZ=n(68058).I_,rZ=n(2774).V5,cZ=d.Z.create(n(10270)),lZ=KT.default;const dZ=KT.defaultWorkingCopy;var uZ={template:null,child:null,layout:lZ,focus:null,lastFocus:null,initialFocus:null,_subscriptions:[],rendered:!1,all:{}},hZ=f().debounce(cZ.panelChangeSize,navigator.userAgent.match(/msie/i)?400:200);function pZ(){const{currentProject:e}=i.default;return!!e&&(e.isAuthorProject&&e.exists(T.q9))}function fZ(){return pZ()?dZ:lZ}function mZ(){return e=!1,f().each(uZ.allPanels(),(function(t){return!(e=0!==t.getTabs("filetree").length)})),e?new Promise((e=>{var t=!1;Ae.Z.showConfirm({title:"Change layout",description:"Switching layouts will close all currently open tabs, and will of course change your layout. Are you sure you wish to do this?",onHide:function(){e(t)},onClose:function(e){t=!!e}})})):Promise.resolve(!0);var e}function gZ(e){var t;if(e){if(!e.tabs||!e.tabs.children)return Promise.resolve();t=e.tabs.children}else t=f().flatten(f().map(uZ.allPanels(),(function(e){return e.tabs.children})));var n=f().map(t,"dirty");return Promise.all(n).then((function(e){if(f().some(e))return Te.Z.saveAllAndWait()}))}function bZ(e,t){if(e){var n=e.panel,i=n.panel;if(n!==uZ){var s=function(t){if(t&&t.children){var n=t.children;f().eachRight(n,(function(n){n instanceof Aj?e.isOpen(n.filename,n.extensionName)||(n.active=!1,t.detachTab(n).then((function(){e.addTab(n),e.tabs.tabbar.render()}))):s(n)}))}},a=function(e){if(e instanceof rj)return e.activeTab()||0;if(e.children){var t=[];return f().each(e.children,(function(e){var n=a(e);n&&t.push(n)})),t[0]||0}return 0},o=a(n);t&&f().each(n.children,(function(t){t!==e&&s(t)}));var r,c=n.template.parent();e.activeTab&&(r=e.activeTab()||o);var l=f().findIndex(i.children,n);if(-1!==l){i.children[l]=e,e.panel=i,e.detach();var d=f().findIndex(n.children,e);n.children.splice(d,1),n.remove(),e.render(c),r&&e.activateTab(r),e.focus(),f().defer((function(){uZ.lastFocus=null})),uZ.updateLayout(),hZ()}}}}var vZ=function(e){return function e(t){if(t){var n=function(e){switch(e){case rZ.SINGLE:return rj;case rZ.VERTICAL:return gj;case rZ.HORIZONTAL:return _j;case rZ.TABS:return aZ;case rZ.TAB:return Aj;default:throw new Error("Unkown type "+e)}}(t.type);if("tab"===t.type){var s=i.default.getByUrl(t.params.ext);!t.params.title&&s&&s.info.codio&&s.info.codio.title&&(t.params.title=s.info.codio.title);var a=t.params.filename;if(f().isObject(a)){f().defaults(a,{caseSensitive:!0,names:[]});var o=i.default.currentProject.getFileInfoInsensitive;a.caseSensitive&&(o=i.default.currentProject.exists),o=f().bind(o,i.default.currentProject);var r=!1,c=a.names;if(c=f().isArray(c)?c:[c],f().forEach(c,(function(e){var n=o(e);if(n)return t.params.filename=f().isBoolean(n)?e:n,r=!0,!1})),!r)return}}var l=new n(t.params);return f().has(t,"children")&&l.addChildren(f().map(t.children,f().bind(e,t))),t.params&&t.params.focus&&(uZ.initialFocus=l.id,uZ.focus=l),"single"===l.type&&(uZ.all[l.id]=l),l}}(e)},yZ=function(e){var t=e.serialize();return t.children[0].children=[],t.params.focus=!1,t.children[0].params.activeTabIndex=-1,vZ(t)};function wZ(){return i.default.currentProject.guid+":layout"}var _Z=function(e){i.default.ide.isClosed||oZ.set(wZ(),e)},kZ=function(e,t){if(e){var n,i=!1;return f().each(t,(function(t){e.isOpen&&e.isOpen(void 0,t)&&(i=!0)})),e.canFocus&&!i?e:(f().each(e.children,(function(e){return!(n=kZ(e,t))})),n)}};function PZ(e,t,n){return void 0===n&&(n=5),new Promise((i=>{const s=function(e,t){var n=["filetree","guides","terminal"];!0===t.ignoreSingle?n=[]:f().isArray(t.ignoreExtensions)&&(n=t.ignoreExtensions);if(t.panel)return t.panel;if(e.focus){if(e.focus.activeTab()){var i=e.focus.activeTab().extensionName;if(e.focus.activeTab()&&f().includes(n,i)&&(e.lastFocus=kZ(e.child,n)||kZ(e.child,["guides","filetree"])||kZ(e.child,["filetree"])||e.lastFocus,e.lastFocus))return e.lastFocus}return e.focus}return kZ(e.child,n)}(e,t);!s&&n>0?f().delay((()=>PZ(e,t,n--).then(i)),200):i(s)}))}function CZ(e,t,n){var i=uZ.focus;if(i&&"function"==typeof i.searchNeighborhood){var s=i.searchNeighborhood(e);s&&(s.focus(),n.pass=!1,n.arg&&"function"==typeof n.arg.preventDefault&&n.arg.preventDefault())}}uZ.render=function(e){if(this.rendered)return this.template=e,this.child.render(e);var t,n;t=f().bind(uZ._subscriptions.push,uZ._subscriptions),n=f().debounce(uZ.updateLayout.bind(uZ),200),t(d.Z.subscribe("command:layout:save",(function(){n()}))),t(d.Z.subscribe("command:file:open",(function(e,t){t=t.arg,uZ.open(t.ext,t.filename,t)}))),i.default.currentProject.protectLayoutValue||(t(d.Z.subscribe("command:ide:panel_split_horizontal",(function(){uZ.splitHorizontal(uZ.focus)}))),t(d.Z.subscribe("command:ide:panel_split_vertical",(function(){uZ.splitVertical(uZ.focus)}))),t(d.Z.subscribe("command:ide:panel:join",(function(){uZ.join(uZ.focus,!0)}))),t(d.Z.subscribe("command:ide:panel_close",(function(){uZ.close(uZ.focus)}))),t(d.Z.subscribe("command:ide:layout_default",(function(){mZ().then((function(e){e&&uZ.setLayout(fZ()).then((function(){uZ.updateFocusUrl(uZ.focus),pZ()&&cZ.playGuides()}))}))}))),t(d.Z.subscribe("command:ide:layout_showcase",(function(){mZ().then((function(e){e&&(uZ.setLayout(KT.showcase),uZ.updateUrl(null,null))}))}))),t(d.Z.subscribe("command:ide:layout_2_columns",(function(){mZ().then((function(e){e&&(uZ.setLayout(KT.column2),uZ.updateUrl(null,null))}))}))),t(d.Z.subscribe("command:ide:layout_2_rows",(function(){mZ().then((function(e){e&&(uZ.setLayout(KT.row2),uZ.updateUrl(null,null))}))})))),function(){var e=f().bind(uZ._subscriptions.push,uZ._subscriptions);e(d.Z.subscribe("panel:resize:end",(function(){uZ.updateLayout()}))),d.Z.on(window,"resize.panels",(function(){hZ()}));const t=function(e,t){if(!f().isNull(uZ.initialFocus)&&t.panel.id===uZ.initialFocus)return uZ.initialFocus=null;t.panel===uZ.focus&&uZ.updateUrl(t.extensionName,t.filename||"")};e(d.Z.subscribe("tab:activated",t)),e(d.Z.subscribe("tab:focus",t)),e(d.Z.subscribe("panel:focus:change",(function(e,t){if(uZ.focus){if(uZ.focus.id===t.id)return;uZ.focus.hasFocus=!1}uZ.lastFocus=uZ.focus,uZ.focus=t,uZ.focus.hasFocus=!0;var n=t.activeTab();n&&cZ.tabFocus({extension:n.extensionName},n),uZ.updateFocusUrl(t)}))),e(d.Z.subscribe("tab:closed",(function(){uZ.focus.activeTab()||uZ.updateUrl(null,null)})))}();var s=oZ.get(wZ());const a=!s&&pZ();s||(s=f().cloneDeep(fZ())),this.layout=s,this.template=e,this.child=vZ(s),this.child.panel=uZ,this.focus&&this.focus.focus(),this.child.render(e),this.rendered=!0,a&&cZ.playGuides()},uZ.remove=async function(){this.unsubscribe();var e=this.child&&this.child.remove();await(e||Promise.resolve()),this.child=null,uZ.focus=null,uZ.lastFocus=null,uZ.rendered=!1,this.template&&this.template.empty()},uZ.unsubscribe=function(){f().forEach(uZ._subscriptions,(function(e){e=uZ._subscriptions.pop(),d.Z.unsubscribe(e)})),d.Z.off(window,"resize.panels")},uZ.isOpen=function(e,t){return this.child&&this.child.isOpen(e,t)},uZ.getAllOpened=function(e,t){return this.child&&this.child.getAllOpened(e,t)},uZ.closeAllTabs=function(e,t){return this.child&&this.child.closeAllTabs(e,t)},uZ.showHelpBlock=function(){return this.child&&this.child.showHelpBlock()},uZ.hideHelpBlock=function(){return this.child&&this.child.hideHelpBlock()},uZ.updateUrl=function(e,t){t=t||"";var n=[i.default.currentProject.path,e,encodeURIComponent(t)],s=f().compact([i.default.currentProject.path,e,encodeURIComponent(t)]),a="/"+(n=f().compact(n)).join("/");"/"+s.join("/")!==i.default.router.getURL()&&i.default.router.redirectTo(a,void 0,!0)},uZ.replaceUrl=function(e,t){var n=[i.default.currentProject.path.toLowerCase(),e,t],s="/"+(n=f().compact(n)).join("/");s!==i.default.router.getURL()&&i.default.router.replaceWith(s,void 0,!1)},uZ.open=function(e,t,n){if(i.default.currentProject.protectLayout&&!f().includes(i.default.currentProject.protectLayoutAllowed,e))return Promise.resolve();var s=(n=n||{}).view;if(this.initialFocus=null,this.isActiveTab(e,t,s)){this.focus.activeTab().setOptions(n);const e=this.focus.activeTab();return Promise.resolve(e)}var a=this.focus&&this.focus.activeTab();a&&a.fullscreen&&(a.fullscreen=!a.fullscreen);var o=i.default.getByUrl(e);if(!o)return Promise.resolve();n.title;try{if(o.info.codio.global||o.info.codio.singleton){o.info.codio.noFile&&(t=void 0),n.step&&(t=n.step.toString());var r=uZ.isOpen(o.info.codio.singleton?void 0:t,e);if(r)return r.panel&&(r.setOptions(n),r.panel.activateTab(r,s),!n.noFocus&&r.panel.focus()),Promise.resolve(r)}return o.info.codio.title&&!n.title&&(n.title=function(e){var t;t=f().isObject(e.info.codio.title)?e.info.codio.title.file:e.info.codio.title;return t}(o)),PZ(this,n).then((i=>{if(i)return i.open(e,t,n);n.title}))}catch(e){}},uZ.moveTab=function(e,t,n,i){if(e===t)return e.moveTab(n,i);var s=e.getTab(n),a=this;e.detachTab(n).then((function(){return t.addTab(s,i),t.tabs.tabbar.render(),t.activateTab(s)})).then((function(){a.updateFocusUrl(a.focus)}))},uZ.serialize=function(){if(f().isObject(this.child))return this.child.serialize()},uZ.updateLayout=function(){var e=this.serialize();_Z(e),this.layout=e},uZ.splitHorizontal=function(e){if(!(e.template.height()<50)){var t=e.panel,n=new _j;n.panel=t;var i=yZ(e);n.width=e.width,n.height=e.height,e.height="50%",i.height="50%",n.fixed=e.fixed,e.fixed=!1,i.fixed=!1,n.panel=t,n.addChildren([e,i]);var s=f().findIndex(t.children,e);t.children[s]=n;var a=e.template.parent();e.detach(),n.render(a),n.focus(),this.updateLayout()}},uZ.addTreePanel=function(e){if(!(e.template.width()<50)){var t=e.panel,n=new gj;n.panel=t;var i=vZ({type:"single",params:{width:"200px",height:"100%",focus:!1,canFocus:!0,fixed:!0},children:[{type:"tabs",params:{active:!1,activeTabIndex:0},children:[{type:"tab",params:{ext:"filetree",active:!0,title:"Filetree"}}]}]});n.width=e.width,n.height=e.height,e.width="50%",n.fixed=e.fixed,e.fixed=!1,i.fixed=!0,n.addChildren([i,e]);var s=f().findIndex(t.children,e);t.children[s]=n;var a=e.template.parent();e.detach(),n.render(a),n.focus(),this.updateLayout()}},uZ.splitVertical=function(e){if(!(e.template.width()<50)){var t=e.panel,n=new gj;n.panel=t;var i=yZ(e);n.width=e.width,n.height=e.height,e.width="50%",i.width="50%",n.fixed=e.fixed,e.fixed=!1,i.fixed=!1,n.addChildren([e,i]);var s=f().findIndex(t.children,e);t.children[s]=n;var a=e.template.parent();e.detach(),n.render(a),n.focus(),this.updateLayout()}},uZ.close=function(e){gZ(e).then((function(){delete uZ.all[e.id],bZ(f()(e.panel.children).without(e).first(),!1)}))},uZ.join=function(e,t){gZ(f()(e.panel.children).without(e).first()).then((function(){bZ(e,t)}))},uZ.resetLayout=function(){return this.setLayout(fZ())},uZ.setLayout=function(e){if(f().isEqual(this.layout,e))return Promise.resolve();var t=this;return gZ().then((function(){return t.remove()})).then((function(){t.layout=f().cloneDeep(e),_Z(t.layout),t.render(t.template)}))},uZ.presetLayout=function(e){f().isEqual(this.layout,e)||(this.layout=e,_Z(this.layout))},uZ.isActiveTab=function(e,t,n){if(!this.focus)return!1;var i=this.focus.activeTab();if(f().isUndefined(i))return!1;var s=i.extensionName===e,a=i.filename===t,o=f().isUndefined(n)||i.viewType===n;return s&&a&&o},uZ.allPanels=function(e){return function e(t,n){return f().reduce(t,(function(t,n){return"single"!==n.type?t.concat(e(n.children)):t.concat([n])}),n||[])}((e=e||uZ.child).children)},uZ.getSameTabsCount=function(e,t){var n=i.default.ide.panels.allPanels();return f().reduce(n,(function(n,i){return n+f().reduce(i.tabs.children,(function(n,i){var s=i.extensionName===t,a=i.filename===e;return s&&a?n+1:n}),0)}),0)},uZ.updateFocusUrl=function(e){var t=e.activeTab(),n="",i="";t&&(n=t.extensionName,i=t.filename||""),this.updateLayout(),this.updateUrl(n,i)},uZ.getOpenedTabs=function(e){var t=uZ.allPanels();return f()(t).map((function(e){return e.getTabs()})).flatten().filter((t=>f().isArray(e)?e.includes(t.extensionName):t.extensionName===e)).value()},d.Z.subscribe("command:ide:panel_switch_right",CZ.bind(null,"Right")),d.Z.subscribe("command:ide:panel_switch_left",CZ.bind(null,"Left")),d.Z.subscribe("command:ide:panel_switch_up",CZ.bind(null,"Up")),d.Z.subscribe("command:ide:panel_switch_down",CZ.bind(null,"Down"));const xZ=uZ;var EZ=a.Z.hotkey,SZ=n(2774).Xd;d.Z.subscribe("command:settings:project:open",(function(){if(i.default.currentProject){var e=function(){EZ.execute("file","open",{ext:"tree",filename:SZ})};i.default.currentProject.exists(SZ)?e():i.default.currentProject.createFile(SZ,"").then(e)}})),d.Z.subscribe("command:settings:user:open",(function(){i.default.currentProject&&i.default.currentUser&&!i.default.currentUser.isAnonymous()&&EZ.execute("file","open",{ext:"user-preferences",filename:""})}));var IZ=n(88690),AZ=n.n(IZ);const TZ="all",jZ="all",ZZ="assignment",OZ="assignment-author",NZ="dashboard",DZ={TEACHER:"instructor",STUDENT:"learner"},MZ="user",RZ=()=>{var e,t;const{currentProject:n}=i.default;return(null===(e=n.authorAssignment)||void 0===e||null===(e=e.course)||void 0===e?void 0:e.organizationId)||(null===(t=n.course)||void 0===t?void 0:t.organizationId)},LZ=(e,t)=>{var n;const i=null===(n=e.settings.ai)||void 0===n?void 0:n.customExtensions;return i&&i.includes(t.sourceId)},FZ=(e,t)=>{const n=e===MZ,s=RZ();return n||!s||((e,t)=>{var n;const{isAuthorProject:s}=i.default.currentProject;if(!s)return!1;const a=BZ(t.metadata),o=null===(n=i.default.currentProject.authorAssignment)||void 0===n?void 0:n.assignment,r=RZ();return f().includes([jZ,OZ],a)&&s&&r===e&&LZ(o,t)})(e,t)||((e,t)=>{var n;const s=null===(n=i.default.currentProject.eduStartedAssignmentInfo)||void 0===n?void 0:n.assignment;if(!s)return!1;const a=BZ(t.metadata),o=RZ(),{eduStartedAssignmentInfo:r}=i.default.currentProject;return f().includes([jZ,ZZ],a)&&r&&o===e&&LZ(s.projectBased||s.bookBased,t)})(e,t)},BZ=e=>{var t;return(null==e?void 0:e.assessmentProperties)?jZ:null==e||null===(t=e.helperProperties)||void 0===t?void 0:t.component},UZ=(e,t)=>{let n=!0;if(null!=t&&t.helperProperties){const{userType:i}=t.helperProperties;n=i===TZ||DZ[e.get("details").get("type")]===i}const s=BZ(t);return n&&(e=>{if(e===NZ)return!1;const{isAuthorProject:t,eduStartedAssignmentInfo:n}=i.default.currentProject;return e===jZ||e===ZZ&&n||e===OZ&&t})(s)},qZ=e=>{var t,n;if(null!==(t=e.get("extensionsDevMode"))&&void 0!==t&&t.url&&null!==(n=e.get("extensionsDevMode"))&&void 0!==n&&n.metadata)try{const t=(e=>{var t,n;const i=JSON.parse(e);var s,a,o;return"assessment"===e.type?{rawMetadata:e,assessmentProperties:{type:(null===(s=i.properties)||void 0===s?void 0:s.type)||"",icon:(null===(a=i.properties)||void 0===a?void 0:a.icon)||"",defaultHeight:(null===(o=i.properties)||void 0===o?void 0:o.defaultHeight)||""}}:{rawMetadata:e,helperProperties:{userType:(null===(t=i.properties)||void 0===t?void 0:t.user_type)||"",component:(null===(n=i.properties)||void 0===n?void 0:n.component)||""}}})(e.get("extensionsDevMode").metadata);UZ(e,t)&&(0,u.pu)(e.get("extensionsDevMode").url)}catch{}},HZ=()=>{const e=i.default.currentUser,t=AZ()(e.account);if(window.codio={userId:e.account,email:e.get("details").get("email"),anonymousId:t,type:e.get("details").get("type")},qZ(e),!e.extensions)return;const n=f()(function(){const{isAuthorProject:t,eduStartedAssignmentInfo:n,writableCopy:s}=i.default.currentProject;if(t||n||s)return e.extensions;const a={};return a[MZ]=e.extensions[MZ],a}()).flatMap(((t,n)=>f().filter(t,(t=>((e,t,n)=>UZ(e,n.metadata)&&FZ(t,n))(e,n,t))))).groupBy((e=>e.sourceId)).value();f().forEach(n,(e=>{const t=f().last(f().sortBy(e,(e=>e.createdAt)));f().forEach(t.entryPoints,(e=>(0,u.pu)("".concat(t.releaseBaseUrl).concat(e))))}))},GZ=I().compile("Projects are only available if you have an active subscription\n")(),WZ=I().compile('<p>{{whitelabel}} is unable to store a cookie that is needed for your project subdomain. There are two ways to remedy this.</p>\n<p>1. Press OK below. This will plant the cookie for this visit to your project. However, you will see this message and be required to repeat it each time you enter the project.</p>\n<p>2. Enable cookies to be stored by changing your browser settings <a href="https://docs.codio.com/common/develop/general.html#cookie-requirements" target="_blank">as described here</a>. You should not see this message again once the settings have been changed.</p>\n')({whitelabel:it.Z.get("whitelabel")}),zZ=I().compile("<p>\n    <strong>\n        This assignment is IP-restricted and your location isn't allowed.\n    </strong>\n</p>\n\n<p>\n    Please contact your class instructor for assistance.\n</p>\n")({}),VZ=I().compile('<p>\n    <strong>\n        This assignment only allows a single login per user. Please make sure you have....\n    </strong>\n    <br/>\n    <ol class="strict-session-warning">\n        <li>Closed other tabs or browsers with {{whitelabel}}</li>\n        <li>Stable Internet connection</li>\n        <li>Enough power in your device</li>\n        <li>Plenty of time</li>\n    </ol>\n    <br/>\n    <strong>\n        Once you start this assignment, if your computer gets disconnected from\n        the network and reconnects with a new IP address, you will be locked out.\n    </strong>\n</p>\n')({whitelabel:it.Z.get("whitelabel")}),KZ=I().compile("<p>\n    The assignment you are trying to access has been started from a different IP address or different browser.\n</p>\n<p>\n    Please contact your class instructor for assistance.\n</p>\n")(),JZ=I().compile('<button\n  class="iframe-fullscreen-btn"\n  aria-label="{{ariaLabel}}">\n  <i class="icon ss-icon ss-pika iframe-fullscreen-btn-icon {{iconName}}"\n     type="pika"\n     aria-hidden="true">\n    {{iconName}}\n  </i>\n</button>\n'),YZ=I().compile("<p>Sorry there seems to be a problem loading your assignment</p>\n<ul style=\"text-align: left;\">\n  <li><a href=\"https://docs.codio.com/develop/develop/general.html#cookies-firewalls-browser-support\" target=\"_blank\">check cookies are set correctly</a></li>\n  <li>clear cookies/cache (select 'all time')</li>\n  <li>try in a private/incognito browser (where any browser addons/extensions won't be running)</li>\n  <li>try a different browser that you haven't used before</li>\n  <li>check any local firewall/AntiVirus apps that are running (they all should have log files to show if they are blocking anything -- some have 'default' settings that they say are to protect you but can interfere a lot!</li>\n  <li>If you are using Safari browser it can be blocking preview cookies with their 'Intelligent Tracking Prevention 2.0', Look to disable the cookie block of the browser, refresh and try again</li>\n</ul>\n<br/>\n<p>If you still have a problem please contact us at help@codio.com with details of the assignment and what browsers you have tried.</p>\n")(),QZ=d.Z.create(n(10270)),XZ=E()(I().compile('<div class="ide-container">\n  <div class="ide"></div>\n</div>\n')());var $Z,eO=E()("#body-loading"),tO=E()("#content"),nO=null;let iO=!1;var sO="NORMAL";var aO=function(e,t,n,s){var a;return t&&t.length>0&&(t=decodeURIComponent(t)),function(e,t,n){if(i.default.currentProject&&(!i.default.currentProject.protectLayout||f().includes(i.default.currentProject.protectLayoutAllowed,e))){n=n||{};var s=xZ.open(e,t,n);return QZ.fileOpened({filePath:t},t),s}}(e,t,a=f().isString(n)?{title:a,view:s}:n?f().merge(n,{view:s}):n)},oO=function(e){e&&"session-closed"===e.event&&Lf.Z.validateAccessToken().catch((()=>location.assign("/p/login")))};var rO=function(e){E()("div.ac").hideFProgress(),E()("#body-loading-warning").empty(),wO.isClosed=!0,yO().then((function(){var t;f().isString(e)&&(t=e),e&&f().isString(e.message)&&(t=e.message);var n=f().some(["Project not found","Not allowed","Permission denied","NOT_FOUND","Unauthenticated","NOT_ALLOWED::NOT_ALLOWED"],(function(e){return f().includes(t.toLowerCase(),e.toLowerCase())}));if(n)return je.Z.notFound("Project not found");if(f().includes(t.toLowerCase(),"Access to this assignment has been restricted".toLowerCase()))return je.Z.notAllowed(t.replace("NOT_ALLOWED::",""));if(f().includes(t,"PRE_REQUISITE_FAILED"))return(e=>{const t=[{title:"Ok",class:"mb-yes",onClick:function(){window.history.back()},type:1}],n="\nYou cannot start this assignment until the following conditions are met.<br/><br/>\n".concat(e,"<br/><br/>\nIf you need help or clarification, contact your course instructor.\n");Ae.Z.showConfirm({title:"Prerequisite Failed",description:n,width:900,buttons:t}).preventClosing(!0),E()(".modal-scrollable").css({"z-index":1e4})})(t.replace("PRE_REQUISITE_FAILED::",""));if(f().includes(t.toLowerCase(),"FAILED_PRECONDITION".toLowerCase()))return dO(t);if(f().isString(t)&&f().includes(t,"Unit is Disabled"))return je.Z.serverError("Unit is Disabled");if(f().isString(t)&&f().includes(t,"Project was corrupted"))return je.Z.serverError("Unpacking project failed. Please contact us to find out more");if(f().includes(t,"active subscription")||f().includes(t,"SUBSCRIPTION_REQUIRED::")){const e=t.replace("SUBSCRIPTION_REQUIRED::","");return je.Z.paymentRequired(e||GZ)}if(f().isString(t)&&f().includes(t,"Got non 200 code: 423"))return je.Z.locked();if(f().includes(t,"Assignment completed and access restricted")){var i=f().includes(t,"[lti]");return je.Z.unitNoAccessCompleted(u.default.isIframe(),i,t)}if(f().includes(t.toLowerCase(),"CUSTOM_AUTHENTICATION_REQUIRED".toLowerCase())){const e=window.location.href,n=window.btoa(unescape(encodeURIComponent(e))),i="?responseUrl=".concat(n),s=t.match("{(.*)}")?t.match("{(.*)}")[1]:"";window.location.href="".concat(window.location.origin,"/oauth_api/ssoAccessToken/").concat(s).concat(i)}else{if(f().includes(t.toLowerCase(),"STRICT_SESSION_REQUIRED".toLowerCase()))return dO(t);El.Z.captureException(e),je.Z.serverUnavailable(t)}}))},cO=function(e,t){return new Promise(((e,n)=>{var i=E().ajax({url:t,type:"GET",contentType:"text/html; charset=utf-8",xhrFields:{withCredentials:!0},timeout:1e3});i.done(e),i.fail(n)}))},lO=function(e){var t="//"+e.backendDomain+"/?set-codio-session="+e.dynamicPreviewCookie,n="//"+e.backendDomain+"/?verify-codio-session="+e.dynamicPreviewCookie;return cO(0,n).catch((function(){return cO(0,t).then((function(){return cO(0,n)}))})).catch((function(){return function(e){return new Promise((t=>{Ae.Z.showConfirm({title:"Cookie preview confirmation",description:WZ,width:900,buttons:Ae.Z.MB_OK,onClose:function(){var n=window.open(e,"Init Session","width=790,height=350,toolbar=0,menubar=0,location=0,status=1,scrollbars=1,resizable=1,left=400,top=220"),i=setInterval((function(){n&&!n.closed||(clearInterval(i),t())}),1e3)}}).preventClosing(!0),E()(".modal-scrollable").css({"z-index":1e4})}))}(t)})).catch((function(e){El.Z.captureMessage("updateStaticPreviewCookie error",{extra:e})}))};const dO=function(e){const t=f().includes(null==e?void 0:e.toLowerCase(),"Invalid requester ip".toLowerCase()),n=f().includes(null==e?void 0:e.toLowerCase(),"Additional Login Prevented".toLowerCase());if(t||n){const e=[{title:"Ok",class:"mb-yes",onClick:function(){location.assign("/home")},type:1}],t=n?KZ:zZ;Ae.Z.showConfirm({title:n?"Additional Login Prevented":"IP Address Invalid",description:t,width:900,buttons:e}).preventClosing(!0),E()(".modal-scrollable").css({"z-index":1e4})}else{const e=[{title:"Continue Execution",class:"mb-yes",onClick:function(){ao.default.AccountManager.upgradeSessionToStrict().finally((function(){location.reload()}))},type:1},{title:"Cancel",class:"mb-cancel",onClick:function(){location.assign("/home")}}];Ae.Z.showConfirm({title:"Single Login Assignment",description:VZ,width:900,buttons:e}).preventClosing(!0),E()(".modal-scrollable").css({"z-index":1e4})}if(e)return je.Z.notAllowed(e.replace("STRICT_SESSION_REQUIRED::","").replace("FAILED_PRECONDITION::",""))};var uO=async function(e,t){var n=e.eduStartedAssignmentInfo,i=n&&n.started.completed;if(e.examMode.singleLogin&&(!i||t))return ao.default.AccountManager.upgradeSessionToStrict().then((e=>{if(!e)return s()})).catch((()=>s()));function s(){throw new Error("STRICT_SESSION_REQUIRED::Additional Login Prevented")}};let hO="initial";const pO=[];function fO(e){pO.unshift({eventAt:new Date,info:e})}var mO=function(e,t,n){hO="loadProject",fO("open project start");const s=new URLSearchParams(window.location.search).get("sso_token");let a;s&&window.sessionStorage.setItem("codio_sso_token",s),"projects"===e&&(e=void 0,a=t,t=void 0),eO.removeClass("in").data("wait",!1);const o=()=>{E()("div.ac").showFProgress("Loading project...")};o();var r={message:"long project opening(> 30s)",archiveState:sO,extended:!1},c=[(new Date).getTime()];let l=null;var d=function(){if(p=null,"loadProject"===hO||"loadProject:waitProjectData"===hO){if(r.archiveState!==sO&&!r.extended)return p=setTimeout(d,6e4),void(r.extended=!0);var e=c.reduce((function(e,t,n,i){return 0===n||e.push(t-i[n-1]),e}),[]);E()("div.ac").hideFProgress(),l=Ae.Z.showWarning({description:YZ,buttons:Ae.Z.MB_OK,doNotCloseOpened:!0,width:700,onHide:function(){l=null,"projectError"!==hO&&o()}}),El.Z.captureMessage(r.message,{extra:{id:i.default.currentUser&&i.default.currentUser.account,projectName:t,projectId:a,url:window.location.href,phase:hO,timeSpent:e,archiveState:r.archiveState,projectLoadStackTrace:pO}})}},p=setTimeout(d,3e4);return LT.Z.start(e,t,a,(0,bl.p)()),fO("init shareman and dive into loadProject"),$Z=function(e,t,n,s,a){Mi.api.invalidateSubscriptionsCache().catch((e=>{let{message:t}=e;return je.Z.error(t)}));var o=i.default.currentUser.isAnonymous(),r={};const c=e=>{hO=e,fO("Phase changed to "+e)};return Xt.Z.load(e,t,n,!1,c).then((function(e){const t=window.location.href;if(e.owner.name&&f().includes(t,"/projects/"+e.guid)){const n=t.replace("projects/"+e.guid,e.path);window.history.replaceState(void 0,void 0,n)}return c("loadProject:waitSub"),a.archiveState=e.archive_state,e.archive_state!==sO&&(a.message="archived long project opening(> 90s)"),s.push((new Date).getTime()),e.isPublic||(r=o||i.default.currentUser.isInTrial()?[]:Mi.api.getCachedSubscriptions()),Promise.all([e,r])})).then((function(e){let[t,n]=e;if(c("loadProject:checkSub"),s.push((new Date).getTime()),!(t.isPublic||i.default.currentUser.isDummy()||i.default.currentUser.isInTrial()||Mi.hasAnyUsableSubscription(n)))throw new Error(GZ);return t})).then((function(e){return c("loadProject:checkStrict"),s.push((new Date).getTime()),uO(e).then((function(){return c("loadProject:checkArchived"),e.checkArchivedState(e)})).then((function(){return c("loadProject:nsSubscribe"),vl.Z.subscribe("user-events/"+i.default.currentUser.account,oO,e.pairProgramming&&e.pairProgramming.enabled?"collaboration:"+e.guid:""),s.push((new Date).getTime()),e.subscribeNS(c)}))}))}(e,t,a,c,r).then((function(e){return c.push((new Date).getTime()),hO="deprecationWarning",fO("show deprecation warning"),i.default.currentProject=e,function(){var e=i.default.currentProject;if(1===e.generation&&e.isUserOwner&&!e.startedAssignment){var t=["<strong>Deprecation Notice.</strong><br/>","<strong>Please note: </strong>Generation 1 stacks will be disabled on January 1st 2017.","<br/>We recommend that you update to use Generation 2 stack. For information on how to",' create your own stacks <a href="https://docs.codio.com/common/develop/stacks/create-stack.html"',' target="_blank">click here</a>.',"<br/>For information on how to migrate Generation 1 project to Generation 2 project ",'<a href="',"/home/projects/"+i.default.currentProject.pathName+"/preferences?tab=migration",'" target="_blank">click here</a>.'];je.Z.info((e.eduStartedAssignmentInfo?["<strong>Deprecation Notice.</strong><br/>","<strong>Please note: </strong>Generation 1 stacks will be disabled on January 1st 2017.","If you are opening this assignment in a course, please discuss with your teacher."]:t).join(""))}}(),l&&l.close(),null!==p&&clearTimeout(p),p=null,lO(e)})).then((()=>(p=setTimeout(d,3e4),fO("reinit timer and wait shareman"),LT.Z.waitConnectionOrTimeout()))).then((function(){LT.Z.canWrite()||JT.ZP.block(["Sorry, but there seems to be a problem with your connection."," If this is the first time you are seeing this error message,"," you may have to reconfigure your network firewall settings."," Need further help? Use ",'<a href="https://codio.com/docs/dashboard/account/firewall" target="_blank">',"https://codio.com/docs/dashboard/account/firewall</a><br/><br/>"," If you have tried to access your project before, please try reloading the page."," If you continue to experience problems, ",'<a href="mailto:help@codio.com">contact us</a>'," and include your username and name of your project."].join("")),fO("wait done")})).then((function(){return hO="render",null,je.Z.hideCritical(),f().isUndefined(n)||xZ.presetLayout(n),fO("call render"),E()(document).bind("drop dragover",(function(e){e.preventDefault()})),E()("div.ac").completeFProgress().then((function(){h.ZP.show("ide");const e=XZ.find(".ide");xZ.render(e),tO.children(".ide-container").remove(),tO.append(XZ),tO.addClass("in"),document.title=it.Z.get("whitelabel")+" - "+i.default.currentProject.name,QZ.ideOpened()}))})).then((function(){if(hO="Settings",fO("settings check"),!wO.isClosed){if(vO(),i.default.currentProject.penaltyReached&&function(){const{eduStartedAssignmentInfo:e}=i.default.currentProject,t=(0,CC.jQ)(e);t&&je.Z.info(t)}(),i.default.currentProject.authorAssignment&&QZ.updateDeleteProjectMenuItem({title:"Discard Changes"}),f().defer((()=>HZ())),QZ.projectOpened({projectId:i.default.currentProject.guid},i.default.currentProject),i.default.currentUser&&i.default.currentUser.isAnonymous()){var e="anon_projects",t=iu.I_.get(e);t||(t={}),t[i.default.currentProject.guid]=1,iu.I_.set(e,t)}u.default.checkGigaBoxStatusOnStart(i.default.currentProject,ao.default)}return null!==p&&clearTimeout(p),u.default.sleep.wasSleep(!0),function(){if(u.default.isIframe()&&u.default.fullscreenSupport()){var e=E()("#iframe-fullscreen");e.removeClass("hide").empty().append(gO(!1)).click(u.default.toggleIframeFullscreen);var t=bO.bind(null,e);document.addEventListener("fullscreenchange",t),document.addEventListener("webkitfullscreenchange",t),document.addEventListener("mozfullscreenchange",t),document.addEventListener("MSFullscreenChange",t)}}(),wO.isClosed||LT.Z.cursors(i.default.currentProject.guid).catch((()=>{})),i.default.currentProject})).catch((function(e){return hO="projectError",fO("got project error"),l&&l.close(),window.sessionStorage.removeItem("codio_sso_token"),null!==p&&clearTimeout(p),rO(e)})),$Z};function gO(e){const t=e?"scaledown":"scaleup";let n="press this button to start full screen mode to return back press Esc";return e&&(n="press this button to stop full screen mode"),E()(JZ({iconName:t,ariaLabel:n}))}function bO(e){u.default.getFullscreenElement()?e.empty().append(gO(!0)):e.empty().append(gO(!1))}function vO(){i.default.currentProject&&i.default.currentProject.getFile(".settings").then((function(e){a.Z.project(e)})).catch((()=>a.Z.project()))}function yO(){return wO.isClosing=!0,Te.Z.saveAllAndWait().then((function(){xZ.remove(),XZ.remove(),E()("div.ac").hideFProgress(),wO.isClosing=!1,wO.isClosed=!0,nO&&(d.Z.unsubscribe(nO),nO=null),function(){function e(){xZ.remove(),XZ.remove()}wO.isFullScreen&&QZ.leaveFullscreen(),h.ZP.hide(),i.default.currentProject&&(i.default.currentProject.unsubscribeNS(),QZ.projectClosed(i.default.currentProject)),je.Z.hideCritical(),eO.show(),a.Z.project(""),document.title=it.Z.get("whitelabel"),f().defer((function(){QZ.ideClosed(),i.default.currentProject=null,i.default.collaborationDriverId=null})),tO.hasClass("in")&&E().support.transition?tO.one(E().support.transition.end,e):e(),tO.removeClass("in"),E().support.transition&&!eO.hasClass("in")&&(eO.one(E().support.transition.end,(function(){eO.data("wait",!1)})),eO.data("wait",!0)),eO.addClass("in")}()}))}var wO={generate:function(e){var t=e.project;if(t){var n=t.split(":");n[0]=n[0].toLowerCase(),e.project=n.join(":")}var i=e.username;return i&&(i=i.toLowerCase(),e.username=i),i+"/"+t},open:aO,panels:xZ,enter:function(e){var t;wO.isClosed=!1;var n=i.default.router.getQueryString();f().isUndefined(n)||(t=KT.parseQuery(n)),e=e.params,mO.bind(null,e.username,e.project,t)()},isClosed:!0,isClosing:!1,isFullScreen:!1,exit:yO,extension:{enter:function(e){if(!wO.isClosed){var t=e.params.path||"",n=e.params.extension;$Z.then((function(){f().delay((function(){f().isUndefined(n)||aO(n,t)}))}))}},exit:function(e){},generate:function(e){return f().filter([e.extension,e.path]).join("/")}},isDirty:function(){var e=f().flatten(f().map(xZ.allPanels(),(function(e){return f().map(e.tabs.children,"dirty")})));return Promise.all(e).then((function(e){return f().some(e)}))}},_O=f().debounce(vO,400);d.Z.subscribe("file:change:.settings",(function(){_O()})),d.Z.subscribe("editor:save:.settings",vO),d.Z.subscribe("item:created:.settings",_O),d.Z.subscribe("item:moved:.settings",_O),d.Z.subscribe("item:deleted:.settings",(function(){var e=UA.Z.getFile(".settings");e&&e.close(!0),_O()})),d.Z.subscribe("item:moved:.settings",_O),d.Z.subscribe("item:moved:#file:.settings",_O),d.Z.subscribe("project:preferencesUpdated:#projectId",(function(e,t){i.default.currentProject&&i.default.currentProject.guid===e.projectId&&f().includes(t,"name")&&(document.title=it.Z.get("whitelabel")+" - "+i.default.currentProject.name)})),a.Z.hotkey.plugin("ide",n(94375)),d.Z.subscribe("command:project:close",(function(){iO||u.default.goBackOrLocation("/"+i.default.currentUser.name()),iO=!1})),wO.skipNextProjectCloseEvent=()=>iO=!0,wO.showEnterStrictSessionWarning=dO,i.default.ide=wO,wO.helpers=ek.ZP,d.Z.subscribe("ide:fullscreen:#status",(function(e){wO.isFullScreen="enter"===e.status})),a.Z.plugin("ide",n(53064)),d.Z.subscribe("guides:command:onResult",((e,t)=>{let{output:n,err:i,format:s}=t;QZ.onErrorState({isError:!!i,output:i||n,format:s})})),d.Z.subscribe("guides:assessments:onResult",((e,t)=>{let{result:n}=t;const s=[dT.WD.FAIL,dT.WD.PARTIAL],a=n&&f().includes(s,n.result);i.default.currentError=a?null==n?void 0:n.output:null,QZ.onErrorState({isError:a,output:a?null==n?void 0:n.output:void 0,format:a?null==n?void 0:n.outputFormat:void 0})}));const kO=wO;var PO=it.Z.get("isAnalyticsEnabled");const CO=window.gtag;var xO="",EO="anonymous",SO=function(){var e=EO;i.default.currentUser&&!i.default.currentUser.isAnonymous()&&(e=i.default.currentUser.name());var t={page:xO,dimension1:e===EO?"no":"yes",dimension2:"no",dimension3:e},n=u.default.str.startsWith;return n(document.referrer,"https://github.com/login/oauth/authorize")&&(t.referrer="https://codio.com/p/login"),n(document.referrer,"https://bitbucket.org/site/oauth2/authorize")&&(t.referrer="https://codio.com/p/login"),t},IO=PO?function(){TO("focus",{event_category:"window"})}:f().noop,AO=PO?function(e){xO=e;var t=SO();console.debug("ANALYTICS:","[ga.pageview]",e,t),CO("event","page_view",t)}:f().noop,TO=PO?function(e,t){var n=SO();console.debug("ANALYTICS:","[ga.event]",e,t,n),CO("event",e,{...t,...n})}:f().noop;d.Z.subscribe("route:changed",(function(e,t){AO(t.enter)})),d.Z.subscribe("app:timeChunkMsSpent",(function(e,t){IO(t)})),_o.Z.on(_o.F.DEBUGGER.OPEN,(e=>{TO("run",{event_category:"debugger",event_label:"type",value:e.type})}));var jO=n(64440),ZO=n.n(jO);const OO=JSON.parse('{"prefix":"mdi","icons":{"autorenew":{"body":"<path fill=\\"currentColor\\" d=\\"M12 6v3l4-4l-4-4v3a8 8 0 0 0-8 8c0 1.57.46 3.03 1.24 4.26L6.7 14.8A5.9 5.9 0 0 1 6 12a6 6 0 0 1 6-6m6.76 1.74L17.3 9.2c.44.84.7 1.8.7 2.8a6 6 0 0 1-6 6v-3l-4 4l4 4v-3a8 8 0 0 0 8-8c0-1.57-.46-3.03-1.24-4.26Z\\"/>"},"console":{"body":"<path fill=\\"currentColor\\" d=\\"M20 19V7H4v12h16m0-16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16m-7 14v-2h5v2h-5m-3.42-4L5.57 9H8.4l3.3 3.3c.39.39.39 1.03 0 1.42L8.42 17H5.59l3.99-4Z\\"/>"},"pencil-outline":{"body":"<path fill=\\"currentColor\\" d=\\"m14.06 9l.94.94L5.92 19H5v-.92L14.06 9m3.6-6c-.25 0-.51.1-.7.29l-1.83 1.83l3.75 3.75l1.83-1.83c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29m-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75Z\\"/>"},"web":{"body":"<path fill=\\"currentColor\\" d=\\"M16.36 14c.08-.66.14-1.32.14-2c0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2m-5.15 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56M14.34 14H9.66c-.1-.66-.16-1.32-.16-2c0-.68.06-1.35.16-2h4.68c.09.65.16 1.32.16 2c0 .68-.07 1.34-.16 2M12 19.96c-.83-1.2-1.5-2.53-1.91-3.96h3.82c-.41 1.43-1.08 2.76-1.91 3.96M8 8H5.08A7.923 7.923 0 0 1 9.4 4.44C8.8 5.55 8.35 6.75 8 8m-2.92 8H8c.35 1.25.8 2.45 1.4 3.56A8.008 8.008 0 0 1 5.08 16m-.82-2C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2c0 .68.06 1.34.14 2M12 4.03c.83 1.2 1.5 2.54 1.91 3.97h-3.82c.41-1.43 1.08-2.77 1.91-3.97M18.92 8h-2.95a15.65 15.65 0 0 0-1.38-3.56c1.84.63 3.37 1.9 4.33 3.56M12 2C6.47 2 2 6.5 2 12a10 10 0 0 0 10 10a10 10 0 0 0 10-10A10 10 0 0 0 12 2Z\\"/>"},"bug-outline":{"body":"<path fill=\\"currentColor\\" d=\\"M20 8h-2.81c-.45-.8-1.07-1.5-1.82-2L17 4.41L15.59 3l-2.17 2.17a6.002 6.002 0 0 0-2.83 0L8.41 3L7 4.41L8.62 6c-.75.5-1.36 1.21-1.81 2H4v2h2.09c-.06.33-.09.66-.09 1v1H4v2h2v1c0 .34.03.67.09 1H4v2h2.81A5.988 5.988 0 0 0 15 20.18c.91-.52 1.67-1.28 2.19-2.18H20v-2h-2.09c.06-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.03-.67-.09-1H20V8m-4 7a4 4 0 0 1-4 4a4 4 0 0 1-4-4v-4a4 4 0 0 1 4-4a4 4 0 0 1 4 4v4m-2-5v2h-4v-2h4m-4 4h4v2h-4v-2Z\\"/>"},"format-list-bulleted":{"body":"<path fill=\\"currentColor\\" d=\\"M7 5h14v2H7V5m0 8v-2h14v2H7M4 4.5A1.5 1.5 0 0 1 5.5 6A1.5 1.5 0 0 1 4 7.5A1.5 1.5 0 0 1 2.5 6A1.5 1.5 0 0 1 4 4.5m0 6A1.5 1.5 0 0 1 5.5 12A1.5 1.5 0 0 1 4 13.5A1.5 1.5 0 0 1 2.5 12A1.5 1.5 0 0 1 4 10.5M7 19v-2h14v2H7m-3-2.5A1.5 1.5 0 0 1 5.5 18A1.5 1.5 0 0 1 4 19.5A1.5 1.5 0 0 1 2.5 18A1.5 1.5 0 0 1 4 16.5Z\\"/>"},"wrench":{"body":"<path fill=\\"currentColor\\" d=\\"m22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9c-2-2-5-2.4-7.4-1.3L9 6L6 9L1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4Z\\"/>"},"eye":{"body":"<path fill=\\"currentColor\\" d=\\"M12 9a3 3 0 0 0-3 3a3 3 0 0 0 3 3a3 3 0 0 0 3-3a3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5a5 5 0 0 1 5-5a5 5 0 0 1 5 5a5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5Z\\"/>"},"chevron-down":{"body":"<path fill=\\"currentColor\\" d=\\"M7.41 8.58L12 13.17l4.59-4.59L18 10l-6 6l-6-6z\\"/>"},"chevron-right":{"body":"<path fill=\\"currentColor\\" d=\\"M8.59 16.58L13.17 12L8.59 7.41L10 6l6 6l-6 6l-1.41-1.42Z\\"/>"},"chevron-left":{"body":"<path fill=\\"currentColor\\" d=\\"M15.41 16.58L10.83 12l4.58-4.59L14 6l-6 6l6 6l1.41-1.42Z\\"/>"},"music-circle-outline":{"body":"<path fill=\\"currentColor\\" d=\\"M16 9h-3v5.5a2.5 2.5 0 0 1-2.5 2.5A2.5 2.5 0 0 1 8 14.5a2.5 2.5 0 0 1 2.5-2.5c.57 0 1.08.19 1.5.5V7h4v2m-4-7a10 10 0 0 1 10 10a10 10 0 0 1-10 10A10 10 0 0 1 2 12A10 10 0 0 1 12 2m0 2a8 8 0 0 0-8 8a8 8 0 0 0 8 8a8 8 0 0 0 8-8a8 8 0 0 0-8-8Z\\"/>"},"view-dashboard-edit":{"body":"<path fill=\\"currentColor\\" d=\\"M21 13.1c-.1 0-.3.1-.4.2l-1 1l2.1 2.1l1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8l-6.1 6V23h2.1l6.1-6.1l-2.1-2M21 9h-8V3h8v6m-8 9.06V11h8v.1c-.76 0-1.43.4-1.81.79L13 18.06M11 13H3V3h8v10m0 8H3v-6h8v6Z\\"/>"},"order-bool-ascending-variant":{"body":"<path fill=\\"currentColor\\" d=\\"M4 13c-1.11 0-2 .89-2 2v4c0 1.11.89 2 2 2h4c1.11 0 2-.89 2-2v-4c0-1.11-.89-2-2-2m.2 1.5l1.06 1.05l-3.99 3.95l-2.53-2.55l1.07-1.05l1.47 1.49M4 3c-1.11 0-2 .89-2 2v4c0 1.11.89 2 2 2h4c1.11 0 2-.89 2-2V5c0-1.11-.89-2-2-2M4 5h4v4H4m8-4h10v2H12m0 12v-2h10v2m-10-8h10v2H12Z\\"/>"},"format-bold":{"body":"<path fill=\\"currentColor\\" d=\\"M13.5 15.5H10v-3h3.5A1.5 1.5 0 0 1 15 14a1.5 1.5 0 0 1-1.5 1.5m-3.5-9h3A1.5 1.5 0 0 1 14.5 8A1.5 1.5 0 0 1 13 9.5h-3m5.6 1.29c.97-.68 1.65-1.79 1.65-2.79c0-2.26-1.75-4-4-4H7v14h7.04c2.1 0 3.71-1.7 3.71-3.79c0-1.52-.86-2.82-2.15-3.42Z\\"/>"},"format-italic":{"body":"<path fill=\\"currentColor\\" d=\\"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4h-8Z\\"/>"},"format-header-pound":{"body":"<path fill=\\"currentColor\\" d=\\"M3 4h2v6h4V4h2v14H9v-6H5v6H3V4m10 4h2.31l.32-3h2l-.32 3h2l.32-3h2l-.32 3H23v2h-1.9l-.2 2H23v2h-2.31l-.32 3h-2l.32-3h-2l-.32 3h-2l.32-3H13v-2h1.9l.2-2H13V8m4.1 2l-.2 2h2l.2-2h-2Z\\"/>"},"format-strikethrough-variant":{"body":"<path fill=\\"currentColor\\" d=\\"M23 12v2h-4.39c1 2.14.95 8-6.23 8c-8.33.05-8.01-6.5-8.01-6.5l3.97.05c.03 3.37 3.16 3.37 3.78 3.33c.64-.05 3.03-.04 3.22-2.38c.08-1.09-1.02-1.92-2.22-2.5H1v-2h22m-3.59-4.11l-3.98-.03s.17-2.77-3.28-2.78C8.7 5.06 9 7.28 9 7.56c.04.28.34 1.66 3 2.32H5.71S2.22 3.15 10.74 2c8.71-1.2 8.69 5.91 8.67 5.89Z\\"/>"},"format-list-numbered":{"body":"<path fill=\\"currentColor\\" d=\\"M7 13v-2h14v2H7m0 6v-2h14v2H7M7 7V5h14v2H7M3 8V5H2V4h2v4H3m-1 9v-1h3v4H2v-1h2v-.5H3v-1h1V17H2m2.25-7a.75.75 0 0 1 .75.75c0 .2-.08.39-.21.52L3.12 13H5v1H2v-.92L4 11H2v-1h2.25Z\\"/>"},"table":{"body":"<path fill=\\"currentColor\\" d=\\"M5 4h14a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2m0 4v4h6V8H5m8 0v4h6V8h-6m-8 6v4h6v-4H5m8 0v4h6v-4h-6Z\\"/>"},"format-quote-close":{"body":"<path fill=\\"currentColor\\" d=\\"M14 17h3l2-4V7h-6v6h3M6 17h3l2-4V7H5v6h3l-2 4Z\\"/>"},"code-tags":{"body":"<path fill=\\"currentColor\\" d=\\"m14.6 16.6l4.6-4.6l-4.6-4.6L16 6l6 6l-6 6l-1.4-1.4m-5.2 0L4.8 12l4.6-4.6L8 6l-6 6l6 6l1.4-1.4Z\\"/>"},"alert-box-outline":{"body":"<path fill=\\"currentColor\\" d=\\"M19 19H5V5h14m0-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2m-8 12h2v2h-2v-2m0-8h2v6h-2V7\\"/>"},"binoculars":{"body":"<path fill=\\"currentColor\\" d=\\"M11 6h2v7h-2V6M9 20a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-5l2-9h4v7a1 1 0 0 1-1 1v6m1-15H7V3h3v2m5 15v-6a1 1 0 0 1-1-1V6h4l2 9v5a1 1 0 0 1-1 1h-3a1 1 0 0 1-1-1M14 5V3h3v2h-3Z\\"/>"},"link-variant":{"body":"<path fill=\\"currentColor\\" d=\\"M10.59 13.41c.41.39.41 1.03 0 1.42c-.39.39-1.03.39-1.42 0a5.003 5.003 0 0 1 0-7.07l3.54-3.54a5.003 5.003 0 0 1 7.07 0a5.003 5.003 0 0 1 0 7.07l-1.49 1.49c.01-.82-.12-1.64-.4-2.42l.47-.48a2.982 2.982 0 0 0 0-4.24a2.982 2.982 0 0 0-4.24 0l-3.53 3.53a2.982 2.982 0 0 0 0 4.24m2.82-4.24c.39-.39 1.03-.39 1.42 0a5.003 5.003 0 0 1 0 7.07l-3.54 3.54a5.003 5.003 0 0 1-7.07 0a5.003 5.003 0 0 1 0-7.07l1.49-1.49c-.01.82.12 1.64.4 2.43l-.47.47a2.982 2.982 0 0 0 0 4.24a2.982 2.982 0 0 0 4.24 0l3.53-3.53a2.982 2.982 0 0 0 0-4.24a.973.973 0 0 1 0-1.42Z\\"/>"},"image-search-outline":{"body":"<path fill=\\"currentColor\\" d=\\"M15.5 9c.7 0 1.29-.24 1.77-.73c.49-.48.73-1.07.73-1.77c0-.67-.24-1.27-.73-1.77c-.48-.5-1.07-.73-1.77-.73c-.67 0-1.27.23-1.77.73S13 5.83 13 6.5c0 .7.23 1.29.73 1.77c.5.49 1.1.73 1.77.73m3.81-.09l3.1 3.09L21 13.41l-3.14-3.1c-.78.47-1.58.69-2.39.69c-1.25 0-2.31-.42-3.17-1.3c-.85-.87-1.3-1.93-1.3-3.2c0-1.23.45-2.3 1.33-3.17C13.2 2.45 14.27 2 15.5 2c1.27 0 2.33.45 3.2 1.33c.88.87 1.3 1.94 1.3 3.17c0 .83-.22 1.63-.69 2.41M16.5 18h-11l2.75-3.5l1.97 2.33l2.72-3.52L16.5 18m1.5-5l2 2v5c0 .55-.19 1-.59 1.4c-.41.39-.88.6-1.41.6H4c-.55 0-1-.21-1.4-.6c-.39-.4-.6-.85-.6-1.4V6c0-.53.21-1 .6-1.41C3 4.19 3.45 4 4 4h5.5c-.3.64-.47 1.31-.5 2H4v14h14v-7Z\\"/>"},"file-document-multiple-outline":{"body":"<path fill=\\"currentColor\\" d=\\"M16 0H8C6.9 0 6 .9 6 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V6l-6-6m4 18H8V2h7v5h5v11M4 4v18h16v2H4c-1.1 0-2-.9-2-2V4h2m6 6v2h8v-2h-8m0 4v2h5v-2h-5Z\\"/>"},"console-network":{"body":"<path fill=\\"currentColor\\" d=\\"M17 3a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-4v2h1a1 1 0 0 1 1 1h7v2h-7a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1H2v-2h7a1 1 0 0 1 1-1h1v-2H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h10M7 7l4 4l-4 4h2.85l3.28-3.28c.37-.39.37-1.02 0-1.42L9.83 7H7m10 6h-3v2h3v-2Z\\"/>"},"lock":{"body":"<path fill=\\"currentColor\\" d=\\"M12 17a2 2 0 0 0 2-2a2 2 0 0 0-2-2a2 2 0 0 0-2 2a2 2 0 0 0 2 2m6-9a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V10a2 2 0 0 1 2-2h1V6a5 5 0 0 1 5-5a5 5 0 0 1 5 5v2h1m-6-5a3 3 0 0 0-3 3v2h6V6a3 3 0 0 0-3-3Z\\"/>"},"file-plus":{"body":"<path fill=\\"currentColor\\" d=\\"M14 2H6c-1.11 0-2 .89-2 2v16c0 1.11.89 2 2 2h7.81c-.53-.91-.81-1.95-.81-3c0-3.31 2.69-6 6-6c.34 0 .67.03 1 .08V8l-6-6m-1 7V3.5L18.5 9H13m10 11h-3v3h-2v-3h-3v-2h3v-3h2v3h3v2Z\\"/>"},"tune-vertical":{"body":"<path fill=\\"currentColor\\" d=\\"M7 3H5v6h2V3m12 0h-2v10h2V3M3 13h2v8h2v-8h2v-2H3v2m12-6h-2V3h-2v4H9v2h6V7m-4 14h2V11h-2v10m4-6v2h2v4h2v-4h2v-2h-6Z\\"/>"},"trash-can-outline":{"body":"<path fill=\\"currentColor\\" d=\\"M9 3v1H4v2h1v13a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V6h1V4h-5V3H9M7 6h10v13H7V6m2 2v9h2V8H9m4 0v9h2V8h-2Z\\"/>"},"content-copy":{"body":"<path fill=\\"currentColor\\" d=\\"M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1Z\\"/>"},"calendar-month":{"body":"<path fill=\\"currentColor\\" d=\\"M9 10v2H7v-2h2m4 0v2h-2v-2h2m4 0v2h-2v-2h2m2-7a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h1V1h2v2h8V1h2v2h1m0 16V8H5v11h14M9 14v2H7v-2h2m4 0v2h-2v-2h2m4 0v2h-2v-2h2Z\\"/>"},"check":{"body":"<path fill=\\"currentColor\\" d=\\"M21 7L9 19l-5.5-5.5l1.41-1.41L9 16.17L19.59 5.59L21 7Z\\"/>"},"check-bold":{"body":"<path fill=\\"currentColor\\" d=\\"m9 20.42l-6.21-6.21l2.83-2.83L9 14.77l9.88-9.89l2.83 2.83L9 20.42Z\\"/>"},"floppy":{"body":"<path fill=\\"currentColor\\" d=\\"M5 3a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5.5L18.5 3H17v6a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1V3H5m7 1v5h3V4h-3m-5 8h10a1 1 0 0 1 1 1v6H6v-6a1 1 0 0 1 1-1Z\\"/>"},"close-thick":{"body":"<path fill=\\"currentColor\\" d=\\"M20 6.91L17.09 4L12 9.09L6.91 4L4 6.91L9.09 12L4 17.09L6.91 20L12 14.91L17.09 20L20 17.09L14.91 12L20 6.91Z\\"/>"},"arrow-up-bold":{"body":"<path fill=\\"currentColor\\" d=\\"M15 20H9v-8H4.16L12 4.16L19.84 12H15v8Z\\"/>"},"arrow-down-bold":{"body":"<path fill=\\"currentColor\\" d=\\"M9 4h6v8h4.84L12 19.84L4.16 12H9V4Z\\"/>"},"connection":{"body":"<path fill=\\"currentColor\\" d=\\"M21.4 7.5c.8.8.8 2.1 0 2.8l-2.8 2.8l-7.8-7.8l2.8-2.8c.8-.8 2.1-.8 2.8 0l1.8 1.8l3-3l1.4 1.4l-3 3l1.8 1.8m-5.8 5.8l-1.4-1.4l-2.8 2.8l-2.1-2.1l2.8-2.8l-1.4-1.4l-2.8 2.8l-1.5-1.4l-2.8 2.8c-.8.8-.8 2.1 0 2.8l1.8 1.8l-4 4l1.4 1.4l4-4l1.8 1.8c.8.8 2.1.8 2.8 0l2.8-2.8l-1.4-1.4l2.8-2.9Z\\"/>"},"cloud-upload":{"body":"<path fill=\\"currentColor\\" d=\\"M11 20H6.5q-2.28 0-3.89-1.57Q1 16.85 1 14.58q0-1.95 1.17-3.48q1.18-1.53 3.08-1.95q.63-2.3 2.5-3.72Q9.63 4 12 4q2.93 0 4.96 2.04Q19 8.07 19 11q1.73.2 2.86 1.5q1.14 1.28 1.14 3q0 1.88-1.31 3.19T18.5 20H13v-7.15l1.6 1.55L16 13l-4-4l-4 4l1.4 1.4l1.6-1.55Z\\"/>"},"plus-thick":{"body":"<path fill=\\"currentColor\\" d=\\"M20 14h-6v6h-4v-6H4v-4h6V4h4v6h6v4Z\\"/>"},"directions-fork":{"body":"<path fill=\\"currentColor\\" d=\\"M3 4v8.5l3-3L9 13c1 1 1 2 1 2v6h4v-7s0-1-.53-2S12 10 12 10L9 6.58L11.5 4M18 4l-4.46 4.47L14 9s.93 1 1.47 2c.21.4.33.79.4 1.13L21 7\\"/>"},"play":{"body":"<path fill=\\"currentColor\\" d=\\"M8 5.14v14l11-7l-11-7Z\\"/>"},"debug-step-into":{"body":"<path fill=\\"currentColor\\" d=\\"M12 22a2 2 0 0 1-2-2a2 2 0 0 1 2-2a2 2 0 0 1 2 2a2 2 0 0 1-2 2m1-20v11l4.5-4.5l1.42 1.42L12 16.84L5.08 9.92L6.5 8.5L11 13V2h2Z\\"/>"},"debug-step-out":{"body":"<path fill=\\"currentColor\\" d=\\"M12 22a2 2 0 0 1-2-2a2 2 0 0 1 2-2a2 2 0 0 1 2 2a2 2 0 0 1-2 2m1-6h-2V6l-4.5 4.5l-1.42-1.42L12 2.16l6.92 6.92l-1.42 1.42L13 6v10Z\\"/>"},"debug-step-over":{"body":"<path fill=\\"currentColor\\" d=\\"M12 14a2 2 0 0 1 2 2a2 2 0 0 1-2 2a2 2 0 0 1-2-2a2 2 0 0 1 2-2m11.46-5.14l-1.59 6.89L15 14.16l3.8-2.38A7.972 7.972 0 0 0 12 8c-3.95 0-7.23 2.86-7.88 6.63l-1.97-.35C2.96 9.58 7.06 6 12 6c3.58 0 6.73 1.89 8.5 4.72l2.96-1.86Z\\"/>"},"refresh":{"body":"<path fill=\\"currentColor\\" d=\\"M17.65 6.35A7.958 7.958 0 0 0 12 4a8 8 0 0 0-8 8a8 8 0 0 0 8 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18a6 6 0 0 1-6-6a6 6 0 0 1 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35Z\\"/>"},"cog":{"body":"<path fill=\\"currentColor\\" d=\\"M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5a3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97c0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1c0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66Z\\"/>"},"arrow-expand-left":{"body":"<path fill=\\"currentColor\\" d=\\"M20 22h2V2h-2v9H5.83l5.5-5.5l-1.41-1.42L2 12l7.92 7.92l1.41-1.42l-5.5-5.5H20v9Z\\"/>"},"arrow-collapse-right":{"body":"<path fill=\\"currentColor\\" d=\\"M12.08 4.08L20 12l-7.92 7.92l-1.41-1.42l5.5-5.5H2v-2h14.17l-5.5-5.5l1.41-1.42M20 12v10h2V2h-2v10Z\\"/>"},"send":{"body":"<path fill=\\"currentColor\\" d=\\"m2 21l21-9L2 3v7l15 2l-15 2z\\"/>"},"comment-eye-outline":{"body":"<path fill=\\"currentColor\\" d=\\"M16 6c.56 0 1 .44 1 1s-.44 1-1 1s-1-.44-1-1s.44-1 1-1m0-3c2.73 0 5.06 1.66 6 4c-.94 2.34-3.27 4-6 4s-5.06-1.66-6-4c.94-2.34 3.27-4 6-4m0 1.5A2.5 2.5 0 0 0 13.5 7A2.5 2.5 0 0 0 16 9.5A2.5 2.5 0 0 0 18.5 7A2.5 2.5 0 0 0 16 4.5m2 8.25V16h-4.92L10 19.08V16H4V6h4.27c.32-.73.73-1.4 1.23-2H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h4v3a1 1 0 0 0 1 1h.5c.25 0 .5-.1.7-.29L13.9 18H18c1.11 0 2-.89 2-2v-4c-.63.33-1.3.58-2 .75\\" />"},"update":{"body":"<path fill=\\"currentColor\\" d=\\"M21 10.12h-6.78l2.74-2.82c-2.73-2.7-7.15-2.8-9.88-.1a6.887 6.887 0 0 0 0 9.8c2.73 2.7 7.15 2.7 9.88 0c1.36-1.35 2.04-2.92 2.04-4.9h2c0 1.98-.88 4.55-2.64 6.29c-3.51 3.48-9.21 3.48-12.72 0c-3.5-3.47-3.53-9.11-.02-12.58a8.987 8.987 0 0 1 12.65 0L21 3zM12.5 8v4.25l3.5 2.08l-.72 1.21L11 13V8z\\"/>"},"bookshelf":{"body":"<path fill=\\"currentColor\\" d=\\"M9 3v15h3V3zm3 2l4 13l3-1l-4-13zM5 5v13h3V5zM3 19v2h18v-2z\\"/>"},"book-open":{"body":"<path fill=\\"currentColor\\" d=\\"M13 12h7v1.5h-7m0-4h7V11h-7m0 3.5h7V16h-7m8-12H3a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2m0 15h-9V6h9\\"/>"},"book-open-page-variant":{"body":"<path fill=\\"currentColor\\" d=\\"m19 2l-5 4.5v11l5-4.5zM6.5 5C4.55 5 2.45 5.4 1 6.5v14.66c0 .25.25.5.5.5c.1 0 .15-.07.25-.07c1.35-.65 3.3-1.09 4.75-1.09c1.95 0 4.05.4 5.5 1.5c1.35-.85 3.8-1.5 5.5-1.5c1.65 0 3.35.31 4.75 1.06c.1.05.15.03.25.03c.25 0 .5-.25.5-.5V6.5c-.6-.45-1.25-.75-2-1V19c-1.1-.35-2.3-.5-3.5-.5c-1.7 0-4.15.65-5.5 1.5V6.5C10.55 5.4 8.45 5 6.5 5\\"/>"},"magnify":{"body":"<path fill=\\"currentColor\\" d=\\"M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5l-1.5 1.5l-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16A6.5 6.5 0 0 1 3 9.5A6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14S14 12 14 9.5S12 5 9.5 5\\"/>"},"record-voice-over":{"body":"<path fill=\\"currentColor\\" d=\\"m19.739 14.989l-.743-.743q1.043-1.025 1.639-2.377T21.23 9t-.596-2.863q-.596-1.346-1.639-2.371l.743-.755q1.169 1.152 1.859 2.702T22.288 9t-.69 3.287t-1.86 2.701m-3.315-3.315l-.754-.754q.392-.386.62-.876T16.515 9q0-.592-.227-1.062t-.619-.857l.754-.754q.53.514.846 1.188T17.585 9q0 .773-.316 1.466q-.315.694-.846 1.207M8.712 12q-1.247 0-2.124-.877T5.711 9t.877-2.123T8.712 6t2.123.877T11.712 9t-.877 2.123T8.711 12m-7 7.23v-1.645q0-.69.348-1.194q.349-.504.983-.802q1.217-.593 2.702-.975q1.485-.383 2.967-.383t2.968.383q1.484.382 2.702.975q.634.298.982.802q.348.503.348 1.194v1.646z\\"/>"},"arrow-expand":{"body":"<path fill=\\"currentColor\\" d=\\"M10 21v-2H6.41l4.5-4.5l-1.41-1.41l-4.5 4.5V14H3v7zm4.5-10.09l4.5-4.5V10h2V3h-7v2h3.59l-4.5 4.5z\\"/>"},"arrow-collapse":{"body":"<path fill=\\"currentColor\\" d=\\"M19.5 3.09L15 7.59V4h-2v7h7V9h-3.59l4.5-4.5zM4 13v2h3.59l-4.5 4.5l1.41 1.41l4.5-4.5V20h2v-7z\\"/>"},"replay":{"body":"<path fill=\\"currentColor\\" d=\\"M12 5V1L7 6l5 5V7a6 6 0 0 1 6 6a6 6 0 0 1-6 6a6 6 0 0 1-6-6H4a8 8 0 0 0 8 8a8 8 0 0 0 8-8a8 8 0 0 0-8-8\\"/>"},"thumb-down":{"body":"<path fill=\\"currentColor\\" d=\\"M19 15h4V3h-4m-4 0H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2a2 2 0 0 0 2 2h6.31l-.95 4.57c-.02.1-.03.2-.03.31c0 .42.17.79.44 1.06L9.83 23l6.58-6.59c.37-.36.59-.86.59-1.41V5a2 2 0 0 0-2-2\\"/>"},"thumb-up":{"body":"<path fill=\\"currentColor\\" d=\\"M23 10a2 2 0 0 0-2-2h-6.32l.96-4.57c.02-.1.03-.21.03-.32c0-.41-.17-.79-.44-1.06L14.17 1L7.59 7.58C7.22 7.95 7 8.45 7 9v10a2 2 0 0 0 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73zM1 21h4V9H1z\\"/>"},"magic-staff":{"body":"<path fill=\\"currentColor\\" d=\\"M17.5 9a2.5 2.5 0 0 1 0-5a2.5 2.5 0 0 1 0 5m-3.07-.85L2 20.59L3.41 22L15.85 9.57c-.6-.33-1.09-.82-1.42-1.42M13 5l.63-1.37L15 3l-1.37-.63L13 1l-.62 1.37L11 3l1.38.63zm8 0l.63-1.37L23 3l-1.37-.63L21 1l-.62 1.37L19 3l1.38.63zm0 4l-.62 1.37L19 11l1.38.63L21 13l.63-1.37L23 11l-1.37-.63z\\"/>"},"logout":{"body":"<path fill=\\"currentColor\\" d=\\"m17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5M4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z\\"/>"},"restart":{"body":"<path fill=\\"currentColor\\" d=\\"M12 4c2.1 0 4.1.8 5.6 2.3c3.1 3.1 3.1 8.2 0 11.3c-1.8 1.9-4.3 2.6-6.7 2.3l.5-2c1.7.2 3.5-.4 4.8-1.7c2.3-2.3 2.3-6.1 0-8.5C15.1 6.6 13.5 6 12 6v4.6l-5-5l5-5zM6.3 17.6C3.7 15 3.3 11 5.1 7.9l1.5 1.5c-1.1 2.2-.7 5 1.2 6.8q.75.75 1.8 1.2l-.6 2q-1.5-.6-2.7-1.8\\"/>"},"floor-plan":{"body":"<path fill=\\"currentColor\\" d=\\"M10 5v5H9V5H5v8h4v-1h1v5H9v-3H5v5h7v-2h1v2h6v-2h2v4H3V3h18v12h-2v-5h-6v5h-1V9h7V5z\\"/>"},"file-upload-outline":{"body":"<path fill=\\"currentColor\\" d=\\"m14 2l6 6v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm4 18V9h-5V4H6v16zm-6-8l4 4h-2.5v3h-3v-3H8z\\"/>"},"robot":{"body":"<path fill=\\"currentColor\\" d=\\"M12 2a2 2 0 0 1 2 2c0 .74-.4 1.39-1 1.73V7h1a7 7 0 0 1 7 7h1a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v1a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-1H2a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h1a7 7 0 0 1 7-7h1V5.73c-.6-.34-1-.99-1-1.73a2 2 0 0 1 2-2M7.5 13A2.5 2.5 0 0 0 5 15.5A2.5 2.5 0 0 0 7.5 18a2.5 2.5 0 0 0 2.5-2.5A2.5 2.5 0 0 0 7.5 13m9 0a2.5 2.5 0 0 0-2.5 2.5a2.5 2.5 0 0 0 2.5 2.5a2.5 2.5 0 0 0 2.5-2.5a2.5 2.5 0 0 0-2.5-2.5\\"/>"}},"width":24,"height":24}');ZO().addCollection(OO,"codio");n(83902);var NO=n(97373),DO=n(84096);const MO=d.Z.create({addMenuItem:"menu:add",removeMenuItem:"menu:remove",updateMenuItem:"menu:update"}),RO={onErrorState:{},files:{onChange:{}}};window.codioIDE=window.codioIDE||{};const LO=e=>{if(!i.default.currentProject)throw new Error("project not found");if(i.default.currentProject.exists(e))throw new Error("file already exists");const t=e.split("/"),n=f().some(t,(e=>!u.default.isItemNameValid(e)));if(n)throw new Error("Path must only contain alphanumeric characters, slashes, hyphens and underscores.")};window.codioIDE.files={add:async(e,t)=>{LO(e),await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!i.default.currentProject)throw new Error("project not found");const n=NO.Z.parse(e),{name:s,dir:a}=n;await i.default.currentProject.createFile(s,a);const o=await i.default.currentProject.file(e);let r=DO.ZP.deferred();return f().isUndefined(t)?r.resolve(o):(o.content=t,f().defer((async()=>{await Te.Z.saveAllAndWait(),r.resolve(o)}))),r.promise}(e,t)},addBase64:async(e,t)=>{LO(e),await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!i.default.currentProject)throw new Error("project not found");const n="".concat(u.default.GUID(),".tmpfile"),s=await fetch("data:application/octet-stream;base64,".concat(t)),a=await s.blob(),o=await lt("upload",a,n,(()=>{})),r=await o.promise;return i.default.currentProject.uploadFromS3File(e,r.Bucket,r.Key)}(e,t)},getContentBase64:async e=>{if(!i.default.currentProject)throw new Error("project not found");if(!i.default.currentProject.exists(e))throw new Error("file not found");const t=await i.default.currentProject.getBinaryFileContent(e);return u.default.arrayBufferToBase64(t)},getContent:async e=>{if(!i.default.currentProject)throw new Error("project not found");if(!i.default.currentProject.exists(e))throw new Error("file not found");return(await i.default.currentProject.unixFile(e)).content},deleteFiles:async e=>{if(!i.default.currentProject)throw new Error("project not found");return i.default.currentProject.deleteItems(e)},getStructure:()=>{if(!i.default.currentProject)throw new Error("project not found");return i.default.currentProject.children},onChange:e=>{if(!f().isFunction(e))throw new Error("Callback should be a function");window.codioIDE.files.onChange._handler||(window.codioIDE.files.onChange._handler=d.Z.subscribe("file:change:#path",((e,t)=>{f().forEach(RO.files.onChange,(n=>n(e.path,t)))})));const t=crypto.randomUUID();return RO.files.onChange[t]=e,()=>{delete RO.files.onChange[t],window.codioIDE.files.onChange._handler&&f().isEmpty(RO.files.onChange)&&d.Z.unsubscribe(window.codioIDE.files.onChange._handler)}}},window.codioIDE.files.getFileBase64=window.codioIDE.files.getContentBase64,window.codioIDE.isAuthorAssignment=()=>{if(!i.default.currentProject)throw new Error("project not found");return!!i.default.currentProject.authorAssignment},window.codioIDE.onErrorState=e=>{if(!f().isFunction(e))throw new Error("Callback should be a function");window.codioIDE.onErrorState._handler||(window.codioIDE.onErrorState._handler=d.Z.subscribe("ide:onErrorState",((e,t)=>{let{isError:n,output:i,format:s}=t;f().forEach(RO.onErrorState,(e=>e(n,i,s)))})));const t=crypto.randomUUID();return RO.onErrorState[t]=e,()=>{delete RO.onErrorState[t],window.codioIDE.onErrorState._handler&&f().isEmpty(RO.onErrorState)&&d.Z.unsubscribe(window.codioIDE.onErrorState._handler)}},window.codioIDE.menu={addItem:(e,t,n)=>{MO.addMenuItem({parentDescriptor:e,item:t,itemAddedCallback:n})},removeItem:e=>{MO.removeMenuItem(e)},updateItem:(e,t)=>{MO.updateMenuItem({itemDescriptor:e,item:t})}},window.codioIDE.getBoxUrl=()=>{if(!i.default.currentProject)throw new Error("project not found");return"//".concat(i.default.currentProject.backendSubDomain,".").concat(it.Z.get("boxDomain"))},window.codioIDE.remoteCommand={run:async e=>{if(!i.default.currentProject)throw new Error("project not found");return Sh.default.run(e)}},n(57982),i.default.start(kO)},49088:(e,t,n)=>{"use strict";n.d(t,{T:()=>o,p:()=>c});var i=n(93443),s=n(33105);let a=null;const o=()=>new Promise(((e,t)=>{s.Z.apiRequest({object:"AccountManager",method:"fetchAccessToken",data:{},callback:n=>{n&&!n.error?(r(n.response.message),e()):t(new Error(n?n.message:"No data"))}})})),r=e=>{a=e},c=()=>a;i.Z.subscribe("session:logout",(()=>{a=null}))},59050:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var i=n(96486),s=n.n(i),a=n(93443),o=n(49721),r=n(33105),c=n(19575),l=n(70199),d=n(9380),u=n(54565),h=n(49088),p=a.Z.create(n(45151)),f={},m=null,g=!1;const b=(e,t,n)=>{if(e.error)n(new Error(e.message));else{if(m=(m=new l.Z(e.response))||new l.Z({details:{name:"anon"}}),p.accountLoad({name:"my"},m),g)return g=!1,void t(v());t(m)}},v=()=>new Promise(((e,t)=>{r.Z.apiRequest({object:"AccountManager",method:"getMyInfo",callback:n=>b(n,e,t)})}));f.isAnon=function(e){return"anon"===(e=e||m).get("details").get("name")},f.getMyAccount=function(e){return e=!!s().isUndefined(e)||e,!m||e||g?(this.accountP||(this.accountP=v()),this.accountP):Promise.resolve(m)},f.validateAccessToken=function(){return new Promise(((e,t)=>{r.Z.apiRequest({object:"AccountManager",method:"getMyInfo",data:{},params:{session_id:(0,h.p)()},callback:function(n,i){i||n&&n.error?t(new Error("token not valid")):e()}})}))},f.loadUserProjectsList=function(e){r.Z.apiRequest({object:"ProjectManager",method:"getProjects",data:{},callback:function(t){var n=[],i=!t||t.error;i?i&&t&&"No Projects"===t.message&&(i=!1,n=[]):n=t.response.projects,e&&e(n,i)}})},f.getFile=function(e,t){return new Promise(((n,i)=>{void 0===t&&(t=!0);const{currentProject:s}=o.default,a=s.backendSubDomain,l=u.Z.get("boxDomain"),d="https://".concat(a,".").concat(l,"/").concat(e);r.Z.loadBinaryFile({url:d,callback:e=>{e.error?i(new Error(e.message)):n(t?c.default.decode64(e.response):e.response)}})}))},f.getFileBuffer=function(e,t){return new Promise(((n,i)=>{r.Z.apiRequest({object:"ProjectStructureManager",method:"getFile",data:{projectId:e,path:t},callback:function(e){e.error?i(new Error(e.message)):n(e.response.content)}})}))},d.Z.hotkey.plugin("account",n(66056));const y=f},33105:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var i=n(52308),s=n.n(i),a=n(96486),o=n.n(a),r=n(54565),c=n(1650),l=n(49088),d={},u=r.Z.get("serverUrl"),h=4e4;function p(e,t,n,i){var s,a={error:t,message:"Web Client Error",response:void 0,code:void 0,source:void 0};if(void 0!==n&&void 0!==n.status&&void 0!==n.statusText&&(0===n.status&&""===e?(e='{"code":0,"source":"ACv2.Server.Core","error":"Aborted"}',a.message="Aborted"):"error"===n.statusText&&0===n.status?a.message="We are very sorry, but one of our services seems to be unavailable right now. Please check status.codio.com for more info.":a.message=n.statusText+"("+n.status+")"),o().isPlainObject(e)&&0===e.code&&(a.error=!0,a.message=e.message),i){if(t)a.error=!0;else{if(o().isString(e))try{s=JSON.parse(e)}catch(e){}else s=e;s?(a.code=s.code,a.source=s.source,0===s.code?(a.error=!0,s.response&&s.response.code&&(a.message=s.response.code,a.code=s.response.code),s.response&&s.response.message&&(a.message=s.response.message),s.response&&s.response.additionalInfo&&(a.additionalInfo=s.response.additionalInfo),s.message&&(a.message=s.message)):a.response=s.response):(a.error=!0,a.message="Error json parse")}i(a),e=null}}function f(e,t,n,i){var s={error:t,message:"Web Client Error",response:void 0,code:void 0,source:void 0};void 0!==n&&void 0!==n.status&&void 0!==n.statusText&&(0===n.status&&""===e?(e='{"code":0,"source":"ACv2.Server.Core","error":"Aborted"}',s.message="Aborted"):"error"===n.statusText&&0===n.status?s.message="We are very sorry, but one of our services seems to be unavailable right now. Please check status.codio.com for more info.":s.message=n.statusText+"("+n.status+")"),o().isPlainObject(e)&&0===e.code&&(s.error=!0,s.message=e),i&&(t?s.error=!0:s.response=e,i(s),e=null)}d.timeout=function(e){return void 0!==e&&(h="default"===e?4e4:e),h},d.loadBinaryFile=function(e){const t=e.url;try{const n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.withCredentials=!0,n.onload=()=>{var t=!1;0===n.status&&(t=!0),f(n.response,t,n,e.callback)},n.onerror=()=>{f(n.textStatus,!0,n,e.callback)},n.ontimeout=()=>{f("Timeout",!0,n,e.callback)},n.onabort=()=>{f("Aborted",!0,n,e.callback)},n.send()}catch(t){f(void 0,!0,void 0,e.callback)}},d.apiRequest=function(e){var t=e.options||{};if(e&&e.object&&e.method){var n={object:e.object,method:e.method,data:e.data},i=e.serverUrl||u;const a=(0,l.p)();a&&(e.params=e.params||{},i!==u&&(e.params.session_id=a)),e.params&&(n.params=e.params);try{s().ajax({url:i,type:"POST",data:JSON.stringify(n),header:{},options:t,control:e.control,contentType:"application/json; charset=UTF-8",success:function(t,n,i){var s=!1;0===i.status&&(s=!0),p(t,s,i,e.callback)},error:function(t,n){p(n,!0,t,e.callback)}})}catch(t){p(void 0,!0,void 0,e.callback)}}},d.fileRequest=function(e,t){if(o().isObject(e)&&(t=e,e=void 0),t&&t.object&&t.method){var n=new XMLHttpRequest;n.upload.addEventListener("progress",(function(e){e.lengthComputable&&o().isFunction(t.onProgress)&&t.onProgress(e.loaded/e.total*100)}),!1),n.addEventListener("abort",(function(){o().isFunction(t.onAbort)&&t.onAbort()}),!1);var i=u+"file";e&&(i=e,t.session_id=(0,l.p)()),n.open("POST",i),n.onreadystatechange=function(){if(4===this.readyState){var e=200!==this.status;t.control&&delete t.control,p(this.response,e,n,t.callback)}};var s=new FormData;return o().forOwn(t,(function(e,t){o().isFunction(e)||"control"===t||s.append(t,e)})),o().isObject(t.control)&&(t.control.abort=function(){n.abort()}),n.send(s),n}p("params required",!0,null,t.callback)},d.pingTaskStatus=function(e,t){var n=e.taskId,i=e.callback,s="tasks/"+n,a=setInterval((function(){t?c.Z.fetchTaskFallback(n).then((e=>{e&&e.taskStatus&&e.taskStatus.status&&"PROCESSING"!==e.taskStatus.status&&r&&r(e.taskStatus)})):d.apiRequest({object:"TaskManager",method:"getTaskStatus",data:{id:n},callback:function(e){e&&e.response&&"PROCESSING"!==e.response.status&&r&&r(e.response)}})}),12e3),r=function(e){if(null!==a&&clearInterval(a),r=null,"ERROR"===e.status)i({error:!0,message:e.errorMessage,code:e.code});else if("COMPLETED"===e.status){var t={};t.response={message:e.result},i(t)}else i({error:!0,message:"Unknown response status: "+e.status})},l=c.Z.subscribeLast(s,(function(e,t){0!==t&&(c.Z.unsubscribe(s,l),e.taskStatus&&o().assign(e,e.taskStatus),r&&r(e))}))};const m=d},72736:(e,t,n)=>{"use strict";n.d(t,{F:()=>o,Z:()=>r});var i=n(93443);const s=JSON.parse('{"plagiarism_player.open":"analytics:events:plagiarism_player.open","debugger.open":"analytics:events:debugger.open"}'),a=i.Z.create(s),o={PLAGIARISM_PLAYER:{OPEN:"plagiarism_player.open"},DEBUGGER:{OPEN:"debugger.open"}},r={emit:(e,t)=>{e&&a[e](t)},on:(e,t)=>(i.Z.subscribe(s[e],((e,n)=>{t(n)})),()=>{i.Z.unsubscribe(e)})}},72129:(e,t,n)=>{"use strict";n.d(t,{O:()=>i,default:()=>J});var i={};n.r(i),n.d(i,{loadSession:()=>V,startCall:()=>K});var s=n(73219),a=n(96486),o=n.n(a),r=n(76638),c={},l=o().partial(r.Z.request,"BuildManager");c.export=function(e){return l("build",{guid:e})};const d=c;var u={},h=o().partial(r.Z.request,"SshPtyManager");u.deleteServer=function(e,t){return h("deleteServer",{uid:e,host:t})},u.saveServer=function(e,t){return h(e?"createServer":"updateServer",t)},u.fetchServers=function(){return h("getServers")};const p=u;var f=n(70199),m={},g=o().partial(r.Z.request,"AccountManager"),b=r.Z.pluck;m.register=function(e,t,n,i,s,a){return g("register",{email:e,user_name:t,password:n,actual_name:i,organizationInvitationToken:s,projects:a||[]},{})},m.registerOAuth=function(e,t,n,i,s,a){return g("registerOAuth",{email:e,user_name:t,actual_name:n,sign_up_token:i,organizationInvitationToken:s,projects:a||[]},{})},m.login=function(e,t,n){return g("login",{type:"password",user_name:e,password:t,oauthToken:n}).then(b("session_id"))},m.logout=function(e){return g("logout",{submitStrict:!!e})},m.removeAccount=function(){return g("removeAccount")},m.initiateResetPassword=function(e){return g("initiateResetPassword",{username_or_email:e})},m.all=function(e,t){return g("getAccounts",{mask:e||"",ids:t})},m.findById=function(e){return g("getAccount",{id:e})},m.findByUsername=function(e){return g("getAccount",{name:e}).then((function(e){return new f.Z(e)}))},m.findByEmail=function(e){return g("getAccountByEmail",{email:e}).then((function(e){if(!e)throw new Error("User not found");return new f.Z(e)}))},m.checkSession=function(){return g("checkSession",{})},m.resendActivation=function(e){return g("resendActivation",{username_or_email:e})},m.continueOAuthImport=function(e,t){var n={oauthSession:e};return t&&(n.projectName=t),g("continueOAuthImport",n)},m.markSessionExpired=function(){return g("markSessionExpired")},m.upgradeSessionToStrict=function(){return g("upgradeSessionToStrict")},m.getGravatarInfos=function(e){return g("getGravatarInfos",{ids:e})};const v=m;var y=n(31706),w=n(49721),_=n(97137);function k(e){_.Z.error(e.message)}function P(e,t,n){var i=["SearchTextManager",t,{projectId:w.default.currentProject.guid}];return i[2][n]=e,i}const C={search:function(e){var t=P(e,"beginSearch","searchParams");return r.Z.request.apply(null,t).catch(k)},statusReplace:function(e){var t={id:e};return r.Z.request("TaskManager","getTaskStatus",t).catch(k)},statusSearch:function(e,t){var n={logEntryId:e,streamPosition:t};return r.Z.request("SearchTextManager","getSearchStatus",n).catch(k)},replace:function(e){var t=P(e,"beginReplace","replaceParams");return r.Z.request.apply(null,t).catch(k)}};var x=n(47295),E={},S=o().partial(r.Z.request,"OrganizationManager");E.updateDetails=function(e,t,n,i){return S("updateDetails",{id:e,name:t,email:n,description:i})},E.get=function(e,t){return S("getOrganization",{id:e,name:t})},E.getOrganizationByInvitationToken=function(e){return S("getOrganizationByInvitationToken",{invitationToken:e})},E.resetInvitationToken=function(e){return S("resetInvitationToken",{organizationId:e})},E.addSelfByInvitationToken=function(e){return S("addSelfByInvitationToken",{invitationToken:e})},E.remove=function(e){return S("remove",{id:e})},E.getMyOrganizations=function(e){return void 0===e&&(e={}),S("getMyOrganizations",e)},E.getMembers=function(e){return S("getMembers",e)},E.addMembers=function(e){return S("addMembers",e)},E.removeMembers=function(e){return S("removeMembers",e)},E.createTeam=function(e,t,n,i){return S("createTeam",{orgId:e,name:t,description:n,memberIds:i})},E.updateTeam=function(e,t,n,i){return S("updateTeam",{orgId:e,id:t,name:n,description:i})},E.removeTeam=function(e,t){return S("removeTeam",{orgId:e,teamId:t})},E.getOrganizationTeams=function(e,t){return S("getOrganizationTeams",{id:e,name:t})},E.getTeam=function(e){return S("getTeam",e)},E.getOrganizationsWhereLastOwner=function(){return S("getOrganizationsWhereLastOwner")},E.isMemberOf=function(e,t){return S("isMemberOf",{organization:e,team:[t]}).then((function(e){return e[t]}))},E.isOrganizationNameTaken=function(e){return S("isOrganizationNameTaken",{name:e})},E.isTeamNameTaken=function(e,t,n){return S("isTeamNameTaken",{orgId:e,orgName:t,teamName:n})};const I=E,A={},T=o().partial(r.Z.request,"SubscriptionManager");A.getSubscriptions=()=>T("getSubscriptions");const j=A;var Z={},O=o().partial(r.Z.request,"GigaBoxesManager");Z.isSlotOffered=function(e){return O("isSlotOffered",{projectId:e})},Z.isSlotOfferedOnStart=function(e,t){return r.Z.standardCallbackTask({message:e}).then((function(){return O("isSlotOffered",{projectId:t})}))};const N=Z,D=Object.freeze({GUIDES_BUTTON:0,GUIDES_BUTTON_TERMINAL:1,MENU_BUTTON:2,LINK_WITH_COMMAND:3,GUIDES_CHECK_ASSESSMENT:4}),M={},R=o().partial(r.Z.request,"UserEventManager");M.EventType=D,M.create=function(e,t){const n=o().omitBy(t,o().isNil);return R("create",{type:e,details:n})};const L=M;var F=n(88275),B={},U=o().partial(r.Z.request,"StacksManager");B.all=function(){return U("getAllPacks",{},{})},B.my=function(){return U("getMyPacks",{},{})},B.popular=function(){},B.create=function(e){return U("createPack",e,{}).then(r.Z.standardCallbackTask)},B.update=function(e){return U("updatePack",e,{}).then(r.Z.standardCallbackTask)},B.getById=function(e){return U("getPackById",{id:e},{})},B.remove=function(e){return U("deletePack",{id:e},{})},B.changeOwner=function(e,t,n){return U("changePackOwner",{id:e,ownerId:t,ownerType:!0===n?"ORGANIZATION":"USER"},{})};const q=B;var H={},G=o().partial(r.Z.request,"ImageUploaderManager");H.sign=function(e){return G("sign",{request:e},{})};const W=H,z=o().partial(r.Z.request,"OpenTokManager"),V=e=>z("loadSession",{projectId:e}),K=(e,t)=>z("startCall",{projectId:e,target:t}),J={ProjectManager:s.Z,SSHManager:p,BuildManager:d,AccountManager:v,ProjectStructureManager:y.Z,search:C,containerManager:x.Z,OrganizationManager:I,SubscriptionManager:j,StacksManager:F.Z,PacksManager:q,ImageUploaderManager:W,GigaBoxesManager:N,standardCallbackTask:r.Z.standardCallbackTask,UserEventManager:L,OpenTokManager:i}},47295:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(96486),s=n.n(i),a=n(76638),o={},r=s().partial(a.Z.request,"ContainerManager");function c(e,t,n){s().isUndefined(n)||(e[t]=n)}o.reset=function(e){return r("reset",{projectId:e}).then(a.Z.standardCallbackTask)},o.restart=function(e){return r("restart",{projectId:e}).then(a.Z.standardCallbackTask)},o.run=function(e,t,n){var i={cmd:t};return c(i,"cwd",n.cwd),c(i,"args",n.args),c(i,"env",n.env),c(i,"timeout",n.timeout),r("run",{run:i,projectId:e}).then(a.Z.standardCallbackTask)},o.startTerminal=function(e,t){return r("startTerminal",{projectId:e,port:t})};const l=o},76638:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(96486),s=n.n(i),a=n(33105),o=n(54565),r=n(19575),c=o.Z.get("serverUrl"),l=function(e,t,n,i,o,r){var c='"'+t+":"+n+'"';return new Promise(((l,d)=>{a.Z.apiRequest({object:t,method:n,data:i||{},params:o||{},options:r,serverUrl:e,callback:function(e){if(s().isEmpty(e)||e.error){const t=new Error(e.message);return e.code&&(t.code=e.code),e.additionalInfo&&(t.additionalInfo=e.additionalInfo),console.debug("REQUEST:",c,"Failed!",t.message),d(t)}l(e.response)}})}))},d=function(e,t){if(!e.message)return Promise.reject(new Error("task id is not defined"));const n=r.default.promise.deferred();return a.Z.pingTaskStatus({taskId:e.message,callback:function(e){if(e.error){const t=s().compact([e.code,e.message]).join("::");n.reject(new Error(t))}else n.resolve(e.response.message)}},t),n.promise};const u={request:s().partial(l,c),fileRequest:function(e,t,n){return new Promise(((i,o)=>{a.Z.fileRequest({object:e,method:t,file:n.file,fileName:n.filename,is_public:n.isPublic,description:n.desc,stack:n.stack,callback:function(e){if(s().isEmpty(e)||e.error){const t=new Error(e.message);t.message,o(t)}i(e.response)}})}))},fileRequest2:function(e,t,n,i,o){return new Promise(((r,c)=>{var l={object:t,method:i,data:JSON.stringify(o),file:n,callback:function(e){if(location,s().isEmpty(e)||e.error){const t=new Error(e.message);return location,t.message,c(t)}r(e.response)}};a.Z.fileRequest(e,l)}))},request2:l,pluck:function(e){return s().partialRight(s().result,e)},standardCallbackTask:d,onlyNsCallbackTask:function(e){return d(e,!0)}}},73219:(e,t,n)=>{"use strict";n.d(t,{Z:()=>S});var i=n(96486),s=n.n(i),a=n(49721),o=n(76638),r=n(45113),c=n(71864),l={};function d(e,t,n){var i=[];return s().each(e,(function(e){var a=e.pageId&&s().find(t,{id:e.pageId});if(e.pageId&&!a||e.children){if(e.pageId&&!a){if(!n[e.pageId])return!0;delete e.pageId}e.children&&(e.children=d(e.children,t,n))}i.push(e)})),i}l.convertProjectData=function(e,t){var n,i=JSON.parse(e.project.fullJson),a=e.edu&&!!e.edu.book,o=e.edu&&!!e.edu.authorAssignment,c=a&&{bookWriter:!0,name:e.edu.book.book.settings.name},l=o?e.edu.authorAssignment.course:null;return s().assign(i,l,{bookData:c},{isAuthorProject:a||o},function(e,t,n){if(!t.edu||!t.edu.startedAssignment)return null;var i=t.edu.startedAssignment;const a=i.assignment,o=a.projectBased||a.bookBased;o.groups&&(o.groups=o.groups.map((e=>(e.userIds=e.userIds||[],e))));const c=(0,r.bz)(a),l=function(e){const{startedAssignment:t}=e.edu,{assignment:n,started:i}=t;if(i.assignee.groupId){return{isGroup:!0,group:(n.projectBased?n.projectBased.groups:n.bookBased.groups).find((e=>e.id===i.assignee.groupId))}}{var s;const e=null===(s=i.users.find((e=>e.id===i.assignee.userId)))||void 0===s?void 0:s.actualName;return{isGroup:!1,userId:i.assignee.userId,actualName:e}}}(t),m=l.isGroup?l.group.id:l.userId,g=l.isGroup?"penaltiesPerGroup":"penaltiesPerStudent",b=s().get(c,"".concat(g,".").concat(m,".extend"),0);var v=function(e){var t=e.assignment.bookBased;if(!t)return null;var n=e.course.bookSettingsMap||[];return{bookWriter:!1,pages:t.pages,name:t.settings.name,showAllPages:s().get(n[t.bookId],"showAllPages")}}(i),y={};if(i.assignmentVersion.guides){var w=function(e){const{started:t,assignmentVersion:n}=e,{randomAssessments:i}=t,a=s()(i).mapKeys((e=>e.id)).mapValues((()=>!0)).value(),{guides:o}=n;if(!o)return null;const r={},c=o.playbackMetadataJson;r.metadata=s().defaults({},f(c)),r.metadata.sections=s().map(o.sections,(function(e){const t=e.playbackMetadataJson;if(e.media){const t=e.media.playbackMetadataJson;e.media=s().defaults({source:e.media.url,disabled:!1},f(t))}(e=s().omit(e,["playbackMetadataJson"])).type=s().isEmpty(e.content.htmlRelativePath)?"markdown":"html";const n=s().defaults(e,f(t));return s().some(n.assessmentIds,(e=>a[e]))&&(n.files.unshift({path:"#tabs",action:"close"}),n.closeTerminalSession=!0),n}));const l=[];let d,m=!1;s().forEach(r.metadata.sections,(function(e){const t=s().clone(e);delete e.contentWebp,t.contentWebp&&(m=!0,t.content=t.contentWebp),delete t.contentWebp,l.push(t)})),r.metadata.publicParameters=t.publicParameters,r.assessments=s().map(o.assessments,(function(e){return function(e){var t={};return t.id=e.id,t.taskId=e.id,t.source=s().defaults({},e.details),t.source.showExpectedAnswerOption=h(t.source.showExpectedAnswerOption,t.source.showExpectedAnswer),t.source.showGuidanceAfterResponseOption=p(t.source.showGuidanceAfterResponseOption),t.source.points=e.points,function(e,t){var n=null;if(t.task.multipleChoice)n=t.task.multipleChoice,e.type=u.MULTIPLE_CHOICE,e.source.multipleResponse=n.isMultipleResponse,e.source.isRandomized=n.isRandomized,e.source.expectedAnswerIds=n.expectedAnswerIds,e.source.answers=s().map(n.options,(function(e){return{_id:e.id,answer:e.answer}}));else if(t.task.fillInBlanks){n=t.task.fillInBlanks,e.type=u.FIB;var i=s().flatMap(n.texts,(function(e){return[e,0]}));i.pop(),e.source.showValues=!s().isEmpty(n.selectableAnswers),e.source.expectedAnswers=n.expectedAnswers,e.source.tokens={blank:s().isEmpty(n.selectableAnswers)?void 0:n.selectableAnswers,text:i,regexPositions:s().isEmpty(n.regexPositions)?[]:n.regexPositions}}else if(t.task.ecornellFib){n=t.task.ecornellFib,e.type=u.ECORNELL_FIB;var a=s().flatMap(n.texts,(function(e){return[e,0]}));a.pop(),e.source.showValues=!s().isEmpty(n.selectableAnswers),e.source.expectedAnswers=n.expectedAnswers,e.source.forceScoreShow=n.forceScoreShow,e.source.highlightCorrectAnswers=n.highlightCorrectAnswers,e.source.tokens={blank:s().isEmpty(n.selectableAnswers)?void 0:n.selectableAnswers,text:a,regexPositions:s().isEmpty(n.regexPositions)?[]:n.regexPositions}}else t.task.codeTest?(n=t.task.codeTest,e.type=u.TEST):t.task.codeOutputCompare?(n=t.task.codeOutputCompare,e.type=u.COMPARE,e.source.feedbacks=n.feedbacks,e.source.expectedOutputs=n.expectedOutputs):t.task.custom?(n=t.task.custom,e.type=u.CUSTOM):t.task.freeText?(n=t.task.freeText,e.type=u.FREE_TEXT,e.source.previewType=n.previewType):t.task.freeTextAuto?(n=t.task.freeTextAuto,e.type=u.FREE_TEXT_AUTO,e.source.previewType=n.previewType):t.task.mathStack?(n=t.task.mathStack,e.type=u.MATH,e.source.question=n.question):t.task.gradeBook?(n=t.task.gradeBook,e.type=u.GRADE_BOOK):t.task.jupyterNotebook?(n=t.task.jupyterNotebook,e.type=u.JUPYTER_NOTEBOOK):t.task.parsonsPuzzle?(n=t.task.parsonsPuzzle,e.type=u.PARSONS_PUZZLE,e.source.initial=n.initial,e.source.options=n.options,e.source.grader=n.grader):t.task.splice?(n=t.task.splice,e.type=u.SPLICE,e.source.url=n.url):t.task.llmBasedRubric?(n=t.task.llmBasedRubric,e.type=u.LLM_BASED_RUBRIC,e.source.rubrics=n.rubrics,e.source.solutions=n.solutions):t.task.llmBasedAutoRubric&&(n=t.task.llmBasedAutoRubric,e.type=u.LLM_BASED_AUTO_RUBRIC,e.source.rubrics=n.rubrics,e.source.solutions=n.solutions);n&&(e.source.arePartialPointsAllowed=n.arePartialPointsAllowed)}(t,e),t}(e)})),r.bookStructure=o.bookStructure?function(e){var t;try{t=JSON.parse(e)}catch(e){t={}}return t}(o.bookStructure):{children:[]},m&&(d=s().clone(r),d.metadata=s().clone(r.metadata),d.metadata.sections=l);return{result:r,resultWebp:d}}(i);y.guides=w.result,y.guidesWebp=w.resultWebp}var _=n&&y.guidesWebp||y.guides,k=_?s()(_.metadata.sections).map("id").keyBy((function(e){return e})).value():{};if(_&&_.bookStructure){if(v){var P=(C=_.bookStructure.children,x=s().keyBy(v.pages,(function(e){return e})),E=function(e){var t=[];return s().each(e,(function(e){e.children?t=t.concat(e,E(e.children)):t.push(e)})),t},s()(C).thru(E).map((function(e){return x[e.id]&&e.pageId})).compact().value());_.metadata.sections=s().filter(_.metadata.sections,(function(e){return s().includes(P,e.id)}))}_.bookStructure.children=d(s().cloneDeep(_.bookStructure.children),_.metadata.sections,k)}var C,x,E;const S=i.assignmentVersion.codioMenuFilterJson&&JSON.parse(i.assignmentVersion.codioMenuFilterJson);return{guides:_,eduStartedAssignmentInfo:i,penaltyInfo:{penaltyReached:(0,r.vc)(a)&&new Date>Date.parse(c.due.at)+6e4*b,penaltyApprovedDate:i.started.penaltyApprovedDate,penaltyExtendMin:b},bookData:v,codioMenuFilter:S,assignee:l}}(i.ownerId,e,t)||{},{authorAssignment:e.edu&&e.edu.authorAssignment},{track:(null===(n=e.edu)||void 0===n?void 0:n.track)||null})};var u={TEST:"test",MULTIPLE_CHOICE:"multiple-choice",FIB:"fill-in-the-blanks",ECORNELL_FIB:"ecornell-fib",MATH:"math-stack",COMPARE:"code-output-compare",CUSTOM:"custom",FREE_TEXT:"free-text",FREE_TEXT_AUTO:"free-text-auto",GRADE_BOOK:"grade-book",JUPYTER_NOTEBOOK:"jupyter-notebook",PARSONS_PUZZLE:"parsons-puzzle",SEARCH:"search",SPLICE:"splice",LLM_BASED_RUBRIC:"llm-based-rubric",LLM_BASED_AUTO_RUBRIC:"llm-based-auto-rubric"};const h=(e,t)=>{if(!e)return!1===t?{type:c.K9.NEVER}:{type:c.K9.ALWAYS};const n=Object.keys(e);return n.includes("always")?{type:c.K9.ALWAYS}:n.includes("never")?{type:c.K9.NEVER}:n.includes("whenGradesReleased")?{type:c.K9.WHEN_GRADES_RELEASED}:{type:c.K9.ALWAYS}},p=e=>{if(!e)return{type:c.Ie.NEVER};const t=Object.keys(e);if(t.includes("always"))return{type:c.Ie.ALWAYS};if(t.includes("byScore")){const t=e.byScore;if(t)return{type:c.Ie.SCORE,passedFrom:t.passedFrom}}if(t.includes("byAttempts")){const t=e.byAttempts;if(t)return{type:c.Ie.ATTEMPTS,passedFrom:t.passedFrom}}return t.includes("whenGradesReleased")?{type:c.Ie.WHEN_GRADES_RELEASED}:{type:c.Ie.NEVER}};function f(e){try{return JSON.parse(e)}catch(e){return{}}}const m=l;var g=n(19575),b=n(37371),v=n(2378),y=n(4132);const w=(0,n(77305).e)(b.o$);function _(e,t,n,i,s){return n?function(e,t,n){const i=new v.SubscribeToProjectByIdRequest;i.setProjectId(e),i.setHasWebpSupport(t),n&&i.setSsoToken((0,y.x$)(n));return new Promise(((e,t)=>{w.subscribeToProjectByIdWithTask(i,(0,y.sd)(),((n,i)=>{n?t(new Error(n.message)):e(i.getTaskId())}))}))}(n,s,i):function(e,t,n,i){const s=new v.SubscribeToProjectRequest;s.setUserName(e),s.setProjectName(t),s.setHasWebpSupport(n),i&&s.setSsoToken((0,y.x$)(i));return new Promise(((e,t)=>{w.subscribeToProjectWithTask(s,(0,y.sd)(),((n,i)=>{n?t(new Error(n.message)):e(i.getTaskId())}))}))}(e,t,s,i)}var k={},P=s().partial(o.Z.request,"ProjectManager"),C=s().partial(o.Z.request,"ImportManager"),x=s().partial(o.Z.fileRequest,"ImportManager"),E=o.Z.pluck;k.create=function(e,t,n){return P("createProject",{name:e,account:t,is_public:n.isPublic,description:n.desc,type:n.type,stack:n.stack}).then(o.Z.standardCallbackTask)},k.createFromPack=function(e,t,n){return P("createProjectFromPack",{name:e,account:t,is_public:n.isPublic,description:n.desc,pack:n.pack,credentials:n.credentials,areDefaultsFromStarterPack:n.areDefaultsFromStarterPack}).then(o.Z.standardCallbackTask)},k.import=function(e,t,n,i){var s;if("file"===n)s=x("importFromZip",{file:t,filename:e,isPublic:i.isPublic,desc:i.desc,stack:i.stack});else if("ftp"===n||"sftp"===n)s=C("importFromFtp",{url:t,type:n,path:i.path,fileName:e,is_public:i.isPublic,description:i.desc,credentials:i.credentials,mode:i.mode,stack:i.stack});else{s=C("git"===n?"importFromGit":"importFromHG",{url:t,fileName:e,is_public:i.isPublic,credentials:i.credentials,description:i.desc,stack:i.stack})}return s.then(o.Z.standardCallbackTask)},k.update=function(e){return P("updateProject",{project:e}).then(E("guid"))},k.remove=function(e){return P("removeProject",{guid:e}).then(E("guid"))},k.getProject=function(e){return P("getProject",{guid:e,loadStructure:!0})},k.subscribe=function(e,t,n,i){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>{};if(s().includes(t,":")){var r=t.split(":");t=r[0]}return a("loadProject:webp"),g.default.hasWebpSupport().then((function(s){return _(e,t,n,i,s).then((function(e){return a("loadProject:waitProjectData:"+e),o.Z.onlyNsCallbackTask({message:e})})).then((function(e){return a("loadProject:convertProjectData"),m.convertProjectData(e)}))}))},k.getInfoByName=function(e,t){return P("getProjectByName",{accountName:e,projectName:t})},k.getByIds=function(e){return P("getProjectsList",{guids:e}).then(E("projects"))},k.all=function(e){return P("getProjects",{account:e}).then(E("projects"))},k.shared=function(){return P("getSharedProjects",{}).then(E("shared"))},k.permissions=function(e){return P("getPermissionForProject",{projectId:e})},k.public=function(e){return P("getPublicProjects",{name:e}).then(E("public"))},k.fork=function(e,t,n){return P("fork",{guid:e,name:t,type:n}).then(o.Z.standardCallbackTask)},k.checkProjectClonable=function(e){return P("checkProjectClonable",{projectId:e})},k.git=function(e,t,n,i){var s,o=a.default.currentProject;return P("git",{accountName:e,projectName:t,command:n,credentials:i}).then((function(e){return(s=e).command=n,o.checkout(s.currentBranch)})).then((function(){return s}))},k.getGitCredentialsList=function(e,t){return P("getGitCredentialsList",{accountName:e,projectName:t}).then((function(e){var t={};return s().each(e,(function(e){t[e.remote]={user:e.username,pass:e.password}})),t}))},k.changeStack=function(e,t,n){return P("changeStack",{projectId:e,stack:t,isLatestStack:n})},k.regenerateSecureDomain=function(e){return P("regenerateSecureDomain",{guid:e})},k.fetchContainerServer=function(e){return P("fetchContainerServerForProject",{projectId:e}).then(E("message"))},k.incrementTimeSpent=function(e,t){return P("incrementTimeSpent",{projectId:e,timeChunk:t}).then(E("message"))},k.getEnvVariables=()=>P("getEnvVariables",{}),k.setEnvVariables=e=>P("setEnvVariables",{variables:e}),k.fetchSharedProjectToken=async e=>{const t=await P("fetchSharedProjectToken",{projectId:e});return null==t?void 0:t.linkId},k.generateSharedProjectToken=async e=>{const t=await P("generateSharedProjectToken",{projectId:e});return null==t?void 0:t.linkId},k.deleteSharedProjectToken=e=>P("deleteSharedProjectToken",{projectId:e}),k.getTerminalToken=function(e){return P("getTerminalToken",{projectId:e})};const S=k},31706:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(96486),s=n.n(i),a=n(76638),o=n(33105),r={},c=s().partial(a.Z.request,"ProjectStructureManager");r.uploadFile=function(e,t,n,i,a,r){return new Promise(((c,l)=>{o.Z.fileRequest({object:"ProjectStructureManager",method:"multipartUploadFile",file:n,projectId:t,path:e,onProgress:i,onAbort:a,control:r,callback:function(e){if(location,s().isEmpty(e)||e.error){const t=new Error(e.message);return location,t.message,l(t)}c(e.response)}})}))},r.syncStructure=function(e){return c("syncStructure",{projectId:e})},r.removePath=function(e,t){return c("removePath",{projectId:e,path:s().isString(t)?[t]:t})},r.createFile=function(e,t){return c("createFile",{projectId:e,path:t})},r.moveItem=function(e,t,n){return c("moveItem",{projectId:e,sourcePath:t,destinationPath:n})},r.copyItem=function(e,t,n){return c("copyItem",{projectId:e,sourcePath:t,destinationPath:n})},r.makeDirectory=function(e,t){return c("makeDirectory",{projectId:e,path:t})},r.uploadFromS3File=function(e,t,n,i){return c("uploadFileFromS3",{guid:e,path:t,key:i,bucket:n}).then(a.Z.standardCallbackTask)};const l=r},88275:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(96486),s=n.n(i),a=n(76638),o={},r=s().partial(a.Z.request,"StacksManager");o.all=function(){return r("getAllStacks",{},{})},o.my=function(){return r("getMyStacks",{},{})},o.popular=function(){},o.create=function(e){return r("createStack",e,{}).then(a.Z.standardCallbackTask)},o.publishVersion=function(e){return r("publishVersion",e,{}).then(a.Z.standardCallbackTask)},o.update=function(e){return r("updateStack",e,{})},o.updateVersion=function(e){return r("updateVersion",e,{}).then(a.Z.standardCallbackTask)},o.getById=function(e){return r("getStackById",{id:e},{})},o.getByVersionId=function(e){return r("getStackByVersionId",{id:e},{})},o.getStacksByVersionIds=function(e){return r("getStacksByVersionIds",{ids:e},{})},o.remove=function(e){return r("deleteStack",{id:e},{})},o.changeOwner=function(e,t,n){return r("changeStackOwner",{id:e,ownerId:t,ownerType:!0===n?"ORGANIZATION":"USER"},{})};const c=o},89506:(e,t,n)=>{"use strict";n.d(t,{d9:()=>h,me:()=>f,oM:()=>m,sE:()=>p,xS:()=>b,zh:()=>g});var i=n(96486),s=n.n(i),a=n(37371),o=n(93818),r=n(31784),c=n(4132),l=n(77305),d=n(71864);const u=(0,l.e)(a.lu,!0),h=e=>{const t=new o.ListLibraryRequest;return e&&t.setOrganizationId(e),new Promise(((e,n)=>{u.list(t,(0,c.sd)(),((t,i)=>{t?n(new Error(t.message)):e(s().map(i.toObject().librariesList,d.WM))}))}))},p=e=>{const{libraryId:t,projectId:n,assessmentId:i,source:s,type:a,parameters:o}=e,l=new r.SaveRequest;return l.setAssessmentId(i||""),l.setLibraryId(t),l.setProjectId(n),l.setAssessment((0,d.jd)(s,a,o)),new Promise(((e,t)=>{u.saveAssessment(l,(0,c.sd)(),((n,i)=>{n?t(new Error(n.message)):e(i.toObject())}))}))},f=e=>{const{libraryId:t,libraryIds:n}=e,i=new r.LoadTagsRequest,a=s().isEmpty(n),o=a?[t]:n;return i.setLibraryIdsList(o),new Promise(((e,t)=>{u.loadAssessmentsTags(i,(0,c.sd)(),((n,i)=>{if(n)return void t(new Error(n.message));const o={};let r="";return i.getTagsPerLibraryMap().forEach(((e,t)=>{var n;r=t,o[t]=(n=e.getTagsList(),s().reduce(n,((e,t)=>(e[t.getName()]=t.getValuesList(),e)),{}))})),e(a?o[r]:o)}))}))},m=e=>{const{libraryId:t,search:n}=e,i=new r.SearchRequest;i.setLibraryId(t);const a=s().map(n,(e=>{const t=new r.SearchItem;if(s().isString(e)){const n=new r.TagValueOrName;n.setValue(e),t.setValue(n)}else{const n=new r.Tag;n.setName(e.name),n.setValue(e.value),t.setTag(n)}return t}));return i.setSearchList(a),new Promise(((e,t)=>{u.search(i,(0,c.sd)(),((n,i)=>{n?t(new Error(n.message)):e({assessments:s().map(i.toObject().assessmentsList,d.Us),hasMoreItems:i.getMoreItems()})}))}))},g=e=>{const t=new r.LoadRequest;return t.setAssessmentId(e),new Promise(((e,n)=>{u.loadAssessment(t,(0,c.sd)(),((t,i)=>{t?n(new Error(t.message)):e((0,d.HT)(i))}))}))},b=e=>{const{projectId:t,assessmentId:n}=e,i=new r.AddToProjectRequest;return i.setProjectId(t),i.setAssessmentId(n),new Promise(((e,t)=>{u.addToProject(i,(0,c.sd)(),((n,i)=>{n?t(new Error(n.message)):e((0,d.HT)(i.getAssessment()))}))}))}},69857:(e,t,n)=>{"use strict";n.d(t,{BF:()=>f,Fi:()=>r,VD:()=>c,WM:()=>u,Yx:()=>p,ix:()=>d,lB:()=>l,zL:()=>h});var i=n(42270),s=n(78735),a=n(67744),o=n(76638);const r=e=>i.Fi(e),c=(e,t)=>{let n="";try{n=JSON.stringify(t)}catch(e){throw new Error("Assessment source is corrupt")}return i.VD(e,n)},l=(e,t)=>{let n="";try{n=JSON.stringify(t)}catch(e){throw new Error("Assessment source is corrupt")}return i.lB(e,n)},d=()=>{throw new Error("not implemented")},u=e=>s.WM(e.projectId),h=e=>{const{projectId:t,assessmentId:n,state:i}=e;return s.Pp(t,n,i)},p=e=>{const{projectId:t,assessmentId:n}=e;return s.Nn(t,n)},f=async e=>{const{assessment:t,projectId:n,submittedAt:r,data:c}=e;let l;if(t)l=i.Hu(n,t,c);else{const{type:t,assessmentId:i}=e;l=s.BF(n,i,t,c,r)}return((e,t,n)=>{if(e.isTask)return o.Z.onlyNsCallbackTask({message:e.taskId}).then((function(i){const s=(0,a.PI)(i,t);return n?{usedAttempts:e.usedAttempts,...s}:s}));if(n){const t={usedAttempts:e.usedAttempts,...e.attempt};return e.bestMark&&(t.bestMark=(0,a.qE)(e.bestMark)),t}return e})(await l,e.type||e.assessment.type,!e.assessment)}},42270:(e,t,n)=>{"use strict";n.d(t,{Fi:()=>g,Hu:()=>y,MJ:()=>O,TC:()=>m,VD:()=>b,l2:()=>N,lB:()=>v,rQ:()=>j,xG:()=>T});var i=n(96486),s=n.n(i),a=n(37371),o=n(5945),r=n(14130),c=n(4132),l=n(77305),d=n(42638),u=n(76900),h=n(19575),p=n(76638);const f=(0,l.e)(a.cP),m=(e,t,n)=>{const i=new o.RunAutogradeScriptForAuthorRequest;return i.setProjectId(e),i.setScript(t),i.setEnv(JSON.stringify(n)),new Promise(((e,t)=>{f.runAutogradeScriptForAuthor(i,(0,c.sd)(),((n,i)=>{n?t(new Error(n.message)):e(i.getTaskId())}))}))},g=e=>{const t=new o.ValidateJupyterRequest;return t.setProjectId(e),new Promise(((e,n)=>{f.validateJupyter(t,(0,c.sd)(),((t,i)=>{t?n(new Error(t.message)):e(i.getTaskId())}))}))},b=(e,t)=>{const n=new o.ValidateFibAssessmentRequest;return n.setProjectId(e),n.setAssessmentJson(t),new Promise(((e,t)=>{f.validateFibAssessment(n,(0,c.sd)(),((n,i)=>{n?s().includes(n.details,"Illegal/unsupported escape sequence")?t(new Error(n.details)):t(new Error(n.message)):e(i.toObject())}))}))},v=(e,t)=>{const n=new o.ValidateEcornellFibAssessmentRequest;return n.setProjectId(e),n.setAssessmentJson(t),new Promise(((e,t)=>{f.validateEcornellFibAssessment(n,(0,c.sd)(),((n,i)=>{n?s().includes(n.details,"Illegal/unsupported escape sequence")?t(new Error(n.details)):t(new Error(n.message)):e(i.toObject())}))}))},y=(e,t,n)=>{let i="";try{i=JSON.stringify(t)}catch(e){throw new Error("Assessment source is corrupt")}const a=n.ids;switch(t.type){case u.aR:{let t=n.ids;return s().isString(t)&&(t=[t]),w(i,e,t)}case u.UX:return _(i,e,a);case u.Zb:return k(i,e,a);case u.UF:return P(i,e);case u.PS:return C(i,e);case u.D4:return x(i,e,n.text);case u.V1:{const e={id:"id",answer:n.text,status:{pending:!0},submittedAt:(0,c.il)(new Date),comments:{value:""}},t=d.Wo(e);return Promise.resolve(t)}case u.LG:{const e={points:Math.floor(t.source.points*n.score),stateJson:JSON.stringify(n.state),submittedAt:(0,c.il)(new Date)},i=d.e1(e);return Promise.resolve(i)}case u.Vf:return E(i,e,n.points,n.comment);case u.nh:return S(i,e,a);case u.Xl:return I(i,e,n.guidesContent,n.studentSubmissions);case u.dj:return A(i,e,n.guidesContent,n.studentSubmissions);default:throw new Error("Not supported assessment type for author")}},w=(e,t,n)=>{const i=new o.CheckMultipleChoiceAssessmentForAuthorRequest;return i.setAssessmentJson(e),i.setAnswerIdsList(n),i.setProjectId(t),new Promise(((e,t)=>{f.checkMultipleChoiceAssessmentForAuthor(i,(0,c.sd)(),((n,i)=>{n?t(new Error(n.message)):e(d.t1(i.toObject()))}))}))},_=(e,t,n)=>{const i=new o.CheckFillInBlanksAssessmentForAuthorRequest;return i.setAssessmentJson(e),i.setAnswersList(n),i.setProjectId(t),new Promise(((e,t)=>{f.checkFillInBlanksAssessmentForAuthor(i,(0,c.sd)(),((n,i)=>{n?s().includes(n.details,"Illegal/unsupported escape sequence")?t(new Error(n.details)):t(new Error(n.message)):e(d.wI(i.toObject()))}))}))},k=(e,t,n)=>{const i=new o.CheckEcornellFIBAssessmentForAuthorRequest;return i.setAssessmentJson(e),i.setAnswersList(n),i.setProjectId(t),new Promise(((e,t)=>{f.checkEcornellFIBAssessmentForAuthor(i,(0,c.sd)(),((n,i)=>{n?s().includes(n.details,"Illegal/unsupported escape sequence")?t(new Error(n.details)):t(new Error(n.message)):e(d.Xt(i.toObject()))}))}))},P=(e,t)=>{const n=new o.CheckAdvancedCodeTestAssessmentForAuthorRequest;return n.setAssessmentJson(e),n.setProjectId(t),new Promise(((e,t)=>{f.checkAdvancedCodeTestAssessmentForAuthor(n,(0,c.sd)(),((n,i)=>{n?t(new Error(n.message)):e({isTask:!0,taskId:i.getTaskId()})}))}))},C=(e,t)=>{const n=new o.CheckCodeOutputCompareAssessmentForAuthorRequest;return n.setAssessmentJson(e),n.setProjectId(t),new Promise(((e,t)=>{f.checkCodeOutputCompareAssessmentForAuthor(n,(0,c.sd)(),((n,i)=>{n?t(new Error(n.message)):e({isTask:!0,taskId:i.getTaskId()})}))}))},x=(e,t,n)=>{const i=new o.SubmitFreeTextAutoAssessmentForAuthorRequest;return i.setAssessmentJson(e),i.setProjectId(t),i.setAnswer(n),new Promise(((e,t)=>{f.submitFreeTextAutoAssessmentForAuthor(i,(0,c.sd)(),((n,i)=>{n?t(new Error(n.message)):e({isTask:!0,taskId:i.getTaskId()})}))}))},E=(e,t,n,i)=>{const s=new o.SubmitGradeBookAssessmentForAuthorRequest;return s.setAssessmentJson(e),s.setPoints(n),s.setComment(i),s.setProjectId(t),new Promise(((e,t)=>{f.submitGradeBookAssessmentForAuthor(s,(0,c.sd)(),((n,i)=>{n?t(new Error(n.message)):e(d.Jd(i.toObject()))}))}))},S=(e,t,n)=>{const i=new o.CheckParsonsPuzzleAssessmentForAuthorRequest;return i.setAssessmentJson(e),i.setAnswer(d.Uu(n)),i.setProjectId(t),new Promise(((e,t)=>{f.checkParsonsPuzzleAssessmentForAuthor(i,(0,c.sd)(),((n,i)=>{n?t(new Error(n.message)):e(d.mw(i.toObject()))}))}))},I=(e,t,n,i)=>{const s=new o.SubmitLlmBasedRubricForAuthorRequest;if(s.setAssessmentJson(e),s.setProjectId(t),s.setGuidesContent(n),!i||!i.length)throw new Error("There are no open files to submit.");const a=i.map((e=>{let{path:t,content:n}=e;const i=new r.FileContentEntry;return i.setPath(t),i.setContent(n),i}));return s.setStudentSubmissionsList(a),new Promise(((e,t)=>{f.submitLlmBasedRubricForAuthor(s,(0,c.sd)(),((n,i)=>{n?t(new Error(n.message)):e({isTask:!0,taskId:i.getTaskId()})}))}))},A=(e,t,n,i)=>{const s=new o.SubmitLlmBasedAutoRubricForAuthorRequest;if(s.setAssessmentJson(e),s.setProjectId(t),s.setGuidesContent(n),!i||!i.length)throw new Error("There are no open files to submit.");const a=i.map((e=>{let{path:t,content:n}=e;const i=new r.FileContentEntry;return i.setPath(t),i.setContent(n),i}));return s.setStudentSubmissionsList(a),new Promise(((e,t)=>{f.submitLlmBasedAutoRubricForAuthor(s,(0,c.sd)(),((n,i)=>{n?t(new Error(n.message)):e({isTask:!0,taskId:i.getTaskId()})}))}))};function T(e,t,n,i){const s=new o.StoreProjectDataRequest;return s.setProjectId(e),s.setWorkspace(t),s.setKey(n),s.setValue((0,c.x$)(i)),new Promise(((e,t)=>{f.storeProjectData(s,(0,c.sd)(),((n,i)=>{n?t(new Error(n.message)):e(i)}))}))}function j(e,t){const n=new o.ProjectDataRequest;n.setProjectId(e),n.setWorkspace(t);const i=f.fetchProjectData(n,(0,c.sd)());return Z(i)}const Z=e=>{const t=[],n=h.default.promise.deferred();return e.on("data",(e=>{t.push({key:e.getKey(),value:e.getValue()})})),e.on("end",(()=>n.resolve(t))),e.on("error",(e=>n.reject(e))),e.on("status",(e=>{0===e.code?n.resolve(t):n.reject(new Error(e.details))})),n.promise};function O(e,t){const n=new o.GenerateVariantForAssessmentRequest;n.setProjectId(e),n.setScriptPath(t);const i=h.default.promise.deferred();return f.generateVariantForAssessment(n,(0,c.sd)(),((e,t)=>{e?i.reject(new Error(e.message)):p.Z.onlyNsCallbackTask({message:t.getTaskId()}).then((e=>i.resolve(e))).catch((e=>i.reject(new Error(D(e)))))})),i.promise}function N(e){let{projectId:t,question:n,guidesContent:i,courseName:a,moduleName:l,assignmentName:d,requirements:u,solutions:m}=e;const g=new o.GenerateLlmBasedRubricRequest;if(g.setProjectId(t),n&&g.setQuestion(n),i&&g.setGuidesContent(i),a&&g.setCourseName(a),l&&g.setModuleName(l),d&&g.setAssignmentName(d),u&&g.setRequirements(u),m){const e=s().map(m,(e=>{const t=new r.FileContentEntry;return t.setPath(e.path),t.setContent(e.content),t}));g.setSolutionsList(e)}const b=h.default.promise.deferred();return f.generateLlmBasedRubric(g,(0,c.sd)(),((e,t)=>{e?b.reject(new Error(e.message)):p.Z.onlyNsCallbackTask({message:t.getTaskId()}).then((e=>b.resolve(e))).catch((e=>b.reject(new Error(D(e)))))})),b.promise}const D=e=>{const t=["ASSESSMENT_PARAMETER_GENERATION_ERROR","TIMEOUT_ERROR"],n=s().some(t,(t=>s().startsWith(e,"".concat(t,":"))))?e.replace(/^\s*.*?::/,""):e;return s().escape(n)}},67744:(e,t,n)=>{"use strict";n.d(t,{PI:()=>d,a4:()=>r,q4:()=>c,qE:()=>l});var i=n(96486),s=n.n(i),a=n(76900);const o="Terminated by timeout",r=e=>{const t=e?e.lastIndexOf(o):-1;return-1!==t?"".concat(e.substr(0,t)).concat("Code execution has been terminated by a timeout - this is often the result of a code error, such as an endless loop."):e},c=e=>-1!==e.lastIndexOf(o),l=e=>({points:e.points,timestamp:e.submittedAt?new Date(e.submittedAt).getTime():Date.now()}),d=(e,t)=>{switch(t){case a.PS:case a.UF:return(e=>{let t;e.expectedOutputsList&&(t=s().map(e.expectedOutputsList,(function(e){return{output:e.output,returnCode:e.returnCode&&e.returnCode.value}})));let n=e.runResult;const i={points:e.points,guidance:e.guidance,result:{expectedOutputs:t,code:n&&(n.returnCode||n.code||0),stdout:n&&r(n.stdout),stderr:n&&r(n.stderr),status:"DONE",answer:e.answer},submittedAt:e.submittedAt&&new Date(e.submittedAt)};return s().isString(e.feedback)&&(i.feedback=e.feedback),i.format=e.format,e.bestMark&&(i.bestMark=l(e.bestMark)),i})(e);case a.D4:return(e=>{const t={points:e.points,guidance:e.guidance,comments:e.runResult&&r(e.runResult.stdout)+r(e.runResult.stderr),result:{answer:e.answer,status:"DONE"},submittedAt:e.submittedAt&&new Date(e.submittedAt)};return s().isString(e.feedback)&&(t.feedback=e.feedback),e.bestMark&&(t.bestMark=l(e.bestMark)),t.format=e.format,t})(e);case a.Xl:return(e=>{var t,n,i;const s=(null===(t=e.status.done)||void 0===t?void 0:t.evaluations)||(null===(n=e.status.pending)||void 0===n?void 0:n.evaluations);return{id:e.id,points:null===(i=e.status.done)||void 0===i?void 0:i.points,guidance:e.guidance,result:{status:{evaluations:s,pending:!!e.status.pending}},submittedAt:e.submittedAt&&new Date(e.submittedAt)}})(e);case a.dj:return(e=>{const t=null==e?void 0:e.evaluations;return{id:e.id,points:e.points,guidance:e.guidance,result:{status:{evaluations:t}},submittedAt:e.submittedAt&&new Date(e.submittedAt)}})(e)}return e}},71864:(e,t,n)=>{"use strict";n.d(t,{HT:()=>R,Ie:()=>v,K9:()=>b,Us:()=>j,WM:()=>E,jd:()=>T});var i=n(96486),s=n.n(i),a=n(31784),o=n(76900);const r=0,c=1,l=2,d=3,u=4,h=6,p=7,f=8,m=9,g=11,b={ALWAYS:"Always",NEVER:"Never",WHEN_GRADES_RELEASED:"WhenGradesReleased"},v={ALWAYS:"Always",NEVER:"Never",SCORE:"Score",ATTEMPTS:"Attempts",WHEN_GRADES_RELEASED:"WhenGradesReleased"},y="NONE",w="RAW",_="MARKDOWN",k="Completed",P="InProgress",C="Error",x="Unkown",E=e=>(e.permissions=e.permissionsList,delete e.permissionsList,e),S=e=>{const t=new a.ShowGuidanceAfterResponseOption;switch(e.type){case v.ALWAYS:t.setAlways(new a.AlwaysShowGuidanceAfterResponse);break;case v.ATTEMPTS:{const n=new a.ShowGuidanceAfterResponseByAttempts;e.passedFrom&&n.setPassedFrom(e.passedFrom),t.setByAttempts(n);break}case v.SCORE:{const n=new a.ShowGuidanceAfterResponseByScore;e.passedFrom&&n.setPassedFrom(e.passedFrom),t.setByScore(n);break}case v.WHEN_GRADES_RELEASED:t.setWhenGradesReleased(new a.ShowGuidanceWhenGradesReleasedResponse);break;case v.NEVER:default:t.setNever(new a.NeverShowGuidanceAfterResponse)}return t},I=e=>{switch(e){case _:return a.PreviewType.MARKDOWN;case w:return a.PreviewType.RAW;default:return a.PreviewType.NONE}},A=e=>{const t=new a.RubricItem;return t.setId(e.id),t.setMessage(e.message),t.setWeight(e.weight),t},T=(e,t,n)=>{const i=new a.Assessment,r=new a.Metadata;var c;r.setFilesList(e.metadata.files),r.setOpenedList((c=e.metadata.opened,s().map(c,(e=>{const t=new a.Opened;return t.setType(e.type),t.setPanelNumber(e.panelNumber),t.setContent(e.content),t})))),r.setContent(e.metadata.content),r.setLayout(e.metadata.layout),r.setPageTitle(e.metadata.pageTitle),r.setButtonText(e.metadata.buttonText),s().each(e.metadata.tags,(e=>{r.getTagsMap().set(e.name,e.value)})),i.setMetadata(r);const l=new a.Details;l.setName(e.name),l.setShowName(e.showName),l.setGuidance(e.guidance),l.setInstructions(e.instructions),s().isUndefined(e.showExpectedAnswerOption)&&s().isUndefined(e.showExpectedAnswer)||l.setShowExpectedAnswerOption((e=>{const t=new a.ShowExpectedAnswerOption;switch(e.type){case b.NEVER:t.setNever(new a.NeverShowExpectedAnswerResponse);break;case b.WHEN_GRADES_RELEASED:t.setWhenGradesReleased(new a.WhenGradesReleasedShowExpectedAnswerResponse);break;case b.ALWAYS:default:t.setAlways(new a.AlwaysShowExpectedAnswerResponse)}return t})(e.showExpectedAnswerOption,e.showExpectedAnswer)),e.maxAttemptsCount?l.setMaxAttemptsCount(e.maxAttemptsCount):e.oneTimeTest?l.setMaxAttemptsCount(1):l.setMaxAttemptsCount(0),i.setDetails(l);const d=new a.AssessmentBody;switch(t){case o.aR:d.setMultipleChoice((e=>{const t=new a.MultipleChoice;t.setIsMultipleResponse(e.multipleResponse),t.setIsRandomized(e.isRandomized),t.setArePartialPointsAllowed(e.arePartialPointsAllowed),t.setShowGuidanceAfterResponseOption(S(e.showGuidanceAfterResponseOption));const n=s().map(e.answers,(e=>{const t=new a.ChoiceOption;return t.setId(e._id),t.setAnswer(e.answer),t.setCorrect(e.correct),t}));return t.setOptionsList(n),t})(e));break;case o.UX:d.setFillInBlanks((e=>{const t=new a.FillInBlanks;t.setText(e.text),t.setArePartialPointsAllowed(e.arePartialPointsAllowed),t.setShowValues(e.showValues),t.setShowGuidanceAfterResponseOption(S(e.showGuidanceAfterResponseOption));const n=s().map(e.tokens.blank,(e=>s().isString(e)?e:JSON.stringify(e)));t.setBlanksList(n);const i=e.tokens.text;return i.unshift(""),t.setTextsList(s().filter(i,s().isString)),t.setDistractors(e.distractors||""),t})(e));break;case o.V1:d.setFreeText((e=>{const t=new a.FreeText;return t.setArePartialPointsAllowed(e.arePartialPointsAllowed),t.setShowGuidanceAfterResponseOption(S(e.showGuidanceAfterResponseOption)),t.setPreviewType(I(e.previewType)),t.setRubricsList(s().map(e.rubrics||[],A)),t})(e));break;case o.D4:d.setFreeTextAuto((e=>{const t=new a.FreeTextAuto;return t.setArePartialPointsAllowed(e.arePartialPointsAllowed),t.setShowGuidanceAfterResponseOption(S(e.showGuidanceAfterResponseOption)),t.setPreviewType(I(e.previewType)),t.setCommand(e.command),t.setTimeout(e.timeout),t})(e));break;case o.Vf:d.setGradeBook((e=>{const t=new a.GradeBook;return t.setArePartialPointsAllowed(e.arePartialPointsAllowed),t.setRubricsList(s().map(e.rubrics||[],A)),t})(e));break;case o.nh:d.setParsonPuzzle((e=>{const t=new a.ParsonsPuzzle;return t.setGrader(e.grader),t.setInitial(e.initial),t.setOptions(e.options),t.setShowGuidanceAfterResponseOption(S(e.showGuidanceAfterResponseOption)),t})(e));break;case o._N:d.setMathAssessment((e=>{const t=new a.MathAssessment;return t.setQuestion(e.question),t.setShowGuidanceAfterResponseOption(S(e.showGuidanceAfterResponseOption)),t})(e));break;case o.PS:d.setCodeCompare((e=>{const t=new a.CodeCompare;t.setCommand(e.command),t.setPreExecuteCommand(e.preExecuteCommand),t.setArePartialPointsAllowed(e.arePartialPointsAllowed),t.setShowGuidanceAfterResponseOption(S(e.showGuidanceAfterResponseOption));const n=new a.CodeCompareOptions;n.setIgnoreCase(e.options.ignoreCase),n.setIgnoreNewline(e.options.ignoreNewline),n.setIgnoreWhitespaces(e.options.ignoreWhitespaces),n.setMatchSubstring(e.options.matchSubstring),n.setTimeout(e.options.timeout),t.setOptions(n);const i=s().map(e.sequence,(e=>{const t=new a.CodeCompareSequence;return t.setArguments(e.arguments),t.setInput(e.input),t.setOutput(e.output),t.setShowFeedback(e.showFeedback),t.setFeedback(e.feedback),t}));return t.setSequenceList(i),t})(e));break;case o.UF:d.setCodeTest((e=>{const t=new a.CodeTest;return t.setArePartialPointsAllowed(e.arePartialPointsAllowed),t.setCodeEnvConfig(e.codeEnvConfig),t.setCommand(e.command),t.setShowGuidanceAfterResponseOption(S(e.showGuidanceAfterResponseOption)),t.setTimeoutSeconds(e.timeoutSeconds),t.setPythonPath(e.pythonPath),t})(e));break;case o.FD:d.setRandom((e=>{const t=new a.RandomAssessment;t.setPoints(e.points);const n=s().map(e.tags,(e=>{const t=new a.Tag;return t.setName(e.name),t.setValue(e.value),t}));return t.setTagsList(n),t})(e))}if(i.setBody(d),n){const e=new a.ParametersScript;e.setScript(n),i.setParametersScript(e)}return i},j=e=>(e.tags=s().fromPairs(e.tagsMap),e.type=(e=>{switch(e){case f:return o.PS;case m:return o.UF;case c:return o.UX;case l:return o.V1;case d:return o.D4;case u:return o.Vf;case p:return o._N;case r:return o.aR;case h:return o.nh;case g:return o.FD}})(e.type),delete e.tagsMap,e),Z=e=>e?e.hasCompleted()?k:e.hasInProgress()?P:e.hasError()?C:x:x,O=e=>{switch(e){case a.PreviewType.RAW:return w;case a.PreviewType.MARKDOWN:return _;default:return y}},N=e=>{if(!e)return{type:v.NEVER};if(e.hasAlways())return{type:v.ALWAYS};if(e.hasByScore()){const t=e.getByScore();if(t)return{type:v.SCORE,passedFrom:t.getPassedFrom()}}if(e.hasByAttempts()){const t=e.getByAttempts();if(t)return{type:v.ATTEMPTS,passedFrom:t.getPassedFrom()}}return e.hasWhenGradesReleased()?{type:v.WHEN_GRADES_RELEASED}:{type:v.NEVER}},D=e=>{if(!e)return{};let t;var n;return e.hasShowExpectedAnswerOption()&&(t=(n=e.getShowExpectedAnswerOption())?n.hasAlways()?{type:b.ALWAYS}:n.hasWhenGradesReleased()?{type:b.WHEN_GRADES_RELEASED}:{type:b.NEVER}:{type:b.NEVER}),{guidance:e.getGuidance(),instructions:e.getInstructions(),maxAttemptsCount:e.getMaxAttemptsCount(),name:e.getName(),showName:e.getShowName(),showExpectedAnswerOption:t}},M=e=>{return e?e.hasMultipleChoice()?(l=e.getMultipleChoice())?{type:o.aR,multipleResponse:l.getIsMultipleResponse(),answers:s().map(l.getOptionsList(),(e=>({_id:e.getId(),answer:e.getAnswer(),correct:e.getCorrect()}))),isRandomized:l.getIsRandomized(),arePartialPointsAllowed:l.getArePartialPointsAllowed(),showGuidanceAfterResponseOption:N(l.getShowGuidanceAfterResponseOption())}:{}:e.hasFillInBlanks()?(e=>{if(!e)return{};const t=s().flatMap(e.getTextsList(),(e=>[e,0]));t.pop();const n=s().map(e.getBlanksList(),(e=>{if(s().startsWith(e,'{"type":"')&&s().includes(e,'"value"'))try{return JSON.parse(e)}catch(e){}return e}));return{type:o.UX,text:e.getText(),showGuidanceAfterResponseOption:N(e.getShowGuidanceAfterResponseOption()),arePartialPointsAllowed:e.getArePartialPointsAllowed(),showValues:e.getShowValues(),distractors:e.getDistractors(),tokens:{blank:n,text:t}}})(e.getFillInBlanks()):e.hasFreeText()?(c=e.getFreeText())?{type:o.V1,showGuidanceAfterResponseOption:N(c.getShowGuidanceAfterResponseOption()),arePartialPointsAllowed:c.getArePartialPointsAllowed(),previewType:O(c.getPreviewType()),rubrics:s().map(c.getRubricsList(),(e=>e.toObject()))}:{}:e.hasFreeTextAuto()?(r=e.getFreeTextAuto())?{type:o.D4,showGuidanceAfterResponseOption:N(r.getShowGuidanceAfterResponseOption()),arePartialPointsAllowed:r.getArePartialPointsAllowed(),previewType:O(r.getPreviewType()),command:r.getCommand(),timeout:r.getTimeout()}:{}:e.hasGradeBook()?(a=e.getGradeBook())?{type:o.Vf,arePartialPointsAllowed:a.getArePartialPointsAllowed(),rubrics:s().map(a.getRubricsList(),(e=>e.toObject()))}:{}:e.hasRandom()?(e=>{if(!e)return{};const t=s().map(e.getTagsList(),(e=>e.toObject()));return{type:o.FD,points:e.getPoints(),tags:t}})(e.getRandom()):e.hasCodeTest()?(i=e.getCodeTest())?{type:o.UF,command:i.getCommand(),codeEnvConfig:i.getCodeEnvConfig(),arePartialPointsAllowed:i.getArePartialPointsAllowed(),timeoutSeconds:i.getTimeoutSeconds(),showGuidanceAfterResponseOption:N(i.getShowGuidanceAfterResponseOption()),pythonPath:i.getPythonPath()}:{}:e.hasCodeCompare()?(e=>{if(!e)return{};const t=e.getOptions();let n={};t&&(n=t.toObject());const i=s().map(e.getSequenceList(),(e=>e.toObject()));return{type:o.PS,command:e.getCommand(),preExecuteCommand:e.getPreExecuteCommand(),arePartialPointsAllowed:e.getArePartialPointsAllowed(),showGuidanceAfterResponseOption:N(e.getShowGuidanceAfterResponseOption()),options:n,sequence:i}})(e.getCodeCompare()):e.hasMathAssessment()?(n=e.getMathAssessment())?{type:o._N,question:n.getQuestion(),showGuidanceAfterResponseOption:N(n.getShowGuidanceAfterResponseOption())}:{}:e.hasParsonPuzzle()&&(t=e.getParsonPuzzle())?{type:o.nh,initial:t.getInitial(),options:t.getOptions(),grader:t.getGrader(),showGuidanceAfterResponseOption:N(t.getShowGuidanceAfterResponseOption())}:{}:{};var t,n,i,a,r,c,l},R=e=>{if(!e)return null;const t={version:e.getVersion(),libraryId:e.getLibraryId(),assessmentId:e.getAssessmentId(),metadata:(n=e.getMetadata(),n?{files:n.getFilesList(),opened:s().map(n.getOpenedList(),(e=>e.toObject())),tags:s().fromPairs(n.getTagsMap().toObject()),layout:n.getLayout(),content:n.getContent(),pageTitle:n.getPageTitle(),buttonText:n.getButtonText()}:{})};var n;return s().assignIn(t,(e=>{const t=e.getParametersScript();return t?{parametersScript:{script:t.getScript(),generationStatus:Z(t.getGenerationStatus())}}:{}})(e)),s().assignIn(t,D(e.getDetails())),s().assignIn(t,M(e.getBody())),t}},42638:(e,t,n)=>{"use strict";n.d(t,{$v:()=>_,Jd:()=>k,KK:()=>m,Uu:()=>h,Wo:()=>b,Xt:()=>u,ZI:()=>g,_E:()=>w,e1:()=>v,fV:()=>C,j:()=>E,mw:()=>y,sb:()=>x,t1:()=>l,u2:()=>P,wI:()=>d});var i=n(96486),s=n.n(i),a=n(54603),o=n(74131),r=n(4132);const c="DONE",l=e=>({points:e.points,guidance:e.guidance&&e.guidance.value,result:{current:e.answerIdsList,right:e.expectedAnswerIdsList},submittedAt:e.submittedAt&&(0,r.oG)(e.submittedAt)}),d=e=>({points:e.points,guidance:e.guidance&&e.guidance.value,result:{current:e.answersList,right:e.expectedAnswersList},submittedAt:e.submittedAt&&(0,r.oG)(e.submittedAt)}),u=e=>({points:e.points,guidance:e.guidance&&e.guidance.value,result:{current:e.answersList,right:e.expectedAnswersList,correct:e.correctAnswersList},submittedAt:e.submittedAt&&(0,r.oG)(e.submittedAt)}),h=e=>{const t=new a.ParsonsPuzzleAnswer;return t.setTrashHash(e.trashHash),t.setSolutionHash(e.solutionHash),t.setToggleStates(e.toggleStates),t.setStudentCode(e.studentCode),t.setSuccess(e.success),t},p=e=>s()(e).replace(/\\\[|\\]/g,"$$").replace(/\\\(|\\\)/g,"$"),f=(e,t)=>{const n=p(e),i=(e=>e?p(e):"")(t);let s="";return t&&(s+='<div class="stackinputfeedback">'.concat(i,"</div>")),{questionText:n,questionTextWithNotes:n+s,answerNotes:i}},m=e=>{const t=e.answerNotes&&e.answerNotes.value,n=e.questionText&&f(e.questionText.value,t),i={};return e.answersMap.forEach((e=>{i[e[0]]=e[1]})),{rationale:n&&n.answerNotes,instructions:n&&n.questionText,questionText:n&&n.questionTextWithNotes,points:e.points/100,guidance:e.guidance&&e.guidance.value,result:{answers:i},submittedAt:e.submittedAt&&(0,r.oG)(e.submittedAt)}},g=e=>({points:e.points,result:{answer:e.answer&&JSON.parse(e.answer.value)},submittedAt:e.submittedAt&&(0,r.oG)(e.submittedAt)}),b=e=>{if(e.status){if(e.status.done)return{points:e.status.done.points,guidance:e.guidance&&e.guidance.value,comments:e.comments,result:{answerId:e.id,answer:e.answer,status:c},submittedAt:e.submittedAt&&(0,r.oG)(e.submittedAt)};if(e.status.pending)return{result:{answerId:e.id,answer:e.answer,status:"PENDING"},comments:e.comments,guidance:e.guidance&&e.guidance.value,submittedAt:e.submittedAt&&(0,r.oG)(e.submittedAt)}}},v=e=>{var t;return{points:e.points,guidance:null===(t=e.guidance)||void 0===t?void 0:t.value,result:{stateJson:e.stateJson},submittedAt:e.submittedAt&&(0,r.oG)(e.submittedAt)}},y=e=>({points:e.points,guidance:e.guidance&&e.guidance.value,result:{trashHash:e.trashHash,solutionHash:e.solutionHash,toggleStates:e.toggleStates,studentCode:e.studentCode},submittedAt:e.submittedAt&&(0,r.oG)(e.submittedAt)}),w=e=>{const t={points:e.points&&e.points.value,guidance:e.guidance&&e.guidance.value,comments:e.runResult&&e.runResult.stdout+e.runResult.stderr,result:{answer:e.answer,status:c},submittedAt:e.submittedAt&&(0,r.oG)(e.submittedAt)};return e.feedback&&(t.feedback=e.feedback.value),t.format=S(e.format),t},_=e=>({points:e.points&&e.points.value,guidance:e.guidance&&e.guidance.value,result:{graded:e.result&&e.result.graded,preExecFailed:e.result&&e.result.preExecFailed},submittedAt:e.submittedAt&&(0,r.oG)(e.submittedAt)}),k=e=>({points:e.points&&e.points.value,comment:e.comment,result:{comment:e.comment},submittedAt:e.submittedAt&&(0,r.oG)(e.submittedAt)}),P=e=>({points:e.points,comment:e.comment,result:{comment:e.comment},submittedAt:e.submittedAt&&(0,r.oG)(e.submittedAt)}),C=e=>{var t,n;const i=(null===(t=e.status.done)||void 0===t?void 0:t.evaluationsList)||(null===(n=e.status.pending)||void 0===n?void 0:n.evaluationsList);return{id:e.id,points:e.points,guidance:e.guidance&&e.guidance.value,result:{status:{evaluations:i,pending:!!e.status.pending}},submittedAt:e.submittedAt&&(0,r.oG)(e.submittedAt)}},x=e=>{const t=e.evaluationsList;return{id:e.id,points:e.points,guidance:e.guidance&&e.guidance.value,result:{status:{evaluations:t}},submittedAt:e.submittedAt&&(0,r.oG)(e.submittedAt)}},E=e=>{let t;const n=e.expectedOutputsList;n&&(t=s().map(n,(e=>({output:e.output,returnCode:e.returnCode&&e.returnCode.value}))));const i=e.runResult,a={points:e.points,guidance:e.guidance&&e.guidance.value,result:{expectedOutputs:t,code:i&&i.returnCode,stdout:i&&i.stdout,stderr:i&&i.stderr},submittedAt:e.submittedAt&&(0,r.oG)(e.submittedAt)},o=e.feedback,c=e.format;return o&&(a.feedback=o.value),a.format=S(c),a},S=e=>o.GradingCommentOutputFormat.HTML===e?3:o.GradingCommentOutputFormat.MD===e?2:1},46544:(e,t,n)=>{"use strict";n.d(t,{rK:()=>T,in:()=>j,Td:()=>Z,F3:()=>Y,ch:()=>de,dj:()=>ie,bl:()=>le,kk:()=>Q,oc:()=>xe,YE:()=>we,Mp:()=>pe,rN:()=>oe,wz:()=>Ce,wK:()=>K,H_:()=>fe,T$:()=>ke,Bq:()=>ge,dK:()=>Pe,mj:()=>he,ZN:()=>q,wn:()=>be,eb:()=>_e,si:()=>ye,M1:()=>ee,SO:()=>D,Mt:()=>M,yA:()=>R,X:()=>U,yR:()=>te,Ir:()=>$,T2:()=>X,yp:()=>re,dc:()=>me,QH:()=>ue,hT:()=>ce,Q2:()=>se,GQ:()=>B,iW:()=>Ee,kM:()=>W,bg:()=>G,JH:()=>F,sI:()=>z,wo:()=>H,cc:()=>ae,bC:()=>ve,bp:()=>ne});var i=n(96486),s=n.n(i),a=n(37371),o=n(31600),r=n(73845),c=n(32128),l=n(81113),d=n(75734),u=n(29161),h=n(74394),p=n(66113),f=n(4132),m=n(77305),g=n(76638);const b=e=>(e.createdAt=(0,f.oG)(e.createdAt),e),v=e=>(e.initiatedAt=(0,f.oG)(e.initiatedAt),e);const y=n(74131).GradingCommentOutputFormat;function w(e){return e===y.HTML?y.HTML:e===y.MD?y.MD:y.TXT}var _={INVALID_ARGUMENT:3,NOT_FOUND:5,ALREADY_EXIST:6,PERMISSION_DENIED:7,EMPTY_GUIDES:"EMPTY_GUIDES",METADATA_PARSING:"METADATA_PARSING",BOOK_PARSING:"BOOK_PARSING",RANDOM_ASSESSMENT:"RANDOM_ASSESSMENT",ASSESSMENT_PARSING:"ASSESSMENT_PARSING",CODIO_MENU_PARSING:"CODIO_MENU_PARSING",CONTENT:"CONTENT",ASSESSMENT_PARAMETER_GENERATION_ERROR:"ASSESSMENT_PARAMETER_GENERATION_ERROR",ASSESSMENT_PARAMETER_RENDERING_ERROR:"ASSESSMENT_PARAMETER_RENDERING_ERROR"};var k={ERRORS_CODES:_,ERROR_TEXT_BY_CODE:s().invert(_),convertPublishError:function(e){const[t,n]=e.split("::");switch(t){case _.ASSESSMENT_PARAMETER_RENDERING_ERROR:case _.ASSESSMENT_PARAMETER_GENERATION_ERROR:return new Error(n);case _.METADATA_PARSING:case _.ASSESSMENT_PARSING:return new Error("Metadata parse error, check integrity of ".concat(n||"metadata",", revert to a previously functional version or <<<intercom>>>contact support with course and assignment name<<</intercom>>>."));case _.RANDOM_ASSESSMENT:return new Error("Check random assessment search");case _.BOOK_PARSING:return new Error("Book data parse error, check integrity of .guides/book.json");case _.CODIO_MENU_PARSING:return new Error(".codio-menu file is not a valid JSON");case _.CONTENT:return new Error("A recent renaming was not properly populated. Reverting recent re-naming of files in .guides/content, or reverting the assignment to a previous version.");default:return Error(t)}},convertError:function(e){const[,t]=e.split("::");return t?Error(t):Error(e)}};const P=k,C=(0,m.e)(a.J4),x=(0,m.e)(a.J4,!0),E=0,S=1,I=2,A=3,T={UP:0,DOWN:1},j=o.ChatRoles,Z={SUMMARIZE:"summarize",EXPLAIN_ERROR:"explainError",NEXT_TO_DO:"nextToDo",CUSTOM:"custom"},O=e=>s().map(e,(e=>{let{path:t,content:n}=e;const i=new o.AiStudentFile;return i.setPath(t),i.setContent(n),i})),N=e=>{const t=new o.HintBotProxy;return t.setProvider(function(){switch((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"openai").toLowerCase()){case"openai":default:return o.HintBotProxy.Providers.PROVIDER_OPEN_AI;case"anthropic":return o.HintBotProxy.Providers.PROVIDER_ANTHROPIC;case"azure":return o.HintBotProxy.Providers.PROVIDER_AZURE;case"vllm":return o.HintBotProxy.Providers.PROVIDER_VLLM;case"deepinfra":return o.HintBotProxy.Providers.PROVIDER_DEEPINFRA}}(e.provider)),e.endpoint&&t.setEndPoint((0,f.x$)(e.endpoint)),e.key&&t.setKey((0,f.x$)(e.key)),e.model&&t.setModel((0,f.x$)(e.model)),t},D=(e,t,n,i,a,r)=>{const c=new o.HintBotRequest;c.setProjectId(e);const l=O(n.files||[]);switch(t){case Z.SUMMARIZE:{const e=new o.HintBotSummarize;e.setGuidesContent(n.guidesContent),c.setSummarize(e);break}case Z.EXPLAIN_ERROR:{const e=new o.HintBotExplainError;e.setErrorOutput(n.errorOutput),e.setGuidesContent(n.guidesContent),e.setStudentFilesList(l),c.setExplainError(e);break}case Z.NEXT_TO_DO:{const e=new o.HintBotNextToDo;e.setGuidesContent(n.guidesContent),e.setStudentFilesList(l),c.setNextToDo(e);break}case Z.CUSTOM:{var d;const e=new o.HintBotCustom;n.userPrompt&&e.setUserPrompt(n.userPrompt),e.setSystemPrompt(n.systemPrompt),null!==(d=n.messages)&&void 0!==d&&d.length&&e.setMessagesList((e=>s().map(e,(e=>{const t=new o.HintBotCustomMessage;return t.setRole(e.role),t.setContent(e.content),t})))(n.messages)),c.setCustom(e);break}}if(c.setPreamblesList((e=>s().map(e,(e=>{let{text:t,role:n}=e;const i=new o.ChatHistoryMessage;return i.setText(t),i.setRole(n),i})))(i)),a){const e=new o.HintBotOptions;if(e.setHideFromHistory(a.hideFromHistory),a.proxy&&e.setProxy(N(a.proxy)),a.proxy||a.modelSettings){const t=((e,t)=>{if(!e&&!t)return;const n=new o.HintBotModelSettings;function i(e){s().isNumber(e.temperature)&&n.setTemperature((0,f.ho)(e.temperature)),s().isNumber(e.maxTokens)&&n.setMaxTokens((0,f.gb)(e.maxTokens)),e.apiVersion&&n.setApiVersion((0,f.x$)(e.apiVersion))}return e&&i(e),t&&i(t),n})(a.modelSettings,a.proxy);t&&e.setModelSettings(t)}c.setOptions(e)}const u=[],h=x.hintBot(c,(0,f.sd)());return new Promise(((e,t)=>{h.on("data",(e=>{const t=e.toObject();r.next(t),u.push(t)})),h.on("end",(()=>{null==r||r.complete(),e({messages:u})})),h.on("error",(e=>{null==r||r.error(e),t(e)})),h.on("status",(n=>{if(0===n.code)null==r||r.complete(),e({messages:u});else{const e=new Error(n.details);null==r||r.error(e),t(e)}}))}))},M=(e,t)=>{const n=[];let i;const s=new o.HintBotHistoryRequest;s.setProjectId(e),t&&(t.nextPage&&s.setPage((0,f.gb)(t.nextPage)),t.startPoint&&s.setStartPoint((0,f.KO)(t.startPoint)));const a=x.hintBotHistory(s,(0,f.sd)());return new Promise(((e,t)=>{a.on("data",(e=>{const t=e.toObject();var s;(t.message&&(t.message.createdAt=(0,f.oG)(t.message.createdAt),n.push(t.message)),t.pagination)&&(t.pagination.nextPage=null===(s=t.pagination.nextPage)||void 0===s?void 0:s.value,t.pagination.startPoint=(0,f.oG)(t.pagination.startPoint),i=t.pagination)})),a.on("end",(()=>{e({messages:n,pagination:i})})),a.on("error",(e=>{t(e)})),a.on("status",(s=>{0===s.code?e({messages:n,pagination:i}):t(new Error(s.details))}))}))},R=(e,t)=>{const n=new o.HintBotVoteRequest;return n.setMessageId(e),n.setDirection(1===t?o.HintBotVoteRequest.HintBotVoteDirection.UP:o.HintBotVoteRequest.HintBotVoteDirection.DOWN),new Promise(((e,t)=>{C.hintBotVote(n,(0,f.sd)(),((n,i)=>{n?t(new Error(n.message)):e(i.toObject())}))}))},L=e=>{const t=new p.Assignee;return e.userId?t.setUserId(e.userId):e.groupId&&t.setGroupId(e.groupId),t},F=e=>{const{courseId:t,assignmentId:n,assignees:i,completed:a,submitDrafted:r}=e,c=new o.SetCompletedRequest;return c.setCourseId(t),c.setAssignmentId(n),c.setCompleted(a),c.setSubmitDrafted(r),c.setAssigneesList(s().map(i,L)),new Promise(((e,t)=>{C.setCompleted(c,(0,f.sd)(),((n,i)=>{n?t(new Error(n.message)):e(i.toObject())}))}))},B=(e,t)=>{const n=new o.RestoreAssignmentContentRequest;return n.setProjectId(e),n.setItemsList(t),new Promise(((e,t)=>{C.restoreAssignmentContent(n,(0,f.sd)(),((n,i)=>{n?t(new Error(n.message)):e(g.Z.onlyNsCallbackTask({message:i.getTaskId()}))}))}))},U=(e,t)=>{const n=new o.IncrementTimeSpentRequest;return n.setProjectId(e),n.setChunckSpentSeconds(t),new Promise(((e,t)=>{C.incrementTimeSpent(n,(0,f.sd)(),((n,i)=>{n?t(new Error(n.message)):e(i.toObject())}))}))},q=(e,t,n)=>{const i=new o.GetGradesRequest;i.setCourseId(e),t&&i.setAssignmentId((0,f.x$)(t)),n&&i.setAssignee(L(n));const a=x.getGrades(i,(0,f.sd)());return new Promise(((e,t)=>{const n=[];a.on("data",(e=>{const t=e.toObject();var i;n.push(((i=t).gradeOverrideMap=s().fromPairs(i.gradeOverrideMap),i))})),a.on("end",(()=>{e(n)})),a.on("error",(e=>{t(e)})),a.on("status",(i=>{0===i.code?e(n):t(new Error(i.details))}))}))},H=e=>{const{courseId:t,assignmentId:n,assignee:i,grade:s,comments:a,rubrics:r,format:c}=e,l=new o.SetTeacherAssignmentGradeRequest;return l.setCourseId(t),l.setAssignmentId(n),l.setAssignee(L(i)),l.setGrade(s),l.setComments(a),l.setRubricsList(r),l.setFormat(w(c)),new Promise(((e,t)=>{C.setTeacherAssignmentGrade(l,(0,f.sd)(),((n,i)=>{n?t(new Error(n.message)):e(i.toObject())}))}))},G=e=>{const{courseId:t,assignmentId:n,studentId:i,grade:s,comments:a,remove:r,rubrics:c,format:l}=e,d=new o.SetAssignmentGradeOverrideRequest;return d.setCourseId(t),d.setAssignmentId(n),d.setStudentId(i),d.setGrade(s),d.setComments(a),d.setRemoveOverride(r),d.setRubricsList(c),d.setFormat(w(l)),new Promise(((e,t)=>{C.setAssignmentGradeOverride(d,(0,f.sd)(),((n,i)=>{n?t(new Error(n.message)):e(i.toObject())}))}))},W=e=>{const{courseId:t,assignmentId:n,assignee:i,extraCredit:s,remove:a}=e,r=new o.SetAssignmentExtraCreditRequest;return r.setCourseId(t),r.setAssignmentId(n),r.setAssignee(L(i)),r.setExtraCredit(s),r.setRemoveExtra(a),new Promise(((e,t)=>{C.setAssignmentExtraCredit(r,(0,f.sd)(),((n,i)=>{n?t(new Error(n.message)):e(i.toObject())}))}))},z=e=>{const{courseId:t,assignmentId:n,assignee:i,penaltyDisabled:s}=e,a=new o.SetAssignmentPenaltyDisabledRequest;return a.setCourseId(t),a.setAssignmentId(n),a.setAssignee(L(i)),a.setPenaltyDisabled(s),new Promise(((e,t)=>{C.setAssignmentPenaltyDisabled(a,(0,f.sd)(),((n,i)=>{n?t(new Error(n.message)):e(i.toObject())}))}))},V=e=>{switch(e){case E:return r.CourseView.MembershipView.MembersView.NONE;case I:return r.CourseView.MembershipView.MembersView.IDS;case S:return r.CourseView.MembershipView.MembersView.COUNT;case A:return r.CourseView.MembershipView.MembersView.USERS;default:return r.CourseView.MembershipView.MembersView.NONE}},K=(e,t,n,i,s)=>{const a=new o.FindRequest,u=new o.FindRequest.Query;u.setIdsList([e]),t&&u.setAssignmentIdsList([t]),n&&u.setStudentIdsList([n]),i&&u.setGroupIdsList([i]),a.setQuery(u);const{students:h,teachers:p,assignment:m}=s,g=new r.CourseView;if(m){const e=new c.AssignmentView;if(m.started){const t=new l.StartedAssignmentView;m.started.project&&t.setProject(new d.ProjectView),m.started.grade&&t.setGrade(new l.StartedAssignmentView.GradeView),m.started.assessmentStats&&t.setAssessmentStats(new l.StartedAssignmentView.AssessmentStatsView),m.started.assessmentStates&&t.setAssessmentStates(new l.StartedAssignmentView.AssessmentStatesView),e.setStarted(t)}m.stats&&e.setStats(new c.AssignmentView.Stats),m.guideStats&&e.setGuideStats(new c.AssignmentView.GuideStats),m.version&&e.setVersion(new c.AssignmentView.StartableVersion),g.setAssignment(e)}if(h){const e=new r.CourseView.MembershipView;e.setMembers(V(h)),g.setStudents(e)}if(p){const e=new r.CourseView.MembershipView;e.setMembers(V(p)),g.setTeachers(e)}a.setView(g);const b=x.find(a,(0,f.sd)());return new Promise(((e,t)=>{const n=[],i=[],s={},a=()=>{const e=n[0];return e&&(e.startedAssignments=i,e.versions=s),J(e)};b.on("data",(e=>{if(e.hasCourse()){const t=e.getCourse();t&&n.push(t.toObject())}else if(e.getStartedAssignment()){const t=e.getStartedAssignment();t&&i.push(t.toObject())}else if(e.hasStartableVersion()){const t=(e=>{var t;return e.createdAt=(0,f.oG)(e.createdAt),e.createdById=(null===(t=e.createdById)||void 0===t?void 0:t.value)||null,e})(e.getStartableVersion().toObject());s[t.id]=t}})),b.on("end",(()=>{const t=n[0];t&&(t.startedAssignments=i),e(a())})),b.on("error",(e=>t(e))),b.on("status",(n=>{0===n.code?e(a()):t(new Error(n.details))}))}))},J=e=>(s().each(e.unitsList,(e=>s().each(e.assignmentsList,(e=>{e.projectBased&&e.projectBased.versionDescriptorsList&&(e.projectBased.versionDescriptorsList=s().map(e.projectBased.versionDescriptorsList,v))})))),e),Y=(e,t,n,i,s)=>{const a=new o.ApplyAssessmentGradingRubricsRequest;if(a.setAssignmentId(e),a.setAssessmentId(n),a.setAssignee(L(t)),a.setRemove(i),s){const e=new u.ApplyGradeRubricItem;e.setUuid((0,f.x$)(s.uuid)),e.setAnswerId((0,f.x$)(s.answerId)),e.setComments((0,f.x$)(s.comments)),e.setAdjustValue((0,f.gb)(s.adjustValue)),a.setRubric(e)}return new Promise(((e,t)=>{C.applyAssessmentGradingRubrics(a,(0,f.sd)(),((n,i)=>{n?t(new Error(n.message)):e(i.toObject())}))}))},Q=(e,t,n)=>{const i=new o.ChangeAssessmentGradingRubricsRequest;if(i.setAssignmentId(e),i.setRemove(t),n){const e=new u.GradeRubricItemOptionalUuid;n.uuid&&e.setUuid((0,f.x$)(n.uuid)),e.setWeight(n.weight),e.setMessage(n.message),i.setRubric(e)}return new Promise(((e,t)=>{C.changeAssessmentGradingRubrics(i,(0,f.sd)(),((n,i)=>{n?t(new Error(n.message)):e(i.toObject().rubric)}))}))},X=()=>{const e=new o.ApplyAssessmentGradingRubricsForCopyRequest,t=x.loadAssessmentGradingRubricsForCopy(e,(0,f.sd)());return new Promise(((e,n)=>{const i=[];t.on("data",(e=>{i.push(e.toObject())})),t.on("end",(()=>{e(i)})),t.on("error",(e=>n(e))),t.on("status",(t=>{0===t.code?e(i):n(new Error(t.details))}))}))},$=e=>{let{assignmentId:t}=e;const n=new o.LoadAssessmentGradingRubricsRequest;return n.setAssignmentId(t),new Promise(((e,t)=>{C.loadAssessmentGradingRubrics(n,(0,f.sd)(),((n,i)=>{n?t(new Error(n.message)):e(i.toObject().rubric)}))}))},ee=e=>{const t=new o.GetPublishLogForAssignmentRequest;return t.setAssignmentId(e),new Promise(((e,n)=>{C.getPublishLogForAssignment(t,(0,f.sd)(),((t,i)=>{t?n(new Error(t.message)):e(s().map(i.toObject().publishResultsList,b))}))}))},te=(e,t,n,i)=>{const s=new o.PublishAssignmentRequest;return s.setAssignmentId(e),s.setChangelog(t||""),s.setChangeStack(n),s.setChangeGigabox(i),new Promise(((e,t)=>{C.publishAssignment(s,(0,f.sd)(),((n,i)=>{if(n)t(new Error(n.message));else{const t=i.toObject();e({publishResultsList:t.publishResultsList.map((e=>(e.createdAt=(0,f.oG)(e.createdAt),e))),taskId:t.taskId})}}))}))},ne=e=>g.Z.onlyNsCallbackTask({message:e}).catch((e=>{let{message:t}=e;throw P.convertPublishError(t)})),ie=(e,t)=>{const n=new o.AssignmentWritableCopyRequest;return n.setAssignmentId(e),n.setAssignee(L(t)),new Promise(((e,t)=>{C.assignmentWritableCopy(n,(0,f.sd)(),((n,i)=>{if(n)t(new Error(n.message));else{const t=i.toObject();if(t.task&&t.task.taskId)return void e(g.Z.onlyNsCallbackTask({message:t.task.taskId}));e(t.existing)}}))}))},se=(e,t)=>{const n=new o.ResetAssignmentRequest;return n.setAssignmentId(e),n.setAssignee(L(t)),new Promise(((e,t)=>{C.resetAssignment(n,(0,f.sd)(),((n,i)=>{n?t(new Error(n.message)):e(i.toObject())}))}))},ae=e=>{const t=new o.UpdatePenaltyApprovedDateRequest;return t.setProjectId(e),new Promise(((e,n)=>{C.updatePenaltyApprovedDate(t,(0,f.sd)(),((t,i)=>{t?n(new Error(t.message)):e(i.toObject())}))}))},oe=(e,t)=>{const n=new o.EnsureAssignmentStartedRequest;return n.setAssignmentId(e),t&&n.setSsoAccessToken((0,f.x$)(t)),new Promise(((e,t)=>{C.ensureAssignmentStarted(n,(0,f.sd)(),((n,i)=>{if(n)t(new Error(n.message));else{const t=i.toObject();if(t.task&&t.task.taskId)return void e(g.Z.onlyNsCallbackTask({message:t.task.taskId}));e(t.existing)}}))}))},re=(e,t,n)=>{const i=new o.PushSurveyAnswersRequest;for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const t=n[e],s=new h.Answer;t.freeText&&s.setFreeText(t.freeText),t.rate&&s.setRate(t.rate),i.getAnswersMap().set(parseInt(e,10),s)}return i.setSurveyId(e),i.setAssignmentId(t),new Promise(((e,t)=>{C.pushSurveyAnswers(i,(0,f.sd)(),((n,i)=>{n?t(new Error(n.message)):e(i.toObject())}))}))},ce=(e,t)=>{const n=new o.RequestRegradeRequest;return n.setAssignmentId(e),n.setMessage(t),new Promise(((e,t)=>{C.requestRegrade(n,(0,f.sd)(),((n,i)=>{n?t(new Error(n.message)):e(i.toObject())}))}))},le=e=>{const t=new o.CancelRegradeRequestRequest;return t.setAssignmentId(e),new Promise(((e,n)=>{C.cancelRegradeRequest(t,(0,f.sd)(),((t,i)=>{t?n(new Error(t.message)):e(i.toObject())}))}))},de=(e,t)=>{const n=new o.ResolveRegradeRequestRequest;return n.setAssignmentId(e),n.setAssignee(L(t)),n.setStatus(l.RegradeRequest.Status.APPROVED),new Promise(((e,t)=>{C.resolveRegradeRequest(n,(0,f.sd)(),((n,i)=>{n?t(new Error(n.message)):e(i.toObject())}))}))},ue=(e,t,n)=>{const i=new o.ResolveRegradeRequestRequest;return i.setAssignmentId(e),i.setAssignee(L(t)),i.setStatus(l.RegradeRequest.Status.REJECTED),i.setComment((0,f.x$)(n)),new Promise(((e,t)=>{C.resolveRegradeRequest(i,(0,f.sd)(),((n,i)=>{n?t(new Error(n.message)):e(i.toObject())}))}))},he=e=>{const t=new o.GetAssignmentAuthorProjectInfoRequest;return t.setAssignmentId(e),new Promise(((e,n)=>{C.getAssignmentAuthorProjectInfo(t,(0,f.sd)(),((t,i)=>{var s;t?n(new Error(t.message)):e(((s=i.toObject()).createdAt=(0,f.oG)(s.createdAt),s))}))}))};function pe(e,t,n){const i=new o.EnsureAssignmentProjectCreatedForAuthorRequest;return i.setAssignmentId(e),i.setDefaultStackId(t),i.setForceRestart(n),new Promise(((e,t)=>{C.ensureAssignmentProjectCreatedForAuthor(i,(0,f.sd)(),((n,i)=>{if(n)t(new Error(n.message));else{const t=i.toObject();if(t.task&&t.task.taskId)return void e(g.Z.onlyNsCallbackTask({message:t.task.taskId}));e(t.existing)}}))}))}const fe=(e,t,n,i,s)=>{if(!n)throw new Error("Generation is not possible for an empty page");const a=new o.GenerateAssessmentRequest;a.setProjectId(e),a.setAssessmentType(t),a.setGuidesContent(n),a.setUserIntro(s);const r=O(i||[]);return a.setFilesList(r),new Promise(((e,t)=>{C.generateAssessment(a,(0,f.sd)(),((n,i)=>{n?t(new Error(n.message)):e(g.Z.onlyNsCallbackTask({message:i.getTaskId()}))}))}))},me=(e,t,n,i,s,a)=>{if(!i)throw new Error("Generation is not possible for an empty page");const r=new o.ReGenerateAssessmentRequest;r.setAssessmentJson(n),r.setProjectId(e),r.setAssessmentType(t),r.setGuidesContent(i),r.setUserIntro(a);const c=O(s||[]);return r.setFilesList(c),new Promise(((e,t)=>{C.reGenerateAssessment(r,(0,f.sd)(),((n,i)=>{n?t(new Error(n.message)):e(g.Z.onlyNsCallbackTask({message:i.getTaskId()}))}))}))},ge=(e,t,n,i)=>{const s=new o.GenerateContentRequest;s.setProjectId(e),s.setTopic(t),s.setRequirements(n);const a=O(i||[]);return s.setFilesList(a),new Promise(((e,t)=>{C.generateContent(s,(0,f.sd)(),((n,i)=>{n?t(new Error(n.message)):e(g.Z.onlyNsCallbackTask({message:i.getTaskId()}))}))})).catch((e=>{let{message:t}=e;throw P.convertError(t)}))},be=(e,t,n)=>{const i=new o.GetGradingQueueItemInfoRequest;return i.setAssignmentId(e),i.setAssignee(L(t)),e&&i.setIsAssignmentQueue((0,f.Gi)(n)),new Promise(((e,t)=>{C.getGradingQueueItemInfo(i,(0,f.sd)(),((n,i)=>{if(n)t(new Error(n.message));else{const t=i.toObject();e(t)}}))}))},ve=(e,t)=>{const n=new o.UpdateQueueItemViewingTimeRequest;return n.setAssignmentId(e),n.setAssignee(L(t)),new Promise(((e,t)=>{C.updateQueueItemViewingTime(n,(0,f.sd)(),((n,i)=>{n?t(new Error(n.message)):e(i.toObject())}))}))},ye=e=>{let{assignmentId:t,assignee:n,isAssignmentQueue:i,isNext:s,shouldBeUngraded:a}=e;const r=new o.GetNextProjectDefinitionByQueueRequest;return r.setCurrentAssignmentId(t),r.setCurrentAssignee(L(n)),r.setIsNext(s),r.setShouldBeUngraded(a),t&&r.setIsAssignmentQueue((0,f.Gi)(i)),new Promise(((e,t)=>{C.getNextProjectDefinitionByQueue(r,(0,f.sd)(),((n,i)=>{n?t(new Error(n.message)):e(i.toObject())}))}))},we=(e,t)=>{const n=new o.EnsureAccessStartedAssignmentRequest;return n.setAssignmentId(e),n.setAssignee(L(t)),new Promise(((e,t)=>{C.ensureAccessStartedAssignment(n,(0,f.sd)(),((n,i)=>{if(n)t(new Error(n.message));else{const t=i.toObject();if(t.task&&t.task.taskId)return void e(g.Z.onlyNsCallbackTask({message:t.task.taskId}));e(((s=t.existing).ownerSlug=(null===(a=s.ownerSlug)||void 0===a?void 0:a.value)||null,s))}var s,a}))}))},_e=e=>{const t=new o.GetLlmProxyDetailsRequest;return t.setCourseId(e),new Promise(((e,n)=>{C.getLlmProxyDetails(t,(0,f.sd)(),((t,i)=>{t?n(new Error(t.message)):e(i.toObject())}))}))},ke=(e,t,n)=>{const i=new o.GenerateAwsCloudLearningAccessRequest;return i.setCourseId(e),i.setAssignmentId(t),i.setProjectOwnerId(n),new Promise(((e,t)=>{C.generateAwsCloudLearningAccess(i,(0,f.sd)(),((n,i)=>{n?t(new Error(n.message)):e(g.Z.onlyNsCallbackTask({message:i.getTaskId()}))}))}))},Pe=(e,t,n)=>{const i=new o.GenerationVoteRequest;let s;switch(n){case T.UP:s=o.GenerationVoteRequest.GenerationVoteDirection.UP;break;case T.DOWN:s=o.GenerationVoteRequest.GenerationVoteDirection.DOWN;break;default:s=o.GenerationVoteRequest.GenerationVoteDirection.UNSPECIFIED}return i.setRunId(t),i.setUserId(e),i.setDirection(s),new Promise(((e,t)=>{C.generationVote(i,(0,f.sd)(),((n,i)=>{n?t(new Error(n.message)):e(i.toObject())}))}))},Ce=e=>{const t=new o.FetchGuidesBlueprintsRequest;return t.setCourseId(e),new Promise(((e,n)=>{C.fetchGuidesBlueprints(t,(0,f.sd)(),((t,i)=>{t?n(new Error(t.message)):e(i.toObject().blueprintsList)}))}))},xe=(e,t)=>{const n=new o.DeleteGuidesBlueprintRequest;return n.setCourseId(e),n.setBlueprintId(t),new Promise(((e,t)=>{C.deleteGuidesBlueprint(n,(0,f.sd)(),((n,i)=>{n?t(new Error(n.message)):e(i.toObject())}))}))},Ee=(e,t)=>{const n=new o.SaveGuidesBlueprintRequest;n.setCourseId(e);const i=new o.GuidesBlueprint;if(t.id&&i.setId(t.id),t.name&&i.setName(t.name),t.pageContentTemplate&&i.setPageContentTemplate(t.pageContentTemplate),t.layout&&i.setLayout(t.layout),t.options){const e=new o.GuidesBlueprintOptions;e.setCloseTerminalSession(t.options.closeTerminalSession||!1),e.setTeacherOnly(t.options.teacherOnly||!1),t.options.paths&&e.setPathsList(t.options.paths),i.setOptions(e)}if(t.actions){const e=t.actions,n=s().map(e,(e=>{const t=new o.GuidesBlueprintAction;return e.actionJson&&t.setActionJson(e.actionJson),t}));i.setActionsList(n)}return n.setBlueprint(i),new Promise(((e,t)=>{C.saveGuidesBlueprint(n,(0,f.sd)(),((n,i)=>{n?t(new Error(n.message)):e(i.toObject())}))}))}},4132:(e,t,n)=>{"use strict";n.d(t,{Gi:()=>f,KO:()=>p,RU:()=>h,gb:()=>d,ho:()=>u,il:()=>l,oG:()=>c,sd:()=>o,x$:()=>r});var i=n(49088),s=n(99469),a=n(71134);const o=()=>{const e=(0,i.p)();return{authorization:"Bearer ".concat(e)}};function r(e){const t=new s.StringValue;return t.setValue(e),t}const c=e=>new Date(1e3*e.seconds+e.nanos/1e6),l=e=>{const t=e.getTime();return{seconds:Math.floor(t/1e3),nanos:t%1e3*1e6}},d=e=>{const t=new s.Int32Value;return t.setValue(e),t},u=e=>{const t=new s.FloatValue;return t.setValue(e),t},h=e=>{const t=new s.UInt32Value;return t.setValue(e),t};function p(e){const t=new a.Timestamp;return t.fromDate(e),t}const f=e=>{const t=new s.BoolValue;return t.setValue(e),t}},77305:(e,t,n)=>{"use strict";n.d(t,{e:()=>s});const i=n(54565).Z.get("grpcWebZeus");function s(e,t){const n=window.__GRPCWEB_DEVTOOLS__||(()=>{}),s=e(t?i.streamUri:i.uri);return n([s]),s}},78735:(e,t,n)=>{"use strict";n.d(t,{$r:()=>O,BF:()=>v,Nn:()=>b,Pp:()=>g,Ro:()=>Z,WM:()=>f});var i=n(96486),s=n.n(i),a=n(37371),o=n(87757),r=n(14130),c=n(54603),l=n(4132),d=n(77305),u=n(42638),h=n(76900);const p=(0,d.e)(a.Qu),f=e=>{const t=new o.FetchGuideStateRequest;return t.setProjectId(e),new Promise(((e,n)=>{p.fetchGuideState(t,(0,l.sd)(),((t,i)=>{if(t)return void n(new Error(t.message));const a=s().map(i.getAssessmentStatesList(),(e=>{const t=e.toObject(),n=t.state?t.state.value:void 0,i=t.usedAttempts?t.usedAttempts.value:0,a=m(t.attempt,i,n);return s().isUndefined(a.points)||(a.answerState=a.points>0?"pass":"fail"),{taskId:t.assessmentId,result:a}}));e(a)}))}))},m=(e,t,n)=>{let i;return e?e.multipleChoice?i=u.t1(e.multipleChoice):e.fillInBlanks?i=u.wI(e.fillInBlanks):e.ecornellFib?i=u.Xt(e.ecornellFib):e.codeTest?i=u.j(e.codeTest):e.codeOutputCompare?i=u.j(e.codeOutputCompare):e.custom?i=u.ZI(e.custom):e.freeText?i=u.Wo(e.freeText):e.freeTextAuto?i=u._E(e.freeTextAuto):e.math?i=u.KK(e.math):e.gradeBook?i=u.Jd(e.gradeBook):e.jupyterNotebook?i=u.u2(e.jupyterNotebook):e.parsonsPuzzle?i=u.mw(e.parsonsPuzzle):e.senseNetwork?i=u.$v(e.senseNetwork):e.splice?i=u.e1(e.splice):e.llmBasedRubric?i=u.fV(e.llmBasedRubric):e.llmBasedAutoRubric&&(i=u.sb(e.llmBasedAutoRubric)):i={points:0},s().defaults(i,{state:n&&JSON.parse(n),usedAttempts:t})},g=(e,t,n)=>{const i=new o.StoreAssessmentStateRequest;return i.setAssessment(y(e,t)),i.setState(JSON.stringify(n)),new Promise(((e,t)=>{p.storeAssessmentState(i,(0,l.sd)(),((n,i)=>{n?t(new Error(n.message)):e(i.toObject())}))}))},b=(e,t)=>new Promise(((n,i)=>{p.removeAssessmentResult(y(e,t),(0,l.sd)(),((e,t)=>{e?i(new Error(e.message)):n(t.toObject())}))})),v=(e,t,n,i,a)=>{let r=null;switch(n){case h.aR:return r=s().isArray(i.ids)?i.ids:[i.ids],w(e,t,r,a);case h.UX:return r=s().isArray(i.ids)?i.ids:[i.ids],_(e,t,r,a);case h.Zb:return r=s().isArray(i.ids)?i.ids:[i.ids],k(e,t,r,a);case h.UF:return P(e,t,a);case h.PS:return C(e,t,a);case h.qN:return x(e,t,i.points,a,i.answer);case h.LG:return E(e,t,i.score,a,i.state);case h.V1:return S(e,t,i.text,a);case h.D4:return I(e,t,i.text,a);case h.Vf:return((e,t,n,i,s)=>{const a=new o.SubmitGradeBookAssessmentRequest;return a.setAssessment(y(e,t)),a.setComment(n),a.setPoints(i),a.setSubmittedAt(s&&(0,l.KO)(s)),new Promise(((e,t)=>{p.submitGradeBookAssessment(a,(0,l.sd)(),((n,i)=>{n?t(new Error(n.message)):e(i.toObject())}))}))})(e,t,i.comment,i.points,a);case h.nh:return A(e,t,i.ids,a);case h.Xl:return T(e,t,i.guidesContent,i.studentSubmissions,a);case h.dj:return j(e,t,i.guidesContent,i.studentSubmissions,a);default:throw new Error("Not supported assessment type for student")}},y=(e,t)=>{const n=new o.AssessmentDescriptor;return n.setProjectId(e),n.setAssessmentId(t),n},w=(e,t,n,i)=>{const s=new o.CheckMultipleChoiceAssessmentRequest;return s.setAssessment(y(e,t)),s.setAnswerIdsList(n),s.setSubmittedAt(i&&(0,l.KO)(i)),new Promise(((e,t)=>{p.checkMultipleChoiceAssessment(s,(0,l.sd)(),((n,i)=>{var s;if(n)return void t(new Error(n.message));const a=null===(s=i.getAttempt())||void 0===s?void 0:s.toObject();e({attempt:a?u.t1(a):null,usedAttempts:i.getUsedAttempts()})}))}))},_=(e,t,n,i)=>{const s=new o.CheckFillInBlanksAssessmentRequest;return s.setAssessment(y(e,t)),s.setAnswersList(n),s.setSubmittedAt(i&&(0,l.KO)(i)),new Promise(((e,t)=>{p.checkFillInBlanksAssessment(s,(0,l.sd)(),((n,i)=>{var s;if(n)return void t(new Error(n.message));const a=null===(s=i.getAttempt())||void 0===s?void 0:s.toObject();e({attempt:a?u.wI(a):null,usedAttempts:i.getUsedAttempts()})}))}))},k=(e,t,n,i)=>{const s=new o.CheckEcornellFIBAssessmentRequest;return s.setAssessment(y(e,t)),s.setAnswersList(n),s.setSubmittedAt(i&&(0,l.KO)(i)),new Promise(((e,t)=>{p.checkEcornellFIBAssessment(s,(0,l.sd)(),((n,i)=>{var s;if(n)return void t(new Error(n.message));const a=null===(s=i.getAttempt())||void 0===s?void 0:s.toObject();e({attempt:a?u.Xt(a):null,usedAttempts:i.getUsedAttempts()})}))}))},P=(e,t,n)=>{const i=new o.CheckAdvancedCodeTestAssessmentRequest;return i.setAssessment(y(e,t)),i.setSubmittedAt(n&&(0,l.KO)(n)),new Promise(((e,t)=>{p.checkAdvancedCodeTestAssessment(i,(0,l.sd)(),((n,i)=>{n?t(new Error(n.message)):e({isTask:!0,taskId:i.getTaskId(),usedAttempts:i.getUsedAttempts()})}))}))},C=(e,t,n)=>{const i=new o.CheckCodeOutputCompareAssessmentRequest;return i.setAssessment(y(e,t)),i.setSubmittedAt(n&&(0,l.KO)(n)),new Promise(((e,t)=>{p.checkCodeOutputCompareAssessment(i,(0,l.sd)(),((n,i)=>{n?t(new Error(n.message)):e({isTask:!0,taskId:i.getTaskId(),usedAttempts:i.getUsedAttempts()})}))}))},x=(e,t,n,i,s)=>{const a=new o.SubmitCustomAssessmentResultRequest;return a.setAssessment(y(e,t)),a.setPoints(n),a.setAnswer(s&&(0,l.x$)(JSON.stringify(s))),a.setSubmittedAt(i&&(0,l.KO)(i)),new Promise(((e,t)=>{p.submitCustomAssessmentResult(a,(0,l.sd)(),((n,i)=>{var s;if(n)return void t(new Error(n.message));const a=null===(s=i.getAttempt())||void 0===s?void 0:s.toObject();e({attempt:a?u.ZI(a):null,usedAttempts:i.getUsedAttempts()})}))}))},E=async(e,t,n,i,s)=>{const a=new o.SubmitSpliceAssessmentResultRequest;return a.setAssessment(y(e,t)),a.setPoints(Math.floor(100*n)),s&&a.setStateJson(JSON.stringify(s)),a.setSubmittedAt(i&&(0,l.KO)(i)),new Promise(((e,t)=>{p.submitSpliceAssessmentResult(a,(0,l.sd)(),((n,i)=>{var s;if(n)return void t(new Error(n.message));const a=null===(s=i.getAttempt())||void 0===s?void 0:s.toObject();e({attempt:a?u.e1(a):null,usedAttempts:i.getUsedAttempts()})}))}))},S=(e,t,n,i)=>{const s=new o.SubmitFreeTextAssessmentAnswerRequest;return s.setAssessment(y(e,t)),s.setAnswer(n),s.setSubmittedAt(i&&(0,l.KO)(i)),new Promise(((e,t)=>{p.submitFreeTextAssessmentAnswer(s,(0,l.sd)(),((i,s)=>{if(i)return void t(new Error(i.message));const a=s.toObject(),o={id:a.attemptId,answer:n,status:{pending:!0},submittedAt:(0,l.il)(new Date),comments:"",guidance:a.guidance};e({attempt:o?u.Wo(o):null,usedAttempts:s.getUsedAttempts()})}))}))},I=(e,t,n,i)=>{const s=new o.SubmitFreeTextAutoAssessmentAnswerRequest;return s.setAssessment(y(e,t)),s.setAnswer(n),s.setSubmittedAt(i&&(0,l.KO)(i)),new Promise(((e,t)=>{p.submitFreeTextAutoAssessmentAnswer(s,(0,l.sd)(),((n,i)=>{n?t(new Error(n.message)):e({isTask:!0,taskId:i.getTaskId(),usedAttempts:i.getUsedAttempts()})}))}))},A=(e,t,n,i)=>{const s=new o.CheckParsonsPuzzleAssessmentRequest;return s.setAssessment(y(e,t)),s.setAnswer(u.Uu(n)),s.setSubmittedAt((0,l.KO)(i)),new Promise(((e,t)=>{p.checkParsonsPuzzleAssessment(s,(0,l.sd)(),((n,i)=>{var s;if(n)return void t(new Error(n.message));const a=null===(s=i.getAttempt())||void 0===s?void 0:s.toObject();e({attempt:a?u.mw(a):null,usedAttempts:i.getUsedAttempts()})}))}))},T=(e,t,n,i,s)=>{const a=new o.SubmitLlmBasedRubricRequest;if(a.setAssessment(y(e,t)),a.setGuidesContent(n),!i||!i.length)throw new Error("There are no open files to submit.");const c=i.map((e=>{let{path:t,content:n}=e;const i=new r.FileContentEntry;return i.setPath(t),i.setContent(n),i}));return a.setStudentSubmissionsList(c),a.setSubmittedAt((0,l.KO)(s)),new Promise(((e,t)=>{p.submitLlmBasedRubric(a,(0,l.sd)(),((n,i)=>{n?t(new Error(n.message)):e({isTask:!0,taskId:i.getTaskId(),usedAttempts:i.getUsedAttempts()})}))}))},j=(e,t,n,i,s)=>{const a=new o.SubmitLlmBasedAutoRubricRequest;if(a.setAssessment(y(e,t)),a.setGuidesContent(n),!i||!i.length)throw new Error("There are no open files to submit.");const c=i.map((e=>{let{path:t,content:n}=e;const i=new r.FileContentEntry;return i.setPath(t),i.setContent(n),i}));return a.setStudentSubmissionsList(c),a.setSubmittedAt((0,l.KO)(s)),new Promise(((e,t)=>{p.submitLlmBasedAutoRubric(a,(0,l.sd)(),((n,i)=>{n?t(new Error(n.message)):e({isTask:!0,taskId:i.getTaskId(),usedAttempts:i.getUsedAttempts()})}))}))},Z=e=>{let{projectId:t,id:n,attemptId:i,data:s}=e;const a=new o.MarkLlmBasedRubricRequest;a.setAssessment(y(t,n)),a.setAttemptId(i);const r=s.evaluations.map((e=>{let{id:t,title:n,feedback:i,points:s}=e;const a=new c.LlmBasedRubricAttemptItem;return a.setId(t),a.setTitle(n),a.setFeedback(i),a.setPoints(s),a}));return a.setEvaluationsList(r),new Promise(((e,t)=>{p.markLlmBasedRubric(a,(0,l.sd)(),((n,i)=>{n?t(new Error(n.message)):e(i.toObject())}))}))},O=e=>{let{projectId:t,id:n,attemptId:i,data:s}=e;const a=new o.ReviewLlmBasedAutoRubricRequest;a.setAssessment(y(t,n)),a.setAttemptId(i);const r=s.evaluations.map((e=>{let{id:t,title:n,feedback:i,points:s}=e;const a=new c.LlmBasedAutoRubricAttemptItem;return a.setId(t),a.setTitle(n),a.setFeedback(i),a.setPoints(s),a}));return a.setEvaluationsList(r),new Promise(((e,t)=>{p.reviewLlmBasedAutoRubric(a,(0,l.sd)(),((n,i)=>{n?t(new Error(n.message)):e(i.toObject())}))}))}},49721:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(96486),lodash__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__),jquery__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(52308),jquery__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__),sha1__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(88690),sha1__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(sha1__WEBPACK_IMPORTED_MODULE_2__),core_extension__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(18098),core_router__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(88392),core_settings__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(9380),core_events__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(93443),_ns__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(1650),core_account__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(59050),core_tools__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(19575),core_cookie__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(54137),core_notifications__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(97137),_access_token__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(49088),core_ns_lib_events_channel__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(33468),core_time_tracking__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(61170),core_loading_spinner__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(56690),_hubspot__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(70803),_sentry__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(23318),_app_events_json__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(63344),_posthog__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(60977);const emit=core_events__WEBPACK_IMPORTED_MODULE_6__.Z.create(_app_events_json__WEBPACK_IMPORTED_MODULE_17__),app={running:!1,currentProject:null,ide:null,currentEditor:null,router:null,online:!1,ns:_ns__WEBPACK_IMPORTED_MODULE_7__.Z,collaborationDriverId:null};function disableHistoryWithBackspace(){var e=/INPUT|TEXTAREA/i,t=/RADIO|CHECKBOX|SUBMIT/i;jquery__WEBPACK_IMPORTED_MODULE_1___default()(document).bind("keydown keypress",(function(n){var i;if(8===n.keyCode){var s=n.srcElement||n.target;if(e.test(n.target.tagName)){var a=!1;s.attributes.type&&(a=t.test(s.attributes.type.value)),i=s.readOnly||s.disabled||a}else i=!0}else i=!1;i&&n.preventDefault()}))}function bindSupportLink(){jquery__WEBPACK_IMPORTED_MODULE_1___default()("body").on("click",'a[href="mailto:help@codio.com"]',(function(){return core_events__WEBPACK_IMPORTED_MODULE_6__.Z.publish("command:support:show"),!1}))}function executeCustomScripts(user){var idSha1=sha1__WEBPACK_IMPORTED_MODULE_2___default()(user.account);lodash__WEBPACK_IMPORTED_MODULE_0___default().forEach(user.customScripts,(function(script){var evalScript=["(function(window, document, codio) {",script,"})(window, document, {",'userId: "',user.account,'",','email: "',user.get("details").get("email"),'",','anonymousId: "',idSha1,'",','type: "',user.get("details").get("type"),'"})'].join("");try{eval(evalScript)}catch(e){}}))}app._currentUser=null,Object.defineProperty(app,"currentUser",{get:function(){return this._currentUser},set:function(e){this._currentUser=e,_sentry__WEBPACK_IMPORTED_MODULE_16__.Z.setUser({id:e.account})}}),app.start=async function(e){if(this.running)return this;var t=core_tools__WEBPACK_IMPORTED_MODULE_9__.default.getURLParameter("referrer");if(t&&!core_cookie__WEBPACK_IMPORTED_MODULE_10__.Z.cookie("referrer")){var n=core_tools__WEBPACK_IMPORTED_MODULE_9__.default.url.parse(window.location.href).host;core_cookie__WEBPACK_IMPORTED_MODULE_10__.Z.cookie("referrer",t,{domain:n.split(":")[0],path:"/",expires:30})}disableHistoryWithBackspace(),this.running=!0;var i=this;try{const[t]=await Promise.all([core_account__WEBPACK_IMPORTED_MODULE_8__.Z.getMyAccount(!0),(0,_access_token__WEBPACK_IMPORTED_MODULE_12__.T)()]);(0,_ns__WEBPACK_IMPORTED_MODULE_7__.I)(),t.isAnonymous()&&(window.location="/p/login?externalPath=true&nextPath="+window.location.pathname),i.currentUser=t,t.customScripts&&t.customScripts.length&&executeCustomScripts(t),_hubspot__WEBPACK_IMPORTED_MODULE_19__.j(t),_posthog__WEBPACK_IMPORTED_MODULE_18__.j(i),t.ipConsents&&(window.location="/p/ip-consent-agreement?externalPath=true&nextPath="+window.location.pathname),i.startRouting(e),core_settings__WEBPACK_IMPORTED_MODULE_5__.Z.hotkey.refresh(),core_events__WEBPACK_IMPORTED_MODULE_6__.Z.publish("app:started"),bindSupportLink()}catch({message:e}){lodash__WEBPACK_IMPORTED_MODULE_0___default().includes(e,"Locked")?core_notifications__WEBPACK_IMPORTED_MODULE_11__.Z.locked():lodash__WEBPACK_IMPORTED_MODULE_0___default().includes(e,"User not passed")?window.location="/p/login?externalPath=true&nextPath="+window.location.pathname:core_notifications__WEBPACK_IMPORTED_MODULE_11__.Z.serverError(e)}},app.startRouting=function(e){this.router=new core_router__WEBPACK_IMPORTED_MODULE_4__.Z,this.router.map((function(t){t("/:username/:project").to(e,(function(t){t("/").to({}),t("/:extension/").to(e.extension),t("/:extension/*path").to(e.extension)}))})),this.router.startRouting()},lodash__WEBPACK_IMPORTED_MODULE_0___default().forEach(Object.keys(core_extension__WEBPACK_IMPORTED_MODULE_3__.Z),(function(e){app[e]=core_extension__WEBPACK_IMPORTED_MODULE_3__.Z[e]})),core_events__WEBPACK_IMPORTED_MODULE_6__.Z.subscribe("collaboration:driverUpdated",((e,t)=>{app.collaborationDriverId=t||null})),app._currentError=null,Object.defineProperty(app,"currentError",{get:function(){return this._currentError},set:function(e){this._currentError!==e&&(this._currentError=e,emit.currentErrorUpdated())}});const __WEBPACK_DEFAULT_EXPORT__=app},13302:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>v,jF:()=>b});var i,s=n(96486),a=n.n(s),o=n(76638),r=a().partial(o.Z.request,"SubscriptionManager");function c(){return r("getSubscriptionList")}const l="EXPIRING",d="EXPIRED",u="PAST_DUE",h="NO_SUBSCRIPTION",p="ACTIVE",f=function(e){var t=g(e).status,n=[p,l,u];return a().includes(n,t)};function m(e,t,n){return{status:e,expirationDate:t,nextPaymentDate:n}}const g=function(e){if(e){var t,n=e.expirationTimestamp,i=n?new Date(n):null,s=e.nextPaymentTimestamp,a=s?new Date(s):null;switch(e.state){case"ACTIVE":t=p;break;case"PAST_DUE":t=u;break;case"EXPIRING":t=l;break;default:t=d}return m(t,i,a)}return m(h,null,null)},b=function(){return"eduTrial"},v={api:{getPersonalPlans:function(){return r("getPlans",{customerType:"USER"})},getOrganizationPlans:function(){return r("getPlans",{customerType:"ORGANIZATION"})},invalidateSubscriptionsCache:function(){return i=c()},getCachedSubscriptions:function(){return i||(i=c()),i}},hasUsableSubscription:f,subscriptionStatus:g,hasAnyUsableSubscription:function(e){for(const t of e)if(f(t.subscription))return!0;return!1},getEduPlanId:b}},54565:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(96486),s=n.n(i),a=window.CODIO_CONFIG,o={},r={};o.get=function(e){return e?s().has(a,e)?a[e]:void 0:r};const c=o},54137:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var i=n(52308),s=n.n(i),a={},o=/\+/g;function r(e){return e}function c(e){return decodeURIComponent(e.replace(o," "))}var l=a.cookie=function(e,t,n){if(void 0!==t){if(n=s().extend({},l.defaults,n),null===t&&(n.expires=-1),s().isNumeric(n.expires)){var i=n.expires,a=n.expires=new Date;a.setDate(a.getDate()+i)}return t=l.json?JSON.stringify(t):String(t),document.cookie=[encodeURIComponent(e),"=",l.raw?t:encodeURIComponent(t),n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}for(var o=l.raw?r:c,d=document.cookie.split("; "),u=0,h=d.length;u<h;u++){var p=d[u].split("=");if(o(p.shift())===e){var f=o(p.join("="));return l.json?JSON.parse(f):f}}return null};l.defaults={},a.remove=function(e,t){return null!==a.cookie(e)&&(a.cookie(e,null,t),!0)};const d=a},43553:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(96486),s=n.n(i),a={},o={};a.bind=function(e,t,n){o[t]=o[t]||{},o[t][e]=o[t][e]||[];for(var i=0;i<o[t][e].length;i++)if(o[t][e][i]===n)return null;return o[t][e].push(n),!0},a.one=function(e,t,n){var i=this;return a.bind(e,t,(function s(){n&&n.apply(i,arguments),a.unbind(e,t,s)}))},a.unbind=function(e,t,n){if(o[t]&&o[t][e]&&n){var i=o[t][e].indexOf(n);-1!==i&&o[t][e].splice(i,1)}return o[t]&&o[t][e]&&!n&&(o[t][e].length=0),!0},a.dispatch=function(e,t){if(e){var n=[].slice.call(arguments,2);if(o[t]){var i=s().clone(o[t][e]);if(i)for(var a=0,r=i.length;a<r;a++)i[a].apply(window,n)}}else console.error("Message should be passed")};const r=a},87167:(e,t,n)=>{"use strict";n.d(t,{Zo:()=>i,ZL:()=>Le,yV:()=>Re,yO:()=>C,ZP:()=>je});var i={};n.r(i),n.d(i,{ML:()=>ae,SQ:()=>oe,Hn:()=>ie,e6:()=>ee});var s={};n.r(s),n.d(s,{editor:()=>Ee,emmet:()=>Se});var a=n(49721),o=n(93443),r=n(9380),c=n(45616),l=n(33108),d=n(60674);class u{constructor(){if(this.constructor===u)throw new Error("Cannot construct TextModelBase instances directly.")}getValue(){throw new Error("Abstract Method getValue has no implementation")}setValue(){throw new Error("Abstract Method setValue has no implementation")}getLineContent(){throw new Error("Abstract Method getLineContent has no implementation")}onDidChangeModelContent(){throw new Error("Abstract Method onDidChangeModelContent has no implementation")}isDisposed(){throw new Error("Abstract Method isDisposed has no implementation")}dispose(){throw new Error("Abstract Method dispose has no implementation")}get model(){throw new Error("Abstract Method get model has no implementation")}replaceRange(){throw new Error("Abstract Method replaceRange has no implementation")}pushEditOperations(){throw new Error("Abstract Method pushEditOperations has no implementation")}findNextMatch(){throw new Error("Abstract Method findNextMatch has no implementation")}getPositionAt(){throw new Error("Abstract Method getPositionAt has no implementation")}getLanguageId(){throw new Error("Abstract Method getLanguageId has no implementation")}setEOL(){throw new Error("Abstract Method setEOL has no implementation")}pushEOL(){throw new Error("Abstract Method pushEOL has no implementation")}getLineCount(){throw new Error("Abstract Method getLineCount has no implementation")}findMatches(){throw new Error("Abstract Method findMatches has no implementation")}get uri(){throw new Error("Abstract Method uri has no implementation")}getFullModelRange(){throw new Error("Abstract Method getFullModelRange has no implementation")}getValueInRange(){throw new Error("Abstract Method getValueInRange has no implementation")}getOptions(){throw new Error("Abstract Method getOptions has no implementation")}updateOptions(){throw new Error("Abstract Method updateOptions has no implementation")}getWordAtPosition(){throw new Error("Abstract Method getWordAtPosition has no implementation")}getLinesContent(){throw new Error("Abstract Method getLinesContent has no implementation")}getLineLength(){throw new Error("Abstract Method getLineLength has no implementation")}}const h=u;var p=n(96486),f=n.n(p);const m=JSON.parse('{"editorSettingsChanged":"editor:settings:changed","saveFile":"editor:save:#filename","saveAllFiles":"editor:saveall"}'),g=JSON.parse('{"line_numbers":{"type":"boolean","default":true,"desc":"Show line numbers."},"visible_tabs":{"type":"boolean","default":false,"desc":"Visible tabs."},"smart_indent":{"type":"boolean","default":true,"desc":"Whether to use the context-sensitive indentation that the mode provides (or just indent the same as the line before)."},"font_size":{"default":15,"type":"int","desc":"Font size."},"wrap":{"default":false,"type":"boolean","desc":"Scroll or wrap for long lines."},"tab_size":{"default":4,"type":"int","desc":"Tab size."},"navigate_within_soft_tabs":{"default":null,"type":"boolean","desc":"Navigate within soft tabs."},"highlight_active":{"default":true,"type":"boolean","desc":"Highlight active line."},"ruler":{"default":0,"type":"int","desc":"Show vertical ruler."},"theme":{"default":"default","type":"list","values":{"3024-day":"3024-day","3024-night":"3024-night","ambiance":"ambiance","base16-dark":"base16-dark","base16-light":"base16-light","blackboard":"blackboard","bold":"bold","cobalt":"cobalt","default":"default","dyslexic":"dyslexic","earthsong":"earthsong","eclipse":"eclipse","elegant":"elegant","erlang-dark":"erlang-dark","frontier":"frontier","juicy":"juicy","lesser-dark":"lesser-dark","mbo":"mbo","mellow":"mellow","midnight":"midnight","monokai":"monokai","neat":"neat","night":"night","ocean-dark":"ocean-dark","ocean-light":"ocean-light","paraiso-dark":"paraiso-dark","paraiso-light":"paraiso-light","pastel":"pastel","pastel-on-dark":"pastel-on-dark","peacock":"peacock","rubyblue":"rubyblue","solarized light":"solarized light","solarized dark":"solarized dark","the-matrix":"the-matrix","tomorrow-night-bright":"tomorrow-night-bright","tomorrow-night-eighties":"tomorrow-night-eighties","twilight":"twilight","vibrant-ink":"vibrant-ink","xq-dark":"xq-dark","xq-light":"xq-light","zenburn":"zenburn"},"desc":"Editor theme."},"indent_with_tabs":{"default":false,"type":"boolean","desc":"Use tabs for indentation."},"linting":{"type":"boolean","default":false,"desc":"Enable linting (TypeScript, JavaScript, JSON & CSS)."},"match_brackets":{"type":"boolean","default":true,"desc":"Show matching brackets to be highlighted whenever the cursor is next to them."},"auto_close_brackets":{"type":"boolean","default":true,"desc":"Auto-close brackets and quotes when typed."},"show_trailing_space":{"type":"boolean","default":false,"desc":"Show whitespace."},"continue_comments":{"type":"boolean","default":true,"desc":"Prefix new lines inside C-like block comments with an asterisk when Enter is pressed."},"keymap":{"type":"list","default":"default","desc":"Default key map to use","values":{"default":"default","vim":"vim","emacs":"emacs"}},"automatic_completions":{"type":"boolean","default":true,"desc":"Show completions automatic after 2 symbols types or special symbol used."},"spellcheck":{"type":"boolean","default":true,"desc":"Highlight spell mistakes in markdown files. Only English. Opened files have to be reloaded."},"minimap":{"type":"boolean","default":false,"desc":"Show minimap."}}'),b=JSON.parse('{"key_autocomplete":{"key":{"win":"Ctrl+Space","mac":"Shift+Space"},"desc":"Show auto-completions."},"key_toggleComment":{"key":{"win":"Ctrl+/","mac":"Cmd+/"},"desc":"Toggle comment."},"key_go_line_start":{"key":{"win":"Alt+Left","mac":"Cmd+Left"},"desc":"Go to start of line."},"key_go_line_end":{"key":{"win":"Alt+Right","mac":"Cmd+Right"},"desc":"Go to end of line."},"key_select_all":{"key":{"win":"Ctrl+A","mac":"Cmd+A"},"desc":"Select all."},"key_remove_selected_line":{"key":"Ctrl+Shift+K","desc":"Delete selected or active line."},"key_delete_line":{"key":{"win":"Alt+Shift+K","mac":"Cmd+Delete"},"desc":"Empty line."},"key_del_group_before":{"key":"Ctrl+Backspace","desc":"Delete word before caret."},"key_del_group_after":{"key":"Ctrl+Delete","desc":"Delete word after caret."},"key_del_line_left":{"key":{"win":"Ctrl+Shift+Backspace","mac":"Cmd+Backspace"},"desc":"Delete line before caret."},"key_kill_line":{"key":{"win":"Alt+Shift+Backspace","mac":"Ctrl+K"},"desc":"Delete line after caret."},"key_go_doc_end":{"key":{"win":"Ctrl+End","mac":"Cmd+End"},"desc":"Go to end of document."},"key_find":{"key":{"win":"Ctrl+F","mac":"Cmd+F"},"desc":"Find."},"key_go_doc_start":{"key":{"win":"Ctrl+Home","mac":"Cmd+Up"},"desc":"Go to beginning of document."},"key_go_group_left":{"key":{"win":"Ctrl+Left","mac":"Alt+Left"},"desc":"Go left."},"key_go_group_right":{"key":{"win":"Ctrl+Right","mac":"Alt+Right"},"desc":"Go right"},"key_redo":{"key":{"win":"Ctrl+Y","mac":"Cmd+Y"},"desc":"Redo."},"key_undo":{"key":{"win":"Ctrl+Z","mac":"Cmd+Z"},"desc":"Undo."},"key_indent_less":{"key":{"win":"Ctrl+[","mac":"Cmd+["},"desc":"Indent less."},"key_indent_more":{"key":{"win":"Ctrl+]","mac":"Cmd+]"},"desc":"Indent more"},"key_replace":{"key":{"win":"Shift+Ctrl+F","mac":"Cmd+Alt+F"},"desc":"Replace."},"key_replace_all":{"key":{"win":"Shift+Ctrl+R","mac":"Shift+Cmd+Alt+F"},"desc":"Replace all."},"key_save_single":{"key":{"win":"Ctrl+Shift+Alt+S","mac":"Cmd+Shift+Alt+S"},"desc":"Save current file."},"key_save":{"key":{"win":"Ctrl+Shift+S","mac":"Cmd+Shift+S"},"desc":"Save all open files."},"key_save_all":{"key":{"win":"Ctrl+S","mac":"Cmd+S"},"desc":"Save all open files."},"key_jump_to_line":{"key":{"win":"Alt+G","mac":"Alt+G"},"desc":"Jumps to a specific line."},"key_indentLess":{"key":"Shift+Tab","desc":"Remove indentation."},"key_insertTab":{"key":{"win":"Ctrl+Alt+T","mac":"Cmd+Alt+T"},"desc":"Insert Tab symbol"},"key_toggle:line_numbers":{"desc":"Show line numbers: Toggle."},"key_toggle:visible_tabs":{"desc":"Visible Tabs: Toggle."},"key_toggle:wrap":{"desc":"Word wrap: Toggle."},"key_toggle:highlight_active":{"desc":"Highlight active line: Toggle."},"key_toggle:indent_with_tabs":{"desc":"Use tabs for indentation: Toggle."},"key_toggle:linting":{"desc":"Code linting: Toggle."},"key_toggle:folding":{"desc":"Code folding: Toggle."},"key_toggle:match_brackets":{"desc":"Show matching brackets: Toggle."},"key_toggle:auto_close_brackets":{"desc":"Auto Close brackets: Toggle."},"key_toggle:auto_close_tags_when_opening":{"desc":"Auto close tags on opening: Toggle."},"key_toggle:auto_close_tags_when_closing":{"desc":"Auto close on close: Toggle."},"key_toggle:show_trailing_space":{"desc":"Show trailing whitespace: Toggle."},"key_toggle:continue_comments":{"desc":"Continue comments: Toggle."},"key_toggle:automatic_completions":{"desc":"Automatic Completions: Toggle."},"key_find_next":{"key":"Enter","desc":"Find next.","readonly":true},"key_find_prev":{"key":"Shift+Enter","desc":"Find previous.","readonly":true}}'),v=o.Z.create(m);r.Z.plugin("editor",g),r.Z.hotkey.plugin("editor",b);const y=(()=>{const e=document.createElement("style");return document.head.append(e),t=>e.textContent=t})();let w={};const _=()=>{const e=k();f().isEqual(e,w)||(w=e,v.editorSettingsChanged(e))};o.Z.subscribe("settings:changed",_),o.Z.subscribe("settings:loaded",_);const k=function(){return(e=>{const t=f().toInteger(e.ruler),n=e.font_size>10?e.font_size:10;return y(".codeEditorFontSize { font-size: ".concat(n,"px; }")),{hover:{above:!1},lineNumbersMinChars:2,lineNumbers:e.line_numbers?"on":"off",renderWhitespace:e.visible_tabs?"all":"selection",autoIndent:e.smart_indent?"full":"none",fontSize:n,wordWrap:e.wrap?"on":"off",tabSize:isNaN(e.tab_size)?4:e.tab_size,stickyTabStops:e.navigate_within_soft_tabs,renderLineHighlight:e.highlight_active?"line":"none",rulers:0===t?[]:[{column:t}],theme:e.theme,insertSpaces:!e.indent_with_tabs,folding:!1,keyMap:e.keymap,linting:e.linting,matchBrackets:e.match_brackets?"always":"never",showTrailingSpace:e.show_trailing_space,autoClosingBrackets:e.auto_close_brackets?"languageDefined":"never",quickSuggestions:e.automatic_completions,comments:{ignoreEmptyLines:e.continue_comments,insertSpace:e.continue_comments},spellcheck:e.spellcheck,contextmenu:!0,minimap:{enabled:e.minimap}}})(r.Z.get("editor"))},P={get:k};d.IO.get(l.Ui).updateValues([["files.eol","\n"]]);const C=class extends h{constructor(e,t,n){super(),this._model=c.editor.createModel(e,t,n?c.Uri.file(n):void 0),this._settingsChangeHandler=o.Z.subscribe("editor:settings:changed",this._onSettingsChanged.bind(this)),this._applyOptions()}_onSettingsChanged(e,t){!this._model.isAttachedToEditor()&&!this._model.isDisposed()&&this._applyOptions(t)}_applyOptions(e){void 0===e&&(e=P.get()),this._model&&this._model.updateOptions({tabSize:e.tabSize,insertSpaces:e.insertSpaces})}getValue(){return this._model.getValue()}setValue(e){this._model.setValue(e)}getLineContent(e){return this._model.getLineContent(e)}onDidChangeModelContent(e){return this._model.onDidChangeContent(e)}isDisposed(){return this._model.isDisposed()}dispose(){return this._settingsChangeHandler&&o.Z.unsubscribe(this._settingsChangeHandler),this._settingsChangeHandler=null,this._model.dispose()}get model(){return this._model}replaceRange(e,t,n){n=n||t,this._model.pushEditOperations([],[{range:{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:n.lineNumber,endColumn:n.column},text:e}],ie.dropSelectionCursorStateComputer())}pushEditOperations(e,t,n){this._model.pushEditOperations(e,t,n)}findNextMatch(e,t,n,i,s,a){return this._model.findNextMatch(e,t,n,i,s,a)}getPositionAt(e){return this._model.getPositionAt(e)}getLanguageId(){return this._model.getLanguageId()}setEOL(e){this._model.setEOL(e)}pushEOL(e){this._model.pushEOL(e)}getLineCount(){return this._model.getLineCount()}findMatches(e,t,n,i,s,a,o){return this._model.findMatches(e,t,n,i,s,a,o)}get uri(){return this._model.uri}getFullModelRange(){return this._model.getFullModelRange()}getValueInRange(e){return this._model.getValueInRange(e)}getOptions(){return this._model.getOptions()}updateOptions(e){!this._model.isDisposed()&&this._model.updateOptions(e)}getWordAtPosition(e){return this._model.getWordAtPosition(e)}getLinesContent(){return this._model.getLinesContent()}getLineLength(e){return this._model.getLineLength(e)}};var x=n(52308),E=n.n(x),S=n(46447),I=n(23238);class A{constructor(){if(this.constructor===A)throw new Error("Cannot construct EditorBase instances directly.")}getEditor(){throw new Error("getEditor not implemented.")}setPlaceholder(){throw new Error("setPlaceholder not implemented.")}runCommand(){throw new Error("runCommand not implemented.")}scrollToLine(){throw new Error("scrollToLine not implemented.")}scrollToPosition(){throw new Error("scrollToPosition not implemented.")}setScrollTop(){throw new Error("setScrollTop not implemented.")}setScrollPosition(){throw new Error("setScrollPosition not implemented.")}scrollIntoView(){throw new Error("scrollIntoView not implemented.")}close(){throw new Error("close not implemented.")}setOption(){throw new Error("setOption not implemented.")}getOption(){throw new Error("getOption not implemented.")}connect(){throw new Error("connect not implemented.")}cleanup(){throw new Error("cleanup not implemented.")}isVisible(){throw new Error("isVisible not implemented.")}onDidFocus(){throw new Error("onDidFocus not implemented.")}hasFocus(){throw new Error("hasFocus not implemented.")}focus(){throw new Error("focus not implemented.")}onDidChangeModelContent(){throw new Error("onDidChangeModelContent not implemented.")}onDidScrollChange(){throw new Error("onDidScrollChange not implemented.")}onDidChangeModel(){throw new Error("onDidChangeModel not implemented.")}onDidChangeCursorSelection(){throw new Error("onDidChangeCursorSelection not implemented.")}getPosition(){throw new Error("getPosition not implemented.")}setPosition(){throw new Error("setPosition not implemented.")}getLineCount(){throw new Error("getLineCount not implemented.")}replaceRange(){throw new Error("replaceRange not implemented.")}saveViewState(){throw new Error("saveViewState not implemented.")}restoreViewState(){throw new Error("restoreViewState not implemented.")}onDidChangeCursorPosition(){throw new Error("onDidChangeCursorPosition not implemented.")}getSelection(){throw new Error("getSelection not implemented.")}setModel(){throw new Error("setModel not implemented.")}getModel(){throw new Error("getModel not implemented.")}setModelLanguage(){throw new Error("setModelLanguage not implemented.")}getLineContent(){throw new Error("getLineContent not implemented.")}layout(){throw new Error("layout not implemented.")}getLayoutInfo(){throw new Error("getLayoutInfo not implemented.")}getScrollLeft(){throw new Error("getScrollLeft not implemented.")}getScrollTop(){throw new Error("getScrollTop not implemented.")}getScrollWidth(){throw new Error("getScrollWidth not implemented.")}getScrollHeight(){throw new Error("getScrollHeight not implemented.")}getTopForLineNumber(){throw new Error("getTopForLineNumber not implemented.")}getTopForPosition(){throw new Error("getTopForPosition not implemented.")}getOffsetForColumn(){throw new Error("getOffsetForColumn not implemented.")}getContent(){throw new Error("getContent not implemented.")}getVisibleRanges(){throw new Error("getVisibleRanges not implemented.")}findNextMatch(){throw new Error("findNextMatch not implemented.")}deltaDecorations(){throw new Error("deltaDecorations not implemented.")}highlight(){throw new Error("highlight not implemented.")}addContentWidget(){throw new Error("addContentWidget not implemented.")}removeContentWidget(){throw new Error("removeContentWidget not implemented.")}layoutContentWidget(){throw new Error("layoutContentWidget not implemented.")}addOverlayWidget(){throw new Error("addOverlayWidget not implemented.")}removeOverlayWidget(){throw new Error("removeOverlayWidget not implemented.")}layoutOverlayWidget(){throw new Error("layoutOverlayWidget not implemented.")}setModelMarkers(){throw new Error("setModelMarkers not implemented.")}changeViewZones(){throw new Error("changeViewZones not implemented.")}getLineHandle(){throw new Error("getLineHandle not implemented.")}getValueInRange(){throw new Error("getValueInRange not implemented.")}onMouseMove(){throw new Error("onMouseMove not implemented.")}onMouseLeave(){throw new Error("onMouseLeave not implemented.")}onMouseDown(){throw new Error("onMouseDown not implemented.")}getSelections(){throw new Error("getSelections not implemented.")}getLineDecorations(){throw new Error("getLineDecorations not implemented.")}getContribution(){throw new Error("getContribution not implemented.")}addAction(){throw new Error("addAction not implemented.")}setHiddenAreas(){throw new Error("setHiddenAreas not implemented.")}hasTextFocus(){throw new Error("hasTextFocus not implemented.")}createDecorationsCollection(){throw new Error("createDecorationsCollection not implemented.")}}const T=A;c.languages.register({id:"codioSettings"}),c.languages.register({id:"codio-search"}),c.languages.setMonarchTokensProvider("codio-search",{defaultToken:"",tokenPostfix:".codio.search",symbols:/[=><!~?:&|+\-*\/\^%]+/,tokenizer:{root:[[/^(\S.*):$/,{token:"keyword",next:"@search_result"}]],search_result:[[/^(\s*)(\d+)(:|-)/,"number"],[/^\s*$/,"@rematch","@pop"]]}});var j=n(72678);const Z={cobol:["cobol","cbl",".cob",".cpy"],d:["d"],erlang:["erl","hrl"],fortran:["f90","f95","f03","f","for"],groovy:["groovy"],haskell:["hl","hsl","hs"]};Object.keys(Z).forEach((e=>{n(5989)("./".concat(e)).then((t=>{c.languages.register({id:e,extensions:Z[e]}),(0,j.registerRulesForLanguage)(e,new t.default)}))}));const O=n(22190),N=(e,t)=>{const n=e.getColorTheme()._tokenTheme._match(t);return n._fontStyle>0||n._foreground>1||n._background>2},D=(e,t)=>{let n="";for(let e=t[0].length-1;e>=0;e-=1){const i=t[0][e];if("."===i)break;n=i+n}for(let i=t.length-1;i>=0;i-=1){const s=t[i];for(let t=s.length-1;t>=0;t-=1){if("."===s[t]){const i=s.slice(0,t);if(N(e,i+"."+n))return i+"."+n;if(N(e,i))return i}}}return""};class M{constructor(e){this._ruleStack=e}get ruleStack(){return this._ruleStack}clone(){return new M(this._ruleStack)}equals(e){return!!(e&&e instanceof M&&e===this&&e._ruleStack===this._ruleStack)}}var R=n(44156);const L=new Map;L.set("bat","source.batchfile"),L.set("clojure","source.clojure"),L.set("coffeescript","source.coffee"),L.set("c","source.c"),L.set("cpp","source.cpp"),L.set("csharp","source.cs"),L.set("css","source.css"),L.set("dart","source.dart"),L.set("dockerfile","source.dockerfile"),L.set("fsharp","source.fsharp"),L.set("ocaml","source.fsharp"),L.set("go","source.go"),L.set("groovy","source.groovy"),L.set("handlebars","text.html.handlebars"),L.set("html","text.html.basic"),L.set("ini","source.ini"),L.set("java","source.java"),L.set("javascript","source.js"),L.set("json","source.json"),L.set("julia","source.julia"),L.set("less","source.css.less"),L.set("lua","source.lua"),L.set("objective-c","source.objc"),L.set("perl","source.perl"),L.set("php","source.php"),L.set("powershell","source.powershell"),L.set("pug","source.pug"),L.set("python","source.python"),L.set("r","source.r"),L.set("razor","text.html.cshtml"),L.set("ruby","source.ruby"),L.set("rust","source.rust"),L.set("scss","source.css.scss"),L.set("shell","source.shell"),L.set("sql","source.sql"),L.set("swift","source.swift"),L.set("typescript","source.ts"),L.set("vb","source.asp.vb.net"),L.set("xml","text.xml"),L.set("yaml","source.yaml"),L.set("asm","source.asm.x86_64"),L.set("codioSettings","source.ini");const F={"source.batchfile":"batchfile","source.c":"c","source.clojure":"clojure","source.coffee":"coffeescript","source.cpp":"cpp","source.cs":"csharp","source.css":"css","source.dart":"dart","source.dockerfile":"docker","source.fsharp":"fsharp","source.go":"go","source.groovy":"groovy","text.html.handlebars":"Handlebars","text.html.basic":"html","source.ini":"ini","source.java":"java","source.js":"JavaScript","source.json":"JSON","source.julia":"julia","source.css.less":"less","source.lua":"lua","text.html.markdown":"markdown","source.objc":"objective-c","source.perl":"perl","source.php":"php","source.powershell":"powershell","text.pug":"pug","source.python":"MagicPython","source.r":"r","text.html.cshtml":"cshtml","source.ruby":"ruby","source.rust":"rust","source.css.scss":"scss","source.shell":"shell-unix-bash","source.sql":"sql","source.swift":"swift","source.ts":"TypeScript","source.asp.vb.net":"asp-vb-net","text.xml":"xml","source.yaml":"yaml","source.asm.x86_64":"asm"};var B=n(10297);const U=n(22190),q=n(35930),H=d.IO.get(R.Z);let G;const W=async()=>{if(!G){const e=await fetch(B);await q.loadWASM(e);const t={createOnigScanner:e=>new q.OnigScanner(e),createOnigString:e=>new q.OnigString(e)};G=new U.Registry({onigLib:t,loadGrammar:e=>{let t;if(K(L,e)){const i=F[e];t=n(57293)("./".concat(i,".tmLanguage.json")).then((e=>e.default))}else t=V(e);return t}})}return G},z={name:"Empty grammar",scopeName:"",patterns:[]},V=async e=>({...z,scopeName:e}),K=(e,t)=>Array.from(e.keys()).find((n=>e.get(n)===t)),J=async e=>{const t=new Map;t.set(e,L.get(e));try{const e=await W();await function(e,t,n,i){return Promise.all(Array.from(n.keys()).map((async s=>{const a=await t.loadGrammar(n.get(s));e.languages.setTokensProvider(s,{getInitialState:()=>new M(O.INITIAL),tokenize:(e,t)=>{const n=a.tokenizeLine(e,t.ruleStack);return{endState:new M(n.ruleStack),tokens:n.tokens.map((e=>({...e,scopes:i?D(i,e.scopes):e.scopes[e.scopes.length-1]})))}}})})))}(c,e,t,H)}catch{}};Array.from(L.keys()).forEach((e=>{c.languages.onLanguage(e,(()=>f().defer(J.bind(null,e))))})),c.languages.register({id:"ocaml",extensions:[".ml",".mli",".mll",".mly"],aliases:["ocaml","oCaml","Objective Caml"],mimetypes:["text/x-ocaml"]}),c.languages.register({id:"asm",aliases:["x86 and x86_64 Assembly","asm-intel-x86-generic"],extensions:[".asm",".nasm",".yasm",".inc",".s"]}),c.languages.register({id:"elm",aliases:["Elm","elm"],extensions:[".elm"]}),c.languages.register({id:"lisp",aliases:["Lisp","lisp"],extensions:[".lisp",".cl",".asd",".ros",".lsp",".el",".fnl"]});var Y=n(49989);const Q="codio.custom.action",X={"editor:key_autocomplete":"editor.action.triggerSuggest","editor:key_toggleComment":"editor.action.commentLine","editor:key_go_line_start":Q,"editor:key_go_line_end":Q,"editor:key_select_all":"editor.action.selectAll","editor:key_remove_selected_line":Q,"editor:key_delete_line":"editor.action.deleteLines","editor:key_del_group_before":"deleteWordLeft","editor:key_del_group_after":"deleteWordRight","editor:key_del_line_left":"deleteAllLeft","editor:key_kill_line":"deleteAllRight","editor:key_go_doc_end":"cursorBottom","editor:key_find":"actions.find","editor:key_find_next":"editor.action.nextMatchFindAction","editor:key_go_doc_start":"cursorTop","editor:key_go_group_left":"cursorWordLeft","editor:key_go_group_right":"cursorWordEndRight","editor:key_redo":"redo","editor:key_undo":"undo","editor:key_indent_less":"editor.action.outdentLines","editor:key_indent_more":"editor.action.indentLines","editor:key_replace":"editor.action.startFindReplaceAction","editor:key_find_prev":"editor.action.previousMatchFindAction","editor:key_replace_all":"editor.action.startFindReplaceAction","editor:key_save_single":"","editor:key_save":"","editor:key_save_all":"","editor:key_jump_to_line":"editor.action.gotoLine","editor:key_indentLess":"editor.action.outdentLines","editor:key_insertTab":Q,"emmet:expand_abbreviation":Q,"emmet:expand_abbreviation_with_tab":Q,"emmet:match_pair_outward":Q,"emmet:match_pair_inward":Q,"emmet:wrap_with_abbreviation":Q,"emmet:next_edit_point":Q,"emmet:prev_edit_point":Q,"emmet:merge_lines":Q,"emmet:split_join_tag":Q,"emmet:remove_tag":Q,"emmet:evaluate_math_expression":Q,"emmet:increment_number_by_1":Q,"emmet:decrement_number_by_1":Q,"emmet:increment_number_by_01":Q,"emmet:decrement_number_by_01":Q,"emmet:increment_number_by_10":Q,"emmet:decrement_number_by_10":Q,"emmet:select_next_item":Q,"emmet:select_previous_item":Q,"emmet:reflect_css_value":Q},$={Ctrl:c.KeyMod.CtrlCmd,Cmd:c.KeyMod.CtrlCmd,Shift:c.KeyMod.Shift,Alt:c.KeyMod.Alt,WinCtrl:c.KeyMod.WinCtrl,Unknown:c.KeyCode.Unknown,Backspace:c.KeyCode.Backspace,Tab:c.KeyCode.Tab,Enter:c.KeyCode.Enter,PauseBreak:c.KeyCode.PauseBreak,CapsLock:c.KeyCode.CapsLock,Esc:c.KeyCode.Escape,Space:c.KeyCode.Space,PageUp:c.KeyCode.PageUp,PageDown:c.KeyCode.PageDown,End:c.KeyCode.End,Home:c.KeyCode.Home,Left:c.KeyCode.LeftArrow,Up:c.KeyCode.UpArrow,Right:c.KeyCode.RightArrow,Down:c.KeyCode.DownArrow,Insert:c.KeyCode.Insert,Delete:c.KeyCode.Delete,0:c.KeyCode.Digit0,1:c.KeyCode.Digit1,2:c.KeyCode.Digit2,3:c.KeyCode.Digit3,4:c.KeyCode.Digit4,5:c.KeyCode.Digit5,6:c.KeyCode.Digit6,7:c.KeyCode.Digit7,8:c.KeyCode.Digit8,9:c.KeyCode.Digit9,A:c.KeyCode.KeyA,B:c.KeyCode.KeyB,C:c.KeyCode.KeyC,D:c.KeyCode.KeyD,E:c.KeyCode.KeyE,F:c.KeyCode.KeyF,G:c.KeyCode.KeyG,H:c.KeyCode.KeyH,I:c.KeyCode.KeyI,J:c.KeyCode.KeyJ,K:c.KeyCode.KeyK,L:c.KeyCode.KeyL,M:c.KeyCode.KeyM,N:c.KeyCode.KeyN,O:c.KeyCode.KeyO,P:c.KeyCode.KeyP,Q:c.KeyCode.KeyQ,R:c.KeyCode.KeyR,S:c.KeyCode.KeyS,T:c.KeyCode.KeyT,U:c.KeyCode.KeyU,V:c.KeyCode.KeyV,W:c.KeyCode.KeyW,X:c.KeyCode.KeyX,Y:c.KeyCode.KeyY,Z:c.KeyCode.KeyZ,Meta:c.KeyCode.Meta,ContextMenu:c.KeyCode.ContextMenu,F1:c.KeyCode.F1,F2:c.KeyCode.F2,F3:c.KeyCode.F3,F4:c.KeyCode.F4,F5:c.KeyCode.F5,F6:c.KeyCode.F6,F7:c.KeyCode.F7,F8:c.KeyCode.F8,F9:c.KeyCode.F9,F10:c.KeyCode.F10,F11:c.KeyCode.F11,F12:c.KeyCode.F12,F13:c.KeyCode.F13,F14:c.KeyCode.F14,F15:c.KeyCode.F15,F16:c.KeyCode.F16,F17:c.KeyCode.F17,F18:c.KeyCode.F18,F19:c.KeyCode.F19,F20:c.KeyCode.F20,F21:c.KeyCode.F21,F22:c.KeyCode.F22,F23:c.KeyCode.F23,F24:c.KeyCode.F24,NumLock:c.KeyCode.NumLock,ScrollLock:c.KeyCode.ScrollLock,";":c.KeyCode.Semicolon,"=":c.KeyCode.Equal,",":c.KeyCode.Comma,"-":c.KeyCode.Minus,".":c.KeyCode.Period,"/":c.KeyCode.Slash,"`":c.KeyCode.Backquote,"[":c.KeyCode.BracketLeft,"\\":c.KeyCode.Backslash,"]":c.KeyCode.BracketRight,"'":c.KeyCode.Quote,OEM_8:c.KeyCode.OEM_8,IntlBackslash:c.KeyCode.IntlBackslash,NUMPAD_0:c.KeyCode.Numpad0,NUMPAD_1:c.KeyCode.Numpad1,NUMPAD_2:c.KeyCode.Numpad2,NUMPAD_3:c.KeyCode.Numpad3,NUMPAD_4:c.KeyCode.Numpad4,NUMPAD_5:c.KeyCode.Numpad5,NUMPAD_6:c.KeyCode.Numpad6,NUMPAD_7:c.KeyCode.Numpad7,NUMPAD_8:c.KeyCode.Numpad8,NUMPAD_9:c.KeyCode.Numpad9,NUMPAD_MULTIPLY:c.KeyCode.NumpadMultiply,NUMPAD_ADD:c.KeyCode.NumpadAdd,NUMPAD_SEPARATOR:c.KeyCode.NUMPAD_SEPARATOR,NUMPAD_SUBTRACT:c.KeyCode.NumpadSubtract,NUMPAD_DECIMAL:c.KeyCode.NumpadDecimal,NUMPAD_DIVIDE:c.KeyCode.NumpadDivide,IN_COMPOSITION:c.KeyCode.KEY_IN_COMPOSITION,ABNT_C1:c.KeyCode.ABNT_C1,ABNT_C2:c.KeyCode.ABNT_C2,AudioVolumeMute:c.KeyCode.AudioVolumeMute,AudioVolumeUp:c.KeyCode.AudioVolumeUp,AudioVolumeDown:c.KeyCode.AudioVolumeDown,BrowserSearch:c.KeyCode.BrowserSearch,BrowserHome:c.KeyCode.BrowserHome,BrowserBack:c.KeyCode.BrowserBack,BrowserForward:c.KeyCode.BrowserForward,MediaTrackNext:c.KeyCode.MediaTrackNext,MediaTrackPrevious:c.KeyCode.MediaTrackPrevious,MediaStop:c.KeyCode.MediaStop,MediaPlayPause:c.KeyCode.MediaPlayPause,LaunchMediaPlayer:c.KeyCode.LaunchMediaPlayer,LaunchMail:c.KeyCode.LaunchMail,LaunchApp2:c.KeyCode.LaunchApp2},ee={getStartPosition:e=>e.getStartPosition(),getEndPosition:e=>e.getEndPosition(),isEmpty:e=>e.isEmpty(),fromPositions:(e,t)=>c.Range.fromPositions(e,t),containsPosition:(e,t)=>c.Range.containsPosition(e,t),areIntersectingOrTouching:(e,t)=>c.Range.areIntersectingOrTouching(e,t)};var te=n(77277);const ne={detectLanguage:(e,t)=>{try{let n=c.editor.createModel(e,void 0,c.Uri.file(t));const i=n.getLanguageId();return n.dispose(),n=null,i}catch(e){return"plaintext"}},dropSelectionCursorStateComputer:()=>e=>e.map((e=>{const{endColumn:t,endLineNumber:n}=e.range;return new c.Selection(n,t,n,t)})),findMatchesByRegex:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Number.MAX_SAFE_INTEGER;const o=e.model;return i=i||o.getFullModelRange(),te.pM._doFindMatchesMultiline(o,i,new te.sz(s,t),n,a)}},ie=ne,se={setModelLanguage:(e,t)=>{c.editor.setModelLanguage(e.model,t)},removeAllMarkers:e=>{c.editor.removeAllMarkers(e)},addKeybindingRules:e=>c.editor.addKeybindingRules(e)},ae=se,oe={register:(e,t,n,i)=>{c.languages.register({id:e,extensions:t,aliases:n,mimetypes:i})},registerCompletionItemProvider:(e,t,n)=>c.languages.registerCompletionItemProvider(e,{triggerCharacters:t,provideCompletionItems:n}),registerHoverProvider:(e,t)=>c.languages.registerHoverProvider(e,{provideHover:t}),getJsonDiagnosticsOptions:()=>c.languages.json.jsonDefaults.diagnosticsOptions,updateJsonDiagnosticsOptions:e=>{c.languages.json.jsonDefaults.setDiagnosticsOptions({...c.languages.json.jsonDefaults.diagnosticsOptions,...e})},createWordRegex:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="(-?\\d*\\.\\d\\w*)|([^";for(const n of"`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?")e.indexOf(n)>=0||(t+="\\"+n);return t+="\\s]+)",new RegExp(t,"g")},getLanguageConfiguration:e=>{const t=c.languages.getLanguages().find((t=>{let{id:n}=t;return n===e}));return t&&t.loader?new Promise(((e,n)=>{t.loader().then((t=>e(t)),n)})):Promise.resolve({conf:null,language:null})}};var re=n(1432);const ce=["ide:key_esc","emmet:expand_abbreviation_with_tab"],le=["editor:key_find_next","editor:key_find_prev"],de=e=>{if(1===e.chords.length)return ue(e.chords[0]);if(2===e.chords.length){const t=ue(e.chords[0]);return ue(e.chords[1])<<16|t}throw"Can not decode monaco editor keybinding"},ue=e=>{const t=[];return e.ctrlKey&&t.push(2===re.OS?$.WinCtrl:$.Ctrl),e.metaKey&&t.push(2===re.OS?$.Ctrl:$.WinCtrl),e.shiftKey&&t.push($.Shift),e.altKey&&t.push($.Alt),t.push(e.keyCode),f().reduce(t,((e,t)=>e|t),0)},he=e=>ae.addKeybindingRules(e),pe=e=>e.split("-").map((e=>(e=2===re.OS&&"Ctrl"===e?"WinCtrl":e,$[e]))).reduce(((e,t)=>e|t)),fe=e=>!!X[e],me=e=>X[e]&&X[e]===Q,ge=e=>{const t=X[e];return t&&!me(e)?t:"codio.".concat(e)};let be;const ve=f().debounce((()=>{const e=r.Z.hotkey.getCompiledInfo(),t=f()(e).filter((e=>{const t="".concat(e.plugin,":").concat(e.command);return fe(t)&&!me(t)&&!(e=>le.includes(e))(t)})).map((e=>{const t="".concat(e.plugin,":").concat(e.command),n=pe(e.shortcut);return{command:ge(t),keybinding:n}})).value();be=he(t)}).bind(void 0),1e3);(()=>{const e=f().omit(X,le),t=f().keyBy(e,(e=>e)),n=f()(Y.W.getDefaultKeybindings()).filter((e=>t[e.command])).map((e=>{let{keybinding:t}=e;return{command:null,keybinding:de(t)}})).value();he(n)})(),o.Z.subscribe("settings:hotkey:updated",(()=>{be&&be.dispose(),be=null,f().defer((()=>ve()))}));const ye=class{constructor(e,t){this._model=e,this._lineNumber=t,this._currentLineNumber=t,this._onChangeContentDisposableHandler=this._model.onDidChangeContent(this._onChangeContent.bind(this))}_originalLineChanged(){this._currentLineNumber=null,this._unbind()}_onChangeContent(e){if(e.isFlush)return this._originalLineChanged();for(let t=0;t<e.changes.length;t++){const n=e.changes[t];if(n.range.startLineNumber>this._currentLineNumber)continue;if(n.range.startLineNumber===this._currentLineNumber||n.range.startLineNumber<this._currentLineNumber&&n.range.endLineNumber>=this._currentLineNumber){this._originalLineChanged();break}const i=n.range.endLineNumber-n.range.startLineNumber+1,s=n.text.split("\n").length;this._currentLineNumber+=s-i}}getLineNumber(){return this._currentLineNumber}_unbind(){this._onChangeContentDisposableHandler&&this._onChangeContentDisposableHandler.dispose(),this._onChangeContentDisposableHandler=null}destroy(){this._unbind(),this._model=null}},we=[],_e=async(e,t)=>{t=(e=>e.replace(/\s+/g,"-").toLowerCase())(t);const i=e.getContainerDomNode();await(async e=>{if(!we.includes(e))return we.push(e),n(85520)("./".concat(e,".json")).then((t=>{c.editor.defineTheme(e,t)})).catch((()=>{}))})(t),i.classList.remove(...we),"dyslexic"===t?e.updateOptions({fontFamily:'"OpenDyslexic Mono", monospace'}):e.updateOptions({fontFamily:'"Source Code Pro", Monaco, Menlo, Consolas, "Courier New", monospace'}),i.classList.add(t),document.fonts&&document.fonts.ready&&f().isFunction(document.fonts.ready.then)?document.fonts.ready.then((()=>{c.editor.remeasureFonts()})):c.editor.remeasureFonts(),c.editor.setTheme(t)},ke=f().debounce((e=>{c.languages.typescript.javascriptDefaults.setDiagnosticsOptions({...c.languages.typescript.javascriptDefaults.getDiagnosticsOptions(),noSemanticValidation:!0,noSyntaxValidation:!0,noSuggestionDiagnostics:!0}),c.languages.typescript.typescriptDefaults.setDiagnosticsOptions({...c.languages.typescript.typescriptDefaults.getDiagnosticsOptions(),noSemanticValidation:!e,noSyntaxValidation:!e,noSuggestionDiagnostics:!e}),c.languages.css.cssDefaults.setOptions({...c.languages.css.cssDefaults.options,validate:e}),c.languages.css.lessDefaults.setOptions({...c.languages.css.lessDefaults.options,validate:e}),c.languages.css.scssDefaults.setOptions({...c.languages.css.scssDefaults.options,validate:e}),c.languages.json.jsonDefaults.setDiagnosticsOptions({...c.languages.json.jsonDefaults.diagnosticsOptions,validate:e})}),100);var Pe=n(31957);const Ce=o.Z.create(m),xe=()=>{Ce.saveAllFiles()};o.Z.subscribe("command:editor:key_save_single",(()=>{const e=a.default.ide.panels.focus.activeTab();e.filename||e.extension.then((e=>{f().isFunction(e.getFile)&&Ce.saveFile({filename:e.getFile()})})),Ce.saveFile({filename:e.filename})})),o.Z.subscribe("command:editor:key_save",xe),o.Z.subscribe("command:editor:key_save_all",xe);const Ee={key_go_line_start:e=>{const t={lineNumber:e.getPosition().lineNumber,column:1};e.setPosition(t),e.revealPosition(t)},key_go_line_end:e=>{const t=e.getPosition(),n=e.getModel().getLineMaxColumn(t.lineNumber),i={lineNumber:t.lineNumber,column:n};e.setPosition(i),e.revealPosition(i)},key_insertTab:e=>{const t=e.getSelections(),n=[];if(0===t.length){const t=e.getPosition();n.push({range:{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:t.lineNumber,endColumn:t.column},text:"\t"})}else t.forEach((e=>n.push({range:e,text:"\t"})));e.executeEdits("custom-command",n,ie.dropSelectionCursorStateComputer())},key_remove_selected_line:e=>{const t=e.getSelections().pop();t&&(t.startColumn=1,t.endColumn=e.getModel().getLineMaxColumn(t.endLineNumber),t.endLineNumber<e.getModel().getLineCount()&&(t.endLineNumber+=1,t.endColumn=1),e.getModel().pushEditOperations([],[{range:t,text:""}],ie.dropSelectionCursorStateComputer()))}},Se={expand_abbreviation:Pe.Nw.expandAction,expand_abbreviation_with_tab:{run:Pe.Nw.expandAction,precondition:"hasEmmetAbbreviation"},match_pair_outward:Pe.Nw.balanceActionOutward,match_pair_inward:Pe.Nw.balanceActionInward,wrap_with_abbreviation:Pe.Nw.wrapWithAbbreviationAction,next_edit_point:e=>Pe.Nw.goToEditPointAction(e,1),prev_edit_point:e=>Pe.Nw.goToEditPointAction(e,-1),merge_lines:Pe.Nw.mergeLines,split_join_tag:Pe.Nw.splitJoinTagAction,remove_tag:Pe.Nw.removeTagAction,evaluate_math_expression:Pe.Nw.evaluateMathAction,increment_number_by_1:e=>Pe.Nw.incrementNumberAction(e,1),decrement_number_by_1:e=>Pe.Nw.incrementNumberAction(e,-1),increment_number_by_01:e=>Pe.Nw.incrementNumberAction(e,.1),decrement_number_by_01:e=>Pe.Nw.incrementNumberAction(e,-.1),increment_number_by_10:e=>Pe.Nw.incrementNumberAction(e,10),decrement_number_by_10:e=>Pe.Nw.incrementNumberAction(e,-10),select_next_item:e=>Pe.Nw.selectItemAction(e,!1),select_previous_item:e=>Pe.Nw.selectItemAction(e,!0),reflect_css_value:Pe.Nw.reflectCssValue};const Ie=function(e,t){if(!e)return;if(function(e){e.deltaDecorations(e.highlightMarkers||[],[]),e.highlightMarkers=[]}(e),!e||f().isUndefined(t)||f().isUndefined(t.ref)||0===t.ref.length)return;const n=function(e,t){const n=parseInt(e,10);if(f().isNaN(n)){const n=t.findNextMatch(e,{lineNumber:1,column:1});return n?n.range.startLineNumber:null}return n}(t.ref,e);if(null===n)return;!function(e,t,n){if(e){const i=Math.max(1,t),s=Math.min(e.getLineCount(),i+n-1);let a=[],o=[];i>1&&(a=e.deltaDecorations([],[{range:ee.fromPositions({lineNumber:1,column:1},{lineNumber:i-1,column:1}),options:{isWholeLine:!0,inlineClassName:"code-highlight-hide"}}])),s<e.getLineCount()&&(o=e.deltaDecorations([],[{range:ee.fromPositions({lineNumber:s+1,column:1},{lineNumber:e.getLineCount(),column:1}),options:{isWholeLine:!0,inlineClassName:"code-highlight-hide"}}])),e.highlightMarkers=[...a,o],e.setPosition({lineNumber:i,column:1}),e.scrollIntoView({lineNumber:i,column:1},{lineNumber:s,column:1})}}(e,n,t.count||1)};const Ae=class{constructor(e,t){this._editor=e,this._text=t,this._toDispose=[this._editor.onDidChangeModelContent((()=>this._redrawPlaceholder())),this._editor.onDidChangeModel((()=>this._redrawPlaceholder())),this._editor.onDidChangeConfiguration((e=>{this._widget&&e.hasChanged(c.editor.EditorOption.fontInfo)&&this._redrawPlaceholder()}))],this._redrawPlaceholder()}_redrawPlaceholder(){this._removePlaceholder(),this._editor.getValue()||this._addPlaceholder()}_addPlaceholder(){if(!this._text)return;const e=this._editor.getOption(c.editor.EditorOption.fontSize),t=this._editor.getOption(c.editor.EditorOption.lineHeight),n=this._text;this._widget={domNode:null,getId:function(){return"monaco.editor.placeholder"},getDomNode:function(){return this.domNode||(this.domNode=document.createElement("div"),this.domNode.style.width="max-content",this.domNode.style.pointerEvents="none",this.domNode.style.opacity=.5,this.domNode.style.fontSize="".concat(e,"px"),this.domNode.style.lineHeight="".concat(t,"px"),this.domNode.innerHTML=n),this.domNode},getPosition:function(){return{position:{lineNumber:1,column:1},preference:[0]}},suppressMouseDown:!1},this._editor.addContentWidget(this._widget)}_removePlaceholder(){this._widget&&this._editor.removeContentWidget(this._widget),this._widget=null}setText(e){this._text=e,this._redrawPlaceholder()}dispose(){this._removePlaceholder(),this._toDispose&&(this._toDispose.forEach((e=>e.dispose())),this._toDispose=null),this._editor=null}};const Te=class{constructor(e){this._editor=e,this._hasEmmetAbbreviation=e.createContextKey("hasEmmetAbbreviation",!1),this._bindEvents(),this._updateHasEmmetAbbreviation()}_bindEvents(){this._events=[this._editor.onDidChangeCursorPosition(this._onDidChangeCursorPositionUpdate.bind(this)),this._editor.onDidChangeModel(this._onDidChangeModelUpdate.bind(this)),this._editor.onDidChangeModelContent(this._onDidChangeModelContentUpdate.bind(this))]}_onDidChangeCursorPositionUpdate(){this._updateHasEmmetAbbreviation()}_onDidChangeModelUpdate(){this._updateHasEmmetAbbreviation()}_onDidChangeModelContentUpdate(){this._updateHasEmmetAbbreviation()}_updateHasEmmetAbbreviation(){const e=!!this._editor.getModel()&&Pe._y.hasAbbreviation(this._editor);this._hasEmmetAbbreviation.set(e)}dispose(){this._editor=null,this._hasEmmetAbbreviation=null,this._events.forEach((e=>e.dispose()))}};window.monaco=c;const je=class extends T{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this._runtimeOptions=n,this._editorContainer=E()('<div class="monaco-editor-container"/>'),e&&e.append(this._editorContainer),this._debounceHotkeyChanged=f().debounce(this._onHotkeysChanged.bind(this),500),this._createEditor(),this._settingsChangeHandler=o.Z.subscribe("editor:settings:changed",this._onSettingsChanged.bind(this)),this._hotkeysChangeHandler=o.Z.subscribe("settings:hotkey:updated",this._debounceHotkeyChanged),this._disposableActions=[]}_createEditor(){this._editor=c.editor.create(this._editorContainer[0]),this._placeholder=new Ae(this._editor,""),this._preconditions=new Te(this._editor),this._applyOptions(),this._debounceHotkeyChanged(),this._bindKeyDown()}getEditor(){return this._editor}setPlaceholder(e){this._placeholder.setText(e)}_bindKeyDown(){this._onKeyDownDisposable=this._editor.onKeyDown((e=>{const{keyCode:t,ctrlKey:n,metaKey:i,shiftKey:s}=e;69!==t||i||n||s||e.preventDefault()}))}_onSettingsChanged(e,t){this._applyOptions(t)}_applyOptions(e){void 0===e&&(e=P.get());const t=f().cloneDeep(this._runtimeOptions);f().defaults(t,e),_e(this._editor,t.theme),delete t.theme,ke(t.linting),delete t.linting,this._applyKeyMap(t.keyMap),delete t.keyMap,this._editor.updateOptions(t),this._model&&this._model.updateOptions({tabSize:t.tabSize,insertSpaces:t.insertSpaces})}_applyKeyMap(e){switch(e){case"vim":this._vimMode||(this._emacsMode&&this._emacsMode.dispose(),this._emacsMode=null,this._vimMode=(0,S.vM)(this._editor));break;case"emacs":this._vimMode&&this._vimMode.dispose(),this._vimMode=null,this._emacsMode=new I.Wp(this._editor),this._emacsMode.start();break;default:this._vimMode&&this._vimMode.dispose(),this._vimMode=null,this._emacsMode&&this._emacsMode.dispose(),this._emacsMode=null}}_onHotkeysChanged(){if(!this._editor)return;this._disposableActions.forEach((e=>e.dispose())),this._disposableActions=[];r.Z.hotkey.getCompiledInfo().forEach((e=>{let t;const n="".concat(e.plugin,":").concat(e.command),i=pe(e.shortcut);if(fe(n)){if(me(n)){const a=s[e.plugin]?s[e.plugin][e.command]:null;t=a?this._editor.addAction({id:ge(n),label:n,keybindings:i?[i]:void 0,run:a.run||a,precondition:a.precondition||void 0}):null}}else(e=>ce.includes(e))(n)||(t=this._editor.addAction({id:ge(n),label:e.description||n,keybindings:i?[i]:void 0,run:e.callback}));t&&this._disposableActions.push(t)}))}runCommand(e){e=f().trimStart(e,"command:"),this._editor&&fe(e)&&this._editor.trigger("codioEditor.runCommand",ge(e))}scrollToLine(e){this._editor&&this._editor.revealLineInCenter(e)}scrollToPosition(e){this._editor&&this._editor.revealPosition(e)}setScrollTop(e){this._editor&&this._editor.setScrollTop(e)}setScrollPosition(e,t){this._editor&&this._editor.setScrollPosition({scrollTop:e,scrollLeft:t})}scrollIntoView(e,t){this._editor&&this._editor.revealRangeInCenter(c.Range.fromPositions(e,t))}close(){this._placeholder&&this._placeholder.dispose(),this._placeholder=null,this._settingsChangeHandler&&o.Z.unsubscribe(this._settingsChangeHandler),this._settingsChangeHandler=null,this._debounceHotkeyChanged=null,this._hotkeysChangeHandler&&o.Z.unsubscribe(this._hotkeysChangeHandler),this._hotkeysChangeHandler=null,this._preconditions&&this._preconditions.dispose(),this._preconditions=null,this._editor&&this._editor.dispose(),this._editor=null,this._editorContainer&&this._editorContainer.remove(),this._editorContainer=null,this._onKeyDownDisposable&&this._onKeyDownDisposable.dispose(),this._onKeyDownDisposable=null}setOption(e,t){f().isNull(t)?(delete this._runtimeOptions[e],this._editor&&this._applyOptions()):(this._runtimeOptions[e]=t,this._editor&&this._editor.updateOptions({[e]:t}))}getOption(e){return this._editor?this._editor.getOption(c.editor.EditorOption[e]):null}connect(e){e.append(this._editorContainer),this._editor&&this._editor.layout()}cleanup(){this._editorContainer&&this._editorContainer.detach()}isVisible(){return this._editorContainer.is(":visible")}onDidFocus(e){return this._editor?this._editor.onDidFocusEditorWidget(e):null}hasFocus(){return!!this._editor&&this._editor.hasWidgetFocus()}focus(){this._editor&&this._editor.focus()}onDidChangeModelContent(e){return this._editor?this._editor.onDidChangeModelContent(e):null}onDidScrollChange(e){return this._editor?this._editor.onDidScrollChange(e):null}onDidChangeModel(e){return this._editor?this._editor.onDidChangeModel(e):null}onDidChangeCursorSelection(e){return this._editor?this._editor.onDidChangeCursorSelection(e):null}getPosition(){return this._editor?this._editor.getPosition():null}setPosition(e){this._editor&&this._editor.setPosition(e)}setSelections(e){this._editor&&this._editor.setSelections(e)}getLineCount(){return this._editor?this._editor.getModel().getLineCount():0}replaceRange(e,t,n){n=n||t,this._editor&&this._editor.executeEdits("codio-editor",[{range:{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:n.lineNumber,endColumn:n.column},text:e}],ie.dropSelectionCursorStateComputer())}executeEdits(e,t){this._editor&&this._editor.executeEdits("codio-editor",e,t||ie.dropSelectionCursorStateComputer())}saveViewState(){return this._editor?this._editor.saveViewState():null}restoreViewState(e){this._editor&&this._editor.restoreViewState(e)}onDidChangeCursorPosition(e){return this._editor?this._editor.onDidChangeCursorPosition(e):null}getSelection(){return this._editor?this._editor.getSelection():null}setModel(e){this._model=e,this._editor&&this._editor.setModel(e.model)}getModel(){return this._model}setModelLanguage(e){this._editor&&!this._editor.getModel()&&c.editor.setModelLanguage(this._editor.getModel(),e)}getLineContent(e){return this._editor?this._editor.getModel().getLineContent(e):""}layout(){this._editor&&this._editor.layout()}getLayoutInfo(){return this._editor?this._editor.getLayoutInfo():null}getScrollLeft(){return this._editor?this._editor.getScrollLeft():0}getScrollTop(){return this._editor?this._editor.getScrollTop():0}getScrollWidth(){return this._editor?this._editor.getScrollWidth():0}getScrollHeight(){return this._editor?this._editor.getScrollHeight():0}getTopForLineNumber(e){return this._editor?this._editor.getTopForLineNumber(e):0}getTopForPosition(e,t){return this._editor?this._editor.getTopForPosition(e,t):0}getOffsetForColumn(e,t){return this._editor?this._editor.getOffsetForColumn(e,t):0}getContent(){return this._editor?this._editor.getModel().getValue():""}getVisibleRanges(){return this._editor?this._editor.getVisibleRanges():null}findNextMatch(e,t,n,i,s,a){return this._editor?this._editor.getModel().findNextMatch(e,t,n,i,s,a):null}deltaDecorations(e,t){return this._editor?this._editor.deltaDecorations(e,t):[]}highlight(e){this._editor&&Ie(this,e)}addContentWidget(e){this._editor&&this._editor.addContentWidget(e)}removeContentWidget(e){this._editor&&this._editor.removeContentWidget(e)}layoutContentWidget(e){this._editor&&this._editor.layoutContentWidget(e)}addOverlayWidget(e){this._editor&&this._editor.addOverlayWidget(e)}removeOverlayWidget(e){this._editor&&this._editor.removeOverlayWidget(e)}layoutOverlayWidget(e){this._editor&&this._editor.layoutOverlayWidget(e)}setModelMarkers(e,t){this._editor&&c.editor.setModelMarkers(this._editor.getModel(),e,t)}changeViewZones(e){this._editor&&this._editor.changeViewZones(e)}getLineHandle(e){return this._editor?new ye(this._editor.getModel(),e):null}getValueInRange(e){return this._editor?this._editor.getModel().getValueInRange(e):""}onMouseMove(e){return this._editor?this._editor.onMouseMove(e):null}onMouseLeave(e){return this._editor?this._editor.onMouseLeave(e):null}onMouseDown(e){return this._editor?this._editor.onMouseDown(e):null}getSelections(){return this._editor?this._editor.getSelections():[]}getLineDecorations(e){return this._editor?this._editor.getLineDecorations(e):[]}getContribution(e){return this._editor?this._editor.getContribution(e):null}addAction(e){return this._editor?this._editor.addAction(e):null}setHiddenAreas(e){this._editor&&this._editor.setHiddenAreas(e)}hasTextFocus(){return!!this._editor&&this._editor.hasTextFocus()}createDecorationsCollection(e){return this._editor?this._editor.createDecorationsCollection(e):null}};var Ze=n(84581),Oe=n.n(Ze),Ne=n(19575);let De=null;const Me={enabled:!0,suggest:!0};const Re=class{constructor(e,t){this._highlights=null,this._typos=[],this._editor=e,this._suggestActions=[];const n={...Me,...t},i=f().debounce(this._onContentChange.bind(this),500,{maxWait:1e4});this._onContentChangeDisposable=e.onDidChangeModelContent(i),this._onChangeModelDisposable=e.onDidChangeModel(this._checkTypoAndRefreshAll.bind(this)),this._refreshAllOnReady=!1,this._enabled=n.enabled,this._suggest=n.suggest,this._typoReady=this._initTypo();(async()=>{await this._typoReady,this._initSuggestForContextMenu(),this._refreshAllOnReady&&this._refreshAllHighlights()})()}async _initTypo(){if(De)return De;const[e,t]=await Promise.all([n.e(2988).then(n.t.bind(n,92807,17)),n.e(2988).then(n.t.bind(n,8944,17))]);return De=new(Oe())("en_US",e.default,t.default),De}async init(){this._checkTypoAndRefreshAll()}_initSuggestForContextMenu(){if(!this._editor)return;const e=this._editor.getContribution("editor.contrib.contextmenu");if(!e)return;this._originalOnContextMenu=e._onContextMenu;const t=this;e._onContextMenu=function(){t._addSuggestActions(arguments[0].target.position),t._originalOnContextMenu.apply(e,arguments)}}_addSuggestActions(e){if(!this._suggest||!e)return;this._cleanupSuggestActions();const t=f().find(this._typos,(t=>{let{range:n}=t;return ee.containsPosition(n,e)}));t&&(this._suggestActions=f().map(De.suggest(t.word),(e=>this._createSuggestAction(t,e))))}_cleanupSuggestActions(){f().each(this._suggestActions,(e=>e.dispose())),this._suggestActions=[]}_createSuggestAction(e,t){return this._editor.addAction({id:Ne.default.GUID(4),label:t,precondition:null,contextMenuGroupId:"spellingContextMenuGroup",contextMenuOrder:1,run:()=>{this._editor&&this._editor.replaceRange(t,ee.getStartPosition(e.range),ee.getEndPosition(e.range))}})}_onContentChange(){this._checkTypoAndRefreshAll()}_checkTypoAndRefreshAll(){De?this._refreshAllHighlights():this._refreshAllOnReady=!0}_refreshAllHighlights(){if(!this._editor||!this._editor.getModel()||!this._enabled)return;this._typos=[];const e=ie.findMatchesByRegex(this._editor.getModel(),oe.createWordRegex(),!0).map((e=>{const t=e.matches[0];return De.check(t)?null:(this._typos.push({word:t,range:e.range}),{range:e.range,options:{className:"squiggly-error",isWholeLine:!1}})})).filter((e=>!!e));this._highlights&&this._highlights.clear(),this._highlights=this._editor.createDecorationsCollection(e)}cleanup(){if(this._onContentChangeDisposable&&this._onContentChangeDisposable.dispose(),this._onContentChangeDisposable=null,this._onChangeModelDisposable&&this._onChangeModelDisposable.dispose(),this._onChangeModelDisposable=null,this._cleanupSuggestActions(),this._editor){const e=this._editor.getContribution("editor.contrib.contextmenu");e&&this._originalOnContextMenu&&(e._onContextMenu=this._originalOnContextMenu),this._highlights&&this._highlights.clear(),this._editor=null}this._highlights=null,this._typoReady=null,this._originalOnContextMenu=null,this._typos=null,this._suggestActions=null}enableSpellchecker(e){this._enabled!==e&&(this._enabled=e,e?this._checkTypoAndRefreshAll():(this._highlights&&this._highlights.clear(),this._highlights=null))}enableSuggest(e){this._suggest!==e&&(this._suggest=e,e||this._cleanupSuggestActions())}},Le=c.MarkerSeverity;o.Z.subscribe("command:editor:key_toggle:#param",(function(e){a.default.currentUser.isAnonymous()||r.Z.hotkey.execute("settings","update:user",{plugin:"editor",key:e.param,value:!r.Z.get("editor")[e.param]})})),o.Z.subscribe("command:editor",(e=>{a.default.currentEditor&&a.default.currentEditor.editor&&a.default.currentEditor.editor.runCommand(e)}))},93443:(e,t,n)=>{"use strict";n.d(t,{Z:()=>P});var i=n(52308),s=n.n(i),a=n(96486),o=n.n(a),r=n(19575),c=n(16301),l=n.n(c);function d(e){this._value=e}d.prototype=Object.create(String.prototype,{constructor:{value:d}}),d.prototype.toString=function(){return this._value};var u=l().delimeter=":",h=[],p=0;r.default.getURLParameter("DEBUG");function f(e){var t="[[-DLIMTER_CHNGE--]]",n="\\"+u,i=e.split(n).join(t).split(u);return o().each(i,(function(e,n,i){i[n]=e.split(t).join(u)})),i}function m(e,t,n){return function(i,s){if(i=function(e,t,n){var i=f(e=new d(e));for(var s in n)if(Object.prototype.hasOwnProperty.call(n,s)&&i[s]!==n[s])return!1;for(s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(void 0===i[t[s]])return!1;e[s]=i[t[s]]}return e}(i,e,t),!1!==i)return n(i,s)}}const g=function(e){o().isArray(e)?o().each(e,(function(e){g(e)})):(!function(e){for(var t=h.length;t>=1;t--)if(h[t]){var n=h[t].original===e,i=h[t].token===e;(n||i)&&(l().unsubscribe(h[t].callback),h.splice(t,1))}}(e),l().unsubscribe(e))},b={subscribe:function(e,t){var n=function(e,t){for(var n=f(e),i=!1,s=[],a={},o={},r=0,c=n.length;r<c;++r){var l=n[r];"#"===l[0]&&l.length>1?(i=!0,a[l.substr(1)]=r):i&&(o[r]=l),i||s.push(n[r])}var d=t;return i?(d=m(a,o,t),h[++p]={callback:d,original:t,originalTopic:e,topic:s.join(u)}):{callback:d,topic:s.join(u)}}(e,t);return n.token=l().subscribe(n.topic,n.callback),n.token},unsubscribe:g,publish:function(e,t){return l().publish(e,t)},publishSync:function(e,t){return l().publishSync(e,t)}},v=r.default.str;function y(e){return function(){var t=Array.prototype.slice.call(arguments),n=t.shift(),i=s()(n);return i[e].apply(i,t)}}var w={sync:"publishSync",async:"publish"};function _(e,t){return o().includes(e,"#")?function(n,i){var s=function(e,t){return o().isObject(t)?(o().forEach(t,(function(t,n){"command"!==n&&(t=v.escapeColon(t)),e=e.replace("#"+n,t)})),e):e}(e,n);b[w[t]](s,i)}:function(n){b[w[t]](e,n)}}var k={};k.bind=y("bind"),k.unbind=y("unbind"),k.on=y("on"),k.one=y("one"),k.off=y("off"),k.trigger=y("trigger"),k.create=function(e,t){t=void 0!==t&&t,o().isString(e)&&(e=JSON.parse(e));var n={};return o().forOwn(e,(function(e,i){var s=t?"sync":"async";o().isObject(e)&&(s=e.type,e=e.event),n[i]=_(e,s)})),e=null,n},k.createSync=function(e){return k.create(e,!0)},["subscribe","unsubscribe","publish"].forEach((function(e){k[e]=b[e]}));const P=k},71e3:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(96486),s=n.n(i),a=n(49721),o=n(9380);function r(e,t){t=t||"Executing: "+e,o.Z.hotkey.execute("file","open",{ext:"terminal",filename:t.toLowerCase(),title:t,view:"backend"}),s().delay((function(){a.default.ide.panels.focus.activeTab().extension.then((function(t){null!=t&&t.isBackend&&t.isBackend()&&t.ready().then((()=>t.terminal.terminal.exec(e))).catch((()=>{}))}))}),100)}},18098:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var i=n(96486),s=n.n(i),a=n(9380),o={},r={},c={},l={};function d(e){var t=e.info.name;if(e.settings&&a.Z.plugin(t,e.settings),e.hotkeys&&a.Z.hotkey.plugin(t,e.hotkeys),s().has(e.info.codio,"view")&&(e.view=!0,function(e){var t=e.info.codio;s().isArray(t.view)||(t.view=[t.view]);s().map(t.view,(function(n){void 0!==t.fileExt&&(s().isArray(t.fileExt)||(t.fileExt=[t.fileExt]),s().map(t.fileExt,(function(t){c[t]=c[t]||{},c[t][n]=e}))),void 0!==t.fileName&&(s().isArray(t.fileName)||(t.fileName=[t.fileName]),s().map(t.fileName,(function(t){r[t]=r[t]||{},r[t][n]=e})))}))}(e)),s().has(e.info.codio,"urls")){var n=e.info.codio.urls;s().isArray(n)||(n=[n]),s().map(n,(function(t){l[t]=e}))}return e}var u={register:function(e){return!(!e.info&&e.info.name)&&(o[e.info.name]=e,d(e))},get:function(e){return function(){if(!s().has(o,e))throw new Error("Unrecognized extension: "+e+".");return o[e].get()}},getViews:function(){return s().filter(o,{view:!0})},create:function(e){var t=s().toArray(arguments).slice(1);return u.get(e)().then((e=>new e(...t)))},getByUrl:function(e){return l[e]},getByExt:function(e){return void 0!==e?c[e]:c},getByFilename:function(e){return void 0!==e?r[e]:r},getExt:function(e){return o[e]},loadModule:function(e){return new Promise(((t,n)=>{e((function(e){void 0!==e?t(e.default):n(new Error("Module was not loaded"))}))}))}};const h=u},56225:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var i=n(52308),s=n.n(i),a=n(96486),o=n.n(a),r=n(93443),c=n(19575);class l{constructor(e,t,n){this.iframe=(e=>{const t=s()("<iframe>");if(e&&e.length){const n=o().map(e,(e=>{let{name:t,allowlist:n}=e;return"".concat(t," ").concat(n)})).join("; ");t.attr("allow",n)}return t})(e),this.elToAttach=n?s()('<div class="codio-external-iframe-div"/>').append(this.iframe):this.iframe,t.append(this.elToAttach)}css(e){this.elToAttach.css(e)}focus(){this.elToAttach&&this.elToAttach.focus()}addClass(e){this.elToAttach.addClass(e)}removeClass(e){this.elToAttach.removeClass(e)}get(){return this.elToAttach}src(e,t){t&&this.iframe.on("load.iframeEl",(()=>{this.iframe.off("load.iframeEl"),t()})),this.iframe.attr("src",e)}load(e){this.iframe.load(e)}destroy(){this.elToAttach.remove()}}const d=class{constructor(e,t,n,i,s){let a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.iframeContainer=e,this.containerToExpand=t,this.policy=n,this.bodyContainerId=i,this.extName=s,this.createWithDivContainer=a,this.iframeEl=new l(this.policy,this.getBodyContainer(),this.createWithDivContainer),this.hide(),this.eventHandlers=[],this.bindEvents()}getBodyContainer(){let e=s()("#".concat(this.bodyContainerId));return 0===e.length&&(e=s()('<div id="'.concat(this.bodyContainerId,"\" class='codio-external-iframes'></div>")).appendTo("body")),e}bindEvents(){const e=o().bind(this.eventHandlers.push,this.eventHandlers),t=o().debounce((()=>this.adjust()),200);e(r.Z.subscribe("tab:activated:".concat(this.extName),((e,n)=>{n.template&&n.template.find(this.iframeContainer)&&t()}))),e(r.Z.subscribe("panel:size:change",t)),e(r.Z.subscribe("command:layout:save",t)),e(r.Z.subscribe("debug:panel_switched",t)),e(r.Z.subscribe("call:panelSwitched",t)),e(r.Z.subscribe("ide:fullscreen:#mode",this.onFullscreen.bind(this)))}adjust(){o().defer((()=>this.refresh()))}onFullscreen(e,t){"enter"===e.mode?t.container.find(this.iframeContainer).length||this.iframeContainer.hide():this.iframeContainer.show(),this.adjust()}adjustSizeAndPosition(){const e=this.containerToExpand[0].getBoundingClientRect(),t={top:e.top,left:e.left,width:e.right-e.left,height:e.bottom-e.top};this.iframeEl.css(t)}src(e,t){const n=c.default.promise.deferred(),i=()=>{this.refresh(),n.resolve()};if(!t)return this.iframeEl.src(e,i),n.promise;const s=(this.iframeEl.get().attr("class")||"").split(/\s+/);return this.iframeEl.destroy(),this.iframeEl=new l(this.policy,this.getBodyContainer(),this.createWithDivContainer),o().each(s,(e=>this.addClass(e))),this.iframeEl.src(e,i),this.refresh(),n.promise}hide(){this.removeClass("show")}show(){this.addClass("show")}focus(){this.iframeEl.focus()}addClass(e){this.iframeEl.addClass(e)}removeClass(e){this.iframeEl.removeClass(e)}async refresh(){this.iframeContainer&&(this.iframeContainer.is(":visible")?(this.adjustSizeAndPosition(),this.show()):this.hide())}getIframeEl(){return this.iframeEl}clean(){r.Z.unsubscribe(this.eventHandlers),this.eventHandlers=[],this.iframeEl.destroy(),this.iframeContainer=null,this.containerToExpand=null}}},15094:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var i=n(96486),s=n.n(i),a=n(49721),o=n(19575),r=n(56609),c=n(93443),l=n(87167);let d={};const u=(e,t)=>{d[e]=t},h=e=>d[e],p=()=>s().keys(d),f=(e,t)=>{const n=d[e];n&&(n.links<=1||t)&&delete d[e]},m=(e,t)=>{d[t]=d[e],delete d[e]},g=()=>{s().forEach(d,(e=>e.close(!0))),d={}},b=c.Z.create(n(17133)),v=o.default.path.parse;class y{static async createFile(e,t){const n=await async function(e){const t=h(e);if(t){s().isNumber(t._detachTimeoutId)&&(clearTimeout(t._detachTimeoutId),t._detachTimeoutId=null);try{await t.detachPromise}catch{}}return h(e)}(e);return n?(n.links+=1,n):new y(e,t)}constructor(e,t){t=t||{};const{name:n,dir:i,path:s,extension:o}=v(e);this._name=n,this._dir=i,this._path=s,this._extension=o,this._fullFilePath=e,this._extra=t,this.status=new Promise(((e,t)=>{this.statusResolve=e,this.statusReject=t})),this.links=1,this._bindEvents();const c=l.Zo.Hn.detectLanguage("",this._fullFilePath);if(this._model=new l.yO("",c),u(this._fullFilePath,this),t.enableSharejs)r.Z.attachFile(this._model,e).then((()=>this._onFileLoaded())).catch(this._onFileLoaded.bind(this)).finally(this._bindChange.bind(this));else{const n={decodeContents:t.decodeContents};a.default.currentProject.getBinaryFileContent(e,n).then((e=>{this._unbindChange(),this._model.setValue(e),this._bindChange(),this.statusResolve()})).catch((e=>this.statusReject(e)))}this._synchronization=h(e).status}_unbindChange(){this._model._onChangeDisposable&&this._model._onChangeDisposable.dispose(),this._model._onChangeDisposable=null}_bindChange(){this._unbindChange(),this._model._onChangeDisposable=this._model.onDidChangeModelContent(this._fileChanged.bind(this))}_fileChanged(){b.fileChange({name:this._fullFilePath},this._model.getValue())}_cleanOnRemove(e){const{file:t}=e;(t===this._fullFilePath||s().startsWith(this._fullFilePath,t+"/"))&&this.close(!0)}_onFileLoaded(e){e?this.statusReject(e):this.statusResolve()}_bindEvents(){this._removeSubscriptionId=c.Z.subscribe("item:deleted:#file",this._cleanOnRemove.bind(this)),this.updateHandlerId=c.Z.subscribe("file:prop:update:"+this._fullFilePath,((e,t)=>{this._model&&s().assign(this._model,t),b.filePropUpdated({path:this._fullFilePath})}))}get model(){return this._model}get synchronization(){return this._synchronization}get name(){return this._name}get dir(){return this._dir}get path(){return this._path}get fullFilePath(){return this._fullFilePath}get extension(){return this._extension}get content(){return this._model.getValue()}set content(e){this._model.setValue(e)}rename(e){const t=this._fullFilePath,n=o.default.promise.deferred(),i=this._fullFilePath;if(!this._extra.enableSharejs)return this.onAfterRename(e),n.resolve();r.Z.detachFile(this._fullFilePath).then((()=>r.Z.attachFile(this._model,e).then((()=>{this.onAfterRename(e),m(t,e),n.resolve()})))).catch((e=>n.reject(e)));return n.promise.then((()=>b.fileRename({from:i,to:e})))}onAfterRename(e){this._fullFilePath=e;const{name:t,dir:n,path:i,extension:s}=v(e);this._name=t,this._dir=n,this._path=i,this._extension=s;const a=l.Zo.Hn.detectLanguage("",this._fullFilePath);l.Zo.ML.setModelLanguage(this._model,a),this._bindChange()}static updateCacheOnRename(e,t){const n=p(),i=s().filter(n,(t=>0===t.indexOf(e+"/")));return o.default.promise.iterateAsync(i,(n=>{const i=h(n);return i.rename(i.fullFilePath.replace(e,t))}))}async _detachAndRemoveFromCache(){const e=h(this._fullFilePath);e.detachPromise=r.Z.detachFile(this._fullFilePath),await e.detachPromise,f(this._fullFilePath,!0),this.afterClose()}async close(e){const t=1===this.links;if(e||t){this._unbindChange();try{const t=h(this._fullFilePath);t&&(e?await this._detachAndRemoveFromCache():(this.links-=1,t._detachTimeoutId=setTimeout((()=>{t._detachTimeoutId=null,this._detachAndRemoveFromCache().catch((()=>{}))}),1e4)))}catch(e){throw e}}else this.links-=1}afterClose(){this._model&&!this._model.isDisposed()&&this._model.dispose(),c.Z.unsubscribe(this._removeSubscriptionId),c.Z.unsubscribe(this.updateHandlerId)}static cached(e){return!!h(e)}static getFile(e){return h(e)||null}static content(e){return y.cached(e)?h(e).model.getValue():null}}c.Z.subscribe("project:close",g);const w=y},65236:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(20637);function s(e,t){return void 0===t?i.Z.highlightAuto(e).value:i.Z.getLanguage(t)?i.Z.highlight(e,{language:t}).value:i.Z.highlightAuto(e).value}},70803:(e,t,n)=>{"use strict";n.d(t,{j:()=>i});const i=e=>{if(e.incognitoLogin)return;"STUDENT"!==e.get("details").get("type")&&s()},s=()=>{((e,t,n,i)=>{if(!e.getElementById(n)){var s=e.createElement(t),a=e.getElementsByTagName(t)[0];s.id=n,s.src="//js.hs-analytics.net/analytics/"+Math.ceil(new Date/i)*i+"/2227229.js",a.parentNode.insertBefore(s,a)}})(document,"script","hs-analytics",3e5)}},2774:(e,t,n)=>{"use strict";n.d(t,{V5:()=>i,Xd:()=>o,fs:()=>s,rc:()=>r,y4:()=>c,zI:()=>a});const i={SINGLE:"single",VERTICAL:"vertical",HORIZONTAL:"horizontal",TABS:"tabs",TAB:"tab"},s={FILE:"file",DIR:"dir"},a={RENAME:"rename",OVERWRITE:"overwrite",OVERWRITE_ALL:"overwrite_all",SKIP:"skip",SKIP_ALL:"skip_all"},o=".settings",r=30,c=10},4418:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>u,pi:()=>d});var i=n(93443),s=n(96486),a=n.n(s),o=n(49721),r=n(15094),c={};function l(e,t){var n=o.default.ide.panels.focus&&o.default.ide.panels.focus.activeTab();return n&&n.filename===e?n.extension.then((function(e){return e.extension.editor()})):new Promise((n=>{c[e]=i.Z.subscribe("file:editor:activate",((t,s)=>n(function(e,t,n){return t.filename===n?(void 0!==c[n]&&(i.Z.unsubscribe(c[n]),delete c[n]),Promise.resolve(t.editor)):Promise.resolve()}(0,s,e)))),a().defer((function(){o.default.ide.open("tree",e,t)}))}))}const d=()=>a()(o.default.ide.panels.getOpenedTabs("tree")).uniqBy("filename").map((e=>r.Z.cached(e.filename)?{path:e.filename,content:r.Z.getFile(e.filename).content}:null)).compact().value(),u={openFilePromise:l,openFileAndGoToLine:function(e,t,n,i){n=n||1,l(e,i).then((function(e){!function(e,t,n){if(n){const i={lineNumber:e,column:t};n.focus(),n.setPosition(i),a().defer((()=>n.scrollToPosition(i)))}}(t,n,e)}))},getOpenedFiles:d}},6836:(e,t,n)=>{"use strict";n.d(t,{n:()=>Z});var i=n(52308),s=n.n(i),a=n(96486),o=n.n(a),r=n(49721),c=n(93443),l=n(19575),d=n(2774).V5,u=c.Z.create(n(10270));const h=l.default.KeyCode;var p="width",f="height";const m=[h.UP,h.DOWN,h.LEFT,h.RIGHT];function g(e,t){return o().map(e,(function(e){var n=e.width()+t;return n>27&&n}))}function b(e,t){o().forEach(e,(function(e,n){e.css("width",t[n]+"px")}))}function v(e,t){return o().map(e,(function(e){var n=e.height()+t;return n>27&&n}))}function y(e,t){o().forEach(e,(function(e,n){e.css("height",t[n]+"px")}))}var w=function(e){return e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1,!1};function _(e){var t=[d.VERTICAL,d.HORIZONTAL,d.SINGLE];return e.type&&o().includes(t,e.type)}function k(e){var t=[d.VERTICAL,d.HORIZONTAL];return e.type&&o().includes(t,e.type)}function P(e){return e.type&&e.type===d.HORIZONTAL}function C(e){return e.type&&e.type===d.VERTICAL}function x(e,t){!o().isUndefined(e)&&_(e)&&!1!==t.call(null,e)&&(x(e.children[0],t),x(e.children[1],t))}function E(e,t,n){!o().isUndefined(e)&&_(e)&&e!==t&&(n.call(null,e),E(e.panel,t,n))}function S(e){var t=r.default.ide.panels.child;e.fixed=!1,x(t,(function(e){if(e!==t&&e.panel!==t){var n=e.template.parent();n.width(n.width()),n.height(n.height()),n.addClass("flex-fixed")}}))}function I(e,t,n){var i=[];return t===p?function e(t){P(t)&&(i=i.concat(t.children),e(t.children[0]),e(t.children[1])),C(t)&&(i.push(t.children[n]),e(t.children[n]))}(e):t===f&&function e(t){C(t)&&(i=i.concat(t.children),e(t.children[0]),e(t.children[1])),P(t)&&(i.push(t.children[n]),e(t.children[n]))}(e),o().uniq(i)}function A(e,t,n){var i=j(e,t);if(k(e)){var s=function(e,t){return I(e,t,1)}(e,n);o().forEach(s,(function(e){i.push(e.template.parent())}))}return i.reverse()}function T(e,t,n){var i=j(e,t);if(k(e)){var s=function(e,t){return I(e,t,0)}(e,n);o().forEach(s,(function(e){i.push(e.template.parent())}))}return i.reverse()}function j(e,t){var n=[];return E(e,t,(function(e){n.push(e.template.parent())})),n}const Z=function(e,t){var n=s()(e.template).children(".divider"),i=!1,a=null,l=null,d=[],_=null,k=null,E=[],I=function(e){if(i){var n=0;t===p?(n=l.width()-e.pageX+l.offset().left,j(n)):t===f&&(n=l.height()-e.pageY+l.offset().top,Z(n)),w(e)}};const j=e=>{const t=g(d,-e),n=g(E,e);o().every(t)&&o().every(n)&&(b(d,t),b(E,n),a.width=l.css("width"),_.width=k.css("width"))},Z=e=>{const t=v(d,-e),n=v(E,e);o().every(t)&&o().every(n)&&(y(d,t),y(E,n),a.height=l.css("height"),_.height=k.css("height"))};var O=function(){u.panelResizeEnd(a),u.panelResizeEnd(_),i&&M()};const N=(e,t)=>{e?j(t):Z(t)},D=(n,i)=>{d=A(n,e,t),E=T(i,e,t),l=o().last(d),k=o().last(E)},M=()=>{x(r.default.ide.panels.child,(function(e){var t=e.template.parent();e.width=t.css("width"),e.height=t.css("height"),C(e.panel)&&t.css("height",""),P(e.panel)&&t.css("width",""),e.panel===r.default.ide.panels.child&&(t.css("height",""),t.css("width","")),e.fixed||t.removeClass("flex-fixed")})),a=null,_=null,l=null,k=null,d=[],E=[],i=!1,s()("div.resizable-iframeFix").remove()};c.Z.on(n,"mousedown",(function(n){if(a=e.children[0],_=e.children[1],!a.collapsed&&!_.collapsed){i=!0,D(a,_),S(e);var o=function(e,t,n){var i=r.default.ide.panels.child.template,a=0,o=0,c={top:0,left:0},l="auto";n===p?(o=e.height(),a=i.width(),c.top=e.offset().top,c.left=i.offset().left,l="col-resize"):n===f&&(o=i.height(),a=e.width(),c.top=i.offset().top,c.left=e.offset().left,l="row-resize");var d=s()('<div class="resizable-iframeFix" style="background: #fff;"></div>');return d.css({width:a+"px",height:o+"px",position:"absolute",opacity:"0.001",zIndex:1e3,cursor:l}).css(c),d.appendTo("div.ac")}(l,0,t);c.Z.on(o,"mousemove",I),c.Z.on(o,"mouseup",O),u.panelResizeStart(a),u.panelResizeStart(_),w(n)}})),c.Z.on(n,"keydown",(n=>{a=e.children[0],_=e.children[1];let i=n.which||n.keyCode;if(a.collapsed||_.collapsed||!m.includes(i))return;D(a,_),S(e);const s=t===p;switch(i){case h.UP:case h.LEFT:N(s,10);break;case h.DOWN:case h.RIGHT:N(s,-10)}u.panelResizeEnd(a),u.panelResizeEnd(_),M(),w(n)}))}},56690:(e,t,n)=>{"use strict";var i=n(52308),s=n.n(i),a=n(43553),o=null,r=0;const c=function(){if(!(o=o&&0!==o.length?o:s()("#anonymous-spinner")))return a.Z.one("rendered","renderer",c);r++,o.data("hidden")||1!==r||(o.data("hidden",!0),o.fadeTo(400,1))},l=function(){null!==o&&(--r<0&&(r=0),o.data("hidden")&&0===r&&(o.data("hidden",!1),o.fadeTo(400,0)))};a.Z.bind("show","loading-spinner",c),a.Z.bind("hide","loading-spinner",l)},30844:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>at});var i=n(96486),s=n.n(i),a=n(52308),o=n.n(a),r=n(177),c=n.n(r),l=n(75121),d=n.n(l),u=n(54565);const h=e=>s().uniqueId(e.toLowerCase().replace(/\s/g,"_")+"_");var p=n(9380).A,f=function(e,t){this.options=e,m(this,e),this.filterName=e.title,this.parent=t};function m(e,t){var n=t.title;e.type="item",e.id=t.id||h(n),e.title=n,e.command=t.command||null,e.callback=t.callback,e.hotkey=t.hotkey||null,e.onOff=!s().isUndefined(t.onOff)&&t.onOff,e.fullScreenHide=t.fullScreenHide,s().isBoolean(e.onOff)?(e.onOffValue=e.onOff,e.toggle=!1):(e.onOff=s().defaults(e.onOff,{defaultValue:!1,toggle:!0}),e.onOffValue=e.onOff.defaultValue,e.toggle=e.onOff.toggle,e.onOff=!0),e.url=t.url||null,e.params=t.params,e.context=s().isUndefined(t.context)?"all":t.context,e.divider="divider"===n,e.disabled=!s().isUndefined(t.disabled)&&t.disabled,e.noDefaults=t.noDefaults,e.external=t.external,e.dashboard=t.dashboard,e.visible=s().isUndefined(t.visible)?!!s().isUndefined(e.visible)||e.visible:t.visible}var g=f.prototype;g.clickHandler=function(){if(!this.disabled){if(this.toggle&&o()("#file-menu [data-id="+this.id+"]").toggleClass("on"),this.command){var e=this.command.split(":"),t=e.shift(),n=e.join(":");p.execute(t,n,this.params)}return this.callback&&this.callback(this.params),!this.command&&!this.callback&&void 0}},g.find=function(e){return s().find(this.items,{id:e})},g.update=function(e){this.options=s().defaults(e,this.options),m(this,this.options)},g.addItem=()=>{},g.removeItems=()=>{};const b=f;var v=n(9380).A,y=function(e,t){this.options=e,w(this,e,!0),this.filterName=e.title,this.parent=t};function w(e,t,n){e.type="group",e.id=t.id||h(t.title),e.title=t.title,e.sub=t.sub,e.fullScreenHide=t.fullScreenHide,n&&(e.items=e.createItems(t.items)),e.context=s().isUndefined(t.context)?"all":t.context,e.disabled=!s().isUndefined(t.disabled)&&t.disabled,e.btnGroup=t.btnGroup,e.icon=t.icon,e.command=t.command,e.callback=t.callback,e.noDefaults=t.noDefaults,e.visible=s().isUndefined(t.visible)?!!s().isUndefined(e.visible)||e.visible:t.visible}var _=y.prototype;_.find=function(e){return this.id===e?this:s().find(this.items,{id:e})},_.clickHandler=function(){if(!this.disabled){if(this.toggle&&o()("#file-menu [data-id="+this.id+"]").toggleClass("on"),this.command){var e=this.command.split(":"),t=e.shift(),n=e.join(":");v.execute(t,n,this.params)}this.callback&&this.callback(this.params)}},_.update=function(e){var t=s().isArray(e.items);this.options=s().defaults(e,this.options),w(this,this.options,t)},_.addItem=function(e){this.items.push(this.createItem(e))},_.removeItems=function(e){this.items=s().filter(this.items,(t=>!s().includes(e,t.id)))},_.createItem=function(e){return e.group?new y({...e,sub:!0},this):new b(e,this)},_.createItems=function(e){return s().map(e,((e,t)=>(e.title=s().isString(t)?t:e.title,this.createItem(e))))};const k=y;var P=function(e){this.groups=S(e)},C=P.prototype;function x(e,t){return function(e){var t=!0,n=s().findLastIndex(e,(function(e){return!e.divider&&e.visible}));return s()(e).map((function(e,i){return(t||i>n)&&e.divider&&(e.visible=!1),t=e.visible?e.divider:t,e})).compact().value()}(s()(t).map((function(t){t=s().cloneDeep(t);const n=(i=t.filterName,s().trim(i).toLowerCase().replace(/\.+$/g,"").replace(/\s/g,"_"));var i;return!1===e[n]&&(t.visible=!1),t instanceof k&&(t.items=x(e[n]||{},t.items)),t})).compact().value())}function E(e,t,n){let{id:i,title:s}=t;for(let t=0,a=e.length;t<a;t++){const a=e[t];if(i&&a.id===i||s&&a.title===s)return{items:e,item:a,position:t,parent:n};if(a.items){const e=E(a.items,{id:i,title:s},a);if(e)return e}}}C.toArray=function(){return e=this.filter,t=this.groups,s().isEmpty(e)?t:x(e,t);var e,t},C.find=function(e){const t=E(this.groups,e);return(null==t?void 0:t.item)||!1},C.setFilter=function(e){this.filter=e},C.findLevelAndPosition=function(e){return E(this.groups,{id:e})||!1},C.findGroup=function(e){return s().find(this.groups,{id:e})};var S=function(e){var t=!1,n=!1;return s().map(e,(function(e,i){var s;return e.group?(t||e.btnGroup?!n&&e.btnGroup&&(n=!0):t=!0,s=new k({...e,title:i})):s=new b(e),s}))};const I=P;var A=n(8246),T=n(49721),j=n(72129),Z=n(93443),O=n(34391),N=n(95611),D=Z.Z.create(n(17780));const M={logout:function(e){return N.Z.saveAllAndWait().then((function(){return j.default.AccountManager.logout(e)})).then((function(e){return D.logout(),e}))}};var R=n(91689),L=n(19575),F=n(68058),B=n(97137);const U=JSON.parse('{"Codio":{"id":"codio-menu","group":true,"noDefaults":true,"context":{"session":"registered"},"items":[{"title":"Dashboard","command":"goto:dashboard","noDefaults":true,"dashboard":true,"context":{"session":"registered","route":["ide"]}},{"title":"Account...","url":"/home/settings/overview","external":true},{"title":"Subscription...","url":"/home/billing","external":true},{"title":"Create Project...","command":"project:create"},{"title":"divider","fullScreenHide":true},{"title":"Preferences","fullScreenHide":true,"group":true,"items":[{"title":"User","id":"SettingsUser","command":"settings:user:open"},{"title":"Project","id":"SettingsProject","context":{"route":["ide"],"project":["WRITE_FILES","OWNER","ADMIN"]},"command":"settings:project:open"},{"title":"Environment Variables","id":"EnvironmentVariables","context":{"session":"registered","project":["OWNER"]},"command":"userenv:open"}]}]},"Project":{"group":true,"context":{"route":["ide"]},"items":[{"id":"ProjectPreferences","title":"Settings...","command":"project:preferences","context":{"session":"registered","project":["OWNER","ADMIN"]}},{"title":"Stack","group":true,"context":{"session":"registered","project":["OWNER","ADMIN"]},"items":[{"title":"Info","context":{"session":"registered"},"command":"file:open","params":{"ext":"stack-info","filename":""}},{"id":"StackSettings","title":"Settings...","command":"project:preferences-tab:stack"},{"title":"Create New...","command":"stack-create:open","context":{"generation":2,"session":"registered"}}]},{"title":"divider","context":{"session":"registered","project":["OWNER","ADMIN"]}},{"id":"ProjectContainerInfo","title":"Box Info","noDefaults":true,"command":"container:info","context":{"session":"registered","project":["OWNER","ADMIN"]}},{"id":"ProjectContainerRestart","title":"Restart Box...","noDefaults":true,"command":"container:restart","context":{"session":"registered","project":["OWNER","ADMIN"]}},{"id":"ProjectContainerReset","title":"Reset Box...","noDefaults":true,"command":"container:reset","context":{"session":"registered","readOnlyAccess":false,"project":["OWNER","ADMIN"]}},{"title":"divider","context":{"session":"registered","project":["OWNER","ADMIN"]}},{"title":"Resync File Tree","command":"file:sync_structure","context":{"session":"registered","project":["WRITE_FILES","OWNER","ADMIN"]}},{"title":"divider","noDefaults":true,"context":{"session":"registered","project":["OWNER","ADMIN"]}},{"id":"fork","title":"Create Copy...","command":"project:fork"},{"id":"share","title":"Share...","command":"project:share"},{"id":"exportAsZip","title":"Export as Zip","command":"project:export:zip"},{"title":"divider"},{"title":"QR Code for Preview URL","command":"project:qr-code-preview"},{"title":"divider"},{"id":"deleteProject","title":"Delete...","noDefaults":true,"command":"project:delete","context":{"session":"registered","project":"OWNER"}},{"title":"Exit","command":"project:close"}]},"File":{"fullScreenHide":true,"group":true,"context":{"route":["ide"]},"items":[{"title":"New File...","command":"ide:new_file","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","OWNER","ADMIN"]}},{"title":"New Folder...","command":"ide:new_folder","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","OWNER","ADMIN"]}},{"title":"divider","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","OWNER","ADMIN"]}},{"title":"Save All Files","command":"editor:key_save_all","context":{"session":"registered","project":["WRITE_FILES","OWNER","ADMIN"],"manual_save":true}},{"title":"divider","context":{"session":"registered","project":["WRITE_FILES","OWNER","ADMIN"],"manual_save":true}},{"title":"Open File...","command":"ide:key_quick_open"},{"title":"divider"},{"title":"Rename Item...","command":"ide:rename_item","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","OWNER","ADMIN"]}},{"title":"Delete Item...","command":"ide:delete_item","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","OWNER","ADMIN"]}},{"title":"divider","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","OWNER","ADMIN"]}},{"title":"Upload...","command":"ide:upload_item","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","OWNER","ADMIN"]}},{"title":"Close File","command":"ide:tab_close"},{"title":"Close All Files","command":"ide:tab_close_all"}]},"Edit":{"group":true,"context":{"route":["ide"],"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","OWNER","ADMIN"]},"items":[{"title":"Undo","command":"editor:key_undo"},{"title":"Redo","command":"editor:key_redo"},{"title":"divider"},{"title":"Show completions","command":"editor:key_autocomplete"}]},"Find":{"group":true,"context":{"route":["ide"]},"items":[{"title":"Find...","command":"editor:key_find"},{"title":"Find Next","command":"editor:key_find_next"},{"title":"Find Previous","command":"editor:key_find_prev"},{"title":"divider"},{"title":"Replace...","command":"editor:key_replace","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","OWNER","ADMIN"]}},{"title":"divider","context":{"session":"registered","readOnlyAccess":false,"project":["WRITE_FILES","OWNER","ADMIN"]}},{"title":"Find in Project","command":"search:key_searchProject"},{"title":"Replace in Project","command":"search:key_replaceProject","context":{"readOnlyAccess":false,"project":["WRITE_FILES","OWNER","ADMIN"]}}]},"View":{"group":true,"context":{"route":["ide"]},"items":[{"id":"goToCall","title":"Go to Call","context":{"session":"registered"},"command":"call:open","visible":false},{"id":"menu-item-file-tree","fullScreenHide":true,"title":"File Tree","command":"file:open","onOff":{"defaultValue":false,"toggle":false},"params":{"ext":"filetree","title":"Filetree"}},{"title":"divider","fullScreenHide":true},{"title":"Panels","fullScreenHide":true,"group":true,"items":[{"title":"Split Horizontal","command":"ide:panel_split_horizontal"},{"title":"Split Vertical","command":"ide:panel_split_vertical"},{"title":"Join with Closest","command":"ide:panel:join"},{"title":"Close","command":"ide:panel_close"}]},{"title":"Layouts","fullScreenHide":true,"group":true,"items":[{"title":"Default","command":"ide:layout_default"},{"title":"2 Columns","command":"ide:layout_2_columns"},{"title":"2 Rows","command":"ide:layout_2_rows"},{"title":"divider"},{"title":"Showcase","command":"ide:layout_showcase"}]},{"title":"divider","fullScreenHide":true},{"id":"menu-item-fullscreen","title":"Full screen","command":"ide:fullscreen","onOff":{"defaultValue":false,"toggle":false}},{"title":"divider","noDefaults":true,"context":{"session":"registered"}},{"id":"editor_font_size","title":"Editor Font Size","noDefaults":true,"context":{"session":"registered"},"group":true,"items":[]},{"id":"editor_tab_size","title":"Tab size","noDefaults":true,"context":{"session":"registered"},"group":true,"items":[]},{"id":"editor_indent_with_tabs","title":"Soft tabs","noDefaults":true,"context":{"session":"registered"},"onOff":{"defaultValue":false,"toggle":false}},{"id":"editor_navigate_within_soft_tabs","title":"Navigate within soft tabs","noDefaults":true,"context":{"session":"registered"},"onOff":{"defaultValue":null,"toggle":false}},{"id":"editor_wrap","title":"Wrap","noDefaults":true,"context":{"session":"registered"},"onOff":{"defaultValue":false,"toggle":false}},{"id":"editor_theme","title":"Editor Theme","noDefaults":true,"context":{"session":"registered"},"group":true,"items":[]},{"title":"divider","noDefaults":true},{"id":"terminal_theme","title":"Terminal Theme","noDefaults":true,"context":{"session":"registered"},"group":true,"items":[]},{"id":"terminal_font_size","title":"Terminal Font Size","noDefaults":true,"context":{"session":"registered"},"group":true,"items":[]},{"title":"divider","noDefaults":true},{"id":"menu-item-guides-play-view","title":"Play Guide","command":"guides:play"}]},"Tools":{"fullScreenHide":true,"group":true,"context":{"route":["ide"]},"items":[{"title":"Terminal","noDefaults":true,"command":"terminal:backend-connection","context":{"project":["OWNER","ADMIN"]}},{"title":"Install Software","noDefaults":true,"command":"install-software:install-software","context":{"readOnlyAccess":false,"project":["OWNER","ADMIN"]}},{"title":"Debugger Settings","noDefaults":true,"command":"file:open","params":{"ext":"debugger","filename":""},"context":{"project":["OWNER","ADMIN"]}},{"title":"Code Playback","noDefaults":true,"command":"file:open","params":{"ext":"change-player"},"context":{"project":["OWNER","ADMIN","READ"]}},{"title":"JUnit","noDefaults":true,"command":"junit:open","context":{"generation":2,"project":["OWNER","ADMIN","WRITE_FILES"]}},{"id":"menu-item-guides","title":"Guide","noDefaults":true,"group":true,"items":[{"id":"menu-item-guides-play","title":"Play","command":"guides:pre_play"},{"id":"menu-item-guides-edit","title":"Edit","command":"guides:pre_edit","context":{"readOnlyAccess":false,"project":["OWNER","ADMIN","WRITE_FILES"]}},{"id":"menu-item-guides-edit-css","title":"Add Custom CSS","command":"guides:add_custom_css","context":{"readOnlyAccess":false,"project":["OWNER","ADMIN","WRITE_FILES"]}},{"id":"menu-item-guides-edit-css-reset","title":"Reset Custom CSS","command":"guides:remove_custom_css","context":{"readOnlyAccess":false,"project":["OWNER","ADMIN","WRITE_FILES"]}}]},{"title":"Git","noDefaults":true,"group":true,"context":{"session":"registered","project":["OWNER","ADMIN"]},"items":[{"title":"Remotes...","command":"git:remotes-show"},{"title":"divider"},{"title":"Pull","command":"git:pull"},{"title":"Push","command":"git:push"},{"title":"Create Branch...","command":"git:show-create-branch"},{"title":"Switch Branch...","command":"git:show-switch-branch"},{"title":"Delete Branch...","command":"git:show-delete-branch"}]},{"title":"SSH","noDefaults":true,"group":true,"context":{"session":"registered"},"items":[{"title":"Quick Connect...","command":"terminal:show-connect-dialog"},{"title":"Connections Manager","command":"terminal:show-connections-manager"}]},{"id":"menu-item-beautify","title":"Beautify","command":"code-beautifier:key_format_code"},{"title":"Command bar...","command":"ide:key_quick_run"},{"title":"Virtual Machine","id":"virtual-machine","noDefaults":true,"group":true,"visible":false,"context":{"project":["OWNER","ADMIN"]},"items":[{"id":"virtual-machine-extension","title":"Open","noDefaults":true,"command":"vm:open","context":{"project":["OWNER","ADMIN"]}},{"id":"virtual-machine-extension-ssh","title":"Terminal","noDefaults":true,"command":"vm:open-ssh","context":{"project":["OWNER","ADMIN"]}},{"id":"virtual-machine-extension-nested","title":"Cyber Range","noDefaults":true,"command":"vm:open-nested","context":{"project":["OWNER","ADMIN"]}},{"id":"virtual-machine-extension-publish","title":"Publish","noDefaults":true,"command":"vm:publish","context":{"project":["OWNER","ADMIN"]}}]},{"title":"AWS Cloud Learning","id":"aws-cloud-learning","noDefaults":true,"group":true,"visible":false,"context":{"project":["OWNER","ADMIN"]},"items":[{"id":"aws-cloud-learning-new-tab","title":"AWS Console - New Browser Tab","noDefaults":true,"command":"aws-cloud-learning:open","context":{"project":["OWNER","ADMIN"]}},{"id":"aws-cloud-learning-terminal","title":"AWS Console - Terminal Preview","noDefaults":true,"command":"aws-cloud-learning:open-terminal","context":{"project":["OWNER","ADMIN"]}}]},{"id":"earsketch","title":"Earsketch","command":"file:open","params":{"ext":"earsketch","fielname":""}},{"id":"jupyter-lab","title":"Jupyter Lab","command":"file:open","params":{"ext":"jupyter-lab","filename":""}}]},"Education":{"id":"education","noDefaults":true,"group":true,"context":{"session":"registered","route":["ide"]},"disabled":true,"visible":true,"items":[]},"Help":{"group":true,"items":[{"title":"Shortcuts","command":"shortcuts:show","fullScreenHide":true},{"title":"divider","fullScreenHide":true},{"title":"Help center","url":"https://docs.codio.com","external":true,"context":{"uType":["INDIVIDUAL"]}},{"title":"Help Center","url":"https://docs.codio.com","external":true,"context":{"uType":["TEACHER"]}},{"title":"Help center","url":"https://docs.codio.com/student","external":true,"context":{"uType":["STUDENT"]}},{"title":"Blog","url":"https://codio.com/blog","external":true},{"title":"Codio.com","url":"https://codio.com","external":true},{"title":"divider"},{"title":"System Status","url":"https://status.codio.com","external":true},{"title":"Support","command":"support:show"}]},"Run":{"group":true,"id":"menu-run-button","btnGroup":true,"command":"run:execute","icon":"console","fullScreenHide":true,"context":{"route":["ide"],"session":"registered","project":["OWNER","ADMIN"]},"items":[]},"Preview":{"group":true,"id":"menu-preview-button","btnGroup":true,"command":"preview:execute","icon":"web","fullScreenHide":true,"context":{"route":["ide"],"session":"registered","project":["OWNER","ADMIN"]},"items":[]},"Debugger":{"group":true,"id":"menu-debug-button","btnGroup":true,"command":"debugger:execute","icon":"bug-outline","fullScreenHide":true,"context":{"route":["ide"],"session":"registered","project":["OWNER","ADMIN"]},"items":[]}}');var q=n(85284),H=n(240),G=n.n(H);var W=n(9380).A;const z=c().compile('<div id="file-menu">\n  {{#if showLogo}}\n  <a id="logo" href="{{dashboardUrl}}" target="_self" data-target="dashboard" tabindex="0" aria-label="Go to dashboard">\n    <div aria-hidden="true" id="anonymous-spinner">loading...</div>\n  </a>\n  {{/if}}\n  <div class="menu-wrapper menu">\n    <div id="menu-items" {{#if hideItems}}class="hide"{{/if}}>\n      <ul class="nav" role="menubar" aria-label="{{whitelabel}} Menu">\n        {{#each groups}}\n          {{#visibleForContext this}}\n            {{> menuGroup this}}\n          {{/visibleForContext}}\n        {{/each}}\n      </ul>\n    </div>\n  </div>\n  {{#if showStatus}}\n    {{> userMenu this}}\n  {{/if}}\n</div>\n'),V=c().compile('<span class="menu-cursors-presence-item menu-cursors-presence-item-{{index}}" title="{{userName}} - {{file}} ({{cursor.lineNumber}}:{{cursor.column}})">\n    {{#if gravatarExists}}\n        <img src="//www.gravatar.com/avatar/{{gravatarId}}" alt="{{userName}}"/>\n    {{else}}\n        {{userNameSlug}}\n    {{/if}}\n</span>\n'),K=Z.Z.create(n(32006));var J=L.default.KeyCode,Y="",Q=o()("#content"),X=null,$=new I(U);for(let e of $.groups)"Codio"===e.title&&(e.title=u.Z.get("whitelabel"));var ee=null,te=!1,ne=null,ie=!1,se=".codio-menu",ae=!0,oe=!0,re=!1,ce=!1;let le=[];const de={};let ue=!1,he={visible:!1,active:!1},pe={markComplete:{visible:!1,withWarning:!1,disabled:!1},markUncomplete:{visible:!1,disabled:!1},requestRegrade:{visible:!1,disabled:!1},cancelRegradeRequest:{visible:!1,disabled:!1},grading:{visible:!1,disabled:!1}};function fe(){var e=T.default.currentProject;e&&e.isAdmin&&(e&&e.eduStartedAssignmentInfo&&!e.isOpenedByTeacher||(e.exists(se)?e.file(se).then((function(e){ye(function(e){if(s().isUndefined(e))return{};var t=function(e){try{return JSON.parse(e)}catch(e){return-1}}((n=e,(new(G())).strip(n)));var n;if(-1===t)return ge=!0,be(),{};ge=!1;return t}(e.content))})):ye(s().cloneDeep(T.default.currentProject.codioMenuFilter))))}function me(){ye({}),ae=!0,oe=!0}var ge=!1,be=s().debounce((function(){ge&&B.Z.errorHiding("File "+se+" contains invalid JSON")}),2e3,{maxWait:1e4});function ve(e){return s().forIn(e,(function(e,t,n){var i,a=(i=t,s().trim(i).toLowerCase().replace(/[-\.]/g,"").replace(/\s/g,"_"));n[a]=e,a!==t&&delete n[t],s().isObject(e)&&(n[a]=ve(n[a]))})),e}function ye(e){var t=ve(e);ae=void 0===t.status||!!t.status,oe=void 0===t.logo||!!t.logo,$.setFilter(t)}A.Z.registerPartial("menuGroup",'{{#if visible}}\n    {{#if btnGroup}}\n\n      <li role="presentation" class="dropdown{{#if sub}}-submenu{{/if}} {{#if fullScreenHide}}fullScreenHide{{/if}}{{#if disabled}} disabled{{/if}}" data-type="group" data-title="{{title}}" data-id="{{id}}">\n        <div class="btn-group">\n          <button\n            role="menuitem"\n            aria-controls="{{id}}"\n            aria-haspopup="true"\n            aria-expanded="false"\n            aria-label="{{title}}"\n            class="btn-menu{{#if disabled}} disabled{{/if}}"\n          >\n            {{#if icon}}\n              <span aria-hidden="true" class="iconify" data-icon="@codio:mdi:{{icon}}"></span>\n            {{/if}}\n            <span>{{title}}</span>\n          </button>\n\n          <button aria-hidden="true" tabindex="-1" class="btn-menu dropdown-toggle{{#if disabled}} disabled{{/if}}" data-toggle="dropdown" data-click="block">\n            <i class="caret" data-click="block">dropdown</i>\n          </button>\n\n          <ul id="{{id}}" class="dropdown-menu" role="menu">\n            {{#each items}}\n              {{#visibleForContext this}}\n                {{#equals type "item"}}\n                  {{> menuItem this}}\n                {{else}}\n                  {{> menuGroup this}}\n                {{/equals}}\n              {{/visibleForContext}}\n            {{/each}}\n          </ul>\n        </div>\n      </li>\n\n    {{else}}\n\n      <li role="presentation" class="dropdown{{#if sub}}-submenu{{/if}} {{#if fullScreenHide}}fullScreenHide{{/if}}{{#if disabled}} disabled{{/if}}" data-type="group" data-title="{{title}}" data-id="{{id}}">\n        <a\n          role="menuitem"\n          aria-haspopup="true"\n          aria-expanded="false"\n          href="javascript:void(0)"\n          class="dropdown-toggle {{#if disabled}} disabled{{/if}}"\n          data-toggle="dropdown"\n        >\n          {{#if icon}}\n            <i class="ss-icon">{{icon}}</i>\n          {{/if}}\n          {{title}}\n        </a>\n        <ul class="dropdown-menu" role="menu">\n          {{#each items}}\n            {{#visibleForContext this}}\n              {{#equals type "item"}}\n                {{> menuItem this}}\n              {{else}}\n                {{> menuGroup this}}\n              {{/equals}}\n            {{/visibleForContext}}\n          {{/each}}\n        </ul>\n      </li>\n\n    {{/if}}\n{{/if}}\n'),A.Z.registerPartial("menuItem",'{{#if visible}}\n    {{#if divider}}\n      <li role="separator" data-comp="{{component}}" data-id="{{id}}" class="divider {{#if fullScreenHide}}fullScreenHide{{/if}}"></li>\n    {{else}}\n      <li role="presentation" data-comp="{{component}}" data-id="{{id}}" class="{{#if disabled}}disabled{{/if}}{{#if onOffValue}} on{{/if}}{{#if fullScreenHide}} fullScreenHide{{/if}}">\n        <a role="menuitem" tabindex="-1" href="{{#if url}}{{url}}{{else}}javascript:void(0){{/if}}" {{#if external}}target="_blank"{{/if}} {{#if dashboard}}data-target="dashboard"{{/if}}>\n          <span class="text">\n            <i class="ss-icon">checkmark</i>\n            {{title}}\n          </span>\n          <span class="hotkey">{{{hotkey command hotkey}}}</span>\n        </a>\n      </li>\n    {{/if}}\n{{/if}}\n'),A.Z.registerPartial("userMenu",'<div class="user-menu">\n  <button type="button" id="menu-publish-btn" class="btn publish-btn hide" title="Publish" aria-label="Publish">\n      <i class="ss-icon">up</i>\n      <span>Publish</span>\n  </button>\n  <button \n    type="button"\n    id="menu-mark-complete-btn"\n    class="btn mark-complete-btn education-group-btns hide"\n    title="Mark as Complete"\n    aria-label="Mark as Complete">\n    <span>Mark as Complete</span>\n  </button>\n  <button\n    type="button"\n    id="menu-mark-uncomplete-btn"\n    class="btn mark-uncomplete-btn education-group-btns hide"\n    title="Mark as Uncompleted"\n    aria-label="Mark as Uncompleted">\n    <span>Mark as Uncompleted</span>\n  </button>\n  <button\n    type="button"\n    id="menu-request-regrade-btn"\n    class="btn request-regrade-btn education-group-btns hide"\n    title="Request Regrade"\n    aria-label="Request Regrade">\n    <span>Request Regrade</span>\n  </button>\n  <button\n    type="button"\n    id="menu-cancel-regrade-request-btn"\n    class="btn cancel-regrade-request-btn education-group-btns hide"\n    title="Cancel Regrade Request"\n    aria-label="Cancel Regrade Request">\n    <span>Cancel Regrade Request</span>\n  </button>\n  <button\n    type="button"\n    id="menu-grading-btn"\n    class="btn grading-btn education-group-btns hide"\n    title="Grading"\n    aria-label="Grading">\n    <span>Grading</span>\n  </button>\n  <div id="menu-cursors-presence"></div>\n  <div id="menu-cursors-presence-separator">&nbsp;</div>\n  <button id="menu-make-writable-copy" class="btn hide" title="Writable Copy" aria-label="Writable Copy">Writable Copy</button>\n  <button type="button" id="user-menu-call-btn" class="btn user-menu-call-btn hide" title="Go to Call" aria-label="Go to Call">\n    <i class="ss-icon">call</i>\n  </button>\n  <div class="hint hint-bottom updates-main updates-main-hide">\n    <i id="updates-available" class="ss-icon">downloadcloud</i>\n    <span class="hint-text"><nobr>Updates available!<br>Please reload</nobr></span>\n  </div>\n\n  <div id="online-indicator" class="offline" title="Offline"></div>\n\n  <div class="user-name">\n    <a id="userlink" href="{{dashboardUrl}}" target="_self" data-target="dashboard" tabindex="0" aria-label="{{username}}\'s projects">\n      {{username}}\n    </a>\n  </div>\n\n  <div class="gravatar">\n    <a href="{{dashboardUrl}}" target="_self" data-target="dashboard" tabindex="0" id="gravatar-menu" title="Courses on dashboard" aria-label="{{#if isTeacher}}Courses on dashboard{{else}}My Courses on dashboard{{/if}}">\n      <img id="gravatar-img" src="//www.gravatar.com/avatar/{{gravatarHash}}" alt="User logo">\n    </a>\n  </div>\n\n  <div class="user-logout">\n    <a id="logout" href="javascript:void(0)" title="Logout" tabindex="0" aria-label="Logout">\n      <i class="ss-icon">exit</i>\n    </a>\n  </div>\n</div>\n');const we=e=>{const t=F.I_.get("dummy_login_as_path")||"/home";window.location.href=e?t:"/p/login"},_e=async()=>{let e=!1;try{const e=await M.logout();we(e.restored)}catch(t){if(!t.message||!t.message.includes("You have uncompleted assignments in exam proctoring mode"))throw t;e=!0}if(e){if(!await new Promise((e=>{O.Z.showConfirm({title:"Clear Single Login Status",description:"You have an assignment in exam proctoring mode that is not marked as complete. Do you want to mark the assignment as complete to clear this status?",captcha:!0,onHide:()=>e(!1),onClose:t=>e(t)})})))return;const e=await M.logout(!0);we(e.restored)}};var ke=function(){O.Z.showConfirm({title:"Sign Out",description:"Are you sure you wish to sign out?",onClose:function(e){if(!e)return!0;try{_e()}catch(e){B.Z.error(e.message||e)}}})};function Pe(){W.execute("education","writable")}function Ce(){var e;Ze(!0),null!==(e=T.default.currentProject.track)&&void 0!==e&&e.track?K.publishTrack():K.publishAssignment()}function xe(){K.showRequestRegradeDialog()}function Ee(){K.showCancelRegradeRequestDialog()}function Se(){W.execute("education","mark_as_completed")}function Ie(){W.execute("education","mark_as_uncompleted")}function Ae(){T.default.ide.open("grading","")}function Te(){X&&(ue?X.find("#menu-make-writable-copy").removeClass("hide"):X.find("#menu-make-writable-copy").addClass("hide"))}function je(){var e;if(!X)return;const t=T.default.currentProject;t&&(t.isAuthorProject||null!==(e=t.track)&&void 0!==e&&e.track)&&!t.isBook&&t.needPublish?X.find("#menu-publish-btn").removeClass("hide"):X.find("#menu-publish-btn").addClass("hide")}function Ze(e){X.find("#menu-publish-btn").prop("disabled",e)}function Oe(e){var t=o()(e.target);if("block"!==t.data("click")){var n=t.closest("li"),i=n.data("id"),a=n.closest("ul");"menubar"===a.attr("role")&&a.hasClass("nav")&&(N.Z.saveAllAndWait(),Me(Q),n.find("a").first().attr("aria-expanded","true"));var r=$.find({id:i});return r&&s().isFunction(r.clickHandler)?r.clickHandler.call(r):void 0}}var Ne=function(e,t,n){var i=t+n;if(s().isArray(e)&&i>=0&&i<e.length){var a=e[i],o=X&&X.hasClass("fullScreen");return a.disabled||a.divider||o&&a.fullScreenHide?Ne(e,i,n):a}return!1},De=function(){Q.find(".open").removeClass("open"),Me(Q)},Me=function(e){e.find('a[aria-expanded="true"]').attr("aria-expanded","false"),e.find('button[aria-expanded="true"]').attr("aria-expanded","false")},Re=function(e,t){var n,i=Q.find("li[data-id='"+e+"']"),s=i.find(".btn-group");Me(i.parent()),0!==s.length?(n=i.find("button").first().focus(),t&&s.addClass("open")):(n=i.find("a").first().focus(),t&&i.addClass("open")),n&&n.attr("aria-expanded")&&n.attr("aria-expanded","true")};function Le(e){return Q.find("li[data-id='"+e+"']").find(".btn-group").length}function Fe(e,t,n,i){if(e.parent)if(J.LEFT===t)Re(e.parent.id,!1);else{var a=Ne(e.item.items,-1,1);a?Re(a.id,!s().isEmpty(a.items)):Re(e.parent.id,!1)}else{var r=i?0:J.LEFT===t?-1:1,c=Ne(e.items,e.position,r),l=!Q.find(".open").length;l||(l=Le(c.id)),c&&function(e,t,n){var i=Q.find("li[data-id='"+e+"']"),s=Q.find("li[data-id='"+t+"']"),a=function(e,t){var i,s=e,a=e.find(".btn-group");0!==a.length&&(s=o()(a[0])),t?s.removeClass("open"):!n&&s.addClass("open"),t||(i=s!==e?s.find("button").first().focus():s.find("a").first().focus(),!n&&i.attr("aria-expanded")&&i.attr("aria-expanded","true"))};Me(Q),a(i,!0),a(s,!1)}(n,c.id,l)}}function Be(e,t,n){if(e.parent){var i=Ne(e.items,e.position,J.UP===t?-1:1);n.removeClass("open"),i?Re(i.id,!s().isEmpty(i.items)):Re(e.parent.id,!1)}else{var a=e.item.items,o=Ne(a,J.UP===t?a.length:-1,J.UP===t?-1:1);o&&Re(o.id,!s().isEmpty(o.items))}}var Ue=function(e){var t=o()(e.target),n=t.attr("id"),i=!1;if("logo"!==n&&"gravatar-menu"!==n||(i=!0,t=o()(document.activeElement)),"block"!==t.data("click")){var a=t.closest("li"),r=a.data("id"),c=$.findLevelAndPosition(r);if(c&&c.items){var l=function(e,t){var n=e.which||e.keyCode;return J.TAB===n&&(t.closest("ul").hasClass("dropdown-menu")?n=e.shiftKey?J.UP:J.DOWN:De()),n}(e,t);switch(l){case J.LEFT:case J.RIGHT:Fe(c,l,r,i);break;case J.SPACE:c.parent||Le(c.item.id)||(Re(c.item.id,!0),Be(c,J.DOWN,a));break;case J.DOWN:case J.UP:c.parent||Re(c.item.id,!0),Be(c,l,a);break;case J.RETURN:case J.ESC:!function(e){De(),e===J.ESC&&s().defer((function(){ne&&o()(ne).focus(),ne=null}))}(l)}}}},qe=function(e){X&&X.remove(),Q.prepend(e),X=e,ce&&et(),le&&tt(),Te(),je(),(()=>{const{visible:e,active:t}=he,n=X.find("#user-menu-call-btn");n.removeClass("hide user-menu-call-btn--active"),e?t&&n.addClass("user-menu-call-btn--active"):n.addClass("hide")})(),st()};const He=function(e){if(!ie){var t=X&&X.hasClass("fullScreen");s().isUndefined(e)||(Y=e);var n,i=T.default.currentUser.get("details").get("email"),a=o()(z({dashboardUrl:(0,L.Xm)("/home"),groups:$.toArray(),topic:Y,signedIn:!T.default.currentUser.isAnonymous(),username:T.default.currentUser.name(),gravatarHash:i?d()(i):"",online:T.default.online,hideItems:te,showStatus:ae,showLogo:oe,whitelabel:u.Z.get("whitelabel")}));n=a,Z.Z.on(n,"click","#menu-items li",Oe),Z.Z.on(n.find("#logout"),"click",ke),Z.Z.on(n,"focus","#logo",De),Z.Z.on(n,"focus","#gravatar-menu",De),Z.Z.on(n.find("#menu-make-writable-copy"),"click",Pe),Z.Z.on(n.find("#menu-publish-btn"),"click",Ce),Z.Z.on(n.find("#user-menu-call-btn"),"click",(()=>{K.openCall()})),Z.Z.on(n.find("#menu-request-regrade-btn"),"click",xe),Z.Z.on(n.find("#menu-cancel-regrade-request-btn"),"click",Ee),Z.Z.on(n.find("#menu-mark-complete-btn"),"click",Se),Z.Z.on(n.find("#menu-mark-uncomplete-btn"),"click",Ie),Z.Z.on(n.find("#menu-grading-btn"),"click",Ae),Z.Z.on(n,"mouseover",'a[role="menuitem"]',(function(e){var t=o()(e.target);Me(t.closest("ul")),t.attr("aria-expanded")&&t.attr("aria-expanded","true")})),Z.Z.on(n,"mouseout",'a[role="menuitem"]',(function(e){var t=o()(e.target);Me(t.closest("ul"))})),Z.Z.on(n,"keydown",(function(e){s().defer((function(){Ue(e)}))})),Z.Z.on(n.find(".updates-main"),"click",(function(){location.reload()})),s().isNull(ee)&&(ee=Z.Z.subscribe("settings:changed",(function(){Ge()}))),qe(a),X&&t&&X.addClass("fullScreen")}};var Ge=s().debounce(He,400,{maxWait:2e3}),We=function(){s().isNull(ee)||Z.Z.unsubscribe(ee),X&&X.hide(),Y=""};var ze=function(){$e("menu-item-fullscreen"),X&&X.removeClass("fullScreen")},Ve=function(e){if(e){var t=T.default.getByUrl(e.extensionName);t&&!0===t.info.codio.noFullscreen?Qe("menu-item-fullscreen"):Ye("menu-item-fullscreen")}else Ye("menu-item-fullscreen")};function Ke(){X&&X.is(":visible")&&Ge()}function Je(e,t){const{itemDescriptor:n}=t;if(!n||!n.id&&!n.title)return;const i=t.item,s=$.find(n);s&&(s.update(i),Ke())}const Ye=function(e){var t=$.find({id:e});t&&(t.disabled=!1,(t=X&&X.find('li[data-id="'+e+'"]'))&&t.prop("disabled",!1).removeClass("disabled"))},Qe=function(e){var t=$.find({id:e});t&&(t.disabled=!0,(t=X&&X.find('li[data-id="'+e+'"]'))&&t.prop("disabled",!0).addClass("disabled"))},Xe=function(e){var t=$.find({id:e});t&&t.onOff&&(t.onOffValue=!0,X&&X.find('li[data-id="'+e+'"]').addClass("on"))},$e=function(e){var t=$.find({id:e});t&&t.onOff&&(t.onOffValue=!1,X&&X.find('li[data-id="'+e+'"]').removeClass("on"))};function et(){X&&X.find("#online-indicator").addClass("hide")}function tt(){if(!X)return;const e=s().filter(le,(e=>!de[e.userId])).map((e=>e.userId));e&&e.length>0&&j.default.AccountManager.getGravatarInfos(e).then((e=>{s().each(e,(e=>{de[e.id]=e})),tt()}));const t=X.find("#menu-cursors-presence");t.empty(),s().each(le,(e=>{if(e.userId===T.default.currentUser.account)return;const n=de[e.userId]||{};e.userNameSlug=e.userName[0],e.gravatarExists=n.gravatarExists||!1,e.gravatarId=n.gravatarId||"";const i=o()(V(e));i.click((()=>{T.default.ide.open("tree",e.file,{highlight:{ref:e.cursor.lineNumber,column:e.cursor.column,selectionOnly:!0}})})),t.append(i)}))}c().registerHelper("visibleForContext",(function(e,t){return R.Z.inContext(e.context,Y,q,e.noDefaults)?t.fn(this):t.inverse(this)})),c().registerHelper("hotkey",(function(e,t){return s().isString(e)||s().isString(t)?(t=t||W.getCurrentKey(e),s().isUndefined(t)?"":L.default.formatCommand(t)):""})),Z.Z.subscribe("shareman:connect",(function(){ce=!0,et()})),Z.Z.subscribe("events-channel:updateAvailable",(function(){ce=!1,X&&X.find(".updates-main").removeClass("updates-main-hide")})),Z.Z.subscribe("shareman:disconnect",(function(){X&&X.find("#online-indicator").removeClass("hide").addClass("offline")})),Z.Z.subscribe("shareman:cursors",(function(e,t){le=t,tt()})),Z.Z.subscribe("ide:fullscreen:enter",(function(){Xe("menu-item-fullscreen"),X&&X.addClass("fullScreen")})),Z.Z.subscribe("ide:fullscreen:leave",ze),Z.Z.subscribe("ide:close",ze),Z.Z.subscribe("tab:activated",(function(e,t){Ve(t)})),Z.Z.subscribe("tab:closed",(function(){Ve()})),Z.Z.subscribe("project:permissionsUpdated:#projectId",(function(){He()})),Z.Z.subscribe("panel:focus:change",(function(e,t){var n=t&&t.activeTab();Ve(n)})),Z.Z.subscribe("command:account:logout",ke),Z.Z.subscribe("menu:update",(function(e,t){t.itemDescriptor?Je(0,t):Je(0,{itemDescriptor:{id:e.replace(/^menu:update:/,"")},item:t})})),Z.Z.subscribe("menu:add",(function(e,t){const{parentDescriptor:n,item:i,itemAddedCallback:s}=t;if(!n||!i||!n.title&&!n.id)return;i.id=i.id||h(i.title);const a=$.find(n);a&&(a.addItem(i),Ke(),s&&s(i.id))})),Z.Z.subscribe("menu:remove",(function(e,t){if(!t||!t.id&&!t.title)return;const n=$.find(t);null!=n&&n.parent&&(n.parent.removeItems([n.id]),Ke())})),Z.Z.subscribe("project:preferencesUpdated",(function(){He()}));Z.Z.subscribe("command:ide:key_menu_focus",function(e){var t=X&&X.hasClass("fullScreen"),n=$.toArray();t&&(n=s().filter(n,(function(e){return!e.fullScreenHide})));var i=n[e];i.disabled||i.divider||(De(),ne=document.activeElement,Re(i.id,!0))}.bind(null,1));var nt=null;s().forEach(["guides:player:open","guides:view:change"],(function(e){Z.Z.subscribe(e,(function(e,t){t&&("guides:view:change"===e||"guides:player:open"===e)?me():fe();const n=T.default.currentProject,i=t||n.isAdmin&&!n.eduStartedAssignmentInfo;"guides:player:open"===e&&i&&(re=!0,nt||(nt=Z.Z.subscribe("file:change:"+se,it))),Ge()}))})),Z.Z.subscribe("menu:filter",(function(){ye(s().cloneDeep(T.default.currentProject.codioMenuFilter)),Ge()})),Z.Z.subscribe("guides:player:close_rendered",(function(){me(),re=!1,Ge()}));var it=s().debounce((function(){re&&(fe(),Ge())}),500,{maxWait:2e3});function st(){if(!X)return;const e=X.find("#menu-mark-complete-btn");pe.markComplete.visible?e.removeClass("hide"):e.addClass("hide"),e.prop("disabled",pe.markComplete.disabled),pe.markComplete.withWarning?e.addClass("mark-complete-btn--warning"):e.removeClass("mark-complete-btn--warning");const t=X.find("#menu-mark-uncomplete-btn");pe.markUncomplete.visible?t.removeClass("hide"):t.addClass("hide"),t.prop("disabled",pe.markUncomplete.disabled);const n=X.find("#menu-request-regrade-btn");pe.requestRegrade.visible?n.removeClass("hide"):n.addClass("hide"),n.prop("disabled",pe.requestRegrade.disabled);const i=X.find("#menu-cancel-regrade-request-btn");pe.cancelRegradeRequest.visible?i.removeClass("hide"):i.addClass("hide"),i.prop("disabled",pe.cancelRegradeRequest.disabled);const s=X.find("#menu-grading-btn");pe.grading.visible?s.removeClass("hide"):s.addClass("hide"),s.prop("disabled",pe.grading.disabled)}Z.Z.subscribe("education:writableCopyMenuVisibility",((e,t)=>{let{state:n}=t;ue=n,Te()})),Z.Z.subscribe("education:updatePublishBtnVisibility",(()=>{je()})),Z.Z.subscribe("education:publishDialogClosed",(()=>{Ze(!1)})),Z.Z.subscribe("call:updateMenuItemsVisibility",((e,t)=>{let{visible:n,active:i}=t;he={...he,visible:n,active:i};const s=$.find({id:"goToCall"});s&&(s.update({visible:n}),Ke())})),Z.Z.subscribe("education:updateEducationButtonsGroupState",((e,t)=>{pe=s().merge(pe,t),st()})),s().forEach(["file:change","item:created","item:deleted","item:moved"],(e=>{Z.Z.subscribe(e,(()=>{T.default.currentProject.setNeedPublish(!0).then((()=>je()))}))}));const at={show:He,hide:We,detach:function(){ie=!0,We()},attach:function(){ie=!1,He()},setItems:function(e,t){var n=$.findGroup(e);n&&(n.update({items:t}),Ke())},enableItem:Ye,disableItem:Qe,itemOn:Xe,itemOff:$e,switchItemInGroup:function(e,t){var n=$.findGroup(e);n&&(s().forEach(n.items,(function(e){$e(e.id)})),Xe(t))},setTitle:function(e,t){var n=$.findGroup(e);n&&(n.title=t,X&&X.is(":visible")&&He())},setItemsVisibility:function(e){te=!e,Ke()},setVisibility:function(e,t){const n=$.find({id:e});n&&(n.visible=t,X&&X.is(":visible")&&He())}}},97137:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var i=n(52308),s=n.n(i),a=n(96486),o=n.n(a),r=n(177),c=n.n(r);var l=n(54565);const d=c().compile("<blockquote class='critical-error-rectangle-speech-border'>\n    <div class='critical-error-rectangle-speech-content'>\n        <h1>404 <small>Page Not Found</small></h1>\n        <div class='critical-error-content'>\n            <p>\n                Opps! It looks like you've floated out a little too far into space.\n            </p>\n            <p>\n                Come back to {{whitelabel}}'s&nbsp;\n                <a href='/home'>mission control</a>&nbsp;\n                and create new code projects.\n            </p>\n            <p>\n                To boldly go where no developer has gone before.\n            </p>\n        </div>\n    </div>\n</blockquote>\n<section class='critical-error-links font-sansN3'>\n    <div class='critical-error-robot'></div>\n    <section class=\"links\">\n        <a href=\"/home\"><span>&laquo;</span> back to homepage</a>\n        | <a href=\"http://status.codio.com\" target=\"_blank\">Platform Status</a>\n    </section>\n</section>"),u=c().compile("<blockquote class='critical-error-rectangle-speech-border'>\n    <div class='critical-error-rectangle-speech-content'>\n        <h1>403 <small>Not allowed</small></h1>\n        <div class='critical-error-content'>\n            <p>You are not allowed to access the page or resource.</p>\n            {{#if hasMessage}}\n            <section class=\"additional-message\">\n                <h2>Additional info</h2>\n                <p>{{message}}</p>\n            </section>\n            {{/if}}\n        </div>\n    </div>\n</blockquote>\n<section class='critical-error-links font-sansN3'>\n    <div class='critical-error-robot'></div>\n    <section class=\"links\">\n        <a href=\"/home\"><span>&laquo;</span> back to homepage</a>\n        | <a href=\"http://status.codio.com\" target=\"_blank\">Platform Status</a>\n    </section>\n</section>\n"),h=c().compile('<blockquote class=\'critical-error-rectangle-speech-border\'>\n    <div class=\'critical-error-rectangle-speech-content\'>\n        <h1><small>Oops, something went wrong</small></h1>\n        <div class=\'critical-error-content\'>\n            <p>The page or resource that you are trying to access cannot be shown right now. Sorry \'bout that!</p>\n            <p>Please check the <a href="http://status.codio.com" target="_blank">Status Site</a> for details of any known system issues.</p>\n            {{#if hasMessage}}\n            <section class="additional-message">\n                <h2>Additional info</h2>\n                <p>{{message}}</p>\n            </section>\n            {{/if}}\n        </div>\n    </div>\n</blockquote>\n<section class=\'critical-error-links font-sansN3\'>\n    <div class=\'critical-error-robot\'></div>\n    <section class="links">\n        <a href="/home"><span>&laquo;</span> back to homepage</a>\n        | <a href="http://status.codio.com" target="_blank">Platform Status</a>\n    </section>\n</section>\n'),p=c().compile("<blockquote class='critical-error-rectangle-speech-border'>\n    <div class='critical-error-rectangle-speech-content'>\n        <h1>402 <small>Payment Required</small></h1>\n        <div class='critical-error-content'>\n            <p>The page or resource that you are trying to access cannot be shown right now. Sorry 'bout that!</p>\n            {{#if hasMessage}}\n            <section class=\"additional-message\">\n                <h2>Additional info</h2>\n                <p>{{message}}</p>\n            </section>\n            {{/if}}\n        </div>\n    </div>\n</blockquote>\n<section class='critical-error-links font-sansN3'>\n    <div class='critical-error-robot'></div>\n    <section class=\"links\">\n        <a href=\"/home\"><span>&laquo;</span> back to homepage</a>\n        | <a href=\"http://status.codio.com\" target=\"_blank\">Platform Status</a>\n    </section>\n</section>\n"),f=c().compile("<div class='critical-error-rectangle-speech-content'>\n    <h1><small>Unit completed</small></h1>\n    <div class='critical-error-content'>\n        <p>\n            {{#if isIframe}}\n            Access to the assignment has been disabled, you can select another assignment.\n            If you require access to this assignment, contact your course instructor/teacher.\n            {{else}}\n            Access to the assignment has been disabled, Close this browser tab and return to\n            your LMS that will be open in another browser tab\n            If you require access to the assignment, contact your course instructor/teacher.\n            {{/if}}\n        </p>\n    </div>\n</div>\n"),m=c().compile('<blockquote class=\'critical-error-rectangle-speech-border\'>\n    <div class=\'critical-error-rectangle-speech-content\'>\n        <h1>423 <small>Locked</small></h1>\n        <div class=\'critical-error-content\'>\n            <p>Sorry, but your account has been temporarily suspended. Please contact us <a href="mailto:help@codio.com">help@codio.com</a> to find out more and to discuss this further.</p>\n            {{#if hasMessage}}\n            <section class="additional-message">\n                <h2>Additional info</h2>\n                <p>{{message}}</p>\n            </section>\n            {{/if}}\n        </div>\n    </div>\n</blockquote>\n<section class=\'critical-error-links font-sansN3\'>\n    <div class=\'critical-error-robot\'></div>\n    <section class="links">\n        <a href="/home"><span>&laquo;</span> back to homepage</a>\n        | <a href="http://status.codio.com" target="_blank">Platform Status</a>\n    </section>\n</section>\n'),g=c().compile('<blockquote class=\'critical-error-rectangle-speech-border\'>\n    <div class=\'critical-error-rectangle-speech-content\'>\n        <h1><small>Oops, something went wrong</small></h1>\n        <div class=\'critical-error-content\'>\n            <p>The page or resource that you are trying to access cannot be shown right now. Sorry \'bout that!</p>\n            <p>Please check the <a href="http://status.codio.com" target="_blank">Status Site</a> for details of any known system issues.</p>\n            {{#if hasMessage}}\n            <section class="additional-message">\n                <h2>Additional info</h2>\n                <p>{{message}}</p>\n            </section>\n            {{/if}}\n        </div>\n    </div>\n</blockquote>\n<section class=\'critical-error-links font-sansN3\'>\n    <div class=\'critical-error-robot\'></div>\n    <section class="links">\n        <a href="/home"><span>&laquo;</span> back to homepage</a>\n        | <a href="http://status.codio.com" target="_blank">Platform Status</a>\n    </section>\n</section>\n');var b="critical-error",v={};function y(){s()("#body-loading").removeClass("in");var e=s()("#"+b);return 0===e.length&&(e=s()("<div>",{id:b})),e.show()}const w={notFound:function(e){var t=y(),n=d({hasMessage:!o().isEmpty(e),message:e,whitelabel:l.Z.get("whitelabel")});t.html(n),s()("div.ac").append(t)},notAllowed:function(e){var t=y(),n=u({hasMessage:!o().isEmpty(e),message:e});t.html(n),s()("div.ac").append(t)},serverError:function(e,t){var n=h({hasMessage:!o().isEmpty(e),message:e}),i=y();i.html(n),t?t.append(i):s()("div.ac").append(i)},serverUnavailable:function(e,t){this.error5and4xx(e,t,g)},locked:function(e,t){this.error5and4xx(e,t,m)},error5and4xx:function(e,t,n){var i=n({hasMessage:!o().isEmpty(e),message:e}),a=y();a.html(i),t?t.append(a):s()("div.ac").append(a)},paymentRequired:function(e,t){var n=p({hasMessage:!o().isEmpty(e),message:e}),i=y();i.html(n),t?t.append(i):s()("body").append(i)},unitNoAccessCompleted:function(e,t,n){if(!t)return this.serverUnavailable(n);var i=f({isIframe:e}),a=y();a.html(i),a.html(i),s()("div.ac").append(a)},notify:function(e,t){e='<div class="message">'.concat(e,"</div>");const n={fadeOut:{enabled:!1},...t,showImmediately:!1};var i=s().notify.call(null,e,n);i.$element.attr("role","alert"),i.show();var a=Math.random()+"",o=i.hide;return i.hide=function(){o.apply(this,arguments),v[a]=void 0},v[a]=i,i},hideCritical:function(){return y().hide()},_getTimeoutOptions:function(e){return o().isNumber(e)?{fadeOut:{enabled:!0,delay:e}}:{}},error:function(e,t){return this.notify(e,{type:"error",...this._getTimeoutOptions(t)})},errorHiding:function(e,t){return this.notify(e,{type:"error",...this._getTimeoutOptions(t)})},info:function(e,t){return this.notify(e,{type:"info",...this._getTimeoutOptions(t)})},success:function(e,t){return this.notify(e,{type:"success",...this._getTimeoutOptions(t)})},closeAllNotifications:function(){o().each(v,(function(e,t){e.hide(),v[t]=void 0}))},hideError:function(){y().hide().empty()}}},1650:(e,t,n)=>{"use strict";n.d(t,{I:()=>y,Z:()=>w});var i=n(54565),s=(n(28190),n(43440)),a=n.n(s),o=n(96486),r=n.n(o),c=n(13986),l=function(){};l.prototype.postMessage=function(e){var t=e.split("\n"),n=t.shift(),i=parseInt(t.shift(),10),s="GZIP"===t[0];s&&t.shift();var a=t.join("\n");if(s){for(var o=atob(a),r=o.length,l=new Uint8Array(r),d=0;d<r;d++)l[d]=o.charCodeAt(d);a=function(e){for(var t=0,n="";t<e.length;){var i=e[t++];if(i>127)if(i>191&&i<224){if(t>=e.length)throw new Error("UTF-8 decode: incomplete 2-byte sequence");i=(31&i)<<6|63&e[t++]}else if(i>223&&i<240){if(t+1>=e.length)throw new Error("UTF-8 decode: incomplete 3-byte sequence");i=(15&i)<<12|(63&e[t++])<<6|63&e[t++]}else{if(!(i>239&&i<248))throw new Error("UTF-8 decode: unknown multibyte start 0x"+i.toString(16)+" at index "+(t-1));if(t+2>=e.length)throw new Error("UTF-8 decode: incomplete 4-byte sequence");i=(7&i)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++]}if(i<=65535)n+=String.fromCharCode(i);else{if(!(i<=1114111))throw new Error("UTF-8 decode: code point 0x"+i.toString(16)+" exceeds UTF-16 reach");i-=65536,n+=String.fromCharCode(i>>10|55296),n+=String.fromCharCode(1023&i|56320)}}return n}(new c.Zlib.Gunzip(l).decompress())}if(!a||"{"!==a[0]&&"["!==a[0])"null"===a&&(a=null);else try{a=JSON.parse(a)}catch(e){}var u={type:"event",message:{channelId:n,version:i,data:a}};this.onmessage&&this.onmessage({data:u})};const d=l;var u=[n(30296)],h=function(e,t,n){this.url=e,this.taskUrl=e.replace("/p","/tasks"),this.params=n,this.writable=!1,this.pendingMessages=[],this.subs={},this.authCb=[],this.waitAuth=!0,this.session=t,this.initWorker(),this.connect()},p=h.prototype;p.initWorker=function(){var e,t=u.join(";\n")+"/* jshint worker:true */\n/* jslint bitwise: true */\n// Worker for process ungzip hermes action in background.\n// It process incoming string and return ns message in format.\n// {type: 'event', message: {\n// channelId: \"channel id\",\n//   version: \"message version\",\n//   data: \"message data\"\n// }}\n\n// convert Uint8Array to UTF-8 string\n//\n// data - The Uint8Array\nfunction decodeUtf8(bytes) {\n  var i = 0,\n    s = '';\n  while (i < bytes.length) {\n    var c = bytes[i++];\n    if (c > 127) {\n      if (c > 191 && c < 224) {\n        if (i >= bytes.length) {\n          throw new Error('UTF-8 decode: incomplete 2-byte sequence');\n        }\n        c = (c & 31) << 6 | bytes[i++] & 63;\n      } else if (c > 223 && c < 240) {\n        if (i + 1 >= bytes.length) {\n          throw new Error('UTF-8 decode: incomplete 3-byte sequence');\n        }\n        c = (c & 15) << 12 | (bytes[i++] & 63) << 6 | bytes[i++] & 63;\n      } else if (c > 239 && c < 248) {\n        if (i + 2 >= bytes.length) {\n          throw new Error('UTF-8 decode: incomplete 4-byte sequence');\n        }\n        c = (c & 7) << 18 | (bytes[i++] & 63) << 12 | (bytes[i++] & 63) << 6 | bytes[i++] & 63;\n      } else {\n        throw new Error('UTF-8 decode: unknown multibyte start 0x' + c.toString(16) + ' at index ' + (i - 1));\n      }\n    }\n    if (c <= 0xffff) {\n      s += String.fromCharCode(c);\n    } else if (c <= 0x10ffff) {\n      c -= 0x10000;\n      s += String.fromCharCode(c >> 10 | 0xd800);\n      s += String.fromCharCode(c & 0x3ff | 0xdc00);\n    } else {\n      throw new Error('UTF-8 decode: code point 0x' + c.toString(16) + ' exceeds UTF-16 reach');\n    }\n  }\n  return s;\n}\nvar TABLE = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\nvar REGEX_SPACE_CHARACTERS = /<%= spaceCharacters %>/g;\n\n// custom base64 decode function for Safari\n// https://bugs.webkit.org/show_bug.cgi?id=55663\nfunction decode(input) {\n  input = String(input).replace(REGEX_SPACE_CHARACTERS, '');\n  var length = input.length;\n  if (length % 4 === 0) {\n    input = input.replace(/==?$/, '');\n    length = input.length;\n  }\n  if (length % 4 === 1 ||\n  // http://whatwg.org/C#alphanumeric-ascii-characters\n  /[^+a-zA-Z0-9]/.test(input)) {\n    return;\n  }\n  var bitCounter = 0;\n  var bitStorage;\n  var buffer;\n  var output = '';\n  var position = -1;\n  while (++position < length) {\n    buffer = TABLE.indexOf(input.charAt(position));\n    bitStorage = bitCounter % 4 ? bitStorage * 64 + buffer : buffer;\n    // Unless this is the first of a group of 4 charactersâ€¦\n    if (bitCounter++ % 4) {\n      // â€¦convert the first 8 bits to a single ASCII character.\n      output += String.fromCharCode(0xff & bitStorage >> (-2 * bitCounter & 6));\n    }\n  }\n  return output;\n}\nvar base64decode = decode;\ntry {\n  base64decode = !atob ? decode : atob;\n} catch (e) {}\nthis.onmessage = function (e) {\n  var data = e.data;\n  var parts = data.split('\\n');\n  var channelId = parts.shift();\n  var version = parseInt(parts.shift(), 10);\n  var isArchived = parts[0] === 'GZIP';\n  if (isArchived) {\n    parts.shift();\n  }\n  var rawData = parts.join('\\n');\n  if (isArchived) {\n    var source = base64decode(rawData);\n    var len = source.length;\n    var bytes = new Uint8Array(len);\n    for (var i = 0; i < len; i++) {\n      bytes[i] = source.charCodeAt(i);\n    }\n    /* globals Zlib */\n    var gunzip = new Zlib.Gunzip(bytes);\n    var plain = gunzip.decompress();\n    rawData = decodeUtf8(plain);\n  }\n  if (rawData && (rawData[0] === '{' || rawData[0] === '[')) {\n    try {\n      rawData = JSON.parse(rawData);\n    } catch (ex) {}\n  } else if (rawData === 'null') {\n    rawData = null;\n  }\n  postMessage({\n    type: 'event',\n    message: {\n      channelId: channelId,\n      version: version,\n      data: rawData\n    }\n  });\n};",n=window.URL.createObjectURL(new Blob([t]));try{e=new Worker(n)}catch(t){e=new d}this.worker=e;var i=this;e.onmessage=function(e){var t=e.data,n=t.message;"event"===t.type?i.subs[n.channelId]&&(r().isNumber(n.version)&&(i.subs[n.channelId].version=n.version),r().each(i.subs[n.channelId].callbacks,(function(e){e&&e(n.data,n.version)}))):t.type},e.onerror=function(e){}},p.connect=function(){if(!this.primus){var e=r().extend(this.params,{reconnect:{retries:1/0,max:"30000 ms"},strategy:["online","timeout","disconnect"],websockets:!0,pingTimeout:3e4,transport:{transports:["websocket"]}}),t=this,n=this.primus=new(a())(this.url,e),i=0;n.on("open",(function(){t.auth(t.session,i>=1,(function(){t.writable=!0,r().each(t.pendingMessages,(function(e){t.write(e)})),t.pendingMessages.length=0,i>1&&t.reconnect()})),i++})),n.on("data",(function(e){t.handleMessage(e)})),n.on("readyStateChange",(function(e){e!==open&&(t.writable=!1)})),n.on("error",(function(e){e&&"close"===e.type&&(t.writable=!1)}))}},p.handleMessage=function(e){var t,n,i;0===e.indexOf("SUBSCRIBED")?(t=e.split(" "),i=parseInt(t.pop(),10),t.shift(),n=t.join(" "),this.subs[n]&&(this.subs[n].version=i,this.subs[n].active=!0)):0===e.indexOf("AUTHENTICATED")?(this.waitAuth=!1,r().each(this.authCb,(function(e){e()})),this.authCb=[]):this.worker.postMessage(e)},p.reconnect=function(){var e=this;r().each(this.subs,(function(t,n){e.subscribe(n,void 0,t.params,t.auth,!0)}))},p.auth=function(e,t,n){(t||this.session!==e)&&(this.waitAuth=!0,this.write("AUTH "+e,!0),this.session=e),this.waitAuth&&r().isFunction(n)?this.authCb.push(n):n&&n()},p.subscribe=function(e,t,n,i,s){var a=!1;this.subs[e]||(a=!0,this.subs[e]={params:n,callbacks:{},auth:i});var o=this.guid();return"function"==typeof t&&(this.subs[e].callbacks[o]=t),(a||s)&&(n=n?" "+n:"",i?this.write("AUTHSUB "+i+" "+e+n):this.write("SUB "+e+n)),o},p.subscribeAuthLast=function(e,t,n){return this.subscribe(e,n,"LAST",t)},p.subscribeLast=function(e,t){return this.subscribe(e,t,"LAST")},p.subscribeAll=function(e,t){return this.subscribe(e,t,"ALL")},p.subscribeFrom=function(e,t,n){return this.subscribe(e,n,"FROM "+t)},p.unsubscribe=function(e,t){var n=this;this.subs[e]&&(r().isFunction(t)?r().each(this.subs[e].callbacks,(function(t,i){delete n.subs[e].callbacks[i]})):r().isString(t)&&delete this.subs[e].callbacks[t],0!==r().keys(this.subs[e].callbacks).length&&t||(this.write("UNSUB "+e),delete this.subs[e]))},p.write=function(e,t){this.primus&&(this.writable||t)?this.primus.write(e):this.pendingMessages.push(e)},p.guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},p.fetchTaskFallback=async function(e){try{const t=await fetch(this.taskUrl+"/"+e,{mode:"cors"}),n=await t.text(),i=new d,s=new Promise((e=>{i.onmessage=function(t){t.data&&t.data.message&&t.data.message.data?e(t.data.message.data):e(null)},i.postMessage("1\n1\n"+n)}));return await s}catch(e){return null}};const f=h;var m=n(93443),g=n(49088);function b(){var e=(0,g.p)();return e||(e="00000000-0000-0000-0000-000000000000"),e}var v=new f(i.Z.get("nsServer"),b());const y=function(){v.auth(b())};m.Z.subscribe("session:logout",y),y();const w=v},33468:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var i=n(96486),s=n.n(i),a=n(49721),o=n(97137),r=n(93443),c=n(1650),l=n(177),d=n.n(l),u=n(54565);var h=r.Z.create(n(22026)),p=!1,f=null;const m=d().compile('<strong>Attention!</strong> We\'ve released a new version of the {{whitelabel}} IDE.\nPlease reload the page at your earliest convenience to get the latest and greatest {{whitelabel}},\nand to avoid any possible issues.\nCheck out the <a href="https://docs.codio.com/instructors/getstarted/support/changelog.html#changelog" target="_blank">changelog</a> for what\'s new.\n')({whitelabel:u.Z.get("whitelabel")});let g=!1;r.Z.subscribe("project:shutdown",(()=>g=!0)),r.Z.subscribe("app:timeChunkMsSpent",(()=>g=!1)),c.Z.subscribeLast("events/maintenance",(function(e){if(s().isObject(e)&&null!==r.Z){if((p=e.maintenance)&&e.fs)if(a.default.currentProject&&a.default.currentProject.userFileServer){var t=a.default.currentProject.userFileServer.replace("-file-server","");p=s().includes(e.fs,t)}else p=!1;p&&function(e){f&&(f.$alert.remove(),f.hide());var t=e.message,n={id:"client-maintenance-notice"+e.state,type:"info",fadeOut:{enabled:!0,delay:54e4}};switch(e.state){case"warn":break;case"prepare":n.fadeOut.delay=6e4;break;case"start":case"done":n.fadeOut.enabled=!1,window.location.reload()}f=o.Z.notify(t,n)}(e)}})),c.Z.subscribeLast("events/versions",(function(e){if(s().isObject(e)&&null!==r.Z){var t=e.major,n=e.version,i=e.component;if(s().isEmpty(i)||"client"===i){var a,c,l=u.Z.get("currentVersion")!==n;l&&h.updateAvailable(),l&&t&&(setInterval((()=>{g&&location.reload()}),36e5+(a=1e3,c=36e5,a=Math.ceil(a),c=Math.floor(c),Math.floor(Math.random()*(c-a+1))+a)),o.Z.notify(m,{id:"client-release-notice",type:"info",fadeOut:{enabled:!1}}))}}}));const b={isMaintenance:function(){return p}}},83902:()=>{RegExp.escape||(RegExp.escape=function(e){return String(e).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")})},60977:(e,t,n)=>{"use strict";n.d(t,{j:()=>m});var i=n(96486),s=n.n(i),a=n(72129),o=n(13302),r=n(54565),c=n(72736);let l=null;const d=["ACTIVE","EXPIRING","PAST_DUE"],u="trial",h="paid",p=(0,o.jF)();let f=[];const m=e=>{l=e;const t=r.Z.get("posthog");t&&t.apiKey&&t.apiHost&&g(l.currentUser)},g=async e=>{if(e.incognitoLogin||"TEACHER"!==e.get("details").get("type"))_();else try{const[t,n]=await Promise.all([a.default.OrganizationManager.getMyOrganizations(),a.default.SubscriptionManager.getSubscriptions()]);b(e,t,n)}catch{}},b=(e,t,n)=>{const i=((e,t)=>{if(s().isEmpty(e))return null;const n=s()(t).map(((e,t)=>({...e,orgId:t}))).filter((e=>d.includes(e.state))).groupBy((e=>e.planId===p?u:h)).value(),i=n[h]||[],a=n[u]||[],o=s().isEmpty(i)?a:i;let r;const c=s().map(o,"orgId"),l=s().isEmpty(c)?e:s().filter(e,(e=>c.includes(e.id)));return r=s().sortBy(l,(e=>e.createdTimestampMs))[0],{organization:r,subscription:t[r.id]||null}})(t,n);if(null==i||!i.organization)return void _();(()=>{const{apiKey:e,apiHost:t}=r.Z.get("posthog");var n,i,s,a,o,c;n=document,(i=window.posthog||[]).__SV||(window.posthog=i,i._i=[],i.init=function(e,t,r){function l(e,t){var n=t.split(".");2==n.length&&(e=e[n[0]],t=n[1]),e[t]=function(){e.push([t].concat(Array.prototype.slice.call(arguments,0)))}}(o=n.createElement("script")).type="text/javascript",o.crossOrigin="anonymous",o.async=!0,o.src=t.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(c=n.getElementsByTagName("script")[0]).parentNode.insertBefore(o,c);var d=i;for(void 0!==r?d=i[r]=[]:r="posthog",d.people=d.people||[],d.toString=function(e){var t="posthog";return"posthog"!==r&&(t+="."+r),e||(t+=" (stub)"),t},d.people.toString=function(){return d.toString(1)+".people (stub)"},s="init capture register register_once register_for_session unregister unregister_for_session getFeatureFlag getFeatureFlagPayload isFeatureEnabled reloadFeatureFlags updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures on onFeatureFlags onSessionId getSurveys getActiveMatchingSurveys renderSurvey canRenderSurvey identify setPersonProperties group resetGroups setPersonPropertiesForFlags resetPersonPropertiesForFlags setGroupPropertiesForFlags resetGroupPropertiesForFlags reset get_distinct_id getGroups get_session_id get_session_replay_url alias set_config startSessionRecording stopSessionRecording sessionRecordingStarted captureException loadToolbar get_property getSessionProperty createPersonProfile opt_in_capturing opt_out_capturing has_opted_in_capturing has_opted_out_capturing clear_opt_in_out_capturing debug getPageViewId captureTraceFeedback captureTraceMetric".split(" "),a=0;a<s.length;a++)l(d,s[a]);i._i.push([e,t,r])},i.__SV=1),posthog.init(e,{api_host:t,person_profiles:"identified_only"})})();const{organization:a,subscription:o}=i,c=e.get("details").get("email"),l={email:c,name:e.displayName(),role:e.get("details").get("type"),organization:{id:a.id,name:a.details.name,type:a.details.type}};o&&(l.organization.maxUsers=o.memberLimit,o.expirationTimestamp&&(l.organization.licenseExpiresDate=new Date(o.expirationTimestamp).toISOString()),l.organization.plan=o.planId),v(),window.posthog.identify(c,l)},v=()=>{y(),f.push(c.Z.on(c.F.PLAGIARISM_PLAYER.OPEN,(()=>{l.currentProject.eduStartedAssignmentInfo&&w("plagiarism_player_opened")})))},y=()=>{s().forEach(f,(function(e){e()})),f=[]},w=(e,t)=>{window.posthog&&window.posthog.capture(e,{...t,origin:"ide"})},_=()=>{y(),window.posthog&&window.posthog.reset()}},91689:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Ge});var i=n(96486),s=n.n(i),a=n(49721),o=n(59050),r=n(52308),c=n.n(r),l=n(177),d=n.n(l),u=n(72129),h=n(19575),p=n(15094),f=n(9380),m=n(54565),g=n(1650),b=n(56609),v=n(97137),y=n(11533),w=n.n(y),_=n(95611),k=n(43553),P=n(93443),C=n(34391);var x=n(67277);const E=d().compile('<div class="export-dialog">\r\n  <div class="export-wait-message">Your download will begin in a few moments.</div>\r\n  <div class="exporting-message"><i class="icon icon-spinner" /><span>Preparing...</span>\r\n  </div>\r\n  <div class="export-link">If your download does not begin automatically, click <a\r\n    target="_blank" aria-label="start download of project">here</a>.\r\n  </div>\r\n</div>\r\n'),S=d().compile('<div class="export-dialog">\n  <p>\n    This file `{{name}}` cannot be opened as it is either a&nbsp;binary&nbsp;file or is larger&nbsp;than&nbsp;500Kb.\n  </p>\n  <div>\n    Would you like to download this file?\n  </div>\n  <a class="file-download-link" target="_blank"></a>\n</div>\n');var I=null,A="download"in document.createElement("a");function T(e,t){const n=encodeURIComponent(e),i=t?"?codio_download_name=".concat(encodeURIComponent(t)):"";return m.Z.get("backendSchema")+h.default.path.join(a.default.currentProject.backendDomain,n)+i}function j(e){var t=new C.Z({title:e,content:E(),width:270,onClose:function(){t=null},buttons:[{title:"Close",onClick:function(){return t&&t.close()},type:1}]});return t}function Z(e){return u.default.BuildManager.export(e).then(u.default.standardCallbackTask)}P.Z.subscribe("command:project:export:zip",(function(e,t){!function(e){k.Z.dispatch("show","loading-spinner");var t=j("Export");Z(e||a.default.currentProject.guid).then((function(e){k.Z.dispatch("hide","loading-spinner");var n=t.content();if(n){n.find(".exporting-message").hide();var i=n.find(".export-link");i.show(),i.find("a").attr("href",e),window.open(e,"_blank")}})).catch((function(e){t.close(),e&&v.Z.error(e.message)}))}(t&&t.guid)})),P.Z.subscribe("command:project:export:file",(function(){var e,t;e=j("Download"),t=I,_.Z.saveAllAndWait().then((function(){var n=e.content();if(n){n.find(".exporting-message").hide();var i=n.find(".export-link");i.show();var s=i.find("a");if(A){var a=h.default.path.parse(t).name;s.attr("href",T(t,a)).attr("download",a)}else s.attr("href",T(t));s[0].click()}})).catch((function(t){e.close(),t&&v.Z.error(t.message)}))})),P.Z.subscribe("filetree:select:#file",(function(e){I=e.file})),P.Z.subscribe("shareman:error",(function(e,t){var n=[x.S.ERR_BINARY_FILE,x.S.ERR_SIZE_LIMIT];t&&t.path&&s().includes(n,t.message)&&function(e){var t=new C.Z({title:"Open File",content:S({name:s().escape(e)}),width:350,onClose:function(){t=null},buttons:[{title:"Download",onClick:function(){t&&t.content().find(".file-download-link")[0].click()},type:1},{title:"Cancel",onClick:function(){return t&&t.close()}}]}),n=t.content().find(".file-download-link");if(A){var i=h.default.path.parse(e).name;n.attr("href",T(e,i)).attr("download",i)}else n.attr("href",T(e))}(t.path)}));var O=P.Z.create(n(60936));function N(e){e.preventClosing(!1);var t=e.content(),n=e.buttons()[0];e.buttons()[1].enable(),n.enable(!0),t.find(":input").prop("disabled",!1)}P.Z.subscribe("command:project:delete",(function(){var e=a.default.currentProject;if(!e||!e.isAdmin)return;let t="Do you want to delete ".concat(e.name," Project?"),n="";if(e.authorAssignment){const{settings:i}=e.authorAssignment.assignment;t="Do you want to discard your changes to '".concat(i.name,"'?"),n="Discarding changes will revert the assignment to the last published state."}C.Z.showConfirm({description:t,description2:n,captcha:!0,onClose:(e.guid,function(e){var t,n=this;return!e||(a.default.currentProject.deleteProject=!0,(t=this).preventClosing(!0),t.buttons()[0].disable("Deleting...","loading"),t.buttons()[1].disable(),t.content().find(":input").prop("disabled",!0),a.default.currentProject.unsubscribeNS(),a.default.currentProject.remove().then((function(){n.close(C.Z.IDCANCEL),h.default.goBackOrLocation("/"+a.default.currentUser.name())})).catch(s().bind(N,null,n)),!1)})})}));var D=n(31706),M=function(){};M.prototype.postMessage=function(e){var t=w().create().diff(e.children,e.data),n=[];!function e(t,i){s().isPlainObject(t)?(i=""===i?i:i+"/",s().each(t,(function(t,n){e(t,i+n)}))):s().isArray(t)&&(0===t[1]&&0===t[2]||(1===t[0]||s().isString(t[0]))&&s().isPlainObject(t[1])&&s().isEmpty(t[1]))&&n.push(i)}(t,"");var i={type:"event",message:{diff:t,deletedFiles:n,data:e.data}};this.onmessage&&this.onmessage({data:i})};const R=M;var L=n(14462),F=n(96643),B=P.Z.create(n(60936)),U=[L,F],q=null,H=null,G=null,W=null,z=null,V=null,K=!1;var J=s().debounce((function(){K=!1,D.Z.syncStructure(G.guid)}),3e3,{maxWait:6e4});function Y(e){e&&e.length>600?K=!0:e.length>300&&J(),K?J():e&&s().each(e,Q)}function Q(e){switch(e.event){case"add":if(!G.exists(e.relativePath)){var t=e.dir?{}:1;$(e.relativePath,t),B.itemCreated({path:e.relativePath},t)}break;case"unlink":G.exists(e.relativePath)&&(ee(e.relativePath),B.itemDeleted({path:e.relativePath}));break;case"move":if(G.exists(e.relativeFrom)){$(e.relativePath,ee(e.relativeFrom));var n=h.default.path.parse(e.relativePath);B.itemMoved({from:e.relativeFrom,to:e.relativePath},n.name)}}}function X(e,t){var n=W,i=e?e.split("/"):[];if(i.pop(),0===i.length)return n;for(var a=0;a<i.length;a++){var o=i[a];if(s().has(n,o))n=n[o];else{if(!t)return null;n[o]={},n=n[o]}}return n}function $(e,t){if(null!==t){var n=h.default.path.parse(e);X(e,!0)[n.name]=t}}function ee(e){var t=h.default.path.parse(e),n=X(e);if(n){var i=s().cloneDeep(n[t.name]);return delete n[t.name],i}return null}!function(){var e=U.join(";\n")+"/* jshint worker:true */\n// Worker for process in background diff for two different project\n// structure snapshots\n// Incoming data: {\n//     children: \"current structure\",\n//     data: \"new structure\"\n// }\n//\n// Outgoing data: {\n//    type: 'event', message: {\n//        diff: \"structure diff\",\n//        deletedFiles: \"deleted files\",\n//        data: \"new data\"\n//    }\n// }\n//\nthis.onmessage = function (e) {\n  var data = e.data;\n\n  /* globals jsondiffpatch, _ */\n  var jsonDiffPatch = jsondiffpatch.create();\n  var diff = jsonDiffPatch.diff(data.children, data.data);\n  var deletedFiles = [];\n  function checkItem(item, path) {\n    if (_.isPlainObject(item)) {\n      path = path === '' ? path : path + '/';\n      _.each(item, function (child, key) {\n        checkItem(child, path + key);\n      });\n    } else {\n      if (_.isArray(item) && (item[1] === 0 && item[2] === 0 || (item[0] === 1 || _.isString(item[0])) && _.isPlainObject(item[1]) && _.isEmpty(item[1]))) {\n        deletedFiles.push(path);\n      }\n    }\n  }\n  checkItem(diff, '');\n  postMessage({\n    type: 'event',\n    message: {\n      diff: diff,\n      deletedFiles: deletedFiles,\n      data: data.data\n    }\n  });\n};",t=window.URL.createObjectURL(new Blob([e]));try{V=new Worker(t)}catch(e){V=new R}V.onmessage=function(e){var t=e.data,n=t.message;"event"===t.type?(n.diff&&(W=n.data,B.fileStructureUpdated()),s().each(n.deletedFiles,(function(e){Q({event:"unlink",relativePath:e})}))):t.type},V.onerror=function(e){}}();const te=function(){if(null!==G){const e=G.guid;G=null,W=null,null!==z&&clearInterval(z),z=null,g.Z.unsubscribe("project-structure/"+e,q),g.Z.unsubscribe("project-structure-events/"+e,H)}},ne=te,ie=function(){return W},se=function(e){if(!G)return;const t=G.guid;return u.default.ProjectStructureManager.removePath(t,e).then((function(){s().each(e,(function(e){Q({event:"unlink",relativePath:e})}))}))},ae=function(e){if(!G)return;const t=G.guid;return u.default.ProjectStructureManager.createFile(t,e).then((function(){const t=e.split("/"),n=(e,i)=>{const a=e?"".concat(e,"/").concat(i):i;if(G.exists(a)&&t.length>0)return n(a,t.shift());Q({dir:t.length>0,event:"add",relativePath:a}),s().delay((()=>{t.length>0&&n(a,t.shift())}),10)};n("",t.shift())}))},oe=function(e,t){if(!G)return;const n=G.guid;return u.default.ProjectStructureManager.moveItem(n,e,t).then((()=>h.default.promise.iterateAsync(e,((e,n)=>{let i=Promise.resolve();return p.Z.cached(e)&&(i=p.Z.getFile(e).rename(t[n])),i.then((()=>p.Z.updateCacheOnRename(e,t[n])))})))).then((()=>{for(let n=0,i=e.length;n<i;n++)Q({event:"move",relativeFrom:e[n],relativePath:t[n]})})).catch((e=>{throw B.fileStructureUpdated(),e}))},re=function(e,t){if(!G)return;const n=G.guid;return u.default.ProjectStructureManager.copyItem(n,e,t).then((function(){for(var n=0,i=t.length;n<i;n++){Q({event:"add",dir:"dir"===G.getFileInfo(e[n]).type,relativePath:t[n]})}})).catch((e=>{throw B.fileStructureUpdated(),e}))},ce=function(e){if(!G)return;const t=G.guid;return u.default.ProjectStructureManager.makeDirectory(t,e).then((function(){Q({dir:!0,event:"add",relativePath:e})}))},le=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};return new Promise((n=>{te(),G=e;const i=e.guid;t("loadProject:waitStructure"),z=setTimeout((function(){t("loadProject:runFailOver"),u.default.ProjectManager.getProject(G.guid).then((function(i){W||(t("loadProject:runFailOverDone"),console.warn("fallover load project structure done"),z=null,W=i.children,B.fileStructureUpdated(),n(e))}))}),12e3),q=g.Z.subscribeLast("project-structure/"+i,(function(i){null!==i&&(t("loadProject:processStructure"),W?function(e){V.postMessage({children:W,data:e})}(i):(null!==z&&clearTimeout(z),z=null,W=i,B.fileStructureUpdated(),n(e)))})),H=g.Z.subscribe("project-structure-events/"+i,Y)}))};var de=P.Z.create(n(60936));P.Z.subscribe("project:dataUpdate:#projectId",(function(e,t){var n,i,o,r;n=e.projectId,i=t.oldProject,o=t.newProject,(r=s().filter(["name","description","is_public","is_box_clonable","is_box_always_on","is_private_preview_allowed","dynamic_port_protection","secureBackendDomain"],(function(e){return i[e]!==o[e]}))).length&&de.preferencesUpdated({projectId:n},r),a.default.currentProject&&i.name!==o.name&&de.projectRenamed({projectId:n},{oldName:i.name,newName:o.name})}));const ue=JSON.parse('{"cells":[],"metadata":{},"nbformat":4,"nbformat_minor":2}'),he=f.Z.hotkey;var pe=P.Z.create(n(60936)),fe=P.Z.create(n(28755));const me=d().compile('<table border="0" width="100%" height="100%" cellpadding="0" cellspacing="0" bgcolor="#f0f0f0">\n    <tr>\n        <td align="center" valign="top" bgcolor="#f0f0f0" style="background-color: #f0f0f0;">\n            <table width="600" cellpadding="0" cellspacing="0" border="0" class="container" bgcolor="#ffffff">\n                <tr>\n                    <td class="header">\n                        <div>&nbsp;</div>\n                    </td>\n                </tr>\n                <tr>\n                    <td class="logo">\n                      <a href="https://codio.com"><img src="https://static-assets.codio.com/client/assets/images/codio-logo.2c5ee8d77c71d682.svg" title="Codio" /></a>\n                    </td>\n                </tr>\n                <tr>\n                    <td class="container-padding" bgcolor="#ffffff" style="background-color: #ffffff; padding-left: 30px; padding-right: 30px;">\n                        <br>\n                        <center><p>{{{ message }}}</p></center>\n                        <br>\n                        {{#if maintenance}}\n                        \x3c!-- todo: update here? --\x3e\n                        \x3c!-- ### BEGIN CONTENT ### --\x3e\n                        <p>Codio is currently offline while we perform some <strong>important maintenance</strong>, and make some exciting new changes. If this has caused you any inconvenience, we apologise and ask that you bear with us for a very short while.</p>\n                        <p><strong>We expect to be back up and running very soon</strong>. To find out the status, we strongly recommend that you check out our <a href="http://status.codio.com">status</a> page where you can subscribe to updates.</p>\n                        <p>In the meantime, if you have questions or queries, you can <a href="https://twitter.com/codiohq">tweet us</a> or email <a href="mailto:help@codio.com">help@codio.com</a></p>\n                        \x3c!-- ### END CONTENT ### --\x3e\n                        {{/if}}\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <table border="0" width="100%" height="100%" cellpadding="0" cellspacing="0" bgcolor="#fbfbfb" class="footer">\n                            <tr>\n                                <td class="social">\n                                    Follow us: &nbsp;  &nbsp; <a href="http://www.twitter.com/codiohq" class="twitter"><img src="https://static-assets.codio.com/client/assets/images/icons/social/x-social-media-logo-icon.f6382415ae004d1c.svg" width="20" height="20" border="0" /> Twitter</a> &nbsp; <a href="http://www.facebook.com/codiohq" class="facebook"><img src="https://static-assets.codio.com/client/assets/images/icons/social/facebook-round-color-icon.c25507f9b39d76e6.svg" width="20" height="20" border="0" />  Facebook</a>\n                                </td>\n                                <td class="subscription">\n                                    <a href="https://codio.com">codio.com</a> |\n                                    <a href="mailto:help@codio.com">help@codio.com</a>\n                                </td>\n                            </tr>\n                        </table>\n                    </td>\n                </tr>\n            </table>\n        </td>\n    </tr>\n</table>\n');var ge={},be=null,ve=null,ye=function(e){this._project=e,this._updateProjectHandlers={},this._isOff=!1},we=ye.prototype;function _e(){var e=["<strong>Attention!</strong><br/>","This project is currently being migrated across to an all singing, all ","dancing, and all new fileserver. As a result, it has been disabled","in order to minimise any potential issues during migration. This will ","only take a few minutes. So why not get yourself a cuppa!"].join(" ");c()("body").block({content:c()(me({message:e,maintenance:!1,whitelabel:m.Z.get("whitelabel")})),className:"ui-maintenance fullscreen"})}function ke(e){if(e&&this.eduStartedAssignmentInfo){var t=this.eduStartedAssignmentInfo.started.assignmentId,n=e.result;if(n&&n.codeCommentsEvent&&n.codeCommentsEvent===this.assignmentProjectId)return void(n.codeCommentsEventInitiatedBy!==a.default.currentUser.getAccountUid()&&pe.commentsUpdated({updateId:h.default.GUID()}));if(s().includes(n.excludeUsers,a.default.currentUser.getAccountUid()))return;if(n.includeUsers&&!s().includes(n.includeUsers,a.default.currentUser.getAccountUid()))return;if(n&&"started"!==n.status&&"access"!==n.status){if(s().includes(n.assignments,t)){const e="complete"===n.status,t=this.examMode.timedMode.enabled&&e;"no-access"===n.status||t?(i=["<strong>Attention!</strong><br/>","This assignment is disabled. Please consult your instructor for more information."].join(" "),c()("body").block({content:c()(me({message:i,maintenance:!1,whitelabel:m.Z.get("whitelabel")})),className:"ui-maintenance fullscreen"})):"complete"===n.status&&(this.eduStartedAssignmentInfo.started.completed?(this.eduStartedAssignmentInfo.started.completed.completed=!0,this.eduStartedAssignmentInfo.started.completed.completedAt=new Date):this.eduStartedAssignmentInfo.started.completed={completed:!0,completedAt:new Date},pe.completedStateUpdated())}}else c()("body").unblock()}var i}function Pe(e){if(e){if(e.projectCall)return void(e.target!==this.guid&&pe.callStarted());if(e.collaboration)return e.status?void pe.collaborationDriverUpdate(e):void pe.driverTransferReq(e);if(e.collaborationActiveUsersUpdate)return void pe.collaborationActiveUsersUpdate(e);if(e.codeCommentsEvent&&e.codeCommentsEvent===this.assignmentProjectId)return void(e.codeCommentsEventInitiatedBy!==a.default.currentUser.getAccountUid()&&pe.commentsUpdated({updateId:h.default.GUID()}));if(!0===e.migrate){var t=["We are about to migrate this project to a new bigger and better","fileserver. This will require that we disable the project for a","few minutes. This will begin in 30 seconds..."].join(" ");switch(e.state){case"prepare":v.Z.notify(t,{id:"client-migration-notice",type:"info",fadeOut:{enabled:!0,delay:3e4}});break;case"start":_e();break;case"done":c()("body").unblock()}return}if(!0===e.delete)return this.unsubscribeNS(),void(a.default.ide.isClosed||(he.execute("project","close",{}),v.Z.info("This project was removed.")));if(!0===e.rename)return void pe.renaming();if(!0===e.shutdown)return v.Z.info("Project container was stopped by inactivity timeout, please reload tab"),void pe.shutdown()}var n=this._project.name!==e.name,i=s().cloneDeep(this._project);if(n&&!s().isEmpty(this._project.ownerId)){e.path=this._project.owner.toLowerCase()+"/"+e.pathName;var o=window.location.pathname.replace("/"+i.pathName,"/"+e.pathName);a.default.router.replaceWith(o,void 0,!1)}s().assign(this._project,e),function(e,t){var n=s().cloneDeep(e);delete n["access-control"],delete n.accessTime;var i=s().cloneDeep(t);return delete i["access-control"],delete i.accessTime,!!w().create().diff(n,i)}(i,this._project)&&pe.projectDataUpdate({projectId:e.guid},{oldProject:i,newProject:this._project})}function Ce(e,t,n,i){n=n||[];var a,o=""===(i=i||"")?"":i+"/";if(t.filesSeparate){var r=[],c=[];s().forOwn(e,(function(e,t){s().isNumber(e)?r.push(t):".git"!==t&&c.push(t)})),xe(r,t.isCaseSensitive),xe(c,t.isCaseSensitive),a=r.concat(c)}else xe(a=s().keys(e),t.isCaseSensitive);s().forEach(a,(function(a){var r=e[a];s().isObject(r)?Ce(r,t,n.concat(a),o+a):t.callback(a,n,i)}))}function xe(e,t){t?e.sort():e.sort(Ee)}function Ee(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}function Se(e){void 0!==e.file1&&delete ge[e.file1],void 0!==e.file2&&delete ge[e.file2]}function Ie(){ge={}}s().forEach(["name","guid","type","description","is_box_clonable","is_box_always_on","is_private_preview_allowed","forks","branches","currentBranch","sshHost","sshPort","userFileServer","pathName","always_on_box_slot_owner_id","created","stackVersionId","archive_state","gigaBoxSlot","isReadOnly","guides","isLatestStack","penalties","dynamicPreviewCookie","start_container_task_id","needPublish","projectCallStartDate","track"],(function(e){Object.defineProperty(we,e,{get:function(){return this._project[e]}})})),s().forIn({isPublic:"is_public",isFreePrivate:"is_free_private",isPrivateBitbucket:"is_private_bitbucket"},(function(e,t){Object.defineProperty(we,t,{get:function(){return this._project[e]}})})),s().forEach(["shared","recent"],(function(e){Object.defineProperty(we,e,{get:function(){var t=this._project[e];return!s().isUndefined(t)&&t}})})),Object.defineProperty(we,"codioMenuFilter",{get:function(){var e=this._project.codioMenuFilter;return s().isObject(e)?e:{}}}),Object.defineProperty(we,"dynamic_port_protection",{get:function(){var e=this._project.dynamic_port_protection;return!!s().isUndefined(e)||e}}),Object.defineProperty(we,"_plugins",{get:function(){var e=this._project.pluginsData;return s().isObject(e)?e:{}}}),Object.defineProperty(we,"children",{get:function(){var e=ie();return s().isUndefined(e)?{}:e}}),Object.defineProperty(we,"generation",{get:function(){return"lxc"===this._project.version?2:1}}),Object.defineProperty(we,"migrated",{get:function(){return this._project.migrated_from_lxc}}),Object.defineProperty(we,"isFork",{get:function(){var e=this._project.isFork,t=!!this._project.parentProject;return!s().isUndefined(e)&&(e&&t)}}),Object.defineProperty(we,"runMode",{get:function(){const e=this._project.runMode;return s().isUndefined(e)?0:e}}),Object.defineProperty(we,"parent",{get:function(){const e=this._project.parentProject;return{ownerId:e.ownerId,owner:e.owner,href:e.owner?"/".concat(e.ownerPath,"/").concat(e.pathName):"/".concat(this._project.parent),name:e.name}}}),Object.defineProperty(we,"backendDomain",{get:function(){return this._project.backendDomain+"."+m.Z.get("boxDomain")}}),Object.defineProperty(we,"secureBackendDomain",{get:function(){if(this._project.isPublic||!this._project.is_private_preview_allowed||!this._project.secureBackendDomain)return"";var e=this._project.secureBackendDomain,t=m.Z.get("boxDomain");return m.Z.get("backendSchema")+e+"."+t}}),Object.defineProperty(we,"backendSubDomain",{get:function(){return this._project.backendDomain}}),Object.defineProperty(we,"access",{get:function(){return{control:this._project["access-control"],context:null}}}),Object.defineProperty(we,"owner",{get:function(){var e=this._project;return{name:e.owner,id:e.ownerId}}}),Object.defineProperty(we,"isPrivate",{get:function(){return!this.isPublic}}),Object.defineProperty(we,"isAdmin",{get:function(){return"OWNER"===this.access.control||"ADMIN"===this.access.control}}),Object.defineProperty(we,"isAuthor",{get:function(){return this.isAuthorProject}}),Object.defineProperty(we,"isUserOwner",{get:function(){return this.owner.id===a.default.currentUser.getAccountUid()}}),Object.defineProperty(we,"isUserAssignee",{get:function(){const e=a.default.currentUser.getAccountUid();return this.assigneeInfo&&(!this.assigneeInfo.isGroup&&this.assigneeInfo.userId===e||this.assigneeInfo.isGroup&&this.assigneeInfo.group.userIds.includes(e))}}),Object.defineProperty(we,"isOwner",{get:function(){return"OWNER"===this.access.control}}),Object.defineProperty(we,"readOnly",{get:function(){return"READ"===this.access.control||this.isReadOnly}}),Object.defineProperty(we,"href",{get:function(){return"/"+this.path}}),Object.defineProperty(we,"path",{get:function(){return this.owner.name?[this.ownerName,this.pathName].join("/"):["projects",this.guid].join("/")}}),Object.defineProperty(we,"ownerName",{get:function(){return s().has(this.owner,"name")?this.owner.name:this.owner}}),Object.defineProperty(we,"sortedBookPages",{get:function(){return this._sortedBookPages},set:function(e){this._sortedBookPages=e}}),Object.defineProperty(we,"assignmentProjectId",{get:function(){return this.eduStartedAssignmentInfo&&this.eduStartedAssignmentInfo.started?this.eduStartedAssignmentInfo.started.projectId:this.guid}}),Object.defineProperty(we,"writableCopy",{get:function(){const{started:e}=this.eduStartedAssignmentInfo||{};return e&&this.owner.id&&(e.assignee.groupId||e.assignee.userId!==this.owner.id)}}),Object.defineProperty(we,"regradeRequests",{get:function(){const{started:e}=this.eduStartedAssignmentInfo||{};return null==e?void 0:e.regradeRequests},set:function(e){var t;null!==(t=this.eduStartedAssignmentInfo)&&void 0!==t&&null!==(t=t.started)&&void 0!==t&&t.regradeRequests&&s().isArray(e)&&(this.eduStartedAssignmentInfo.started.regradeRequests=e)}}),we.exists=function(e){return s().isObject(this.getFileInfo(e))},we.subscribeNS=function(e){if(be=g.Z.subscribe("project/"+this.guid,Pe.bind(this)),this.eduStartedAssignmentInfo){var t="course/"+this.course.id;ve=g.Z.subscribe(t,ke.bind(this))}return this.userFileServer||_e(),le(this,e)},we.unsubscribeNS=function(){if(be){if(g.Z.unsubscribe("project/"+this.guid,be),this.eduStartedAssignmentInfo){var e="course/"+this.course.id;g.Z.unsubscribe(e,ve)}ne(this),be=null}},we.checkArchivedState=async function(e){var t="Unpacking project failed.";if("BROKEN"===e.archive_state)throw new Error(t);return"NORMAL"===e.archive_state?e:(c()("div.ac").showFProgress("Unpacking project..."),new Promise(((n,i)=>{var a=g.Z.subscribe("project/"+e.guid,(function(o){o&&("NORMAL"===o.archive_state?(g.Z.unsubscribe("project/"+e.guid,a),e._project.userFileServer=o.userFileServer,"lxc"!==e._project.version&&(e._project.version=o.version,e._project.migrated_from_lxc=o.migrated_from_lxc,e._project.stackVersionId=o.stackVersionId),c()("div.ac").showFProgress("Loading project..."),s().delay((function(){n(e)}),100)):"BROKEN"===o.archive_state&&(g.Z.unsubscribe("project/"+e.guid,a),i(t)))}))})))},we.getFileInfoInsensitive=function(e){if("/"===e||""===e)return this;const t=(e,i)=>{const a=s().head(n);if(!s().isString(a))return[];const o=s()(i).keys().find((e=>e.toLowerCase()===a.toLowerCase()));if(s().isUndefined(o))return[];{const e=t(s().tail(n),i[o]);return[o].concat(e)}},n=e?e.split("/"):[],i=t(n,this.children);return h.default.realName(i.join("/"))},we.getFileInfo=function(e){if("/"===e||""===e)return this;for(var t=e?e.split("/"):[],n=this.children,i=0;i<t.length;i++){var a=t[i];if(!s().has(n,a))return;n=n[a]}return{name:h.default.realName(t[t.length-1]),type:s().isNumber(n)?"file":"dir"}},we.getPluginData=function(e){return this._plugins[e]||{}},we.setPluginData=async function(e,t,n){var i=s().cloneDeep(this.getPluginData(e));i[t]=n;var a=s().cloneDeep(this._plugins);if(a[e]=i,!this.readOnly)return this.update({pluginsData:a});this._project.pluginsData=a},we.files=function(e){e=e||{},e=s().clone(e),e=s().defaults(e,{isCaseSensitive:!0,filesSeparate:!1});var t=[];return e.callback=function(e,n,i){e=h.default.realName(e),i=""===i?"":i+"/";var s=h.default.realName(i+e);t.push({name:e,path:s})},Ce(this.children,e),t},we.getBinaryFileContent=async function(e,t){if(!this.exists(e))throw new Error(e+" does not exist.");var n=(t=s().defaults(t||{},{decodeContents:!1})).decodeContents;return o.Z.getFile(e,n).catch((function(){return new Error("Error load file. "+e)}))},we.getBinaryFileBuffer=async function(e){if(!this.exists(e))throw new Error(e+" does not exist.");return o.Z.getFileBuffer(this.guid,e).catch((function(){throw new Error("Error load file.")}))},we.getFile=async function(e,t){if(!this.exists(e))throw new Error(e+" does not exist.");var n=p.Z.getFile(e);if((n?await h.default.promise.getState(n.status):null)===h.default.promise.STATES.FULFILLED)return p.Z.content(e);return(await this.file(e,t)).content},we.file=async function(e,t){t=s().defaults(t||{},{enableSharejs:!0,decodeContents:!0});var n=await p.Z.createFile(e,t);return n.synchronization.then((()=>n)).catch((()=>n))},we.unixFile=function(e,t){return this.file(e,t).then((function(t){return t.model.nonUnixLineBreaks&&(t.content(t.content),fe.filePropUpdate({path:e},{nonUnixLineBreaks:!1})),t}))},we.fileContent=async function(e){var t=p.Z.content(e);return null!==t?t:this.getFile(e)},we.createFolder=function(e,t){var n=(s().isEmpty(t)?"":t+"/")+e;return ce(n)},we.createFile=async function(e,t){var n=(s().isEmpty(t)?"":t+"/")+e;const i=await ae(n);if(!s().endsWith(e,".ipynb"))return i;const a=await this.file(n);return new Promise(((e,t)=>{a.content=JSON.stringify(ue,null,1),s().defer((async()=>{try{await _.Z.saveAllAndWait(),await a.close(!0),e()}catch(e){t(e)}}))})).then((()=>i))},we.renameItem=function(e,t){return _.Z.saveAllAndWait().then((function(){return oe([e],[t])}))},we.moveItems=function(e,t){return _.Z.saveAllAndWait().then((function(){return oe(e,t)}))},we.copyItems=function(e,t){return re(e,t)},we.deleteItems=function(e){e.sort();var t={},n=[];return e.forEach((function(e,i){if(0===i)t[e]=!0,n.push(e);else{var s=e.split("/");s.pop();var a=s.join("/");t[a]||(n.push(e),t[e]=!0)}})),se(n)},we.getImageDataURI=async function(e){if(void 0!==ge[e])return ge[e];const t=h.default.path.getFileExtension(e);return this.getBinaryFileContent(e,{enableSharejs:!1,decodeContents:!1}).then((function(n){const i=h.default.arrayBufferToBase64(n),s="data:image/"+t+";base64,"+i;return ge[e]=s,s})).catch((()=>{throw new Error(e)}))},we.checkout=async function(e){if(e&&this.currentBranch!==e)return this.update({currentBranch:e})},we.getShareFile=function(e){return b.Z.getDocuments()[e]},we.update=function(e){s().defaults(e,{guid:this.guid});var t=(new Date).getTime();return new Promise(((n,i)=>{this._updateProjectHandlers[t]=P.Z.subscribe("project:dataUpdate:#projectId",(()=>{this._updateProjectHandlers[t]&&(P.Z.unsubscribe(this._updateProjectHandlers[t]),delete this._updateProjectHandlers[t]),n()})),u.default.ProjectManager.update(e).catch((n=>{e.name!==this._project.name&&pe.renameFailed(),P.Z.unsubscribe(this._updateProjectHandlers[t]),i(n)}))}))},Object.defineProperty(we,"protectLayoutAllowed",{get:function(){return["guides","search","change-player","code-comments","grading","call"]}}),Object.defineProperty(we,"protectLayoutValue",{get:function(){var e=this;return e.eduStartedAssignmentInfo&&e.guides&&e.guides.metadata&&!e.isOpenedByTeacher&&e.guides.metadata.protectLayout||!1}}),we.temporaryDisableProtectLayout=function(){var e=this.protectLayout;if(!this.protectLayoutDisabled){var t=this;this.protectLayoutDisabled=!0,this.protectLayout=!1,s().delay((function(){t.protectLayout=e,t.protectLayoutDisabled=!1}),250)}},we.setNeedPublish=async function(e){var t;const n=a.default.currentProject;if((n.isAuthorProject||null!==(t=n.track)&&void 0!==t&&t.track)&&!n.isBook&&n.needPublish!==e)return this.update({guid:n.guid,needPublish:e})},he.plugin("project",n(57328)),we.isOff=function(){return this._isOff},we.export=function(){return Z(this.guid)},we.remove=function(){var e=this;return u.default.ProjectManager.remove(this.guid).then((function(){a.default.currentProject=null,O.deleted({projectId:e.guid})}))},we.uploadFile=function(e,t,n,i,s){const o=a.default.currentProject.guid;return u.default.ProjectStructureManager.uploadFile(e,o,t,n,i,s)},we.uploadFromS3File=function(e,t,n){return u.default.ProjectStructureManager.uploadFromS3File(a.default.currentProject.guid,e,t,n)},P.Z.subscribe("command:project:create",(function(){location.assign("/home/projects/new")})),P.Z.subscribe("command:goto:dashboard",(function(){h.default.goBackOrLocation("/home")})),P.Z.subscribe("item:created:#file1",Se),P.Z.subscribe("item:moved:#file1:#file2",Se),P.Z.subscribe("item:deleted:#file1",Se),P.Z.subscribe("project:open",Ie),P.Z.subscribe("project:close",Ie),P.Z.subscribe("project:shutdown",(function(){a.default.currentProject._isOff=!0}));const Ae=ye;var Te=function(e){this._project=e},je=Te.prototype;s().forEach(["name","guid","description","is_box_clonable","is_box_always_on","is_private_preview_allowed","dynamic_port_protection","always_on_box_slot_owner_id","stackVersionId"],(function(e){Object.defineProperty(je,e,{get:function(){return this._project[e]}})})),s().forIn({isPublic:"is_public",isFreePrivate:"is_free_private",isPrivateBitbucket:"is_private_bitbucket"},(function(e,t){Object.defineProperty(je,t,{get:function(){return this._project[e]}})})),Object.defineProperty(je,"runMode",{get:function(){var e=this._project.runMode;return s().isUndefined(e)?0:e}}),Object.defineProperty(je,"isPrivate",{get:function(){return!this.isPublic}}),je.update=function(e){return s().defaults(e,{guid:this.guid}),u.default.ProjectManager.update(e)};const Ze=Te;var Oe=P.Z.create(n(60936)),Ne=function(e){this.name=e.name,this.currentBranch=e.currentBranch,this.guid=e.guid,this.description=e.description,this.type=e.type,this.shared=!s().isUndefined(e.shared)&&e.shared,this.recent=!s().isUndefined(e.recent)&&e.recent,this.isPublic=e.is_public,this.isFreePrivate=e.freePrivate,this.isClonable=e.is_box_clonable,e.runMode?this.runMode=e.runMode:this.runMode=0,this.isFork=!s().isUndefined(e.isFork)&&(e.isFork&&!!e.parentProject),this.forks=e.forks,this.branches=e.branches,this.access={control:e["access-control"],context:e.accessContext},this.owner={name:e.owner,id:e.ownerId},this.isAdmin="OWNER"===this.access.control,this.path=[this.ownerName,e.pathName].join("/"),this.slug=e.pathName,this.href="/"+this.path,this.color=h.default.getRandomColor(e.guid),this.lastAccess=e.accessTime},De=Ne.prototype;De.update=function(e){return e.guid=this.guid,u.default.ProjectManager.update(e).then((function(e){Oe.preferencesUpdated({projectId:e.guid})}))},Object.defineProperty(De,"isPrivate",{get:function(){return!this.isPublic}}),Object.defineProperty(De,"ownerName",{get:function(){return s().has(this.owner,"name")?this.owner.name:this.owner}});const Me=Ne;var Re=n(68058),Le=P.Z.create(n(37791));var Fe=function(e,t,n){return 1===arguments.length&&(n=e),function(e,t){var n=t?function(e){return t.indexOf(e.guid)}:function(e){return(e.name+"").toLowerCase()};return e.sort((function(e,t){var i=n(e),s=n(t);return i<s?-1:i>s?1:i===s?0:void 0}))}(s().map(n,(function(t){return s().isUndefined(e)||(t[e]=!0),new Me(t)})),t)},Be=function(e){return u.default.ProjectManager.all(e).then(Fe)},Ue=async function(){const e=a.default.currentUser.getAccountUid(),t=Re.I_.get(e+"-recent-projects");return s().isEmpty(t)?[]:u.default.ProjectManager.getByIds(t).then((e=>Fe("recent",t,e)))},qe=function(e,t){if(!e||"all"===e)return!0;s().defaults(e,{session:"all",project:"all",projectType:"all",exceptType:[],route:"all",generation:"all",readOnlyAccess:!0,isBook:"all",uType:"all"});var n=a.default.currentProject,i=a.default.currentUser.isAnonymous()?"anonymous":"registered",o=a.default.currentUser.get("details").get("type"),r=s().isNull(n)?"all":n.access.control,c=s().isNull(n)?"all":n.generation,l=s().isNull(n)?"all":n.type;return!("all"!==e.uType&&!s().includes(e.uType,o))&&(!("all"!==e.session&&!s().includes(e.session,i))&&(!("all"!==e.project&&!s().includes(e.project,r))&&(!(!e.readOnlyAccess&&n.isReadOnly)&&(("all"===e.generation||e.generation===c)&&(!("all"!==e.projectType&&!s().includes(e.projectType,l))&&("all"!==e.exceptType&&!s().includes(e.exceptType,l)&&(!("all"!==e.route&&!s().includes(e.route,t))&&(function(e){var t=a.default.currentProject,n=s().isNull(t)?"all":t.isBook||!1;return"all"===e.isBook||e.isBook===n}(e)&&!0))))))))},He={};He.all=function(e){return!a.default.currentUser.isAnonymous()&&h.default.equalNames(a.default.currentUser.name(),e)?Promise.all([Be(e),u.default.ProjectManager.shared().then((function(e){var t=[];return s().forEach(e,(function(e){s().forEach(e.projects,(function(e){t.push(e)}))})),Fe("shared",null,t)})),Ue()]).then((function(e){let[t,n,i]=e;return{own:t,shared:n,recent:i}})):function(e){return u.default.ProjectManager.public(e).then(Fe)}(e).then((function(e){return{public:e}}))},He.remove=function(e){return function(e){return u.default.ProjectManager.remove(e).then((function(){Le.deleted({projectId:e})}))}(e)},He.load=function(e,t,n,i){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>{};const r=window.sessionStorage.getItem("codio_sso_token");return u.default.ProjectManager.subscribe(e,t,n,r,o).then((function(e){o("loadProject:subscribeDone");var t=a.default.currentUser.get("details").get("type"),n=new Ae(e);n.isAuthorProject=e.isAuthorProject,n.eduStartedAssignmentInfo=e.eduStartedAssignmentInfo,n.isTemporary=n.eduStartedAssignmentInfo&&n.eduStartedAssignmentInfo.started&&n.eduStartedAssignmentInfo.started.isTemporary,n.isOpenedByTeacher=n.eduStartedAssignmentInfo&&n.eduStartedAssignmentInfo.isTeacher&&"TEACHER"===t,n.course=n.course||n.eduStartedAssignmentInfo&&n.eduStartedAssignmentInfo.course,n.isBook=!!e.bookData,n.isBookWriter=n.isBook&&e.bookData.bookWriter,n.isBookReader=n.isBook&&!e.bookData.bookWriter,n.eduStartedAssignmentInfo&&n.guides&&n.guides.metadata&&!n.isOpenedByTeacher&&(n.protectLayout=n.guides.metadata.protectLayout||!1),n.showAllBookPages=n.isBook&&e.bookData.showAllPages,n.bookName=n.isBook&&e.bookData.name,n.bookAssignmentPages=n.isBook&&e.bookData.pages,n.isLtiEnabled=n.course&&n.course.details.lti&&n.course.details.lti.enabled,n.penaltyReached=n.eduStartedAssignmentInfo&&e.penaltyInfo.penaltyReached,n.penaltyApprovedDate=n.eduStartedAssignmentInfo&&new Date(e.penaltyInfo.penaltyApprovedDate),n.penaltyExtendMin=n.eduStartedAssignmentInfo&&e.penaltyInfo.penaltyExtendMin,n.examMode={shuffleQuestionsOrder:!1,singleLogin:!1,forwardOnlyNavigation:!1,timedMode:{enabled:!1,duration:0}},n.assigneeInfo=e.assignee,n.assigneeInfo&&(n.assigneeInfo.assigneeName=function(e){if(e.isGroup)return e.group.name;return e.actualName}(n.assigneeInfo));const r=n.eduStartedAssignmentInfo&&(n.eduStartedAssignmentInfo.assignment.projectBased||n.eduStartedAssignmentInfo.assignment.bookBased);if(n.eduStartedAssignmentInfo&&!n.isOpenedByTeacher&&r&&r.settings&&r.settings.examMode){var c=r.settings.examMode;n.examMode={shuffleQuestionsOrder:c.shuffleQuestionsOrder||!1,singleLogin:c.singleLogin||!1,forwardOnlyNavigation:c.forwardOnlyNavigation||!1,timedMode:c.timedMode||{enabled:!1,duration:0}}}if(n.eduStartedAssignmentInfo&&r){const e={enabled:!1,enforcedSharedFocus:!1};n.pairProgramming=r.settings.groupWork?s().get(r.settings.groupWork,"pairProgramming"):e}return n.authorAssignment=e.authorAssignment,i?n:function(e){const t=a.default.currentUser.getAccountUid(),n=e.owner.id;if(!n)return e;if(t!==n)return e;const{guid:i}=e,o=s().without(Re.I_.get(t+"-recent-projects")||[],i);return o.unshift(i),Re.I_.set(t+"-recent-projects",o),e}(n)}))},He.loadInfo=function(e,t){return u.default.ProjectManager.getInfoByName(e,t).then((function(e){return new Ze(e)}))},He.create=function(e,t){var n=a.default.currentUser.name();return u.default.ProjectManager.create(e,n,t)},He.createFromPack=function(e,t){var n=a.default.currentUser.name();return u.default.ProjectManager.createFromPack(e,n,t)},He.import=function(e,t,n,i){return u.default.ProjectManager.import(e,t,n,i)},He.inContext=function(e,t,n,i){s().isArray(e)||(e=[e]),i||s().map(n,(function(t){e.push(t)}));var a=!1;return s().map(e,(function(e){a=a||qe(e,t)})),a};const Ge=He},38406:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>p,execute:()=>l,run:()=>u,runWithoutTimeout:()=>d,startTerminal:()=>h});var i=n(49721),s=n(72129),a=n(97137),o=n(19575);const{containerManager:r}=s.default;function c(e,t){const n=[];let i=!1,s="";for(let a=0;a<e.length;a++)" "!==e.charAt(a)||i?'"'===e.charAt(a)&&t?i=!i:s+=e.charAt(a):(n.push(s),s="");return n.push(s),n}const l=async e=>{0!==(await u(e)).code&&a.Z.info("Error executing command: "+o.default.safeHtml(e))},d=e=>{const t=Array.isArray(e)?e:c(e),n=t.shift();let s;t.length>0&&(s=t);const a=i.default.currentProject.guid;return r.run(a,n,{args:s,timeout:-1})},u=e=>{const t=Array.isArray(e)?e:c(e),n=t.shift();let s;t.length>0&&(s=t);const a=i.default.currentProject.guid;return r.run(a,n,{args:s})},h=e=>{const t=i.default.currentProject.guid;return r.startTerminal(t,e)},p={execute:l,run:u,runWithoutTimeout:d,startTerminal:h}},88392:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var i=n(52308),s=n.n(i),a=n(96486),o=n.n(a),r=n(18356),c=n.n(r),l=n(93443),d=n(97137),u=["a[target!=_blank]","[href]",":not([href^=#])",":not([href^=http])",':not([href^="mailto:"])',':not([href="javascript:void(0)"])',":not([data-toggle^=tab])",":not([data-toggle^=collapse])",":not([data-target=dashboard])",":not([data-href])"].join(""),h=!1,p=l.Z.create(n(96205)),f=function(){o().bindAll(this,["startRouting","map","handleUrl","pushState","replaceState","redirectTo","replaceWith","getQueryString","getURL","getRawUrl","getState","getFullRawUrl","_runHandlers","_abort"]),this.recognizer=new(c()),this.location=window.location,this.history=window.history},m=f.prototype;function g(e){return"/"+o().filter(o().map(e,(function(e){return e.handler.generate&&e.handler.generate(e.params)}))).join("/")}function b(e){if(e&&0!==e.length)for(var t=e[0],n=1,i=e.length;n<i;++n){var s=e[n];o().assign(s.params,t.params),t=s}}function v(e){var t=s()(this).attr("href");return e.replaceState(t),e.handleUrl(),!1}m.startRouting=function(){var e=this;l.Z.on(window,"popstate",(function(){h?e.handleUrl():h=!0})),document.addEventListener("click",(function(t){if(s()(t.target).is(u))v.call(t.target,e,t),t.stopPropagation(),t.preventDefault();else{var n=s()(t.target).closest(u);0!==n.length&&(v.call(n,e,t),t.stopPropagation(),t.preventDefault())}}),!0),this.handleUrl()},m.map=function(e){this.recognizer.map(e,(function(e,t){e.add(t)}))},m.handleUrl=function(e){!h&&(h=!0);var t=this.getRawUrl(),n=this._currentUrl;if(n!==t){var i=this.recognizer.recognize(t),s=g(i);if(b(i),n!==s){this._currentUrl=s;var a=this.getQueryString(),r=a?this.recognizer.parseQueryString(a):{};if(!e){if(o().isEmpty(i))return this.redirectTo("/"),window.location.reload();var c;n&&(g(c=this.recognizer.recognize(n)),b(c));var l=this;this._runHandlers({exitMatches:c,entryMatches:i,exit:n,enter:this._currentUrl,urlParams:r}).then((function(){p.routeChanged({exit:n,enter:l._currentUrl,enterMatches:i[0],urlParams:r})}))}}}},m.pushState=function(e,t){s().extend(t,{path:e}),this.history.pushState(t,null,e)},m.replaceState=function(e,t){s().extend(t,{path:e}),this.history.state,this.history.replaceState(t,null,e)},m.redirectTo=function(e,t,n){this.replaceState(e,t),this.handleUrl(n)},m.replaceWith=function(e,t,n){this.replaceState(e,t),(n=!!o().isUndefined(n)||n)&&this.handleUrl()},m.getQueryString=function(){var e=this.location.href,t=e.indexOf("?");return t>-1?e.slice(t+1):void 0},m.getURL=function(){return this._currentUrl},m.getRawUrl=function(){return this.location.pathname},m.getState=function(){return this.history.state},m.getFullRawUrl=function(){return this.location.pathname+this.location.search+this.location.hash},m._runHandlers=function(e){var t=e.entryMatches,n=e.exitMatches;if(e.entryMatches&&e.exitMatches){var i=function(e,t){for(var n=Math.min(e.length,t.length),i=0,s=0;s<n&&o().isEqual(e[s],t[s]);++s)i=s+1;var a=e.slice(i),r=t.slice(i);return[a,r]}(e.entryMatches,e.exitMatches);t=i[0],n=i[1]}n=n||[];var s=o().map(n.reverse(),(function(t){var n={path:e.exit,newPath:e.enter,params:t.params,urlParams:e.urlParams};if(e.exit,o().isFunction(t.handler.exit)){var i=t.handler.exit(n);if(i&&o().isFunction(i.then))return i}})),a=this;return Promise.all(s).then((function(){t=t||[],o().each(t,(function(t){var n={path:e.enter,oldPath:e.exit,params:t.params,urlParams:e.urlParams};if(e.enter,!1===(t.handler.enter&&t.handler.enter(n)))return!1})),o().isEmpty(e.entryMatches)&&d.Z.notFound()})).catch((function(){a._abort(e)}))},m._abort=function(e){this._currentUrl=e.exit,this.replaceState(e.exit)};const y=f},23318:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(19011),s=n(69730),a=n(19059),o=n(17803);const r=n(54565).Z.get("sentry");r&&/Trident\/[78]\.0|Edge?\/(1{2}[2-9]|1[2-9]\d|[2-9]\d{2}|\d{4,})(\.\d+|)(\.\d+|)|Firefox\/(1{2}[3-9]|1[2-9]\d|[2-9]\d{2}|\d{4,})\.\d+(\.\d+|)|Chrom(ium|e)\/(10[3-9]|1[1-9]\d|[2-9]\d{2}|\d{4,})\.\d+(\.\d+|)|Maci.+ Version\/(14\.([1-9]|\d{2,})|(1[5-9]|[2-9]\d|\d{3,})\.\d+)([,.]\d+|)( \(\w+\)|)( Mobile\/\w+|) Safari\/|Chrome.+OPR\/(9[89]|\d{3,})\.\d+\.\d+|(CPU[ +]OS|iPhone[ +]OS|CPU[ +]iPhone|CPU IPhone OS|CPU iPad OS)[ +]+(12[._]([2-9]|\d{2,})|(1[3-9]|[2-9]\d|\d{3,})[._]\d+)([._]\d+|)|Android:?[ /-](4(\.([4-9]|\d{2,})|)|([5-9]|\d{2,})(\.\d+|))(\.\d+|)|Mobile Safari.+OPR\/(7[3-9]|[89]\d|\d{3,})\.\d+\.\d+|Android.+Firefox\/(1{2}[5-9]|1[2-9]\d|[2-9]\d{2}|\d{4,})\.\d+(\.\d+|)|Android.+Chrom(ium|e)\/(1{2}[5-9]|1[2-9]\d|[2-9]\d{2}|\d{4,})\.\d+(\.\d+|)|Android.+(UC? ?Browser|UCWEB|U3)[ /]?(15\.([5-9]|\d{2,})|(1[6-9]|[2-9]\d|\d{3,})\.\d+)\.\d+|SamsungBrowser\/([2-9]\d|\d{3,})\.\d+|Android.+MQ{2}Browser\/(13(\.([1-9]|\d{2,})|)|(1[4-9]|[2-9]\d|\d{3,})(\.\d+|))(\.\d+|)|K[Aa][Ii]OS\/(2\.([5-9]|\d{2,})|([3-9]|\d{2,})\.\d+)(\.\d+|)/.test(navigator.userAgent)&&i.S1({dsn:r.url,replaysSessionSampleRate:0,replaysOnErrorSampleRate:.5,integrations:[s.R(),a.Li()],release:r.release,environment:r.environment,allowUrls:r.whitelistUrls,attachStacktrace:!0,ignoreErrors:["SockJS has already been closed","Script error","Cannot transition directly from connected to connecting","Subscription needed","Loading chunk","Object doesn't support property or method 'composedPath'","e.composedPath is not a function","Unknown message state","Failed to execute 'importScripts' on 'WorkerGlobalScope'","loadForeignModule","Can't find variable: WebAssembly"]});const c=r?o:{captureException:(e,t)=>{console.error(e,t)},captureMessage:(e,t)=>{console.error(e,t)},setUser:()=>{},withScope:()=>({setExtra:()=>{}})}},9380:(e,t,n)=>{"use strict";n.d(t,{Z:()=>U,A:()=>j});var i=n(96486),s=n.n(i),a=n(52308),o=n.n(a),r=n(93443);const c=function(e){var t,n={section:/^\s*\[\s*([^\]]*)\s*\]\s*$/,param:/^\s*([\w\.\-\_]+)\s*=\s*(.*?)\s*$/,comment:/^\s*;.*$/},i={},s=e.split(/\r\n|\r|\n/),a=null;return s.forEach((function(e){n.comment.test(e)||(n.param.test(e)?(t=e.match(n.param),a?i[a][t[1]]=t[2]:i[t[1]]=t[2]):n.section.test(e)&&(t=e.match(n.section),i[t[1]]=i[t[1]]||{},a=t[1]))})),i};var l=n(19575);const d=JSON.parse('["ide:tab_close_all","ide:tab_close_others","ide:tab_close_left","ide:tab_close_right","ide:tab_close","ide:upload_item","ide:delete_item","ide:rename_item","ide:new_folder","ide:new_file","file:open","ide:panel_split_horizontal","ide:panel_split_vertical","ide:panel:join","ide:panel_close","ide:layout_default","ide:layout_2_columns","ide:layout_2_rows","ide:layout_showcase","git:command-line"]');n(6874);var u,h=r.Z.create(n(89261)),p=!1,f={},m={},g={},b=navigator.platform.toUpperCase().indexOf("MAC")>=0?"mac":"win",v=[],y={},w=["text","password","number","email","url","range","date","month","week","time","datetime","datetime-local","search","color","tel"];function _(e,t,n){if(!(u&&-1!==d.indexOf(e+":"+t)||p)){if(n instanceof o().Event){var i=function(e,t){var n=o()(e).closest(".modal").length>0||o()(e).closest(".search-dialog").length>0,i=o()(e).closest(".monaco-editor").length>0;const s=/textarea/i.test(e.nodeName)&&e.classList.contains("monaco-mouse-cursor-text");var a="emmet:expand_abbreviation_with_tab"===t||"editor:key_indentLess"===t;if(/textarea|select/i.test(e.nodeName)&&!s||o().inArray(e.type,w)>-1||n||!i&&a){var r=o()(e).data("allowed-hotkeys");return!(!r||-1===r.split(",").indexOf(t))}return!0}(n.target,e+":"+t);if(!i)return}var a={arg:n,pass:null};return h.hotkeySync({plugin:e,command:t},a),void 0!==a.arg&&(s().isFunction(a.arg.preventDefault)||s().isFunction(a.arg.stopPropagation))&&(s().isFunction(a.arg.preventDefault)&&a.arg.preventDefault(),s().isFunction(a.arg.stopPropagation)&&a.arg.stopPropagation()),!1}}function k(){var e={};return y={},P(g,e),P(m,e),P(f,e),e}function P(e,t){s().forEach(e,(function(e,n){t[n]=t[n]||{},s().forEach(e,(function(e,i){var a=function(e){s().isObject(e)&&(e=e.key,s().isObject(e)&&(e=e[b]));return e}(e);void 0===a||s().has(y,a)||s().has(t[n],i)||(t[n][i]=a,y[a]=!0)}))}))}function C(e,t){function n(e,t){return e>t?1:e<t?-1:e===t?0:void 0}return e.sort((function(e,i){var a=s().indexOf(t,e.toLowerCase()),o=s().indexOf(t,i.toLowerCase()),r=-1!==a,c=-1!==o;return r&&!c?-1:c&&!r?1:a||o?n(a,o):n(e,i)}))}function x(e){return e.split(/[+\-]/)}function E(e){var t=x(e=e.replace(/cmd/i,"meta"));return(t=C(t,["alt","ctrl","meta","shift"])).join("+")}function S(e){return e=s().cloneDeep(e),s().forEach(e,(function(t,n){if(s().has(f,n))return s().forEach(t,(function(t,i){s().isString(t)&&0!==t.length||delete e[n][i],s().has(f[n],i)||delete e[n][i]})),!0;delete e[n]})),e}function I(e){var t="";return void 0!==e&&(t=s().isObject(e)?e[b]:e),t}function A(){function e(e,t,n){return g[e]&&g[e][t]?g[e][t]:m[e]&&m[e][t]?m[e][t]:I(n.key)}var t={};return s().forEach(f,(function(n,i){t[i]={},s().forEach(n,(function(n,s){var a;t[i][s]={desc:n.desc,isMacKeyDefined:null==n||null===(a=n.key)||void 0===a?void 0:a.mac,key:e(i,s,n)}}))})),t}var T={plugin:function(e,t){if(s().has(f,e))return!1;f[e]=t},user:function(e){var t=S(e);s().isEqual(t,m)||(m=t,T.refresh())},project:function(e){var t=S(e);s().isEqual(t,g)||(g=t,T.refresh())},compiledDescription:s().once(A),getCurrentKey:function(e){var t=T.compiledDescription(),n=e.split(":"),i=n.shift(),a=n.shift();if(s().has(t,i)&&s().has(t[i],a)){var o=l.default.os(),r=t[i][a];return s().has(r,o)?r[o].key:r.key}},descriptions:function(){var e={};return s().forEach(f,(function(t,n){e[n]={},s().forEach(t,(function(t,i){e[n][i]={type:"hotkey",desc:t.desc,default:I(t.key),readonly:!!t.readonly}}))})),e},emulateKey:function(e){if(!s().includes(["alt","control","meta","shift"],e.key.toLowerCase())){var t=E(s()([e.code?e.code.replace(/^(Key|Arrow)/,""):void 0,e.altKey?"Alt":void 0,e.ctrlKey?"Ctrl":void 0,e.metaKey?"Meta":void 0,e.shiftKey?"Shift":void 0]).compact().join("+"));r.Z.publish("hotkey:emulated:"+t.toLowerCase())}},execute:_,refresh:function(){T.compiledDescription=s().once(A),r.Z.unbind(document,"keydown.shortcuts"),s().forEach(v,(function(e){r.Z.unsubscribe(e)})),v=[];var e=k();s().forEach(e,(function(e,t){s().forEach(e,(function(e,n){var i=E(e),s=_.bind(null,t,n);r.Z.on(document,"keydown.shortcuts",null,i,s),v.push(r.Z.subscribe("hotkey:emulated:"+i.toLowerCase(),s))}))})),h.hotkeysUpdated()},getCompiledInfo:()=>{const e=k(),t=T.compiledDescription();return s().flatMap(e,((e,n)=>s().map(e,((e,i)=>{const s=_.bind(null,n,i);return{plugin:n,shortcut:(a=e,o=x(a),(o=C(o,["shift","cmd","ctrl","alt"])).join("-")),isMacKeyDefined:!!t[n][i].isMacKeyDefined,description:t[n][i].desc,command:i,callback:s};var a,o}))))}};r.Z.subscribe("ide:fullscreen:enter",(function(){u=!0})),r.Z.subscribe("ide:fullscreen:leave",(function(){u=!1})),r.Z.subscribe("share:connect",(function(){p=!1})),r.Z.subscribe("share:disconnect",(function(){p=!0}));const j=T,Z=r.Z.create(n(89261));var O={},N={},D={},M={},R=!0;function L(e,t,n,i){n=function(e,t){if(void 0===e)return;switch(e.type){case"int":return parseInt(t,10);case"float":return parseFloat(t);case"list":var n=e.values;if(n&&s().includes(n,t))return t;break;case"string":return t.toString();case"boolean":return s().isBoolean(t)?t:"false"!==t&&("true"===t||void 0)}return}(t[i],n),void 0!==n&&(e[i]=n)}const F={project:function(e){var t=c(e||"");j.project(t),s().isEqual(M,t)||(M=t,R||Z.settingsChanged({type:"project"})),R&&(R=!1,Z.settingsLoaded())},user:function(e){var t=c(e||"");j.user(t),s().isEqual(D,t)||(D=t,Z.settingsChanged({type:"user"}))},plugin:function e(t,n){return!Object.prototype.hasOwnProperty.call(O,e)&&(O[t]=s().clone(n),N[t]={},s().forEach(n,(function(e,n){const i=((e,t)=>{var n;return null===(n=window.CODIO_THEME_CONFIG_SCRIPT.settingsOverrides)||void 0===n||null===(n=n[e])||void 0===n?void 0:n[t]})(t,n);void 0!==i?N[t][n]=i:Object.prototype.hasOwnProperty.call(e,"default")&&(N[t][n]=e.default)})),!0)},descriptions:function(){var e=j.descriptions(),t=s().cloneDeep(O);return s().merge(t,e),t},shortcut:function(){},get:function(e){var t=s().cloneDeep(N[e]||{});if(void 0===t)return{};var n=D[e]||{},i=M[e]||{},a=O[e];return s().forEach(n,L.bind(null,t,a)),s().forEach(i,L.bind(null,t,a)),t},getUser:function(e){var t=s().cloneDeep(D[e]||{});return void 0===t?{}:t},getProject:function(e){var t=s().cloneDeep(M[e]||{});return void 0===t?{}:t}};function B(e,t,n,i,s){void 0!==e&&e!==t&&(s&&(e=s(e)),i.push(n,"=",e,"\n"))}r.Z.subscribe("account:load:my",(function(e,t){t.isAnonymous()||void 0===t.get("details").get("settings")&&function(e){var t=e.get("ide-settings").getEditorSettings(),n=function(e){var t=["[editor]\n"];return B(e.theme,"pastel_on_dark","theme",t),B(e.fontSize,"12px","font_size",t,(function(e){return e.replace("px","")})),B(e.softWrap,"free","soft_wrap",t),B(e.tabSize,4,"tab_size",t),B(e.navigateWithinSoftTabs,null,"navigate_within_soft_tabs",t),B(e.codeFolding,2,"code_folding",t,(function(e){switch(e){case 0:return"manual";case 1:return"begin";default:return"begin_end"}})),B(e.gutter,!0,"gutter",t),B(e.lineSelection,!0,"line_selection",t),B(e.showInvisibles,!1,"show_invisibles",t),B(e.highlightActive,!0,"highlight_active",t),B(e.showIndentGuides,!0,"show_indent_guides",t),B(e.persistentHScroll,!0,"persistent_HScroll",t),B(e.animateScroll,!0,"animate_scroll",t),B(e.showPrintMargin,!1,"show_print_margin",t),B(e.useSoftTabs,!0,"use_soft_tabs",t),B(e.highlightSelectedWord,!0,"highlight_selected_word",t),B(e.enableBehaviours,!0,"enable_behaviours",t),B(e.fadeFoldWidgets,!0,"fade_fold_widgets",t),B(e.useIncrementalSearch,!0,"use_incremental_search",t),t.join("")}(t);e.get("details").set("settings",n),e.saveSection("details"),U.user(n)}(t)}));const U={plugin:F.plugin,hotkey:j,shortcuts:F.shortcuts,defaultContent:function(e){if(""===o().trim(e)||"[editor]"===o().trim(e)){e="";var t=F.descriptions();s().each(t,(function(t,n){s().isEmpty(t)||(e+="["+n+"]\n; enter your "+n+" preferences here...\n\n")}))}return e},get:F.get,getUser:F.getUser,getProject:F.getProject,user:F.user,project:F.project,descriptions:F.descriptions};r.Z.subscribe("account:load:my",(function(e,t){var n=t.get("details").get("settings");F.user(n)})),j.plugin("settings",n(67660))},56609:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ne});var i=n(96486),s=n.n(i),a=n(54565),o=n(93443),r=n(97137),c=n(19575),l=n(49721),d=n(23318),u=(n(28190),n(43440)),h=n.n(u);const p="0",f="1",m="2",g="3",b="4",v="6",y="5";var w=n(86048),_=n(67277),k=o.Z.create(n(80093)),P=function(e,t,n){this.url=e,this.params=n,this.writable=!1,this.pendingMessages=[],this.authCb=[],this.waitAuth=!0,this.id=0,this._waitMessages={},this._session=t,this.connect()},C=P.prototype;C.updateSession=function(e){this._session=e},C.connect=function(){if(!this.primus){var e="WebSocket"in window,t=s().extend(this.params,{reconnect:{retries:1/0,max:"2000 ms",min:"200 ms"},strategy:["online","timeout","disconnect"],websockets:e,pingTimeout:25e3,transport:{transports:["websocket"]}}),n=this,i=this.primus=new(h())(this.url,t),a=!1;i.on("open",(function(){n.auth(n._session,a).then((function(){a&&n._rejectOutdatedWaiting().catch((()=>{})),n.writable=!0,s().each(n.pendingMessages,(function(e){let{message:t}=e;n.primus.write(t)})),n.pendingMessages.length=0,n.params.onConnectionState&&(a?n.params.onConnectionState("reconnect"):n.params.onConnectionState("connected"))})).catch((e=>k.error({message:e.message}))),a=!0})),i.on("data",(function(e){n.handleMessage(e).catch((()=>{}))})),i.on("readyStateChange",(function(e){"open"!==e&&n.writable&&(n.params.onConnectionState&&n.params.onConnectionState("disconnected"),n.writable=!1)})),i.on("error",(function(e){e&&"close"===e.type&&(n.writable=!1),n.params.onConnectionState&&n.params.onConnectionState("disconnected")}))}},C._rejectOutdatedWaiting=async function(){const e=[];s().forOwn(this._waitMessages,((t,n)=>{s().find(this.pendingMessages,(e=>{let{id:t}=e;return t===n}))||e.push(n)}));const t=[];return s().each(e,(e=>{const n=this._waitMessages[e],i=n&&n.deferred;if(i){const e=new Error("Unknown message state");e.extra=n.extra,e.data="",i.reject(e),t.push(i.promise)}delete this._waitMessages[e]})),Promise.all(t)},C._convertError=function(e){return s().includes(e,"File too large")?_.S.ERR_SIZE_LIMIT:s().includes(e,"Can't open binary file")?_.S.ERR_BINARY_FILE:e},C.handleMessage=async function(e){var t=JSON.parse(e),n=t.i,i=t.e;const s=this._waitMessages[n];var a=s&&s.deferred;if(a){if(i){const e=new Error(i);if(e.extra=s.extra,e.data=t,a.reject(e),!w.Z.isNormalizeError(i)){const e=this._convertError(i);k.error({message:e,path:t.d})}}else s.extra&&(t.extra=s.extra),a.resolve(t);return delete this._waitMessages[n],a.promise}this.params.onMessage&&this.params.onMessage(t)},C._registerWaitMessage=function(e,t){const n=c.default.promise.deferred();return this._waitMessages[e]={deferred:n,extra:t},n},C.auth=async function(e,t){if(t||!s().isEqual(this.session,e))return this.waitAuth=!0,this.session=e,this.write(p,e,null,!0)},C.write=function(e,t,n,i){t.i=this.id,this.id++;var s=this._registerWaitMessage(t.i,n),a=e+JSON.stringify(t);if(a.length>576716800){const e=new Error("Message too big");return e.i=t.i,s.reject(e),s.promise}return this.primus&&(this.writable||i)?this.primus.write(a):this.pendingMessages.push({message:a,id:t.i}),s.promise};const x=P;var E=n(5358),S=function(e,t){this.doc=e,this.submitFunction=t,this.opHandler={}},I=S.prototype;I.hasNonUnixLineBreaks=function(){return this.doc.file.nonUnixLineBreaks},I.clearNonUnixLineBreaks=function(){this.doc.file.nonUnixLineBreaks=!1},I.getLength=function(){return this.doc.file.content.length},I.get=function(){return this.doc.file.content},I.insert=function(e,t){this.submitFunction({p:e,i:t})},I.remove=function(e,t){this.submitFunction({p:e,d:t})},I.replace=function(e){this.submitFunction({p:0,d:this.doc.file.content.length}),this.submitFunction({p:0,i:e})},I.onReplace=function(e){this.opHandler.onReplace&&this.opHandler.onReplace(e)},I.onOp=function(e){for(var t=0;t<e.length;t++){var n=e[t];n.i?this.opHandler.onInsert&&this.opHandler.onInsert(n.p,n.i):n.d&&this.opHandler.onRemove&&this.opHandler.onRemove(n.p,n.d)}};const A=S;var T=n(87167),j=o.Z.create(n(80093)),Z=function(e,t,n){this._model=e,this._modelCopy=new T.yO(e.getValue()),this._ctx=t,this._file=n,this._skipChangeEvent=!1,this._attach()},O=Z.prototype;O.getModelValue=function(){return this._model.getValue()},O._applyToShareMan=function(e){const{range:t,text:n,rangeLength:i,rangeOffset:s}=e,{startLineNumber:a,startColumn:o,endLineNumber:r,endColumn:c}=t;var d=this;if(l.default.currentProject&&l.default.currentProject.readOnly)return d._replaceHandler(d._ctx.get()),void d._modelCopy.setValue(d._ctx.get());if(!0!==this._ctx.deleted){this._modelCopy.replaceRange(n,{lineNumber:a,column:o},{lineNumber:r,column:c});var u=s;if(!(r===a&&c===o)){var h=0;h=i,this._ctx.hasNonUnixLineBreaks()&&0===u&&h===this._modelCopy.getValue().length&&(h=this._ctx.get().length,this._ctx.clearNonUnixLineBreaks()),h&&this._ctx.remove(u,h)}n&&this._ctx.insert(u,n)}},O._changeHandler=function(e){let{changes:t}=e;if(!this._skipChangeEvent){if(this._model.getValue().length>a.Z.get("fileSizeLimit"))return j.error({message:"File size limit reached."});try{t.forEach((e=>this._applyToShareMan(e)))}catch(e){d.Z.captureMessage("apply error",{extra:{id:l.default.currentUser.account,projectId:l.default.currentProject.guid,projectName:l.default.currentProject.pathName,url:window.location.href,err:e,changes:t}}),this._ctx.replace(this._model.getValue())}}},O._attach=function(){this._changeHandlerDisposable&&this._changeHandlerDisposable.dispose(),this._changeHandlerDisposable=this._model.onDidChangeModelContent(this._changeHandler.bind(this)),this._ctx.opHandler={onInsert:this._insertHandler.bind(this),onRemove:this._removeHandler.bind(this),onReplace:this._replaceHandler.bind(this)}},O.detach=function(){this._changeHandlerDisposable&&this._changeHandlerDisposable.dispose(),this._changeHandlerDisposable=null,this._ctx.opHandler={},!this._modelCopy.isDisposed()&&this._modelCopy.dispose()},O._insertHandler=function(e,t){j.remoteFileChange({path:this._file},{type:"insert"});var n=this._model.getPositionAt(e);this._skipChangeEvent=!0,this._model.replaceRange(t,n),this._skipChangeEvent=!1,this._modelCopy.replaceRange(t,n)},O._removeHandler=function(e,t){j.remoteFileChange({path:this._file},{type:"remove"});var n=this._model.getPositionAt(e),i=this._model.getPositionAt(e+t);this._skipChangeEvent=!0,this._model.replaceRange("",n,i),this._skipChangeEvent=!1,this._modelCopy.replaceRange("",n,i)},O._replaceHandler=function(e){if(j.remoteFileChange({path:this._file},{type:"replace"}),this._model.getValue()!==e){var t=this._model.getValue().length,n=this._model.getPositionAt(0),i=this._model.getPositionAt(t);this._skipChangeEvent=!0,this._model.replaceRange(e,n,i),this._skipChangeEvent=!1,this._modelCopy.replaceRange(e,n,i)}};const N=Z;var D=n(95611),M=n(19575)._v,R=o.Z.create(n(80093));const L=s().debounce((function(){D.Z.saveAllAndWait()}),3e4,{maxWait:6e4});var F=function(e,t,n){this.file=e,this.model=t,this.shareMan=n,this._opQueue=[],this._pendingQueue=[],this._pendingDfd=null,this._queue=new E.SequentialTaskQueue,this._init(this.file)},B=F.prototype;B.reinit=function(e){if(this._queue.cancel(),e){this._pendingDfd&&(this._pendingDfd.reject(),this._pendingDfd=null);var t=Date.now()-new Date(e.lastModified),n=M.wasSleep();n=n||t>15e3||this.version<e.version;var i=this.adapter.getModelValue();i!==e.content&&(this._opQueue=[],n?(this.file.content=e.content,this.setDirty(e.changed),this.context.onReplace(e.content)):(this._submitOp({p:0,d:e.content.length}),this._submitOp({p:0,i}))),this.version=e.version}},B.detach=function(){this.adapter.detach()},B.havePendingChanges=function(){return 0!==this._opQueue.length||0!==this._pendingQueue.length},B._init=function(e){this.model.setValue(e.content);const t=new T.yO(e.content);t.setEOL(0),t.getValue()!==e.content&&(R.filePropUpdate({path:e.path},{nonUnixLineBreaks:!0}),e.nonUnixLineBreaks=!0),t.dispose(),this.changed=e.changed,this.version=e.version,this._debouncesSubmit=s().debounce(this.submit.bind(this),400,{maxWait:1500}),this.context=new A(this,this._submitOp.bind(this)),this.adapter=new N(this.model,this.context,e.path),this._queue.cancel(),e.changed&&this.setDirty(e.changed)},B.setDirty=function(e,t){this._queue.queue.length>0&&(e=!0),t&&t!==this.version&&(e=!0),e!==this.changed&&(this.changed=e,R.dirty({path:this.file.path},{dirty:this.changed}))};var U=null;function q(e,t,n){let i=[];return s().each(e,(e=>{const a=function(e,t,n){return s().reduce(t,((e,t)=>{let i=[];return s().each(e,(e=>{i=i.concat(w.Z.transform(e,t,n))})),i}),[e])}(e,t,n);i=i.concat(a)})),i}B._submitOp=function(e){if(M.wasSleep())return U||(U=window.setTimeout((function(){M.wasSleep()?(d.Z.captureMessage("restore connection issue after sleep",{extra:{id:l.default.currentUser.account,projectId:l.default.currentProject.guid,projectName:l.default.currentProject.pathName,url:window.location.href,data:e,sleep:M.wasSleepTimer()}}),window.alert("Sorry, we can't recover connection to our servers, it might a browser bug or a connection to the Internet is not available.\nWe will reload the tab."),window.location.reload()):U=null}),1e4)),void this.setDirty(!1);this.setDirty(!0),this._opQueue.push(e),this._debouncesSubmit()},B.save=function(){return this.submit(),D.Z.saveAllAndWait()},B._submitToShareman=function(e){const t={id:c.default.GUID()};this.shareMan.write(m,{p:this.file.projectId,d:this.file.path,o:e,v:this.version},t).then((()=>{if(this._applyOpToSnapshot(this._pendingQueue),this._pendingQueue=[],this._pendingDfd&&this._pendingDfd.resolve(),this._pendingDfd=null,this._opQueue.length>0)return this._submitWithTransformation();L()})).catch((e=>{const t=e&&e.message?e.message:e;if(w.Z.isNormalizeError(t))return this._waitTillVersionApplied(e.data.v).then((()=>this._submitToShareman(this._pendingQueue)));"Unknown message state"!==t&&d.Z.captureMessage("apply op error",{extra:{id:l.default.currentUser.account,projectName:l.default.currentProject.pathName,path:this.file.path,projectId:this.file.projectId,url:window.location.href,error:e}}),e.data&&e.data.f&&this._revertCmChanges(e.data.f,this._pendingQueue),this._pendingDfd&&this._pendingDfd.resolve(),this._pendingDfd=null,this._pendingQueue=[]}))},B._submitWithTransformation=function(){if(this._pendingDfd)return this._debouncesSubmit(),this._pendingDfd.promise;const e=this._pendingQueue=this._opQueue;return this._opQueue=[],s().isEmpty(e)?Promise.resolve():(this._pendingDfd=c.default.promise.deferred(),this._submitToShareman(e),this._pendingDfd.promise)},B._waitTillVersionApplied=function(e){return this.version===e?Promise.resolve():new Promise((t=>{let n=0,i=setInterval((()=>{n++,this.version!==e&&5e3!==n||(clearInterval(i),t())}),100)}))},B.submit=function(){return this._pendingDfd?this._pendingDfd.promise.then((()=>this._submitWithTransformation())).catch((()=>this._submitWithTransformation())):this._submitWithTransformation()},B.wait=function(){if(this._pendingDfd)return this._pendingDfd.promise},B._revertCmChanges=function(e){var t=this.file.content;e&&e.content&&(this.file.content=e.content,this.version=e.version,this.setDirty(e.changed)),this.context.onReplace(t)},B._applyOpToSnapshot=function(e,t){var n=this.file.content;return this.file.content=w.Z.apply(n,e),void 0!==t&&(this._pendingQueue.length>0&&(this._pendingQueue=q(this._pendingQueue,e)),this._opQueue.length>0&&(this._opQueue=q(this._opQueue,e))),this.version=t||this.version+1,2===e.length&&n.length===e[0].d&&s().isString(e[1].i)},B.applyOp=function(e,t){s().isUndefined(t)&&t<=this.version||(this.setDirty(!0),this._applyOpToSnapshot(e,t)?this.context.onReplace(this.file.content):(this._pendingQueue.length>0&&(e=q(e,this._pendingQueue)),this._opQueue.length>0&&(e=q(e,this._opQueue)),this.context.onOp(e)))};const H=F;n(56386);var G=o.Z.create(n(80093)),W="disconnected",z="connected",V=function(e,t){this.waitFirstConnDfd=c.default.promise.deferred();var n=this;this.state=W,this.documents={},this.connection=new x(e,t,{onConnectionState:n.onConnectionState.bind(n),onMessage:n.onMessage.bind(n)}),D.Z.initWithShareman(this),o.Z.subscribe("item:deleted:#file",K._cleanOnRemove.bind(this))},K=V.prototype;K._cleanOnRemove=function(e){var t=e.file,n=this;s().each(this.documents,(function(e){s().startsWith(e.file.path,t+"/")&&n.detach(e.file.path)}))},K.updateSession=function(e){this.connection.updateSession(e)},K.onConnectionState=async function(e){if(e===W)G.disconnected(),this.state=W;else{await c.default.promise.getState(this.waitFirstConnDfd.promise)===c.default.promise.STATES.PENDING&&this.waitFirstConnDfd.resolve(),this.state=z,l.default.currentProject&&this.cursors(l.default.currentProject.guid).catch((()=>{})),this._reconnectDocs().then((function(){c.default.sleep.wasSleep(!0),G.connected()})).catch((function(){c.default.sleep.wasSleep(!0),G.connected()}))}},K._reconnectDocs=function(){var e=this,t=s().map(this.documents,(function(t){return e.connection.write(f,{d:t.file.path}).then((function(e){t.reinit(e.f)})).catch((function(e){return r.Z.error(e.message),Promise.resolve()}))}));return Promise.all(t)},K.detach=function(e){var t=this,n=this.documents[e];return n?c.default.promise.waitPromiseOrResolve(this.saveAll(n.file.projectId),1e4).then((function(){return c.default.promise.waitPromiseOrResolve(t.connection.write(b,{d:e}),1e4)})).then((function(){n&&n.detach(),delete t.documents[e]})):Promise.resolve()},K.attach=function(e,t){var n=null;function i(){null!==n&&(clearTimeout(n),n=null)}this.waitFirstConnDfd.promise.then((function(){n=setTimeout((function(){n&&d.Z.captureMessage("long file opening(> 10s)",{extra:{id:l.default.currentUser.account,projectId:l.default.currentProject.guid,projectName:l.default.currentProject.pathName,url:window.location.href,path:e}}),n=null}),11e3)}));var s=this;return this.connection.write(f,{d:e}).then((function(n){i(),s.documents[e]=new H(n.f,t,s)})).catch((e=>{throw i(),e}))},K._generatePermanentIndex=function(e){return this._uuidToIndex||(this._uuidToIndex={}),this._uuidToIndex[e.r]||(this._freeIndexes&&0!==this._freeIndexes.length||(this._freeIndexes=[1,2,3,4,5]),this._uuidToIndex[e.r]=this._freeIndexes.shift()),this._uuidToIndex[e.r]},K._processCursors=function(e){const t=s()(e.c).filter((e=>e.r!==l.default.currentUser.account)).map((e=>{const t={userId:e.r,userName:e.u,file:e.d,cursor:{lineNumber:e.l,column:e.c}};return t.index=this._generatePermanentIndex(e),e.s&&(t.selection={lineNumber:e.s,column:e.h}),t})).value();G.cursors(t)},K.onMessage=function(e){var t=e.d,n=this.documents[t];if(-3!==e.i||s().isEmpty(e.c)){if(n)if(-1===e.i)n.applyOp(e.o,e.v);else if(-2===e.i)if(e.e)w.Z.isNormalizeError(e.e)||r.Z.error(e.e);else if(n.setDirty(e.m.changed,e.m.version),e.m.sizeLimit){var i=l.default.ide.panels.isOpen(e.d);i&&(i.panel.closeTab(i).catch(c.default.error.checkErrorForIgnore),G.error({message:_.S.ERR_SIZE_LIMIT,path:e.d}))}}else this._processCursors(e)},K.waitConnectionOrTimeout=function(){return new Promise((e=>{const t=()=>e(this.canWrite());this.waitFirstConnDfd.promise.then(t),s().delay(t,5e3)}))},K.write=function(e,t,n){return this.connection.write(e,t,n)},K.canWrite=function(){return this.state===z},K.saveAll=async function(e){const t=l.default.currentProject;if(t&&!t.readOnly)return this.connection.write(g,{p:e})},K.cursor=async function(e,t,n,i,s){const a=l.default.currentProject;if(!a||a.readOnly)return;const o=s?{f:s||!1}:{d:t,l:n.lineNumber,c:n.column};return i&&(o.s=i.lineNumber,o.h=i.column),D.Z.waitPendingDocsSaved().then((()=>this.connection.write(v,{p:e,c:o})))},K.cursors=function(e){return this.connection.write(y,{p:e}).then((e=>this._processCursors(e)))},K.getDocuments=function(){return this.documents};const J=V;var Y=null,Q={},X=null;let $=s().debounce(te,2e4,{maxWait:6e4});$.cursorsCount=0;let ee=null;function te(){if(!ee)return;const{projectId:e,cursor:t,selection:n,fileName:i,unset:s}=ee;Y.cursor(e,i,t,n,s).catch((()=>{}))}Q.detachFile=function(e){return Y.detach(e)},Q.attachFile=function(e,t){return Y.attach(t,e)},Q.start=function(e,t,n,i){if(s().includes(t,":")){var o=t.split(":");t=o[0]}X={s:i,p:t,a:e,u:n},Y=new J(a.Z.get("sharemanServer"),X)},Q.waitConnectionOrTimeout=function(){return Y.waitConnectionOrTimeout()},Q.getDocuments=function(){return Y.getDocuments()},Q.cursors=function(e){return Y.cursors(e)},Q.cursor=function(e){return Y.cursor(e)},Q.canWrite=function(){return Y.canWrite()},o.Z.subscribe("project:dataUpdate:#projectId",(function(e,t){X.p=t.newProject.pathName,Y.updateSession(X)})),o.Z.subscribe("file:editor:cursorActivity",(function(e,t){ee=t,$()})),o.Z.subscribe("shareman:cursors",((e,t)=>{var n;(n=t.length)!==$.cursorsCount&&($.flush(),$=n>1?s().debounce(te,400,{maxWait:2e3}):1===n?s().debounce(te,600,{maxWait:4e3}):s().debounce(te,2e4,{maxWait:6e4}),$.cursorsCount=n)}));const ne=Q},95611:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var i,s=n(52308),a=n.n(s),o=n(96486),r=n.n(o),c=n(93443),l=n(49721),d=["terminal","filetree","project-settings","guides"];function u(e){if(!i)return!1;var t=i.getDocuments();return e?t[e]&&t[e].havePendingChanges():r().some(t,(e=>e.havePendingChanges()))}function h(){return l.default.currentProject&&i&&!l.default.currentProject.readOnly?new Promise((e=>{r().delay(e,5e3),r().delay((()=>{const t=i.getDocuments(),n=r().map(t,(function(e){return e.submit()}));Promise.all(n).then((()=>{i.saveAll(l.default.currentProject.guid).then(e)}))}),0)})):Promise.resolve()}c.Z.subscribe("editor:saveall",h),c.Z.subscribe("panel:focus:change",(function(e,t){var n=t&&t.activeTab();r().isObject(n)&&r().includes(d,n.extensionName)&&h()})),a()(window).on("blur",h),a()(window).on("beforeunload",(function(){if(u()&&!l.default.currentProject.deleteProject)return h(),"Changes you made may still be saving -- wait a few seconds and then try again."}));const p={initWithShareman:function(e){i=e},isDirty:u,saveAllAndWait:h,waitPendingDocsSaved:function(){const e=i.getDocuments(),t=r().map(e,(e=>e.wait()));return Promise.all(t)}}},67277:(e,t,n)=>{"use strict";n.d(t,{S:()=>i});const i={ERR_BINARY_FILE:"ERR_BINARY_FILE",ERR_SIZE_LIMIT:"ERR_SIZE_LIMIT"}},56386:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>w});var i=n(52308),s=n.n(i),a=n(96486),o=n.n(a),r=n(177),c=n.n(r),l=n(93443),d=n(97137),u=n(49721),h=n(33468);var p=n(67277);const f=c().compile('<div class="ui-blocker-content">\n    <span>{{{message}}}</span>\n</div>');var m=[],g=[],b=!0;l.Z.subscribe("shareman:connect",(function(){b=!0,u.default.online=!0,v()})),l.Z.subscribe("shareman:disconnect",(function(){u.default.online&&(u.default.online=!1,!u.default.ide.isClosed&&b&&y("There is no connection with the server. Please refresh your browser when your Internet re-connects.",!0))}));const v=function(e){o().forEach(g,(function(e){e.editor.readOnly(e.readOnly)})),g.length=0,u.default.online&&!h.Z.isMaintenance()&&o().delay((function(){s()("body").unblock(),e||0===s()(".ui-sharejs-critical-error").length||d.Z.info("Connection with the server has been restored.")}),1e3)},y=function(e,t){0===s()(".ui-sharejs-critical-error").length&&(o().forEach(m,(function(e){!function(e){g.push({editor:e,readOnly:e.readOnly()}),e.readOnly(!0)}(e)})),!t&&h.Z.isMaintenance()||s()("body").block({content:s()(f({message:e})),className:"ui-sharejs-critical-error fullscreen"}))};l.Z.subscribe("shareman:error",(function(e,t){var n=[p.S.ERR_BINARY_FILE,p.S.ERR_SIZE_LIMIT,"Project not found","Not allowed.","Missing type","Projects are only available if you have an active subscription"];if(u.default.currentProject){var i=t.message;if(!o().includes(n,i)){var s="Got error from ACv2.Server.Core: ";o().isString(i)&&0===i.indexOf(s)&&(i=i.substring(33,i.length)),d.Z.error(i)}}}));const w={block:y,unblock:v}},86048:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(96486),s=n.n(i),a={};function o(e,t,n){return s().isString(t.i)?function(e,t,n){return t.p<e||t.p===e&&n?e+t.i.length:e}(e,t,n):function(e,t){return e<=t.p?e:e<=t.p+t.d?t.p:e-t.d}(e,t)}a.apply=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];e=s().isString(i.i)?e.slice(0,i.p)+i.i+e.slice(i.p):e.slice(0,i.p)+e.slice(i.p+i.d)}return e},a.transform=function(e,t,n){return s().isString(e.i)?function(e,t,n){return[{i:e.i,p:o(e.p,t,n)}]}(e,t,n):s().isString(t.i)?function(e,t){if(e.p>=t.p)return[{p:o(e.p,t),d:e.d}];if(e.p+e.d<=t.p)return[{d:e.d,p:e.p}];const n=t.p-e.p,i=e.d-n;return[{p:e.p,d:n},{p:t.p+t.i.length-n,d:i}]}(e,t):function(e,t){if(e.p>=t.p+t.d)return[{d:e.d,p:e.p-t.d}];if(e.p+e.d<=t.p)return[{d:e.d,p:e.p}];if(e.p>=t.p&&e.p+e.d<=t.p+t.d)return[];const n=e.p+e.d-(t.p+t.d);return[{p:o(e.p,t),d:n}]}(e,t)},a.isNormalizeError=function(e){return s().includes(e,"need normalize to")};const r=a},68058:(e,t,n)=>{"use strict";n.d(t,{I_:()=>h,nP:()=>p});var i=n(96486),s=n.n(i),a="AC_LOCAL_STORAGE";function o(e){var t,n;try{n=new Date,(this.storage=window[e+"Storage"]).setItem(n,n),t=this.storage.getItem(n)!==n.toString(),this.storage.removeItem(n),t&&(this.storage=!1)}catch(e){}}var r=o.prototype;r.set=function(e,t){return this.storage.setItem(d(e),l(t))},r.clear=function(){s()(this.storage).filter(u).forEach(this._removeItem)},r.get=function(e){return c(this._getItem(d(e)))},r.remove=function(e){return this._removeItem(d(e))},r._getItem=function(e){return this.storage.getItem(e)},r._removeItem=function(e){this.storage.removeItem(e)};var c=function(e){if(!s().isEmpty(e))try{return JSON.parse(e)}catch(e){}},l=function(e){if(s().isUndefined(e))return"";try{return JSON.stringify(e)}catch(e){}},d=function(e){return a+"-"+e},u=function(e){return 0===e.indexOf(a)};const h=new o("local"),p=new o("session")},8246:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var i=n(96486),s=n.n(i),a=n(98296),o=n.n(a),r=n(41663),c=n.n(r),l=n(177),d=n.n(l),u=n(11700);n.n(u)()();var h={},p=c().tz.guess();h.registerPartial=function(e,t){d().registerPartial(e,d().compile(t))},d().registerHelper("eachWithIndex",(function(e,t){for(var n="",i=0,s=e.length;i<s;i++){var a=e[i];a.index=i,n+=t.fn(a)}return n})),d().registerHelper("eachObject",(function(e,t){var n="",i=0;for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n+=t.fn({items:e[s],_key:s,_index:i++}));return n})),d().registerHelper("exists",(function(e,t){return void 0!==e?t.fn(this):t.inverse(this)})),d().registerHelper("equals",(function(e,t,n){return e===t?n.fn(this):n.inverse(this)})),d().registerHelper("notequals",(function(e,t,n){return e!==t?n.fn(this):n.inverse(this)})),d().registerHelper("tolower",(function(e){return s().isString(e)?e.toLowerCase():""})),d().registerHelper("toupper",(function(e){return s().isString(e)?e.toUpperCase():""})),d().registerHelper("fromNow",(function(e){return o()(e).fromNow()})),d().registerHelper("jsDateToStr",(function(e){if(e)return o()(e).format("Do MMMM YYYY")})),d().registerHelper("codioProject",(function(e){if(e&&-1!==e.indexOf("/")){var t=e.split("/"),n=t.pop(),i=t.join("/")+"/ <strong>"+n+"</strong>";return new(d().SafeString)(i)}return e})),d().registerHelper("formatTimestamp",(function(e,t){return o()(e).format(t)})),d().registerHelper("userTimezoneAbbr",(function(){return o()().tz(o().tz.guess()).format("z")})),d().registerHelper("formatSeconds",(function(e,t){return o()(1e3*e).format(t)})),d().registerHelper("formatDateFullUSWithTz",(function(e){return e?o()(e).format("MMM Do YYYY h:mma (UTC Z)")+" "+p:""})),d().registerHelper("formatDateFullUS",(function(e){return e?o()(e).format("MMM Do YYYY h:mma"):""})),d().registerHelper("dateToLocaleStr",(function(e){return new Date(e).toLocaleString()})),d().registerHelper("origin",(function(){return location.origin})),d().registerHelper("lookup",(function(e,t){return e&&e[t]})),d().registerHelper("add1",(function(e){return e+1})),d().registerHelper("math",(function(e,t,n){return{"+":(e=parseFloat(e))+(n=parseFloat(n)),"-":e-n,"*":e*n,"/":e/n,"%":e%n}[t]})),d().registerHelper("logoImage",(function(e,t,n){var i,a,o;if(s().isEmpty(e)){if(1!==(t=t.trim()).length)if(t.indexOf(" ")>0){var r=t.split(" ");t=r[0][0]+r[1][0]}else t=t[0]+t[1];i='<span class="logoEl">'+t+"</span>"}else 0===e.indexOf("http://")?e=e.replace("http://","//"):0===e.indexOf("https://")&&(e=e.replace("https://","//")),i='<img class="logoEl" src="'+e+'" />';return new(d().SafeString)((a=i,o=["logoImage"],s().isBoolean(n)&&n&&o.push("logoImage--large"),'<div class="'+o.join(" ")+'">'+a+"</div>"))})),d().registerHelper("guidesTemplate",(function(e,t){var n="input-args-"+e,i=d().partials[n];return i?new(d().SafeString)(i(t)):"Partial not loaded"})),d().registerHelper("includes",(function(e,t,n){return s().isString(e)&&s().includes(e,t)?n.fn(this):n.inverse(this)})),d().registerHelper("notIncludes",(function(e,t,n){return s().isString(e)&&s().includes(e,t)?n.inverse(this):n.fn(this)})),d().registerHelper("for",(function(e,t,n,i){let s="";for(let a=e;a<t;a+=n)s+=i.fn(a);return s}));const f=h},61170:(e,t,n)=>{"use strict";var i=n(52308),s=n.n(i),a=n(96486),o=n.n(a),r=n(93443),c=r.Z.create(n(86575));function l(){return Date.now()}var d=3e4,u=!!o().isUndefined(document.hasFocus)||document.hasFocus(),h=null,p=!0,f=l(),m=l(),g=function(e){0!==(e=Math.round(e/1e3||0))&&(console.debug("ANALYTICS: [timing] emitting timechunk",e),m=l(),c.timeChunkMsSpent(d>e?e:d))},b=function(){console.debug("ANALYTICS: [timing] interval triggered"),l()-f<=6e5?g(d):(console.debug("ANALYTICS: [timing] INACTIVITY_TIMEOUT has been exceeded!"),p=!1,y())},v=function(){o().isNull(h)&&(h=setInterval(b,d))},y=function(){o().isNull(h)||(clearInterval(h),h=null)},w=function(){f=l(),v()},_=o().debounce(w,1e3,{maxWait:6e4}),k=function(){console.debug("ANALYTICS: [timing] focus"),u=!0,p=!0,m=l(),f=l(),y(),v()},P=function(){console.debug("ANALYTICS: [timing] blur"),u=!1,p&&(y(),p=!1,f=l(),g(l()-m))};u&&v();var C,x,E=s()(window);E.click(_).keyup(_),void 0!==document.hidden?(C="hidden",x="visibilitychange"):void 0!==document.msHidden?(C="msHidden",x="msvisibilitychange"):void 0!==document.webkitHidden&&(C="webkitHidden",x="webkitvisibilitychange"),void 0===document.addEventListener||void 0===document[C]?E.focus(k).blur((function(){s()("iframe").is(":focus")||P()})):document.addEventListener(x,(function(){document[C]?P():k()}),!1),r.Z.subscribe("route:changed",w),r.Z.subscribe("tab:activated",w),r.Z.subscribe("tab:focus",w),r.Z.subscribe("vm:ping",w)},19575:(e,t,n)=>{"use strict";n.d(t,{xD:()=>F,default:()=>se,qg:()=>$,yU:()=>Y,Xm:()=>W,ED:()=>U,Tf:()=>te,L4:()=>B,KC:()=>ne,RO:()=>ie,pu:()=>ee,ET:()=>d.Z,z6:()=>X,_v:()=>T,Bd:()=>y});var i=n(52308),s=n.n(i),a=n(96486),o=n.n(a),r=(n(62102),n(22424)),c=n(75121),l=n.n(c),d=n(97373),u=n(25715),h=n.n(u),p=n(98296),f=n.n(p),m=n(41663),g=n.n(m),b=n(79791),v={startsWith:function(e,t){return e.substr(0,t.length)===t},escapeColon:function(e){return o().isString(e)?e.replace(/:/g,"\\:"):e},bold:function(e){return"<b>"+e+"</b>"}};const y=v;var w=n(18356),_=n.n(w),k=n(65236),P=n(97137),C=Date.now();const x=6e4,E=function(e){var t=Date.now(),n=t-C;return(e||n<x)&&(C=t),n},S=function(e){return E(e)>x};if(window.Worker){var I=function(){setInterval((function(){postMessage({})}),1e4)}.toString();I=I.substring(I.indexOf("{")+1,I.lastIndexOf("}"));var A=new Blob([I],{type:"application/javascript"});new Worker(URL.createObjectURL(A)).onmessage=function(){E()}}else window.setInterval(E,1e4),s()(window).on("focus",(function(){S(!0)}));const T={SLEEP_DETECT_TIMEOUT:x,wasSleep:S,wasSleepTimer:E};var j=n(54565),Z=n(84096);const O={checkErrorForIgnore:e=>{e.ignore||e.message&&P.Z.error(e.message)}};var N=new(_()),D=g().tz.guess(),M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",R=new RegExp("(/|\\\\|\\|\\?|'|%|\\*|<|>|\")","i");var L={youtubeLinkRegex:"(?:https?:\\/\\/)?(?:www\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:embed\\/|v\\/|watch\\?v=|watch\\?.+&v=))((\\w|-){11})(?:\\S+)?",path:d.Z,url:h(),markdown:b.ZP,str:y};L.getURLParameter=function(e){return L.getURLParameterFromString(location.search.replace(/^\?/,""),e)},L.getURLParameterFromString=function(e,t){var n=N.parseQueryString(e);return o().isUndefined(n[t])?null:n[t]},L.encode64=function(e){var t,n,i,s,a,o,r,c="",l=0;for(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t+=String.fromCharCode(i):i>127&&i<2048?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t}(e);l<e.length;)s=(t=e.charCodeAt(l++))>>2,a=(3&t)<<4|(n=e.charCodeAt(l++))>>4,o=(15&n)<<2|(i=e.charCodeAt(l++))>>6,r=63&i,isNaN(n)?o=r=64:isNaN(i)&&(r=64),c=c+M.charAt(s)+M.charAt(a)+M.charAt(o)+M.charAt(r);return c},L.decode64=function(e){var t,n,i,s,a,o,r="",c=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)t=M.indexOf(e.charAt(c++))<<2|(s=M.indexOf(e.charAt(c++)))>>4,n=(15&s)<<4|(a=M.indexOf(e.charAt(c++)))>>2,i=(3&a)<<6|(o=M.indexOf(e.charAt(c++))),r+=String.fromCharCode(t),64!==a&&(r+=String.fromCharCode(n)),64!==o&&(r+=String.fromCharCode(i));return function(e){var t,n,i,s="",a=0;for(t=n=0;a<e.length;)(t=e.charCodeAt(a))<128?(s+=String.fromCharCode(t),a++):t>191&&t<224?(n=e.charCodeAt(a+1),s+=String.fromCharCode((31&t)<<6|63&n),a+=2):(n=e.charCodeAt(a+1),i=e.charCodeAt(a+2),s+=String.fromCharCode((15&t)<<12|(63&n)<<6|63&i),a+=3);return s}(r)},L.arrayBufferToBase64=function(e){return btoa(new Uint8Array(e).reduce(((e,t)=>e+String.fromCharCode(t)),""))},L.XML2JSON=function(e){var t={};try{t=s().xml2json(e)}catch(e){}return t};const F=L.GUID=function(e){function t(){var e=Math.floor(65536*Math.random()).toString(16),t="0000";return t.substring(0,4-e.length)+e}if(e){for(var n=t(),i=0;i<e;i++)n+="-"+t();return n+""}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},B=(L.addErrorToInput=function(e,t){var n=(e=s()(e)).attr("title");e.prop("invalid",!0),e.data("inputErrorCallback")&&e.data("inputErrorCallback")(),!t&&(t={}),s().isPlainObject(t)||(!t&&(t=""),t={title:t});var i='<div class="input-error"><i class="ss-icon error">alert</i>'+t.title+"</div>",a=e.parents(".control-group");0===a.length&&0===(a=e.parents("fieldset")).length&&(a=e.parent()),a.addClass("error");var r=s()(i);i=r.attr("title",t.title);var c=!1!==t.toEnd?"after":"before",l=t.events||["keyup","blur","change"];function d(i){i&&13===i.keyCode||(a.removeClass("error"),r.remove(),r=null,t.cm?o().each(l,(function(e){t.cm.off(e,d)})):e.unbind(l,d),e.data("inputErrorCallback",null),e.prop("invalid",!1),n?e.attr("title",n):e.removeAttr("title"),e.removeClass("no-icon-error input-error-border"))}t.cm||(o().each(l,(function(e,t){l[t]=e+".errorInput"})),l=l.join(" ")),t.noIcon?(e.addClass("no-icon-error"),e.attr("title",t.title)):t.showErrorOn?t.showErrorOn[c](i):t.append?a.append(i):"after"===c&&e.data("selectize")?(i.addClass("input-error-selectized"),e.data("selectize").$wrapper.after(i)):e[c](i),e.addClass("input-error-border"),t.cm?o().each(l,(function(e){t.cm.on(e,d)})):e.one(l,d),e.data("inputErrorCallback",d),t.noFocus||(t.cm?t.cm.focus():e.focus())},L.validateEmail=function(e){return new RegExp("[\\w\\.+]{1,}[@][\\w\\-]{1,}([.]([\\w\\-]{1,})){1,5}$","ig").test(e)},L.validateMandatory=function(e){return s().trim(e).length>0},L.validateUsername=function(e){return e.replace(/[^a-z0-9\-]+/gi)===e},L.isProjectNameNotValid=function(e){var t;return e?e.length>80&&(t="Project name is too long and cannot be more than 80 characters"):t="Name cannot be empty",t},L.isNameNotValid=function(e){var t;return e?/[^a-z0-9A-Z-_ \.]+/gi.test(e)?t="Name contains invalid characters":e.length>80&&(t="Name is too long and cannot be more than 80 characters"):t="Name cannot be empty",t},L.isItemNameValid=function(e){return null!=e&&""!==e&&!R.test(e)}),U=(L.os=function(){var e=navigator.platform.toLowerCase();return-1!==e.indexOf("mac")?"mac":-1!==e.indexOf("win")?"windows":-1!==e.indexOf("linux")?"linux":"unknown"},L.formatKey=function(e){return"mac"===L.os()&&(e=e.replace(/Ctrl/g,"<i>^</i>").replace(/Cmd/g,"<i>âŒ˜</i>").replace(/Shift/g,"<i>â‡§</i>").replace(/Alt/g,"<i>âŒ¥</i>")),e},L.formatCommand=function(e){var t=e.indexOf("+")>-1?"+":"-",n=e.split(t);return o().reduce(n,(function(e,t){return e.push(L.formatKey(t)),e}),[]).join("mac"===L.os()?"":"+")},L.inherit=function(e,t){function n(){}n.prototype=t&&t.prototype,e.prototype=new n,e._sc=t.prototype,e._sc.constructor=t});L.equalNames=function(e,t){return e.toLowerCase()===t.toLowerCase()},L.truncate=function(e,t){var n=e;return n&&t>0&&e.length>t&&(n=s().trim(e).substring(0,t).trim(this)+"..."),n||""};var q=document.createTextNode("test"),H=document.createElement("span");H.appendChild(q);L.safeHtml=function(e){return q.nodeValue=e,H.innerHTML},L.validateHostname=function(e){return!(!/^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\-]*[A-Za-z0-9])(:\d{1,5})*$/.test(e)&&!/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(:\d{1,5})*$/.test(e))},L.isDirectoryUploadSupport=function(){var e=navigator.userAgent.toLowerCase();return/webkit/.test(e)&&/chrome/.test(e)},L.getOrg=function(e){if(0!==e.indexOf("/home/orgs/"))throw new Error("Not an applicable path");return e.split("/")[3]},L.getTeam=function(e){var t=e.split("/");if(0!==e.indexOf("/home/orgs/")||"teams"!==t[4])throw new Error("Not an applicable path");return t[5]},L.showFastFade=function(e,t){var n=Z.ZP.deferred(),i=s()(e).css("display");return s()(e).css("display","none"),s()(e).append(t),s()(e).velocity("fadeIn",{duration:200,display:i,complete:function(){n.resolve(t)}}),n.promise},L.hideFastFade=function(e,t){var n=Z.ZP.deferred();return e?t?s()(e).velocity("fadeOut",{duration:t,complete:function(){n.resolve()}}):n.resolve():n.reject(new Error("Container not passed")),n.promise},L.getRandomColor=function(e){return"#"+l()(e).slice(0,6)},L.getVal=function(e,t,n){var i,s=e.find('[name="'+t+'"]');if("date"===n){var a=s.data("datepicker");if(!(a=a||s.parent().data("datepicker")))return;if(i=a.getDate(),isNaN(i.getTime()))return}else i=s.val();return i},L.realName=function(e){return o().isString(e)?e.replace(/\uFF0E/g,".").replace(/\uFF04/g,"$"):e},L.mongoName=function(e){return o().isString(e)?e.replace(/\./g,"ï¼Ž").replace(/\$/g,"ï¼„"):e},L.redirect=function(e,t){return{enter:function(n){n.urlParams&&(t=t+"?"+s().param(n.urlParams)),e.router.redirectTo(t)}}},L.toHTML=function(e){return L.markdown.render(e,{breaks:!0,sanitize:!0,smartLists:!0,allowedTags:"iframe|br",highlight:k.Z}).catch((function(e){console.error(e),P.Z.error("Unable to parse and render markdown")}))},L.hashCode=function(e,t,n){var i,s,a=void 0===n?2166136261:n;for(i=0,s=(e=o().isString(e)?e:"").length;i<s;i++)a^=e.charCodeAt(i),a+=(a<<1)+(a<<4)+(a<<7)+(a<<8)+(a<<24);return t?("0000000"+(a>>>0).toString(16)).substr(-8):a>>>0};function G(e){if(!e){P.Z.info("All available Giga box slots are currently in use. Your project will run on the standard plan limits")}}L.checkGigaBoxStatusOnStart=function(e,t){if(e.gigaBoxSlot){const n=e.start_container_task_id;n&&t.GigaBoxesManager.isSlotOfferedOnStart(n,e.guid).then(G)}},L.checkGigaBoxStatus=function(e,t){e.gigaBoxSlot&&t.GigaBoxesManager.isSlotOffered(e.guid).then(G)};const W=e=>{var t=document.referrer&&document.referrer.match(/https?:\/\/([^\/]+)\/?([^\/]+)?/),n=t&&t[1]||"",i=t&&t[2]||"home";return n===location.hostname&&"home"===i?document.referrer:e};L.getBackToDashboardUrl=W;L.goBackOrLocation=function(e){location.assign(W(e))},L.dropHelper=function(e){return function(t,n,i){var s=d.Z.isImage(i.path,i.type);if(s){var a=e(i);t.replaceRange(a+"\n",i.position,i.position)}return s}};function z(e){if(e.disabled||!s()(e).is(":visible"))return!1;var t=e.getAttribute("aria-hidden");if(!0===t||"true"===t)return!1;if(e.tabIndex>0||0===e.tabIndex&&null!==e.getAttribute("tabIndex"))return!0;switch(e.nodeName){case"A":return!!e.href&&"ignore"!==e.rel;case"INPUT":return"hidden"!==e.type&&"file"!==e.type;case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}}L.hasWebpSupport=o().once((function(){return new Promise((e=>{var t=new Image;t.src="data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMwAgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA",t.onload=t.onerror=function(){e(2===t.height)}}))}));var V=null,K=[];function J(e,t){var n=null;return(t?o().forEachRight:o().each)(e,(function(e){if(n=z(e)?e:J(s()(e).children(),t))return!1})),n}L.trapFocus=function(e,t,n){if(K.length&&K[K.length-1].html===t)if(s()(n.target).closest(e).length)V=n.target;else{if(!z(n.target))return;var i=J(t.find(e));i&&(V===i&&(i=J(t.find(e),!0)),i&&s()(i).focus())}},L.addTrapFocus=function(e,t){const n=o().debounce(L.trapFocus.bind(null,e,t),500);return document.addEventListener("focus",n,!0),K.push({trapFunction:n,html:t}),n},L.removeTrapFocus=function(e){e&&e.cancel&&e.cancel(),e&&document.removeEventListener("focus",e,!0),K=o().remove(K,(function(t){return t.trapFunction===e}))};L.findFocusable=J,L.KeyCode={TAB:9,RETURN:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,HOME:36,END:35,ZERO:48,PLUS:107,NUMPAD0:96,PAGE_UP:33,PAGE_DOWN:34};const Y=L.formatDateFullUS=function(e){return e?f()(e).format("MMM Do YYYY h:mma (UTC Z)")+" "+D:""},Q=(L.formatDateFullUSWithoutTZ=function(e){return e?f()(e).format("MMM Do YYYY h:mma"):""},L.isIframe=function(){try{return window.self!==window.top}catch(e){return!0}},L.fullscreenSupport=function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled},L.getFullscreenElement=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},L.toggleIframeFullscreen=function(){if(L.getFullscreenElement())document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen();else{var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()}},L.b64EncodeUnicode=function(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode("0x"+t)})))},L.b64DecodeUnicode=function(e){return decodeURIComponent(atob(e).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))},L.renderFeedback=function(e,t){return 3===t?Promise.resolve(r.Z.sanitize(e)):2===t?L.toHTML(e):Promise.resolve(o().map(e.split("\n"),(e=>(e=o().escape(e),"<p>".concat(e,"</p>")))).join(""))},L.waitAddress=async(e,t)=>{var n=L.url.parse(e);o().isUndefined(t)&&(t=Z.ZP.deferred(),o().delay(t.resolve,3e4,e)),(e=>{const t=e.split(".",1)[0];return o().includes(e,j.Z.get("boxDomain"))&&t.split("-").length>2})(e)||t.resolve(e);var i="//"+n.hostname+"/codio_is_alive_check";return await Z.ZP.getState(t.promise)!==Z.ZP.STATES.FULFILLED&&s().ajax(i).fail((function(){o().delay(Q,500,e,t)})).done((function(){t.resolve(e)})),t.promise}),X=e=>e&&e.replace(/\s+/g,"");function $(e){return(e=o().trim(e)).replace(/^\/+/,"")}const ee=e=>{const t=document.createElement("script");t.setAttribute("src",e),t.setAttribute("type","text/javascript"),t.setAttribute("async","true"),document.body.appendChild(t)},te=e=>{if(0===e.length)return!0;const t=o().trim(e);return/^<(img|p|span|div)[>/ ]/i.test(t)},ne="VeChain"!==j.Z.get("whitelabel"),ie="VeChain"===j.Z.get("whitelabel");L.sleep=T,L.getProjectIdeUrl=e=>{let{projectId:t,ownerSlug:n,projectSlug:i}=e;return n?"/".concat(n,"/").concat(i):"/projects/".concat(t)},L.promise=Z.ZP,L.error=O;const se=L},38299:(e,t,n)=>{"use strict";n.d(t,{y:()=>a});var i=n(52308),s=n.n(i);const a=function(e){e.find("img.svg").each((function(){var e=s()(this),t=e.attr("id"),n=e.attr("class"),i=e.attr("src"),a=e.attr("viewBox");s().get(i,(function(i){var o=s()(i).find("svg");void 0!==t&&(o=o.attr("id",t)),void 0!==n&&(o=o.attr("class",n+" replaced-svg")),o=(o=o.removeAttr("xmlns:a")).attr("viewBox",a),e.replaceWith(o)}),"xml")}))}},79791:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>_,xh:()=>w});var i=n(52308),s=n.n(i),a=n(96486),o=n.n(a),r=n(68212),c=n(96906),l=n.n(c),d=n(49721),u=n(19575),h=n(65236);const p="-hide-clipboard",f=function(e){var t=s()(e);return t.find("img.raw-image").each((function(){var e=s()(this);d.default.currentProject.getImageDataURI(e.attr("src")).then((function(t){e.attr("src",t)})).catch((()=>{}))})),t.find("a").each((function(){"#"===s()(this).attr("href")[0]||s()(this).attr("target","_blank")})),t};function m(e,t){if("image"===e[t].type){var n=e[t].src,i=e[t].title,s=e[t].alt,a=n.match(new RegExp(u.default.youtubeLinkRegex));if(a){var r=s&&s.match(/(\d+)\s*x\s*(\d+)/),c=r&&r[1]||640,l=r&&r[2]||480;return['<iframe allowFullScreen="allowFullScreen" src="//www.youtube.com/embed/',a[1],'?wmode=opaque"',' width="',c,'"',' height="',l,'"',' frameborder="0"></iframe>'].join("")}return n.match(/^http(s)?:\/\//)?['<img src="',o().escape(n),'" alt="',o().escape(s),'"',i?' title="'+o().escape(i)+'"':"",' class="guides-image"',">"].join(""):['<img src="',o().escape(n),'" alt="',o().escape(s),'"',i?' title="'+o().escape(i)+'"':"",' class="raw-image guides-image"',">"].join("")}}function g(e,t,n,i,s){if("code"===e[t].type){if(e[t].block){const n=o().uniqueId("code-"),i='<span class="btn-clipboard" title="Copy to clipboard"'+'data-clipboard-target="#'.concat(n,'"></span>');return'<div class="code-block">'.concat(i,'<pre><code id="').concat(n,'">')+"".concat(r.utils.escapeHtml(e[t].content),"</code></pre></div>").concat(s.getBreak(e,t))}return"<code>"+r.utils.escapeHtml(e[t].content)+"</code>"}}function b(e,t,n,i,s){if("fence"!==e[t].type)return;const a=e[t],c=[],l=[],d=n.langPrefix;let u,h,f,m="",g=!1;if(a.params){if(u=a.params.split(/\s+/g),h=u.join(" "),r.utils.has(s.rules.fence_custom,u[0]))return s.rules.fence_custom[u[0]](e,t,n,i,s);o().includes(h,p)&&(g=!0,h=h.replace(p,"")),m=r.utils.escapeHtml(r.utils.replaceEntities(r.utils.unescapeMd(h))),l.push("".concat(d).concat(m))}if("math"===m){g=!0,l.push("tex2jax_process"),c.push("tex2jax_process"),null!=n&&n.noReact&&(f='<span class="mathjax">'.concat(a.content,"</span>"));const e=window.escape("$$"+a.content+"$$");f='<MathJax data="'.concat(e,'" />')}else f=n.highlight&&n.highlight.apply(n.highlight,[a.content].concat(m.trim()))||r.utils.escapeHtml(a.content);const b=o().uniqueId("code-"),v=g?"":'<span class="btn-clipboard" title="Copy to clipboard"'+' data-clipboard-target="#'.concat(b,'"></span>'),y=c.join(" "),w=l.join(" ");return'<div class="code-block">'.concat(v,'<pre class="').concat(y,'"><code id="').concat(b,'" class="').concat(w,'">').concat(f)+"</code></pre></div>".concat(s.getBreak(e,t))}function v(e){e.renderer.rules.paragraph_open=function(e,t,n){return e[t].lines&&0===e[t].level?n.noDataLine?"<p>":'<p class="codio-md-line" data-line="'+e[t].lines[0]+'">':e[t].tight?"":"<p>"},e.renderer.rules.heading_open=function(e,t){var n;return e[t].lines&&0===e[t].level?(n=e[t].lines[0],"<h"+e[t].hLevel+' class="codio-md-line" data-line="'+n+'">'):"<h"+e[t].hLevel+">"}}function y(e,t){return o().isArray(e)||(e=[e]),function(){var n,i=[].slice.call(arguments);return o().each(e,(function(e){if(n=e.apply(null,i),!o().isUndefined(n))return!1})),o().isUndefined(n)?t.apply(null,i):n}}const w=function(e,t,n,i){t=o().defaults(t,{html:!1,xhtmlOut:!1,breaks:!0,typographer:!0,highlight:h.Z});var s=new r.Remarkable("full",t);n=n||[],o().isArray(n)||(n=[n]),n.push(m),n.push(g),n.push(b),s.renderer.rules.image=y(n,s.renderer.rules.image.bind(s.renderer)),s.renderer.rules.code=y(n,s.renderer.rules.code.bind(s.renderer)),s.renderer.rules.fence=y(n,s.renderer.rules.fence.bind(s.renderer)),s.use(l()),s.use(v),s.use(r.linkify),i=i||[],o().each(i,(function(e){s.use(e,t)})),!1===t.footnote?(s.block.ruler.disable(["footnote"]),s.inline.ruler.disable(["footnote_inline"])):s.renderer.rules.footnote_ref=function(e,t){var n=Number(e[t].id+1).toString(),i="fnref"+n;return e[t].subId>0&&(i+=":"+e[t].subId),'<sup class="footnote-ref"><a href="#fn'+n+'" id="'+i+'" class="footnote-ref-link">['+n+"]</a></sup>"};var a=s.render(e);return!0!==t.asString&&(a=f(a)),a},_={convertExternalLinks:f,isReadme:function(e){var t=e&&e.toLowerCase();return"readme.md"===t||"readme.markdown"===t},render:async function(e,t,n,i){return w(e,t,n,i)},renderSync:w}},97373:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(96486),s=n.n(i),a="/",o={};const r=["png","apng","avif","gif","jpg","jpeg","jfif","pjpeg","pjp","svg","webp","bmp","ico","cur","tif","tiff"];o.parse=function(e){var t=e.split(a),n={name:t.pop(),dir:t.join(a)};return n.extension=o.getFileExtension(n.name),n},o.escape=function(e){return(e||"").replace(/[^a-z0-9]/gi,"-")},o.getFileExtension=function(e){var t=e.lastIndexOf(".");return(t<0?"":e.substring(t+1)).toLowerCase()},o.getFileName=function(e){var t=e.lastIndexOf(".");return t<0?e:e.substring(0,t)},o.makePath=function(e,t){return e?e+"/"+t:t},o.join=function(){return s().map(arguments,(function(e){if(function(e){if(!s().isString(e))throw new TypeError("Arguments to path.join must be strings");return e}(e))return(e=e.replace(/^\//,"")).indexOf("//")!==e.length-2&&(e=e.replace(/\/$/,"")),e})).join(a)},o.replaceProjectName=function(e,t){var n=e.indexOf("/home/projects")>-1,i=e.split(a),s=n?3:2;return i.length>s&&(i[s]=this.escape(t).toLowerCase()),i.join(a)},o.isImage=function(e,t){var n=s().toLower(e);return s().some(r,(function(e){return s().endsWith(n,e)}))&&"dir"!==t};const c=o},84096:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>r});var i=n(96486),s=n.n(i);const a={PENDING:"pending",FULFILLED:"fulfilled",REJECTED:"rejected"},o=()=>{let e,t;const n=new Promise(((n,i)=>{e=n,t=i}));return{resolve:e,reject:t,promise:n}},r={STATES:a,getState:e=>{const t={};return Promise.race([e,t]).then((e=>e===t?a.PENDING:a.FULFILLED)).catch((()=>a.REJECTED))},deferred:o,defer:e=>new Promise((t=>{s().defer((()=>t(e)))})),iterateAsync:(e,t)=>s().reduce(e,(function(e,n,i){return e.then((()=>t(n,i)))}),Promise.resolve()).then((function(){})),delay:(e,t)=>new Promise((n=>{s().delay((()=>n(t)),e)})),allSeries:e=>{if(!e.length)return Promise.resolve();let t=0;const n=async()=>{if(await e[t],t+=1,!(t>=e.length))return n()};return n()},mapSeries:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!e.length)return Promise.resolve();const i=o(),a=[],r=[...e],c=e=>{const o=e.slice(0,n),r=s().map(o,t);Promise.all(r).then((t=>{a.push(...t);const s=e.slice(n);s.length?c(s):i.resolve(a)})).catch((e=>i.reject(e)))};return c(r),i.promise},waitPromiseOrResolve:async(e,t)=>{const n=o();setTimeout((()=>{n.resolve()}),t);try{const t=await e;n.resolve(t)}catch(e){n.reject(e)}return n.promise}}},44952:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var i=n(96486),s=n.n(i),a=n(97373),o=n(9380),r=n(49721),c=n(54565),l=n(93443),d={interpolate:/{{([\s\S]+?)}}/g},u=null;l.Z.subscribe("filetree:select:#file",(function(e){u=e.file}));const h={interpolate:function(e){return async function(){var e=r.default.ide.panels.focus&&r.default.ide.panels.focus.activeTab();if(e)return s().includes(["tutorial","tour"],e.extensionName)?e.extension.then((e=>e.filename)):e.filename}().then((t=>function(e,t){var n=r.default.currentProject;t&&n.exists(t)||(t=null!==u?u:"");var i=a.Z.parse(t),l=o.Z.get("preview"),h="";l&&!s().isUndefined(l.index_file)&&(h=l.index_file);var p={filepath:t,path:i.dir,filename:i.name,filename_no_ext:a.Z.getFileName(i.name),domain:n.backendDomain,index:h};return function(e,t,n){for(var i=80;i<1e4;i++)e["domain"+i]=[t,"-",i,".",n].join(""),e["domain:"+i]=[t,"-",i,".",n].join("")}(p,n.backendSubDomain,c.Z.get("boxDomain")),s().template(e,d)(p)}(e,t))).catch((()=>e))}}},70199:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var i=n(96486),s=n.n(i),a=n(33105),o=function(){this.uid="details",this.details=[]},r=o.prototype;r.init=function(e){e&&(this.details=e)},r.get=function(e){return this.details[e]},r.getName=function(){return this.details.actual_name||this.details.name},r.set=function(e,t){this.details[e]=t},r.clean=function(){this.details=[]},r.getData=function(){return this.details};const c=o;var l=function(){this.uid="projects",this.accountProjects=[]},d=l.prototype;d.init=function(e){e&&(this.accountProjects=e)},d.clean=function(){this.accountProjects=[]},d.projects=function(){return this.accountProjects},d.getData=function(){return this.accountProjects};const u=l;var h=function(){this.uid="ide-settings",this.ideSettings={}},p=h.prototype;p.init=function(e){e&&(this.ideSettings=e)},p.get=function(e){return this.ideSettings[e]},p.set=function(e,t){this.ideSettings[e]=t},p.getEditorSettings=function(){return this.ideSettings["code-editor-settings"]||{}},p.setEditorSettings=function(e){this.ideSettings["code-editor-settings"]=e},p.getData=function(){return this.ideSettings};const f=h;var m=function(){this.uid="userSettings",this.settings={}},g=m.prototype;g.init=function(e){e&&(this.settings=e)},g.get=function(e){return this.settings[e]},g.set=function(e,t){this.settings[e]=t},g.clean=function(){this.settings={}},g.getData=function(){return this.settings};var b=["groups","openedFileSessions","subscription","extensionsDevMode"],v={details:c,projects:u,"ide-settings":f,userSettings:m};var y=function(e){this.account={},this.processors={};var t=this;e.account&&(t.account=e.account),e.projectCount&&(t.projectCount=e.projectCount),e.privateAccess&&(t.privateAccess=e.privateAccess),this.incognitoLogin=!!e.incognitoLogin,e&&(s().forOwn(v,(function(n,i){var a=new n;a.init&&!s().includes(b,i)&&a&&a.init(e[i]),t.set(i,a)})),s().forEach(b,(function(n){t.set(n,e[n])}))),e.ipConsents&&(t.ipConsents=e.ipConsents),e.customScripts&&(t.customScripts=e.customScripts),e.extensions&&(t.extensions=e.extensions)},w=y.prototype;w.get=function(e){return this.processors[e]},w.set=function(e,t){this.processors[e]=t},w.getAccountUid=function(){return this.account},w.hasPrivateAccess=function(){return this.privateAccess},w.isInTrial=function(){var e=this.get("details").get("trialExpirationTimestamp");return e&&(new Date).getTime()<e},w.isDummy=function(){var e=this.get("details");return e&&!0===e.get("is_dummy")},w.isAnonymous=function(){var e=this.get("details");return!e||"anon"===e.get("name")},w.isSuspended=function(){var e=this.get("details");return!(!e||!0!==e.get("is_suspended"))},w.isStaff=function(){var e=this.get("details");return e&&e.get("is_staff")},w.name=function(){var e=this.get("details");return e?e.get("name"):""},w.slug=function(){var e=this.get("details");return e?e.get("lowerName"):""},w.displayName=function(){var e=this.get("details");if(e){var t=e.get("actual_name"),n=e.get("firstName"),i=e.get("lastName");return t&&t.trim()||n&&i&&s().compact([n,i]).join(" ").trim()||this.name()}return""},w.saveSection=function(e,t){var n;n=this.processors[e].getData?this.processors[e].getData():this.processors[e],a.Z.apiRequest({object:"AccountManager",method:"save",data:{section:e,content:n},callback:function(e){!function(e,t){t&&t(e)}(e,t)}})},w.updatePassword=function(e,t){a.Z.apiRequest({object:"AccountManager",method:"updatePassword",data:{password:e},callback:function(e){t&&t(!e.error)}})};const _=y},71970:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var i=n(4942),s=n(96486),a=n.n(s),o=n(15094),r=n(49721),c=n(93443),l=n(19575),d=n(87167),u=n(28755),h=n(34391),p=n(9380),f=n(12953);const m=c.Z.create(u),g={error:8,warning:4};const b=class{constructor(){const e=this.constructor.instance;if(e)return e;this.constructor.instance=this,this._init()}_init(){c.Z.subscribe("settings:loaded",this._onSettingsLoaded.bind(this))}_enableLSP(){this._createProviders(),this._bindEditorEvents()}_convertRange(e){return{endLineNumber:e.end.line+1,endColumn:e.end.character+1,startLineNumber:e.start.line+1,startColumn:e.start.character+1}}_prepareAnnotation(e,t,n){var i;const s=null!==(i=t.command)&&void 0!==i&&null!==(i=i.command)&&void 0!==i&&i.id?t.command:void 0;if(!t.textEdit){const i=t.insertText||t.label,a=/[\w$]+/;let o=e.startColumn;for(;o>1&&a.test(n.charAt(o-2));)--o;return e.startColumn=o,{...t,command:s,range:e,insertText:i}}const{textEdit:o}=t;let r;r=o.range?this._convertRange(o.range):o.replace?this._convertRange(o.replace):o.insert?this._convertRange(o.insert):e,delete t.textEdit;const c=t.additionalTextEdits?a().map(t.additionalTextEdits,(e=>({text:e.newText,range:this._convertRange(e.range)}))):void 0;return{...t,command:s,range:r,insertText:o.newText,additionalTextEdits:c}}_commonCompletionProviderCallback(){return this._editor?new Promise((e=>{const t=this._editor.editor().getPosition(),n=this._editor.model().getLineContent(t.lineNumber);m.hint({position:t,cb:i=>{if(!i||0===i.length)return void e(null);const s=d.Zo.e6.fromPositions(t,t),o=a().map(i,(e=>this._prepareAnnotation(s,e,n)));e({suggestions:o})},fileName:this._editor?this._editor.fileName:"",curLine:n})})):null}_commonHoverProviderCallback(e,t){return this._editor?new Promise((e=>{m.hover({position:t,cb:t=>{if(!Array.isArray(t))return void e({value:t});const n=t.map((e=>e.value?{value:e.value}:{value:e})).filter((e=>!!e));e({contents:n})},fileName:this._editor?this._editor.fileName:""})})):null}_createProviders(){const e=f.B.map((e=>d.Zo.SQ.registerCompletionItemProvider(e,["."],this._commonCompletionProviderCallback.bind(this)))),t=f.B.map((e=>d.Zo.SQ.registerHoverProvider(e,this._commonHoverProviderCallback.bind(this))));this._providers=[...e,...t]}_prepareDiagnostics(e){return e.map((e=>({startLineNumber:e.from.lineNumber,startColumn:e.from.column,endLineNumber:e.to.lineNumber,endColumn:e.to.column,message:e.message,severity:g[e.severity]})))}_runValidate(){if(!this._editor.model()||this._editor.model().isDisposed())return void this._cleanDiagnostics();const e=this._editor.model().getValue();0!==e.length?m.lint({text:e,cb:e=>{const t=this._prepareDiagnostics(e);this._editor&&this._editor.editor().setModelMarkers("LSP",t)},fileName:this._editor.fileName}):this._cleanDiagnostics()}_bindEditorEvents(){const e=a().debounce(this._runValidate.bind(this),500,{maxWait:1e4});this._unbindEditorEvents(),this._editor&&(this._onChangeContentDisposable=this._editor.editor().onDidChangeModelContent(e),this._updateDiagnosticsHandler=c.Z.subscribe("lsp:diagnostics:updated:".concat(this._editor.fileName),this._runValidate.bind(this)))}_unbindEditorEvents(){this._updateDiagnosticsHandler&&c.Z.unsubscribe(this._updateDiagnosticsHandler),this._onChangeContentDisposable&&this._onChangeContentDisposable.dispose(),this._onChangeContentDisposable=null}_disableLSP(){a().each(this._providers,(e=>e.dispose())),this._unbindEditorEvents()}_onSettingsLoaded(){p.Z.get("codio-lsp").enable_lsp_support&&this._enableLSP(),c.Z.subscribe("settings:changed",(()=>{const e=p.Z.get("codio-lsp").enable_lsp_support;e&&!this._providers?this._enableLSP():!e&&this._providers&&this._disableLSP()}))}_cleanDiagnostics(){d.Zo.ML.removeAllMarkers("LSP")}setEditor(e){this._cleanDiagnostics(),this._editor=e;const t=p.Z.get("codio-lsp").enable_lsp_support;this._unbindEditorEvents(),t&&this._bindEditorEvents()}};c.Z.subscribe("file:editor:focus",(function(e,t){r.default.currentEditor=t})),c.Z.subscribe("file:editor:out",(function(){r.default.currentEditor=null}));const v=c.Z.create(u),y=new b;const w=class{constructor(e){(0,i.Z)(this,"_showLineBreaksDialog",(()=>new Promise(((e,t)=>{let n=!1;this.wnd=h.Z.showConfirm({title:"Mixed line endings",doNotCloseOpened:!0,description:"<p>The file you are opening(<code>"+this.fileName+'</code>) contains mixed line endings, which can cause problems when editing your code and using source control management. We strongly recommend that you use Linux line endings only, as this will avoid problems.</p><p>Would you like us to change the line endings in this file for you? If you choose "No", the file will be opened in read-only mode.</p>',onHide:()=>{this.wnd=null,n?e():t(new Error("Mixed line endings. RO mode"))},onClose:function(e){n=!!e}})})))),this._options=e;const t=e.fileContent;if(a().isUndefined(e.readOnly)?this._readOnly=r.default.currentProject&&r.default.currentProject.readOnly:this._readOnly=e.readOnly,t instanceof o.Z)this._model=t.model;else if(t instanceof d.yO)this._model=t;else if(a().isString(t)){const n=d.Zo.Hn.detectLanguage(t,e.fileName);this._model=new d.yO(t,n),this._model.shouldBeDisposed=!0}e.language&&d.Zo.ML.setModelLanguage(this._model,e.language),this._highlight=e.highlight,this.fileName=e.filename,this._lspSupport=!0,this._container=e.container,this._handlerFilePropUpdatedId=c.Z.subscribe("file:prop:updated:"+this.fileName,(()=>{const e=r.default.currentProject;this._model.nonUnixLineBreaks?this.readOnly(!0):this._model&&e&&!e.readOnly&&this.readOnly(!1)})),this._cursorMarkers={widgets:[],decorations:[]},this._cursorPositionHandler=c.Z.subscribe("shareman:cursors",((e,t)=>{this._cleanCursorMarkers(),a().each(t,(e=>this.drawPresence(e)))})),c.Z.subscribe("shareman:connect",(()=>{this._editor&&this._editor.setOption("readOnly",this._forceReadOnly||this._readOnly)})),c.Z.subscribe("shareman:disconnect",(()=>{this._editor&&this._editor.setOption("readOnly",!0)})),c.Z.subscribe("project:permissionsUpdated:#projectId",(()=>{if(!r.default.currentProject)return;const e=r.default.currentProject.access.control;this._readOnly=!(a().includes(["OWNER","ADMIN","WRITE_FILES"],e)&&!r.default.currentProject.isReadOnly),this._editor&&this.readOnly(this._forceReadOnly||this._readOnly)})),c.Z.subscribe("collaboration:setReadOnlyForNavigator",((e,t)=>{this._editor&&this.readOnly(t)})),this._debouncedChanges=a().debounce((()=>this._editorCursorActivity()),500,{maxWait:1e4}),v.open(this)}get lspSupport(){return this._lspSupport}_cleanCursorMarkers(){this._editor&&(a().each(this._cursorMarkers.widgets,(e=>this._editor.removeContentWidget(e))),this._cursorMarkers.decorations&&this._editor.deltaDecorations(this._cursorMarkers.decorations,[])),this._cursorMarkers={widgets:[],decorations:[]}}cleanup(){this.wnd&&(this.wnd.close(),this.wnd=null),this._handlerFilePropUpdatedId&&c.Z.unsubscribe(this._handlerFilePropUpdatedId),this._editor&&(this._cleanCursorMarkers(),this._editor._lspSupport=null,this.fileName&&v.deactivate({filename:this.fileName,editor:this._editor}),this._editor.setModel(new d.yO("")),this._focusDisposableHandler&&this._focusDisposableHandler.dispose(),this._focusDisposableHandler=null,this._changeDisposableHandler&&this._changeDisposableHandler.dispose(),this._changeDisposableHandler=null,this._debounceChangeContentDisposableHaldler&&this._debounceChangeContentDisposableHaldler.dispose(),this._debounceChangeContentDisposableHaldler=null,this._deactivateCursorTracking(),y.setEditor(null),this._editor&&this._editor.cleanup(),this._editor=null)}editor(){return this._editor}model(){return this._model}container(){return this._container}drawPresence(e){if(e.userId===r.default.currentUser.account||this.fileName!==e.file||!this._editor)return;const t=l.default.GUID(4),n={domNode:null,getId:()=>t,getDomNode:function(){if(!this.domNode){this.domNode=document.createElement("span");const t=document.createElement("span"),n=document.createElement("span"),i=0===e.cursor.lineNumber?"cursor-presence-line-0":"";n.className="cursor-presence-top cursor-presence-top-".concat(e.index," ").concat(i),n.setAttribute("data-name",e.userName),t.className="cursor-presence cursor-presence-".concat(e.index),this.domNode.append(t),this.domNode.append(n)}return this.domNode},getPosition:()=>({position:e.cursor,preference:[0]})};if(this._editor.addContentWidget(n),this._cursorMarkers.widgets.push(n),e.selection){const t=this._editor.deltaDecorations([],[{range:d.Zo.e6.fromPositions(e.cursor,e.selection),options:{inlineClassName:"cursor-presence-selection-".concat(e.index)}}]);this._cursorMarkers.decorations.push(...t)}}forceReadOnly(){this._forceReadOnly=!0,this._applyReadonly(!0)}dropForcedReadOnly(){this._forceReadOnly=!1,this.readOnly(this.readOnly())}_applyReadonly(e){this._editor&&(this._editor.setOption("readOnly",e),e?this._deactivateCursorTracking():this._activateCursorTracking())}readOnly(e){return a().isUndefined(e)||(this._readOnly=e,this._applyReadonly(this._forceReadOnly||this._readOnly)),this._readOnly}_deactivateCursorTracking(){this._changeCursorPositionDisposableHandler&&this._changeCursorPositionDisposableHandler.dispose(),this._changeCursorPositionDisposableHandler=null,v.cursorActivity({projectId:r.default.currentProject.guid,unset:!0})}_activateCursorTracking(){this._changeCursorPositionDisposableHandler||(this._changeCursorPositionDisposableHandler=this._editor.onDidChangeCursorPosition(this._editorCursorActivity.bind(this)),this._editorCursorActivity())}_editorFocusHandler(){v.focus({editor:this._editor,filename:this.fileName})}_editorCursorActivity(){if(r.default.currentProject&&this._editor&&this.fileName){const e=this._editor.getSelection(),t={fileName:this.fileName,cursor:d.Zo.e6.getStartPosition(e),projectId:r.default.currentProject.guid};d.Zo.e6.isEmpty(e)||(t.selection=d.Zo.e6.getEndPosition(e)),v.cursorActivity(t)}}_highlightCode(){if(this._editor)if(this._highlight&&!0===this._highlight.selectionOnly){const e={lineNumber:this._highlight.ref,column:this._highlight.column||1};this._editor.setPosition(e),this._editor.scrollToPosition(e)}else this._highlight&&this.editor().highlight(this._highlight)}async _activateEditorStage2(e){const t=this._options.file;if(t&&t instanceof o.Z){if(await l.default.promise.getState(t.status)===l.default.promise.STATES.REJECTED){const e=new Error("Open file error");return e.close=!0,Promise.reject(e)}}this._editor=e,y.setEditor(this),this._readOnly?this._editor.setOption("readOnly",this._forceReadOnly||this._readOnly):this._editor.setOption("readOnly",!1),this._focusDisposableHandler&&this._focusDisposableHandler.dispose(),this._focusDisposableHandler=this._editor.onDidFocus(this._editorFocusHandler.bind(this)),this._debounceChangeContentDisposableHaldler&&this._debounceChangeContentDisposableHaldler.dispose(),this._debounceChangeContentDisposableHaldler=this._editor.onDidChangeModelContent(this._debouncedChanges),r.default.currentProject.pairProgramming&&r.default.currentProject.pairProgramming.enabled&&(this._changeDisposableHandler&&this._changeDisposableHandler.dispose(),this._changeDisposableHandler=this._editor.onDidChangeModelContent((()=>v.change()))),this._forceReadOnly||this._readOnly||this._activateCursorTracking(),this._editorFocusHandler()}activate(e){this._lineBreaksState||(this._model&&this._model.nonUnixLineBreaks?this._lineBreaksState=this._showLineBreaksDialog():this._lineBreaksState=Promise.resolve());const t=this._activateEditorStage2.bind(this,e);return this._lineBreaksState.then((()=>{this._model&&this._model.nonUnixLineBreaks&&(v.filePropUpdate({path:this.fileName},{nonUnixLineBreaks:!1}),this._model.pushEOL(0))})).catch((()=>{this._model&&this._model.nonUnixLineBreaks&&(this._readOnly=!0)})).then(t).catch(t)}afterActivate(){a().isObject(this._editor)&&this._model&&(this._editor.connect&&this._editor.connect(this._container),this._editor.setModel(this._model),this._highlightCode(),this._editor.setPlaceholder("Your code goes here..."),v.activate({filename:this.fileName,editor:this._editor,codeEditor:this}),this.focus())}setOptions(e){this._highlight=e.highlight,this._highlightCode()}focus(){if(!a().isObject(this._editor))return;this._container.closest(".panel-container").hasClass("focus")&&this._editor.focus(),this._editorCursorActivity()}deactivate(){v.out(this._editor),this.cleanup()}beforeClose(){}close(){var e;v.close(this),null!==(e=this._model)&&void 0!==e&&e.shouldBeDisposed&&!this._model.isDisposed()&&this._model.dispose(),this.cleanup(),this._cursorPositionHandler&&c.Z.unsubscribe(this._cursorPositionHandler)}enterFullscreen(){}leaveFullscreen(){}layout(){this._editor&&this._editor.layout()}}},34391:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var i=n(83933),s=n(52308),a=n.n(s),o=n(177),r=n.n(o),c=n(47821);const l=r().compile('<form action="/" method="post" class="form-horizontal">\n    <div class="window-prompt-description"></div>\n    <div class="control-group">\n        <div class="controls window-prompt-input-div">\n            <input type="text" class="window-prompt-input input-xlarge" autofocus />\n        </div>\n    </div>\n\n    <div class="window-prompt-rule"></div>\n</form>\n'),d=function(e){e=e||{};var t=a()("<div/>");t.append(e.content||l());var n=e.rule,s="window-prompt-alert",o=t.find(".window-prompt-input");t.find(".window-prompt-description").html(e.description||"");var r=t.find(".window-prompt-rule");function d(){if(n){var t=o.val(),i=!0;switch(a().type(n)){case"function":var c=n(t);i=!1,void 0!==c&&!1!==c&&!0!==c?r.html(c||""):!1===c?r.html(e.ruleTitle||""):i=!0;break;case"regexp":i=t===t.replace(n)}i?(o.removeClass(s),r.hide()):(o.addClass(s),r.show())}}r.html(e.ruleTitle||""),o.attr("placeholder",e.placeholder||""),o.val(e.defaultValue),o.bind("keypress keyup change",(function(){d()}));var u=new i.Z({title:e.title||"Prompt",buttons:e.buttons||i.Z.MB_OKCANCEL,doNotCloseOpened:e.doNotCloseOpened,content:t,width:e.width,height:e.height,icon:null===e.icon?null:e.icon||"question",onShow:function(){o.focus()},onClose:function(t){d();var n=t===i.Z.IDOK;return(!n||!o.hasClass(s))&&c.Z.onCloseParams(e.onClose,u,n,o.val())}});return d(),u};var u=n(70580),h=n(96486),p=n.n(h),f=n(19575);const m=r().compile('<form action="/" method="post" class="ac-form-horizontal">\n\n    <p>This repository either does not exist or requires authentication. Please check the repo URL is correct and/or authentication here...</p>\n\n    <div class="ac-control-group">\n        <label class="ac-control-label" for="git-user-name">User name:</label>\n        <div class="ac-controls">\n            <input type="text" name="git-user-name" id="git-user-name" required autofocus placeholder="Your username..." value="{{name}}" class="ac-input-xlarge" maxlength="100">\n        </div>\n    </div>\n\n    <div class="ac-control-group">\n        <label class="ac-control-label" for="git-user-password">User password:</label>\n        <div class="ac-controls">\n            <input type="password" name="git-user-password" id="git-user-password" required autofocus placeholder="Your password..." value="{{password}}" class="ac-input-xlarge" maxlength="100">\n        </div>\n    </div>\n\n</form>'),g=function(e){var t="",n="";if((e=e||{}).repoUrl){var s=f.default.url.parse(e.repoUrl);if(p().isString(s.auth)){var o=s.auth.split(":");t=o[0],n=o[1]||""}}t=e.username||t,n=e.password||n;var r=a()(m({name:t,password:n})),c=new i.Z({title:"Repository authentication required",content:r,buttons:i.Z.MB_OKCANCEL,focusOn:r.find("#git-user-name").focus(),icon:e.icon||"lock",onClose:function(s){if(s!==i.Z.IDOK)p().isFunction(e.onClose)&&e.onClose(!0);else{var o=c.content().find("#git-user-name");t=a().trim(o.val());var r=c.content().find("#git-user-password");n=a().trim(r.val()),p().isFunction(e.onClose)&&e.onClose(!1,t,n)}}})},b=r().compile('<div class="window-warning">\n  <h4 class="window-warning-description"></h4>\n</div>\n'),v=function(e){e=e||{};var t=a()("<div/>");t.append(e.content||b()),t.find(".window-warning-description").html(e.description||"");return new i.Z({title:e.title||"Warning",buttons:e.buttons||i.Z.MB_OKCANCEL,doNotCloseOpened:e.doNotCloseOpened,content:t,width:e.width,height:e.height,onClose:e.onClose||function(){},icon:e.icon||"alert",onHide:e.onHide||function(){}})};i.Z.showPrompt=d,i.Z.showConfirm=u.i,i.Z.showRepoAuthWindow=g,i.Z.showWarning=v;const y=i.Z},47821:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(96486),s=n.n(i);const a={onCloseParams:async function(e,t){var n;if(s().isFunction(e)){var i=Array.prototype.slice.call(arguments);i.shift(),i.shift(),n=await e.apply(t,i)}return n}}},70580:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h,i:()=>u});var i=n(52308),s=n.n(i),a=n(177),o=n.n(a),r=n(83933),c=n(19575),l=n(47821);const d=o().compile('<div class="window-confirm">\n\n  <h4 class="window-confirm-description"></h4>\n  <div class="window-confirm-description-2"></div>\n\n  <form action="/" method="post" class="window-confirm-captcha-form">\n\n    <p>\n      To complete this action, please enter the number exactly as you see below.\n    </p>\n    <label for="confirmation-code">\n      Confirmation code:\n      <strong class="window-confirm-captcha"></strong>\n    </label>\n    <input type="text" name="confirmation_code" id="confirmation-code" required autofocus autocomplete="off" class="window-confirm-input">\n\n  </form>\n\n</div>\n'),u=function(e){e=e||{};const t=s()("<div/>");t.append(e.content||d());const n=t.find(".window-confirm-captcha-form"),i=n.find(".window-confirm-input"),a=e.captcha;let o=i.val(),u=e.captchaValue;t.find(".window-confirm-description").html(e.description||""),t.find(".window-confirm-description-2").html(e.description2||""),i.attr("placeholder",e.placeholder||"Enter Number"),a?(u?(o=(0,c.z6)(u.toLowerCase()),n.find("p").hide(),n.find("label").hide()):o=parseInt(89999*Math.random(),10)+1e4,n.find(".window-confirm-captcha").text(o)):n.hide();const h=new r.Z({title:e.title||"Confirm",buttons:e.buttons||r.Z.MB_YESNO,doNotCloseOpened:e.doNotCloseOpened,captcha:a,content:t,width:e.width,height:e.height,onHide:e.onHide,focusOn:t.find("#confirmation-code").focus(),icon:e.icon||"warning",ariaDescribedBy:e.ariaDescribedBy,onShow:function(){a?i.focus():this.buttons()[0].element.focus()},onClose:function(t){const n=t===r.Z.IDYES||t===r.Z.IDOK;return void 0!==o&&o.toString()!==(0,c.z6)(i.val()).toLowerCase()&&n?(c.default.addErrorToInput(i,"Wrong confirmation code."),!1):l.Z.onCloseParams(e.onClose,h,n,t)}});return h},h={showConfirm:u}},83933:(e,t,n)=>{"use strict";n.d(t,{Z:()=>P});var i=n(52308),s=n.n(i),a=n(96486),o=n.n(a),r=n(177),c=n.n(r),l=n(93443),d=n(19575),u=n(43553),h=(n(88541),n(47821));var p=l.Z.create(n(84151));const f=c().compile('<div\n    id="{{dialogId}}"\n    role="dialog"\n    aria-modal="true"\n    aria-labelledby="{{dialogId}}_label"\n    {{#if ariaDescribedBy}}aria-describedby="{{dialogId}}_descr"{{/if}}\n    class="modal {{#if showFade}}fade{{/if}}"\n>\n    <div tabindex="0"></div>\n    <div class="modal-entry">\n        <div class="modal-header events" data-event-id="modal-title">\n            <button type="button" class="close" tabindex="0" aria-label="Close dialog">\n                <i class="ss-icon" aria-hidden="true">close</i>\n            </button>\n            {{#if icon}}\n            <i class="ss-icon icon">{{icon}}</i>\n            {{/if}}\n            {{#if mdiIcon}}\n            <span class="iconify icon" data-icon="@codio:mdi:{{mdiIcon}}"></span>\n            {{/if}}\n            <h3 id="{{dialogId}}_label">{{title}}</h3>\n        </div>\n        <div class="modal-body" {{#if ariaDescribedBy}}id="{{dialogId}}_descr"{{/if}}>\n        </div>\n        <div class="modal-footer events"></div>\n    </div>\n    <div tabindex="0"></div>\n</div>\n');var m,g=[];function b(e,t,n){void 0!==n&&(e.element.addClass(n),e.disabledWithClass||(e.disabledWithClass=n)),e.element.addClass("disabled").prop("disabled",!0),t&&(e.oldTitle||(e.oldTitle=e.element.html()),y(e,t)),e.disabled=!0}function v(e,t){void 0===t&&(t=!0),e.disabledWithClass&&(e.element.removeClass(e.disabledWithClass),delete e.disabledWithClass),e.element.removeClass("disabled").prop("disabled",!1),e.disabled=!1,t&&function(e){e.oldTitle&&(y(e,e.oldTitle),delete e.oldTitle)}(e),delete e.oldTitle}function y(e,t){e.title=t,e.element.html(t)}function w(e){for(var t,n=e.buttons(),i=0,s=n.length;i<s;i++){var a=n[i],o=a.element.is(":visible");if(1===a.type&&o&&!a.element.hasClass("disabled")){t=n[i];break}}t&&t.onClick.call(e)}var _=function(e){if(!(this instanceof _))return new _(e);!m&&(m=s()("div.ac")),this.params=e=e||{},this.documentActiveElement=document.activeElement;var t=f({showFade:!!o().isUndefined(e.showTransition)||e.showTransition,title:this.params.title=e.title,icon:this.params.icon=e.icon,mdiIcon:this.params.mdiIcon=e.mdiIcon,dialogId:d.default.hashCode(this.params.title,!0),ariaDescribedBy:e.ariaDescribedBy||!1}),n=this.dialog=s()(t);this.dialogHeader=n.find(".modal-header"),this.buttonsPane=n.find(".modal-footer");var i=this.dialogContent=n.find(".modal-body");this.modal=null,i.append(e.content),this.buttons(e.buttons),void 0===this.params.keyboard&&(this.params.keyboard=!0),void 0===this.params.closeOnHistoryBack&&(this.params.closeOnHistoryBack=!0),function(e,t){var n=t.find("form:first");(n=0!==n.length?n:t).on("submit",(function(t){t.preventDefault(),w(e)})),e.params.focusOn||(e.params.focusOn=e.buttonsPane)}(this,i),n.addClass(e.className),this.trapFunction=d.default.addTrapFocus(".modal-entry",n),function(e){e.params.doNotCloseOpened||o().each(g,(function(e){e.close(_.IDCANCEL)})),!1!==e.params.showLoading&&m.modalmanager("loading");const t=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0);e.params.width>=t&&e.dialog.addClass("modal-width-more-than-viewport");var n=s()(e.dialog[0]).on("shown.modal",(function(){var t=e.dialog.find(".modal-entry"),n=t.find("input[autofocus]");if(n.length)n.focus();else{var i=d.default.findFocusable(t);i&&s()(i).focus()}e.params.onShow&&s().proxy(e.params.onShow,e)()})).on("hide",(function(){d.default.removeTrapFocus(e.trapFunction),s()(e.documentActiveElement).focus(),p.onClose()})).on("hidden.modal",(function(){o().remove(g,(function(t){return t===e})),e.params.onHide&&s().proxy(e.params.onHide,e)()})).modal({width:e.params.width,height:e.params.height,maxHeight:e.params.maxHeight,keyboard:e.params.keyboard,focusOn:e.params.focusOn,modalOverflow:e.params.modalOverflow,manager:m});if(e.modal=n.data("modal"),e.params.height){e.dialogContent.css("max-height","none");var i=e.params.height;o().isString(i)&&i.indexOf("%")>-1&&(i=(i=parseInt(i,10))*m.height()/100),i-=e.dialogHeader.height()+e.buttonsPane.height(),e.dialogContent.css("height",i+"px")}l.Z.bind(e.dialogHeader.find("button.close"),"click",(function(){e.close(_.IDCANCEL)})),e.onPopStateChanged=function(){e.params&&e.params.closeOnHistoryBack&&e.close(_.IDCANCEL)},u.Z.bind("popstate","dispatcher",e.onPopStateChanged),g.push(e)}(this)};_.MB_OK=2,_.MB_OKCANCEL=1,_.MB_YESNO=4,_.MB_YESNOCANCEL=3,_.MB_CANCEL=5,_.IDOK=0,_.IDCANCEL=1,_.IDYES=2,_.IDNO=3;var k=_.prototype;k.content=function(e){return e&&this.params&&this.dialogContent&&(this.params.content=e,this.dialogContent.empty().append(e)),this.dialogContent},k.title=function(e){return void 0!==e&&(this.params.title=e,this.dialogHeader.find("> h3").html(e)),this.params.title},k.buttons=function(e){if(void 0!==e){var t=this,n=this.buttonsPane,i=s()("<div/>"),a=function(e,t){var n=t;if(!s().isArray(t))switch(n=[],t){case _.MB_OK:n=[{title:"Ok",class:"mb-ok",onClick:function(){e.close(_.IDOK)},type:1}];break;case _.MB_OKCANCEL:n=[{title:"Ok",class:"mb-ok",onClick:function(){e.close(_.IDOK)},type:1},{title:"Cancel",class:"mb-cancel",onClick:function(){e.close(_.IDCANCEL)}}];break;case _.MB_CANCEL:n=[{title:"Cancel",class:"mb-cancel",onClick:function(){e.close(_.IDCANCEL)}}];break;case _.MB_YESNO:n=[{title:"Yes",class:"mb-yes",onClick:function(){e.close(_.IDYES)},type:1},{title:"No",class:"mb-no",onClick:function(){e.close(_.IDNO)}}];break;case _.MB_YESNOCANCEL:n=[{title:"Yes",class:"mb-yes",onClick:function(){e.close(_.IDYES)},type:1},{title:"No",class:"mb-no",onClick:function(){e.close(_.IDNO)}},{title:"Cancel",class:"mb-cancel",onClick:function(){e.close(_.IDCANCEL)}}]}return n}(this,e);n.empty(),l.Z.off(n,"click.windowButtons"),l.Z.on(n,"click.windowButtons",(function(e){var n=s()(e.target).data("pos");if(void 0!==n){var i=a[n];i&&!i.element.hasClass("disabled")&&i.onClick&&i.onClick.call(t)}})),u=function(){w(t)},h=!1,n.off("keydown.enterKey keyup.enterKey").on("keydown.enterKey",(function(e){h||13!==e.keyCode||document.activeElement===e.target||(h=!0,u(e))})).on("keyup.enterKey",(function(e){h&&13===e.keyCode&&(h=!1,e._stopEvent=!0)}));for(var o=0,r=a.length;o<r;o++){var c=a[o],d=c.type?"btn-primary":"";c.css&&(d+=" "+c.css),c.element=s()('<button class="btn '+d+'" data-pos="'+o+'"></button>'),c.element.html(c.title),i.append(c.element),c.setTitle||(c.setTitle=y.bind(null,c)),c.disable||(c.disable=b.bind(null,c)),c.enable||(c.enable=v.bind(null,c))}n.append(i.children()),this.params.buttons=a}var u,h;return this.params.buttons},k.close=async function(e){if(!1!==await h.Z.onCloseParams(this.params.onClose,this,e)){var t=this;u.Z.unbind("popstate","dispatcher",this.onPopStateChanged),d.default.removeTrapFocus(this.trapFunction),this.dialog.on("hidden",(function(){t.dialog&&t.dialog.remove(),t.dialog=null,t.params=null,t.dialogHeader=null,t.buttonsPane=null,t.dialogContent=null})),this.dialog.modal("hide"),p.onClose()}},k.preventClosing=function(e){if(this.modal){var t=this.modal.options;e?(t.keyboard=!1,t.backdrop="static"):(t.keyboard=this.params.keyboard,t.backdrop=!0);var n=this.dialog.find(".close");e?n.hide():n.show()}};const P=_},60620:(e,t,n)=>{"use strict";n.d(t,{_V:()=>he,ng:()=>be,cp:()=>ge,G_:()=>X,Eo:()=>pe,ZP:()=>ve,wq:()=>ie,L2:()=>de,qz:()=>me});var i=n(52308),s=n.n(i),a=n(96486),o=n.n(a),r=n(177),c=n.n(r),l=n(49721),d=n(34391),u=n(93443),h=n(97137),p=n(19575),f=n(8246),m=n(37371),g=n(13260),b=n(99667),v=n(4132),y=n(77305);const w=e=>{const t=o().omit(e,["commentsList"]);return t.comments=e.commentsList.map((e=>{const t=o().clone(e);return t.createdAt=(0,v.oG)(t.createdAt),t.lastEditedAt=(0,v.oG)(t.lastEditedAt),t})),t},_=e=>{let{commentThread:t,usersList:n}=e;return{thread:w(t),users:n}},k=(0,y.e)(m.mn),P=(0,y.e)(m.mn,!0),C=e=>{const t=new b.Context;return t.setCode(e.code),t.setCodeContextBefore(e.codeContextBefore),t.setCodeContextAfter(e.codeContextAfter),t},x=(e,t)=>(e.comments=e.comments.map((e=>(e.author=t[e.authorUserId],e))),e),E=e=>{let{thread:t,users:n}=e;const i=o().keyBy(n,"id");return x(t,i)},S=e=>(e=>{const t=[],n={},i=new g.GetRequest;i.setProjectId(e);const s=P.get(i,(0,v.sd)());return new Promise(((e,i)=>{s.on("data",(e=>{if(e.hasUser()){const t=e.getUser().toObject();n[t.id]=t}else e.hasCommentThread()&&t.push(w(e.getCommentThread().toObject()))})),s.on("end",(()=>e({commentThreads:t,users:n}))),s.on("error",(e=>i(e))),s.on("status",(s=>{0===s.code?e({commentThreads:t,users:n}):i(new Error(s.details))}))}))})(e).then((e=>{let{commentThreads:t,users:n}=e;const i=o().keyBy(n,"id");return t.map((e=>x(e,i)))})),I=(e,t)=>((e,t)=>{const n=new g.EditRequest;return n.setCommentId(e),n.setComment(t),new Promise(((e,t)=>{k.edit(n,(0,v.sd)(),((n,i)=>{n?t(new Error(n.message)):e(_(i.toObject()))}))}))})(e,t).then(E),A=e=>(e=>{const t=new g.DeleteRequest;return t.setCommentId(e),new Promise(((e,n)=>{k.delete(t,(0,v.sd)(),(t=>{t?n(new Error(t.message)):e()}))}))})(e),T=e=>(e=>{const t=new g.AddRequest;return e.threadId&&t.setThreadId((0,v.x$)(e.threadId)),t.setProjectId(e.projectId),e.path&&t.setPath((0,v.x$)(e.path)),o().isUndefined(e.lineNumber)||t.setLineNumber((0,v.RU)(e.lineNumber)),e.lineCount&&t.setLineCount((0,v.RU)(e.lineCount)),e.comment&&t.setComment(e.comment),e.context&&t.setContext(C(e.context)),new Promise(((e,n)=>{k.add(t,(0,v.sd)(),((t,i)=>{t?n(new Error(t.message)):e(_(i.toObject()))}))}))})(e).then(E),j=(e,t)=>((e,t)=>{const n=new g.UpdateRequest,i=o().map(e,(e=>{const t=new g.UpdateRequest.ThreadUpdateInfo;return t.setThreadId(e.threadId),t.setLineNumber(e.lineNumber),e.context&&t.setContext(C(e.context)),t}));return n.setItemsList(i),n.setProjectId(t),new Promise(((e,t)=>{k.update(n,(0,v.sd)(),(n=>{n?t(new Error(n.message)):e()}))}))})(e,t),Z=e=>(e=>{const t=new g.MakeObsoleteRequest;return t.setThreadIdsList(e),new Promise(((e,n)=>{k.makeObsolete(t,(0,v.sd)(),(t=>{t?n(new Error(t.message)):e()}))}))})(e),O=e=>(e=>{const t=new g.MakeResolvedRequest;return t.setThreadIdsList(e),new Promise(((e,n)=>{k.makeResolved(t,(0,v.sd)(),(t=>{t?n(new Error(t.message)):e()}))}))})(e),N=(e,t)=>((e,t)=>{const n=new g.CollapseRequest;return n.setThreadId(e),n.setCollapsed(t),new Promise(((e,t)=>{k.collapse(n,(0,v.sd)(),(n=>{n?t(new Error(n.message)):e()}))}))})(e,t),D=(e,t)=>((e,t)=>{const n=new g.MoveToPathRequest;n.setProjectId(t);const i=o().map(e,(e=>{const t=new g.MoveToPathRequest.ThreadsUpdate;return t.setThreadIdsList(e.threadIds),t.setDestPath(e.destPath),t}));return n.setItemsList(i),new Promise(((e,t)=>{k.moveToPath(n,(0,v.sd)(),(n=>{n?t(new Error(n.message)):e()}))}))})(e,t),M='<div class="comment {{#if editMode}}editMode{{/if}}" {{#exists comment.id}}data-id="{{comment.id}}" id="{{comment.id}}"{{/exists}} data-new={{#if newMode}}true{{else}}false{{/if}}>\n  <div class="header">\n    <div class="icon">\n      <i class="ss-icon icon-main">comment</i>\n      <i class="ss-icon icon-shadow">comment</i>\n    </div>\n    <div class="title">\n      <strong>{{#if comment.authorUserId}}{{#exists comment.author}}{{comment.author.actualName}}{{else}}Deleted User{{/exists}}{{else}}Instructor{{/if}}</strong>\n      {{#exists comment.createdAt}} on {{#exists comment.lastEditedAt}}{{formatDateFullUS comment.lastEditedAt}}{{else}}{{formatDateFullUS comment.createdAt}}{{/exists}}{{/exists}}\n    </div>\n    {{#unless editMode}}\n    {{#equals userId comment.authorUserId}}\n    <div class="btn-group threedots-menu">\n      <btn class="btn dropdown-toggle" data-toggle="dropdown" />\n      <ul class="dropdown-menu" role="menu">\n        <li class="action-item edit" role="menuitem">Edit comment</li>\n        <li class="action-item remove" role="menuitem">Delete comment</li>\n      </ul>\n    </div>\n    {{/equals}}\n    {{#unless disableResolving}}\n    {{#if showResolveBtn}}\n    <button class="resolve-btn" title="Mark comment as resolved">\n      <i class="ss-icon">check</i>\n    </button>\n    {{/if}}\n    {{/unless}}\n    {{/unless}}\n  </div>\n  <div class="comment-area">\n    {{#if editMode}}\n    <textarea class="message-ta" rows="2" placeholder="Your comment" aria-label="Comment"></textarea>\n    {{else}}\n    <div class="message"></div>\n    {{/if}}\n  </div>\n  {{#if editMode}}\n  <div class="footer">\n    <button type="button" class="btn btn-primary btn-small save-btn">{{#exists comment.createdAt}}Save{{else}}Create{{/exists}}</button>\n    <button type="button" class="btn btn-small cancel-btn">Cancel</button>\n  </div>\n  {{/if}}\n</div>\n',R='<div class="comments-list" data-thread-id="{{thread.id}}" data-temporary="{{thread.temporary}}">\n  {{#each thread.comments}}\n    {{> comment comment=this userId=../userId showResolveBtn=@first disableResolving=../disableResolving}}\n  {{/each}}\n  {{#if canAdd}}\n  <div class="footer">\n    <button type="button" class="btn btn-primary btn-small add-comment-btn">Add comment</button>\n  </div>\n  {{/if}}\n</div>\n',L=c().compile('<div class="all-comments-list">\n  {{#each threads}}\n  {{> thread thread=this}}\n  {{/each}}\n</div>'),F=c().compile('<div class="no-comments">\n  <h1>There are no code comments yet.</h1>\n</div>\n');f.Z.registerPartial("thread",'<div class="thread" data-thread-id="{{thread.id}}">\n  <div class="header">\n    {{thread.path}}\n    {{#or thread.isObsolete thread.isResolved}}\n    <span class=\'comment-tag\'>{{#if thread.isObsolete}}Obsolete{{else}}Resolved{{/if}}</span>\n    {{else}}\n    <button class="btn go-to-code" title="Go to code">\n      <i class="ss-icon">navigate</i>\n    </button>\n    {{/or}}\n  </div>\n  <div class="lines">\n    {{#each thread.lines}}\n    {{> line data=this thread=../thread}}\n    {{/each}}\n  </div>\n</div>\n'),f.Z.registerPartial("comment",M),f.Z.registerPartial("line",'<div class="line">\n  <div class="line-gutter">\n    <div class="line-number">{{data.lineNumber}}</div>\n    {{#if data.showWidget}}\n    <div class="code-line-icon">\n      <i class="ss-icon">comment</i>\n    </div>\n    {{/if}}\n  </div>\n  <div class="code-line-doc-area">\n    <div class="code-line {{#if data.isHighlight}}is-highlighted{{/if}}">{{data.code}}</div>\n    {{#if data.showWidget}}\n    {{> commentsList thread=thread disableResolving=true}}\n    {{/if}}\n  </div>\n</div>'),f.Z.registerPartial("commentsList",R);const B="codeContextBefore",U="code",q="codeContextAfter",H={view:"code"},G={md:H,markdown:H};const W=class{constructor(e){this.opened=!0,this.container=e,this.container.showFProgress("Loading comments..."),this.scrollPos=0,this.debounceOnScroll=o().debounce(this.onScroll.bind(this),200),this._commentsUpdateId=u.Z.subscribe("project:commentsUpdated",((e,t)=>{let{updateId:n}=t;return this.loadComments(n)})),this.loadComments()}loadComments(){X(void 0,arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0).then((e=>{let{commentThreads:t}=e;this.opened&&(this.threads=t,this.content=this.renderThreads(t),this.container.empty(),this.container.append(this.content),this.bindEvents())})).catch((e=>h.Z.error(e.message))).finally((()=>this.container.completeFProgress()))}renderThreads(e){if(o().isEmpty(e))return s()(F());{const t=o().sortBy(e,["path","lineNumber"]),n=this.prepareThreads(t),i=s()(L({threads:n}));return o().each(t,(e=>{o().each(e.comments,(e=>{p.default.toHTML(e.comment).then((t=>i.find("#".concat(e.id," .message")).html(t)))}))})),i}}prepareThreads(e){return o().map(e,(e=>({lines:[].concat(this.blockToLines(e,B),this.blockToLines(e,U),this.blockToLines(e,q)),...e})))}blockToLines(e,t){const n=t===U,i=e.context[t].split("\n");let s=1;switch(t){case B:s=e.lineNumber-i.length;break;case U:s=e.lineNumber;break;case q:s=e.lineNumber+e.lineCount}return i.map(((e,t)=>{const a=t===i.length-1;return{lineNumber:s+t+1,code:e,isHighlight:n,showWidget:n&&a}}))}bindEvents(){u.Z.on(this.content,"click.comments",".go-to-code",this.onGoToCommentCode.bind(this)),u.Z.on(this.content,"scroll.comments",this.debounceOnScroll)}activate(){o().defer((()=>this.content&&this.content.scrollTop(this.scrollPos)))}onGoToCommentCode(e){e.preventDefault();const t=s()(e.currentTarget).closest(".thread").data("threadId"),n=o().find(this.threads,(e=>e.id===t));n&&l.default.ide.helpers.openFileAndGoToLine(n.path,n.lineNumber+n.lineCount+1,1,G[p.default.path.getFileExtension(n.path)])}onScroll(e){e.preventDefault(),this.container&&(this.scrollPos=this.content.scrollTop())}close(){this.opened=!1,this.container=null,this.debounceOnScroll=null,this.threads=null,this.scrollPos=0,u.Z.off(this.content,"click.comments",".go-to-code"),u.Z.off(this.content,"scroll.comments"),u.Z.unsubscribe(this._commentsUpdateId)}},z=u.Z.create(n(91775)),V=c().compile(R);f.Z.registerPartial("comment",M);let K=null,J=null,Y=null,Q={};u.Z.subscribe("project:commentsUpdated",((e,t)=>{let{updateId:n}=t;return X(void 0,n)}));const X=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return t&&!Q[t]&&(J=null,K=null,Y=null,Q[t]=!0),J?e?(J[e]=J[e]||[],Promise.resolve({commentThreadsMap:J[e],commentThreads:Y})):Promise.resolve({commentThreadsMap:J,commentThreads:Y}):(K=K||S(l.default.currentProject.assignmentProjectId),K.then((t=>(Y=t,ee(),e?(J[e]=J[e]||[],{commentThreadsMap:J[e],commentThreads:Y}):{commentThreadsMap:J,commentThreads:Y}))).catch((e=>h.Z.error(e.message))))},$=e=>{Y=o().filter(Y,(t=>t.id!==e.id)),ee()},ee=()=>{J=o()(Y).filter((e=>!e.isObsolete&&!e.isResolved)).groupBy((e=>e.path)).omitBy(((e,t)=>!l.default.currentProject.exists(t))).value()},te=(e,t)=>{t.preventDefault();const n=s()(t.currentTarget),i=n.closest(".comment").data("id"),a=o().find(e.comments,(e=>e.id===i));if(n.hasClass("remove")){ae((()=>{A(a.id).then((()=>{1===e.comments.length?$(e):e.comments=o().filter(e.comments,(e=>e.id!==i)),z.commentsUpdated()})).catch((e=>h.Z.error(e.message)))}))}else n.hasClass("edit")&&(a.editMode=!0,z.commentThreadUpdated(e))},ne=(e,t)=>{t.preventDefault();const n=s()(t.currentTarget).closest(".comment"),i=n.data("id"),a=n.find(".message-ta").val(),o=ie.bind(null,e,i);a?se(o):ie(e,i)},ie=(e,t)=>{const n=o().findIndex(e.comments,(e=>e.id===t)),i=e.comments[n];i.editMode=!1,e.temporary&&!i.createdAt?($(e),z.threadRemoved(e)):(i.createdAt||e.comments.splice(n,1),z.commentThreadUpdated(e))},se=e=>{d.Z.showConfirm({title:"Discard changes confirmation",description:"Are you sure you want to discard you unsaved changes?",onClose:t=>(t&&e(),!0)})},ae=e=>{d.Z.showConfirm({title:"Delete comment confirmation",description:"Are you sure you want to delete comment?",onClose:t=>(t&&e(),!0)})},oe=(e,t)=>{t.preventDefault();const n=s()(t.currentTarget),i=n.closest(".comment"),a=n.closest(".comment").data("id"),r=o().find(e.comments,(e=>e.id===a)),c=i.find(".message-ta"),l=c.val();l?(i.removeClass("editMode"),i.closest(".comments-list").data("temporary",!1),r.comment=l,fe(e,r).then((t=>{Y=o().filter(Y,(t=>t.id!==e.id)),Y.push(t),ee(),z.commentsUpdated()})).catch((e=>h.Z.error(e.message)))):p.default.addErrorToInput(c,"Comment can not be empty")},re=(e,t)=>{t.preventDefault(),ue(e),z.commentThreadUpdated(e)},ce=(e,t)=>{t.preventDefault(),O([e.id]).then((()=>{e.isResolved=!0,ee(),z.commentsUpdated()})).catch((e=>h.Z.error(e.message)))},le=(e,t)=>{u.Z.on(e,"click",".action-item",te.bind(null,t)),u.Z.on(e,"click",".cancel-btn",ne.bind(null,t)),u.Z.on(e,"click",".save-btn",oe.bind(null,t)),u.Z.on(e,"click",".add-comment-btn",re.bind(null,t)),u.Z.on(e,"click",".resolve-btn",ce.bind(null,t))},de=()=>({id:p.default.GUID(8),comment:"",authorUserId:l.default.currentUser.getAccountUid(),author:{actualName:l.default.currentUser.get("details").get("actual_name")},editMode:!0,newMode:!0}),ue=e=>{e.comments.push(de())},he=async e=>{const t=l.default.currentUser.getAccountUid(),n=!e.comments.some((e=>!e.createdAt)),i=s()(V({thread:e,canAdd:n,userId:t}));le(i,e);let a=[];return e.id&&(a=o()(e.comments).filter((e=>!!e.id)).map((e=>(i.find("#".concat(e.id," .message-ta")).val(e.comment),p.default.toHTML(e.comment).then((t=>i.find("#".concat(e.id," .message")).html(t))))))),Promise.all(a).then((()=>(o().defer((()=>i.find(".comment.editMode .message-ta").focus())),i)))},pe=(e,t,n,i,s,a)=>{const o=de(),r={id:p.default.GUID(8),projectId:l.default.currentProject.assignmentProjectId,path:e,lineNumber:t,lineCount:n,comments:[o],context:{code:i,codeContextBefore:s,codeContextAfter:a},temporary:!0};return Y.push(r),ee(),r},fe=(e,t)=>{if(t.createdAt)return I(t.id,t.comment).catch((e=>h.Z.error(e.message)));{const n=o().clone(e);delete n.comments,delete n.isObsolete,delete n.isResolved;const{id:i,temporary:s,...a}=n;if(s){if(J&&J[a.path]){const e=o()(J[a.path]).filter((e=>!e.temporary)).find((e=>e.lineNumber===a.lineNumber));e&&(a.threadId=e.id)}}else a.threadId=i;return a.threadId&&(delete a.context,delete a.path,delete a.lineNumber,delete a.lineCount),a.comment=t.comment,T(a).catch((e=>h.Z.error(e.message)))}},me=(e,t,n)=>{if(!t.length&&!n.length)return;let i=Promise.resolve();t.length&&(i=Z(t));let s=Promise.resolve();n.length&&(s=j(n,l.default.currentProject.assignmentProjectId)),Promise.all([i,s]).then((()=>{const e=o().map(n,(e=>e.threadId)).concat(t),i=o().keyBy(n,"threadId"),s=o().filter(Y,(t=>o().includes(e,t.id)));o().each(s,(e=>{if(o().includes(t,e.id))return void(e.isObsolete=!0);const n=i[e.id];e.lineNumber=n.lineNumber,n.context&&(e.context=n.context)})),ee(),z.commentsUpdated()})).catch((e=>h.Z.error(e.message)))},ge=e=>{e&&X().then((()=>{Y=Y.filter((e=>!e.temporary)),Y=Y.map((e=>(e.comments=o()(e.comments).filter((e=>e.createdAt)).map((e=>(delete e.editMode,e))).value(),e))),ee()}))},be=(e,t)=>{e.collapsed=t,N(e.id,t).catch((e=>h.Z.error(e.message)))};u.Z.subscribe("project:close",(()=>{J=null,K=null,Y=null,Q={}}));u.Z.subscribe("item:moved:#oldName:#newName",(e=>o().delay((()=>(e=>{const{oldName:t,newName:n}=e;X().then((e=>{let{commentThreadsMap:i}=e;const s=i,a=o().keys(s),r=o().filter(a,(e=>e===t||0===e.indexOf("".concat(t,"/"))));if(r.length){const e=o().map(r,(e=>({threadIds:o()(s[e]).filter((e=>!e.temporary)).map((e=>e.id)).value(),destPath:e===t?n:e.replace(t,n)})));o().isEmpty(e)||D(e,l.default.currentProject.assignmentProjectId).then((()=>{const t=o()(e).map((e=>e.threadIds)).flattenDeep().value(),n=o().reduce(e,((e,t)=>{let{destPath:n,threadIds:i}=t;return{...e,...o().reduce(i,((e,t)=>(e[t]=n,e)),{})}}),{});o()(Y).filter((e=>o().includes(t,e.id))).each((e=>{e.path=n[e.id]})),ee(),z.commentsUpdated()})).catch((e=>h.Z.error(e.message)))}}))})(e)),100))),u.Z.subscribe("item:deleted:#path",(e=>{const{path:t}=e;X().then((e=>{let{commentThreadsMap:n}=e;const i=n,s=o().keys(i),a=o().filter(s,(e=>e===t||0===e.indexOf("".concat(t,"/"))));if(a.length){const e=o()(a).map((e=>o().map(i[e],(e=>e.id)))).flatten().value();Z(e).then((()=>{o().each(Y,(t=>{o().includes(e,t.id)&&(t.isObsolete=!0)})),ee()})).catch((e=>h.Z.error(e.message)))}}))}));const ve=W},82244:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>u});var i=n(96486),s=n.n(i),a=n(49721),o=n(93443),r="codio-debugger",c=o.Z.create(n(86868)),l=[];async function d(){var e=a.default.currentProject;if(!e)throw new Error("No Project");return s().cloneDeep(e.getPluginData(r)).points||[]}const u={breakpoints:function(){return d()},listen:function(){if(l.length>0)return;var e=[];const t=()=>{d().then((function(t){var n=e;e=[];var i=!1;s().each(n,(function(e){s().remove(t,(function(t){return t.path===e.path&&t.line===e.data.line})),e.data.state&&(t.push({active:e.active,line:e.data.newLine?e.data.newLine:e.data.line,path:e.path}),!i&&(i=!!e.data.newLine))})),function(e){var t=a.default.currentProject;if(!t)throw new Error("No Project");return t.setPluginData(r,"points",e)}(t).then((function(){c.breakpointUpdate(),i&&c.breakpointChangeWarning()})).catch((function(e){}))}))};var n=s().debounce(t,250,{maxWait:1e4}),i=o.Z.subscribe("file:editor:breakpoint:#path",(function(i,s){const a=s.items.map((e=>({path:i.path,data:e,active:!0})));e=e.concat(a),s.force?t():n()})),u=o.Z.subscribe("command:debug:breakpoint-state:#path",(function(t,i){e.push({path:t.path,data:i,active:i.active}),n()}));const h=o.Z.subscribe("command:debug:start",t),p=o.Z.subscribe("command:debug:restart",t);l.push(i,u,h,p)}}},42052:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var i=n(96486),s=n.n(i),a=n(93443),o="/",r="\\",c="*",l='"',d="\n",u="{",h="}",p=new RegExp("package\\s+([a-zA-Z_]{1}[a-zA-Z0-9_]*(\\.[a-zA-Z_]{1}[a-zA-Z0-9_]*)*)\\s*;","m"),f=new RegExp("\\s*(public|private)?(static)?\\s*class\\s+(\\w+)\\s*((extends\\s+\\w+)|(implements\\s+\\w+( ,\\w+)*))?\\s*\\{","m"),m=new RegExp("\\s*new\\s+(\\w+)\\s*\\(\\w*\\)\\s*\\{","m"),g={},b={};function v(e){for(var t=0,n=0,i=e.length;n<i;n++){var s=e[n];if(s===h){if(0===t)return n;t--}else s===u&&t++}return e.length}function y(e){delete b[e]}function w(e){if(!g[e]){var t=[];s().each(["item:moved:","item:moved:#from:","item:deleted:","file:change:"],(function(n){t.push(a.Z.subscribe(n+e,y.bind(null,e)))})),g[e]=t}}const _={parseClassInformation:async function(e,t,n){w(t);var i=t;if(t){var a=t.split("/");i=a[a.length-1]}var u,h={packageName:"",className:"",fileName:i,path:t},g=function(e){return b[e]}(t);if(g)u=g.advancedClassInformation,g.packageName&&(h.packageName=g.packageName);else{var y=function(e){for(var t="",n=!1,i=!1,s=!1,a=0,u=e.length;a<u;a++){var h=e[a];h!==l||n||e[a-1]!==r&&((i=!i)||(h=" ")),i||h!==o||(e[a+1]===o&&(n=!0,s=!1),e[a+1]===c&&(n=!0,s=!0)),n&&(s?h===c&&e[a+1]===o&&(n=!1,h="  ",a++):h===d&&(n=!1)),(i||n)&&h!==d&&(h=" "),t+=h}return t}(e),_=y.match(p);_&&(h.packageName=_[1]),u=function(e){for(var t=[],n=e,i=n.match(f),a=0,o=0,r=0;i;)o=i.index+i[0].length,r=v(n=n.substring(o,n.length)),t.push({name:i[3],start:o+a,end:o+r+a}),a+=o,i=n.match(f);var c=e,l=c.match(m);for(a=0;l;)o=l.index+l[0].length,r=v(c=c.substring(o,c.length)),t.push({start:o+a,end:o+r+a}),a+=o,l=c.match(m);t=s().sortBy(t,"start");var d={},u=[];return s().each(t,(function(e,t){if(0===t)d[e.name]=e,d[e.name].anon=1,u.push(d[e.name]);else{var n,i=null;s().each(u,(function(t){t.start<e.start&&t.end>e.end&&(i=t)})),i&&(e.name?n=i.name+"$"+e.name:(n=i.name+"$"+i.anon,i.anon++),d[n]=e,d[n].anon=1,d[n].name=n,u.push(d[n]))}})),u}(y),function(e,t,n){b[e]={packageName:t,advancedClassInformation:n}}(t,h.packageName,u)}var k=u[0];if(void 0!==n){var P=function(e,t){for(var n=e.split("\n"),i="",s=0;s<t-1;s++)n[s]&&(i+=n[s]+"\n");var a=n[t];return a&&(i+=a.substring(0,a.length/2)),i.length}(e,n);s().each(u,(function(e){e.start<=P&&e.end>=P&&(k=e)}))}return k&&(h.className=k.name),h},parseLocalVariableInformation:function(e,t){var n=e.indexOf(" = "),i=!1;e[n+=3]===u&&(n++,i=!0);var a=e.substring(n,e.length);if(i){var o=a.lastIndexOf(h);-1!==o&&(a=a.substring(0,o))}var r=-1!==a.indexOf("Internal exception during operation");if(i&&!r){var c=/^\s*([a-zA-Z_$0-9]+): (.*)$/,l=s().compact(a.split("\n"));a=s().map(l,(function(e){var t=e.match(c);if(t)return{name:t[1],value:t[2]};var n=e.split(": ");return void 0!==n[1]?{name:n[0],value:n[1]}:{name:"",value:n[0]}}))}return{name:t,value:a}}}},4728:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>u,aO:()=>d});var i=n(96486),s=n.n(i),a=n(49721),o=n(93443),r="codio-debugger",c=o.Z.create(n(86868)),l=null;const d={CHANGE:"change",REMOVE:"remove",ADD:"add"},u={ACTIONS:d,watches:function(e){return async function(e){var t=a.default.currentProject;if(!t)throw new Error("No Project");var n=s().cloneDeep(t.getPluginData(r)).watches||[];return s().filter(n,(function(t){return t.uuid===e}))}(e)},listen:function(){l||(l=o.Z.subscribe("command:debug:edit-watch:#uuid",(function(e,t){var n=a.default.currentProject;if(!n)throw new Error("No Project");if(t||t.state){var i=n.getPluginData(r).watches||[],o=t.state||d.ADD,l=t.watch;if(!s().isEmpty(l)){if(o===d.ADD)i.push({active:!0,watch:l,uuid:e.uuid});else if(o===d.REMOVE)s().remove(i,(function(t){return t.uuid===e.uuid&&t.watch===l}));else{if(o!==d.CHANGE)return;var u=t.old,h=s().findIndex(i,(function(t){return t.uuid===e.uuid&&t.watch===u}));if(-1===h)return;i[h].watch=l}return async function(e){var t=a.default.currentProject;if(!t)throw new Error("No Project");return t.setPluginData(r,"watches",e)}(i).then((function(){c.updateWatch({uuid:e.uuid})}))}}})))}}},45113:(e,t,n)=>{"use strict";n.d(t,{LK:()=>u,bz:()=>d,c1:()=>h,co:()=>r,jQ:()=>m,mH:()=>p,rx:()=>l,vc:()=>f});var i=n(96486),s=n.n(i),a=n(19575),o=n(49721);const r={READ_ONLY:"ON_COMPLETED_READ_ONLY",READ_ONLY_AFTER_RELEASE_GRADES:"ON_COMPLETED_AND_RELEASE_GRADES_READ_ONLY",NO_ACCESS:"ON_COMPLETED_NO_ACCESS",NONE:"ON_COMPLETED_NONE"},c={restrictionOnDisabled:"ON_DISABLED_NO_ACCESS",restrictionOnCompleted:r.READ_ONLY};function l(e){return s().defaults(d(e),c)}function d(e){return e.projectBased?e.projectBased.settings:e.bookBased.settings}function u(e,t,n){const i=d(t);return e.archived||i.isDisabled&&!function(e,t){const n=function(e,t){const n=s().get(e,"penaltiesPerStudent",{}),i=s().get(e,"penaltiesPerGroup",{}),a=t.groupId?i:n,o=t.groupId||t.userId;return s().get(a,o,{}).extend||0}(e,t);if(n&&e.end){return new Date(e.end.time).getTime()+6e4*n>Date.now()}return!1}(i,n)}function h(e){return function(e){return e.projectBased?e.projectBased.id:e.bookBased.id}(e)||""}const p=(e,t)=>{var n;return t.projectBased?null!==(n=t.projectBased.latestVersionId)&&void 0!==n&&n.value?e.versions[t.projectBased.latestVersionId.value]:null:t.bookBased.bookVersionId?e.versions[t.bookBased.bookVersionId]:null},f=e=>{var t,n;if(!e)return!1;const i=d(e);return(null===(t=i.due)||void 0===t?void 0:t.at)&&(null===(n=i.penaltyV2)||void 0===n?void 0:n.enabled)},m=e=>{const t=null==e?void 0:e.started,n=null==t?void 0:t.completed;if(null!=n&&n.completed||null!=t&&t.penaltyDisabled)return;const i=d(e.assignment),{due:s,penaltyV2:r}=i,c=60===(null==r?void 0:r.deductionIntervalMinutes)?"hour":"day",l=6e4*o.default.currentProject.penaltyExtendMin,u=new Date(Date.parse(s.at)+l);return"\n      The due date ".concat(a.default.formatDateFullUS(u)," has been reached.\n      Submissions beyond this due date carry a penalty of ").concat(null==r?void 0:r.deductionPercent,"% per ").concat(c,".\n      If you proceed, a ").concat(null==r?void 0:r.deductionPercent,"% penalty deduction will be\n      applied to your overall grade for each ").concat(c,".\n  ")}},79435:(e,t,n)=>{"use strict";n.d(t,{C7:()=>i,ZI:()=>o,ZP:()=>a,x$:()=>s});const i={0:"processing",1:"successful",2:"error"},s={SIMPLE:"SIMPLE",WITH_STACK:"WITH_STACK"},a={PUBLISH_TYPE:s,PUBLISH_STATUS:i,PUBLISH_STATUS_PROCESSING:0,PUBLISH_STATUS_SUCCESSFUL:1,PUBLISH_STATUS_ERROR:2},o={PENDING:"PENDING",APPROVED:"APPROVED",REJECTED:"REJECTED",CANCELED:"CANCELED"}},45540:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Ft});var i=n(96486),s=n.n(i),a=n(52308),o=n.n(a),r=n(177),c=n.n(r),l=n(49721),d=n(46544),u=n(37371),h=n(23059),p=n(4132),f=n(77305);const m=(0,f.e)(u.Sy,!0),g=e=>{const t=new h.FindRequest;if(!s().isEmpty(e)){const n=new h.FindRequest.Query;n.setIdsList(e),t.setQuery(n)}const n=m.find(t,(0,p.sd)());return new Promise(((e,t)=>{const i=[];n.on("data",(e=>{if(e.hasEduorg()){const t=e.getEduorg();t&&i.push(t.toObject())}})),n.on("end",(()=>{e(i)})),n.on("error",(e=>t(e))),n.on("status",(n=>{0===n.code?e(i):t(new Error(n.details))}))}))};var b=n(93443),v=n(9380),y=n(97137),w=n(34391),_=n(19575),k=n(76638),P=n(79435);const C=c().compile('<div class="regrade-request">\n  <h3>Send a message to your instructor</h3>\n  <div class="regrade-request-message-container">\n    <label for="regrade-request-message" class="regrade-request-message-label">Reason why you are requesting a regrade:</label>\n    <textarea id="regrade-request-message" class="regrade-request-message-text" rows="6" placeholder="Your message..."></textarea>\n  </div>\n</div>\n');let x=null,E=null;b.Z.subscribe("requestRegrade:showDialog",(()=>{T()})),b.Z.subscribe("requestRegrade:showCancelDialog",(()=>{Z()}));const S=b.Z.create(n(10)),I=()=>{x&&(x.close(),x=null,S.updateEducationButtonsGroupState({requestRegrade:{disable:!1}}))},A=async()=>T({cancelTitle:"Ignore"}),T=async e=>{e=e||{};const t=_.default.promise.deferred();if(x)return;S.updateEducationButtonsGroupState({requestRegrade:{disable:!0}});const n=[{title:"Submit",type:1,onClick:async()=>{await(async()=>{const e=l.default.currentProject.eduStartedAssignmentInfo.started.assignmentId,t=x.dialogContent.find(".regrade-request-message-text").val();try{await d.hT(e,t),S.updateEducationButtonsGroupState({requestRegrade:{visible:!1,disabled:!1},cancelRegradeRequest:{visible:!0,disabled:!1}}),y.Z.info("Regrade request has been submitted")}catch(e){y.Z.error(e.message)}I()})(),t.resolve()}},{title:e.cancelTitle||"Cancel",type:0,onClick:()=>{I()}}],i=o()(C());return x=new w.Z({title:"Regrade request",mdiIcon:"comment-eye-outline",className:"regrade-request-dialog",content:i,buttons:n,width:650,focusOn:i.find(".regrade-request-message-text").focus(),onHide:function(){x=null,S.updateEducationButtonsGroupState({requestRegrade:{disable:!1}}),t.resolve()},onClose:function(){x=null,S.updateEducationButtonsGroupState({requestRegrade:{disable:!1}}),t.resolve()}}),t.promise},j=()=>{E&&(E.close(),E=null,S.updateEducationButtonsGroupState({cancelRegradeRequest:{disable:!1}}))},Z=()=>{if(E)return;S.updateEducationButtonsGroupState({cancelRegradeRequest:{disable:!0}});const e=[{title:"Yes",type:1,onClick:()=>{(async()=>{const e=l.default.currentProject.eduStartedAssignmentInfo.started.assignmentId;try{await d.bl(e),l.default.currentProject.regradeRequests=l.default.currentProject.regradeRequests.map((e=>(e.status===P.ZI.PENDING&&(e.status=P.ZI.CANCELED),e))),S.updateEducationButtonsGroupState({requestRegrade:{visible:!0,disabled:!1},cancelRegradeRequest:{visible:!1,disabled:!1}}),y.Z.info("Regrade request has been canceled")}catch(e){y.Z.error(e.message)}j()})()}},{title:"No",type:0,onClick:()=>{j()}}],t=o()("<h4>Are you sure you want to cancel the regrade request?</h4>");E=new w.Z({title:"Warning",icon:"alert",className:"regrade-cancel-dialog",content:t,buttons:e,width:500,onHide:function(){E=null,S.updateEducationButtonsGroupState({cancelRegradeRequest:{disable:!1}})},onClose:function(){E=null,S.updateEducationButtonsGroupState({cancelRegradeRequest:{disable:!1}})}})};var O=n(72129),N=n(95611),D=n(8246),M=n(61809),R=n(95638),L=n(85886);const F="<div class=\"versions-publish\">\n    {{#exists itemsList}}\n        {{#if itemsList.length}}\n            <section class='versions-container'>\n                <ul class='versions-list'>\n                    {{#each itemsList}}\n                    <li class='versions-item'>\n                        <span class='versions-item-circle'></span>\n                        <div class='versions-item-block'>\n                            <div class='versions-item-status versions-item-status-{{status}}'>{{statusText}}</div>\n                            <div class='versions-item-actions'>\n                                <h3 class='versions-item-label'>{{versionLabel}}</h3>\n                            </div>\n                            <div class='versions-item-message complete'>\n                                {{publisherText}}\n                                {{#if stackVersion}}\n                                <div class='versions-item-stackVersion'>\n                                    Stack Version: {{stackVersion}}\n                                </div>\n                                {{/if}}\n                                {{#if changelog}}\n                                <div class='versions-item-changelog'>\n                                    Changelog: {{changelog}}\n                                </div>\n                                {{/if}}\n                            </div>\n                        </div>\n                    </li>\n                    {{/each}}\n                </ul>\n            </section>\n        {{else}}\n            <p>No versions found.</p>\n        {{/if}}\n    {{else}}\n        <div class=\"publish-list-loader\">\n            <i class=\"icon icon-spinner\"></i>\n        </div>\n    {{/exists}}\n</div>\n";D.Z.registerPartial("versionsLog",F),D.Z.registerPartial("latestVersions",'<div class="latest-versions-container">\n  <div class="latest-versions-title">\n    <h3>\n      <span class="iconify-inline" data-icon="@codio:mdi:update"></span>&nbsp;\n      Latest versions\n    </h3>\n  </div>\n  <div class="latest-versions">\n    {{> versionsLog}}\n  </div>\n</div>\n'),D.Z.registerPartial("assignmentInfo",'<div class="publish-assignment-info">\n  <div class="publish-assignment-info-course">Course: <strong>{{assignmentInfo.courseName}}</strong></div>\n  <div class="publish-assignment-info-module">Module: <strong>{{assignmentInfo.moduleName}}</strong></div>\n  <div class="publish-assignment-info-course">Assignment: <strong>{{assignmentInfo.assignmentName}}</strong></div>\n</div>\n');const B=c().compile('<div class="assignment-publish">\n  {{> assignmentInfo}}\n  {{#if withSeveralRandom}}\n  <h3>Warning!</h3>\n  <div>\n    The assessments on pages <b>{{withSeveralRandom}}</b> require a complex layout and may not function as intended on this page.\n    We would recommend you fully test the assignment to confirm all is as you require or alternatively add the assessments to new pages that will support the required layout.\n  </div>\n  <br/>\n  {{/if}}\n  <div class="assignment-changelog-container">\n    <label for="assignment-changelog" class="assignment-publish-changelog-label">Changelog</label>\n    <textarea id="assignment-changelog" rows="6" placeholder="Assignment versions changelog..."></textarea>\n  </div>\n  {{#if isGigaBoxChanged}}\n  <div class="assignment-publish-change-gigabox-label">\n    <label class="checkbox">\n      <input type="checkbox" id="assignment-publish-change-gigabox" checked />\n      Propagate gigabox settings to the assignment settings\n    </label>\n  </div>\n  {{/if}}\n  {{> latestVersions}}\n</div>\n'),U=c().compile('<div class="assignment-publish">\n  {{> assignmentInfo}}\n  {{#if withSeveralRandom}}\n  <h3>Warning!</h3>\n  <div>\n    The assessments on pages <b>{{withSeveralRandom}}</b> require a complex layout and may not function as intended on this page.\n    We would recommend you fully test the assignment to confirm all is as you require or alternatively add the assessments to new pages that will support the required layout.\n  </div>\n  {{/if}}\n  <h3>Students have started this assignment</h3>\n  <div>\n    Changes to assessment items Grading and Execution tab might overwrite previous student submissions.<br/>\n    Existing files outside .guides will not be updated but you can add new files.\n  </div>\n  <div class="safe-changes closed">\n    <h4 class="safe-changes-toggle">\n      <i class="ss-icon opened">navigatedown</i>\n      <i class="ss-icon closed">navigateright</i>\n      What are safe changes?\n    </h4>\n    <ul class="safe-changes-list">\n      <li>files inside .guides (Guides text, images, auto-grading scripts, etc)</li>\n      <li>page layout</li>\n      <li>assessments in General, Metadata or Files tabs</li>\n      <li>adding new files outside of .guides</li>\n      <li>adding new assessments</li>\n    </ul>\n  </div>\n  <div class="assignment-changelog-container">\n    <label for="assignment-changelog" class="assignment-publish-changelog-label">Changelog</label>\n    <textarea id="assignment-changelog" rows="4" placeholder="Assignment versions changelog..."></textarea>\n  </div>\n  <div>\n    If you made changes to the stack (like installing software or libraries) and&nbsp;\n    <a href=\'https://docs.codio.com/common/develop/stacks/update-stack.html#update-stack-from-the-ide\' target=\'_blank\'>\n      published a new Stack version\n    </a>\n    , assignments set to&nbsp;\n    <a href=\'https://docs.codio.com/develop/develop/stacks/stack-planning.html#use-latest-version\' target=\'_blank\'>\n      "Use Latest Version"\n    </a>\n    &nbsp;have received the update.\n  </div>\n  <br/>\n  <div>\n    If you created a new stack, switched stacks or do not have the assignment setup\n    to use the latest version, use the Publish with stack update button to update all student stacks.\n  </div>\n  {{#if isGigaBoxChanged}}\n  <div class="assignment-publish-change-gigabox-label">\n    <label class="checkbox">\n      <input type="checkbox" id="assignment-publish-change-gigabox" checked />\n      Propagate gigabox settings to the assignment settings\n    </label>\n  </div>\n  {{/if}}\n  {{> latestVersions}}\n</div>\n'),q=c().compile(F);let H=null,G=null,W={},z={};const V=b.Z.create(n(10));function K(e,t){const n=s().compact(s().uniq(e.map((e=>s().replace(e.stackVersionId,/:latest$/,""))))),i=s().compact(s().uniq(e.map((e=>e.userId))));t&&!n.includes(t)&&n.push(t);const a=s().filter(n,(e=>!z[e])),o=s().filter(i,(e=>!W[e]));return s().isEmpty(a)&&s().isEmpty(o)?Promise.resolve():Promise.all([s().isEmpty(o)?[]:O.default.AccountManager.all(null,o),s().isEmpty(a)?[]:O.default.StacksManager.getStacksByVersionIds(a)]).then((e=>{let[t,n]=e;n.forEach((e=>{e.versions.forEach((t=>{z[t.id]=e}))})),t.forEach((e=>W[e.id]=e))}))}function J(e){e.preventDefault();o()(this).closest(".safe-changes").toggleClass("closed")}function Y(){var e,t;const{authorAssignment:n}=l.default.currentProject;if(!n)return{};const{assignment:i,course:s,unit:a}=n;return{courseName:(null==s||null===(e=s.details)||void 0===e?void 0:e.name)||"",moduleName:(null==a?void 0:a.name)||"",assignmentName:(null==i||null===(t=i.settings)||void 0===t?void 0:t.name)||""}}function Q(e,t,n){const i=[{title:"Publish",type:1,onClick:()=>H.close(P.x$.SIMPLE)},{title:"Close",type:0,onClick:()=>H.close()}];e&&i.splice(1,0,{title:"Publish with stack update",type:0,css:"btn-danger",onClick:function(){H.close(P.x$.WITH_STACK)}});const a={isGigaBoxChanged:t,withSeveralRandom:0===n.length?null:n.join(", "),assignmentInfo:Y()},r=o()(B(a)),c=o()(U(a)),u=e?c:r;u.on("click",".safe-changes-toggle",J);const h=l.default.currentProject.authorAssignment.assignment.id;d.M1(h).then((async e=>{if(!e.length)return void u.find(".latest-versions-container").remove();e.splice(3),await K(e);const t=q({itemsList:X(e)});u.find(".latest-versions").html(t)})).catch((()=>{u.find(".latest-versions").html("<p>Versions load failed.</p>")})),H=new w.Z({title:"Publish Assignment",className:"publish-assignment-dialog publish",content:u,buttons:i,width:e?650:300,onHide:function(){V.publishDialogClosed(),u.off("click"),H=null},onClose:function(e){if(e===P.x$.SIMPLE||e===P.x$.WITH_STACK){return async function(e,t,n){let i=null;try{const a=l.default.currentProject,o=await d.yR(a.authorAssignment.assignment.id,e,t,n);i=o.publishResultsList,await K(i),$(i);const r=await d.bp(o.taskId);if(!r)throw new Error("Unknown publish error");const c=s().trimEnd(r.stackVersionId,":latest");await K(i,c),ee(i,r),await l.default.currentProject.setNeedPublish(!1),V.updatePublishBtnVisibility()}catch(e){y.Z.error(function(e){const t=/(.*)(<<<intercom>>>)(.*)(<<<\/intercom>>>)(.*)/;if(t.test(e)){const n=e.replace(t,"$1"),i=e.replace(t,"$5");return n+'<a href="mailto:help@codio.com">'+e.replace(t,"$3")+"</a>"+i}return e}(e.message)),i&&ee(i)}}(u.find("#assignment-changelog").val(),e===P.x$.WITH_STACK,u.find("#assignment-publish-change-gigabox").prop("checked")),function(){const e=l.default.currentProject.authorAssignment.course.id,t=[{title:"Return to dashboard",type:1,onClick:()=>location.assign("/home/teacher/".concat(e,"?tab=edit"))},{title:"Close",type:0,onClick:()=>G.close()}],n=o()(B());G=new w.Z({title:"Versions",className:"publish-assignment-dialog versions",content:q(),buttons:t,width:650,onHide:function(){n.off("click"),G=null}})}(),!1}}})}function X(e){return e.map((e=>{let t;t=e.createdAt?_.default.formatDateFullUSWithoutTZ(e.createdAt):e.taskId;let n=null;if(e.userId){const t=W[e.userId],i=t&&t.actual_name||"Unknown";n="Published by: ".concat(i)}let i,a=e.stackVersionId;const o=s().replace(e.stackVersionId,/:latest$/,""),r=z[o];if(i=r&&r.versions.find((e=>e.id===o)),r){const t=r.name;if(s().includes(e.stackVersionId,":latest"))a="latest of ".concat(t);else if(i){const e=_.default.formatDateFullUSWithoutTZ(i.timestamp);a="".concat(i.version," (").concat(e,") of ").concat(t)}}return{versionLabel:t,stackVersion:a,changelog:e.changelog,publisherText:n,statusText:P.C7[e.status].toUpperCase(),status:P.C7[e.status]}}))}function $(e){G&&G.content(q({itemsList:X(e)}))}function ee(e,t){const n=s().cloneDeep(e),i=s().head(n);t?(i.status=P.ZP.PUBLISH_STATUS_SUCCESSFUL,i.stackVersionId=t.stackVersionId):i.status=P.ZP.PUBLISH_STATUS_ERROR,$(n)}const te=async()=>{if(!l.default.currentProject.exists(L.q9))return[];const e=await R.ZP.getAssessments(),t=await R.ZP.getAssessmentsUsageForProject(e);return s()(t).filter((e=>e.taskId.includes("random"))).groupBy("section.index").filter((e=>e.length>1)).map((e=>e[0].section.title)).value()};b.Z.subscribe("project:open",(()=>{const{currentProject:e}=l.default,t=s().get(e,"authorAssignment.assignment.versionIds",[]);!e.needPublish&&s().isEmpty(t)&&l.default.currentProject.setNeedPublish(!0).then((()=>V.updatePublishBtnVisibility()))}));const ne={showDialog:function(){const e=l.default.currentProject.authorAssignment,t={assignment:{stats:!0}},n=e.assignment.id;N.Z.saveAllAndWait().then((()=>M.Z.check())).then((()=>Promise.all([d.wK(e.course.id,n,null,null,t),te()]))).then((function(t){let[i,a]=t;if(!i)throw new Error("No course found");const o=s().find(i.unitsList,{id:e.unit.id}),r=s().find(o.assignmentsList,(function(e){return e.projectBased&&e.projectBased.id===n})),c=s().get(r,"projectBased.settings.gigaBoxSlot.boxType"),d=l.default.currentProject,u=d.gigaBoxSlot&&d.gigaBoxSlot.boxType||void 0;Q(s().get(r,"projectBased.stats.startedStudentsCount.value",!1),c!==u,a)})).catch((function(e){V.publishDialogClosed(),e.message===M.Z.DEFAULT_ERROR?y.Z.error("Publishing the old version is not possible. Please convert the project first."):y.Z.error(e.message)}))}};var ie=n(10),se=n(2931),ae=n(49088);const oe=(0,f.e)(u.ki),re=b.Z.create(ie);b.Z.subscribe("command:education:publish_track",(async()=>{if(await new Promise((e=>{w.Z.showConfirm({title:"Publish Collection?",description:"Are you sure you want to publish?",onHide:function(){re.publishDialogClosed(),e(!1)},onClose:function(t){e(t)}})})))try{await N.Z.saveAllAndWait();const e=l.default.currentProject.track.track.id;await(e=>{const t=new se.PublishRequest;return t.setId(e),new Promise(((e,n)=>{oe.publish(t,(0,p.sd)((0,ae.p)()),((t,i)=>{t?n(new Error(t.message)):e(k.Z.onlyNsCallbackTask({message:i.getTaskId()}))}))}))})(e),l.default.currentProject.setNeedPublish(!1),y.Z.success("Collection published successfully!"),re.updatePublishBtnVisibility()}catch(e){y.Z.error(e.message)}})),b.Z.subscribe("project:open",(()=>{var e;l.default.currentProject.track&&!l.default.currentProject.needPublish&&s().isEmpty(null===(e=l.default.currentProject.track.track)||void 0===e?void 0:e.latestVersion)&&l.default.currentProject.setNeedPublish(!0).then((()=>re.updatePublishBtnVisibility()))}));const ce=c().compile('<div class="timed-mode-countdown">\n  Time remaining <span id="timedCountdown"></span>\n</div>'),le=c().compile('<div class="timed-countdown-block ui-blocker-content">\n  <span>\n    <span class="spinner" />\n    {{{message}}}\n  </span>\n</div>'),de=o()("#toolbars"),ue=o()("#content");let he=null,pe=null;const fe=()=>{const e=l.default.currentProject;if(pe){const{assignment:t}=e.eduStartedAssignmentInfo,n=t.projectBased?t.projectBased.settings:t.bookBased.settings,{end:i}=n,{timedMode:a}=e.examMode,{assignee:r}=e.eduStartedAssignmentInfo.started,c=r.userId||r.groupId,{extendedExamTimesPerStudent:l,extendedExamTimesPerGroup:d,penaltiesPerStudent:u,penaltiesPerGroup:h}=n,p=r.userId?l:d,f=s().get(p,c,{}),m=f.extend&&a.enabled?f.extend:0,g=r.userId?u:h,b=s().get(g,c,{}),v=b.extend?6e4*b.extend:0,y=i&&i.time?new Date(i.time).getTime()+v:Number.MAX_VALUE,w=e.created+6e4*(a.duration+m),_=Math.min(y,w),k=Math.max(_-Date.now(),0);if(k){const e=Math.floor(k/6e4),t=Math.floor(e/1440),n=Math.floor(e/60-24*t),i=e-60*n-1440*t;pe.find("#timedCountdown").html("".concat(t," days ").concat(n," hours ").concat(i," minutes"))}else ue.block({content:o()(le({message:"Completing assignment..."})),className:"ui-blocker-with-message fullscreen"})}},me=(e,t)=>{const n=l.default.currentProject;t&&pe&&(he&&clearInterval(he),he=null,pe&&pe.remove(),pe=null,ue.unblock());const{examMode:i}=n;pe||!i.timedMode.enabled||t||(pe=o()(ce()),fe(),de.prepend(pe),he=setInterval(fe,6e4))};var ge=n(45113);var be=n(54565);const ve=c().compile("<h4 class='centered'>\n  You will have until {{formatDateFullUS untilDate}} to complete this assignment.<br/>\n  If you do not complete your assignment before then, it will automatically be marked as complete.\n</h4>"),ye=c().compile('<h4>\n  This assignment only allows a single login per user. Please make sure you have....\n</h4>\n<ol class="startAssignment--singleLogin">\n  <li>Closed other tabs or browsers with {{whitelabel}}</li>\n  <li>Stable Internet connection</li>\n  <li>Enough power in your device</li>\n  <li>Plenty of time</li>\n</ol>\n<br/>\n<strong>\n  Once you start this assignment, if your computer gets disconnected from\n  the network and reconnects with a new IP address, you will be locked out.\n</strong>'),we=(e,t)=>{const n=o()('<div class="startAssignment-content centered"></div>'),{timedMode:i,singleLogin:s}=e.examMode;return i.enabled&&n.append(((e,t)=>{const{end:n}=e,{timedMode:i}=e.examMode,s=n&&n.time?new Date(n.time).getTime():Number.MAX_VALUE,a=e.extendedExamTimesPerStudent&&e.extendedExamTimesPerStudent[t],r=a&&a.extend?a.extend:0,c=Date.now()+6e4*(i.duration+r),l=Math.min(s,c);return o()(ve({untilDate:l}))})(e,t)),s&&n.append(o()(ye({whitelabel:be.Z.get("whitelabel")}))),n},_e=e=>{const{currentProject:t,currentUser:n}=l.default,i=n.account,{eduStartedAssignmentInfo:s}=t||{};if(!s)return Promise.resolve(!1);const{assignment:a}=s,{started:o}=s,r=(0,ge.bz)(a);if(!r.examMode)return Promise.resolve(!0);const{timedMode:c,singleLogin:d}=r.examMode,u=e||!o||!o.projectId,h=c.enabled||d;return u&&h?((e,t)=>new Promise((n=>{const i=w.Z.showConfirm({title:"Start Assignment Warning",description:we(e,t),width:600,buttons:[{title:"Start Assignment",type:1,onClick:function(){i&&i.close(),n(!0)}},{title:"Cancel",onClick:function(){i&&i.close(),n(!1)}}],onHide:function(){n(!1)}})})))(r,i).then((e=>e&&d?O.default.AccountManager.upgradeSessionToStrict().then((()=>e)):e)):Promise.resolve(!0)},ke=(e,t,n)=>{window.sessionStorage.removeItem("codio_sso_token");const i="".concat(window.location.origin,"/home/student?course_id=").concat(e,"&assignment_id=").concat(t),s=window.btoa(unescape(encodeURIComponent(i))),a="?responseUrl=".concat(s);window.location.href="".concat(window.location.origin,"/oauth_api/ssoAccessToken/").concat(n).concat(a)},Pe=(e,t,n)=>_e(n).then((i=>{if(i)return((e,t)=>{const n=window.sessionStorage.getItem("codio_sso_token");return d.rN(t,n).then((e=>{location.assign(_.default.getProjectIdeUrl(e))})).catch((n=>{if(!n.message.includes("CUSTOM_AUTHENTICATION_REQUIRED"))throw n;{const i=n.message.match("{(.*)}")?n.message.match("{(.*)}")[1]:"";ke(e,t,i)}}))})(e,t);n&&_.default.goBackOrLocation("/"+l.default.currentUser.name())})),Ce=new Map;function xe(e,t){const n=Ce.get(e).maxRate,i=Ce.get(e).parent;for(let s=1;s<=n;s++)t>=s?i.find("[data-rate='".concat(s,"'][data-parentid='").concat(e,"']")).addClass("isRated"):i.find("[data-rate='".concat(s,"'][data-parentid='").concat(e,"']")).removeClass("isRated")}const Ee={addRate:function(e,t,n,i){let a=e.find(t);const r="rateContainer-'".concat(s().random(1e3),"'"),c=o()('<div class="rateContainer" id='+r+"></div>").on("mouseleave",(e=>function(e){xe(e.currentTarget.id,Ce.get(e.currentTarget.id).rated)}(e)));Ce.set(r,{parent:a,maxRate:n,onChooseFunc:e=>i(e),rated:0});for(let e=1;e<=n;e++)c.append((l=e,d=r,o()('<div class="rateItem">'+l+"</div>").on("click",(e=>function(e){const t=e.currentTarget.dataset.parentid,n=e.currentTarget.dataset.rate;Ce.get(t).rated=n,Ce.get(t).onChooseFunc(n)}(e))).attr("data-rate",l).attr("data-parentid",d).on("mouseenter",(e=>function(e){xe(e.currentTarget.dataset.parentid,e.currentTarget.dataset.rate)}(e)))));var l,d;a.append(c)}},Se=c().compile('<div class="survey-dialog">\n    <div class="survey-dialog-question">\n    </div>\n    <div class="survey-dialog-answer form">\n        {{#equals questionType "FREE_TEXT"}}\n            <label class="form-label" for="survey-dialog-answer--free-text">\n              Answer\n            </label>\n            <textarea\n                id="survey-dialog-answer--free-text"\n                class="survey-dialog-answer--free-text"\n                placeholder="place your answer here..."\n                rows = "5"\n                maxlength="4000"></textarea>\n        {{/equals}}\n        {{#equals questionType "RATE"}}\n            <div class="survey-dialog-answer--rate">\n            </div>\n        {{/equals}}\n    </div>\n</div>\n'),Ie=ge.rx,Ae=ge.c1,Te=10,je=Object.freeze({NEXT_BUTTON:{title:"Next question",type:1,onClick:()=>function(){if(Ue(),Oe&&Re<Le){const e=Ne[++Re];Oe.content(Be(e)),Re===Le-1&&Oe.buttons([je.FINISH_BUTTON])}}()},FINISH_BUTTON:{title:"Finish",type:1,onClick:()=>(Ue(),Re=-1,d.yp(De,Me,Fe),void Oe.close())}}),Ze=Object.freeze({FREE_TEXT:"FREE_TEXT",RATE:"RATE"});let Oe=null,Ne=null,De=null,Me=null,Re=-1,Le=null;const Fe={};function Be(e){const t=e.questionType||Ze.RATE,n=o()(Se({questionType:t}));return _.default.toHTML(e.question).then((function(e){n.find(".survey-dialog-question").html(e)})),t===Ze.RATE&&Ee.addRate(n,".survey-dialog-answer",Te,(e=>Ue(e))),n}function Ue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null!=e)return void(Fe[Re]={rate:parseInt(e)});if((Ne[Re].questionType||Ze.RATE)===Ze.FREE_TEXT){const e=Oe.params.content.find(".survey-dialog-answer--free-text").val();if(s().isEmpty(e))return;Fe[Re]={freeText:e}}}const qe={showDialog:function(){const e=s().get(l.default.currentProject,"eduStartedAssignmentInfo.assignment");Me=Ae(e);const t=Ie(e);if(Ne=s().get(t,"survey.questions"),s().isEmpty(Ne))return Promise.resolve();De=s().get(t,"survey.surveyId"),Le=s().size(Ne);const n=Ne[++Re],i=Le>1?[je.NEXT_BUTTON]:[je.FINISH_BUTTON],a=Be(n);return new Promise((e=>{Oe=new w.Z({title:"Survey",icon:"checkclipboard",className:"survey-assignment-dialog",content:a,buttons:i,width:650,focusOn:a.find(".survey-dialog-answer--free-text"),onClose:function(){return e(),!0}})}))}};var He=n(2769);const Ge=c().compile('<div>\n  {{#if showDraftedNotAnswered}}\n    <div class="on-complete-confirmation-sections-block">\n      {{#if hasNotAnswered}}\n      Assessments on\n      {{#if moreThen5pagesNotAnswered}}\n      more than 5 pages\n      {{else}}\n      the following page{{#if sectionsWithNotAnsweredAssessments.length}}s{{/if}}\n      {{/if}}\n      are not answered{{#if moreThen5pagesNotAnswered}}.{{else}}:{{/if}}\n      {{#unless moreThen5pagesNotAnswered}}\n      <ul class="on-complete-confirmation-sections-list">\n      {{#each sectionsWithNotAnsweredAssessments}}\n        <li>{{title}}</li>\n      {{/each}}\n      </ul>\n      {{/unless}}\n      <br/>\n      {{/if}}\n      {{#if hasDrafted}}\n      Assessments on the following page{{#if sectionsWithDraftedAssessments.length}}s{{/if}} are not submitted:\n      <ul class="on-complete-confirmation-sections-list">\n      {{#each sectionsWithDraftedAssessments}}\n        <li>{{title}}</li>\n      {{/each}}\n      </ul>\n      <br/>\n      {{#if showSubmitDraftedCheckbox}}\n      <div class="on-complete-confirmation-sections-checkbox-container">\n        <label class="checkbox">\n          <input type="checkbox" class="js-autosubmit-drafted" checked />\n          Submit all assessments\n        </label>\n      </div>\n      {{/if}}\n      <br/>\n      {{/if}}\n    </div>\n  {{/if}}\n  {{#if isTeacher}}\n    {{#if completed}}\n      Changing this assignment to Completed will set the Completed Date to today.\n    {{else}}\n      Changing this assignment to Incomplete will remove any existing Date of Completion\n      that is currently stored.\n    {{/if}}\n  {{else}}\n    {{#if readOnlyOnComplete}}\n      Once you mark the assignment as complete you will retain only read-only access.\n      You will not be able to make any further changes or run any programs of any kind.\n    {{else}}\n      {{#if noneOnComplete}}\n        You will be able to access and work in files in the assignment but any assessments in guides will not be accessible.\n        <br /><br />\n        Do you want to continue?\n      {{else}}\n        Once you mark the assignment as complete you lose full access to the assignment.\n        You will not be able to make any further changes or run any programs of any kind.\n      {{/if}}\n    {{/if}}\n    <br />\n    {{#unless noneOnComplete}}\n      <br />\n      If you acknowledge that you will no longer be able to make changes,\n      please type "yes" into the box below.\n    {{/unless}}\n  {{/if}}\n</div>\n'),We=c().compile('<div>\n  <div class="on-complete-confirmation-sections-block">\n    Assessments on the following page{{#if sectionsWithNotAnsweredAssessments.length}}s{{/if}}\n    are not answered:\n    <ul class="on-complete-confirmation-sections-list">\n    {{#each sectionsWithNotAnsweredAssessments}}\n      <li data-id="{{id}}"><a href="javascript:void(0)">{{title}}</a></li>\n    {{/each}}\n    </ul>\n    {{#if hasMoreUnanswered}}\n    and others.\n    {{/if}}\n  </div>\n</div>\n');var ze=b.Z.create(n(10));v.Z.hotkey.plugin("education",n(9490));let Ve=null,Ke=null;var Je=null,Ye=!1,Qe=!1,Xe=!1;let $e=!1,et=null;var tt=".codio-jupyter";const nt="reset_assignment";function it(e){Ve=e,function(){const e=ht(),{assignment:t}=Ve,n=(0,ge.bz)(t);n&&(n.isDisabled=e)}(),ze.eduStartedAssignmentInfoLoaded(Ve),ct(),st();const t=jt(Ve.started);me(Ve,t)}async function st(){const{eduStartedAssignmentInfo:e}=l.default.currentProject;if(!e)return;const t=await async function(){if(Je)return{};const e=Zt();if(!e)return{};const t=e.show&&!e.disabled&&!e.completed,n=e.show&&!e.disabled&&e.completed,i=await R.ZP.getDraftedAndNoAnsweredAssessments(),a=!s().isEmpty(i.drafted)||!s().isEmpty(i.notAnswered);return{markComplete:{visible:t,withWarning:a},markUncomplete:{visible:n}}}(),n=function(){const{eduStartedAssignmentInfo:e}=l.default.currentProject;if(!e||Je)return{};const{allowRegradeRequest:t,completed:n,hasPendingRegradeRequest:i}=ot();return{requestRegrade:{visible:t&&n&&!i},cancelRegradeRequest:{visible:t&&n&&i}}}(),i=function(){if(!Je)return{};return{grading:{visible:!0}}}();ze.updateEducationButtonsGroupState({...t,...n,...i})}const at=function(e){var t,n,i,s,a,o,r;let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!_.default.isIframe())return;const d=l.default.currentProject,u=l.default.currentUser.getAccountUid(),h=(null===(t=d.authorAssignment)||void 0===t?void 0:t.course)||(null===(n=d.eduStartedAssignmentInfo)||void 0===n?void 0:n.course),p=null!==(i=null!==(s=null==d||null===(a=d.authorAssignment)||void 0===a?void 0:a.assignment)&&void 0!==s?s:null==d||null===(o=d.eduStartedAssignmentInfo)||void 0===o||null===(o=o.assignment)||void 0===o?void 0:o.projectBased)&&void 0!==i?i:null==d||null===(r=d.eduStartedAssignmentInfo)||void 0===r||null===(r=r.assignment)||void 0===r?void 0:r.bookBased,f={event:e,data:{user:u,assignment:(null==p?void 0:p.id)||"",course:(null==h?void 0:h.id)||"",...c}};window.parent.postMessage(f,"*")};function ot(){const{eduStartedAssignmentInfo:e}=l.default.currentProject;if(!e||Je)return{allowRegradeRequest:!1,completed:!1,hasPendingRegradeRequest:!1};const{assignment:t,started:n}=e,i=jt(n),s=!!n.grade;return{allowRegradeRequest:(0,ge.bz)(t).allowRegradeRequest&&s,completed:i,hasPendingRegradeRequest:n.regradeRequests.filter((e=>e.status===P.ZI.PENDING)).length>0}}const rt=e=>{(e=>{var t;const n=l.default.currentProject;null!=n&&null!==(t=n.track)&&void 0!==t&&t.track&&e.push({title:"Publish Collection",command:"education:publish_track"})})(e)};function ct(){const e=[];!function(e){if(!Ve)return;const t=ht(),n=l.default.currentProject.isUserAssignee?"Grades":"Grading";Je&&e.push({title:n,command:"file:open",params:{ext:"grading",filename:""}});const{guides:i,isUserAssignee:s}=l.default.currentProject,a=l.default.currentProject.eduStartedAssignmentInfo.assignment,o=!i||!1!==i.metadata.useMarkAsComplete;(s&&o||Je)&&(jt(Ve.started)?(e.push({title:"Mark as Uncompleted",command:"education:mark_as_uncompleted",disabled:t||!Ye&&!Je||Tt(a)&&!Je}),(0,He.U2)()&&e.push({title:"Feedback",command:"education:feedback"}),Je&&e.push({title:"Behavioral Player",command:"education:behavioralPlagiarismPlayer"})):(e.push({title:"Mark as Completed",command:"education:mark_as_completed",disabled:t||!Ye&&!Je}),(0,He.U2)()&&e.push({title:"Feedback",command:"education:feedback"})))}(e),function(e){if(!Qe)return;e.push({title:"Test Autograde Script",command:"file:open",params:{ext:"test-autograde",filename:""}})}(e),function(e){var t=l.default.currentProject;t.isAdmin&&!t.eduStartedAssignmentInfo&&t.exists(tt)&&e.push({title:"Validate Jupyter",command:"file:open",params:{ext:"validate-jupyter",filename:""}})}(e),function(e){const t=l.default.currentProject;t.isAuthorProject&&!t.isBookWriter&&e.push({title:"Publish Assignment",command:"education:publish_assignment"})}(e),function(e){e.push({title:"Code Comments",command:"file:open",params:{ext:"code-comments",filename:""}})}(e),function(e){if(!lt())return void dt(!1);dt(!0),e.push({title:"Writable Copy",command:"education:writable"})}(e),function(e){if(!ut())return;e.push({title:"Reset assignment",command:"education:reset_assignment_by_student"})}(e),function(e){const t=l.default.currentProject;(t.isAuthorProject||t.isAdmin&&!t.eduStartedAssignmentInfo)&&e.push({title:"Clear Assessment Answers",command:"education:clear_assessment_answers"})}(e),rt(e),0!==e.length&&ze.updateEducationMenuItem({disabled:!1,items:e})}function lt(){return Ve&&l.default.currentProject.course&&Je&&!Ve.started.isTemporary&&!l.default.currentProject.writableCopy}function dt(e){ze.writableCopyMenuVisibility({state:e})}function ut(){const e=Ve&&Ve.assignment;if(!e)return!1;return(0,ge.bz)(e).enableResetAssignmentByStudent}function ht(){if(!Ve||!l.default.currentProject.course)return!0;const e=l.default.currentProject.course,{assignee:t}=Ve.started;return(0,ge.LK)(e,Ve.assignment,t)}const pt=e=>{const{assignment:t}=e;return t?t.projectBased?t.projectBased.id:t.bookBased.id:""},ft=e=>{const{assignment:t}=e,n=(0,ge.bz)(t);return n?n.name:""};async function mt(e){if((0,He.U2)()){const t=()=>e||!l.default.ide.panels.getOpenedTabs("feedback")[0];if(l.default.currentProject.temporaryDisableProtectLayout(),t()&&l.default.ide.open("feedback",""),et)return;et=b.Z.subscribe("guides:layout:applied",(()=>{const e=b.Z.subscribe("guides:section:rendered",(()=>{l.default.currentProject.temporaryDisableProtectLayout(),t()&&l.default.ide.open("feedback",""),b.Z.unsubscribe(e)}))}))}}const gt=()=>{const e=l.default.currentProject;if(e.eduStartedAssignmentInfo){const t=pt(e.eduStartedAssignmentInfo);d.Ir({assignmentId:t}).then((e=>{Ke=e,ze.rubricsLoaded(e)})).catch((e=>y.Z.error(e.message)))}};function bt(){var e=l.default.currentProject;if(gt(),e.eduStartedAssignmentInfo&&ze.updateForkMenuItem({visible:!1}),e.eduStartedAssignmentInfo&&(!e.writableCopy&&ze.updateDeleteProjectMenuItem({visible:!1}),ze.updateProjectPermissionsMenuItem({visible:!1})),e.eduStartedAssignmentInfo&&!e.isOpenedByTeacher){const t=St(e.eduStartedAssignmentInfo);ze.updateExportAsZipMenuItem({visible:!t}),ze.updateFiletreeDownload({visible:!t}),ze.updateFiletreeExportZip({visible:!t}),ze.filterCodioMenu()}e&&(e.isAdmin&&!e.eduStartedAssignmentInfo&&g().then((function(e){Qe=s().some(e,(function(e){return e.teachers.requestorIsMember})),ct()})),e.eduStartedAssignmentInfo&&(Ye=function(e){var t=e.assignment;return(0,ge.bz)(t).studentCanComplete}(e.eduStartedAssignmentInfo),Je=e.isOpenedByTeacher,it(e.eduStartedAssignmentInfo),function(){const e=b.Z.subscribe("guides:player:on_activate",(()=>{b.Z.unsubscribe(e),(0,He.hw)()&&mt()}))}(),!e.isReadOnly||Je||$e||function(e){const t=_.default.promise.deferred();let n=e?"This project is marked as completed. You can not edit it. <br/>If you require further access to the project, mark it as uncompleted.":"This project is marked as completed. You can not edit it. <br/>If you require further access to the project, contact your teacher.";const i=[{title:"ok",type:1,onClick:function(){return a.close()}}],s={title:"Reset Assignment",onClick:function(){return t.resolve(nt),Mt(),a.close()}};ut()&&(i.push(s),n="This assignment is marked as completed but if you wish you can reset to start again. \n      To reset the assignment either select the button below or go to Education > Reset Assignment menu item");const a=w.Z.showWarning({title:"Warning",description:n,buttons:i,doNotCloseOpened:!0,width:700,onClose:function(){t.resolve()},onHide:function(){t.resolve()}});return t.promise}(It(e.eduStartedAssignmentInfo.assignment)).then((function(e){e!==nt&&Ot()})))),ze.updatePublishBtnVisibility()}const vt=()=>{const e=_.default.promise.deferred(),t=l.default.currentProject,{started:n,assignment:i}=t.eduStartedAssignmentInfo;if(n.penaltyDisabled)return Promise().resolve(!0);const s=(0,ge.bz)(i);if(!(0,ge.vc)(i)||new Date<Date.parse(s.due.at)+6e4*t.penaltyExtendMin)return Promise.resolve(!0);const a=(0,ge.jQ)(Ve),o=()=>{r&&r.close(),r=null};let r=w.Z.showConfirm({title:"Late penalty warning",message:a,width:700,buttons:[{title:"Mark Incomplete and Receive Late Penalty",onClick:function(){o(),e.resolve(!0)},type:1},{title:"Cancel",onClick:function(){o(),e.resolve(!1)}}],onHide:function(){e.resolve(!1)}});return e.promise},yt=()=>{const{allowRegradeRequest:e,hasPendingRegradeRequest:t}=ot();return e&&!t},wt=async e=>{try{let t,n={};if(e){ze.saveBeforeComplete(),await _.default.promise.delay(1e3,null);const e=await R.ZP.getDraftedAndNoAnsweredAssessments();if(!(s().isEmpty(e.drafted)&&s().isEmpty(e.notAnswered))){const t=R.ZP.getSectionsForAssessments(e.drafted);n={assessmentsInfo:e,sectionsDrafted:t,sectionsNotAnswered:R.ZP.getSectionsForAssessments(e.notAnswered)}}}if(!Je){if(!e){if(!await vt())return;return Et(!1)}const t=n?n.assessmentsInfo:null,i=!t||s().isEmpty(t.drafted)&&s().isEmpty(t.notAnswered),a=l.default.currentProject.eduStartedAssignmentInfo.assignment;if(i&&It(a)){return Et(!0,!_t())}}return t=Je||e?await function(e,t,n){var i=n&&!s().isEmpty(n.sectionsDrafted),a=n&&!s().isEmpty(n.sectionsNotAnswered);const r=a&&n.sectionsNotAnswered.length>5,c=_t(),d=l.default.currentProject.eduStartedAssignmentInfo.assignment,u=It(d),{requireAllAssessmentsSubmittedToComplete:h}=(0,ge.rx)(d);return new Promise((l=>{if(!e&&t&&a&&h){const e=o()(We({sectionsWithNotAnsweredAssessments:n&&s().take(n.sectionsNotAnswered,5),hasMoreUnanswered:n&&n.sectionsNotAnswered.length>5})),t=w.Z.showConfirm({title:"Warning",buttons:w.Z.MB_OK,description:e,onHide:function(){l()},onClose:function(){l()}});b.Z.on(e,"click","li",(async e=>{const n=o()(e.currentTarget).data("id");await kt("guides"),t.close(),window.codioIDE.guides.goToSection({sectionId:n})}))}else w.Z.showConfirm({title:"Warning",captcha:!e&&!u,captchaValue:"yes",placeholder:"Enter: yes",buttons:w.Z.MB_OKCANCEL,description:Ge({isTeacher:e,completed:t,noneOnComplete:u,readOnlyOnComplete:At(d),showDraftedNotAnswered:!!n&&(c||h),hasDrafted:i,showSubmitDraftedCheckbox:c&&!h,sectionsWithDraftedAssessments:n&&n.sectionsDrafted,hasNotAnswered:a,sectionsWithNotAnsweredAssessments:n&&n.sectionsNotAnswered,moreThen5pagesNotAnswered:r}),onHide:function(){l()},onClose:function(e){if(!e)return l(),!0;const t=!c||h||this.content().find(".js-autosubmit-drafted:checked").length>0;l({needSubmitDrafted:t})}})}))}(Je,e,n):await vt(),t?Et(e,t.needSubmitDrafted):void ze.cancelMarkAsCompleted()}catch({message:e}){y.Z.error(e)}};function _t(){var e=l.default.currentProject.guides,t=e&&e.metadata;return!t||s().isUndefined(t.useSubmitButtons)||t.useSubmitButtons}const kt=e=>{const t=l.default.ide.panels.getOpenedTabs(e)[0];return t&&!t.active?l.default.ide.panels.open(e):Promise.resolve()};function Pt(){var e=l.default.currentProject.course,t=l.default.currentProject.isLtiEnabled,n=_.default.isIframe();!t||s().isEmpty(e.details.lti.url)||n?ze.gotoDashboard():location.assign(e.details.lti.url)}function Ct(e){y.Z.success("Successfully marked as "+e+"completed")}async function xt(){yt()&&await A(),await Ot()}async function Et(e,t){try{Nt=!0;const s=l.default.currentProject,a=_.default.isIframe();(a||e&&!Je)&&o()("div.ac").showFProgress("Marking assignment as completed..."),Xe=!0,$e=!0;const r=await d.JH({courseId:s.course.id,assignmentId:s.eduStartedAssignmentInfo.started.assignmentId,assignees:[s.eduStartedAssignmentInfo.started.assignee],completed:e,submitDrafted:e&&!!t});Xe=!1;const c=e?"":"Un";n=e,(i=l.default.currentProject.eduStartedAssignmentInfo.started.completed||{}).completed=n,l.default.currentProject.eduStartedAssignmentInfo.started.completed=i,it(l.default.currentProject.eduStartedAssignmentInfo),ct(),st();let u=Promise.resolve();if(r.isTask&&(u=k.Z.onlyNsCallbackTask({message:r.taskId.value})),e)if(a){if(At(s.eduStartedAssignmentInfo.assignment))return window.location.reload();try{await u,o()("div.ac").hideFProgress(),await xt(),$e=!1,await mt()}catch(e){let t="Unexpected grading error";e&&e.message&&(t=e.message),y.Z.error(t)}finally{Ct(c),o()("div.ac").hideFProgress()}}else if(Je)Ct(c);else try{await u,o()("div.ac").hideFProgress(),await xt(),Nt=!1,Pt()}catch(e){let t="Unexpected grading error";e&&e.message&&(t=e.message),y.Z.error(t)}finally{o()("div.ac").hideFProgress()}else Ct(c),a&&o()("div.ac").hideFProgress();ze.setCompleted()}catch(e){o()("div.ac").hideFProgress(),y.Z.error(e.message)}finally{Nt=!1}var n,i}function St(e){const t=jt(e.started),n=e.assignment;return!t&&(0,ge.rx)(n).disableDownloadByStudent}function It(e){return(0,ge.rx)(e).restrictionOnCompleted===ge.co.NONE}function At(e){const t=(0,ge.rx)(e);switch(t.restrictionOnCompleted){case ge.co.NO_ACCESS:return!0;case ge.co.READ_ONLY_AFTER_RELEASE_GRADES:return!t.releaseGrades;default:return!1}}function Tt(e){const t=(0,ge.rx)(e);switch(t.restrictionOnCompleted){case ge.co.READ_ONLY:return!0;case ge.co.READ_ONLY_AFTER_RELEASE_GRADES:return t.releaseGrades;default:return!1}}function jt(e){return!!e.completed&&e.completed.completed}function Zt(){var e=l.default.currentProject;if(!Ve)return null;const t=ht();Je=e.isOpenedByTeacher;var n=e.guides,i=n&&!1!==n.metadata.useMarkAsComplete,s=jt(Ve.started);return{show:e.isUserAssignee&&i||Je,completed:s,disabled:t||!Ye&&!Je||s&&Tt(e.eduStartedAssignmentInfo.assignment)&&!Je}}async function Ot(){const e=l.default.currentProject,t=s().get(e,"eduStartedAssignmentInfo.started.usersCompletedSurvey",[]).includes(l.default.currentUser.account),n=jt(e.eduStartedAssignmentInfo.started);if(!t&&n&&!e.isOpenedByTeacher&&!At(e.eduStartedAssignmentInfo.assignment))return qe.showDialog()}let Nt=!1;const Dt={};function Mt(){const e=pt(Ve),{assignee:t}=Ve.started,n=ft(Ve),i="reset ".concat(n),s=l.default.currentProject.course.id;w.Z.showConfirm({title:"Warning",description:"Once you reset the assignment, you will lose your current assignment progress.\n      <br/><br/>\n      If you acknowledge that you will lose your current assignment progress, enter â€œ".concat(i,'" in the box below.'),captcha:!0,captchaValue:i,placeholder:"Enter: ".concat(i),onClose:function(n){n&&(l.default.ide.skipNextProjectCloseEvent(),d.Q2(e,t).then((()=>Pe(s,e,!0))).catch((e=>{e.message.includes("CUSTOM_AUTHENTICATION_REQUIRED")||y.Z.error(e.message)})))}})}var Rt,Lt;b.Z.subscribe("project:open",s().defer.bind(s(),bt)),b.Z.subscribe("project:close",(function(){Ve=null,Ke=null})),b.Z.subscribe("command:education:mark_as_completed",(()=>wt(!0))),b.Z.subscribe("command:education:mark_as_uncompleted",(()=>wt(!1))),b.Z.subscribe("command:education:writable",(function(){if(!Ve||Dt.promise)return;if(Dt.popup&&!Dt.popup.closed&&Dt.popup.location.href.startsWith(Dt.uri))return void Dt.popup.focus();const e=y.Z.info("Making writable copy, please wait...");Dt.promise=d.dj(Ve.started.assignmentId,Ve.started.assignee).then((t=>{e.hide();const n=y.Z.info("Opening writable copy, please wait...");setTimeout((()=>n.hide()),3e3);const{origin:i}=window.location,{accountName:s,projectName:a}=t,o="".concat(i,"/").concat(s,"/").concat(a);Dt.uri=o,Dt.popup=window.open(o,"_blank"),delete Dt.promise})).catch((t=>{let{message:n}=t;e.hide(),y.Z.error("Error during create writable copy ".concat(n)),delete Dt.promise}))})),b.Z.subscribe("command:education:feedback",(()=>mt(!0))),b.Z.subscribe("command:education:behavioralPlagiarismPlayer",(()=>{const{eduStartedAssignmentInfo:e}=l.default.currentProject;if(!e)return;const t=l.default.currentProject.course,n=l.default.currentProject.guid,i=_.default.url.parse(window.location.href);ze.openPreview({arg:{file:"".concat(i.protocol,"//").concat(i.host,"/home/teacher/behavioral-player/").concat(t.id,"/").concat(n),title:"Behavioral Player"}})})),b.Z.subscribe("project:permissionsUpdated:#projectId",s().debounce((function(){Xe||(bt(),l.default.currentProject.examMode.singleLogin&&!l.default.currentProject.isReadOnly&&l.default.ide.showEnterStrictSessionWarning())}),200)),b.Z.subscribe("command:education:publish_assignment",(function(){ne.showDialog()})),b.Z.subscribe("education:assignmentRubric:reloaded",((e,t)=>{Ke=t,ze.rubricsLoaded(t)})),b.Z.subscribe("education:course:reloaded",((e,t)=>{if(Ve){const e=s().find(t.startedAssignments,(e=>{const t=Ve;return e.assignmentId===t.started.assignmentId&&(e.assignee.userId===t.started.assignee.userId||e.assignee.groupId===t.started.assignee.groupId)}));e&&(Ve.started.rubrics=(n=e.rubricsMap,s()(n).keyBy((e=>e[0])).mapValues((e=>{const t=s().cloneDeep(e[1]);return t.rubrics=t.rubricsList,delete t.rubricsList,t})).value()))}var n})),b.Z.subscribe("project:completedStateUpdated",(()=>{const e=l.default.currentProject;it(e.eduStartedAssignmentInfo),at("COMPLETED"),jt(Ve.started)&&!$e&&(_.default.isIframe()?At(e.eduStartedAssignmentInfo.assignment)&&window.location.reload():Je?w.Z.showWarning({title:"Final deadline warning",buttons:w.Z.MB_OK,description:"You have exceeded the final deadline. You are no longer able to make changes to your answers. You are free to review your answers."}):Nt||Pt())})),b.Z.subscribe("command:education:reset_assignment_by_student",Mt),b.Z.subscribe("command:education:clear_assessment_answers",(function(){const e="Are you sure you wish to clear assessment answers?";w.Z.showConfirm({title:"Warning",description:e,ariaDescribedBy:e,onClose:function(e){e&&R.ZP.resetAll()}})})),b.Z.subscribe("guides:codioAssessmentBtnClick",(()=>{st()})),b.Z.subscribe("guides:assessments:onResult",(async(e,t)=>{try{var n;const e=(null===(n=l.default.currentProject.guides)||void 0===n?void 0:n.assessments)||await R.ZP.getAssessments(),i=s().find(e,{taskId:t.assessmentId});if(!i)return;at("ASSESSMENT",{assessment:{id:i.taskId,type:i.type,name:i.source.name,points:i.source.points,result:t.result}})}catch{}})),Rt=tt,Lt=function(){ct()},b.Z.subscribe("item:created:"+Rt,Lt),b.Z.subscribe("item:deleted:"+Rt,Lt),b.Z.subscribe("item:moved:"+Rt,Lt),b.Z.subscribe("item:moved:#file:"+Rt,Lt);const Ft={goToDashboard:Pt,getEduStartedAssignmentInfo:function(){return Ve},getCompleteBtnInfo:Zt,getAssignmentRubrics:()=>Ke,getAssignmentId:pt,showWritableCopyButton:lt,getDisableDownloadByStudent:St}},2769:(e,t,n)=>{"use strict";n.d(t,{U2:()=>f,hw:()=>m,ZP:()=>g});var i=n(52308),s=n.n(i),a=n(177),o=n.n(a),r=n(49721),c=n(45113);var l=n(56225),d=n(72129),u=n(19575);const h=o().compile('<div class="codio-feedback-container"></div>\n'),p=[{name:"fullscreen",allowlist:"*"}];const f=()=>{var e;const{eduStartedAssignmentInfo:t}=r.default.currentProject;if(!t)return!1;const{assignment:n,started:i}=t;return(null==i||null===(e=i.completed)||void 0===e?void 0:e.completedAt)&&(0,c.bz)(n).releaseGrades},m=()=>{var e;const{eduStartedAssignmentInfo:t}=r.default.currentProject;if(!t)return!1;const{assignment:n,started:i}=t;return(null==i||null===(e=i.completed)||void 0===e?void 0:e.completed)&&(0,c.bz)(n).releaseGrades},g=class{constructor(e,t,n,i){if(!f())throw new Error("Feedback is not available");this.container=e;const a=s()(h({}));this.container.append(a);const o=this.container.find(".codio-feedback-container");this.frame=new l.Z(o,o,p,"codio-feedback-iframes",i,!1),(async()=>{const{eduStartedAssignmentInfo:e,course:t}=r.default.currentProject,{started:n,assignment:i}=e,s=r.default.currentUser.get("details").get("lowerName"),a=n.assignee.userId?d.default.AccountManager.findById(n.assignee.userId).then((e=>e.details.lowerName)):s,o=await a,l=u.default.url.parse(window.location.href),h=(0,c.c1)(i),p=n.assignee.groupId;return"".concat(l.protocol,"//").concat(l.host,"/home/student/feedback/").concat(o,"/").concat(t.id,"/").concat(h).concat(p?"/".concat(p):"")})().then((e=>{this.frame.src(e)}))}async activate(){var e,t;null===(e=this.frame)||void 0===e||e.focus(),null===(t=this.frame)||void 0===t||t.refresh()}close(){this.frame&&this.frame.clean(),this.frame=null}isCloseable(){return!m()}}},6229:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i,a:()=>s});const i={TYPE:{FILE:"file",DIR:"dir"},CSS:{DIR:"tree-type-folder",FILE:"tree-type-file-"}},s={FILE:"file",DIR:"directory"}},70243:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var i=n(96486),s=n.n(i),a=n(19575),o=n(6229),r=n(93443),c=n(9380),l=n(9380).A,d=r.Z.create(n(43380));function u(e,t){for(var n=t?t.split("/"):[],i=e.children,a=0,o=n.length;a<o;a++){var r=n[a];if(!s().isEmpty(r)&&!(i=i[r]))return}return i}function h(e,t,n,i,r,c){i=i||{},r=r||{};var l=s().isNumber(e)||s().isString(e)?o.Z.TYPE.FILE:o.Z.TYPE.DIR,d=l===o.Z.TYPE.FILE,u=!i[n],p=r[n]||!1;const f=a.default.realName(t);var m={text:f,type:l,a_attr:{"aria-label":"".concat(d?o.a.FILE:o.a.DIR," ").concat(f)}};return m.state={selected:p},d||(m.children=m.children||[],m.state.opened=!(l===o.Z.TYPE.DIR&&u)),d||(m.children=m.children||[],n=n?n+"/":"",c?m.children=!s().isEmpty(e):s().forOwn(e,(function(e,t){var s=h(e,t,n+t,i,r);m.children.push(s)}))),m}function p(e,t){var n=e.get_node("#").children[0],i=e.get_node(n),s=i.children,a=t.split("/"),o=i;return""!==t&&(o=f(e,s,a)),o}function f(e,t,n){if(t&&t.length>0){for(var i=n.shift(),s=!1,a=0;a<t.length;a++){var o=e.get_node(t[a]);if(o.text===i){s=!0;var r=o;return n.length>0&&(r=f(e,o.children,n)),r}}if(!s)return null}return null}function m(e,t){var n=e.get_path(t);if(n)return n.shift(),n.join("/")}function g(e){var t=p(e,""),n=e.get_selected(!0);0===n.length&&(n=[t]);for(var i=[],a=0,o=n.length;a<o;a++){var r=n[a],c=r.type,l=r.text,d=m(e,r),u={name:l,type:c};i.push({path:d,type:c,item:u})}return{file:{path:(i=s().sortBy(i,"path"))[0]&&i[0].path,type:i[0]&&i[0].type},items:i}}const b={getLevelByPath:function(e,t){var n=u(e,t),i=[];return n&&s().forOwn(n,(function(e,t){var n=s().isNumber(e)||s().isString(e);i.push({name:a.default.realName(t),dir:!n})})),i},getTreeLevelByPath:function(e,t,n,i,o){var r=(t=t?t+"/":"")?[]:{text:s().isEmpty(e.currentBranch)?e.name:e.name+" ("+e.currentBranch+")",type:"root",state:{selected:!1,opened:!0},children:[],a_attr:{"aria-label":"".concat(e.name," ").concat(e.currentBranch," branch filetree")}},l=t?r:r.children,d=u(e,t);if(d){var p=c.Z.get("codio-filetree").tree_items_limit,f=s().keys(d).length>p,m=f?p:s().keys(d).length,g=0;s().forOwn(d,(function(e,s){var r=h(e,s=a.default.realName(s),t+s,n,i,!o);if(l.push(r),++g>m)return!1})),f&&l.push({text:"Level contains more than "+p+" items, output truncated",type:"truncated",state:{selected:!1,opened:!1},children:!1})}return r},sortAndCollectNodes:function(e,t){var n=[];return s().forEach(t,(function(t){var i=e.get_node(t),s={name:i.text,type:i.type},a=m(e,i);a&&n.push({item:s,path:a})})),(n=s().sortBy(n,"path")).reverse()},getPath:m,getParentPath:function(e){var t=e.lastIndexOf("/");return t=-1===t?0:t,e.substring(0,t)},getTreeNodeByPath:p,onSelect:function(e){if("file"===e.node.type){var t=m(e.instance,e.node);l.execute("file","open",{ext:"tree",filename:t})}},onSelectionChanged:function(e){var t=g(e.instance);d.itemSelect(t.file,t.items)},onDblClick:function(e){var t=this.getUserData(e,"nodeType");t=void 0===t?"":t;var n=m(this,this.getNode(e));d.itemDblClick({path:n,type:t},[n,t])},getSelectedFiles:g,getOpenedNodesPaths:function(e,t){var n={};return s().each(t,(function(t,i){var s=p(e,i);s&&e.is_open(s)&&(n[i]=!0)})),n},getSelectedNodesPaths:function(e){for(var t={},n=e.get_selected(),i=0;i<n.length;i++){var s=e.get_node(n[i]);t[m(e,s)]=!0}return t},getAsTreeData:function(e,t,n,i){n=n||{};var o=(i=i||{})[t]||!1,r={text:e.name+" ("+e.currentBranch+")",type:"root",state:{selected:o,opened:!0},children:[]};return s().isUndefined(e.children)||(t=t?t+"/":"",s().forOwn(e.children,(function(e,s){var o=h(e,s=a.default.realName(s),t+s,n,i);r.children.push(o)}))),r},openNodesByPaths:function(e,t){s().isArray(t)||(t=[t]),s().each(t,(function(t){var n=p(e,t);e.open_node(n,void 0,!1)}))},selectNodesByPaths:function(e,t){var n=[];s().each(t,(function(t,i){n.push(p(e,i))})),e.select_node(n)}}},95638:(e,t,n)=>{"use strict";n.d(t,{WD:()=>j,tC:()=>Z,ZP:()=>$});var i=n(96486),s=n.n(i),a=n(97137),o=n(93443),r=n(19575),c=n(49721),l=n(72129),d=n(44952),u=n(69857),h=n(89506),p=n(61478),f=n(88228),m=n(76900),g=n(85886),b=n(26024),v=n(22346),y=n(55637),w=n(38524),_=n(28893),k=n(58728),P=n(70623),C=n(45113),x=n(67744),E=n(4418),S=n(15094);const I=["Codio Jeroo","jeroo"],A=async()=>{const e=[],t=await(async()=>{const e=s()(c.default.ide.panels.getOpenedTabs(["tree","jeroo"])).filter("activated").uniqBy("filename").map((e=>S.Z.cached(e.filename)?null:e.extension)).compact().value();return Promise.all(e)})();if(!t.length)return e;const n=await(async e=>{const t=e.filter((e=>I.includes(String((null==e?void 0:e.extensionName)||""))));return Promise.all(t.map((async e=>{try{return{context:await e.extension.getContext(),ext:e}}catch(t){return{context:null,ext:e}}})))})(t);if(!n.length)return e;for(const{context:t}of n){if(!t)continue;const n=s().uniq([t.codeFile,t.islandFile].filter(Boolean)),i=await Promise.all(n.map((async e=>{try{return{path:e,content:await c.default.currentProject.getFile(e)}}catch(e){return null}})));e.push(...s().compact(i))}return e};var T=n(71864);const j={SUCCESS:"success",FAIL:"fail",PARTIAL:"partial"},Z={TEXT:1,MARKDOWN:2,HTML:3};var O=o.Z.create(n(10742)),N=[w.CN,w.KX,w.LI,w.mO],D={},M={},R=null;let L=null,F=null;function B(){D.setState()}function U(e,t){if(!t.result)return;const n=t.submittedAt&&new Date(t.submittedAt),i={points:t.points,guidance:t.guidance,usedAttempts:t.usedAttempts||0,timestamp:n};switch(t.bestMark&&(i.bestMark=t.bestMark),e){case m.ZP.TEST:case m.ZP.CODE_OUTPUT_COMPARE:return{...i,feedback:t.feedback,format:t.format,code:t.result.code,output:(0,x.a4)(t.result.stdout),expectedOutputs:t.result.expectedOutputs};case m.ZP.MULTIPLE_CHOICE:case m.ZP.FILL_IN_THE_BLANKS:return{...i,current:t.result.current,right:t.result.right};case m.ZP.ECORNELL_FIB:return{...i,current:t.result.current,correct:t.result.correct||[],right:t.result.right};case m.ZP.MATH:return{...i,answers:t.result.answers};case m.ZP.CUSTOM:return{...i,code:0,answer:t.result.answer};case m.ZP.FREE_TEXT:return{...i,comments:t.comments,status:t.result.status,answer:t.result.answer};case m.ZP.FREE_TEXT_AUTO:return{...i,comments:(0,x.a4)(t.comments),feedback:t.feedback,format:t.format,status:t.result.status,answer:t.result.answer};case m.ZP.GRADE_BOOK:return{...i,comment:t.comment};case m.ZP.PARSONS_PUZZLE:return{...i,trashHash:t.result.trashHash,solutionHash:t.result.solutionHash,toggleStates:t.result.toggleStates,studentCode:t.result.studentCode};case m.ZP.SENSE_NETWORK:return{...i,graded:t.result.graded,preExecFailed:t.result.preExecFailed};case m.ZP.SPLICE:return{...i,stateJson:t.result.stateJson};case m.ZP.LLM_BASED_RUBRIC:case m.ZP.LLM_BASED_AUTO_RUBRIC:return{...i,id:t.id,status:t.result.status}}}D.fetchGuideState=async function(){const e=c.default.currentProject;return e.eduStartedAssignmentInfo?(async()=>{const e=R?await r.default.promise.getState(R):null;return R&&e===r.default.promise.STATES.FULFILLED?F:(R&&e!==r.default.promise.STATES.REJECTED||(R=p.Z.fetchGuideState()),R.then((e=>(F=e,F))))})().then((function(t){const n=e.guides&&s().cloneDeep(e.guides.assessments);return s().map(n,(function(e){const n=s().find(t,(t=>t.taskId===e.taskId));e.result=n?n.result:null;const i=e.result&&U(e.type,e.result);if(i){0===e.source.points?i.state=void 0!==i.code&&0!==i.code?"fail":"pass":i.state=e.result.answerState;const t=e.result&&e.result.state?e.result.state:{};e.result={result:i,state:t}}return e.source=z(e.type,e.source,!0),e}))})):(0,k.PT)().then(V)};D.checkObject=async function(e,t){let n;switch(e.type){case m.ZP.GRADE_BOOK:n={comment:e.comment,points:e.points};break;case m.ZP.SPLICE:n={state:e.state,score:e.score};break;case m.ZP.LLM_BASED_RUBRIC:n=await(async()=>{const e=await window.codioIDE.guides.getGuidesPageInfo();let t=(0,E.pi)(),n=[];try{n=await A()}catch(e){n=[]}return{guidesContent:e.content,studentSubmissions:t.concat(n)}})();break;case m.ZP.LLM_BASED_AUTO_RUBRIC:n=await(async()=>{const e=await window.codioIDE.guides.getGuidesPageInfo();let t=(0,E.pi)(),n=[];try{n=await A()}catch(e){n=[]}return{guidesContent:e.content,studentSubmissions:t.concat(n)}})();break;default:n={ids:e.action,text:e.text}}await this.check(e.task,e.type,n,t),e.type===m.ZP.GRADE_BOOK&&a.Z.notify("Grade submitted")};D.check=function(e,t,n,i){return function(e,t,n){return c.default.currentProject.eduStartedAssignmentInfo?p.Z.check(e,t,n):D.fetchDraft().then((function(t){let i=s().find(t,{taskId:e});if(!i)throw new Error("Assessment not found.");return i.type===m.ZP.CODE_OUTPUT_COMPARE&&y.ZP.showAsTeacher()&&(i=s().cloneDeep(i),i.source.showExpectedAnswer=!0,i.source.showExpectedAnswerOption={type:T.K9.ALWAYS}),p.Z.checkByAssessment(c.default.currentProject.guid,i,n)}))}(e,t,n).then((async function(n){const o=s().get(c.default.currentProject,"eduStartedAssignmentInfo.assignment"),d=o?(0,C.c1)(o):null;d&&l.default.UserEventManager.create(l.default.UserEventManager.EventType.GUIDES_CHECK_ASSESSMENT,{...P.Z.constructBasicEvent(),type:t,result:n,sectionId:i._sectionId,assignmentId:d}).catch((e=>{let{message:t}=e;return a.Z.error(t)}));const{eduStartedAssignmentInfo:u}=c.default.currentProject,h=R?await r.default.promise.getState(R):null;if(R&&h===r.default.promise.STATES.FULFILLED&&u){const t=s().find(F,{taskId:e}),i=t&&t.result?t.result.state:void 0,a=((e,t,n)=>{let i;return s().isUndefined(t.points)||(i=t.points>0?"pass":"fail"),{taskId:e,result:{...t,state:n,answerState:i}}})(e,n,i);F=s().filter(F,(t=>t.taskId!==e)),F.push(a)}return D.fetchGuideState().then((function(t){if(t&&i){const a=s().find(t,{taskId:e});if(!a)return;u?n.usedAttempts=a.result&&a.result.result&&a.result.result.usedAttempts:(a.usedAttempts+=1,n.usedAttempts=a.usedAttempts,a.historyBestScore&&a.source.useMaximumScore&&n.points<a.historyBestScore.points&&(n.bestMark=a.historyBestScore));const o=n.points,r=U(a.type,n);if(s().isFinite(null==r?void 0:r.points)||(r.points=o||0),r){if(r.guidance=n.guidance,0===a.source.points?r.state=0===n.result.code?"pass":"fail":r.state=o>0?"pass":"fail",a.type===m.ZP.SENSE_NETWORK&&(r.state=function(e){return s().isFinite(e.points)?e.points>0?"pass":"fail":"pass"}(r)),a.result={result:r,points:o},async function(e,t,n){if(!c.default.currentProject.isOwner||c.default.currentProject.eduStartedAssignmentInfo)return;(0,k.PT)().then((function(i){let a=s().find(i,{taskId:e});const o=n.usedAttempts;return a?(a.points=t,a.usedAttempts=o,a.results.unshift(n)):a={taskId:e,points:t,state:void 0,results:[n],usedAttempts:o},(0,k.H_)(a)}))}(e,o,r),a.type!==m.ZP.MATH)return q(a),H(a,i),r;{let e;if(n.questionText)e=Promise.resolve(n.questionText);else{const t=y.ZP.showAsTeacher();e=D.compileMath([{question:a.source.question,answers:r.answers,score:!0,feedback:t||a.source.showExpectedAnswer}]).then((function(e){return e[0].questionText}))}e.then((function(e){return a.source.instructions=e,q(a),H(a,i),r}))}}}}))})).catch((function(t){let{message:n}=t;a.Z.error(n),D.fetchGuideState().then((function(t){if(t&&i){const n=s().find(t,{taskId:e});if(!n)return;const a=s().cloneDeep(n);a.result?(a.result.timestamp=(new Date).getTime(),a.result.state="fail"):a.result={timestamp:(new Date).getTime(),state:"fail"},H(a,i)}}))}))};const q=e=>{var t,n,i,a,o,r;const c=null===(t=e.result)||void 0===t?void 0:t.points,l="pass"===(null===(n=e.result)||void 0===n||null===(n=n.result)||void 0===n?void 0:n.state),d=l&&c>0&&c<e.source.points,u=l?e.source.arePartialPointsAllowed&&d?j.PARTIAL:j.SUCCESS:j.FAIL;O.onAssessmentResult({assessmentId:e.taskId,result:{output:null===(i=e.result)||void 0===i||null===(i=i.result)||void 0===i?void 0:i.output,outputFormat:(null===(a=e.result)||void 0===a||null===(a=a.result)||void 0===a?void 0:a.format)||Z.TEXT,points:c,result:u,attempt:s().isNumber(null===(o=e.result)||void 0===o||null===(o=o.result)||void 0===o?void 0:o.usedAttempts)?null===(r=e.result)||void 0===r||null===(r=r.result)||void 0===r?void 0:r.usedAttempts:e.usedAttempts}})};function H(e,t){var n={html:!0,footnote:!0,asString:!0,noReact:!0,noDataLine:!0},i=[r.default.markdown.render(e.source.instructions,n,void 0,N).then((function(t){e.source.instructions=t}))];if(e.source.guidance){var a=r.default.markdown.render(e.source.guidance,n,void 0,N).then((function(t){e.source.guidance=t}));i.push(a)}if(e.result&&e.result.result&&e.result.result.guidance){var o=r.default.markdown.render(e.result.result.guidance,n,void 0,N).then((function(t){e.result.result.guidance=t}));i.push(o)}if(e.type===m.ZP.MULTIPLE_CHOICE)s().each(e.source.answers,(function(e){var t=r.default.markdown.render(e.answer,n,void 0,N).then((function(t){e.answer=t}));i.push(t)}));else if(e.type===m.ZP.FILL_IN_THE_BLANKS||e.type===m.ZP.ECORNELL_FIB){var c=s().map(e.source.tokens.text,(function(e){return 0===e?"%%%blank%%%":e})).join("");i.push(r.default.markdown.render(c,n,void 0,N).then((function(t){e.source.rendered=t})))}else e.type===m.ZP.SPLICE&&i.push(d.Z.interpolate(e.source.url).then((t=>e.source.url=t)));Promise.all(i).then((function(){!function(e,t){var n=r.default.hashCode(e.taskId+"assessment",!0);!(t&&M[t.id])&&t&&t.setAssessmentState(n,e),s().each(M,(function(t){t.setAssessmentState(n,e)}))}(e,t)}))}function G(e){const t=!!e.showExpectedAnswer;return delete e.showExpectedAnswer,e.showExpectedAnswerOption||(e.showExpectedAnswerOption=t?{type:T.K9.ALWAYS}:{type:T.K9.NEVER}),e}function W(e){const t=!!e.showGuidanceAfterResponse;return delete e.showGuidanceAfterResponse,e.showGuidanceAfterResponseOption||(e.showGuidanceAfterResponseOption=t?{type:T.Ie.ALWAYS}:{type:T.Ie.NEVER}),e}function z(e,t,n){if(t=G(t=W(t)),!n&&t.oneTimeTest&&(t.maxAttemptsCount=1),!s().isUndefined(t.maxAttemptsCount)||e!==m.ZP.MULTIPLE_CHOICE&&e!==m.ZP.FILL_IN_THE_BLANKS&&e!==m.ZP.ECORNELL_FIB||(t.maxAttemptsCount=1),e===m.ZP.FILL_IN_THE_BLANKS||e===m.ZP.ECORNELL_FIB){if(n||(t.tokens.regexPositions=[]),delete t.text,t.showValues){const e=(i=t.tokens.blank,s()(i).map((e=>s().startsWith(e,"/")&&s().endsWith(e,"/")&&e.length>1?{type:m.uR.REG_EX,value:e}:s().startsWith(e,'"')&&s().endsWith(e,'"')&&e.split(/",\s*"/).length>1?{type:m.uR.ONE_OF,value:e.substring(1,e.length-1).split(/",\s*"/)}:e)).value());let a=s()(e).flatMap(((e,i)=>e.type===m.uR.REG_EX?(n||t.tokens.regexPositions.push(i),[]):e.type===m.uR.ONE_OF?e.value:[e])).value();if(!n){const e=(t.distractors||"").split("\n");a=s()(a.concat(e)).filter((e=>e)).shuffle()}t.tokens.blank=a}else delete t.tokens.blank;return t}var i;return t}function V(e){const t=function(t){const n=s().find(e,{taskId:t});return n?{points:n.points,result:n.results[0],state:n.state}:null},n=function(t){const n=s().find(e,{taskId:t});return n?n.usedAttempts:null},i=function(t){const n=s().find(e,{taskId:t});if(!n||!n.results)return null;const i=s().maxBy(n.results,"points");return i?{points:i.points,timestamp:i.timestamp}:null};return D.fetchDraft().then((function(e){return s().map(e,(function(e){return{type:e.type,taskId:e.taskId,source:z(e.type,e.source,!1),result:t(e.taskId),usedAttempts:n(e.taskId),historyBestScore:i(e.taskId),owner:!0}}))})).then(K)}function K(e){var t=s().filter(e,(function(e){return e.type===m.ZP.MATH}));if(s().isEmpty(t))return e;var n=y.ZP.showAsTeacher(),i=s().map(t,(function(e){var t={},i=!1;return e.result&&(e.result.result?(i=!0,t=e.result.result.answers):e.result.state&&(t=e.result.state.answers)),{question:e.source.question,answers:t,feedback:n||e.source.showExpectedAnswer&&i,score:i}}));return D.compileMath(i).then((function(t){var n=0;return s().map(e,(function(e){return e.type===m.ZP.MATH&&(e.source.instructions=t[n].questionText,n++),e}))}))}function J(e,t,n){var i=n?n.assessmentId:t.linkedId;i&&(e.linkedId=i);var a=n?n.libraryId:t.libraryId;a&&(e.libraryId=a);var o=n?n.version:t.version;s().isUndefined(o)||(e.version=parseInt(o,10))}async function Y(e){const t=s()(e.source.tokens.blank).map("type").includes(m.uR.REG_EX),n=c.default.currentProject.guid;if(t)return e.type===m.ZP.ECORNELL_FIB?u.lB(n,e):u.VD(n,e)}D.setState=function(e){D.fetchGuideState().then((function(t){e&&(M[e.id]=e),t&&(s().isEmpty(t)?s().each(M,(function(e){e.resetButtons()})):s().each(t,(function(t){H(t,e)})))})).catch((e=>{let{message:t}=e;return a.Z.error(t)}))},D.removeState=function(e){delete M[e]},D.fetchDraft=function(){return b.ZP.loadAssessmentsFromFile().then((function(e){return s().filter(e,(function(e){return e.type!==m.ZP.MATH}))})).then((function(e){return D.getAssessmentLibraries().then((t=>s().map(e,(function(e){if(e.type===m.ZP.RANDOM){const n=s().cloneDeep(t.certified).concat(t.my);e.source.permissions=s().some(n,(t=>t.id===e.source.libraryId))}let n=W(e.source);return n=G(n),{...e,source:n}}))))}))},D.getAssessments=function(){return D.fetchDraft().then((function(e){return O.assessmentsUpdated(e),e})).catch((function(e){a.Z.error("Problem with fetch assessments: "+e)}))},D.add=async function(e,t,n,i){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=c.default.currentProject.guid;e=e||t+"-"+r.default.hashCode(r.default.GUID()),s().each(n.answers,(function(e){e._id=r.default.GUID()}));const l={type:t,taskId:e,source:n};let d;if(l.type!==m.ZP.FILL_IN_THE_BLANKS&&l.type!==m.ZP.ECORNELL_FIB||(l.source.tokens=f.ZP.tokenize(l.source.text),await Y(l)),i.toLibrary){var u=v.Z.processForLibrary(l.source);d=await h.sE({libraryId:i.libraryId,projectId:o,type:t,source:u,parameters:i.parameters})}return J(l,i,d),a.doNotCreateFile||(await b.ZP.updateAssessmentContent(l),B()),l},D.edit=async function(e,t,n){const i=c.default.currentProject.guid;let a;const o=await D.fetchDraft();let l;if(s().each(t.answers,(function(e){e._id||(e._id=r.default.GUID())})),a=s().find(o,{taskId:e}),a.source=t,a.type!==m.ZP.FILL_IN_THE_BLANKS&&a.type!==m.ZP.ECORNELL_FIB||(a.source.tokens=f.ZP.tokenize(a.source.text),await Y(a)),n.toLibrary){var d=v.Z.processForLibrary(a.source);l=n.linkedId?await h.sE({assessmentId:n.linkedId,libraryId:n.libraryId,projectId:i,type:a.type,source:d,parameters:n.parameters}):await h.sE({libraryId:n.libraryId,projectId:i,type:a.type,source:d,parameters:n.parameters})}return J(a,n,l),await b.ZP.updateAssessmentContent(a),B(),a},D.disconnect=function(e){return D.fetchDraft().then((function(t){const n=s().find(t,{taskId:e});return delete n.linkedId,delete n.libraryId,delete n.version,b.ZP.updateAssessmentContent(n)}))},D.remove=function(e){return e=s().isArray(e)?e:[e],b.ZP.removeAssessments(e).then(B)},D.reset=async function(e,t){if(!c.default.currentProject.isAdmin||c.default.currentProject.eduStartedAssignmentInfo)return void a.Z.error("Not allowed.");return(0,k.PT)().then((function(n){const i=s().find(n,{taskId:e});if(i)return i.points=0,i.results=[],t||(i.usedAttempts=0),(0,k.H_)(i)})).then((function(){B()}))},D.resetAll=function(){const e=c.default.currentProject;e.isAdmin&&!e.eduStartedAssignmentInfo?((0,k.Er)(),s().each(M,(e=>{e.resetAnswers=(new Date).getTime()})),B()):a.Z.error("Not allowed.")},D.modify=function(e){return p.Z.removeResult(e).then((function(){R=null,B()}))},D.applyAssessmentGrade=async function(e){await p.Z.applyGrade(e),R=null,B()},D.validateMath=function(e,t,n){var i;if(c.default.currentProject.eduStartedAssignmentInfo){var a=c.default.currentProject.guides.assessments;i=Promise.resolve(a)}else i=D.fetchDraft();return i.then((function(i){var a=s().find(i,{taskId:e});if(a)return D.compileMath([{question:a.source.question,answers:t.answers}]).then((function(e){a.source.instructions=e[0].questionText,a.result||(a.result={result:{}}),a.result.result.state="",H(a,n)}))}))};function Q(e,t){return s().isEmpty(t)||s().isEmpty(e)?{}:X(e,s().keyBy(t),{})}function X(e,t,n){return!e||s().isEmpty(e.children)||e.children.forEach((function(e){var i=e.pageId;i&&e.id in t&&(n[i]=!0),X(e,t,n)})),n}D.saveState=async function(e,t){if(c.default.currentProject.isUserAssignee)return c.default.currentProject.eduStartedAssignmentInfo?p.Z.saveState(e,t).then((async function(){const n=R?await r.default.promise.getState(R):null;if(R&&n===r.default.promise.STATES.FULFILLED){const n=s().find(F,{taskId:e});if(!n)return void F.push(((e,t)=>({taskId:e,result:{points:0,state:t,usedAttempts:0,answerState:"fail"}}))(e,t));n.result.state=t}else R=null})):(0,k.PT)().then((function(n){let i=s().find(n,{taskId:e});return i?(i.points=0,i.state=t):i={taskId:e,points:0,state:t||void 0,results:[]},(0,k.H_)(i)}))},D.compileMath=function(e){return p.Z.compileMath(e)},D.getDraftedAndNoAnsweredAssessments=function(){const e=D.getCurrentUnitAssessments();return D.fetchGuideState().then((function(t){const n=s().clone(e),i=s().clone(e);return t.forEach((function(e){const t=e.type===m.ZP.GRADE_BOOK;(e.type===m.ZP.JUPYTER_NOTEBOOK||t)&&(delete n[e.id],delete i[e.id]);const s=e.result;s&&(s.state||s.result)&&delete i[e.id],s&&!s.result&&s.state||delete n[e.id]})),{drafted:n,notAnswered:i}}))},D.getSectionsForAssessments=function(e){var t=c.default.currentProject,n=t.guides;if(!n)return[];var i=Q(n.bookStructure,t.bookAssignmentPages);return n.metadata.sections.filter((function(n){return(!t.isBook||n.id in i)&&s().some(n.assessmentIds,(function(t){return t in e}))}))},D.getCurrentUnitAssessments=function(){var e=c.default.currentProject,t=e.guides;if(!t)return{};var n={};if(s().isEmpty(t.bookStructure)||s().isEmpty(e.bookAssignmentPages))return t.assessments.forEach((function(e){n[e.id]=!0})),n;var i=Q(t.bookStructure,e.bookAssignmentPages);return t.metadata.sections.forEach((function(e){e.id in i&&e.assessmentIds&&e.assessmentIds.forEach((function(e){n[e]=!0}))})),n},D.hasDraftedNotAnsweredAssessments=e=>D.getDraftedAndNoAnsweredAssessments().then((function(t){if(s().isEmpty(t.drafted)&&s().isEmpty(t.notAnswered))return!1;if(!e)return!0;const n=D.getSectionsForAssessments(t.drafted),i=D.getSectionsForAssessments(t.notAnswered),a=n.some((t=>t.id===e)),o=i.some((t=>t.id===e));return a||o})),D.getAssessmentsUsageForProject=e=>_.ZP.getMetadata().then((function(t){const n=t.getSections();return Promise.all(s().map(n,"contentModel")).then((function(t){return s()(e).map((function(e){let i=null;return s().forEach(t,(function(t,s){const a=new RegExp("\\|assessment\\}\\("+e.taskId+'\\)|data-codio-assessment-output="'+e.taskId+'"'),o=t.findNextMatch(a,{lineNumber:0,column:0},!0);if(o)return i={taskId:e.taskId,section:{index:s,fileName:n[s].contentPath,title:n[s].title,pos:{lineNumber:o.range.startLineNumber,column:o.range.startColumn}}},!1})),i})).compact().value()}))})),D.getAssessmentLibraries=()=>L?Promise.resolve(L):h.d9().then((function(e){return s().each(e,(function(e){const t=s().some(e.permissions,(e=>e.id===c.default.currentUser.getAccountUid()&&"WRITE"===e.access));e.readOnly=!t})),L=s().groupBy(e,(e=>e.certified?"certified":"my")),L.my=L.my||[],L.certified=L.certified||[],L})).catch((e=>e&&a.Z.error(e.message))),function(e){const t=[];s().each(["item:created:#path","item:moved:#path:#newPath","item:deleted:#path","file:change:#path"],(function(n){t.push(o.Z.subscribe(n,e))}))}(s().throttle(function(e){const{path:t,newPath:n=""}=e,i=s().startsWith(t,g.Nc)||s().startsWith(n,g.Nc);c.default.currentProject.exists(t)||b.ZP.fileRemoved(t),i&&B()}.bind(null),500)),o.Z.subscribe("project:close",(function(){b.ZP.filesRemoved()})),o.Z.subscribe("guides:assessments:redraw",(function(){R=null,B()})),o.Z.subscribe("project:close",(function(){M={},R=null}));const $=D},58269:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>bs,My:()=>ds});var i={};n.r(i),n.d(i,{afterRender:()=>Et,bindEvents:()=>Ft,dropFile:()=>Ut});var s={};n.r(s),n.d(s,{afterRender:()=>qt,bindEvents:()=>Gt});var a={};n.r(a),n.d(a,{afterRender:()=>Wt,bindEvents:()=>Vt});var o={};n.r(o),n.d(o,{afterRender:()=>Yt,bindEvents:()=>en});var r={};n.r(r),n.d(r,{afterRender:()=>sn});var c={};n.r(c),n.d(c,{afterRender:()=>hn,bindEvents:()=>mn,dropFile:()=>gn,processSourceBeforeSubmit:()=>bn});var l={};n.r(l),n.d(l,{bindEvents:()=>vn,dropFile:()=>yn});var d={};n.r(d),n.d(d,{bindEvents:()=>wn});var u={};n.r(u),n.d(u,{bindEvents:()=>_n});var h={};n.r(h),n.d(h,{bindEvents:()=>In});var p={};n.r(p),n.d(p,{afterRender:()=>qn,bindEvents:()=>Un,dropFile:()=>Hn});var f={};n.r(f),n.d(f,{afterRender:()=>$n,bindEvents:()=>Xn,dropFile:()=>ei});var m=n(96486),g=n.n(m),b=n(52308),v=n.n(b),y=n(6989),w=n(177),_=n.n(w),k=n(3717),P=n.n(k),C=n(49721),x=n(93443),E=n(19575),S=n(97137),I=n(34391),A=n(54565),T=n(89506),j=n(87167),Z=n(28893),O=n(86179),N=n(76900),D=n(95638),M=n(22346),R=n(85886),L=n(68058).I_,F=x.Z.create(n(10742));n(39197),n(25818),n(44941),n(39925);var B=null,U=null,q=[],H=10,G={},W=null,z=null,V=[];let K=!0,J=[];function Y(e){e.find(".js-tag.js-typeahead").typeahead({highlights:!0},{source:W.ttAdapter(),displayKey:"val"}),e.find(".js-value.js-typeahead").typeahead({highlights:!0},{source:z.ttAdapter(),displayKey:"val"})}function Q(){var e=U.find("#library-filter").val(),t=v()(this).closest(".tag-value-controls").find(".js-tag.js-typeahead.tt-input").val(),n=G[e][t]||[],i=g().map(n,(function(e){return{val:e}}));z.clear(),z.add(i)}function X(){var e=O.ZP.renderSaveSearchDlgContent(),t=U.find("#item-name"),n=V,i=new I.Z({title:"Save Search",content:e,buttons:I.Z.MB_OKCANCEL,doNotCloseOpened:!0,focusOn:U.find("#search-name").focus(),onShow:function(){var e=this;t.on("keyup",(function(t){!t||13!==t.keyCode||t.metaKey||t.ctrlKey||e.close(I.Z.IDOK)}))},onClose:function(e){if(e===I.Z.IDOK){var t=i.content().find("#search-name"),s=v().trim(t.val());if(g().isEmpty(s))return E.default.addErrorToInput(t,"Name is required"),!1;t.off("keyup");var a=C.default.currentUser.get("userSettings"),o=g().cloneDeep(a.get("assessments")||{});o.searches=o.searches||[],o.searches=g().slice(o.searches,0,9),o.searches.unshift({name:s,search:n}),a.set("assessments",o),C.default.currentUser.saveSection("userSettings",(function(){S.Z.success("Search saved successfully."),ne(o.searches)}))}}})}function $(e){e.preventDefault();var t=v()(this).closest(".favorites-item-container").data("index");ee(C.default.currentUser.get("userSettings").get("assessments").searches[t].search)}function ee(e,t){let n=U.find(".tag-value-controls");if(n.length!==e.length){const t=n.length>e.length?oe:se;let i=Math.abs(n.length-e.length);for(;i>0;)t(),i--}n=U.find(".tag-value-controls");for(let t=0;t<e.length;t++){const i=e[t],s=n.eq(t);s.find(".js-tag").typeahead("val",i.name),s.find(".js-value").typeahead("val",i.value)}he(t)}function te(e){e.preventDefault();var t=v()(this).closest(".favorites-item-container").data("index"),n=C.default.currentUser.get("userSettings"),i=g().cloneDeep(n.get("assessments")||{});i.searches=i.searches||[],i.searches.splice(t,1),n.set("assessments",i),C.default.currentUser.saveSection("userSettings",(function(){S.Z.success("Search removed successfully."),ne(i.searches)}))}function ne(e){var t=U.find(".favorites .dropdown-menu"),n=O.ZP.renderFavoritesDdItems(e);t.empty().append(n)}function ie(e){e.preventDefault(),se()}function se(){var e=U.find(".search.tags");e.find(".tag-value-controls:first").find(".add-tag").empty().removeClass("add-tag").addClass("remove-tag").append('<i class="ss-icon red">delete</i>');var t=O.ZP.renderEmptyTagValueControls();e.prepend(t),Y(t)}function ae(e){e.preventDefault(),oe(v()(this).closest(".tag-value-controls")),he()}function oe(e){(e=e||U.find(".tag-value-controls:last")).find(".js-typeahead").typeahead("destroy"),e.remove()}function re(e){e.preventDefault(),L.set("last-used-library-id",v()(this).val()),ue()}function ce(e){e.preventDefault(),function(e){return T.zh(e)}(v()(this).closest(".assessment-item").data("id")).then((function(e){B.close(),F.editAssessment({assessment:M.Z.convertLibAssessment(e)})})).catch((function(e){e&&S.Z.error(e.message)}))}function le(e){e.preventDefault();var t=v()(this);t.closest(".library-assessments-list").find(".assessment-item").removeClass("active"),t.addClass("active")}function de(e){e.preventDefault(),e.stopPropagation();var t=v()(this),n=v()(U.find(".tag-value-controls")[0]);n.find(".js-tag.js-typeahead.tt-input").val(t.data("key")),n.find(".js-value.js-typeahead.tt-input").val(t.data("value")),he()}function ue(){!function(){P().start();(async function(e){if(!e)return[];if(G[e])return G[e];return T.me({libraryId:e}).then((function(t){return G[e]=t,t}))})(U.find("#library-filter").val()).then((e=>{const t=g().map(y.ZP.PROTECTED_TAG_NAMES,(e=>({val:e}))),n=g().keys(e),i=g().map(n,(e=>({val:e})));W.clear(),W.add(i.concat(t))})).catch((e=>e&&S.Z.error(e.message))).finally((()=>P().done()))}(),fe(),he()}function he(e){P().start();var t,n,i=(t=[],U.find(".tag-value-controls").each((function(){var e=v()(this),n=e.find(".js-tag.js-typeahead.tt-input").val();if(""!==n){var i=e.find(".js-value.js-typeahead.tt-input").val();g().isEmpty(i)||t.push({name:n,value:i})}})),t);return!e&&(n=!g().isEmpty(i),function(e,t){e.removeClass(R.xu),e.attr(R.xu,!t),t||e.addClass(R.xu)}(U.find(".favorites-save-btn"),n)),function(e){V=e;var t=U.find("#library-filter").val();if(!t)return Promise.resolve([]);return T.oM({libraryId:t,search:e}).then((function(e){return g().map(e.assessments,(function(e){return e.typeName=y.ZP.ASSESSMENT_NAME_BY_TYPE[e.type],e}))}))}(i).then((function(e){var t,n;U&&(q=g().filter(e,(e=>J&&!g().includes(J,e.type))),pe(!0),e.length?(t=U.find(".paginate-container"),n=me(),fe(),q.length>H&&t.pagination({currentPage:n.page,items:q.length,itemsOnPage:H,displayedPages:3,prevText:"directleft",nextText:"directright",onPageClick:function(){pe()}})):fe())})).catch((function(e){S.Z.error(e.message)})).finally((function(){P().done()}))}function pe(e){var t=me(e),n=(t.page-1)*t.perPage;!function(e){x.Z.off(U,"click",".select-assessment-btn"),x.Z.off(U,"click",".assessment-item"),x.Z.off(U,"click",".assessment-item-tag");var t=g()(V).map((function(e){return e.name+": "+e.value})).values().join("; "),n=O.ZP.renderAssessmentLibraryItemsList(e,t,K);U.find(".assessments-list-container .list").empty().append(n),x.Z.on(U,"click",".select-assessment-btn",ce),x.Z.on(U,"click",".assessment-item",le),x.Z.on(U,"click",".assessment-item-tag",de)}(q.slice(n,n+t.perPage))}function fe(){var e=U.find(".paginate-container");e.data("pagination")&&(e.pagination("destroy"),e.data("pagination",null))}function me(e){if(!U)return{};var t=1,n=U.find(".paginate-container");return!e&&n.data("pagination")&&(t=n.pagination("getCurrentPage")),{perPage:H,page:t}}function ge(){B=null,V=[],G={},z.clear(),z=null,W.clear(),W=null,U.find("#library-filter")[0].selectize.destroy(),U.find(".js-typeahead").typeahead("destroy"),U=null,x.Z.off(U)}function be(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{showApplySearch:n,preview:i,edit:s,filterOutTypes:a}=t;K=!n&&!i,J=a||[];var o=C.default.currentUser.get("userSettings").get("assessments")||{};U=O.ZP.renderLibraryBrowserDlgContent(e,o.searches||[]);var r=g().map(e.my.concat(e.certified),"id");const c=i&&i.libraryId?i.libraryId:null,l=s&&s.libraryId?s.libraryId:null,d=L.get("last-used-library-id"),u=l||c||d,h=g().includes(r,u);if(u&&h?U.find("#library-filter").val(u):h||U.find(".library-no-access-random").removeClass("hide"),function(e){(W=new Bloodhound({name:"tags",local:[],datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.val)},queryTokenizer:Bloodhound.tokenizers.whitespace})).initialize(),(z=new Bloodhound({name:"values",local:[],datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.val)},queryTokenizer:Bloodhound.tokenizers.whitespace})).initialize();const t=U.find("#library-filter").selectize({onInitialize:function(){this.$control_input.attr("aria-labelledby","library-filter"),this.$control_input.attr("readonly",!0)}});e&&t[0].selectize.disable(),Y(U)}(i),i){const e=U.find(".filters");e.find(":input").prop("readonly",!0),e.find("button").prop(R.xu,!0)}i&&i.search&&ee(i.search,!0),s&&s.search&&ee(s.search,!0),ue(),!i&&(x.Z.on(U,"click",".add-tag",ie),x.Z.on(U,"click",".remove-tag",ae),x.Z.on(U,"focus",".js-value.js-typeahead",Q),x.Z.on(U,"change input typeahead:selected",".js-typeahead",(()=>he())),x.Z.on(U,"click",".favorites-save-btn",X),x.Z.on(U,"click",".favorites-item",$),x.Z.on(U,"click",".icon-delete-search",te),x.Z.on(U,"change","#library-filter",re));const p=n?[{title:"Apply search",type:1,onClick:function(){return 0===V.length?(S.Z.info("Search should contain at least one tag."),!1):0===q.length?(S.Z.info("Search should return at least one assessment."),!1):((()=>{const e=U.find("#library-filter").val();F.applyAssessmentLibrarySearch({searchData:{libraryId:e,search:V}})})(),B.close())}}]:I.Z.MB_CANCEL,f=i?"Random assessment search preview":"Choose an Assessment to Add";B=new I.Z({title:f,buttons:p,content:U,width:1200,height:500,onShow:function(){he(!!i)},onClose:function(){ge()}})}x.Z.subscribe("guides:library:preview",((e,t)=>{D.ZP.getAssessmentLibraries().then((e=>{be(e,{preview:t})}))}));const ve={openDialog:be};const ye={chooseLibrary:function(e){return new Promise(((t,n)=>{var i=new I.Z({title:"Select Library",icon:"books",content:O.ZP.renderSelectLibraryDlgContent(e),buttons:[{title:"Select",type:1,onClick:function(){return i.close(I.Z.IDOK)}},{title:"Cancel",onClick:function(){return i.close(I.Z.IDCANCEL)}}],onClose:function(e){e===I.Z.IDOK?t(i.content().find("#library").val()):n(new Error("Select library was canceled"))}})}))}};const we={show:function(e,t){if(e.layout&&e.isCloseAll)return Promise.resolve();var n={isPreviousLayoutSelected:!e.layout,layout:t.layout},i={isCloseAll:e.isCloseAll,opened:t.opened};return new Promise(((e,t)=>{I.Z.showConfirm({title:"Section settings confirmation",content:O.ZP.renderSectionSettingsConfirmDlgContent(n,i),buttons:I.Z.MB_OKCANCEL,width:600,onClose:function(n){n?e():t(new Error("section settings confirm cancelled"))}})}))}};var _e,ke,Pe,Ce,xe=n(70243);n(57568);var Ee=[],Se=!1,Ie=[".settings"];function Ae(e,t){var n={core:{check_callback:!1,multiple:e,themes:{dots:!1,responsive:!1},force_text:!0},types:{root:{icon:"ss-icon ss-briefcase"},dir:{icon:"ss-icon ss-folder"},file:{icon:"ss-icon ss-textfile"},truncated:{icon:"ss-icon ss-alert"}},sort:Ne,plugins:["types","sort"]};return e?(g().isEmpty(t)||(t=g()(t).keyBy((function(e){return e})).mapValues((function(){return!0})).value()),n.core.data=xe.Z.getTreeLevelByPath(C.default.currentProject,"",null,t,!0),Te(n.core.data),n.plugins.push("checkbox"),n.checkbox={cascade_to_disabled:!1}):(n.plugins.push("conditionalselect","noclose"),n.conditionalselect=function(){return!1}),n}function Te(e,t){var n="";"root"!==e.type&&(n=t?t+"/"+e.text:e.text),g().includes(Ie,n)&&(e.state.disabled=!0),g().each(e.children,(function(e){Te(e,n)}))}function je(e){return!(!e.state||!e.state.selected)||!!e.children&&g().some(e.children,je)}function Ze(e){return g()(e).map((function(e){return je(e)?(delete e.state,e.children=Ze(e.children),e):null})).compact().value()}function Oe(e,t){return e=e?e+"/":"",g()(t).map((function(t){var n=e+t.text;return g().isEmpty(t.children)?"file"!==t.type?null:n:Oe(n,t.children)})).flattenDeep().compact().value()}function Ne(e,t){var n=this.get_node(e),i=this.get_node(t),s=["root","dir","file"];return n.type!==i.type?s.indexOf(n.type)>s.indexOf(i.type)?1:-1:n.text.toLowerCase()>i.text.toLowerCase()?1:-1}function De(e,t){t.settings.core.data=Ze(g().cloneDeep(e.get_json())),t.refresh(!0),g().delay((function(){var e=t.get_json();g().isEmpty(e)||(Ee=Oe("",g().cloneDeep(e)[0].children)||[])}),100)}v().jstree.plugins.noclose=function(){this.close_node=v().noop};const Me={init:function(e,t){if(!Se){if(t){var n=O.ZP.renderAssessmentFilesList(Ee);e.empty().append(n)}var i=Ae(!0,Ee),s=Ae(!1);(Pe=e.find(".selected-content")).jstree(s),Ce=v().jstree.reference(Pe),Pe.on("loaded.jstree refresh.jstree",(function(){Ce.open_all()})),(_e=e.find(".project-files")).jstree(i),ke=v().jstree.reference(_e),_e.on("loaded.jstree",De.bind(null,ke,Ce)).on("select_node.jstree deselect_node.jstree",(function(){g().delay(De.bind(null,ke,Ce),50)})),Se=!0}},setInitialPaths:function(e){Ee=e},clean:function(){_e&&_e.off("select_node.jstree deselect_node.jstree"),ke&&ke.destroy(),Ce&&Ce.destroy(),ke=null,Ce=null,_e=null,Pe=null,Ee=[],Se=!1},getSelectedPaths:function(){return Ee}};var Re=n(50352),Le=n(73007),Fe=n.n(Le),Be=n(19093),Ue=n.n(Be),qe=n(68156),He=n.n(qe);function Ge(){He().apply(this,arguments)}function We(){Ue().apply(this,arguments)}n(44941),(0,E.ED)(Ge,He()),Ge.prototype.getLocalResults=function(e,t){t(this.list)},Ge.prototype.setList=function(e){this.list=e},(0,E.ED)(We,Ue()),We.prototype.getSearchProps=function(){return["name","type"]},We.prototype.getSearchTokens=function(){return{}},We.prototype.doName=function(e,t){return this.compare(e.toLowerCase(),t.source.name.toLowerCase())},We.prototype.doType=function(e,t){return this.compare(e.toLowerCase(),t.type.toLowerCase())};const ze=function(e){const t=new(Fe()),n=new Ge([new We]);return n.setList(e),t.addProvider(n),t.setList=function(e){this.clean(),n.setList(e)},t};var Ve=n(15061),Ke=n(21384),Je=n(88009);const Ye={};class Qe{constructor(e,t,n){this.elementId=e,this.container=t,this.value=n,this.counter=10,this.initWithFallback()}initWithFallback(){g().defer((()=>{null===document.getElementById(this.elementId)?this.counter>=0&&(g().delay((()=>this.initWithFallback()),100),this.counter=this.counter-1):this.init()}))}cleanup(){Ye[this.elementId]&&(Ye[this.elementId].editor.close(),Ye[this.elementId].observer.disconnect(),Ye[this.elementId].changeCallback.dispose(),Ye[this.elementId].spellchecker.cleanup(),Ye[this.elementId].tempModel.dispose(),delete Ye[this.elementId])}destroy(){this.cleanup(),this.panel&&this.panel.clear()}init(){this.cleanup();const e=this.container.find(".assessments-ribbon-editor"),t=new j.yO(this.value,"markdown"),n=new j.ZP(e,t,{language:"markdown",lineNumbers:"on",automaticLayout:!0,ariaLabel:"",quickSuggestions:{other:!1,comments:!1,strings:!1},minimap:{enabled:!1},parameterHints:{enabled:!1},wordWrap:"on",suggestOnTriggerCharacters:!1,acceptSuggestionOnEnter:"off",tabCompletion:"off",wordBasedSuggestions:!1}),i=new j.yV(n);i.init();try{const s=g().throttle((()=>n.layout()),300),a=new ResizeObserver(s);a.observe(e.find(".monaco-editor-container")[0]);const o=this.container.closest(".assessment-editor"),r=this.container.find(".guides-editor-with-preview-container-textarea"),c=g().throttle((()=>{const e=n.getContent();r.val(e),o.data("changed",!0)}),30),l=n.onDidChangeModelContent(c);Ye[this.elementId]={editor:n,observer:a,changeCallback:l,spellchecker:i,tempModel:t}}catch(e){}const s=this.container.find(".assessments-ribbon-panel");n.setModel(t),this.editor=n,this.panel=new Je.Z(s,t,n,{showActions:!1,showPreview:!1,showBlocks:!1,showTutor:!1,showFile:!1,showMedia:!1,showGenerateContent:!1,showUpload:!1})}}var Xe=n(83638),$e=n(11359);const et=_().compile($e),tt=e=>{const t=e.find(".item-div");e.find(".move").prop(R.xu,!1),t.first().find(".up-btn").prop(R.xu,!0),t.last().find(".down-btn").prop(R.xu,!0)};function nt(e,t){e.preventDefault();const n=v()(this);I.Z.showConfirm({title:"Remove Answer?",description:"Are you sure you wish to remove this Answer?",onClose:function(e){if(!e)return;n.closest(".item-div").remove();const i=n.closest(".answers-list");tt(i),t&&t()}})}function it(e){const t=v()(this).closest(".form-fieldset").find(".command-helpBlock");g().includes(e.target.value,".guides/secure")?t.removeClass("hide"):t.addClass("hide")}const st=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=e.find("#assessment-type").val();let s=[];const a={},o=e.find(".navigation-item"),r=g().map(o,(async o=>{const r=v()(o),c=r.find("a").data("tab"),l=await M.Z.getData(i,e,c),d=t?[].concat(l.errors||[],l.libErrors||[]):l.errors;!g().isEmpty(d)&&n?(r.addClass("error"),s=s.concat(g().map(d,(function(e){return e.message})))):(n&&r.removeClass("error"),g().merge(a,l.data))}));return await Promise.all(r),{errorMsgArr:s,source:a}};function at(e){const t=e.find("#allow_partial_points").is(":checked"),n=e.find(".assessments-grade-rubrics--form");t?n.removeClass("hide"):n.addClass("hide")}function ot(e,t,n){e.find(".assessments-grade-rubrics--list").append(v()(et({id:E.default.GUID(),weight:t||1,message:n||"Message",editWeight:!0}))),e.data("changed",!0)}function rt(e){Xe.Z.openDialog((t=>{g().map(t,(t=>{ot(e,t.weight,t.message)}))}))}function ct(e,t){I.Z.showConfirm({description:"Do you want to delete grading rubric?",onClose:n=>(n&&(v()(t.currentTarget).closest(".assessments-grade-rubrics--item").remove(),e.data("changed",!0)),!0)})}const lt=e=>{const t=e.find("#set_number_of_attempts").is(":checked"),n=e.find("#max_attempts_count");t?n.removeClass("hide"):n.addClass("hide")},dt=e=>{x.Z.on(e,"change","#allow_partial_points",at.bind(null,e)),x.Z.on(e,"click",".assessments-grade-rubrics--button",(()=>ot(e))),x.Z.on(e,"click",".assessments-grade-rubrics--options",rt.bind(null,e)),x.Z.on(e,"click",".assessments-grade-rubrics--itemClose",ct.bind(null,e))};var ut=n(93702),ht=n(61478);const pt="compile",ft="run",mt=[{ext:["java"],template:{[ft]:g().template("java -cp ${path} ${fileName}"),[pt]:g().template("javac ${filePath}")}},{ext:["py"],template:{[ft]:g().template("python ${filePath}")}},{ext:["c"],template:{[ft]:g().template("./${fileName}"),[pt]:g().template("gcc ${filePath} -o ${fileName} -lm")}},{ext:["cpp"],template:{[ft]:g().template("./${fileName}"),[pt]:g().template("g++ -o ${fileName} ${filePath}")}},{ext:["rb"],template:{[ft]:g().template("ruby ${filePath}")}},{ext:["sh"],template:{[ft]:g().template("bash ${filePath}")}}],gt=(e,t,n)=>{const i="".concat(e).concat(n);if(e)return i;const s=E.default.path.parse(n),a=mt.find((e=>e.ext.includes(s.extension)));if(!a||a&&!a.template[t])return i;const o=E.default.path.getFileName(s.name);return((e,t,n,i,s)=>e({path:n||"./",filePath:t,fileName:i,ext:s}))(a.template[t],n,s.dir,o,s.extension)};var bt=n(72129),vt=n(67744);const yt=bt.default.containerManager;const wt={generate:function(e,t){const n=C.default.currentProject.guid,i={CODIO_TEST_SEQUENCE:JSON.stringify({command:t.command,preExecuteCommand:t.preExecuteCommand,arguments:e.find(".generate_arguments").val(),input:e.find(".generate_input").val(),timeout:t.options&&t.options.timeout})};return yt.run(n,"/usr/share/codio/assessments/generator.py",{env:i}).then((e=>{const{code:t,stdout:n,stderr:i}=e;let s;try{s=JSON.parse(n)}catch(e){s=n}if(0!==t){let e=i||s;throw s.error&&(e=s.error),Error(e)}if(0!==s.returnCode&&(0,vt.q4)(s.stderr))throw Error((0,vt.a4)(s.stderr));return s.stdout}))}};var _t=n(80470);const kt=_().compile(_t),Pt=_().compile('<div class="test-case-check-state">\n    {{#if passed}}\n    <span class="test-case-check-state-pass">\n        <span class="iconify-inline test-case-check-state-icon" title="Passed" data-icon="@codio:mdi:check-bold"></span>\n        Test passed\n    </span>\n    {{else}}\n    <span class="test-case-check-state-fail">\n        <span class="iconify-inline test-case-check-state-icon" title="Failed" data-icon="@codio:mdi:close-thick"></span>\n        Test failed\n    </span>\n    {{/if}}\n</div>\n'),Ct={failed:"fail",passed:"pass",progress:"progress"},xt=e=>{if(!(e=>{const t=e.find("#linked-id").val(),n=e.find("#id");return!(n.length&&n.val())&&t})(e))return;e.find(".test-case-action").attr("disabled",!0).attr("title","You have to add the assessment from the library first, to generate/check answers")},Et=(e,t)=>{const n=e.find(".assessment-code-output-compare-form");xt(n),((e,t)=>{const n=e.find(".item-div");g().each(t.source.sequence,((e,t)=>{const i=v()(n.get(t));i.find(".input-textarea").val(e.input),i.find(".output-textarea").val(e.output),i.find(".feedback-textarea").val(e.feedback)}))})(e,t),Bt(e)};async function St(e){const t=async t=>{const{source:n}=await st(e,!1),i=t.find(".test-case-generateOutputBtn");i.disableButton("Running...","loading");const s=t.find(".remove-btn");s.attr("disabled",!0);try{const e=await wt.generate(t,n);e&&t.find(".output-textarea").val(e)}catch({message:e}){S.Z.error(e)}finally{i.enableButton(),s.attr("disabled",!1)}},n=v()(this).closest(".item-div"),i=n.find(".output-textarea");if(""===i.val())return t(n);I.Z.showConfirm({title:"Warning",description:"Output field is not empty. Are you sure you want to overwrite it?",onClose:e=>{e&&(i.val(""),t(n))}})}async function It(e,t){const{source:n}=await st(e,!1),i=v()(this).closest(".test-cases-container");jt(i,t),Ot(i),Tt(t,Ct.progress);const s=e.find(".item-div").index(t),a=g().cloneDeep(n);a.sequence=[n.sequence[s]];const o=t.find(".output-textarea").val(),r=function(e,t){const n=e.find("#assessment-type").val(),i=e.find("#id"),s=i.length?i.val():"".concat(n,"-").concat(E.default.hashCode(E.default.GUID()));return{type:n,taskId:s,source:t}}(e,a);try{const e=await async function(e){const t=C.default.currentProject.guid,{result:n}=await ht.Z.checkByAssessment(t,e,{}),{code:i,stdout:s,stderr:a}=n;let o;try{o=JSON.parse(s)}catch(e){o=s}if(0===i||o.sequence)return o.sequence;{let e=a||o;throw o.error&&(e=o.error),Error(e)}}(r),n=e[0],i=0===n.returnCode&&n.passed,s=i?Ct.passed:Ct.failed,a=0!==n.returnCode?n.stderr:i?"":n.stdout;Tt(t,s),function(e,t,n,i){const s=function(e,t){const n=new diff_match_patch.diff_match_patch,i=n.diff_main(e,t);return n.diff_cleanupSemantic(i),n.diff_prettyHtml(i)}(n,i),a=e.find(".test-case-check-output-container");t?a.hide():a.show(),a.find(".test-case-check-output").empty().append(s)}(t,i,a,o)}catch({message:e}){Tt(t,Ct.failed),S.Z.error(e)}finally{Zt(i,t),Ot(i)}}async function At(e){const{source:t}=await st(e,!1),n=v()(this).closest(".test-cases-container");jt(n),Ot(n,"loading");const i=e.find(".add-item-to-check-btn");i.attr("disabled",!0),e.find(".test-case-check-output-container").hide(),e.find(".test-case-check-state").empty();const s=e.find(".item-div"),a=t.sequence;for(const t of a){const n=a.indexOf(t),i=v()(s.get(n));await It(e,i)}i.attr("disabled",!1),Zt(n),Ot(n)}function Tt(e,t){const n=t===Ct.progress;e.find(".test-case-check-output-container").hide();const i=e.find(".test-case-check-state");if(i.empty(),!n){const e=t===Ct.passed,n=v()(Pt({passed:e}));i.append(n)}}function jt(e,t){const n=t||e;n.find(".remove-btn").attr("disabled",!0);n.find(".test-case-checkBtn").disableButton("Checking...","loading")}function Zt(e,t){const n=t||e,i=e.find(".test-case-checkBtn.loading").length>0;!t&&i||(n.find(".remove-btn").attr("disabled",!1),n.find(".test-case-checkBtn").enableButton())}function Ot(e,t){const n=e.find(".test-case-checkAllBtn");e.find(".test-case-checkBtn.loading").length>0?n.disableButton("Check All",t):n.enableButton()}function Nt(e,t){e&&e.preventDefault();const n=v()(this).closest(".assessment-code-output-compare-form"),i=n.find(".items-list");let s={};t&&(s={arguments:t.arguments,input:t.input,output:t.output});const a=v()(kt({source:{sequence:[s]}}));a.find(".item-index").text(i.find(".item-div").length+1),i.append(a),i.find(".item-div").addClass("collapsed"),a.removeClass("collapsed"),xt(n),Bt(n)}function Dt(e){const t=v()(this).closest(".form-fieldset"),n=e.target.checked?"removeClass":"addClass";t.parent().find(".output-feedback-fieldset")[n]("hide")}function Mt(e,t){const n=v()(this).closest(".item-div");t?n.addClass("collapsed"):n.removeClass("collapsed"),Bt(e)}function Rt(e){const t=v()(this).val().toLowerCase();if(t){const n=e.find(".item-div");n.addClass("hide"),n.filter((function(){return v()(this).find(".item-index").text().toLowerCase()===t})).removeClass("hide collapsed")}else e.find(".item-div").removeClass("hide").addClass("collapsed")}function Lt(e){e.find(".items-list").find(".item-div").each((function(e){v()(this).find(".item-index").text(e+1)})),Bt(e)}const Ft=e=>{x.Z.on(e,"click",".add-item-to-check-btn",Nt),x.Z.on(e,"click",".test-case-generateOutputBtn",(function(){St.call(this,e)})),x.Z.on(e,"click",".test-case-removeBtn",(function(t){nt.call(this,t,(()=>Lt.call(null,e)))})),x.Z.on(e,"click",".test-case-checkBtn",(function(){const t=v()(this).closest(".item-div");It.call(this,e,t)})),x.Z.on(e,"click",".test-case-checkAllBtn",(function(){At.call(this,e)})),x.Z.on(e,"change",".assessment-coc-feedback-toggle .toggle input",Dt),x.Z.on(e,"change","#cmd",it),x.Z.on(e,"click",".test-case-expandBtn",(function(){Mt.call(this,e,!1)})),x.Z.on(e,"click",".test-case-collapseBtn",(function(){Mt.call(this,e,!0)})),x.Z.on(e,"click",".test-case-expandAllBtn",(function(){e.find(".item-div").removeClass("collapsed"),Bt(e)})),x.Z.on(e,"click",".test-case-collapseAllBtn",(function(){e.find(".item-div").addClass("collapsed"),Bt(e)})),x.Z.on(e,"input",".search-bar-input",(function(){Rt.call(this,e)}))},Bt=e=>{const t=e.find(".items-list"),n=t.find(".item-div");1===n.length&&n.removeClass("collapsed");const i=t.find(".item-div.collapsed").length,s=e.find(".test-case-expandAllBtn"),a=e.find(".test-case-collapseAllBtn");n.length&&!i||(s.removeClass("hide"),a.addClass("hide")),0!==n.length&&0===i&&(s.addClass("hide"),a.removeClass("hide"))},Ut=(e,t,n)=>{const i=v()(n.target);if("cmd"===i.attr("id")||"pre_cmd"===i.attr("id")){const e="cmd"===i.attr("id")?ft:pt,n=gt(i.val(),e,t);i.val(n),i.trigger("change")}},qt=(e,t)=>{((e,t)=>{e.find("#text").val(t.source.text),e.find("#fib-assessments-distractors").val(t.source.distractors||"")})(e,t)},Ht=e=>{const t=e.find("#show_values").is(":checked"),n=e.find(".fib-assessments-distractors");t?n.removeClass("hide"):n.addClass("hide")},Gt=e=>{x.Z.on(e,"change","#show_values",Ht.bind(null,e))},Wt=(e,t)=>{((e,t)=>{e.find("#text").val(t.source.text),e.find("#fib-assessments-distractors").val(t.source.distractors||"")})(e,t)},zt=e=>{const t=e.find("#show_values").is(":checked"),n=e.find(".fib-assessments-distractors");t?n.removeClass("hide"):n.addClass("hide")},Vt=e=>{x.Z.on(e,"change","#show_values",zt.bind(null,e))};var Kt=n(99393);const Jt=_().compile(Kt),Yt=(e,t)=>{((e,t)=>{const n=e.find(".item-div");g().each(t.source.answers,(function(e,t){v()(n.get(t)).find(".answer-textarea").val(e.answer)}))})(e,t),tt(e.find(".answers-list"))};function Qt(e){e&&e.preventDefault();const t=v()(this).closest(".assessment-multiple-choice-form"),n=t.find(".answers-list"),i=t.find("#multiple_response").is(":checked"),s=t.find("#is_randomized").is(":checked"),a=v()(Jt({source:{answers:[{}],multipleResponse:i,isRandomized:s}}));n.append(a),tt(n)}function Xt(){const e=v()(this),t=e.closest("form").find(".answers-list");e.is(":checked")?(t.find(".radiobutton").addClass("toggle").removeClass("radiobutton"),t.find('input[name="correct"]').attr("type","checkbox")):(t.find(".toggle").addClass("radiobutton").removeClass("toggle"),t.find('input[name="correct"]').attr("type","radio"))}function $t(e){e.preventDefault();const t=v()(this),n=t.closest(".item-div");t.hasClass("up-btn")?n.prev().insertAfter(n):n.next().insertBefore(n),tt(t.closest(".answers-list"))}const en=e=>{x.Z.on(e,"click",".add-answer-btn",Qt),x.Z.on(e,"click",".remove-btn",nt),x.Z.on(e,"change","#multiple_response",Xt),x.Z.on(e,"click",".action-btn.move",$t)};var tn=n(13667),nn=n(88228);const sn=(e,t)=>{const n=e.find(".assessment-parsons-puzzle-form #execution_form");n.data("onFirstFormPaint",[()=>{const e=tn.build("#uiContainer",nn.ZP.getParsonsSettingsFromAssessment(t));n.data("parsonsUI",e)}])};var an=n(42052);const on=_().compile('<div class="control-group">\n    <label class="control-label hint hint-top">\n        <a href="javascript:void(0)" class="remove-btn" title="Remove test case" aria-label="Remove test case">\n            <span class="iconify-inline" data-icon="@codio:mdi:trash-can-outline"></span>\n        </a>\n        Test case\n    </label>\n    <div class="controls">\n        <div class="test-case-info">\n            <div><strong>Path:</strong> <span class="test-case-path">{{casePath}}</span></div>\n            {{#if java}}\n            <div><strong>Class name:</strong> <span class="test-case-class">{{className}}</span></div>\n            {{/if}}\n        </div>\n        <div class="helpBlock command-helpBlock {{#notIncludes casePath ".guides/secure"}}hide{{/notIncludes}}">\n            Script will be executed isolated from user container&nbsp;\n            <a href=\'https://docs.codio.com/instructors/authoring/assessments/auto-grade-scripts.html#secure-scripts\' target=\'_blank\'>click here</a>\n        </div>\n    </div>\n</div>\n'),rn={java:["java"],ruby:["rb"],python:["py"],javascript:["js"]};let cn={};const ln=(e,t,n)=>{n.find(".test-sub-type").addClass("hide"),n.find("."+e+"-"+t+"-sub-type").removeClass("hide"),n.find(".test-cases-field").empty(),"junit"===t||"rspec"===t||"unittest"===t?n.find(".form-fieldset-allow-partial").removeClass("hide"):n.find(".form-fieldset-allow-partial").addClass("hide"),"unittest"===t?(n.find(".form-fieldset-py-executable").removeClass("hide"),n.find(".form-fieldset-py-wd").removeClass("hide"),n.find(".form-fieldset-py-path").removeClass("hide")):(n.find(".form-fieldset-py-executable").addClass("hide"),n.find(".form-fieldset-py-wd").addClass("hide"),n.find(".form-fieldset-py-path").addClass("hide")),cn={}},dn=(e,t,n,i)=>{N.ZP.TEST_SUBTYPES.CUSTOM===e?(n.find(".form-fieldset-subtype-selector").addClass("hide"),n.find(".custom").removeClass("hide"),n.find(".predefined").addClass("hide"),n.find(".form-fieldset-allow-partial").removeClass("hide"),n.find(".form-fieldset-py-executable").addClass("hide"),n.find(".form-fieldset-py-wd").addClass("hide"),n.find(".form-fieldset-py-path").addClass("hide")):(n.find(".form-fieldset-allow-partial").addClass("hide"),n.find(".form-fieldset-subtype-selector").removeClass("hide"),n.find(".custom").addClass("hide"),n.find(".predefined").removeClass("hide"),((e,t,n)=>{const i={ruby:{style:"Rubocop (style)",rspec:"RSpec (tests)"},java:{style:"CheckStyle",junit:"JUnit (tests)"},python:{style:"PyCodeStyle",unittest:"UnitTest"},javascript:{jshint:"JSHint (style)",jslint:"JSLint (style)"}};t.find("#test_subtype").find("option").remove(),g().each(i[e],(function(s,a){const o=v()("<option></option>").attr("value",a).text(i[e][a]);n.advancedTypeConfig&&(n.advancedTypeConfig.subtype===a&&o.attr("selected","selected"),n.advancedTypeConfig.executable&&(t.find("#executable").val(n.advancedTypeConfig.executable),t.find("#pythonwd").val(n.advancedTypeConfig.pythonwd)),n.advancedTypeConfig.jUnitVersion&&t.find("#junit-version").val(n.advancedTypeConfig.jUnitVersion),n.advancedTypeConfig.checkStyleVersion&&t.find("#checkstyle-version").val(n.advancedTypeConfig.checkStyleVersion)),t.find("#test_subtype").append(o)}))})(e,n,i),t=t||n.find("#test_subtype").val(),ln(e,t,n))},un=(e,t,n,i)=>{const s=n.find("#test_subtype").val(),a=t===N.ZP.TEST_SUBTYPES.JAVA&&"junit"===s,o=a?e.filePath:e;cn[o]=!0;const r=v()(on({casePath:o,className:a?e.className:e,java:a}));n.find(".test-cases-field").append(r);const c=n.find("#codeEnvConfig");x.Z.on(r.find(".remove-btn"),"click",(function(e){e.preventDefault(),e.stopPropagation();const t=v()(this).parent().parent();I.Z.showConfirm({title:"Case remove confirmation",description:"Are you sure you want to remove this case?",onClose:e=>{e&&(c.trigger("change"),t.remove(),cn[o]=!1)}})})),i&&(c.val(M.Z.genAdvTestConfig(n)),c.trigger("change"))},hn=(e,t)=>{const n=t.advancedTypeConfig&&t.advancedTypeConfig.subtype;dn(t.advancedType,n,e,t),t.advancedTypeConfig&&t.advancedTypeConfig.files&&g().each(t.advancedTypeConfig.files,(function(n){un(n,t.advancedType,e)}))};function pn(e,t){if(g().isEmpty(t)||!C.default.currentProject.exists(t))return void S.Z.error("File not found: "+t);if(cn[t])return void S.Z.error("File already added: "+t);const n=e.find("#test_type").val();if(!rn[n])return;const i=e.find("#test_type").val(),s=e.find("#test_subtype").val(),a=E.default.path.getFileExtension(t);N.ZP.TEST_SUBTYPES.JAVA!==i||"style"!==s||"xml"!==a?g().includes(rn[n],a)?N.ZP.TEST_SUBTYPES.JAVA===i&&"junit"===s?fn(t).then((function(t){un(t,i,e,!0)})):un(t,i,e,!0):S.Z.error("Incorrect file type, should be: "+rn[n].join(" ")):e.find("#configFile").val(t)}const fn=e=>{let t="";return C.default.currentProject.file(e).then((function(n){return t=n.content,an.Z.parseClassInformation(n.content,e)})).then((function(n){if(g().isEmpty(n.className)){const t="Java class not found in "+e;return S.Z.error(t),Promise.reject(new Error(t))}if(!(g().includes(t,"@Test")||g().includes(t,"@ParameterizedTest")||g().includes(t,"@org.junit.jupiter.api.Test")||g().includes(t,"@org.junit.jupiter.params.ParameterizedTest"))&&!g().includes(t,"extends")){const t="JUnit test not found in "+e;return S.Z.error(t),Promise.reject(new Error(t))}if(g().includes(t,".jupiter.")){!(g().endsWith(n.className,"Test")||g().endsWith(n.className,"Tests"))&&S.Z.info("".concat(n.className," class name do not match against class names ending in Test or Tests. This test may not function correctly."))}const i=g().isEmpty(n.packageName)?n.className:n.packageName+"."+n.className;return{filePath:e,className:i}}))},mn=(e,t)=>{x.Z.on(e,"change","#test_type",(function(n){const i=v()(n.target).val();dn(i,void 0,e,t),N.ZP.TEST_SUBTYPES.CUSTOM===i&&e.find("#command").val("")})),x.Z.on(e,"change","#test_subtype",(function(){const t=e.find("#test_type").val(),n=e.find("#test_subtype").val();ln(t,n,e)})),x.Z.on(e,"click","#test-add-case-btn",(function(){pn(e,v()("#test-add-case").val())})),x.Z.on(e,"change","#command",it)},gn=(e,t,n)=>{const i=v()(n.target);if("command"===i.attr("id")){if("sh"!==E.default.path.getFileExtension(t))i.val("".concat(i.val()).concat(t));else{const e=gt(i.val(),ft,t);i.val(e)}i.trigger("change")}else pn(e,t)},bn=e=>{const t=g().cloneDeep(e),{arePartialPointsAllowed:n,codeEnvConfig:i}=t;if(i){let e=JSON.parse(i);const{subtype:s}=e;e.partialPoints=!1,g().includes(["junit","rspec","unittest"],s)&&(e.partialPoints=n,t.codeEnvConfig=JSON.stringify(e))}return t},vn=e=>{x.Z.on(e,"change","#command",it)},yn=(e,t,n)=>{const i=v()(n.target);if("command"===i.attr("id")){"sh"!==E.default.path.getFileExtension(t)?i.val("".concat(i.val()).concat(t)):i.val(gt(i.val(),ft,t)),i.trigger("change")}},wn=e=>{dt(e)},_n=e=>{dt(e)},kn=x.Z.create(n(10742));let Pn=null,Cn=null;function xn(){Pn&&(x.Z.unsubscribe(Pn),Pn=null)}const En=(e,t,n)=>{let{searchData:i}=n;xn();const s=Cn.my.concat(Cn.certified),a=g().find(s,{id:i.libraryId}),o=a?a.name:"",r={...i,libraryName:o,permissions:!0},c=(0,O.F8)(r);e.find("#execution_form").replaceWith(c),kn.assessmentEditorValidate()},Sn=e=>{D.ZP.getAssessmentLibraries().then((t=>{Cn=t,xn(),Pn=x.Z.subscribe("guides:library:apply_search",En.bind(null,e));const n=v()("#execution_form"),i=[];n.find(".tag-item").each((function(){const e={tag:v()(this).find('[name="tag_name"]'),value:v()(this).find('[name="tag_value"]')},t={name:e.tag.val(),value:e.value.val()};i.push(t)}));const s=n.find("#libraryId").val(),a=s?{libraryId:s,search:i}:null;ve.openDialog(t,{showApplySearch:!0,edit:a,filterOutTypes:[N.ZP.CUSTOM,N.ZP.GRADE_BOOK,N.ZP.FREE_TEXT,N.ZP.RANDOM,N.ZP.MATH]})}))},In=e=>{x.Z.on(e,"click","#browse-library-assessments",Sn.bind(null,e))};var An=n(28462);const Tn='<div class="guides-edit settings">\n    <label for="assessment-llm-based-rubric-generation-area" class="assessment-llm-based-rubric-generation-label">Rubric requirements:</label>\n    <textarea id="assessment-llm-based-rubric-generation-area" class="assessment-llm-based-rubric-generation-area"></textarea>\n    <span>\n        Click <a href="https://docs.codio.com/instructors/authoring/assessments/llm-based-rubric.html#rubric-requirements-example" target="_blank">here</a> to find requirements examples.\n    </span>\n</div>\n';var jn=n(42270),Zn=n(34335);const On=_().compile(An),Nn=_().compile(Tn),Dn=7;let Mn=null;function Rn(){if(!Mn)return;const e=Mn.find("#grading_form"),t=e.find(".llm-rubric-item-container");let n=0;g().each(t,(e=>{const t=parseInt(v()(e).find(".assessment-llm-based-rubric-points-input").val(),10);n+=t})),e.find("#points").val(n)}function Ln(e,t,n){e&&e.preventDefault();const i=n?n.find("#grading_form"):v()(this).closest("#grading_form"),s=i.find(".items-list"),a=s.find(".llm-rubric-item-container")||[],o=t||{id:a.length+1,points:1,title:"",description:""},r=v()(On(o));r.find(".item-index").text(a.length+1),s.append(r),i.find(".add-rubric-item").attr("disabled",a.length>=Dn-1),Rn(),r.find(".assessment-llm-based-rubric-points-input").change(Rn)}function Fn(e){e&&e.preventDefault();const t=v()(this).closest("#grading_form");v()(this).closest(".llm-rubric-item-container").remove();t.find(".items-list").find(".llm-rubric-item-container").each((function(e){v()(this).find(".item-index").text(e+1)})),Rn()}async function Bn(e,t){var n;(n=t).preventClosing(!0),n.buttons()[0].disable("Generating...","loading"),n.buttons()[1].disable(),n.content().find(":input").prop(R.xu,!0);try{const n=await async function(e,t){const n=(await Z.ZP.getMetadata()).getSectionById(Zn.Z.getCurrentEditorSectionId()),i=await n.contentModel,s={};s.guidesContent=i.getValue(),s.requirements=e.content().find("#assessment-llm-based-rubric-generation-area").val();const{authorAssignment:a,guid:o}=C.default.currentProject;s.projectId=o,a&&(s.courseName=a.course.details.name,s.moduleName=a.unit.name,s.assignmentName=a.assignment.settings.name);const r=t.find("#solution").val();if(r){const e=await C.default.currentProject.getFile(r);s.solutions=[{path:r,content:e}]}return s.question=t.find("#instructions").val(),s}(t,e);!function(e,t){e.find("#grading_form").find(".items-list").find(".llm-rubric-item-container").remove(),g().each(t,(t=>{Ln(void 0,t,e)}))}(e,(await(0,jn.l2)(n)).rubrics)}catch(e){S.Z.error(e.message),console.error(e),t.close(I.Z.IDCANCEL)}}const Un=e=>{x.Z.on(e,"click",".add-rubric-item",Ln),x.Z.on(e,"click",".remove-rubric-btn",Fn),x.Z.on(e,"click",".generate-rubrics",(()=>function(e){const t=new I.Z({title:"Generate Rubrics using AI",buttons:[{title:"Generate using AI",type:1,onClick:async function(){return await Bn(e,t),t.close(I.Z.IDOK)}},{title:"Cancel",onClick:function(){return t.close(I.Z.IDCANCEL)}}],content:Nn({}),width:1200,height:500,onShow:function(){},onClose:function(){}})}(e)))},qn=(e,t)=>{var n;Mn=e;const i=e.find(".assessment-llm-based-rubric-form");(null===(n=t.source)||void 0===n||null===(n=n.rubrics)||void 0===n?void 0:n.length)>=7&&i.find(".add-rubric-item").attr("disabled","disabled"),e.find(".assessment-llm-based-rubric-points-input").change(Rn)},Hn=(e,t)=>{e.find("#solution").val(t)},Gn=_().compile(An),Wn=_().compile(Tn),zn=7;let Vn=null;function Kn(){if(!Vn)return;const e=Vn.find("#grading_form"),t=e.find(".llm-rubric-item-container");let n=0;g().each(t,(e=>{const t=parseInt(v()(e).find(".assessment-llm-based-rubric-points-input").val(),10);n+=t})),e.find("#points").val(n)}function Jn(e,t,n){e&&e.preventDefault();const i=n?n.find("#grading_form"):v()(this).closest("#grading_form"),s=i.find(".items-list"),a=s.find(".llm-rubric-item-container")||[],o=t||{id:a.length+1,points:1,title:"",description:""},r=v()(Gn(o));r.find(".item-index").text(a.length+1),s.append(r),i.find(".add-rubric-item").attr("disabled",a.length>=zn-1),Kn(),r.find(".assessment-llm-based-rubric-points-input").change(Kn)}function Yn(e){e&&e.preventDefault();const t=v()(this).closest("#grading_form");v()(this).closest(".llm-rubric-item-container").remove();t.find(".items-list").find(".llm-rubric-item-container").each((function(e){v()(this).find(".item-index").text(e+1)})),Kn()}async function Qn(e,t){var n;(n=t).preventClosing(!0),n.buttons()[0].disable("Generating...","loading"),n.buttons()[1].disable(),n.content().find(":input").prop(R.xu,!0);try{const n=await async function(e,t){const n=(await Z.ZP.getMetadata()).getSectionById(Zn.Z.getCurrentEditorSectionId()),i=await n.contentModel,s={};s.guidesContent=i.getValue(),s.requirements=e.content().find("#assessment-llm-based-rubric-generation-area").val();const{authorAssignment:a,guid:o}=C.default.currentProject;s.projectId=o,a&&(s.courseName=a.course.details.name,s.moduleName=a.unit.name,s.assignmentName=a.assignment.settings.name);const r=t.find("#solution").val();if(r){const e=await C.default.currentProject.getFile(r);s.solutions=[{path:r,content:e}]}return s.question=t.find("#instructions").val(),s}(t,e);!function(e,t){e.find("#grading_form").find(".items-list").find(".llm-rubric-item-container").remove(),g().each(t,(t=>{Jn(void 0,t,e)}))}(e,(await(0,jn.l2)(n)).rubrics)}catch(e){S.Z.error(e.message),console.error(e),t.close(I.Z.IDCANCEL)}}const Xn=e=>{x.Z.on(e,"click",".add-rubric-item",Jn),x.Z.on(e,"click",".remove-rubric-btn",Yn),x.Z.on(e,"click",".generate-rubrics",(()=>function(e){const t=new I.Z({title:"Generate Rubrics using AI",buttons:[{title:"Generate using AI",type:1,onClick:async function(){return await Qn(e,t),t.close(I.Z.IDOK)}},{title:"Cancel",onClick:function(){return t.close(I.Z.IDCANCEL)}}],content:Wn({}),width:1200,height:500,onShow:function(){},onClose:function(){}})}(e)))},$n=(e,t)=>{var n;Vn=e;const i=e.find(".assessment-llm-based-rubric-form");(null===(n=t.source)||void 0===n||null===(n=n.rubrics)||void 0===n?void 0:n.length)>=7&&i.find(".add-rubric-item").attr("disabled","disabled"),e.find(".assessment-llm-based-rubric-points-input").change(Kn)},ei=(e,t)=>{e.find("#solution").val(t)};var ti=n(47380),ni=n(26024),ii=n(95611),si=n(35797),ai=n(58728);const oi="-parameters",ri="".concat(R.Nc,"/temporary-file").concat(oi,".").concat("py"),ci=[N.ZP.RANDOM,N.ZP.GRADE_BOOK];class li{constructor(e,t,n){this.form=e,this.filePath=li.getParametersFilePath(t),this.removeFileOnDestroy=n,this.newSampleParameters=null,this.sampleParameters=null,this.taskId=t,this.bindEvents()}static isAllowed(e){return!g().some(ci,(t=>t===e))}static getParametersFilePath(e){return"".concat(R.Nc,"/").concat(e).concat(oi,".").concat("py")}onGenerateClick(e){e.preventDefault(),(0,jn.MJ)(C.default.currentProject.guid,ri).then((e=>{this.newSampleParameters=e,this.form.find(".assessment-editor-parameters-sample-view").removeClass("error").text(this.parametersAsText(e))})).catch((e=>{this.newSampleParameters=null,this.form.find(".assessment-editor-parameters-sample-view").empty().addClass("error").append(e.message)}))}parametersAsText(e){let t="";try{const n=JSON.parse(e);if(g().isEmpty(n))return t+="please add your parameters to codio_parameters dictionary\n",t+="codio_parameters = dict()\n",t+='codio_parameters["param"] = "hello"\n',t;const i=g()(n).map(((e,t)=>({key:t,value:e}))).sortBy("key").groupBy((e=>0===e.key.indexOf("public_")?"public":"private")).value(),s=(e,t)=>g().reduce(e,((e,t)=>e+=[t.key,"=",JSON.stringify(t.value),"\n"].join(" ")),t);t=g().compact([s(i.public,t),s(i.private,t)]).join("\n")}catch(n){t=e,console.error("parse error",n)}return t}onGenerateExampleClick(e){e.preventDefault(),this.editor&&this.editor.replaceRange('\nimport random\n\ncodio_parameters = dict()\n\ncodio_parameters["parameter"] = random.randint(1, 300)\ncodio_parameters["public_parameter"] = random.randint(1, 300)\n\n# To learn more about private and public parameters, visit our documentation: https://docs.codio.com/instructors/authoring/assessments/parameterized.html\n',this.editor.getPosition())}onExpandCollapseClick(e){e.preventDefault();const t=this.form.find(".assessment-editor-parameters"),n=t.hasClass("assessment-editor-parameters-large-output");t.find(".assessment-editor-parameters-expand-collapse-btn").prop("title",n?"Expand parameters":"Collapse parameters"),t.toggleClass("assessment-editor-parameters-large-output")}bindEvents(){x.Z.on(this.form,"click",".assessment-editor-parameters-sample-generate-btn",this.onGenerateClick.bind(this)),x.Z.on(this.form,"click",".assessment-editor-parameters-generate-example-btn",this.onGenerateExampleClick.bind(this)),x.Z.on(this.form,"click",".assessment-editor-parameters-expand-collapse-btn",this.onExpandCollapseClick.bind(this))}getFile(){return this.file||(this.file=C.default.currentProject.unixFile(this.filePath)),this.file}getInitialContent(){return C.default.currentProject.exists(this.filePath)?this.getFile().then((e=>e.content)):Promise.resolve("")}initEditor(){this.getInitialContent().then((e=>{const t=this.form.find(".assessment-editor-parameters-container");this.tempModel=new j.yO(e,"python"),this.editor=new j.ZP(t,this.tempModel,{language:"python",lineNumbers:"on",automaticLayout:!0,minimap:{enabled:!1},wordWrap:"on"}),this.editor.setModel(this.tempModel);const n=g().throttle((()=>this.editor.layout()),300);this.observer=new ResizeObserver(n),this.observer.observe(t.find(".monaco-editor-container")[0]),this.storeToTempFile();const i=g().debounce(this.storeToTempFile.bind(this),500,{maxWait:1e3});this.editor.onDidChangeModelContent(i)})),(0,si.xE)().then((e=>{const t=g().find(e,{taskId:this.taskId});t&&(this.sampleParameters=this.newSampleParameters=t.parameters,this.form.find(".assessment-editor-parameters-sample-view").text(t.parameters?this.parametersAsText(t.parameters):""))}))}isInitialized(){return!!this.editor}getContent(){return this.isInitialized()?Promise.resolve(this.getTempContent()):this.getInitialContent()}getTempContent(){return this.tempModel?this.tempModel.getValue().trim():""}getTemporaryFile(){return this.tempFile||(this.tempFile=ni.ZP.initFile(ri)),this.tempFile}storeToTempFile(){return this.getTemporaryFile().then((e=>{let t=E.default.promise.deferred();return e.content=this.editor.getContent(),g().defer((()=>{ii.Z.saveAllAndWait().then((()=>t.resolve(e)))})),t.promise}))}save(){return ni.ZP.initFile(this.filePath).then((e=>{this.removeFileOnDestroy=!1,e.content=this.editor.getContent()})).then((()=>{g().isNull(this.newSampleParameters)?(0,si.il)(this.taskId).then((()=>(0,ai.rN)(this.taskId))):this.sampleParameters!==this.newSampleParameters&&(0,si.Fo)({taskId:this.taskId,parameters:this.newSampleParameters}).then((()=>(0,ai.rN)(this.taskId)))}))}clearGeneratedParameters(){(0,si.il)(this.taskId)}setRemoveFileOnDestroy(e){this.removeFileOnDestroy=e}cleanUpFile(e){e&&e.then((e=>e.close()))}destroy(){(this.isInitialized()&&!this.getTempContent()||this.removeFileOnDestroy)&&C.default.currentProject.exists(this.filePath)&&ni.ZP.deleteFile(this.filePath),C.default.currentProject.exists(ri)&&ni.ZP.deleteFile(ri),this.editor&&this.editor.close(),this.editor=null,this.tempModel&&this.tempModel.dispose(),this.tempModel=null,x.Z.off(this.form),this.observer&&this.observer.disconnect(),this.observer=null,this.cleanUpFile(this.tempFile),this.cleanUpFile(this.file),this.tempFile=null,this.file=null}}var di=n(75036);n(44941),n(39925);const ui={[N.ZP.CODE_OUTPUT_COMPARE]:i,[N.ZP.FILL_IN_THE_BLANKS]:a,[N.ZP.ECORNELL_FIB]:s,[N.ZP.MULTIPLE_CHOICE]:o,[N.ZP.PARSONS_PUZZLE]:r,[N.ZP.TEST]:c,[N.ZP.CUSTOM]:{},[N.ZP.SPLICE]:{},[N.ZP.FREE_TEXT]:d,[N.ZP.FREE_TEXT_AUTO]:l,[N.ZP.GRADE_BOOK]:u,[N.ZP.JUPYTER_NOTEBOOK]:{},[N.ZP.MATH]:{},[N.ZP.LLM_BASED_RUBRIC]:p,[N.ZP.LLM_BASED_AUTO_RUBRIC]:f,[N.ZP.RANDOM]:h};var hi=Z.ZP.Action,pi=x.Z.create(n(10742));const fi=_().compile(ti),mi=[N.ZP.SPLICE,N.ZP.LLM_BASED_RUBRIC,N.ZP.ECORNELL_FIB,N.ZP.LLM_BASED_AUTO_RUBRIC];let gi=null,bi=!0,vi=function(){},yi=null,wi=null,_i=null,ki=null,Pi=null,Ci=null,xi=null,Ei=[],Si=null,Ii=null,Ai=null,Ti=null,ji=null,Zi=null,Oi=[];function Ni(e){ji&&ji.setRemoveFileOnDestroy(!e.taskId),bi?ms():vi()}function Di(e){e.preventDefault();var t=v()(this);t.hasClass("active")||Mi(t)}function Mi(e){const t=e.closest(".assessment-editor"),n=e.closest(".navigation-list"),i=t.find(".forms-container").find("form");let s=n.find(".navigation-item.active").find("a").data("tab"),a=i.siblings("#"+s);x.Z.off(a,"change"),n.find(".navigation-item").removeClass("active"),e.addClass("active"),s=e.find("a").data("tab"),i.addClass("hide"),a=i.siblings("#"+s),a.removeClass("hide");const o=a.data("onFirstFormPaint");o&&(g().each(o,(function(e){e()})),a.removeData("onFirstFormPaint")),g().forEach(a.find(".guides-editor-with-preview-container"),(e=>{const t=v()(e);if(!t.data("init")){const e=t.find(".guides-editor-with-preview-container-textarea");Oi.push(new Qe(e.attr("id"),t,e.val())),t.data("init",!0)}})),x.Z.on(a,"change",Ri)}function Ri(e){e.preventDefault(),Li(v()(this))}async function Li(e){var t=e.closest(".assessment-editor");t.find("#errors-container").empty().hide();var n=t.find("#assessment-type").val(),i=e.attr("id"),s=await M.Z.getData(n,t,i);e.find(".validation-error").removeClass("validation-error");var a=t.find('.navigation-item a[data-tab="'+i+'"]');g().isEmpty(s.errors)?a.removeClass("error"):(a.addClass("error"),g().each(s.errors,(function(e){e.el&&e.el.addClass("validation-error")})))}function Fi(e){e.preventDefault();var t=v()(e.currentTarget).closest(".assessment-editor"),n=v()(this),i=t.find("#id").val();D.ZP.disconnect(i).then((function(){S.Z.success("Successfully disconnected from library"),t.find("#linked-id").val(""),t.find("#assessment-library-id").val(""),n.remove(),pi.assessmentDisconnected()}))}function Bi(e,t){t.preventDefault();var n,i,s,a=v()(t.currentTarget).closest(".assessment-editor"),o=a.find("#id");o.length&&o.val()&&e&&a.data("outdated")?(n=Ui.bind(null,a),i=function(){qi(a,e)},s=I.Z.showWarning({title:"This assessment has been updated by another user",description:"You can get the updated assessment and overwrite your local changes or continue with updating the assessment which will overwrite changes in the library.",width:700,buttons:[{title:"Get Updated Assessment",type:1,onClick:function(){return n(),s.close()}},{title:"Overwrite Changes in Library",onClick:function(){return i(),s.close()}}]})):qi(a,e)}function Ui(e){var t=e.data("assessment"),n=e.data("libAssessment"),i=M.Z.convertLibAssessment(n),s={insertFromLib:!0,toLibrary:!1,isRandom:!1};if(t.source.metadata.layout||i.source.metadata.layout){var a=i.source.metadata.pageTitle||t.source.name;s.sectionTitle="(Updated) "+a,s.forceNewPage=!0}else s.prefix="-----------Updated assessment below---------------\n",s.insertAfter=t.taskId;return i.source.points=t.source.points,Hi(e,i,s,i)}const qi=async function(e,t,n,i){bi=g().isUndefined(n)?bi:n;var s=e.find("#assessment-type").val(),a=i?void 0:e.find("#linked-id").val(),o=i?void 0:e.find("#assessment-library-id").val(),r=i?void 0:e.find("#version").val();const{errorMsgArr:c,source:l}=await st(e,t,!0);let d=l;if(ui[N.ZP.TEST].processSourceBeforeSubmit&&(d=ui[N.ZP.TEST].processSourceBeforeSubmit(l)),e.find(".navigation-item.error").length){var u=g()(c).uniq().map((function(e){return'<span class="error-message">'+e+"</span>"})).value().join("<br/>");return e.find("#errors-container").empty().html(u).show(),!1}var h=e.find("#id"),p=h.length&&h.val(),f=!p&&a;f&&ji&&ji.setRemoveFileOnDestroy(!1);var m=f&&e.data("assessment"),b=s===N.ZP.RANDOM;if(!b){var v=wi.getSectionPosition(yi.id),w=wi.getLayout(v);if(t&&("1-panel"===w?delete d.metadata.layout:(d.metadata.layout=w,d.metadata.pageTitle=yi.title,d.metadata.buttonText=function(e,t){if(e){var n=xi.getContent();return new RegExp("{(.+?)\\|assessment}\\("+e+"\\)\\n?","gm").exec(n)[1]}return Re.ZP.getDefaultButtonText(t)}(p,s),d.metadata.content=function(e){let t;if(e){const n=new RegExp("{.+\\|assessment}\\("+e+"\\)\\n?","gm");t=xi.getContent().replace(n,y.ZP.FROM_LIBRARY_DUMMY+"\n")}else{const e=new j.yO(xi.getContent());e.replaceRange(y.ZP.FROM_LIBRARY_DUMMY+"\n",xi.getPosition()),t=e.getValue(),e.dispose()}return t.replace(/{.+\|assessment}\(.+-[0-9]+\)\n?/gm,"")}(p))),f)d.metadata.files=Me.getSelectedPaths(),d.metadata.opened=m.source.metadata.opened||[];else{d.metadata.files=ls(Me.getSelectedPaths());var _=wi.getSectionTabs(v,!0);d.metadata.opened=g().map(_.ide.concat(_.ssh,_.terminal),(function(e){return{type:e.type,panelNumber:e.panelNumber,content:e.content}}))}}return await Hi(e,{type:s,taskId:p,linkedId:a,libraryId:o,version:r,source:d},{toLibrary:t,isRandom:b,insertFromLib:f},m,i),!0};async function Hi(e,t,n,i,s){n.insertFromLib&&await T.xS({projectId:C.default.currentProject.guid,assessmentId:t.linkedId});const a=s?ds(t.type):Zi,o=n.insertFromLib&&t.source.metadata.layout||n.forceNewPage;return o&&await function(e,t,n){var i=e.source.metadata||{},s=g().map(i.opened||[],(function(e){return Ke.Z.convertTabDataToAction(e)}));s.unshift(new hi({action:"close",path:"#tabs"}));var a=t?t.source.metadata.content:null,o=g().get(t,"source.metadata.buttonText"),r=function(e,t,n){var i=Re.ZP.generateAssessmentString(e,n),s=i+"\n";t&&(s=t.replace(y.ZP.FROM_LIBRARY_DUMMY,i));return s}(e,a,o);return new Promise((a=>{pi.bookAddPage({options:{contentType:"markdown",title:n||g().get(t,"source.metadata.pageTitle")||e.source.name,value:r,layout:i.layout,files:s},callback:function(){a()}})}))}({taskId:a,type:t.type,source:t.source},i,n.sectionTitle),n.toLibrary&&t.source.metadata.layout&&await we.show(yi,t.source.metadata),await function(e,t){if(!ji)return Promise.resolve();if(ji.isInitialized()&&!t){if(ji.getTempContent())return ji.save();ji.clearGeneratedParameters()}if(!t)return Promise.resolve();const n=li.getParametersFilePath(t);return ji.getContent().then((e=>e?ut.Z.initFile(n,e):null))}(0,s?a:null),s&&(t.source.name="Copy of ".concat(t.source.name)),async function(e,t,n,i){try{let s;if(t.libraryId)s=t.libraryId;else if(n)if(t.linkedId){s=(await T.zh(t.linkedId)).libraryId}else s=await function(){var e=_i.my.concat(_i.certified),t=Promise.resolve(e[0].id);e.length>1&&(t=ye.chooseLibrary(_i));return t}();let a=null;if(ji){a=await ji.getContent()||null}const o={libraryId:s,linkedId:t.linkedId,version:t.version,toLibrary:n,parameters:a};let r;if(t.taskId&&!i.duplicate){let i;n&&e.data("outdated")&&(i=new Promise(((e,t)=>{I.Z.showConfirm({description:"Your assessment version is outdated. Do you still want to update the assessment and overwrite the updated assessment data in the library?",captcha:!0,onClose:n=>n?e():t(new Error("update assessment cancelled"))})}))),await i,es(e),r=await D.ZP.edit(t.taskId,t.source,o)}else{const n=i&&i.taskId;es(e),r=await D.ZP.add(n,t.type,t.source,o)}t.taskId&&!i.duplicate?bi?gs():(ts(),vi()):(pi.assessmentAdded({assessment:r,newAssessmentInfo:i}),i.duplicate&&S.Z.success("Assessment successfully duplicated."))}catch(t){t&&S.Z.error(t.message),function(e){var t=e.find(".submit-btn");t.enableButton(),e.find(":input").prop(R.xu,!1)}(e)}}(e,t,n.toLibrary,{taskId:a,toNewPage:o,prefix:n.prefix,insertAfter:n.insertAfter,duplicate:s})}function Gi(e){return ts().then((function(t){return g().find(t,{taskId:e})}))}function Wi(e,t){return Gi(e).then((function(n){const{source:i}=n;if(!g().isInteger(t)||t<0||t>1e3)return S.Z.error("Incorrect points value"),i.points;if(i.points=t,i.codeEnvConfig){const e=JSON.parse(i.codeEnvConfig);e.maxPoints=t,i.codeEnvConfig=JSON.stringify(e)}D.ZP.edit(e,i,{toLibrary:!1}).then((()=>ts().then((function(e){Ai=e,zi(gi.find("option:selected").data("filter"))}))))}))}function zi(e){Ti=g().filter(Ai,(function(t){return e===y.ZP.ASSESSMENT_USED?t.usageInfo:e!==y.ZP.ASSESSMENT_UNUSED||!t.usageInfo})),Ii=Ii||{by:"name",order:"asc"},function(e){if(e&&gi){const t=gi.find("#sorter-buttons");t.find("button").removeClass("active"),t.find("button[data-order="+e.order+"]").addClass("active"),gi.find(".sorter.selectbox").val(e.by)}}(Ii),Ti=Qi(Ti),Si.setList(Ti);const t=gi.find("#delete-all-unused");t.removeClass("hide"),e!==y.ZP.ASSESSMENT_UNUSED&&t.addClass("hide"),t.attr(R.xu,g().isEmpty(Ti))}function Vi(){const e=gi.find("#search").val();Si&&Si.search(e,Ki)}function Ki(e){Ti=e,fs(Qi(Ti))}function Ji(){Ii=Yi(),Vi()}function Yi(){return{by:gi.find(".sorter.selectbox")[0].value,order:gi.find("#sorter-buttons > button.active").data("order")}}function Qi(e){const t=Yi();switch(t.by){case"name":e=g().sortBy(e,(function(e){return e.source.name.toLowerCase()}));break;case"points":e=g().sortBy(e,(function(e){return e.source.points}));break;case"orderInGuides":e=g().chain(e).sortBy((function(e){return e.usageInfo&&e.usageInfo.section.pos.line})).sortBy((function(e){return e.usageInfo&&e.usageInfo.section.index})).value()}return"desc"===t.order&&e.reverse(),e}function Xi(e){return function(t){if(!t)return!0;var n;(n=this).preventClosing(!0),n.buttons()[0].disable("Deleting...","loading"),n.buttons()[1].disable(),n.content().find(":input").prop(R.xu,!0);var i=this;return D.ZP.remove(e).then((function(){const t=g().map(e,(e=>li.getParametersFilePath(e)));C.default.currentProject.deleteItems(t),gs(),i.close(I.Z.IDCANCEL)})).catch(g().bind($i,null,i)),!1}}function $i(e){e.preventClosing(!1);var t=e.content(),n=e.buttons()[0];e.buttons()[1].enable(),n.enable(!0),t.find(":input").prop(R.xu,!1)}function es(e){var t=e.find(".submit-btn"),n="Create"===t.html()?"Creating":"Updating";t.disableButton(n+"...","loading"),e.find(":input").prop(R.xu,!0)}function ts(){return D.ZP.getAssessments().then((function(e){return Promise.all([e,D.ZP.getAssessmentsUsageForProject(e)])})).then((function(e){let[t,n]=e;return g()(t).filter((function(e){return!(e.type in N.AQ)})).map((function(e){return e.usageInfo=g().find(n,{taskId:e.taskId}),e})).value()}))}function ns(e){return Pi=new Bloodhound({name:"tags",local:[],datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.val)},queryTokenizer:Bloodhound.tokenizers.whitespace}),Pi.initialize(),Ci=new Bloodhound({name:"values",local:[],datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.val)},queryTokenizer:Bloodhound.tokenizers.whitespace}),Ci.initialize(),function(e){if(ki)return Promise.resolve(ki);ki={};var t=e.my.concat(e.certified),n=g().map(t,"id");return T.me({libraryIds:n}).then((function(e){return g().each(e,(function(e){g().each(e,(function(e,t){ki[t]?ki[t].concat(e):ki[t]=e}))})),g().mapValues(ki,(function(e){return g().uniq(e)}))}))}(e).then((function(e){var t=g().map(e,(function(e,t){return{val:t}}));Pi.add(t)}))}function is(e){e.find(".js-tag.js-typeahead").typeahead({highlights:!0},{name:"tags",source:Pi.ttAdapter(),displayKey:"val"}),e.find(".js-value.js-typeahead").typeahead({highlights:!0},{name:"values",source:Ci.ttAdapter(),displayKey:"val"})}function ss(e){e&&e.preventDefault();var t=v()(this).closest(".form").find(".tags-list"),n=v()(fi({source:{metadata:{tags:[{name:"",value:""}]}}}));t.append(n),is(n)}function as(){var e=v()(this).closest(".tag-item").find(".js-tag.js-typeahead.tt-input").val(),t=ki[e]||[],n=g().map(t,(function(e){return{val:e}}));Ci.clear(),Ci.add(n)}function os(e){e.preventDefault(),v()(this).closest(".tag-item").remove()}function rs(e){e.preventDefault();const t=v()(e.currentTarget).closest(".assessment-editor"),n=t.find("#assessment-type").val();Zi=n+"-"+E.default.hashCode(E.default.GUID()),qi(t,!1,!1,!0)}function cs(e){var t=e.find(".navigation-item");g().each(t,(function(t){var n=v()(t).find("a").data("tab");Li(e.find("#"+n))}))}function ls(e){var t=wi.getSectionPosition(yi.id),n=Ve.Z.getLayoutInfo(wi,0,t),i=C.default.currentProject.backendSubDomain+"."+A.Z.get("boxDomain"),s=M.Z.getFilesFromOpened(i,n.opened);return g()(s).concat(e).uniq().compact().value()}const ds=e=>e+"-"+E.default.hashCode(E.default.GUID()),us=function(e,t){Zi=(e=>e.taskId?e.taskId:e.type+"-"+E.default.hashCode(E.default.GUID()))(e),Me.clean(),P().start();var n=Promise.resolve();e.linkedId&&(n=T.zh(e.linkedId)),Promise.all([D.ZP.getAssessmentLibraries(),n]).then((function(n){let[i,s]=n;_i=i,bi=t,hs(e,s);var a=O.ZP.renderAssessmentEditor(e);di.canGenerate(e)&&a.find(".generate-btn").removeClass("hide"),di.canRegenerate(e)&&a.find(".regenerate-btn").removeClass("hide"),a.find("form").submit((e=>e.preventDefault())),a.data("assessment",e),a.data("libAssessment",s),e.outdated&&a.data("outdated",!0),ns(i),is(a),function(e,t){const n=ui[t.type];(null==n?void 0:n.afterRender)&&n.afterRender(e,t),((e,t)=>{((e,t)=>{e.find("#guidance").val(t.source.guidance),e.find("#instructions").val(t.source.instructions),e.find("#question").val(t.source.question||t.source.instructions)})(e,t)})(e,t)}(a,e);var o=!e.taskId&&e.linkedId,r=e.source.metadata.files;o||(r=ls(e.source.metadata.files)),Me.setInitialPaths(r);var c=a.find("#files_form");a.find("#files_form").data("onFirstFormPaint",[function(){Me.init(c,o)}]);const l=a.find("#parameters_form"),d=a.find('.navigation-item a[data-tab="parameters_form"]').closest(".navigation-item");if(li.isAllowed(e.type)){var u;const t=null==s||null===(u=s.parametersScript)||void 0===u?void 0:u.script;t&&ut.Z.initFile(li.getParametersFilePath(Zi),t);const n=e.taskId&&li.getParametersFilePath(e.taskId),i=n&&C.default.currentProject.exists(n);t||i?(ji=new li(l,Zi,!!t||!e.taskId),l.data("onFirstFormPaint",[function(){ji.initEditor()}])):d.addClass("hide")}else d.addClass("hide");var h=e.type===N.ZP.RANDOM,p=i&&(!g().isEmpty(i.my)||!g().isEmpty(i.certified));(o||h)&&a.find(".library-buttons").empty();const f=function(e){var t=_i.my.concat(_i.certified);if(e){var n=g().find(t,{id:e});return!!n&&!n.readOnly}return g().some(t,(function(e){return!e.readOnly}))}(e.libraryId),m=(b=e.type,!g().includes(mi,b));var b;p&&f&&m||a.find(".save-in-library").remove();const v=gi.find(".form");v.removeClass("hide"),v.empty().append(a).show(),gi.find(".assessments-filters").addClass("hide"),gi.find(".assessments-preview").addClass("hide"),!o&&e.taskId||a.find(".assessment-editor-duplicate").addClass("hide"),gi.removeClass("tab-pane--appBackground"),Mi(a.find(".navigation-item").eq(0)),cs(a),function(e,t){x.Z.off(e),Ei&&x.Z.unsubscribe(Ei);const n=async function(t,n){const{source:i}=await st(e,!1,!1);Ni(t),pi.generateAssessment({assessment:g().merge(t,{source:i}),regenerate:n})};x.Z.on(e,"click",".generate-btn",(()=>{n(t,!1)})),x.Z.on(e,"click",".regenerate-btn",(()=>{n(t,!0)})),x.Z.on(e,"click",".navigation-item",Di),x.Z.on(e,"click",".cancel-btn",(function(){Ni(t)})),x.Z.on(e,"click",".save-in-library",(e=>(ji&&ji.setRemoveFileOnDestroy(!t.taskId),Bi(!0,e)))),x.Z.on(e,"click",".disconnect-btn",Fi),x.Z.on(e,"click",".preview-button",ps),x.Z.on(e.find("form"),"change",(function(){e.data("changed",!0)})),x.Z.on(e,"click",".submit-btn",(e=>(ji&&ji.setRemoveFileOnDestroy(!t.taskId),Bi(!1,e)))),x.Z.on(e,"click",".add-tag-btn",ss),x.Z.on(e,"focus",".js-value.js-typeahead",as),x.Z.on(e,"click",".remove-tag-btn",os),x.Z.on(e,"change","#set_number_of_attempts",lt.bind(null,e)),x.Z.on(e,"click",".assessment-editor-duplicate",rs),Ei=[x.Z.subscribe("guides:assessment:disconnected",(function(){e.find(".save-in-library").html("Save in Library")})),x.Z.subscribe("guides:assessmentEditor:validate",cs.bind(null,e))];const i=ui[t.type];i.bindEvents&&i.bindEvents(e,t)}(a,e)})).finally((function(){P().done()}))};function hs(e,t){if(e.taskId){var n=e.type===N.ZP.RANDOM?e.source.libraryId:e.libraryId;n&&(e.source.libraryName=function(e){if(!_i)return"";var t=_i.my.concat(_i.certified),n=g().find(t,{id:e});return n?n.name:""}(n)),e.taskId&&t&&e.version!==t.version&&(e.outdated=!0)}}function ps(e){e.preventDefault();var t=v()(this).closest(".preview-area-container");t.toggleClass("preview");var n=v()(this).parent().parent().find("#assessment-type").val(),i=t.find("textarea").val();(n===N.ZP.MATH?D.ZP.compileMath([{question:i,answers:{}}]).then((function(e){return e[0].questionText})):E.default.toHTML(i)).then((function(e){t.find(".preview-container").html(e),n===N.ZP.MATH&&MathJax.Hub.Queue(["Typeset",MathJax.Hub])}))}function fs(e){const t=gi.find(".assessments-preview");gi.find(".form").addClass("hide");const n=O.ZP.renderAssessmentList(e);var i;n.find(".qtip-here").qtip(),t.empty().append(n),i=n,x.Z.on(i,"mouseup keyup",".assessments-list-item-points-input",(function(){Wi(v()(this).closest(".assessments-list-item").data("taskid"),parseInt(v()(this).val(),10)).then((e=>{g().isNumber(e)&&v()(this).val(e)}))})),x.Z.on(i,"click",".assessments-list-item-link",(function(e){e.preventDefault(),Gi(v()(this).closest(".assessments-list-item").data("taskid")).then((function(e){us(e,!0)}))})),x.Z.on(i,"click",".assessments-list-item-goto",(function(e){e.preventDefault();var t=v()(this).closest(".assessments-list-item").data("taskid");i.find(".qtip-here").qtip("destroy",!0),Gi(t).then((function(e){pi.goToAssessment(e)}))})),x.Z.on(i,"click",".assessments-list-item-add",(function(e){e.preventDefault(),Gi(v()(this).closest(".assessments-list-item").data("taskid")).then((function(e){pi.assessmentAdded({assessment:e})}))})),x.Z.on(i,"click",".remove-btn:not(.disabled)",(function(e){e.preventDefault(),Gi(v()(this).closest(".assessments-list-item").data("taskid")).then((function(e){I.Z.showConfirm({description:"Do you want to delete '"+e.source.name+"' Assessment?",captcha:!0,onClose:Xi([e.taskId])})}))}))}function ms(){gi.find(".form").hide().empty(),gi.find(".assessments-preview").removeClass("hide"),gi.addClass("tab-pane--appBackground")}const gs=function(){Promise.all([ts(),D.ZP.getAssessmentLibraries()]).then((function(e){let[t,n]=e;_i=n,g().each(t,hs.bind(null)),gi.find(".assessments-filters").removeClass("hide");gi.find(".assessments-preview").is(":visible")||ms(),Ai=t,Si||(Si=ze(Ai)),gi.find("#search").val(""),function(){const e=g().debounce(Vi,400);x.Z.on(gi.find("#search"),"input",e),x.Z.on(gi.find(".selectbox.filter"),"change",(function(e){e.preventDefault();const t=v()(this).find("option:selected").data("filter");gi.find("#search").val(""),zi(t),fs(Ti)})),x.Z.on(gi.find(".selectbox.sorter"),"change",(function(e){e.preventDefault(),Ji()}));var t=gi.find("#sorter-buttons > button");x.Z.on(t,"click",(function(e){e.preventDefault();const n=v()(this);n.hasClass("active")||(t.removeClass("active"),n.addClass("active"),Ji())})),x.Z.on(gi.find("#delete-all-unused"),"click",(e=>{e.preventDefault();const t=gi.find(".assessments-list-item").map((function(){return v()(this).data("taskid")})).get();I.Z.showConfirm({description:"Do you want to delete all unused Assessments?",captcha:!0,onClose:Xi(t)})}))}(),zi(gi.find("option:selected").data("filter")),fs(Ti)}))},bs={submitAssessment:qi,renderAssessmentEditor:us,addFromLibrary:function(){D.ZP.getAssessmentLibraries().then((function(e){ve.openDialog(e)}))},init:function(e,t,n,i,s){xi=t,gi=e,vi=s,yi=i,wi=n,Ai=null,Ti=null,Si=null,Ii=null},renderAssessmentsList:gs,fileDrop:function(e,t){const n=v()("#assessments .assessment-editor"),i=n.data("assessment"),s=ui[i.type];return s.dropFile&&s.dropFile(n,e,t),!0},cleanup:function(){g().each(Oi,(e=>e.destroy())),Oi=[],ji&&ji.destroy(),ji=null},activate:()=>{}}},6989:(e,t,n)=>{"use strict";n.d(t,{_V:()=>I,LQ:()=>_,Z0:()=>S,ZP:()=>A});var i=n(76900);const s={type:i.ZP.TEST};var a=n(71864);const o={type:i.ZP.MULTIPLE_CHOICE,source:{showGuidanceAfterResponseOption:{type:"Attempts",passedFrom:1},arePartialPointsAllowed:!1,incorrectPoints:0,isRandomized:!1,maxAttemptsCount:1,metadata:{files:[],opened:[],tags:[{name:"Assessment Type",value:"Multiple Choice"}]},points:20,showExpectedAnswerOption:{type:a.K9.ALWAYS},showName:!0,useMaximumScore:!1}},r={type:i.ZP.FILL_IN_THE_BLANKS,source:{showGuidanceAfterResponseOption:{type:"Attempts",passedFrom:1},arePartialPointsAllowed:!1,bloomsObjectiveLevel:"",learningObjectives:"",maxAttemptsCount:1,metadata:{files:[],opened:[],tags:[{name:"Assessment Type",value:"Fill in the Blanks"}]},points:20,showExpectedAnswerOption:{type:a.K9.ALWAYS},showName:!0,useMaximumScore:!1}},c={type:i.ZP.ECORNELL_FIB,source:{showGuidanceAfterResponseOption:{type:"Attempts",passedFrom:1},forceScoreShow:!0,highlightCorrectAnswers:!0}},l={type:i.ZP.FREE_TEXT,source:{arePartialPointsAllowed:!1,bloomsObjectiveLevel:"",learningObjectives:"",maxAttemptsCount:0,metadata:{files:[],opened:[],tags:[{name:"Assessment Type",value:"Free Text"}]},points:20,previewType:"NONE",rubrics:[],showGuidanceAfterResponseOption:{type:a.Ie.NEVER},showName:!0}},d={type:i.ZP.FREE_TEXT_AUTO},u={type:i.ZP.CODE_OUTPUT_COMPARE,source:{arePartialPointsAllowed:!0,maxAttemptsCount:0,metadata:{files:[],opened:[],tags:[{name:"Assessment Type",value:"Standard Code Test"}]},points:20,preExecuteCommand:"",showExpectedAnswerOption:{type:a.K9.ALWAYS},showGuidanceAfterResponseOption:{type:a.Ie.NEVER},showName:!0,useMaximumScore:!1}},h={type:i.ZP.CUSTOM},p={type:i.ZP.MATH},f={type:i.ZP.GRADE_BOOK},m={type:i.ZP.PARSONS_PUZZLE,source:{showGuidanceAfterResponseOption:{type:"Attempts",passedFrom:2},maxAttemptsCount:0,metadata:{files:[],opened:[],tags:[{name:"Assessment Type",value:"Parsons Puzzle"}]},points:20,showName:!0,useMaximumScore:!1}},g={type:i.ZP.JUPYTER_NOTEBOOK},b={type:i.ZP.RANDOM},v={type:i.ZP.SPLICE,source:{arePartialPointsAllowed:!0}},y={type:i.ZP.LLM_BASED_RUBRIC},w={type:i.ZP.LLM_BASED_AUTO_RUBRIC},_=30,k={};k[i.ZP.CODE_OUTPUT_COMPARE]="Standard Code Test",k[i.ZP.TEST]="Advanced Code Test",k[i.ZP.MULTIPLE_CHOICE]="Multiple Choice",k[i.ZP.FILL_IN_THE_BLANKS]="Fill in the Blanks",k[i.ZP.ECORNELL_FIB]="eCornell Fill in the Blanks",k[i.ZP.FREE_TEXT]="Free Text",k[i.ZP.FREE_TEXT_AUTO]="Free Text Autograde",k[i.ZP.GRADE_BOOK]="Grade Book",k[i.ZP.MATH]="Math Assessment",k[i.ZP.PARSONS_PUZZLE]="Parsons Puzzle";const P="Assessment Type",C="Bloom's level",x="Learning Objectives",E={};E[P]=!0,E[C]=!0,E[x]=!0;const S=["Name","Id"],I={[i.ZP.TEST]:s,[i.ZP.MULTIPLE_CHOICE]:o,[i.ZP.FILL_IN_THE_BLANKS]:r,[i.ZP.ECORNELL_FIB]:c,[i.ZP.FREE_TEXT]:l,[i.ZP.FREE_TEXT_AUTO]:d,[i.ZP.CODE_OUTPUT_COMPARE]:u,[i.ZP.CUSTOM]:h,[i.ZP.SPLICE]:v,[i.ZP.MATH]:p,[i.ZP.GRADE_BOOK]:f,[i.ZP.PARSONS_PUZZLE]:m,[i.ZP.JUPYTER_NOTEBOOK]:g,[i.ZP.RANDOM]:b,[i.ZP.LLM_BASED_RUBRIC]:y,[i.ZP.LLM_BASED_AUTO_RUBRIC]:w},A={COC_SEQUENCE_FIELDS:5,COC_TIMEOUT:_,TEST_CUSTOM_TIMEOUT:300,FTA_TIMEOUT:40,BLOOMS_LEVEL:{1:"Level I - Remembering",2:"Level II - Understanding",3:"Level III - Applying",4:"Level IV - Analyzing",5:"Level V - Evaluating",6:"Level VI - Creating"},ASSESSMENT_NAME_BY_TYPE:k,PROTECTED_TAG_NAMES:S,REQUIRED_TAGS:["Content","Programming Language"],ASSESSMENT_TYPE_TAG:P,BLOOMS_LEVEL_TAG:C,LEARNING_OBJECTIVES_TAG:x,AUTO_TAGS:E,FROM_LIBRARY_DUMMY:"<<<<<library-assessment>>>>>",ASSESSMENT_USED:"used",ASSESSMENT_UNUSED:"unused"}},58728:(e,t,n)=>{"use strict";n.d(t,{Er:()=>m,H_:()=>f,PT:()=>h,rN:()=>g});var i=n(96486),s=n.n(i),a=n(49721),o=n(42270),r=n(26024);const c=n(85886).default.ASSESSMENTS_ANSWERS_FILE,l="authorAnswers";let d=null;async function u(){return a.default.currentProject.exists(c)?(0,r.co)().then((e=>async function(e){if(!e||0===e.length)return;const t=s().map(e,f);return Promise.all(t).then((()=>a.default.currentProject.deleteItems([c])))}(e))).catch((()=>{})):{}}async function h(){return null!==d?p(s().cloneDeep(d)):u().then((()=>(0,o.rQ)(a.default.currentProject.guid,l).then((e=>s()(e).map((e=>{try{return JSON.parse(e.value)}catch(e){return null}})).filter((e=>null!==e)).value())))).then((e=>(d=s().keyBy(e,"taskId"),p(e))))}function p(e){return s().values(e)}function f(e){if(!e||!e.taskId)return;const t=e.taskId,n=JSON.stringify(e);return(0,o.xG)(a.default.currentProject.guid,l,t,n).then((()=>function(e,t){null===d&&(d={}),d[e]=t}(t,e)))}function m(){const e=s().map(d,(e=>g(e.taskId)));return d={},Promise.all(e)}function g(e){return delete d[e],(0,o.xG)(a.default.currentProject.guid,l,e,void 0)}},22346:(e,t,n)=>{"use strict";n.d(t,{Z:()=>j});var i=n(52308),s=n.n(i),a=n(96486),o=n.n(a),r=n(88228),c=n(76900),l=n(6989),d=n(96513),u=n(49721);const h=2e4,p={"ParsonsWidget._graders.LineBasedGrader":"1","ParsonsWidget._graders.VariableCheckGrader":"2","ParsonsWidget._graders.UnitTestGrader":"3","ParsonsWidget._graders.LanguageTranslationGrader":"4","ParsonsWidget._graders.TurtleGrader":"5"};function f(e,t){var n,i=function(e){var t={name:e.find("#name"),showName:e.find("#show_name")},n={data:{name:t.name.val(),showName:t.showName.is(":checked")}};n.data.name||S(n,{el:t.name,message:"Name is required"});return n}(t);switch(e){case c.ZP.MULTIPLE_CHOICE:n=function(e){var t={question:e.find("#question")},n={data:{instructions:t.question.val()}};n.data.instructions||S(n,{el:t.question,message:"Question is required"});return n}(t);break;case c.ZP.GRADE_BOOK:n={data:{}};break;case c.ZP.MATH:n=function(e){var t={question:e.find("#question")},n={data:{question:t.question.val()}};n.data.question||S(n,{el:t.question,message:"Question XML is required"});return n}(t);break;case c.ZP.RANDOM:return function(e){const t={name:e.find("#name")},n={data:{name:t.name.val()}};n.data.name||S(n,{el:t.name,message:"Name is required"});return n}(t);case c.ZP.LLM_BASED_RUBRIC:n=m(t);break;case c.ZP.LLM_BASED_AUTO_RUBRIC:n=g(t);break;default:n={data:{instructions:t.find("#instructions").val()}}}return A(i,n)}const m=e=>{const t={instructions:e.find("#instructions")},n={data:{instructions:t.instructions.val()}};return n.data.instructions||S(n,{el:t.instructions,message:"Instructions is required"}),n},g=e=>{const t={instructions:e.find("#instructions")},n={data:{instructions:t.instructions.val()}};return n.data.instructions||S(n,{el:t.instructions,message:"Instructions is required"}),n};function b(e,t){switch(e){case c.ZP.CODE_OUTPUT_COMPARE:return function(e){var t={command:e.find("#cmd"),preExecuteCommand:e.find("#pre_cmd"),timeout:e.find("#timeout")},n={data:{command:t.command.val(),preExecuteCommand:t.preExecuteCommand.val(),options:{timeout:parseInt(t.timeout.val(),10)||l.LQ}}};n.data.command||S(n,{el:t.command,message:"Command is required"});return n}(t);case c.ZP.TEST:return function(e){const t={command:e.find("#command"),codeEnvConfig:e.find("#codeEnvConfig"),pythonPath:e.find("#pythonpath")},n={data:{command:t.command.val(),codeEnvConfig:t.codeEnvConfig.val()}};o().isEmpty(t.pythonPath.val())||(n.data.pythonPath=t.pythonPath.val());const i=e.find("#test_type").val();if(i!==c.ZP.TEST_SUBTYPES.CUSTOM){const t=T(e),i=JSON.parse(t);n.data.codeEnvConfig=t,o().isEmpty(i.files)&&S(n,{el:e.find("#test-add-case"),message:"Add a test case"}),n.data.command="python /usr/share/codio/assessments/assessments.py",n.data.timeoutSeconds=l.ZP.TEST_CUSTOM_TIMEOUT}else n.data.command||S(n,{el:t.command,message:"Command is required"}),delete n.data.codeEnvConfig;return n.data.timeoutSeconds=parseInt(e.find("#timeout").val(),10),n}(t);case c.ZP.MULTIPLE_CHOICE:return function(e){var t={multiple_response:e.find("#multiple_response"),is_randomized:e.find("#is_randomized"),answers:e.find(".answers :input").not(":button")},n={data:{multipleResponse:t.multiple_response.is(":checked"),isRandomized:t.is_randomized.is(":checked")}};n.data.answers=o()(t.answers).chunk(3).map((function(e){var t={};return o().each(e,(function(e){var n=s()(e),i=n.attr("name");t[i]="correct"===i?n.is(":checked"):n.val()})),t})).value(),o().some(n.data.answers,(function(e){return""===e.answer}))&&S(n,{el:null,message:"Answer can not be empty"});n.data.answers.length<2&&S(n,{el:null,message:"There should be two answers minimum"});o().some(n.data.answers,(function(e){return e.correct}))||S(n,{el:null,message:"There should be minimum one correct answer"});return n}(t);case c.ZP.FILL_IN_THE_BLANKS:return function(e){var t={showValues:e.find("#show_values"),text:e.find("#text"),distractors:e.find("#fib-assessments-distractors")},n={data:{showValues:t.showValues.is(":checked"),text:t.text.val(),distractors:t.distractors.val()}};n.data.text||S(n,{el:t.text,message:"Text is required"});n.data.text.match(/<<</)&&n.data.text.match(/>>>/)||S(n,{el:t.text,message:"You have not filled in any Blanks"});n.data.showValues||(n.data.distractors="");return n}(t);case c.ZP.ECORNELL_FIB:return function(e){const t={showValues:e.find("#show_values"),text:e.find("#text"),distractors:e.find("#fib-assessments-distractors")},n={data:{showValues:t.showValues.is(":checked"),text:t.text.val(),distractors:t.distractors.val()}};n.data.text||S(n,{el:t.text,message:"Text is required"});n.data.text.match(/<<</)&&n.data.text.match(/>>>/)||S(n,{el:t.text,message:"You have not filled in any Blanks"});n.data.showValues||(n.data.distractors="");return n}(t);case c.ZP.FREE_TEXT_AUTO:return function(e){var t={command:e.find("#command"),timeout:e.find("#timeout")},n={data:{command:t.command.val(),timeoutSeconds:parseInt(t.timeout.val(),10)||l.ZP.FTA_TIMEOUT}};n.data.command||S(n,{el:t.command,message:"Command is required"});return n}(t);case c.ZP.PARSONS_PUZZLE:return function(e){var t=e.closest(".assessment-editor").data("assessment"),n=r.ZP.getParsonsSettingsFromAssessment(t),i=e.data("parsonsUI"),s=i?i.export():n,a=o().omit(s.options,["grader"]);o().isNumber(a.max_wrong_lines)&&a.max_wrong_lines<0&&(a.max_wrong_lines=0);return{data:{initial:s.initial,options:JSON.stringify(a),grader:p[s.options.grader]}}}(t);case c.ZP.RANDOM:return function(e){var t=[];e.find(".tag-item").each((function(){var e={tag:s()(this).find('[name="tag_name"]'),value:s()(this).find('[name="tag_value"]')},n={name:e.tag.val(),value:e.value.val()};t.push(n)}));let n={data:{libraryId:e.find("#libraryId").val(),search:t,libraryName:e.find("#random-assessment-library-name").text()}};n.data.libraryId||S(n,{el:e.find("#browse-library-assessments"),message:"Search is required"});return n}(t);case c.ZP.SPLICE:return v(t);default:return{data:{}}}}const v=e=>{const t=e.find("#url"),n={data:{url:t.val()}};return n.data.url||S(n,{el:t,message:"Url is required"}),n};async function y(e,t){var n,i=function(e){const t={guidance:e.find("#guidance"),maxAttemptsCount:e.find("#max_attempts_count"),passedInputScore:e.find("#show-guidance-passed-input-score"),passedInputAttempts:e.find("#show-guidance-passed-input-attempts")},n=e.find(".show-guidance-type-input:checked").val(),i={type:n};"Score"===n?i.passedFrom=parseInt(t.passedInputScore.val(),10):"Attempts"===n&&(i.passedFrom=parseInt(t.passedInputAttempts.val(),10));const s=e.find("#set_number_of_attempts").is(":checked"),a=s?parseInt(t.maxAttemptsCount.val(),10):0,r={data:{guidance:t.guidance.val(),showGuidanceAfterResponseOption:i,maxAttemptsCount:a}};s&&(o().isNaN(a)||a<1||a>100)&&S(r,{el:t.maxAttemptsCount,message:"Correct number of attempts should be greater than 0 and less than 100"});if(("Score"===n||"Attempts"===n)&&(o().isNaN(i.passedFrom)||i.passedFrom<0||i.passedFrom>100)){const e="Score"===n?'"Score is greater than or equal to a %"':'"After X attempts"';S(r,{el:"Score"===n?t.passedInputScore:t.passedInputAttempts,message:"".concat(e," should be greater or equal to 0 and less than 100")})}return r}(t);switch(e){case c.ZP.CODE_OUTPUT_COMPARE:n=function(e){const t={points:e.find("#points"),ignoreCase:e.find("#ignore_case"),ignoreWhiteSpaces:e.find("#ignore_white_spaces"),matchSubstring:e.find("#match_substring"),sequence:e.find(".sequence :input").filter(":not(button)"),arePartialPointsAllowed:e.find("#allow_partial_points"),useMaximumScore:e.find("#use_maximum_score")},n=t.ignoreWhiteSpaces.is(":checked"),i={data:{points:parseInt(t.points.val(),10),options:{ignoreCase:t.ignoreCase.is(":checked"),ignoreWhitespaces:n,ignoreNewline:n,matchSubstring:t.matchSubstring.is(":checked")},showExpectedAnswerOption:w(e),arePartialPointsAllowed:t.arePartialPointsAllowed.is(":checked"),useMaximumScore:t.useMaximumScore.is(":checked")}},a=E(i.data.points,t.points);a&&S(i,a);return A(i,function(e,t,n){const i={data:{}},a="If Substring Match option is enabled, the Expected Output cannot be empty/blank";return i.data.sequence=o()(e).chunk(l.ZP.COC_SEQUENCE_FIELDS).map((function(e){const r={};o().each(e,(function(e){const t=s()(e),n=t.attr("name");r[n]="showFeedback"===n?t.is(":checked"):t.val()}));const c=t=>{const n=o().find(e,(e=>"output"===e.name));S(i,{el:s()(n),message:t})};if(t){let e=r.output;n&&(e=e.trim()),""===e&&c(a)}if(r.output&&r.output.length>h){c("Expected output field content is too large, it must not exceed 2,500 lines.")}return r})).value(),i}(t.sequence,i.data.options.matchSubstring,n))}(t);break;case c.ZP.TEST:n=function(e){const t={points:e.find("#points"),arePartialPointsAllowed:e.find("#allow_partial_points"),useMaximumScore:e.find("#use_maximum_score")},n={data:{points:parseInt(t.points.val(),10),arePartialPointsAllowed:t.arePartialPointsAllowed.is(":checked"),useMaximumScore:t.useMaximumScore.is(":checked")}},i=E(n.data.points,t.points);i&&S(n,i);return n}(t);break;case c.ZP.MULTIPLE_CHOICE:n=function(e){const t={correct_points:e.find("#correct_points"),incorrect_points:e.find("#incorrect_points"),arePartialPointsAllowed:e.find("#allow_partial_points"),useMaximumScore:e.find("#use_maximum_score")},n={data:{showExpectedAnswerOption:w(e),points:parseInt(t.correct_points.val(),10),incorrectPoints:parseInt(t.incorrect_points.val(),10),arePartialPointsAllowed:t.arePartialPointsAllowed.is(":checked"),useMaximumScore:t.useMaximumScore.is(":checked")}},i=E(n.data.points,t.correct_points);i&&S(n,i);const s=E(n.data.incorrectPoints,t.incorrect_points,!0);s&&S(n,s);return n}(t);break;case c.ZP.FILL_IN_THE_BLANKS:n=function(e){const t={points:e.find("#points"),arePartialPointsAllowed:e.find("#allow_partial_points"),useMaximumScore:e.find("#use_maximum_score")},n={data:{showExpectedAnswerOption:w(e),points:parseInt(t.points.val(),10),arePartialPointsAllowed:t.arePartialPointsAllowed.is(":checked"),useMaximumScore:t.useMaximumScore.is(":checked")}},i=E(n.data.points,t.points);i&&S(n,i);return n}(t);break;case c.ZP.ECORNELL_FIB:n=function(e){const t={points:e.find("#points"),arePartialPointsAllowed:e.find("#allow_partial_points"),useMaximumScore:e.find("#use_maximum_score"),forceScoreShow:e.find("#force_score_show"),highlightCorrectAnswers:e.find("#highlight_correct_answers")},n={data:{showExpectedAnswerOption:w(e),points:parseInt(t.points.val(),10),arePartialPointsAllowed:t.arePartialPointsAllowed.is(":checked"),useMaximumScore:t.useMaximumScore.is(":checked"),forceScoreShow:t.forceScoreShow.is(":checked"),highlightCorrectAnswers:t.highlightCorrectAnswers.is(":checked")}},i=E(n.data.points,t.points);i&&S(n,i);return n}(t);break;case c.ZP.FREE_TEXT:n=function(e){const t={previewType:e.find("#previewType"),arePartialPointsAllowed:e.find("#allow_partial_points"),points:e.find("#points")},n=k(e),i={data:{previewType:t.previewType.val(),arePartialPointsAllowed:t.arePartialPointsAllowed.is(":checked"),points:parseInt(t.points.val(),10),rubrics:n}},s=E(i.data.points,t.points);s&&S(i,s);return i}(t);break;case c.ZP.FREE_TEXT_AUTO:n=function(e){const t={previewType:e.find("#previewType"),arePartialPointsAllowed:e.find("#allow_partial_points"),points:e.find("#points"),useMaximumScore:e.find("#use_maximum_score")},n={data:{arePartialPointsAllowed:t.arePartialPointsAllowed.is(":checked"),previewType:t.previewType.val(),points:parseInt(t.points.val(),10),useMaximumScore:t.useMaximumScore.is(":checked")}},i=E(n.data.points,t.points);i&&S(n,i);return n}(t);break;case c.ZP.GRADE_BOOK:return function(e){const t={points:e.find("#points"),arePartialPointsAllowed:e.find("#allow_partial_points")},n=k(e),i={data:{points:parseInt(t.points.val(),10),arePartialPointsAllowed:t.arePartialPointsAllowed.is(":checked"),rubrics:n}},s=E(i.data.points,t.points);s&&S(i,s);return i}(t);case c.ZP.MATH:n=function(e){const t={points:e.find("#points")},n={data:{showExpectedAnswerOption:w(e),points:parseInt(t.points.val(),10)}},i=E(n.data.points,t.points);i&&S(n,i);return n}(t);break;case c.ZP.PARSONS_PUZZLE:n=function(e){const t={points:e.find("#points"),useMaximumScore:e.find("#use_maximum_score")},n={data:{points:parseInt(t.points.val(),10),useMaximumScore:t.useMaximumScore.is(":checked")}},i=E(n.data.points,t.points);i&&S(n,i);return n}(t);break;case c.ZP.RANDOM:return function(e){var t={points:e.find("#points"),useMaximumScore:e.find("#use_maximum_score")},n={data:{points:parseInt(t.points.val(),10),useMaximumScore:t.useMaximumScore.is(":checked")}},i=E(n.data.points,t.points);i&&S(n,i);return n}(t);case c.ZP.SPLICE:return P(t);case c.ZP.LLM_BASED_RUBRIC:n=await async function(e){const t={points:e.find("#points"),solution:e.find("#solution")},n={},i=C(e,n),s=o().sumBy(i,(e=>e.points)),a=t.solution.val();n.data={points:s,arePartialPointsAllowed:!0,rubrics:i};const r=E(n.data.points,t.points);r&&S(n,r);0===n.data.rubrics.length&&S(n,{el:null,message:"At least one rubric item is required"});if(a&&u.default.currentProject.exists(a)){const e=await u.default.currentProject.unixFile(a);n.data.solutions=[{path:a,content:e.content}]}else S(n,{el:t.solution,message:"File not found"});return n}(t);break;case c.ZP.LLM_BASED_AUTO_RUBRIC:n=await async function(e){const t={points:e.find("#points"),solution:e.find("#solution")},n={},i=C(e,n),s=o().sumBy(i,(e=>e.points)),a=t.solution.val();n.data={points:s,arePartialPointsAllowed:!0,rubrics:i};const r=E(n.data.points,t.points);r&&S(n,r);0===n.data.rubrics.length&&S(n,{el:null,message:"At least one rubric item is required"});if(a&&u.default.currentProject.exists(a)){const e=await u.default.currentProject.unixFile(a);n.data.solutions=[{path:a,content:e.content}]}else S(n,{el:t.solution,message:"File not found"});return n}(t);break;default:n={data:{}}}return A(i,n)}function w(e){return{type:e.find(".show-expected-answer-type-input:checked").val()}}function _(e){const t=parseInt(e,10)||0;return Math.max(Math.min(t,1e3),0)}function k(e){const t=e.find(".assessments-grade-rubrics--item");return o().map(t,(e=>{const t=s()(e);return{id:t.data("id"),weight:_(t.find(".assessments-grade-rubrics--weight-edit").val()),message:t.find(".assessments-grade-rubrics--message-edit").val()}}))}const P=e=>{const t={points:e.find("#points"),useMaximumScore:e.find("#use_maximum_score")},n={data:{points:parseInt(t.points.val(),10),arePartialPointsAllowed:!0,useMaximumScore:t.useMaximumScore.is(":checked")}},i=E(n.data.points,t.points);return i&&S(n,i),n};const C=(e,t)=>{const n=e.find(".llm-rubric-item-container");return o().map(n,(e=>{const n=s()(e),i=n.find(".assessment-llm-based-rubric-text-input"),a=i.val();a||S(t,{el:i,message:"Rubric should be specified"});const o=n.find(".assessment-llm-based-rubric-points-input"),r=_(o.val());return r<=0&&S(t,{el:o,message:"Points should be positive number"}),{id:n.find(".assessment-llm-based-rubric-id-input").val(),title:a,description:n.find(".assessment-llm-based-rubric-description-input").val(),points:r}}))};function x(e,t){var n={data:{metadata:{}}},i={bloomsObjectiveLevel:t.find("#blooms"),learningObjectives:t.find("#learningObjectives"),tags:t.find(".tag-item"),files:"files",layout:t.find("#layout")};return function(e,t,n){var i=[];n.each((function(){var t={tag:s()(this).find('[name="tag_name"]'),value:s()(this).find('[name="tag_value"]')},n={name:t.tag.val(),value:t.value.val()};i.push(n);l.Z0.map((e=>e.toLowerCase())).includes(n.name.toLowerCase())&&I(e,{el:t.tag,message:"".concat(n.name," is protected (internal) tag name")}),t.tag.attr("required")&&!n.value&&I(e,{el:t.value,message:'"'+n.name+'" tag value is required'})})),i.unshift({name:l.ZP.ASSESSMENT_TYPE_TAG,value:l.ZP.ASSESSMENT_NAME_BY_TYPE[t]}),e.data.metadata.tags=o()(i).filter((function(e){return e.name&&e.value})).uniqBy("name").value()}(n,e,i.tags),o().defaultsDeep(n,{data:{metadata:{files:[],layout:i.layout.val()},bloomsObjectiveLevel:i.bloomsObjectiveLevel.val(),learningObjectives:i.learningObjectives.val()}}),n.data.learningObjectives||I(n,{el:i.learningObjectives,message:"Learning Objectives is required"}),n.data.bloomsObjectiveLevel||I(n,{el:i.bloomsObjectiveLevel,message:"Bloom's Level is required"}),n}function E(e,t,n){var i=t.val();return/^[-+]?\d+$/.test(i)?function(e){return e<0||e>1e3}(e)?{el:t,message:n?"Incorrect points should be greater or equal to 0 and less than 1000":"Correct points should be greater to 0 and less than 1000"}:void 0:{el:t,message:n?"Incorrect points should be an integer":"Correct points should be an integer"}}function S(e,t){e.errors=e.errors||[],e.errors.push(t)}function I(e,t){e.libErrors=e.libErrors||[],e.libErrors.push(t)}function A(e,t){var n=o().cloneDeep(e);return o().assign(n.data,t.data),(n.errors||t.errors)&&(n.errors=n.errors||[],n.errors=n.errors.concat(t.errors||[])),n}function T(e){const t=e.find("#test_type").val();if(t!==c.ZP.TEST_SUBTYPES.CUSTOM){const n=e.find("#test_subtype").val(),i=t===c.ZP.TEST_SUBTYPES.JAVA,a=t===c.ZP.TEST_SUBTYPES.PYTHON,r=e.find(".test-case-info"),l=o().map(r,(function(e){const t=s()(e);return i&&"junit"===n?{filePath:t.find(".test-case-path").text(),className:t.find(".test-case-class").text()}:t.find(".test-case-path").text()})),d=e.closest(".assessment-editor").find("#grading_form"),u=parseInt(d.find("#points").val(),10),h=parseInt(e.find("#timeout").val(),10);let p={type:t,subtype:n,files:l,maxPoints:u,timeout:h};if(i&&"junit"===n){const t=e.find("#sources").val(),n=e.find("#testsources").val(),i=e.find("#junit-version").val(),s={wd:e.find("#wd").val(),sources:t,libs:e.find("#libs").val(),testsources:n,jUnitVersion:i};p=o().extend(p,s)}else if(i&&"style"===n){const t=e.find("#checkstyle-version").val()||"";p=o().extend(p,{configFile:e.find("#configFile").val(),checkStyleVersion:t})}else a&&"unittest"===n&&(p=o().extend(p,{executable:e.find("#executable").val(),pythonwd:e.find("#pythonwd").val()}));return JSON.stringify(p)}}const j={getData:async function(e,t,n){const i=t.find("#"+n);switch(n){case"general_form":return f(e,i);case"execution_form":return b(e,i);case"grading_form":return y(e,i);case"metadata_form":return x(e,i);default:return{data:{}}}},genAdvTestConfig:T,processForLibrary:function(e){var t=o().cloneDeep(e),n=t.bloomsObjectiveLevel,i=t.learningObjectives;return i&&t.metadata.tags.splice(1,0,{name:l.ZP.LEARNING_OBJECTIVES_TAG,value:i}),n&&t.metadata.tags.splice(1,0,{name:l.ZP.BLOOMS_LEVEL_TAG,value:l.ZP.BLOOMS_LEVEL[n]}),o().omit(t,["points","incorrectPoints","bloomsObjectiveLevel","learningObjectives"])},getFilesFromOpened:function(e,t){return o().map(t,(function(t){return function(e,t){switch(t.type){case d.Z.TYPE.FILE:case d.Z.TYPE.TUTOR:return t.content;case d.Z.TYPE.PREVIEW:var n=new RegExp("^http(s?):\\/\\/"+e+"\\/","gi");return n.test(t.content)?t.content.replace(n,""):/^http(s?):/.test(t.content)?null:t.content;default:return null}}(e,t)}))},convertLibAssessment:function(e){var t=o().omit(e,["type","assessmentId","libraryId","version","parametersScript"]),n=[];return o().each(e.metadata.tags,(function(e,t){n.push({name:t,value:e})})),t.metadata.tags=n,{type:e.type,linkedId:e.assessmentId,libraryId:e.libraryId,version:e.version,source:t,parameters:e.parametersScript}}}},75036:(e,t,n)=>{"use strict";n.r(t),n.d(t,{canGenerate:()=>W,canRegenerate:()=>z,generate:()=>G,generateAssessmentFromData:()=>K,regenerate:()=>H});var i=n(96486),s=n.n(i),a=n(52308),o=n.n(a),r=n(177),c=n.n(r),l=n(49721),d=n(19575),u=n(4418),h=n(46544),p=n(93443),f=n(97137),m=n(28893),g=n(34335),b=n(76900);const v=e=>e?e.replace(/(```[a-z0-9]+)/gm,"$1-hide-clipboard"):"",y=e=>{if(!e)return;const t={};return e.tags&&(t.tags=s().map(e.tags,(e=>{let{name:t,value:n}=e;return{name:t,value:n}}))),t},w=e=>{switch(e.type){case b.ZP.MULTIPLE_CHOICE:return(e=>({source:{answers:s().map(e.options,(e=>{let{option:t,correct:n}=e;return{answer:v(t),correct:n}})),showExpectedAnswerOption:e.showExpectedAnswerOption,multipleResponse:e.multipleResponse,maxAttemptsCount:e.maxAttemptsCount}}))(e);case b.ZP.FILL_IN_THE_BLANKS:return(e=>({source:{text:e.text,maxAttemptsCount:e.maxAttemptsCount,showExpectedAnswer:e.showExpectedAnswer,showValues:e.distractors&&e.distractors.length>0,distractors:e.distractors}}))(e);case b.ZP.PARSONS_PUZZLE:return(e=>{let t=e.distractor_blocks||"";t=t.replace(/#distractor$/gm,"").split("\n").map((e=>"".concat(e,"#distractor"))),t=s().filter(t,(e=>!!e)).join("\n");const n=t?"Not all the blocks will be used and they are to indent when necessary, drag the correct blocks into the box below.":"Rearrange the blocks in the right order in the box.";return{source:{initial:[s().filter((e.code_for_blocks||"").split("\n"),(e=>!!e)).join("\n"),t].join("\n"),grader:"1",options:JSON.stringify({sortableId:"sortable",max_wrong_lines:10,exec_limit:2500,can_indent:!0,x_indent:50,lang:"en",show_feedback:!0,trashId:"sortableTrash"}),instructions:"".concat(n,"\n").concat(e.instructions||"")}}})(e);case b.ZP.CODE_OUTPUT_COMPARE:return(e=>{const t=s().map(e.sequence,(e=>{return{arguments:e.cmdarg||"",input:e.stdin||"",output:e.output||"",showFeedback:(t=e.showFeedback,!(!s().isString(t)||"true"!==t.toLowerCase())||!!t),feedback:e.feedback};var t}));return{source:{command:e.command,sequence:t,options:{timeout:30,ignoreCase:!0,ignoreWhitespaces:!0,ignoreNewline:!0,matchSubstring:!1}}}})(e);default:return{}}},_=e=>{console.debug("generated assessment",e);const t={type:(n=e).type,source:{name:n.name,showName:n.showName,bloomsObjectiveLevel:n.bloomsTaxonomyLevel||n.bloomsObjectiveLevel,instructions:v(n.instructions),learningObjectives:n.learningObjectives,guidance:v(n.rationale),metadata:y(n.metadata)}};var n;const i=w(e);return s().merge(t,i)},k=e=>({type:e.type,name:e.source.name,instructions:e.source.instructions,rationale:e.source.guidance,learningObjectives:e.source.learningObjectives||"",bloomsTaxonomyLevel:e.source.bloomsObjectiveLevel||""}),P=e=>{switch(e.type){case b.ZP.MULTIPLE_CHOICE:return(e=>{const t=k(e),n=s().map(e.source.answers,(e=>({option:e.answer,correct:e.correct})));return{multipleResponse:e.source.multipleResponse,options:n,...t}})(e);case b.ZP.FILL_IN_THE_BLANKS:return(e=>{const t=k(e);return{text:e.source.text,distractors:e.source.distractors,...t}})(e);case b.ZP.PARSONS_PUZZLE:return(e=>{const t=[],n=[];s().forEach(e.source.initial.split("\n"),(e=>{s().endsWith(e,"#distractor")?t.push(e):n.push(e)}));const i=k(e);return{code_for_blocks:n.join("\n"),distractor_blocks:t.join("\n"),...i}})(e);case b.ZP.FREE_TEXT:return(e=>k(e))(e);default:throw new Error("Not supported")}};var C=n(93800),x=n(93702);const E=c().compile('<div class="scrollable generate-form-container">\n  <div class="generate-assessment generate-form">\n    <h3 class="generate-form-title">Generate Assessment Using AI</h3>\n    <form action="/" method="post" class="generate-form-form">\n      <fieldset class="generate-form-prompt-container">\n        <label for="generate-assessment-prompt" class="generate-form-prompt-label">Input:</label>\n        <textarea id="generate-assessment-prompt" class="generate-form-prompt-text" rows="6"></textarea>\n      </fieldset>\n      <span>\n        Click <a href="https://docs.codio.com/instructors/authoring/assessments/ai-assessment-generation.html" target="_blank">here</a> to find input examples.\n      </span>\n    </form>\n    <div class="generate-form-controls">\n      <button type="button" class="btn btn-primary generate-form-generate-button">Generate Using AI</button>\n    </div>\n    <hr class="generate-form-spacer" />\n    <div class="generate-form-preview-container">\n      {{> aEditorGenAssessmentPreview}}\n    </div>\n    <footer class="generate-form-footer">\n      <button type="button" class="btn btn-primary generate-form-save-button" disabled>Approve</button>\n      <button type="button" class="btn btn-default generate-form-cancel-button">Cancel</button>\n    </footer>\n  </div>\n</div>\n'),S=c().compile('<div class="scrollable generate-form-container">\n    <div class="generate-assessment generate-form">\n        <h3 class="generate-form-title">Regenerate assessment</h3>\n        <form action="/" method="post">\n            <fieldset class="generate-form-prompt-container">\n                <label for="generate-assessment-prompt" class="generate-form-prompt-label">Optional guidelines:</label>\n                <textarea id="generate-assessment-prompt" class="generate-form-prompt-text" rows="6"\n                          placeholder="Use the text box to add specific instructions or guidelines for the assessment update.\n\nExamples:\n- Update the assessment focused on new for loop features in Java\n- Update the assessment to using lists in Python. The question should be about counting and adding kittens to a list"></textarea>\n            </fieldset>\n        </form>\n        <div class="generate-form-controls">\n            <button type="button" class="btn btn-primary generate-form-generate-button">Regenerate</button>\n        </div>\n        <hr class="generate-form-spacer" />\n        <div class="generate-form-preview-container">\n            {{> aEditorGenAssessmentPreview}}\n        </div>\n        <footer class="generate-form-footer">\n            <button type="button" class="btn btn-primary generate-form-save-button" disabled>Approve</button>\n            <button type="button" class="btn btn-default generate-form-cancel-button">Cancel</button>\n        </footer>\n    </div>\n</div>\n'),I=c().compile(C),A=[b.ZP.FREE_TEXT,b.ZP.MULTIPLE_CHOICE,b.ZP.PARSONS_PUZZLE,b.ZP.FILL_IN_THE_BLANKS,b.ZP.CODE_OUTPUT_COMPARE],T=[b.ZP.FREE_TEXT,b.ZP.MULTIPLE_CHOICE,b.ZP.PARSONS_PUZZLE,b.ZP.FILL_IN_THE_BLANKS];let j=[];const Z=e=>e.find(".generate-assessment").data("index"),O=e=>{const t=Z(e);return s().isNumber(t)?j[t]:null},N=e=>{const t=e.find(".generate-form");t.addClass("generate-form--progress"),t.find(".generate-form-generate-button").prop("disabled",!0).html("Generating..."),e.find(".generate-form-save-button").prop("disabled",!0),t.find(".generate-form-form :input").prop("disabled",!0)},D=e=>{const t=e.find(".generate-form");t.removeClass("generate-form--progress");const n=!s().isEmpty(j);t.find(".generate-form-generate-button").prop("disabled",!1).html(n?"Regenerate Using AI":"Generate Using AI"),n&&e.find(".generate-form-save-button").prop("disabled",!1),t.find(".generate-form-form :input").prop("disabled",!1)},M=e=>{const t=O(e),n=Z(e);if(!t)return;e.find("#generate-assessment-prompt").val(t.prompt);const i=e.find(".generate-form-preview-container"),a=((e,t)=>{if(e.type===b.ZP.PARSONS_PUZZLE){const e=t.distractor_blocks.replace(/#distractor$/gm,"").split("\n");return{distractors:s().filter(e,(e=>!!e)),code:s().filter(t.code_for_blocks.split("\n"),(e=>!!e))}}return{}})(t.assessment,t.generatedObj),r=o()(I({assessment:t.assessment,custom:a,disableBack:0===n,disableForward:n===j.length-1,files:t.files,upVote:t.upVote,downVote:t.downVote}));r.find(".js-markdown").each(((e,t)=>{const n=o()(t);n.html(d.default.markdown.renderSync(n.text()))}));const c=i.find(".generate-form-preview");c.length?c.replaceWith(r):i.append(r)},R=(e,t,n,i,s)=>{const a=e.find("#generate-assessment-prompt").val();j.push({prompt:a,assessment:t,generatedObj:n,files:i,runId:s}),e.find(".generate-assessment").data("index",j.length-1)},L=(e,t,n,i,a)=>{const o=(t,n)=>{t.preventDefault();const i=Z(e);e.find(".generate-assessment").data("index",i+n),M(e)};p.Z.on(e,"click",".generate-form-preview-arrow-back",(function(e){o(e,-1)})),p.Z.on(e,"click",".generate-form-preview-arrow-forward",(function(e){o(e,1)})),p.Z.on(e,"click",".generate-form-generate-button",(function(n){n.preventDefault(),a?(async(e,t)=>{N(e);try{const n=e.find("#generate-assessment-prompt").val(),{regeneratedAssessment:i,generatedObj:s,runId:a}=await J(t,n);R(e,i,s,void 0,a),M(e)}catch(e){f.Z.error(e.message)}finally{D(e)}})(e,t):(async(e,t)=>{N(e);try{const n=e.find("#generate-assessment-prompt").val(),{assessment:i,generatedObj:s,files:a,runId:o}=await V(t,n);R(e,i,s,a,o),M(e)}catch(e){f.Z.error(e.message)}finally{D(e)}})(e,t.type)})),p.Z.on(e,"click",".generate-form-save-button",(function(t){t.preventDefault();const a=O(e);a.files&&s().forEach(a.files,(e=>{x.Z.initFile(e.path,e.content).then((t=>t.content=e.content)).catch((t=>f.Z.error("Error during initiate file for ai assessment ".concat(e,": ").concat(t.message))))})),e.remove(),n(),i.resolve(null==a?void 0:a.assessment)})),p.Z.on(e,"click",".generate-form-cancel-button",(function(s){s.preventDefault(),e.remove(),n(),i.resolve(t)})),p.Z.on(e,"click",".generate-form-upvote-btn",(function(t){t.preventDefault(),B(e)})),p.Z.on(e,"click",".generate-form-downvote-btn",(function(t){t.preventDefault(),F(e)}))},F=async e=>U(e,h.rK.DOWN),B=async e=>U(e,h.rK.UP),U=async(e,t)=>{const n=O(e);if(!n)return;const i=l.default.currentUser.getAccountUid(),{runId:a}=n;try{const n=await h.dK(i,a,t);((e,t)=>{const n=l.default.currentUser.getAccountUid(),i=s().findIndex(j,(t=>t.runId===e));i>-1&&(j[i].upVote=t.upVotesList.includes(n),j[i].downVote=t.downVotesList.includes(n))})(n.runId,n),M(e)}catch(e){throw new Error(e.message)}},q=(e,t,n,i,s)=>{j=[],e.find(".generate-assessment").data("index",null),L(e,t,n,i,s)},H=(e,t,n,i,a)=>{const r=d.default.promise.deferred(),c=o()(S({type:t.type}));return s().isFunction(n)&&n(),e.append(c),s().isFunction(i)&&i(),q(c,t,a,r,!0),r.promise},G=(e,t,n,i,a)=>{const r=d.default.promise.deferred(),c=t.type,l=o()(E({type:c}));return s().isFunction(n)&&n(),e.append(l),s().isFunction(i)&&i(),q(l,t,a,r,!1),r.promise},W=e=>{if(!e.taskId&&!e.linkedId)return s().includes(A,e.type)},z=e=>{if(e.taskId)return s().includes(T,e.type)},V=async(e,t)=>{const n=(await m.ZP.getMetadata()).getSectionById(g.Z.getCurrentEditorSectionId()),i=await n.contentModel,s=(0,u.pi)();return K(l.default.currentProject.guid,e,i.getValue(),s,t)},K=async(e,t,n,i,s)=>{const a=await h.H_(e,t,n,i,s);let o;try{o=JSON.parse(a.assessmentJsonString)}catch{throw new Error(a.assessmentJsonString||"Failed to parse generated assessment")}return{assessment:_(o),generatedObj:o,files:a.files||[],runId:a.runId}},J=async(e,t)=>{const n=(await m.ZP.getMetadata()).getSectionById(g.Z.getCurrentEditorSectionId()),i=await n.contentModel,s=(0,u.pi)(),a=P(e),o=await h.dc(l.default.currentProject.guid,e.type,JSON.stringify(a,void 0,"\t"),i.getValue(),s,t);let r;try{r=JSON.parse(o.assessmentJsonString)}catch{throw new Error(o.assessmentJsonString||"Failed to parse generated assessment")}return{regeneratedAssessment:_(r),generatedObj:r,runId:o.runId}}},35797:(e,t,n)=>{"use strict";n.d(t,{Fo:()=>u,il:()=>h,xE:()=>l});var i=n(96486),s=n.n(i),a=n(49721),o=n(42270);const r="sampleParameters";let c=null;async function l(){return null!==c?d(s().cloneDeep(c)):(0,o.rQ)(a.default.currentProject.guid,r).then((e=>s()(e).map((e=>{try{return JSON.parse(e.value)}catch(e){return null}})).filter((e=>null!==e)).value())).then((e=>(c=s().keyBy(e,"taskId"),d(e))))}function d(e){return s().values(e)}function u(e){if(!e||!e.taskId)return;const t=e.taskId,n=JSON.stringify(e);return(0,o.xG)(a.default.currentProject.guid,r,t,n).then((()=>function(e,t){null===c&&(c={}),c[e]=t}(t,e)))}function h(e){return delete c[e],(0,o.xG)(a.default.currentProject.guid,r,e,void 0)}},26024:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>w,aX:()=>v,co:()=>g});var i=n(96486),s=n.n(i),a=n(19575),o=n(49721),r=n(97137),c=n(93443),l=n(85886),d=n(93702),u=l.default.ASSESSMENTS_ANSWERS_FILE,h={};function p(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"[]";try{return JSON.parse(e.content)}catch(i){if(t)return n;throw r.Z.error("Parse "+e.fullFilePath+" failed. Please check that the file contains valid JSON."),"Parse "+e.fullFilePath+" failed."}}function f(e,t){return d.Z.initFile(e,t)}const m=function(e,t){return h[e]||(h[e]=f(e,t)),h[e]},g=function(){return m(u,"[]").then((function(e){return p(e,!0)}))};function b(e,t){t.content=JSON.stringify(e,void 0,"\t")}const v=function(e){return m("".concat(l.Nc,"/").concat(e.taskId,".json"),"{}").then(b.bind(null,e))},y=s().debounce((()=>r.Z.notify("Warning! Manual editing JSON files from ".concat(l.Nc," can break guides."))),200);c.Z.subscribe("file:editor:open",((e,t)=>{s().startsWith(t.fileName,l.Nc)&&y()}));const w={loadAssessmentsFromFile:async function(){const e=s()(s().get(o.default.currentProject.children,[".guides","assessments"],{})).keys().filter((e=>"json"===a.default.path.getFileExtension(e))).value();if(!e)return[];const t=s().map(e,(e=>m("".concat(l.Nc,"/").concat(e),"[]"))),n=await Promise.all(t);return s()(n).map((e=>p(e))).compact().value()},loadAnswersFromFile:g,updateAssessmentContent:v,removeAssessments:e=>{const t=s().map(e,(e=>"".concat(l.Nc,"/").concat(e,".json")));return o.default.currentProject.deleteItems(t)},fileRemoved:function(e){delete h[e]},filesRemoved:function(){h={}},initFile:f,deleteFile:e=>{if(o.default.currentProject.exists(e))return o.default.currentProject.deleteItems([e]);throw Error("File not exist: ".concat(e))}}},83638:(e,t,n)=>{"use strict";n.d(t,{Z:()=>P});var i=n(52308),s=n.n(i),a=n(96486),o=n.n(a),r=n(177),c=n.n(r),l=n(49721),d=n(34391),u=n(61478);var h=n(79165);const p=c().compile('<div class="assessments-grade-rubrics-copy">\n\n</div>\n'),f=c().compile('<div class="assessments-grade-rubrics-copy--item">\n    {{courseName}} - {{assignmentName}}\n    {{#each rubricsList}}\n    <div class="assessments-grade-rubrics-copy-info hide">\n        <div class="assessments-grade-rubrics-copy--item-weight">-{{weight}}</div>\n        <div class="assessments-grade-rubrics-copy--item-message">{{message}}</div>\n    </div>\n    {{/each}}\n</div>\n'),m=c().compile(h),g=c().compile('<input class="assessments-grade-rubrics-copy--input" placeholder="Find course or assignment..." autofocus/>\n');var b,v,y="";function w(e){o().delay((function(){s()(e.documentActiveElement).focus()}),200)}function _(e,t){var n=d.Z.showConfirm({description:"Do you want to copy rubrics?",doNotCloseOpened:!0,onHide:function(){w(n)},onClose:async function(n){if(n){v.content().empty().append(s()(m()));try{await t(e.rubricsList)}finally{v.close()}}}})}function k(e){var t=o().filter(b,(function(e){let t,n;if(l.default.currentProject.authorAssignment){const{course:e,assignment:i}=l.default.currentProject.authorAssignment;t=e.id,n=i.id}return l.default.currentProject.course&&l.default.currentProject.eduStartedAssignmentInfo&&(t=l.default.currentProject.course.id,n=u.Z.getAssignmentId()),(e.courseId!==t||e.assignmentId!==n)&&(o().includes(e.courseName.toLowerCase(),y.toLowerCase())||o().includes(e.assignmentName.toLowerCase(),y.toLowerCase()))})),n=v.content().find(".assessments-grade-rubrics-copy");n.empty(),o().isEmpty(t)?n.append(s()('<strong class="assessments-grade-rubrics--no-rubrics">No rubrics for copy</strong>')):o().each(t,(function(t){var i=s()(f(t));n.append(i),i.mouseenter((function(){i.addClass("assessments-grade-rubrics-copy--item-active"),i.find(".assessments-grade-rubrics-copy-info").removeClass("hide")})),i.mouseleave((function(){i.removeClass("assessments-grade-rubrics-copy--item-active"),i.find(".assessments-grade-rubrics-copy-info").addClass("hide")})),i.click(_.bind(null,t,e))}))}const P={openDialog:function(e){function t(){var e=v.content().closest(".modal");e.find(".modal-body").css({maxHeight:"66vh"}),e.css({top:"10vh"}).removeClass("fade in")}v=new d.Z({title:"Copy rubrics",doNotCloseOpened:!0,modalOverflow:!0,content:s()(p()),buttons:d.Z.MB_OK,width:"600px",onShow:function(){t()},onHide:function(){w(v)}}),t(),v.content().find(".assessments-grade-rubrics-copy").empty().append(s()(m())),u.Z.loadRubricsForCopy().then((function(t){b=t,y="",function(e){if(b.length>10){var t=s()(g());v.content().prepend(t),t.keyup((function(){y=t.val(),k(e)}))}}(e),k(e)}))}}},88228:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>c});var i=n(96486),s=n.n(i),a=n(76900);const o={1:"ParsonsWidget._graders.LineBasedGrader",2:"ParsonsWidget._graders.VariableCheckGrader",3:"ParsonsWidget._graders.UnitTestGrader",4:"ParsonsWidget._graders.LanguageTranslationGrader",5:"ParsonsWidget._graders.TurtleGrader"},r=e=>{if(!e.result||!e.result.result)return!1;const{result:t}=e.result;switch(e.type){case a.ZP.TEST:case a.ZP.CODE_OUTPUT_COMPARE:case a.ZP.MULTIPLE_CHOICE:case a.ZP.FILL_IN_THE_BLANKS:case a.ZP.ECORNELL_FIB:case a.ZP.CUSTOM:case a.ZP.SPLICE:case a.ZP.PARSONS_PUZZLE:case a.ZP.SENSE_NETWORK:return!(!t||!t.state||"reset"===t.state);case a.ZP.MATH:return!(!t||!t.answers);case a.ZP.FREE_TEXT:case a.ZP.FREE_TEXT_AUTO:return!(!t||!t.answer);case a.ZP.GRADE_BOOK:return!!t&&void 0!==t.points;default:return!1}},c={tokenize:function(e){for(var t={blank:[],text:[],regexPositions:[]},n=/((?:.|\n)*?)<<<(.+?)>>>/g,i=0;;){var o=n.exec(e);if(null===o)break;i=n.lastIndex;var r=o[1],c=o[2];s().isEmpty(r)||t.text.push(r),c=c.trim(),s().startsWith(c,"/")&&s().endsWith(c,"/")&&c.length>1?(t.regexPositions.push(t.blank.length),t.blank.push({type:a.uR.REG_EX,value:c})):s().startsWith(c,'"')&&s().endsWith(c,'"')&&c.split(/",\s*"/).length>1?t.blank.push({type:a.uR.ONE_OF,value:c.substring(1,c.length-1).split(/",\s*"/)}):t.blank.push(c),t.text.push(0)}if(i!==e.length){var l=e.substring(i);t.text.push(l)}return t},updateAssessmentType:function(e){e.task.codeTest?e.type=a.ZP.TEST:e.task.freeTextAuto?e.type=a.ZP.FREE_TEXT_AUTO:e.task.fillInBlanks?e.type=a.ZP.FILL_IN_THE_BLANKS:e.task.ecornellFib?e.type=a.ZP.ECORNELL_FIB:e.task.freeText?e.type=a.ZP.FREE_TEXT:e.task.gradeBook?e.type=a.ZP.GRADE_BOOK:e.task.parsonsPuzzle?e.type=a.ZP.PARSONS_PUZZLE:e.task.multipleChoice?e.type=a.ZP.MULTIPLE_CHOICE:e.task.mathStack?e.type=a.ZP.MATH:e.task.senseNetwork?e.type=a.ZP.SENSE_NETWORK:e.task.codeOutputCompare&&(e.type=a.ZP.CODE_OUTPUT_COMPARE)},convertAttemptOrAssessmentTask:function(e,t){return e.codeTest?e.codeTest:e.freeTextAuto?e.freeTextAuto:e.fillInBlanks?e.fillInBlanks:e.freeText?(t&&e.freeText.status&&e.freeText.status.done&&(e.freeText.points=e.freeText.status.done.points),e.freeText):e.gradeBook?(t&&e.gradeBook.points&&(e.gradeBook.points=e.gradeBook.points.value),e.gradeBook):e.parsonsPuzzle?e.parsonsPuzzle:e.multipleChoice?e.multipleChoice:e.mathStack?e.mathStack:e.senseNetwork?e.senseNetwork:e.codeOutputCompare?e.codeOutputCompare:void 0},getParsonsSettingsFromAssessment:e=>{let t={};try{t=JSON.parse(e.source.options)}catch(e){}return e.source.grader&&(t.grader=o[e.source.grader]),{initial:e.source.initial||"",options:t}},isAnswered:r,isUngraded:e=>{const t=s().get(e,"result.result");switch(e.type){case a.ZP.GRADE_BOOK:return!t||void 0===t.points;case a.ZP.FREE_TEXT:{if(!t)return!1;const n="DONE"===t.status&&s().isFinite(t.points);return r(e)&&!n}default:return!1}}}},26059:(e,t,n)=>{"use strict";n.d(t,{R0:()=>s.ZP,ZP:()=>a,_3:()=>i.ZP});var i=n(95638),s=n(58269);const a={assessments:i.ZP,assessmentsUi:s.ZP}},61478:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var i=n(96486),s=n.n(i),a=n(49721),o=n(69857),r=n(46544),c=n(76900),l=n(78735),d={};function u(){var e=a.default.currentProject.eduStartedAssignmentInfo.assignment;return e.projectBased?e.projectBased.id:e.bookBased.id}function h(e){return s().assign(e,{projectId:a.default.currentProject.guid})}const p={fetchGuideState:function(){return o.WM(h({}))},saveState:function(e,t){return o.zL(h({assessmentId:e,state:t}))},compileMath:function(e){var t,n=s().map(e,(function(e){return e.question+JSON.stringify(e.answers)+e.feedback+e.score})).join(",");if(!d[n]){var i=o.ix((t={projectId:a.default.currentProject.guid,questions:e},a.default.currentProject.eduStartedAssignmentInfo&&s().assign(t,{assignmentId:u()}),t));i.then(void 0,(function(){d[n]=null})),d[n]=i}return d[n]},check:function(e,t,n){return o.BF(h({assessmentId:e,type:t,data:n,submittedAt:new Date}))},checkByAssessment:function(e,t,n){return o.BF({assessment:t,projectId:e,data:n,submittedAt:new Date})},removeResult:function(e){return o.Yx(h({assessmentId:e}))},applyGrade:async e=>{e.type===c.ZP.LLM_BASED_RUBRIC?await l.Ro(h(e)):e.type===c.ZP.LLM_BASED_AUTO_RUBRIC&&await l.$r(h(e))},loadRubricsForCopy:function(){return r.T2()},getAssignmentId:u,loadRubrics:function(){return r.Ir({assignmentId:u()})},changeRubric:function(e,t){return r.kk(u(),e,t)},applyAssessmentGradingRubrics:function(e,t,n){return r.F3(u(),a.default.currentProject.eduStartedAssignmentInfo.started.assignee,t,e,n)},findCourse:function(e,t,n,i,s){return r.wK(e,t,n,i,s)}}},76900:(e,t,n)=>{"use strict";n.d(t,{AQ:()=>w,D4:()=>c,FD:()=>b,LG:()=>v,PS:()=>l,UF:()=>i,UX:()=>a,V1:()=>r,Vf:()=>h,Xl:()=>m,ZP:()=>k,Zb:()=>o,_N:()=>u,aR:()=>s,dj:()=>g,im:()=>_,nh:()=>p,qN:()=>d,uR:()=>y});const i="test",s="multiple-choice",a="fill-in-the-blanks",o="ecornell-fib",r="free-text",c="free-text-auto",l="code-output-compare",d="custom",u="math-stack",h="grade-book",p="parsons-puzzle",f="sense-network",m="llm-based-rubric",g="llm-based-auto-rubric",b="random",v="splice",y={REG_EX:"regEx",ONE_OF:"oneOf"},w={[f]:f},_={PLAIN:0,RAW:1,MARKDOWN:2},k={TEST:i,MULTIPLE_CHOICE:s,FILL_IN_THE_BLANKS:a,FREE_TEXT:r,ECORNELL_FIB:o,FREE_TEXT_AUTO:c,CODE_OUTPUT_COMPARE:l,CUSTOM:d,SPLICE:v,MATH:u,GRADE_BOOK:h,PARSONS_PUZZLE:p,JUPYTER_NOTEBOOK:"jupyter-notebook",RANDOM:b,TEST_SUBTYPES:{JAVA:"java",CUSTOM:"custom",RUBY:"ruby",PYTHON:"python"},LLM_BASED_RUBRIC:m,LLM_BASED_AUTO_RUBRIC:g}},57836:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var i=n(49721),s=n(96486),a=n.n(s),o=n(46544),r=n(28893),c=n(177),l=n.n(c),d=n(52308),u=n.n(d);const h=l().compile('<li>\n    <a class="blueprints-selector-item" tabindex="-1" href="javascript:void(0)" data-value="">Default</a>\n</li>\n{{#each blueprints}}\n<li>\n    <a class="blueprints-selector-item" tabindex="-1" href="javascript:void(0)" data-value="{{id}}">{{name}}</a>\n</li>\n{{/each}}\n');class p{constructor(e){this.blueprints=e}dropdown(){if(0!==this.blueprints.length)return u()(h({blueprints:this.blueprints}))}rightMenu(e){if(0===this.blueprints.length)return;const t={Default:{label:"Default",action:e.bind(null,"")}};return a().each(this.blueprints,(n=>{t[n.name]={label:n.name,action:e.bind(null,n.id)}})),t}}class f{constructor(e){this.courseId=e,this.fetchGuidesBlueprintsPromise=this._fetchBlueprints(),this._blueprints=[]}async save(e,t,n){const i=(await e.contentModel).getValue(),s={closeTerminalSession:e.closeTerminalSession,teacherOnly:e.teacherOnly,paths:e.paths||[]},r=a().map(e.actions,(e=>({actionJson:JSON.stringify(e.json)}))),c={name:t,pageContentTemplate:i,layout:e.layout,options:s,actions:r};return n&&(c.id=n),delete this.fetchGuidesBlueprintsPromise,(0,o.iW)(this.courseId,c)}async delete(e){return delete this.fetchGuidesBlueprintsPromise,(0,o.oc)(this.courseId,e)}async _fetchBlueprints(){try{const e=(await(0,o.wz)(this.courseId)).map((e=>{const t=e.actionsList.map((e=>new r.aU(JSON.parse(e.actionJson))));return delete e.actionsList,e.options.paths=e.options.pathsList||[],delete e.options.pathsList,{...e,actions:t}}));return this._blueprints=e,e}catch(e){throw delete this.fetchGuidesBlueprintsPromise,e}}supportSave(){return!0}async load(){return this.fetchGuidesBlueprintsPromise||(this.fetchGuidesBlueprintsPromise=this._fetchBlueprints()),this.fetchGuidesBlueprintsPromise}blueprintsDropdown(){return new p(this._blueprints).dropdown()}blueprintsRightMenu(e){return new p(this._blueprints).rightMenu(e)}}class m{supportSave(){return!1}async load(){return[]}async save(){}async delete(){}blueprintsDropdown(){}blueprintsRightMenu(){}}const g={};const b={getInstance:function(){const{guid:e}=i.default.currentProject;if(!g[e])if(i.default.currentProject.authorAssignment){const{course:t}=i.default.currentProject.authorAssignment;g[e]=new f(t.id)}else g[e]=new m;return g[e]}}},73449:(e,t,n)=>{"use strict";n.d(t,{X:()=>o});var i=n(96486),s=n.n(i),a=n(85886);const o=function(e,t){var n={name:t,children:[]},i=n.children;return s().each(e,(function(e){var t={title:e.title,id:e.id,pageId:e.id,type:a.default.BOOK_TYPES.PAGE};i.push(t),t.children&&(i=t.children)})),n}},44067:(e,t,n)=>{"use strict";n.d(t,{Z:()=>x});var i=n(93443),s=n(49721),a=n(19575),o=n(96486),r=n.n(o),c=n(13538),l=n(85886),d=n(1436);let u=null,h=null;const p=(e,t,n)=>{const i="".concat(e,"/").concat(t);let s="".concat(i,".json");n[s]||(s="".concat(i,"/").concat(l.nb));const a=n[s];if(!a)return null;const o={id:a.id,title:a.title,type:a.type};return a.contentType&&(o.pageId=a.id),a.anchor&&(o.anchor=a.anchor),a.type!==l.yj.PAGE&&(o.children=r()(a.order).map((e=>p(i,e,n))).compact().value()),o},f=()=>c.Z.load().then((e=>{const t=e[l.q9];if(!t)throw new Error("metadata for ".concat(l.q9," not found"));const n=r()(t.order).map((t=>p(l.mK,t,e))).compact().value();return{name:t.title,children:n}}));function m(e){return e&&(h=null),h||(h=f().then((e=>(u=e,s.default.currentProject.isBook&&u.name!==s.default.currentProject.bookName?(u.name=s.default.currentProject.bookName,d.Z.updateTitle(s.default.currentProject.bookName).then((()=>u))):u))).catch((e=>(h=null,Promise.reject(e))))),h}i.Z.subscribe("project:close:#projectId",(function(){u=null,h=null}));const g=()=>{u=null,h=null};var b,v,y;b=l.Ty,v=()=>{s.default.currentProject.exists(l.Ty)||g()},y=[],r().each(["item:created:","item:moved:","item:moved:#from:","item:deleted:","file:change:"],(function(e){y.push(i.Z.subscribe(e+b,v))}));const w={getBookStructure:m,load:function(e){return m(e)},cleanup:g};var _=n(38880),k=a.default.promise.deferred(),P=k.promise;function C(e){return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return P.then((function(t){return t.isBookReader||t.eduStartedAssignmentInfo?_.Z[e](...n):w[e](...n)}))}}i.Z.subscribe("project:open:#projectId",(function(){k.resolve(s.default.currentProject)}));const x={getBookStructure:C("getBookStructure"),load:C("load"),cleanup:C("cleanup")}},38880:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var i=n(96486),s=n.n(i),a=n(49721),o=null,r=n(44674).d3,c=n(73449).X;async function l(){if(null===o){var e=a.default.currentProject.guides;if(e)((o=e.bookStructure)&&o.children?s().isEmpty(o.children):s().isEmpty(o))&&e.metadata&&e.metadata.sections&&(o=c(e.metadata.sections,a.default.currentProject.name))}return o}const d={filterSection:function(e,t){if(e&&e.metadata){e=s().cloneDeep(e);var n=s().compact(s().map(t,(function(t){var n=r(t,e.bookStructure);if(n)return n.pageId})));e.metadata.sections=s().filter(e.metadata.sections,(function(e){return s().includes(n,e.id)}))}return e.metadata},getBookStructure:l,load:l,cleanup:()=>{}}},44674:(e,t,n)=>{"use strict";n.d(t,{XS:()=>o,d3:()=>a});var i=n(96486),s=n.n(i);const a=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o=t.children;var r=s().find(o,(function(t){return n?e===t.pageId:e===t.id}));if(r){const e=t&&t.id?t:null;return i?e:r}for(var c=0,l=o.length;c<l;c++){var d=o[c];if(d.children&&(r=a(e,d,n,i)))return r}},o=function(e,t,n){var i=s().find(n,(function(n){return e===n.pageId&&t===n.anchor}));if(i)return i;for(var a=0,r=n.length;a<r;a++){var c=n[a];if(c.children&&(i=o(e,t,c.children)))return i}}},49067:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>c});var i=n(96486),s=n.n(i),a=n(49721),o=n(68058);function r(){return a.default.currentProject.guid+":book_hide_non_unit"}const c={isDisabledStructureHidden:function(){var e=o.I_.get(r());return!a.default.currentProject.isBookWriter&&!a.default.currentProject.showAllBookPages||(s().isUndefined(e)?!a.default.currentProject.showAllBookPages:!1!==e)},setDisabledStructureHidden:function(e){o.I_.set(r(),e)}}},55010:(e,t,n)=>{"use strict";n.d(t,{Z:()=>N});var i=n(96486),s=n.n(i),a=n(49721),o=n(19575),r=n(97137),c=n(28893),l=n(1436),d=n(85886),u=n(44067),h=n(49067),p=n(57836),f=n(44674).d3,m=n(44674).XS,g=u.Z.getBookStructure,b=d.default.BOOK_TYPES.PAGE,v=d.default.BOOK_TYPES.SECTION,y=d.default.BOOK_TYPES.CHAPTER;const w=async(e,t,n)=>{const i=await g(),s=o.default.GUID(),a=y,r={title:(null==n?void 0:n.title)||"New Chapter",id:s,type:a,children:[]};P(i.children,e,r,t);const c={id:s,type:a,title:r.title,order:[]};return await l.Z.addFolder(null,e,c,t),void 0!==(null==n?void 0:n.value)&&await I(s,!0,n),r};function _(e,t){var n=s().remove(t,(function(t){return e===t.id}));if(!s().isEmpty(n))return n[0];for(var i=0,a=t.length;i<a;i++){var o=t[i];if(o.children&&(n=_(e,o.children)))return n}}const k=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=f(e,t),s=e=>e.type===v&&n;if(i.type===b||s(i)){const i=f(e,t,void 0,!0);return i&&s(i)?k(i.id,t,n):i}return i};function P(e,t,n,i){-1===t?e.push(n):e.splice(i?t:t+1,0,n)}const C=async(e,t,n,i)=>{const s=await g(),a=f(e,s),r=e?a:s,c=r?r.children:s.children,d=o.default.GUID(),u=v;i.title=i.title||"New Section";const h={title:i.title,id:d,type:u,children:[]};P(c,t,h,n);const p={id:d,type:u,title:i.title};return await l.Z.addFolder(e,t,p,n),void 0!==(null==i?void 0:i.value)&&await I(d,!0,i),h},x=(e,t,n)=>{const i=j(e.children),a=s().findIndex(i,(e=>e.id===t));return s().findLast(i,(e=>e.pageId),n?a-1:a)};const E=async(e,t,n,i)=>{const{blueprintId:a}=i;let o;if(a){o=(await p.Z.getInstance().load()).find((e=>e.id===a))}if(a||o)i.value=o.pageContentTemplate,i.files=o.actions,i.layout=o.layout,i.title=o.name,i.closeTerminalSession=o.options.closeTerminalSession,o.options.teacherOnly&&(i.teacherOnly=!0),o.options.paths&&o.options.paths.length&&s().includes(o.layout,"-tree")&&(i.path=o.options.paths);else if(i.value=i.value||(r=i.title,"##\n# Sample content ".concat(r,"\nAdd your content in the markdown editor")),s().isUndefined(i.layout)){const t=((e,t)=>{if(!t)return{layout:"1-panel"};const n=e.getSectionById(t.pageId);return{layout:n.layout,closeTerminalSession:n.closeTerminalSession,path:n.paths,files:[{path:"#tabs",action:"close"}]}})(e,n);i={...i,...t}}var r;return function(e,t){return{contentType:"markdown",id:e,...t}}(t,i)};async function S(e,t,n,i){const s=await g(),a=await A(),r=f(e,s),c=e?r:s,l=c?c.children:s.children,d=o.default.GUID();i.type=b;const u=l[t]||r||null,h=x(s,null==u?void 0:u.id,n),p=await E(a,d,h,i),m={id:d,title:p.title,pageId:d,type:b};return P(l,t,m,n),await a.addPage(null==c?void 0:c.id,t,p,n),m}async function I(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{const[i,s]=await Promise.all([g(),A()]),a=f(e,i);let o;if(t){n={title:a.title,...n};const t=x(i,e);a.pageId=a.id;const r=await E(s,a.id,t,n),{type:c,title:l,...d}=r;o=s.linkPage(e,d)}else delete a.pageId,o=s.unlinkPage(e);return await o,a.id}catch(e){throw e.message&&r.Z.error(e.message),e}}function A(){return c.ZP.getMetadata()}function T(e){return s().chain(e).map((e=>[e.pageId?e:null,e.children?T(e.children):null])).flattenDeep().compact().value()}function j(e){return s().chain(e).map((e=>[e,e.children?j(e.children):null])).flattenDeep().compact().value()}function Z(e,t,n){var i=s().find(e,(function(e){return t===e.pageId}));if(i)return n.join(" -> ");for(var a=0,o=e.length;a<o;a++){var r=e[a];if(r.children){var c=s().clone(n);if(c.push(r.title),i=Z(r.children,t,c))return i}}}function O(e){var t=[];return s().each(e,(function(e){var n,i=[];e.children&&(i=O(e.children),e.children=i),n=e.id,(s().includes(a.default.currentProject.bookAssignmentPages,n)||!s().isEmpty(i))&&t.push(e)})),t}const N={load:function(){return a.default.currentProject.isBookReader&&!s().isEmpty(a.default.currentProject.bookAssignmentPages)&&h.ZP.isDisabledStructureHidden()?u.Z.load().then((function(e){return function(e){return(e=s().cloneDeep(e)).children=O(e.children),e}(e)})):u.Z.load()},addChapter:async function(e,t,n){try{const i=function(e,t){return s().findIndex(e.children,(function(e){return e.id===t||!(!e.children||!f(t,e))}))}(await g(),t);return(n=n||{}).title=n.title||e,w(i,!1,n)}catch(e){throw e.message&&r.Z.error(e.message),e}},addSection:async function(e,t,n){try{const i=await g(),a=k(t,i,!0),o=a?a.id:null,r=a?a.children:i.children,c=s().findIndex(r,(function(e){return t===e.id}));return(n=n||{}).title=n.title||e,C(o,c,!1,n)}catch(e){throw e.message&&r.Z.error(e.message),e}},addPage:async function(e,t,n){try{const i=await g(),a=k(t,i),o=a?a.id:null,r=a?a.children:i.children,c=s().findIndex(r,(function(e){return t===e.id}));return e.type=b,S(o,c,n,e)}catch(e){throw e.message&&r.Z.error(e.message),e}},addPageToPosition:S,addSectionToPosition:C,addChapterToPosition:w,searchItem:f,nodeIdByPageIdAndAnchor:function(e,t){return g().then((function(n){var i=t?m(e,t,n.children):f(e,n,!0);if(i)return i.id}))},removeItems:function(e){return A().then((function(t){return t.removeNodes(e)})).then((()=>g().then((t=>{const n=s()(e).map((e=>_(e,t.children))).compact().value(),i=s()(n).map((e=>[e,e.children?T(e.children):[]])).flattenDeep().uniq().value(),a=s()(i).filter((e=>e.pageId)).map((e=>e.pageId)).value();return l.Z.removeSections(a),i})))).catch((e=>(e.message&&r.Z.error(e.message),Promise.reject(e))))},renameItem:function(e,t){return Promise.all([g(),A()]).then((function(n){let[i,s]=n;const a=f(e,i);return a.title=t,s.renameNode(a.id,t)})).catch((e=>(e.message&&r.Z.error(e.message),Promise.reject(e))))},moveItems:function(e,t,n){return A().then((i=>i.moveNodes(e,t,n))).catch((e=>(e.message&&r.Z.error(e.message),Promise.reject(e)))).finally((()=>g(!0)))},pageInfoByName:function(e){return A().then((function(t){var n=t.getSectionByFileName(e);if(n)return{title:n.title,id:n.id}}))},onSectionsUpdate:function(e){return Promise.all([g(),A()]).then((function(t){let[n,i]=t;var s=f(e,n,!0),a=i.getSectionById(e);s.title!==a.title&&(s.title=a.title)}))},copyItems:function(e,t){return A().then((function(n){return n.copyNodes(e,t)})).catch((e=>(e.message&&r.Z.error(e.message),Promise.reject(e)))).finally((()=>g(!0)))},linkPage:I,breadcrumbsPage:function(e){return g().then((function(t){return Z(t.children,e,[])})).then((function(e){return s().escape(e)}))},updateTitle:function(e){const{isBook:t}=a.default.currentProject;return g().then((function(n){if(n.name=e,A().then((t=>t.updateTitle(e))),t)throw new Error("Update failed. Books are deprecated.")})).catch((e=>(e.message&&r.Z.error(e.message),Promise.reject(e))))},flatPages:T,flatNodes:j,sortBookPages:function(e,t){var n=s()(e).map((function(e){return e.id})).invert().mapValues((function(e){return parseInt(e,10)})).value();return s().chain(t).filter((e=>s().isNumber(n[e]))).sortBy((e=>n[e])).value()},cleanup:()=>u.Z.cleanup()}},4955:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>g,xv:()=>m});var i={};n.r(i),n.d(i,{default:()=>f,onLinkPress:()=>p});var s=n(96486),a=n.n(s),o=n(93443).Z.create(n(10742)),r=n(28893).aU;function c(e,t){var n=new RegExp("(?:[^"+t+'"]+|["][^"]*")+',"g");return e.match(n)}function l(e){if(e)return'"'===e[0]&&'"'===e[e.length-1]?e.substr(1,e.length-2):e}function d(e,t,n,i,s,o){return o=function(e){var t=parseInt(e,10);if(!a().isNaN(t))return t}(o),s=l(s),t=function(e){switch(e){case"files":return"file";case"previews":return"preview";case"terminals":return"terminal"}return e}(t),{action:new r({action:e,panel:i,ref:s,lineCount:o}),command:{type:t,content:n}}}function u(e,t){var n="panel="+t;return e.replace(n,"")}function h(e,t){var n=t;if(!a().isUndefined(n)){var i=[],s=c(n,"\\;");return a().each(s,(function(e){var t=function(e){var t=(e=l(e)).split(" ",1)[0],n=a().trim(e.substr(t.length)),i=function(e){var t=c(e," "),n={},i=[];return a().each(t,(function(e){if(0!==(e=l(e)).length){var t=e.split("=");1===t.length?i.push(e):n[t[0]]=t[1]}})),{files:i,params:n}}(n);if("cmd"===t){var s=l(n);return i.params&&i.params.panel&&(s=u(s,i.params.panel)),[d("open",t,s,i.params.panel||0)]}if("open_terminal"===t){var o=l(n);return i.params&&i.params.panel&&(o=u(o,i.params.panel)),[d("open","terminal",o,i.params.panel||0)]}var r=t.split("_"),h=r[0],p=r[1];if(!a().isUndefined(h)&&!a().isUndefined(p)){0===i.files.length&&i.files.push(void 0);var f=i.params,m=[];return a().each(i.files,(function(e){var t=d(h,p,e,f.panel,f.ref,f.count);m.push(t)})),m}}(e=a().trim(e));t&&(i=i.concat(t))})),i}}const p=function(e,t){var n=h(0,t);n&&o.command(n)},f={onLinkPress:p};var m=n(38406);const g={markdown:i,remote:m}},85886:(e,t,n)=>{"use strict";n.d(t,{Iw:()=>m,Nc:()=>s,Ty:()=>i,_1:()=>h,default:()=>g,gg:()=>p,mK:()=>o,nb:()=>r,q9:()=>c,xu:()=>l,yj:()=>f});const i=".guides",s=i+"/assessments",a=i+"/sections.md",o=i+"/content",r="index.json",c="".concat(o,"/").concat(r),l="disabled",d="html",u="markdown",h=u,p={[u]:"md",[d]:"html"},f={PAGE:"page",SECTION:"section",CHAPTER:"chapter"},m="guides-tree",g={GUIDES_FOLDER:i,ASSESSMENTS_FOLDER:s,GUIDES_ROOT_METADATA_FILE:c,GUIDES_OLD_DESCRIPTION_FILE:a,GUIDES_CONTENT_FOLDER:o,IMG_FOLDER:i+"/img",CSS_FILE:i+"/styles.css",CSS_FILE_CONTENT:"/* Place you styles here */",DEFAULT_THEME:"light",PROJECT_SETTINGS_FILE:".settings",ASSESSMENTS_ANSWERS_FILE:i+"/assessmentsAnswers.json",CONTENT_TYPE_HTML:d,CONTENT_TYPE_MARKDOWN:u,CONTENT_TYPE_DEFAULT:u,CONTENT_HEADER_FILE:o+"/header.html",CONTENT_FOOTER_FILE:o+"/footer.html",BOOK_TYPES:f,TREE_NAME:m}},61809:(e,t,n)=>{"use strict";n.d(t,{Z:()=>O});var i=n(52308),s=n.n(i),a=n(96486),o=n.n(a),r=n(49721),c=n(34391),l=n(85886);const d=l.Ty+"/sections.md",u=["curl https://raw.githubusercontent.com/codio/new-guides-converter","/master/build/converter.js | node"].join("");const h=async()=>r.default.currentProject.exists(d),p=()=>function(e){return r.default.ide.open("terminal","backend-guide",{view:"backend"}).then((t=>{t&&t.extension.then((t=>t.ready().then((()=>t.terminal.terminal.exec(e)))))}))}(u);var f=n(93702),m=n(19575);n(95611);const g=l.Ty+"/assessments.json",b="assessments",v=("".concat(l.Ty,"/").concat(b),async()=>{if(!r.default.currentProject.exists(g))return!1;const e=await f.Z.initFile(g),t=f.Z.getParsedContent(e,!0,"[]");return!o().isEmpty(t)&&!o()(o().get(r.default.currentProject.children,[".guides","assessments"],{})).keys().filter((e=>"json"===m.default.path.getFileExtension(e))).value().length});n(99770);const y=l.Ty+"/metadata.json",w=(l.Ty,"content_v3"),_=("".concat(l.Ty,"/").concat(w),"index"),k="".concat(l.Ty,"/").concat("content","/").concat(_,".json"),P=()=>r.default.currentProject.exists(y);var C=n(54565),x=n(4955);const E=n(9380).A,S=["/usr/share/codio/assessments/guides-converter-v3"];function I(){return x.ZP.remote.run(S).then((e=>{if(0!==e.code)return function(){const e=s()("<div>An error has occurred during the process of converting your ".concat(C.Z.get("whitelabel"),' Guides to the new format. \n  Please contact <a class="contact-support" style="cursor:pointer">').concat(C.Z.get("whitelabel")," Technical Support</a> for assistance.</div>")).on("click",".contact-support",A),t=m.default.promise.deferred();return c.Z.showWarning({title:"Guides Conversion Error",description:e,buttons:c.Z.MB_OK,onClose:function(){t.resolve()},onHide:function(){t.resolve()}}),t.promise}()}))}function A(){E.execute("support","show")}const T=async()=>{if(!P())return!1;return await v()||P()&&!r.default.currentProject.exists(k)},j=()=>I();n(44830);const Z="Guides convert started or canceled";const O={check:async function(){const e=r.default.currentProject.eduStartedAssignmentInfo;if(r.default.currentProject.children[l.Ty]&&o().isEmpty(r.default.currentProject.children[l.Ty]))return;if(r.default.currentProject.readOnly||e)return;const[t,n]=await Promise.all([h(),T()]);if(!t&&!n)return;if(!await new Promise((e=>{c.Z.showConfirm({title:"Convert guides?",description:["This Guide is in an old format, which is not supported anymore. ","We can automatically convert your Guide into the new format. ","Doing so will open a terminal tab and run a command line utility. ","You will be able to open the Guide Editor and Player after this ","process finishes."].join(""),onHide:function(){e(!1)},onClose:function(t){e(t)}})})))throw new Error(Z);{const e=s()("#content");try{await h()?await p():await j(),e.block()}finally{e.unblock(),window.location.reload()}}},DEFAULT_ERROR:Z}},55637:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>oe,IR:()=>$,wr:()=>X});var i=n(52308),s=n.n(i),a=n(96486),o=n.n(a),r=n(177),c=n.n(r),l=n(93443),d=n(49721),u=n(97137),h=n(30844),p=n(19575),f=n(28893),m=n(85886),g=n(15061),b=n(34391),v=n(54565),y=n(50352);function w(e){(0,y.wu)()||(e?d.default.ide.open("guides",""):b.Z.showConfirm({title:"Start the guide?",description:"This Assignment has a ".concat(v.Z.get("whitelabel")," Guide tutorial. ")+"Would you like to start the Guide now?",doNotCloseOpened:!0,onClose:function(e){e&&d.default.ide.open("guides","")}}))}l.Z.subscribe("command:guides:open_guides_player",w.bind(null,!0));const _=w;const k=function(){return f.ZP.createMetadata().then((function(e){var t=e[0];e[1]&&(t.useSubmitButtons=!0,t.useMarkAsComplete=!0)}))};var P=n(51442),C=m.default.GUIDES_FOLDER,x=m.default.CSS_FILE,E=m.default.IMG_FOLDER,S=m.default.GUIDES_CONTENT_FOLDER;function I(e,t){var n=d.default.currentProject;if(!n||n.exists(e))return Promise.resolve();var i=p.default.path.parse(e),s=i.name;return n.createFile(s,i.dir).then((function(){return function(e,t){var n=d.default.currentProject;if(!n||n.readOnly||!n.exists(e))return Promise.resolve();return n.file(e).then((function(i){i.content=t,n.is_manual_save&&o().defer((function(){d.default.currentProject.getShareFile(e).save()}))}))}(e,t)}))}function A(e){var t=d.default.currentProject;if(!t||t.exists(e))return Promise.resolve();var n=p.default.path.parse(e),i=n.name;return t.createFolder(i,n.dir)}function T(){var e=d.default.currentProject;return e&&e.exists(x)?e.deleteItems([x]):Promise.resolve()}const j={createContent:function(){return A(C).then((function(){return Promise.all([A(E),A(S)])})).then((function(){return k()}))},createCustomCss:function(){var e=Promise.resolve();return d.default.currentProject.exists(m.default.CSS_FILE)&&(e=d.default.currentProject.unixFile(m.default.CSS_FILE).then((function(e){if(e.content===m.default.CSS_FILE_CONTENT)return T()}))),e=e.then((function(){return P.Z.getMetadataThemeContent()})).then((function(e){return P.Z.getCss(e)})).then((function(e){return I(x,e)}))},removeCustomCss:T};var Z=n(61809),O=n(55010),N=n(1436),D=n(13538);const M=c().compile('<div class="ui-blocker-content">\n  <span>File structure is changed. Reloading guides editor...</span>\n</div>\n');var R=l.Z.create(n(10742));const{GUIDES_ROOT_METADATA_FILE:L,GUIDES_FOLDER:F,CSS_FILE:B,PROJECT_SETTINGS_FILE:U}=m.default;var q={initDfd:p.default.promise.deferred()};function H(){var e=d.default.currentProject;if(!e)return!1;var t=e.eduStartedAssignmentInfo,n=e.exists(L),i=e.guides&&!o().isEmpty(e.guides.metadata)&&!o().isEmpty(e.guides.metadata.sections);return!t&&n||i}function G(e,t){d.default.currentProject&&!d.default.currentProject.readOnly&&Z.Z.check().then((()=>{q.initDfd=p.default.promise.deferred(),q.initDfd.resolve()})).then((function(){return J(),j.createContent().finally((()=>K()))})).then((function(){d.default.currentProject.exists(U)||R.projectSettingsUpdate({arg:{plugin:"editor",key:"tab_size",value:2}}),o().defer((function(){d.default.ide.open("guides-edit","",{ignoreExtensions:["filetree"],step:t&&t.step},"splitview")}))})).catch((e=>e&&e.message!==Z.Z.DEFAULT_ERROR&&u.Z.error(e.message)))}function W(){d.default.currentProject.exists(F)?(0,y.wu)()&&(0,N.p)().then((function(e){N.Z.set(e)})):(f.ZP.close(!0),R.guidesRemoved()),Q()}l.Z.subscribe("command:guides:add_custom_css",(function(){j.createCustomCss(f.ZP).then((function(){o().delay((function(){d.default.ide.open("tree",B)}))}))})),l.Z.subscribe("command:guides:remove_custom_css",(function(){return j.removeCustomCss(f.ZP)}));const z=function(e,t){var n=[];return o().each(["item:created:","item:moved:","item:moved:#from:","item:deleted:","file:change:"],(function(i){n.push(l.Z.subscribe(i+e,t))})),n};var V;const K=function(){V||(V=W)};z(F,(function(){V&&V.apply(null,arguments)}));const J=function(){V=void 0};function Y(e,t){var n=t?"enableItem":"disableItem";o().each(e,(function(e){h.ZP[n](e)}))}function Q(){Y(["menu-item-guides-play","menu-item-guides-play-view"],H())}l.Z.subscribe("command:guides:edit",G),l.Z.subscribe("command:guides:play",(function(){if(H()){var e=g.Z.getPlayerPanel();d.default.ide.open("guides","",{panel:e})}else u.Z.error("No Guides in the project")})),l.Z.subscribe("project:open",(function(){!function(){var e=d.default.currentProject,t=e.guides;if(e.eduStartedAssignmentInfo&&t&&t.bookStructure){var n=t.bookStructure.children,i=n?O.Z.flatPages(n):[];e.sortedBookPages=O.Z.sortBookPages(i,e.bookAssignmentPages)}}();const e=d.default.currentProject.eduStartedAssignmentInfo;e||K(),g.Z.reset(),Z.Z.check().then((function(){Y(["menu-item-guides-edit","menu-item-guides-edit-css","menu-item-guides-edit-css-reset"],!e),H()&&e?_(!0):e&&R.treeAddFilter({plugin:"guides-player",filter:"hide",path:[".codio",m.default.GUIDES_FOLDER],seq:0}),q.initDfd.resolve()})).catch((function(e){return H()&&_(!1),q.initDfd.reject(new Error("guides convert")),e&&e.message!==Z.Z.DEFAULT_ERROR&&u.Z.error(e.message),ie()})).catch((()=>{})),Q()})),l.Z.subscribe("project:close",(function(){J(),f.ZP.close(),q.isTeacher=!1})),l.Z.subscribe("guides:command:run",(function(e,t){g.Z.run(t)}));const X=function(){return d.default.currentProject.eduStartedAssignmentInfo},$=function(){return d.default.currentProject.isOpenedByTeacher},ee=function(){const{started:e}=d.default.currentProject.eduStartedAssignmentInfo||{};return e&&d.default.currentProject.isOpenedByTeacher&&d.default.currentUser.getAccountUid()===e.assignee.userId&&!d.default.currentProject.writableCopy};var te=!1;var ne=!1;const ie=function(){return q.initDfd.promise};let se=!1;const ae=o().debounce((()=>{D.Z.cleanup(),O.Z.cleanup(),G(),s()("#content").unblock(),se=!1}),3e3,{maxWait:25e3});l.Z.subscribe("guides:reload:editor",(()=>{d.default.ide.panels.isOpen(null,"guides-edit")&&(se=!0,s()("#content").block({content:s()(M()),className:"ui-blocker-with-message"}),R.guidesClose()),se&&ae()})),l.Z.subscribe("project:fileStructure:updated",(()=>{R.reloadGuidesEditor()}));const oe={onFileChange:z,listenMetaChanges:K,stopListenMetaChanges:J,isUnit:X,isTeacher:$,isPreview:ee,isEditorOpen:function(){return te},setEditorOpen:function(e){te=e,e||R.editorClose()},setViewSwitcher:function(e){ne=e},getViewSwitcher:function(){return ne},showAsTeacher:function(){return d.default.currentProject.isAuthorProject||ee()?ne:X()?$():!!d.default.currentProject.isOwner&&ne},getInitPromise:ie,isGuidesExist:H,edit:G}},93702:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(96486),s=n.n(i),a=n(19575),o=n(49721),r=n(97137),c=n(95611);const l={initFile:function(e,t){return o.default.currentProject.exists(e)?o.default.currentProject.unixFile(e):function(e){if(!o.default.currentProject)return Promise.reject();const t=a.default.path.parse(e),{name:n,dir:i}=t;return o.default.currentProject.createFile(n,i)}(e).then((()=>o.default.currentProject.file(e))).then((e=>{let n=a.default.promise.deferred();return s().isUndefined(t)?n.resolve(e):(e.content=t,s().defer((()=>{c.Z.saveAllAndWait().then((()=>n.resolve(e)))}))),n.promise}))},getParsedContent:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{return JSON.parse(e.content)}catch(i){if(t)return n;throw r.Z.error("Parse ".concat(e.name," failed. Please check that the file contains valid JSON.")),new Error("Parse ".concat(e.name," failed."))}},updateContent:function(e,t){e.content=JSON.stringify(t,void 0,"\t")}}},28893:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>s,aU:()=>i.aU});var i=n(81644);const s={Section:i.$0,Action:i.aU,createMetadata:i.bp,getMetadata:i.sd,close:i.ZP.close}},55537:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(96486),s=n.n(i);function a(e){var t=e.split(","),n=[];return s().each(t,(function(e){var t=function(e){return 0!==(e=s().trim(e)).length&&("#"===e[0]?(t=s().trim(e.split(":",1)[0].substr(1)),n=s().trim(e.substr(t.length+2))):(t="file",n=e),"file"===t&&("."===(i=n)[0]&&"/"===i[1]?i=i.substr(2):"/"===i[0]&&(i=i.substr(1)),n=i),{type:t,content:n});var t,n,i}(e=s().trim(e));!1!==t&&n.push(t)})),n}var o=function(e){s().isUndefined(e)||(this.json=e)},r=o.prototype;function c(e,t,n,i){var a="_"+t;Object.defineProperty(e,t,{get:function(){return s().isUndefined(this[a])?n:this[a]},set:function(e){this[a]=e,s().isFunction(i)&&i(this,e)}})}Object.defineProperty(r,"json",{get:function(){return{path:this.path,panel:this.panel,ref:this.ref,lineCount:this.lineCount,action:this.action,trackId:this.trackId,sandboxId:this.sandboxId}},set:function(e){e=function(e){return e.action="close"===e.action?"close":"open",e}(e),this.path=e.path,this.ref=e.ref,this.panel=e.panel,this.lineCount=e.lineCount,this.action=e.action,this.trackId=e.trackId,this.sandboxId=e.sandboxId}}),Object.defineProperty(r,"isCloseAll",{get:function(){if("close"===this.action){var e=s().find(this.commands,{content:"",type:"tabs"});if(!s().isUndefined(e))return!0}return!1}}),c(r,"path","",(function(e,t){var n=t;s().isString(t)&&(n=function(e){return a(e)}(t)),e.commands=n})),c(r,"ref"),c(r,"panel"),c(r,"lineCount"),c(r,"action"),c(r,"commands"),c(r,"trackId"),c(r,"sandboxId");const l=o},99770:(e,t,n)=>{"use strict";n.d(t,{QZ:()=>r,X_:()=>o,_b:()=>d,kQ:()=>l,xZ:()=>a,y2:()=>c});var i=n(19575),s=n(85886);const a=e=>{const{dir:t,name:n}=i.default.path.parse(e);return n!==s.nb?i.default.path.getFileName(n):i.default.path.parse(t).name},o=e=>"".concat(i.default.path.escape(e.title),"-").concat(e.id.substring(0,4)),r=(e,t)=>"".concat(e.substring(0,e.length-4)).concat(t.substring(0,4)),c=e=>s.gg[e]||"",l=(e,t)=>{const{dir:n,name:s}=i.default.path.parse(e),a=c(t);return"".concat(n,"/").concat(i.default.path.getFileName(s),".").concat(a)},d=(e,t)=>"".concat(e.substring(0,e.lastIndexOf(".")),".").concat(t)},81644:(e,t,n)=>{"use strict";n.d(t,{aU:()=>d.Z,$0:()=>l.Z,bp:()=>k,ZP:()=>P,sd:()=>_});var i=n(96486),s=n.n(i),a=n(49721),o=n(85886),r=n(93443),c=n(1436),l=n(8450),d=n(55537),u=n(38880),h=n(99770),p=n(19575),f=n(93702);const m={title:"",theme:"light",scripts:[],suppressPageNumbering:!0,useSubmitButtons:!0,useMarkAsComplete:!0,hideMenu:!1,allowGuideClose:!1,collapsedOnStart:!1,hideSectionsToggle:!1,hideBackToDashboard:!1,protectLayout:!1},g={id:"",title:"",files:[{path:"#tabs",action:"close"}],path:[],contentType:o._1,type:"page",teacherOnly:!1,closeTerminalSession:!0,learningObjectives:"",layout:"1-panel"},b=()=>{const e={id:p.default.GUID(),title:"Page 1"},t=(e=>{const t={...g,...e},n=(0,h.y2)(t.contentType),i="".concat(o.mK,"/").concat((0,h.X_)(t)),s="".concat(i,".").concat(n),a="".concat(i,".json"),r=f.Z.initFile(a,JSON.stringify(t,void 0,"\t")),c="# Sample content ".concat(t.title,"\nAdd your content in the markdown editor"),l=f.Z.initFile(s,c);return Promise.all([r,l])})(e),n={...m,title:a.default.currentProject.bookName||a.default.currentProject.name,order:[(0,h.X_)(e)]},i=f.Z.initFile(o.q9,JSON.stringify(n,void 0,"\t"));return Promise.all([i,t])};var v=r.Z.create(n(10742)),y=null;function w(){var e;if(function(){var e=a.default.currentProject;return e.eduStartedAssignmentInfo&&e.guides&&e.guides.metadata}()){var t=a.default.currentProject,n=t.guides&&t.guides.metadata;!t.showAllBookPages&&t.isBookReader&&(n=u.Z.filterSection(t.guides,t.bookAssignmentPages)),n.sections=s().map(n.sections,(e=>(e.contentType=e.type,e))),e=Promise.resolve(n)}else e=(0,c.p)();return e.then((function(e){return c.Z.set(e),y=!0,v.metadataLoaded(c.Z),c.Z}))}const _=async function(){let e=null;if(y&&!s().isBoolean(y)&&(e=await p.default.promise.getState(y)),null===y||e&&e===p.default.promise.STATES.REJECTED)y=w();else if(!0===y)return Promise.resolve(c.Z);return y},k=function(){if(a.default.currentProject)return a.default.currentProject.exists(o.q9)?_().then((function(e){return[e,!1]})):b().then((()=>_().then((function(e){return[e,!0]}))))},P={Section:l.Z,Action:d.Z,createMetadata:k,getMetadata:_,close:function(e){c.Z.close(e),y=null}}},13538:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ie});var i={};n.r(i),n.d(i,{addFolder:()=>L,addPage:()=>R,cleanup:()=>te,copyNodes:()=>J,getMetadataFileNameById:()=>$,getNodeNameById:()=>I,getPathById:()=>S,getSectionsOrder:()=>j,getUnusedMetadataInfo:()=>k,linkPage:()=>F,load:()=>x,moveNodes:()=>Y,refreshCaches:()=>Q,removeNodes:()=>z,renameNode:()=>H,switchContentType:()=>X,unlinkPage:()=>B,update:()=>ee});var s=n(96486),a=n.n(s),o=n(49721),r=n(19575),c=n(93443),l=n(95611),d=n(97137),u=n(10742),h=n(85886),p=n(93702),f=n(99770);const m=c.Z.create(u);let g={},b={},v={},y={};const w={debug:console.debug.bind(window.console,"METADATA_BY_PATH:",(new Date).toISOString())},_=(e,t)=>{const n=a().pickBy(t,((e,t)=>"json"===r.default.path.getFileExtension(t)||1!==e));return a().map(n,((t,n)=>{const i="".concat(e,"/").concat(n);return 1===t?i:_(i,t)}))},k=async()=>{await x();const e=P(),t=a()(g).omit(e).keys().value(),n=G(t),i=W(g,n);return{metadataPaths:t,contentPaths:a().difference(i,t)}},P=()=>a().flattenDeep(C(h.mK)),C=e=>{const t="".concat(e,"/").concat(h.nb),n=g[t];return o.default.currentProject.exists(t)&&n?[t,a().map(n.order,(t=>{const n="".concat(e,"/").concat(t,".json");return g[n]?n:C("".concat(e,"/").concat(t))}))]:[]},x=async()=>{if(w.debug("load"),!o.default.currentProject.children[".guides"])throw new Error("metadata not found");const e=a().flattenDeep(_(h.mK,o.default.currentProject.children[".guides"].content)),t=a().filter(e,(e=>!g[e]));if(!t.length)return a().pick(a().cloneDeep(g),P());const n=await r.default.promise.mapSeries(t,(async e=>{const t=await A(e),n=t.content||"{}";try{return JSON.parse(n)}catch(n){throw await r.default.promise.getState(t.status)===r.default.promise.STATES.REJECTED&&(t.close(),delete b[e]),w.debug("load Metadata corrupted for ".concat(e,". Error: ").concat(n.message)),new Error("Metadata corrupted for ".concat(e))}}),10).then((e=>{const n=a().mapKeys(e,((e,n)=>t[n]));return g={...g,...n},a().cloneDeep(g)}));return E(),a().pick(n,P())},E=()=>{y=a()(g).pick(P()).mapValues((e=>e.id)).invert().value()},S=e=>y[e],I=e=>{const t=S(e);return t?(0,f.xZ)(t):null},A=e=>((!b[e]||b[e].model&&b[e].model.isDisposed())&&(b[e]=o.default.currentProject.unixFile(e)),b[e]),T=(e,t,n)=>{w.debug("getOrderedMetadata",t,n);const i="".concat(t,"/").concat(n),s=o.default.currentProject.getFileInfo(i),r=s&&"dir"===s.type,c="".concat(i).concat(r?"/index":"",".json");w.debug("getOrderedMetadata metadataFileName",c);const l=e[c];if(!l)return null;let d=[];return l.order&&(d=a().map(l.order,(t=>T(e,i,t)))),[l.contentType?c:null,d]},j=()=>(w.debug("getSectionsOrder"),x().then((e=>{const t=e[h.q9];return t&&t.order?a()(t.order).map((t=>T(e,h.mK,t))).flattenDeep().compact().value():(w.debug("getSectionsOrder metadata corrupted rootMetadata",t),Promise.reject(new Error("Metadata corrupted")))}))),Z=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];w.debug("updateMetadata",e,JSON.stringify(t),n),o.default.currentProject.exists(e)&&g[e]&&(g[e]=n?t:{...g[e],...t},v[e]=1)},O=()=>{w.debug("flush");const e=a().keys(v);return r.default.promise.iterateAsync(e,(e=>A(e).then((t=>{try{t.content=JSON.stringify(g[e],void 0,"\t"),delete v[e]}catch{}})).catch((()=>{})))).then((()=>l.Z.saveAllAndWait()))},N=(e,t)=>(w.debug("createMetadataFile",e,JSON.stringify(t)),p.Z.initFile(e).then((e=>p.Z.updateContent(e,t)))),D=(e,t)=>p.Z.initFile(e).then((e=>e.content=t)),M=(e,t,n)=>{let i=[...e];return t=-1===t?e.length:t,i.splice(t,0,n),i},R=(e,t,n)=>(w.debug("addPage",e,t,JSON.stringify(n)),x().then((i=>{const s=i[e],a=e.replace("/".concat(h.nb),""),o=(0,f.X_)(n),r=(0,f.y2)(n.contentType),c="".concat(a,"/").concat(o,".").concat(r),l="".concat(a,"/").concat(o,".json"),d=N(l,n);y[n.id]=l;const u=M(s.order,t,o);Z(e,{order:u});const m=p.Z.initFile(c);return Promise.all([d,m]).then((()=>O())).then((()=>c))}))),L=(e,t,n)=>(w.debug("addFolder",e,t,JSON.stringify(n)),x().then((i=>{const s=i[e],a=e.replace("/".concat(h.nb),""),o=(0,f.X_)(n),r="".concat(a,"/").concat(o,"/").concat(h.nb),c=N(r,{...n,order:[]});y[n.id]=r;const l=M(s.order,t,o);return Z(e,{order:l}),c.then((()=>O()))}))),F=(e,t)=>(w.debug("linkPage",e,JSON.stringify(t)),x().then((()=>{Z(e,t);const n=(0,f.kQ)(e,t.contentType);return p.Z.initFile(n).then((()=>O())).then((()=>n))}))),B=e=>(w.debug("unlinkPage",e),x().then((t=>{const n=t[e],i=a().pick(n,["id","title","order","type"]);Z(e,i,!0);let s=Promise.resolve();if(n.contentType){const t=(0,f.kQ)(e,n.contentType);s=o.default.currentProject.deleteItems([t])}return s.then((()=>O()))}))),U=e=>{const{dir:t,name:n}=r.default.path.parse(e);return n===h.nb?t.substring(0,t.lastIndexOf("/")):t},q=(e,t,n)=>{w.debug("updateOrderOnRename",t,n);const i=e[t],s=U(t),o="".concat(s,"/").concat(h.nb),r=e[o],c=I(i.id),l=(0,f.X_)({id:i.id,title:n});if(c!==l){const e=a().map(r.order,(e=>e===c?l:e));Z(o,{order:e})}},H=(e,t)=>(w.debug("renameNode",e,t),x().then((n=>{const i=n[e];if(!i||i.title===t)return;return r.default.path.parse(e).name===h.nb?((e,t,n)=>{w.debug("renameFolder",t,n);const i=e[t],s=(0,f.X_)({id:i.id,title:n});if(s===I(i.id))return Z(t,{title:n}),O().then((()=>null));const c=r.default.path.parse(t);Z(t,{title:n}),q(e,t,n);const l=c.dir.substring(0,c.dir.lastIndexOf("/")),d="".concat(l,"/").concat(s);return O().then((()=>o.default.currentProject.renameItem(c.dir,d))).then((()=>(g=a().mapKeys(g,((e,t)=>a().startsWith(t,"".concat(c.dir,"/"))?(delete b[t],t.replace(c.dir,d)):t)),E(),{oldPath:"".concat(c.dir,"/"),newPath:"".concat(d,"/")})))})(n,e,t):((e,t,n)=>{w.debug("renamePage",t,n);const i=e[t],s=(0,f.X_)({id:i.id,title:n});if(s===I(i.id))return Z(t,{title:n}),O().then((()=>[a().cloneDeep(g[t])]));const c=r.default.path.parse(t),l=(0,f.kQ)(t,i.contentType),d=r.default.path.getFileExtension(l),u="".concat(c.dir,"/").concat(s,".").concat(d);return o.default.currentProject.renameItem(l,u).then((()=>{Z(t,{title:n}),q(e,t,n);const a="".concat(c.dir,"/").concat(s,".json");return O().then((()=>o.default.currentProject.renameItem(t,a))).then((()=>{delete b[t],g[a]=g[t],delete g[t],y[i.id]=a})).then((()=>({oldPath:l,newPath:u})))}))})(n,e,t)}))),G=e=>{const t=[],n=a().map(e,(e=>{const{dir:n,name:i}=r.default.path.parse(e);return i===h.nb?(t.push(n),n):e}));return a().reduce(n,((e,n)=>(a().find(t,(e=>a().startsWith(n,"".concat(e,"/"))))||e.push(n),e)),[])},W=(e,t)=>a()(t).map((t=>{const n=e[t],i=n&&(0,f.kQ)(t,n.contentType),s=o.default.currentProject.exists(i);return n&&s?[t,i]:t})).flatten().value(),z=e=>(w.debug("removeNodes",e),x().then((t=>{const n=G(e),i=W(t,n);return o.default.currentProject.deleteItems(i).then((()=>(Q(),a().forEach(n,(e=>{const{dir:t,name:n}=r.default.path.parse(e),i=r.default.path.getFileName(n),s="".concat(t,"/").concat(h.nb),o=g[s],c=a().filter(o.order,(e=>e!==i));Z(s,{order:c})})),O())))}))),V=(e,t,n)=>{const i=a()(n).map((n=>{const i=((e,t,n,i)=>{const s="".concat(n).concat(i?"/".concat(h.nb):""),a=e[t];if(e[s].type===h.yj.CHAPTER){const n=t.split("/")[2],i=r.default.path.getFileName(n);return{pos:e[h.q9].order.indexOf(i)+1,parentMetadataPath:h.q9}}const o=r.default.path.parse(t).dir,c="".concat(o,"/").concat(h.nb),l=e[c];if(a.type===h.yj.PAGE){const e=r.default.path.parse(t),n=r.default.path.getFileName(e.name);return{pos:l.order.indexOf(n)+1,parentMetadataPath:c}}return{pos:l.order.length,parentMetadataPath:c}})(e,t,n.oldPaths[0],n.isDir);return{info:n,posInfo:i}})).groupBy((e=>{let{posInfo:t}=e;return t.parentMetadataPath})).value();return r.default.promise.iterateAsync(i,(t=>{const n=[...e[t[0].posInfo.parentMetadataPath].order],i=a().map(t,(e=>{let{info:t}=e;return r.default.path.getFileName(r.default.path.parse(t.newPaths[0]).name)}));return n.splice(t[0].posInfo.pos,0,...i),Z(t[0].posInfo.parentMetadataPath,{order:n}),r.default.promise.iterateAsync(t,(t=>{let{info:n}=t;if(n.isDir)return Promise.resolve();const i=n.newPaths[0],s=n.oldPaths[0],a=e[s];a.id=n.id;const o=n.newPaths[1],r=n.oldPaths[1],c=[N(i,a),A(r).then((e=>D(o,e.content)))];return Promise.all(c)}))})).then((()=>O()))},K=(e,t,n)=>{const i=o.default.currentProject;if(!i.exists("".concat(t,"/").concat(h.nb)))return Promise.resolve();if(!n["".concat(t,"/").concat(h.nb)])return Promise.resolve();const s=e=>a().get(i.children,e.split("/")),c=s(t),d={},u=a()(c).map(((s,a)=>{const o="".concat(t,"/").concat(a),c="dir"===i.getFileInfo(o).type;if(c&&!i.exists("".concat(o,"/").concat(h.nb)))return null;if(c&&!n["".concat(o,"/").concat(h.nb)])return null;const l=r.default.path.getFileName(a);d[l]=d[l]||r.default.GUID();const u=d[l],p=r.default.path.getFileExtension(a),m="index"!==l?(0,f.QZ)(l,u):l;return{id:u,oldPath:o,oldName:l,newPath:"".concat(e,"/").concat(m).concat(p?".".concat(p):""),newName:m}})).compact().value(),p=a().reduce(u,((e,t)=>(e[t.oldName]=t.newName,e)),{});return r.default.promise.iterateAsync(u,(e=>{const t=i.getFileInfo(e.oldPath),s="dir"===t.type,o=r.default.path.getFileExtension(t.name);if(!s&&"json"!==o)return A(e.oldPath).then((t=>D(e.newPath,t.content)));const c="".concat(e.newPath).concat(s?"/".concat(h.nb):""),l="".concat(e.oldPath).concat(s?"/".concat(h.nb):""),d=n[l];return d.id=e.id,t.name!==h.nb||s||(d.order=a().map(d.order,(e=>p[e]))),N(c,d)})).then((()=>(Z(h.q9,{}),O()))).then((()=>l.Z.saveAllAndWait())).then((()=>{const i={...s(t)},o=a().keys(i);return r.default.promise.mapSeries(o,(s=>a().isNumber(i[s])||s===e.split("/").pop()?Promise.resolve():K("".concat(e,"/").concat(p[s]),"".concat(t,"/").concat(s),n)))}))},J=async(e,t)=>{w.debug("copyNodes",e,t);const n=await x(),i=((e,t,n)=>a().reduce(n,((n,i)=>{const s=[],a=[],c=r.default.GUID(),l=o.default.currentProject.getFileInfo(i),d=l&&"dir"===l.type,u=d?"".concat(i,"/").concat(h.nb):i,p=e[u],m=(0,f.X_)({title:p.title,id:c});s.push(i);const g=p.type===h.yj.CHAPTER?h.mK:t;if(a.push("".concat(g,"/").concat(m).concat(d?"":".json")),!d){const e=(0,f.kQ)(u,p.contentType),n=r.default.path.getFileExtension(e);s.push(e),a.push("".concat(t,"/").concat(m,".").concat(n))}return n.push({oldPaths:s,newPaths:a,id:c,isDir:d}),n}),[]))(n,r.default.path.parse(e).dir,G(t));return await l.Z.saveAllAndWait(),await V(n,e,i),await r.default.promise.delay(500),((e,t)=>r.default.promise.mapSeries(e,(e=>{let{newPaths:n,oldPaths:i,isDir:s}=e;if(!s)return Promise.resolve();const a=n[0],o=i[0];return K(a,o,t)})).then((()=>l.Z.saveAllAndWait())))(i,n)},Y=async(e,t,n)=>{w.debug("moveNodes",e,t,n);const i=await x(),s=G(t),c=r.default.path.parse(e).dir,l=((e,t,n)=>a().reduce(n,((n,i)=>{const s="dir"===o.default.currentProject.getFileInfo(i).type,{dir:a,name:c}=r.default.path.parse(i);if(a===t)return n;if(n.src.push(i),n.dest.push("".concat(t,"/").concat(c)),!s){const s=e[i];if(s.contentType){const e=(0,f.kQ)(i,s.contentType),a=r.default.path.getFileExtension(e);n.src.push(e),n.dest.push("".concat(t,"/").concat(r.default.path.getFileName(c),".").concat(a))}}return n}),{src:[],dest:[]}))(i,c,s);l.src.length&&await o.default.currentProject.moveItems(l.src,l.dest),await((e,t,n,i)=>{const s=a().groupBy(n,(e=>U(e)));a().each(s,((t,n)=>{const i="".concat(n,"/").concat(h.nb),s=e[i],o=a().map(t,f.xZ),r=s.order.filter((e=>!a().includes(o,e)));Z(i,{order:r})}));const o="".concat(t,"/").concat(h.nb),r=e[o],c=a().map(n,f.xZ);let l=[...r.order];return l=a().filter(l,(e=>!c.includes(e))),i=a().isUndefined(i)?r.order.length:i,l.splice(i,0,...c),Z(o,{order:l}),O()})(i,c,s,n),a().each(l.src,((e,t)=>{const n=l.dest[t],i="dir"===o.default.currentProject.getFileInfo(n).type,s=r.default.path.parse(e);if(i||"json"===r.default.path.getFileExtension(s.name))if(i){const t="".concat(e,"/"),i="".concat(n,"/");g=a().mapKeys(g,((e,n)=>a().startsWith(n,t)?n.replace(t,i):n))}else g[n]=g[e]})),Q()},Q=()=>{g=a().pickBy(g,((e,t)=>o.default.currentProject.exists(t))),b=a().pickBy(b,((e,t)=>o.default.currentProject.exists(t))),v=a().pickBy(v,((e,t)=>o.default.currentProject.exists(t))),E()},X=(e,t)=>(w.debug("switchContentType",e,t),x().then((n=>{const i=n[e];if(!i||!i.contentType)return null;const s=(0,f.kQ)(e,i.contentType),a=(0,f.y2)(t),r=(0,f._b)(s,a);return o.default.currentProject.unixFile(s).then((e=>{e.content=""})).then((()=>l.Z.saveAllAndWait())).then((()=>o.default.currentProject.renameItem(s,r))).then((()=>(Z(e,{contentType:t}),O()))).then((()=>r))}))),$=e=>{let t=h.q9;return e&&"#"!==e?S(e):t},ee=(e,t)=>(Z(e,t),O()),te=()=>{w.debug("cleanup"),g={},a()(b).keys().each((e=>A(e).then((e=>e.close())))),b={},v={},y={}};c.Z.subscribe("project:close:#projectId",(()=>{te()}));const ne=a().debounce((()=>d.Z.notify("Warning! Manual editing JSON files from ".concat(h.mK," can break guides."))),200);c.Z.subscribe("file:editor:open",((e,t)=>{b[t.fileName]&&ne()})),c.Z.subscribe("shareman:file:remoteChange:#path",(e=>{let{path:t}=e;g[t]&&m.reloadGuidesEditor()}));const ie=(0,n(80348).Z)(i,["addPage","addFolder","linkPage","unlinkPage","renameNode","removeNodes","copyNodes","moveNodes","switchContentType","update"],["load","getSectionsOrder","cleanup","getUnusedMetadataInfo"])},1436:(e,t,n)=>{"use strict";n.d(t,{Z:()=>C,p:()=>k});var i=n(96486),s=n.n(i),a=n(52308),o=n.n(a),r=n(93443),c=n(85886),l=n(8450),d=n(79703),u=n(21384),h=n(13538),p=n(99770),f=n(80348),m=r.Z.create(n(10742)),g=function(){this._sections=[]};const b=["preview","file","tutor","vm","vmssh","vmnested","earsketch","jupyter-lab","sandbox"];var v=g.prototype;function y(e,t){var n=[],i=[],a=[],o=0;return s().each(t,(function(t){var a=e.getSectionById(t.id);if(s().isUndefined(a))a=new l.Z(t);else{e._sections=s().without(e._sections,a);var r=a.update(t);i.push({id:a.id,major:r})}a.teacherOnly?a.number={section:""}:(o++,a.number={section:o}),n.push(a)})),s().each(e._sections,(function(e){a.push(e.id)})),e._sections=n,{updated:i,deleted:a}}const w=()=>{o()("#content").block()},_=()=>{const e=o()("#content");s().defer((()=>e.unblock()))};v.set=function(e){if(!e){const e=this._sections;return this._sections=[],void m.guidesUpdated({deleted:s().map(e,(e=>(e.cleanup(),e.id)))})}const t=y(this,e.sections);this.title=e.title,this.theme=e.theme,this.scripts=e.scripts,this.suppressPageNumbering=e.suppressPageNumbering,this.hideMenu=e.hideMenu,this.allowGuideClose=e.allowGuideClose,this.useSubmitButtons=e.useSubmitButtons,this.useMarkAsComplete=e.useMarkAsComplete,this.collapsedOnStart=e.collapsedOnStart,this.hideSectionsToggle=e.hideSectionsToggle,this.hideBackToDashboard=e.hideBackToDashboard,this.protectLayout=e.protectLayout,m.guidesUpdated(t)},v.save=function(){return h.Z.update(c.q9,this.json())},v.getSection=function(e){return this._sections[e]},v.getSectionById=function(e){return s().find(this._sections,(function(t){return t.id===e}))},v.sectionsCount=function(){return this._sections.length},v.getSections=function(){return s().clone(this._sections)},v.getSectionByFileName=function(e){return s().find(this._sections,{contentPath:e})};const k=()=>h.Z.load().then((e=>Promise.all([e,h.Z.getSectionsOrder()]))).then((e=>{let[t,n]=e;const i={...t},a=i[c.q9];delete i[c.q9];const{name:o,order:r,...l}=a;return{...l,sections:s()(n).map((e=>{const n=t[e];if(!n)return;const{order:i,...s}=n,a=(0,p.kQ)(e,s.contentType);return{...s,contentFile:a}})).compact().value()}}));v.refreshSections=function(){return k().then((e=>{const t=y(this,e.sections);m.guidesUpdated(t)}))},v.updateSectionsOrder=function(){return h.Z.getSectionsOrder().then((e=>{this._sections=s().sortBy(this._sections,(t=>{const n=(0,p._b)(t.contentPath,"json");return e.indexOf(n)}))}))},v.addSection=function(e){return e instanceof l.Z||(e=new l.Z(e)),this._sections.push(e),this.updateSectionsOrder().then((()=>{this.updateNumbers(),m.guidesUpdated({added:[e.id]})}))},v.updateNumbers=function(){var e=0;s().forEach(this._sections,(function(t){t&&(t.teacherOnly?t.number={section:""}:(e++,t.number={section:e}))}))},v.removeSections=function(e){const t=[],n=s().keyBy(e,(e=>e));this._sections=s().filter(this._sections,(e=>{const i=n[e.id];return i&&(t.push(e.id),e.cleanup()),!i})),this.updateNumbers(),m.guidesUpdated({deleted:t})},v.getSectionPosition=function(e){return s().findIndex(this._sections,(function(t){return t.id===e}))},v.close=function(e){this.set(null),e&&h.Z.cleanup()},v.json=function(){var e={};return e.title=this.title,e.theme=this.theme,e.scripts=this.scripts,e.suppressPageNumbering=this.suppressPageNumbering,e.useSubmitButtons=this.useSubmitButtons,e.useMarkAsComplete=this.useMarkAsComplete,e.hideMenu=this.hideMenu,e.allowGuideClose=this.allowGuideClose,e.collapsedOnStart=this.collapsedOnStart,e.hideSectionsToggle=this.hideSectionsToggle,e.hideBackToDashboard=this.hideBackToDashboard,e.protectLayout=this.protectLayout,e},v.getTabs=function(e,t){return d.ZP.buildTabsMap(this,e,t)},v.getSectionTabs=function(e,t){var n=e;if(s().isString(n))n=this.getSectionPosition(n);else if(n<0)return{ssh:[],terminal:[],ide:[]};return function(e,t,n){var i={},a={ide:[],ssh:[],terminal:[]},o=e.getSection(t);if(s().isUndefined(o))return{ssh:[],terminal:[],ide:[]};o.isCloseAll||(a=e.getSectionTabs(t-1,n));var r=o.getTabs(),c=u.Z.filterTabs(r.open,b),l=u.Z.filterTabs(r.close,b);if(i.ide=u.Z.mergeTabs(a.ide,c,l),n){var d=u.Z.filterTabs(r.open,["ssh"]),h=u.Z.filterTabs(r.open,["terminal"]);i.ssh=u.Z.mergeTabs(a.ssh,d,[]),i.terminal=u.Z.mergeTabs(a.terminal,h,[])}else i.ssh=u.Z.filterTabs(r.open,["ssh"]),i.terminal=u.Z.filterTabs(r.open,["terminal"]);return i}(this,n,t)},v.getLayout=function(e){var t=e;if(s().isString(t)&&(t=this.getSectionPosition(t)),t<0)return"1-panel-tree";var n=this.getSection(t);if(!n)return"1-panel-tree";var i=n.layout;return s().isUndefined(i)||""===i?this.getLayout(t-1):i},v.addPage=function(e,t,n,i){return w(),h.Z.load().then((()=>{const s=h.Z.getMetadataFileNameById(e);if(!s)return;const a=new l.Z(n),o={...a.json,type:c.yj.PAGE};return t=i?t:t+1,h.Z.addPage(s,t,o).then((e=>(a.contentPath=e,n.value?a.setValue(n.value):Promise.resolve()))).then((()=>this.addSection(a)))})).finally((()=>_()))},v.addFolder=function(e,t,n,i){return w(),h.Z.load().then((()=>{const s=h.Z.getMetadataFileNameById(e);if(s)return t=i?t:t+1,h.Z.addFolder(s,t,n)})).finally((()=>_()))},v.linkPage=function(e,t){return w(),h.Z.load().then((n=>{const i=h.Z.getMetadataFileNameById(e);if(!i)return;const s=n[i];t.title=s.title;const a=new l.Z({...t,type:s.type}),o={...a.json,type:s.type,order:s.order};return h.Z.linkPage(i,o).then((e=>(a.contentPath=e,t.value?a.setValue(t.value):Promise.resolve()))).then((()=>this.addSection(a)))})).finally((()=>_()))},v.unlinkPage=function(e){return w(),h.Z.load().then((()=>{const t=h.Z.getMetadataFileNameById(e);if(t)return h.Z.unlinkPage(t)})).finally((()=>_()))},v.renameNode=function(e,t){return w(),h.Z.load().then((n=>{const i=h.Z.getMetadataFileNameById(e);if(!i)return;const a=n[i].id,o=this.getSectionById(a);let r="";o&&(r=o.title,o.title=t);return h.Z.renameNode(i,t).then((e=>{s().forEach(this._sections,(t=>{e&&t.contentPath&&s().startsWith(t.contentPath,e.oldPath)&&(t.contentPath=t.contentPath.replace(e.oldPath,e.newPath))}))})).catch((()=>{o&&(o.title=r)}))})).finally((()=>_()))},v.updateTitle=function(e){return w(),h.Z.load().then((t=>{const n=t[c.q9];if(n&&n.title!==e)return h.Z.update(c.q9,{title:e})})).finally((()=>_()))},v.removeNodes=function(e){return w(),h.Z.load().then((()=>{const t=s().map(e,(e=>h.Z.getMetadataFileNameById(e)));return h.Z.removeNodes(t)})).finally((()=>_()))},v.copyNodes=function(e,t){return w(),h.Z.load().then((()=>{const n=h.Z.getMetadataFileNameById(e),i=s()(t).map((e=>h.Z.getMetadataFileNameById(e))).compact().value();return h.Z.copyNodes(n,i).then((()=>this.refreshSections()))})).finally((()=>_()))},v.moveNodes=function(e,t,n){return w(),h.Z.load().then((()=>{const i=h.Z.getMetadataFileNameById(e),a=s()(t).map((e=>h.Z.getMetadataFileNameById(e))).compact().value();return h.Z.moveNodes(i,a,n).then((()=>this.refreshSections()))})).finally((()=>_()))},v.getUnusedMetadataInfo=function(){return h.Z.getUnusedMetadataInfo()},v.refreshCaches=function(){h.Z.refreshCaches()},Object.defineProperty(v,"theme",{get:function(){return s().isUndefined(this._theme)&&(this._theme=c.default.DEFAULT_THEME),this._theme},set:function(e){s().isUndefined(e)&&(e=c.default.DEFAULT_THEME),e!==this._theme&&(this._theme=e,m.themeChanged())}}),Object.defineProperty(v,"scripts",{get:function(){return this._scripts||[]},set:function(e){s().isString(e)&&(e=s().map(e.split("\n"),s().trim),e=s().compact(e)),s().isArray(e)?this._scripts=e:this._scripts=[],m.scriptsChanged()}}),Object.defineProperty(v,"suppressPageNumbering",{get:function(){return this._suppressPageNumbering},set:function(e){this._suppressPageNumbering=!0===e,m.suppressPageNumberingChanged()}}),Object.defineProperty(v,"hideMenu",{get:function(){return this._hideMenu},set:function(e){this._hideMenu=!0===e}}),Object.defineProperty(v,"allowGuideClose",{get:function(){return this._allowGuideClose},set:function(e){this._allowGuideClose=!0===e}}),Object.defineProperty(v,"useSubmitButtons",{get:function(){return this._useSubmitButtons},set:function(e){this._useSubmitButtons=!1!==e}}),Object.defineProperty(v,"useMarkAsComplete",{get:function(){return this._useMarkAsComplete},set:function(e){this._useMarkAsComplete=!1!==e}}),Object.defineProperty(v,"collapsedOnStart",{get:function(){return this._collapsedOnStart},set:function(e){this._collapsedOnStart=!0===e}}),Object.defineProperty(v,"hideSectionsToggle",{get:function(){return this._hideSectionsToggle},set:function(e){this._hideSectionsToggle=!0===e}}),Object.defineProperty(v,"hideBackToDashboard",{get:function(){return this._hideBackToDashboard},set:function(e){this._hideBackToDashboard=!0===e}}),Object.defineProperty(v,"protectLayout",{get:function(){return this._protectLayout},set:function(e){this._protectLayout=!0===e}});const P=new g,C=(0,f.Z)(P,["save","refreshSections","updateSectionsOrder","addSection","addPage","addFolder","linkPage","unlinkPage","renameNode","updateTitle","removeNodes","copyNodes","moveNodes"],[])},80348:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(19575);const s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=[];return new Proxy(e,{get(e,a,o){const r=e[a];if(r instanceof Function){const c=t.includes(a),l=n.includes(a);return c||l?async function(){const t=[...s];let n,a;c&&(n=i.default.GUID(8),a=i.default.promise.deferred(),s.push({id:n,promise:a.promise})),await i.default.promise.allSeries(t.map((e=>e.promise)));for(var l=arguments.length,d=new Array(l),u=0;u<l;u++)d[u]=arguments[u];const h=r.apply(this===o?e:this,d);return c&&h.finally((()=>{var e;null===(e=a)||void 0===e||e.resolve(),n&&(s=s.filter((e=>e.id!==n)))})),h}:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return r.apply(this===o?e:this,n)}}return r}})}},8450:(e,t,n)=>{"use strict";n.d(t,{Z:()=>A});var i=n(96486),s=n.n(i),a=n(52308),o=n.n(a),r=n(49721),c=n(19575),l=n(93443),d=n(85886),u=n(55537),h=n(79703),p=n(21384),f=n(87167),m=n(95611),g=n(13538),b=n(99770),v=h.ZP.Tab,y=n(72523).aI;n(44830);var w=l.Z.create(n(10742)),_={title:"New Section",contentType:d._1},k=function(e){C(this,e)},P=k.prototype;function C(e,t){t=s().defaults(t,_),e._id=s().isUndefined(t.id)?c.default.GUID():t.id,e._readOnly=t.readOnly,e._pageId=t.pageId,e._title=t.title,e.actions=t.files,e.layout=t.layout,e.paths=t.path,e.type=t.type,e._contentType=t.contentType,e.teacherOnly=t.teacherOnly,e.closeTerminalSession=void 0===t.closeTerminalSession?!e.isCloseAll:t.closeTerminalSession,e.contentPath=t.contentFile||function(e,t){if(t&&e===d.default.CONTENT_TYPE_HTML)return t.htmlRelativePath;return null}(t.contentType,t.content),e.content=t.content,e.isFakeSection=t.isFakeSection,e.learningObjectives=t.learningObjectives,e._media=t.media}function x(e){var t,n=(t=e.title,c.default.path.escape(t)),i=d.default.GUIDES_CONTENT_FOLDER,s=(0,b.y2)(e.contentType);return[i,"/",n,"-",e.id.slice(0,4),".",s].join("")}function E(e,t){const n=o()("#content");return n.block(),g.Z.load().then((()=>{const n=g.Z.getMetadataFileNameById(e.id);return n?g.Z.switchContentType(n,t).then((t=>{e.contentPath=t})):null})).finally((()=>s().defer((()=>n.unblock()))))}function S(e){if(s().isUndefined(e._contentPromise))if(e.isFakeSection||e.content&&e.content.markdown){const t=new f.yO(e.isFakeSection?"":e.content.markdown);t.shouldBeDisposed=!0,e._contentPromise=Promise.resolve(t)}else e._contentPromise=function(e){var t=r.default.currentProject;if(!t)return Promise.reject(new Error("No project"));if(!r.default.currentProject.exists(e)){const{name:n,dir:i}=c.default.path.parse(e);return t.createFile(n,i).then((function(){return t.file(e)}))}return t.file(e)}(e.contentPath).then((function(t){return e.file=t,t.model}));return e._contentPromise}function I(e,t,n){var i={open:[],close:[],isCloseAll:!1,isPaused:!1},a=e._media&&e._media.actions;return a?(i.open=s().concat(t.ide,t.terminal),a=s()(a).sortBy("time").filter((function(e){return e.time<=n})).value(),s().forEach(a,(function(e){if(e.tabType){var t=new v(e.tabType,e.content,e.panel,{ref:e.reference,lineCount:s().isNumber(e.lines)?e.lines:parseInt(e.lines,10)});if("open"===e.action)i.open.push(t);else{var n=h.ZP.findIndex({tabs:i.open},{tab:t},!0);-1!==n&&(t.type===v.TYPE.TERMINAL?i.open=s().filter(i.open,(function(e){return e.type!==v.TYPE.TERMINAL})):i.open.splice(n,1))}}else switch(e.type){case y.CLOSE_ALL:i.open=[],i.isCloseAll=!0;break;case y.PAUSE:i.isPaused=!0}})),i):i}P.setContentType=function(e){return this._contentType=e,E(this,e)},P.cleanup=function(){var e;this.file=null,null===(e=this._contentPromise)||void 0===e||e.then((e=>{(null==e?void 0:e.shouldBeDisposed)&&!e.isDisposed()&&e.dispose()}))},Object.defineProperty(P,"id",{get:function(){return this._id}}),Object.defineProperty(P,"readOnly",{get:function(){return this._readOnly}}),Object.defineProperty(P,"title",{get:function(){return this._title},set:function(e){this._title!==e&&(this._title=e,function(e){w.sectionUpdate({id:e.id},e),w.guidesUpdated({updated:[{id:e.id}]})}(this))}}),Object.defineProperty(P,"actions",{get:function(){return this._actions},set:function(e){e=function(e){return e=s().isArray(e)?e:[],s().forEach(e,(function(t,n){t instanceof u.Z||(e[n]=new u.Z(t))})),e}(e),this._actions=e}}),Object.defineProperty(P,"contentType",{get:function(){return this._contentType},set:function(e){this._contentType=e,E(this,e)}}),Object.defineProperty(P,"contentPath",{get:function(){return this._contentPath},set:function(e){s().isString(e)?this._contentPath=e:this._contentPath=x(this)}}),Object.defineProperty(P,"contentModel",{get:function(){return S(this)}}),Object.defineProperty(P,"layout",{get:function(){return this._layout},set:function(e){e=function(e){const t=e?e.replace(/(-tree)?(-guides-left)?/g,""):e;if(t&&"undefined"!==t)return s().startsWith(e,"1-panel")?e.replace(/-guides-left$/,""):e}(e),this._layout=e}}),Object.defineProperty(P,"learningObjectives",{get:function(){return s().isUndefined(this._learningObjectives)&&(this._learningObjectives=""),this._learningObjectives},set:function(e){s().isUndefined(e)&&(e=""),e!==this._learningObjectives&&(this._learningObjectives=e)}}),Object.defineProperty(P,"media",{get:function(){return this._media},set:function(e){this._media=e}}),Object.defineProperty(P,"paths",{get:function(){return this._paths},set:function(e){var t=[];s().isString(e)?s().map(e.split(";"),(function(e){(e=s().trim(e)).length>0&&t.push(e)})):s().isArray(e)&&(t=e),this._paths=t}}),Object.defineProperty(P,"json",{get:function(){return{id:this.id,title:this.title,files:(e=this.actions,s().map(e,"json")),layout:this.layout,path:this.paths,type:this.type,contentType:this.contentType,teacherOnly:this.teacherOnly,closeTerminalSession:this.closeTerminalSession,media:this.media,learningObjectives:this.learningObjectives,readOnly:this.readOnly};var e}}),Object.defineProperty(P,"isCloseAll",{get:function(){var e=!1,t=this.actions;return s().forEach(t,(function(t){if(t.isCloseAll)return e=!0,!1})),e}}),Object.defineProperty(P,"teacherOnly",{get:function(){return this._teacherOnly},set:function(e){this._teacherOnly=!0===e}}),P.setValue=function(e){return this.contentModel.then((function(t){return t.setValue(e)})).then((()=>{if(!(this.isFakeSection||this.content&&this.content.markdown))return m.Z.saveAllAndWait()}))},P.update=function(e){var t=!1;return e.title!==this.title&&(t=!0),C(this,{...e,id:this.id,contentFile:this.contentPath,type:this.type}),t},P.getTabs=function(){var e={open:[],close:[]},t=this.actions;return s().forEach(t,(function(t){var n=t.commands;s().forEach(n,(function(n){var i=new v(n.type,n.content,t.panel,{ref:t.ref,lineCount:t.lineCount,trackId:t.trackId,sandboxId:t.sandboxId});"open"===t.action?e.open.push(i):e.close.push(i)}))})),e},P.getMediaTabs=function(e,t,n){var i={map:{toOpen:[],toClose:[]},needCloseAll:!1,needPause:!1},s=I(this,e,t),a=I(this,e,n);return i.needCloseAll=t<n&&a.isCloseAll,i.needPause=t<n&&a.isPaused,s=p.Z.mergeTabs([],s.open,s.close),a=p.Z.mergeTabs([],a.open,a.close),i.map=h.ZP.diffTabs({tabs:s},{tabs:a}),i},P.save=function(){return g.Z.load().then((()=>g.Z.update(g.Z.getMetadataFileNameById(this.id),this.json)))};const A=k},50352:(e,t,n)=>{"use strict";n.d(t,{B5:()=>u,ZP:()=>h,wu:()=>d});var i=n(49721),s=n(76900),a=n(85886),o=n(96486),r=n.n(o);const c=function(e){return e.teacherOnly?"":e.number.section+"."},l=function(e){return e===s.ZP.FREE_TEXT?"Submit Answer!":"Check It!"},d=()=>{var e=i.default.ide;return e.panels.isOpen(null,"guides")||e.panels.isOpen(null,"guides-edit")},u=(e,t)=>{let n,i;n=t===a.default.CONTENT_TYPE_HTML?/data-codio-assessment-output="(.*?)"/g:/\{.+?\|assessment\}\((.*?)\)/g;const s=[];for(;null!==(i=n.exec(e));)s.push(i[1]);return r().uniq(s)},h={generateTitleNumber:c,generateTitle:function(e,t){return(t?"":c(e)+" ")+e.title},generateAssessmentString:function(e,t){return"{"+(t=t||l(e.type))+"|assessment}("+e.taskId+")"},getDefaultButtonText:l,findAssessmentsIds:u}},94036:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(96486),s=n.n(i);const a=JSON.parse('{"type":"vertical","params":{"width":"100%","height":"100%","fixed":false},"children":[{"type":"single","params":{"width":"200px","height":"100%","focus":false,"canFocus":true,"fixed":true},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":0},"children":[{"type":"tab","params":{"ext":"filetree","active":true,"title":"Filetree"}}]}]}]}');var o={"1-panel":n(74607),"2-column":n(29681),"3-column":n(37196),"3-cell":n(29991),"3-cell-left":n(3074),"4-cell":n(2106)};function r(e){return s().cloneDeep(o[e])}function c(e){var t=r(e),n=t.children[0];return t.children=[s().cloneDeep(a)],t.children[0].children.push(n),t}const l={"1-panel-tree":{template:c("1-panel"),panels:[[0,1,0],[0,0,0]],panelsCount:1,guidesPanel:0,defaultFilesPanel:0,name:"1 Panel with tree"},"1-panel":{template:r("1-panel"),panels:[[0,0]],panelsCount:1,guidesPanel:0,defaultFilesPanel:0,name:"1 Panel without tree"},"2-panels-tree":{template:c("2-column"),panels:[[0,1,0,0],[0,1,1,0],[0,0,0,0]],panelsCount:2,guidesPanel:1,defaultFilesPanel:0,name:"2 Panels with tree"},"2-panels-tree-guides-left":{template:c("2-column"),panels:[[0,1,0,0],[0,1,1,0],[0,0,0,0]],panelsCount:2,guidesPanel:0,defaultFilesPanel:1,name:"2 Panels with tree (Guides Left)"},"2-panels":{template:r("2-column"),panels:[[0,0,0],[0,1,0]],panelsCount:2,guidesPanel:1,defaultFilesPanel:0,name:"2 Panels without tree"},"2-panels-guides-left":{template:r("2-column"),panels:[[0,0,0],[0,1,0]],panelsCount:2,guidesPanel:0,defaultFilesPanel:1,name:"2 Panels without tree (Guides Left)"},"3-columns-tree":{template:c("3-column"),panels:[[0,1,0,0,0],[0,1,0,1,0],[0,1,1,0],[0,0,0,0]],panelsCount:3,guidesPanel:2,defaultFilesPanel:0,name:"3 Columns with tree"},"3-columns-tree-guides-left":{template:c("3-column"),panels:[[0,1,0,0,0],[0,1,0,1,0],[0,1,1,0],[0,0,0,0]],panelsCount:3,guidesPanel:0,defaultFilesPanel:1,name:"3 Columns with tree (Guides Left)"},"3-columns":{template:r("3-column"),panels:[[0,0,0,0],[0,0,1,0],[0,1,0]],panelsCount:3,guidesPanel:2,defaultFilesPanel:0,name:"3 Columns without tree"},"3-columns-guides-left":{template:r("3-column"),panels:[[0,0,0,0],[0,0,1,0],[0,1,0]],panelsCount:3,guidesPanel:0,defaultFilesPanel:1,name:"3 Columns without tree (Guides Left)"},"3-cell-tree":{template:c("3-cell"),panels:[[0,1,0,0,0],[0,1,0,1,0],[0,1,1,0],[0,0,0,0]],panelsCount:3,guidesPanel:2,defaultFilesPanel:0,name:"3 Panels with tree"},"3-cell-tree-guides-left":{template:c("3-cell-left"),panels:[[0,1,0,0],[0,1,1,0,0],[0,1,1,1,0],[0,0,0,0]],panelsCount:3,guidesPanel:0,defaultFilesPanel:1,name:"3 Panels with tree (Guides Left)"},"3-cell":{template:r("3-cell"),panels:[[0,0,0,0],[0,0,1,0],[0,1,0],[0,0,0,0]],panelsCount:3,guidesPanel:2,defaultFilesPanel:0,name:"3 Panels without tree"},"3-cell-left":{template:r("3-cell-left"),panels:[[0,0,0],[0,1,0,0],[0,1,1,0]],panelsCount:3,guidesPanel:0,defaultFilesPanel:1,name:"3 Panels without tree (Guides Left)"},"4-cell-tree":{template:c("4-cell"),panels:[[0,1,0,0,0,0],[0,1,0,0,1,0],[0,1,0,1,0,0],[0,1,0,1,1,0],[0,0,0,0]],panelsCount:4,guidesPanel:1,defaultFilesPanel:0,name:"4 Panels with tree"},"4-cell-tree-guides-left":{template:c("4-cell"),panels:[[0,1,0,0,0,0],[0,1,0,0,1,0],[0,1,0,1,0,0],[0,1,0,1,1,0],[0,0,0,0]],panelsCount:4,guidesPanel:0,defaultFilesPanel:1,name:"4 Panels with tree (Guides Left)"},"4-cell":{template:r("4-cell"),panels:[[0,0,0,0,0],[0,0,0,1,0],[0,0,1,0,0],[0,0,1,1,0],[0,0,0,0]],panelsCount:4,guidesPanel:1,defaultFilesPanel:0,name:"4 Panels without tree"},"4-cell-guides-left":{template:r("4-cell"),panels:[[0,0,0,0,0],[0,0,0,1,0],[0,0,1,0,0],[0,0,1,1,0],[0,0,0,0]],panelsCount:4,guidesPanel:0,defaultFilesPanel:1,name:"4 Panels without tree (Guides Left)"}}},15061:(e,t,n)=>{"use strict";n.d(t,{Z:()=>j});var i=n(96486),s=n.n(i),a=n(52308),o=n.n(a),r=n(49721),c=n(97137),l=n(19575),d=n(94036),u=n(93443),h=n(79703),p=n(53425),f=n(4955).xv,m=u.Z.create(n(10742)),g=h.ZP.Tab;function b(e,t){var n=e.panels[e.guidesPanel];0===t&&(t=""),v(e.template,n).children.push({type:"tab",params:{ext:"guides",active:!0,filename:""+t}})}function v(e,t){var n=e;return s().each(t,(function(e){if(s().isUndefined(n))return!1;n=n.children[e]})),n}function y(e,t){var n=d.Z[e];return s().isUndefined(n)?[]:(b(n=s().cloneDeep(n),t),n)}function w(e,t){if(s().isUndefined(e))return;var n=t;s().isUndefined(n)&&(n=e.defaultFilesPanel||0);var i=s().clone(e.panels[n]);if(s().isUndefined(i))return;var a=r.default.ide.panels;i.pop();const o=v(a.child,i);return o.open?o:void 0}function _(e,t,n,i){var a=t.getSectionTabs(n),r=t.getSection(n),d=a.ssh,u=a.terminal,p=h.ZP.buildMap(t,i,n);o()("div.ac").showFProgress("Please wait...");var m=[];s().forEach(d,(function(e){m.push(f.run(e.content))}));var b=Promise.all(m);return m.length>0&&(b=b.then(l.default.promise.delay.bind(null,2e3))),b.catch((function(){c.Z.info("Prepare step fails.")})).finally((function(){var t=w.bind(null,e);let n;if(r.isCloseAll)n=k().then((function(){if(0===u.length||r.closeTerminalSession)return new g("terminal").close(t)}));else{const e=s().map(p.toClose,(function(e){return e.close(t,!0)}));n=Promise.all(e)}return n.then((function(){const e=s().map(p.toOpen,(function(e){return e.open(t,!0)}));return Promise.all(e)})).then((function(){return Promise.all(s().map(u,(function(e){return r.isCloseAll&&r.closeTerminalSession&&(e.isCloseAll=r.isCloseAll),e.open(t,!0)})))})).catch(l.default.error.checkErrorForIgnore).finally((()=>o()("div.ac").hideFProgress()))}))}async function k(){return r.default.ide.panels.closeAllTabs(["filetree","guides","guides-edit","feedback"],!0)}function P(){m.layoutApplied()}function C(){return d.Z[E()]}function x(){}n(44041);function E(){return function(){if(!r.default.ide.panels.child)return null;var e=r.default.ide.panels.child.serialize(),t=s().cloneDeep(d.Z);return s().each(t,(function(e,t){b(e,0),e.name=t})),s().findKey(t,T.bind(null,e))}()}function S(e){return e&&e.params&&"guides"===e.params.ext}function I(e,t){if(s().isUndefined(e)||s().isUndefined(t))return!1;if(e.type!==t.type)return!1;if("tabs"===e.type)return s().some(e.children,S)===s().some(t.children,S);if(e.children.length===t.children.length){for(var n=0;n<e.children.length;n++){if(!1===I(e.children[n],t.children[n]))return!1}return!0}return!1}function A(e){return!!("tab"===e.type&&e.params&&"filetree"===e.params.ext||e.children&&s().some(e.children,A))}function T(e,t){var n=t.template;return I(e,n)&&A(e)===A(n)}s().each(["command:ide:panel_close","command:ide:panel","command:ide:panel_split_vertical","command:ide:panel_split_horizontal","command:ide:layout_2_rows","command:ide:layout_default","command:ide:layout_showcase","command:ide:layout_2_rows"],(function(e){u.Z.subscribe(e,x)}));const j={reset:x,build:y,set:function(e,t,n,i){var a=e.getLayout(t),o=E();if(s().isUndefined(a)||s().isUndefined(d.Z[a])){if(s().isUndefined(o))return _(void 0,e,t,n).then(P),!1;a=o}return i&&!s().includes(a,"-tree")&&(a+="-tree"),o!==a?(s().defer((function(){(function(e){return r.default.ide.panels.setLayout(e).then((()=>r.default.ide.panels.updateUrl(null,null)))})(y(a,t).template).then(P)})),!0):(_(d.Z[o],e,t,n).then(P),!1)},getLayout:C,defs:d.Z,run:function(e){s().isArray(e)||(e=[e]);var t=E(),n=w.bind(null,d.Z[t]);s().each(e,(function(e){var i=e.action,a=e.command,o=s().pick(i,["ref","lineCount","trackId","sandboxId"]);const r=((e,t)=>{if(s().isUndefined(t)||s().isNull(t)||!s().isNaN(parseInt(t,10)))return t;const n=(0,p.H8)(e);if(s().includes(["guide","guides"],t.toLowerCase()))return n;if(t.length>1)return;const i=s().invert((0,p.p4)(e))[t.toUpperCase()];return s().isNumber(parseInt(i,10))?i:void 0})(t,i.panel);var c=new g(a.type,a.content,r,o);"open"===i.action?c.open(n):c.close(n).catch(l.default.error.checkErrorForIgnore)}))},closeAllTabs:k,getPanel:w,getPlayerPanel:function(){var e=E();if(!s().isUndefined(e)&&s().isObject(d.Z[e]))return w(d.Z[e],d.Z[e].guidesPanel)},getLayoutInfo:function(e,t,n){var i=C(),a=e.getSectionTabs(n),o=h.ZP.buildMap(e,t,n),r=s().map([].concat(o.toOpen,a.terminal,a.ssh),(function(e){return{type:e.type,panelNumber:e.panelNumber,content:e.content}}));return{layout:i&&i.name?i.name:void 0,opened:r}},getCurrentLayout:E}},44041:(e,t,n)=>{"use strict";n.r(t);var i=n(96486),s=n.n(i),a=n(49721),o=n(93443),r=n(34335),c=n(19575),l=n(68058).I_,d=o.Z.create(n(10742)),u=o.Z.createSync(n(57066));function h(){return a.default.currentProject.guid+":guides_editor_layout"}function p(){return l.get(h())}function f(){var e=a.default.ide.panels.serialize();p()||l.set(h(),e);var t=m(e),n=s().toFinite(t&&t.params&&t.params.filename||0),i=a.default.ide.panels,o=i.isOpen(null,"guides")||i.isOpen(null,"guides-edit");(o?o.beforeClose():Promise.resolve()).then((function(){return a.default.ide.panels.resetLayout()})).then((function(){return r.Z.setStep(n)})).then((function(){d.play()})).catch(c.default.error.checkErrorForIgnore)}function m(e){if(e&&e.params&&"guides-edit"===e.params.ext)return e;if(e&&s().isArray(e.children))for(var t=0,n=e.children.length;t<n;t++){var i=m(e.children[t]);if(i)return i}}function g(){p()&&r.Z.getStep().then((function(e){e=e||0;const t=l.get(h());l.remove(h());const n=function(e,t){var n=m(t);return e=s().toString(e),!(!n||s().isEmpty(e)||(n.params.filename=e,0))}(e,t);a.default.ide.panels.setLayout(t).then((()=>{u.hideSwitchToEdit(),n||d.edit({step:e})}))}))}function b(){if(p())g();else{const e=a.default.ide.panels.isOpen(void 0,"guides");e&&e.panel.closeTab(e).catch(c.default.error.checkErrorForIgnore),d.edit()}}o.Z.subscribe("command:guides:pre_edit",b),o.Z.subscribe("command:guides:pre_play",(function(){var e=a.default.ide.panels.isOpen(null,"guides");a.default.currentProject.eduStartedAssignmentInfo||e?d.play():f()})),o.Z.subscribe("command:guides:preview",f),o.Z.subscribe("command:guides:back_to_edit",b),o.Z.subscribe("guides:player:open",(function(){p()&&u.showSwitchToEdit();var e=a.default.ide.panels.isOpen(null,"guides-edit");e&&e.panel.closeTab(e).catch(c.default.error.checkErrorForIgnore)})),o.Z.subscribe("guides:player:close_rendered",g)},72523:(e,t,n)=>{"use strict";n.d(t,{Cs:()=>o,Tb:()=>r,UP:()=>l,Yn:()=>s,aI:()=>a,vK:()=>i,w_:()=>c});const i={AUDIO:"audio",VIDEO:"video"},s=".guides/media",a={FILE_OPEN:"file_open",FILE_CLOSE:"file_close",RUN_COMMAND:"run_command",TERMINAL_OPEN:"terminal_open",TERMINAL_CLOSE:"terminal_close",HIGHLIGHT:"highlight",CLOSE_ALL:"close_all",PAUSE:"pause"},o=["mp3","ogg"],r=31457280,c={ac3:"audio/ac3",mp3:"audio/mp3",mp4:"audio/mp4",ogg:"audio/ogg"},l=[{label:"Open file",value:a.FILE_OPEN},{label:"Close file",value:a.FILE_CLOSE},{label:"Open terminal",value:a.TERMINAL_OPEN},{label:"Close terminal",value:a.TERMINAL_CLOSE},{label:"Run command",value:a.RUN_COMMAND},{label:"Highlight",value:a.HIGHLIGHT},{label:"Close all tabs",value:a.CLOSE_ALL},{label:"Pause",value:a.PAUSE}]},38524:(e,t,n)=>{"use strict";function i(e,t,n){for(var i,s,a,o=t,r=e.posMax,c=0,l=!1;t<r;){if(127===(i=e.src.charCodeAt(t))||41===i){if(0===c&&!a){l=!0;break}a||c--}else if(40===i)c++;else if(a||34!==i&&39!==i){if(i===a)a=void 0;else if(10===i)break}else a=i;t++}return!(o===t||!l)&&(!!n(s=e.src.slice(o,t))&&(e.linkContent=s,e.pos=t,!0))}function s(e){return 0===e.indexOf("open_")||0===e.indexOf("close_")||0===e.indexOf("cmd ")}function a(e,t){var n,a,o,r,c,l=e.pos,d=e.posMax,u=e.pos;if(91!==e.src.charCodeAt(u))return!1;if(e.level>=e.options.maxNesting)return!1;if(n=u+1,a=function(e,t){var n,i,s,a=-1,o=e.posMax,r=e.pos,c=e.isInLabel;if(e.isInLabel)return-1;if(e.labelUnmatchedScopes)return e.labelUnmatchedScopes--,-1;for(e.pos=t+1,e.isInLabel=!0,n=1;e.pos<o;){if(91===(s=e.src.charCodeAt(e.pos)))n++;else if(93===s&&0==--n){i=!0;break}e.parser.skipToken(e)}return i?(a=e.pos,e.labelUnmatchedScopes=0):e.labelUnmatchedScopes=n-1,e.pos=r,e.isInLabel=c,a}(e,u),a<0)return!1;if(!((r=a+1)<d&&40===e.src.charCodeAt(r)))return!1;for(r++;r<d&&(32===(c=e.src.charCodeAt(r))||10===c);r++);if(r>=d)return!1;for(i(e,r,s)?(o=e.linkContent,r=e.pos):o="";r<d&&(32===(c=e.src.charCodeAt(r))||10===c);r++);return r>=d||41!==e.src.charCodeAt(r)?(e.pos=l,!1):(r++,(0===o.indexOf("open_")||0===o.indexOf("close_")||0===o.indexOf("cmd "))&&(t||(e.pos=n,e.posMax=a,e.push({type:"codio_link_open",href:o,title:e.src.substr(n,a-n),level:e.level++}),e.linkLevel++,e.parser.tokenize(e),e.linkLevel--,e.push({type:"codio_link_close",level:--e.level})),e.pos=r,e.posMax=d,!0))}function o(e,t){const n=e[t],{href:i,title:s}=n;return'<codio-link cmd="'.concat(encodeURI(i),'" caption="').concat(encodeURI(s||i),'">')}function r(){return"</codio-link>"}function c(e){e.inline.ruler.before("links","codio_link",a),e.renderer.rules.codio_link_open=o,e.renderer.rules.codio_link_close=r}n.d(t,{KX:()=>g,LI:()=>T,CN:()=>c,mO:()=>y});var l=n(55637),d="|||",u="codio-";function h(e,t){var n=e.bMarks[t]+e.blkIndent,i=e.eMarks[t];return e.src.substr(n,i-n)}function p(e,t,n,i){var s=h(e,t);if(0!==(s=s.trim()).indexOf(d))return!1;if(i)return!0;var a,o=s.replace(d,"").replace(" ","");if(e.level>=e.options.maxNesting)return!1;for(a=t+1;a<n&&0!==h(e,a).indexOf(d);a++);if("guidance"===o&&!l.ZP.showAsTeacher())return e.line=a+1,!0;var r=e.parentType;return e.parentType="codio_block",e.tokens.push({type:"codio_block_open",lines:[t,a],level:e.level++,tight:!1,block_type:o}),e.parser.tokenize(e,t+1,a),e.line=a+1,e.tokens.push({type:"codio_block_close",level:--e.level,tight:!1}),e.parentType=r,!0}function f(e,t,n){var i=t[n].block_type;0===i.length&&(i="definition");var s=u+i;return'<div data-line="'+t[n].lines[0]+'" class="'+s+' codio-md-line">'}function m(e,t,n){return"</div>"+e(t,n)}function g(e){e.block.ruler.before("paragraph","codio_block",p,{alt:["paragraph"]});var t=e.renderer.getBreak;e.renderer.rules.codio_block_open=f.bind(null,t),e.renderer.rules.codio_block_close=m.bind(null,t)}function b(e,t){var n,i,s=e.posMax,a=e.pos,o=!1;if(36!==e.src.charCodeAt(a))return!1;for(n=a+1,36===e.src.charCodeAt(n)&&(o=!0,n++);n<s;){if(o&&36===e.src.charCodeAt(n)&&36===e.src.charCodeAt(n+1)){i=n+2;break}if(!o&&36===e.src.charCodeAt(n)){i=n+1;break}n++}return!!i&&(t||(e.pos=a,e.posMax=i,e.push({type:"codio_mathjax",data:e.src.substr(a,i-a),level:e.level})),e.pos=i,e.posMax=s,!0)}function v(e,t,n){return function(e,t){if(!t||"codio_mathjax"!==t.type)return;if(e)return'<span class="mathjax">'+t.data+"</span>";var n=window.escape(t.data);return'<MathJax data="'+n+'" />'}(e,t[n])}function y(e,t){e.inline.ruler.before("text","codio_mathjax",b),e.renderer.rules.codio_mathjax=v.bind(null,t.noReact)}var w=n(96486),_=n.n(w),k=n(177),P=n.n(k),C=n(19575);const x=P().compile("%%%button|assessment|{{idText}}|{{href}}|{{type}}|{{cap}}|{{assessmentType}}%%%\n"),E=P().compile("%%%button|codio|{{idText}}|{{href}}|{{type}}|{{cap}}%%%\n");function S(){return!0}function I(e,t){var n,s,a,o,r,c=e.pos,l=e.posMax,d=e.pos;if(123!==e.src.charCodeAt(d))return!1;if(e.level>=e.options.maxNesting)return!1;if(n=d+1,s=function(e,t){var n,i,s,a=-1,o=e.posMax,r=e.pos,c=e.isInLabel;if(e.isInLabel)return-1;if(e.labelUnmatchedScopes)return e.labelUnmatchedScopes--,-1;for(e.pos=t+1,e.isInLabel=!0,n=1;e.pos<o;){if(123===(s=e.src.charCodeAt(e.pos)))n++;else if(125===s&&0==--n){i=!0;break}e.parser.skipToken(e)}return i?(a=e.pos,e.labelUnmatchedScopes=0):e.labelUnmatchedScopes=n-1,e.pos=r,e.isInLabel=c,a}(e,d),s<0)return!1;if(!((o=s+1)<l&&40===e.src.charCodeAt(o)))return!1;for(o++;o<l&&(32===(r=e.src.charCodeAt(o))||10===r);o++);if(o>=l)return!1;for(d=o,i(e,o,S)?(a=e.linkContent,o=e.pos):a="",d=o;o<l&&(32===(r=e.src.charCodeAt(o))||10===r);o++);if(o>=l||41!==e.src.charCodeAt(o))return e.pos=c,!1;if(o++,!t){e.pos=n,e.posMax=s;var u=function(e){var t=e.split("|");if(1===t.length)return{label:e,type:"normal"};return{label:_().trim(t[0]),type:_().trim(t[1])}}(e.src.substr(n,s-n));e.push({type:"codio_button",href:a,title:u.label,button_type:u.type,level:e.level})}return e.pos=o,e.posMax=l,!0}function A(e,t){return function(e){if(!e||"codio_button"!==e.type)return;var t=e.href,n=e.title||"";0===n.length&&(n=t);t=_().trim(t);var i=e.button_type,s=C.default.hashCode(t+i,!0);return function(e,t,n,i,s){var a="assessment"===e?x:E,o="";if("assessment"===e){var r=i.split("-"),c=r[0];"free"===c&&r.length>3?c=r[0]+"-"+r[1]+"-"+r[2]:"ecornell"===c&&r.length>=2?c=r[0]+"-"+r[1]:"llm"===c&&r.length>3&&"auto"===r[2]&&(c=r[0]+"-"+r[2]),o="codio-challenge-"+c}return a({idText:t,href:i,cap:s,assessmentType:o,type:e})}(i,s,0,t,n)}(e[t])}function T(e){e.inline.ruler.before("links","codio_button",I),e.renderer.rules.codio_button=A}},86179:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>Ie,F8:()=>Se});var i=n(52308),s=n.n(i),a=n(96486),o=n.n(a),r=n(177),c=n.n(r),l=n(49721),d=n(19575),u=n(15061),h=n(51442),p=n(85099),f=n(8246);const m='<select class="layout-file-panel-selector" name="panel">\n  {{#each panelsData}}\n    <option value="{{this.panel}}" {{#equals ../panel this.panel}}selected{{/equals}}>\n      {{this.text}}\n    </option>\n  {{/each}}\n</select>\n',g='<li class="file-elem" data-action="{{action}}">\n  <button type="button" class="remove-btn" aria-label="Remove Tab" title="Remove Tab">\n    <span class="iconify-inline" data-icon="@codio:mdi:trash-can-outline"></span>\n  </button>\n  <div class="file-input-body list-item-body">\n    <div class="input-switch-type">\n      <label>\n        Type\n        <input class="file-type" type="hidden" name="action-{{index}}" value="{{type}}">\n      </label>\n\n      <div class="btn-group switch-file-type">\n        <a class="dropdown-toggle" data-toggle="dropdown" href="#">\n          {{#equals type \'jupyter-lab\'}}\n            <span class="jupyter-icon" />\n          {{else}}\n            <i class="ss-icon current-file-type">\n              {{#equals type \'file\'}}textfile{{/equals}}\n              {{#equals type \'preview\'}}eye{{/equals}}\n              {{#equals type \'terminal\'}}computer{{/equals}}\n              {{#equals type \'highlight\'}}quote{{/equals}}\n              {{#equals type \'tutor\'}}binoculars{{/equals}}\n              {{#equals type \'vm\'}}weatheronline{{/equals}}\n              {{#equals type \'vmssh\'}}browseonline{{/equals}}\n              {{#equals type \'vmnested\'}}laptop{{/equals}}\n              {{#equals type \'earsketch\'}}eighthnote{{/equals}}\n              {{#equals type \'sandbox\'}}box{{/equals}}\n            </i>\n            {{/equals}}\n          <i class="ss-icon ss-dropdown"></i>\n        </a>\n        <ul class="dropdown-menu" role="menu">\n          <li role="menuitem">\n            <a href="javascript:void(0)" data-type="file">\n              <i class="ss-icon icon">textfile</i>\n              <span class="text">File</span>\n            </a>\n          </li>\n          <li role="menuitem">\n            <a href="javascript:void(0)" data-type="preview">\n              <i class="ss-icon icon">eye</i>\n              <span class="text">Preview</span>\n            </a>\n          </li>\n          <li role="menuitem">\n            <a href="javascript:void(0)" data-type="terminal">\n              <i class="ss-icon icon">computer</i>\n              <span class="text">Terminal</span>\n            </a>\n          </li>\n          <li role="menuitem">\n            <a href="javascript:void(0)" data-type="highlight">\n              <i class="ss-icon icon">quote</i>\n              <span class="text">Highlight</span>\n            </a>\n          </li>\n          <li role="menuitem">\n            <a href="javascript:void(0)" data-type="tutor">\n              <i class="ss-icon icon">binoculars</i>\n              <span class="text">Visualizer</span>\n            </a>\n          </li>\n          <li role="menuitem">\n            <a href="javascript:void(0)" data-type="vm">\n              <i class="ss-icon icon">weatheronline</i>\n              <span class="text">VM</span>\n            </a>\n          </li>\n          <li role="menuitem">\n            <a href="javascript:void(0)" data-type="vmssh">\n              <i class="ss-icon icon">browseonline</i>\n              <span class="text">VM Terminal</span>\n            </a>\n          </li>\n          <li role="menuitem">\n            <a href="javascript:void(0)" data-type="vmnested">\n              <i class="ss-icon icon">laptop</i>\n              <span class="text">Cyber Range</span>\n            </a>\n          </li>\n          <li role="menuitem">\n            <a href="javascript:void(0)" data-type="earsketch">\n              <i class="ss-icon icon">eighthnote</i>\n              <span class="text">Earsketch</span>\n            </a>\n          </li>\n          <li role="menuitem">\n            <a href="javascript:void(0)" data-type="jupyter-lab">\n              <span class="jupyter-icon icon-svg" />\n              <span class="text">Jupyter Lab</span>\n            </a>\n          </li>\n          <li role="menuitem">\n            <a href="javascript:void(0)" data-type="sandbox">\n              <i class="ss-icon icon">box</i>\n              <span class="text">Sandbox</span>\n            </a>\n          </li>\n        </ul>\n      </div>\n    </div>\n\n    <div class="input-container">\n      {{guidesTemplate type this}}\n    </div>\n  </div>\n</li>\n',b='<section class="args">\n  <label>\n    Filename\n    <input type="text" name="arg" value="{{arg}}" placeholder="index.html" class="js-input-drop-target">\n  </label>\n</section>\n<section class="panel">\n  <label>\n    Panel\n    {{> panelSelector}}\n  </label>\n</section>\n',v='<section class="args">\n  <label>\n    Url\n    <input type="text" name="arg" value="{{arg}}" placeholder="https://my-site.com/index.html">\n  </label>\n</section>\n<section class="panel">\n  <label>\n    Panel\n    {{> panelSelector}}\n  </label>\n</section>\n',y='<section class="args">\n  <label>\n    Filename\n    <input type="text" name="arg" value="{{arg}}" placeholder="index.js" class="js-input-drop-target">\n  </label>\n</section>\n<section class="panel">\n  <label>\n    Panel\n    {{> panelSelector}}\n  </label>\n</section>\n',w='<section class="panel">\n  <label>\n    Panel\n    {{> panelSelector}}\n  </label>\n</section>\n',_='<section class="panel">\n  <label>\n    Panel\n    {{> panelSelector}}\n  </label>\n</section>\n',k='<section class="args">\n  <label>\n    Target machine\n    <input type="text" name="arg" value="{{arg}}" placeholder="KaliLinux">\n  </label>\n</section>\n<section class="panel">\n  <label>\n    Panel\n    {{> panelSelector}}\n  </label>\n</section>\n',P='<section class="args">\n  <label>\n    Command\n    <input type="text" name="arg" value="{{arg}}" placeholder="ls">\n  </label>\n</section>\n<section class="panel">\n  <label>\n    Panel\n    {{> panelSelector}}\n  </label>\n</section>\n',C='<section class="args">\n  <label>\n    Filename\n    <input type="text" name="arg" value="{{arg}}" placeholder="index.html" class="js-input-drop-target">\n  </label>\n</section>\n<section class="args">\n  <label>\n    Reference\n    <input type="text" name="ref" value="{{ref}}" placeholder="my-marker">\n  </label>\n</section>\n<section class="panel">\n  <label>\n    # Lines\n    <input type="text" name="line-count" placeholder="1" value="{{lineCount}}">\n  </label>\n</section>\n<section class="panel">\n  <label>\n    Panel\n    {{> panelSelector}}\n  </label>\n</section>\n',x='<section class="args">\n  <label>\n    Filename\n    <input type="text" name="arg" value="{{arg}}" class="js-input-drop-target">\n  </label>\n</section>\n<section class="panel">\n  <label>\n    Panel\n    {{> panelSelector}}\n  </label>\n</section>\n',E='<section class="args">\n  <label>\n    Filename\n    <input type="text" name="arg" value="{{arg}}" class="js-input-drop-target">\n  </label>\n</section>\n<section class="panel">\n  <label>\n    Panel\n    {{> panelSelector}}\n  </label>\n</section>\n',S='<section class="args">\r\n  <label>\r\n    Sandbox\r\n    <input type="text" name="track" value="{{trackId}}" class="hide">\r\n    <input type="text" name="sandbox" value="{{sandboxId}}" readonly>\r\n  </label>\r\n</section>\r\n<section class="panel">\r\n  <button type="button" class="btn btn-default browse-sandbox no-label-top">Browse</button>\r\n</section>\r\n<section class="panel">\r\n  <label>\r\n    Panel\r\n    {{> panelSelector}}\r\n  </label>\r\n</section>\r\n',I='<li class="show-file-tree-list-item">\n  <button class="show-file-tree-list-item-remove icon-button" type="button" aria-label="Remove item" title="Remove item">\n    <span class="iconify-inline" data-icon="@codio:mdi:trash-can-outline"></span>\n  </button>\n  <span class="show-file-tree-list-item-text u-ellipsis" title="{{this}}">{{this}}</span>\n</li>\n';var A=n(99393);var T=n(47380);var j=n(80470);var Z=n(11359);const O='<form id="execution_form" class="form form--simple" action="/">\n  {{#if source.libraryId}}\n  <input type="hidden" id="libraryId" value="{{source.libraryId}}" readonly />\n  {{#if source.permissions}}\n    <p>Search will be executed into <strong id="random-assessment-library-name">{{source.libraryName}}</strong> Library</p>\n  {{else}}\n    <h3>You have no access to the {{source.libraryName}} library</h3>\n  {{/if}}\n  <div class="tags-container">\n    <div class="tags-header">\n      <div class="tag-name-header">\n        <label class="form-label">Tag name</label>\n      </div>\n      <div class="tag-value-header">\n        <label class="form-label">Tag value</label>\n      </div>\n    </div>\n    <ul class="tags-list">\n      {{#each source.search}}\n      <li class="tag-item">\n        <div class="tag-name">\n          <input\n            name="tag_name"\n            type="text"\n            value="{{this.name}}"\n            class="js-tag tag-name-input"\n            readonly\n          />\n        </div>\n        <div class="tag-value">\n          <input\n            name="tag_value"\n            type="text"\n            value="{{this.value}}"\n            class="js-value tag-value-input"\n            readonly\n          />\n        </div>\n      </li>\n      {{/each}}\n    </ul>\n  </div>\n  <button\n    type="button"\n    class="btn btn-primary"\n    id="browse-library-assessments"\n  >\n    Update search\n  </button>\n  {{else}}\n  <button\n    type="button"\n    class="btn btn-primary"\n    id="browse-library-assessments"\n  >\n    Browse assessments\n  </button>\n  {{/if}}\n</form>\n';var N=n(28462);const D='<div class="tag-value-controls">\n  <i class="ss-icon input-icon">search</i>\n  <input type="search" name="tag-field" class="js-tag js-typeahead" placeholder="Tag..." aria-label="Tag">\n  <i class="ss-icon input-icon">search</i>\n  <input type="search" name="value-field" class="js-value js-typeahead" placeholder="Value..." aria-label="Value">\n  <button type="button" class="btn tag-action-btn add-tag"><i class="ss-icon">plus</i></button>\n</div>\n',M='{{#if searches}}\n{{#each searches}}\n<li class="favorites-item-container" data-index="{{@index}}" role="menuitem">\n  <a class="favorites-item" href="javascript:void(0)">{{this.name}}</a>\n  <i class="ss-icon icon-delete-search" title="Remove search" aria-label="Remove search">close</i>\n</li>\n{{/each}}\n{{else}}\n<li class="favorites-item-container" role="menuitem"><a class="favorites-item" href="javascript:void(0)" data-index="-1">No saved searches</a></li>\n{{/if}}\n';var R=n(93800);var L=n(91296);const F=function(){f.Z.registerPartial("panelSelector",m),f.Z.registerPartial("fileInput",g),f.Z.registerPartial("input-args-file",b),f.Z.registerPartial("input-args-preview",v),f.Z.registerPartial("input-args-tutor",y),f.Z.registerPartial("input-args-vm",w),f.Z.registerPartial("input-args-vmssh",_),f.Z.registerPartial("input-args-vmnested",k),f.Z.registerPartial("input-args-terminal",P),f.Z.registerPartial("input-args-highlight",C),f.Z.registerPartial("input-args-earsketch",x),f.Z.registerPartial("input-args-sandbox",S),f.Z.registerPartial("input-args-jupyter-lab",E),f.Z.registerPartial("assessmentListItem",'<li class="assessments-list-item {{#unless usageInfo}}unused{{/unless}}" data-taskid="{{taskId}}">\n  <a\n    href="javascript:void(0)"\n    class="remove-btn {{#if usageInfo}}qtip-here disabled{{/if}}"\n    {{#if usageInfo}}title="Can not be removed while used in guides"{{else}}title="Remove assessment"{{/if}}\n  >\n    <span class="iconify-inline" data-icon="@codio:mdi:trash-can-outline"></span>\n  </a>\n  <div class="assessments-list-item-points" id="points-input">\n      <input\n          class="assessments-list-item-points-input"\n          aria-labelledby="points-input"\n          type="number"\n          min="0"\n          max="1000"\n          value="{{#exists source.points}}{{source.points}}{{else}}20{{/exists}}"\n      />\n  </div>\n\n  <div class="list-item-body">\n    <a href="javascript:void(0)" class="assessments-list-item-link">\n      {{#if linkedId}}\n      <i class="ss-icon assessment-list-item-icon"\n        {{#if source.libraryName}}title="Linked with \'{{source.libraryName}}\' Library"{{/if}}\n      >link</i>\n      {{/if}}\n      {{#equals type \'random\'}}<i class="ss-icon assessment-list-item-icon">search</i>{{/equals}}\n      <span class="item-name">{{source.name}} ({{taskId}})</span>\n    </a>\n    {{#if usageInfo}}\n    <a\n      href="javascript:void(0)"\n      class="assessments-list-item-action assessments-list-item-goto qtip-here"\n      title="Go to definition"\n    >\n      <i class="ss-icon">navigate</i>\n    </a>\n    {{else}}\n    <button class="btn assessments-list-item-add" aria-label="Add assessment to the page">\n      Add to the page\n    </button>\n    {{/if}}\n  </div>\n</li>\n'),f.Z.registerPartial("answerItem",A),f.Z.registerPartial("ribbonEditorWithPreview",'<div class="guides-editor-with-preview">\n    <a href="javascript:void(0)" class="preview-button"><i class="ss-icon">view</i></a>\n    <div class="guides-editor-with-preview-container">\n        <div class="assessments-ribbon-panel"></div>\n        <div class="assessments-ribbon-editor"></div>\n        <textarea class="hide guides-editor-with-preview-container-textarea preview-field-with-content large-text-area" placeholder="{{placeholder}}" id="{{id}}" rows="8"></textarea>\n    </div>\n    <div class="preview-container">preview content</div>\n</div>\n'),f.Z.registerPartial("pathsItem",I),f.Z.registerPartial("aEditorNavigation",'<section class="assessment-editor-navigation-container">\n  <ul class="tabbed navigation-list">\n    <li class="navigation-item"><a data-tab="general_form" href="javascript:void(0)">General</a></li>\n    <li class="navigation-item"><a data-tab="execution_form" href="javascript:void(0)">Execution</a></li>\n    <li class="navigation-item"><a data-tab="grading_form" href="javascript:void(0)">Grading</a></li>\n    <li class="navigation-item"><a data-tab="parameters_form" href="javascript:void(0)">Parameters</a></li>\n    <li class="navigation-item"><a data-tab="metadata_form" href="javascript:void(0)">Metadata</a></li>\n    <li class="navigation-item"><a data-tab="files_form" href="javascript:void(0)">Files</a></li>\n  </ul>\n</section>\n'),f.Z.registerPartial("aEditorFooter",'<div id="errors-container"></div>\n<footer class="assessment-editor-footer">\n  <div class="main-buttons">\n    <button type="button" class="btn btn-default cancel-btn">Cancel</button>\n    <button type="button" class="btn btn-primary submit-btn">{{#if taskId}}Save{{else}}Create{{/if}}</button>\n  </div>\n  <div class="additional-buttons">\n    <button type="button" class="btn generate-btn btn-primary hide">Generate</button>\n    <button type="button" class="btn regenerate-btn btn-primary hide">Regenerate</button>\n    <span class="library-buttons">\n      {{#if linkedId}}<button type="button" class="btn btn-default disconnect-btn">Disconnect</button>{{/if}}\n      <button\n        type="button"\n        class="btn btn-default save-in-library {{#if outdated}}outdated{{/if}}"\n      >{{#if linkedId}}Update{{else}}Save{{/if}} in Library</button>\n    </span>\n  </div>\n</footer>\n'),f.Z.registerPartial("aEditorTagItem",T),f.Z.registerPartial("aEditorTags",'<div class="tags-container">\n  {{#unless readOnly}}\n  <div class="tag-actions">\n    <button class="btn add-tag-btn btn-default" type="button">Add tag</button>\n  </div>\n  {{/unless}}\n  <div class="tags-header">\n    <div class="tag-actions"></div>\n    <div class="tag-name-header">\n      <label class="form-label">Tag name</label>\n    </div>\n    <div class="tag-value-header">\n      <label class="form-label">Tag value</label>\n    </div>\n  </div>\n  <ul class="tags-list">\n    {{> aEditorTagItem}}\n  </ul>\n</div>\n'),f.Z.registerPartial("aEditorAnswerRationale",'<div class="form-fieldset">\n  <label class="form-label">Show Rationale to Student</label>\n  <label class="form-label">\n    <input\n      class="show-guidance-type-input"\n      type="radio"\n      name="showGuidanceAfterResponseOption"\n      value="Never"\n      {{#exists source.showGuidanceAfterResponseOption}}\n        {{#equals source.showGuidanceAfterResponseOption.type "Never"}}checked{{/equals}}\n      {{else}}\n        checked\n      {{/exists}}\n    > Never\n  </label>\n\n  <label class="form-label">\n    <input\n      value="Attempts"\n      class="show-guidance-type-input"\n      type="radio"\n      name="showGuidanceAfterResponseOption"\n      {{#equals source.showGuidanceAfterResponseOption.type "Attempts"}}checked{{/equals}}/>\n    After\n    <input type="number" min="0" max="100" class="show-guidance-passed-input" id="show-guidance-passed-input-attempts"\n      {{#equals source.showGuidanceAfterResponseOption.type "Attempts"}}\n        {{#exists source.showGuidanceAfterResponseOption.passedFrom}}\n          value="{{source.showGuidanceAfterResponseOption.passedFrom}}"\n        {{else}}\n          value="1"\n        {{/exists}}\n      {{else}}\n        value="1"\n      {{/equals}}\n    />\n    attempts\n  </label>\n\n  <label class="form-label">\n    <input\n      value="Score"\n      class="show-guidance-type-input"\n      type="radio"\n      name="showGuidanceAfterResponseOption"\n      {{#equals source.showGuidanceAfterResponseOption.type "Score"}}checked{{/equals}}/>\n    Score is greater than or equal to\n    <input type="number" min="0" max="100" class="show-guidance-passed-input" id="show-guidance-passed-input-score"\n      {{#equals source.showGuidanceAfterResponseOption.type "Score"}}\n        {{#exists source.showGuidanceAfterResponseOption.passedFrom}}\n          value="{{source.showGuidanceAfterResponseOption.passedFrom}}"\n        {{else}}\n          value="60"\n        {{/exists}}\n      {{else}}\n        value="60"\n      {{/equals}}\n    />&nbsp;%\n  </label>\n\n  <label class="form-label">\n    <input\n      value="WhenGradesReleased"\n      class="show-guidance-type-input"\n      name="showGuidanceAfterResponseOption"\n      type="radio"\n      {{#exists source.showGuidanceAfterResponseOption}}\n        {{#equals source.showGuidanceAfterResponseOption.type "WhenGradesReleased"}}checked{{/equals}}\n      {{/exists}}\n    > When grades are released\n  </label>\n\n  <label class="form-label">\n    <input\n      value="Always"\n      class="show-guidance-type-input"\n      name="showGuidanceAfterResponseOption"\n      type="radio"\n      {{#equals source.showGuidanceAfterResponseOption.type "Always"}}checked{{/equals}}/> Always\n  </label>\n</div>\n<div class="form-fieldset form-fieldset--large preview-area-container assessment-editor-rationale-editor">\n  <label class="form-label">Rationale</label>\n  {{> ribbonEditorWithPreview id=\'guidance\' placeholder=\'\'}}\n</div>\n\n'),f.Z.registerPartial("aEditorNumberOfAttempts",'<div class="form-fieldset">\n  <label class="form-label" for="set_number_of_attempts">Defined number of attempts</label>\n  <label class="toggle">\n    <input type="checkbox" id="set_number_of_attempts" {{#if source.maxAttemptsCount}}checked{{/if}}/>\n    <span class="toggle-label"></span>\n    <span class="toggle-handle"></span>\n  </label>\n  <input\n    type="number"\n    min="1"\n    max="100"\n    class="number-of-attempts-input {{#unless source.maxAttemptsCount}}hide{{/unless}}"\n    id="max_attempts_count"\n    value="{{#if source.maxAttemptsCount}}{{source.maxAttemptsCount}}{{ else }}1{{/if}}"\n    aria-label="Max attempts count"\n  />\n</div>\n'),f.Z.registerPartial("aEditorObjectives",'<div class="form-fieldset">\n  <label class="form-label" for="blooms">Bloom\'s level</label>\n  <select id="blooms">\n    <option value="" {{#unless source.bloomsObjectiveLevel}}selected="true"{{/unless}}></option>\n    <option value=1 {{#equals source.bloomsObjectiveLevel \'1\'}}selected="true"{{/equals}}>Level I - Remembering</option>\n    <option value=2 {{#equals source.bloomsObjectiveLevel \'2\'}}selected="true"{{/equals}}>Level II - Understanding</option>\n    <option value=3 {{#equals source.bloomsObjectiveLevel \'3\'}}selected="true"{{/equals}}>Level III - Applying</option>\n    <option value=4 {{#equals source.bloomsObjectiveLevel \'4\'}}selected="true"{{/equals}}>Level IV - Analyzing</option>\n    <option value=5 {{#equals source.bloomsObjectiveLevel \'5\'}}selected="true"{{/equals}}>Level V - Evaluating</option>\n    <option value=6 {{#equals source.bloomsObjectiveLevel \'6\'}}selected="true"{{/equals}}>Level VI - Creating</option>\n  </select>\n</div>\n<div class="form-fieldset">\n  <label class="form-label" for="learningObjectives">Learning Objectives</label>\n  <input\n    class="learningObjectives-textarea"\n    type="text"\n    id="learningObjectives"\n    value="{{#if source.learningObjectives}}{{source.learningObjectives}}{{/if}}"\n  />\n</div>'),f.Z.registerPartial("aEditorBaseGeneral",'<input type="hidden" value="{{type}}" id="assessment-type">\n{{#if taskId}}\n<input type="hidden" id="id" value="{{taskId}}" readonly />\n{{/if}}\n{{#if linkedId}}\n<input type="hidden" id="linked-id" value="{{linkedId}}" readonly>\n{{/if}}\n{{#if libraryId}}\n<input type="hidden" id="assessment-library-id" value="{{libraryId}}" readonly>\n{{/if}}\n{{#if version includeZero=true}}\n<input type="hidden" id="version" value="{{version}}" readonly>\n{{/if}}\n<div class="form-fieldset">\n  <label class="form-label" for="name">Name</label>\n  <input\n    type="text"\n    id="name"\n    placeholder="Name..."\n    value="{{#if source.name}}{{source.name}}{{/if}}"\n  />\n</div>\n<div class="form-fieldset">\n  <label class="form-label">Show Name</label>\n  <label class="toggle">\n    <input type="checkbox" id="show_name" {{#if source.showName}}checked{{/if}}/>\n    <span class="toggle-label"></span>\n    <span class="toggle-handle"></span>\n  </label>\n</div>\n'),f.Z.registerPartial("aEditorGeneralForm",'<form id="general_form" class="form form--simple" action="/">\n  {{> aEditorBaseGeneral}}\n  <div class="form-fieldset form-fieldset--large preview-area-container">\n    <label class="form-label" for="instructions">Instructions</label>\n    {{> ribbonEditorWithPreview id=\'instructions\' placeholder=\'Instruction...\'}}\n  </div>\n</form>\n'),f.Z.registerPartial("aEditorMetadataForm",'<form id="metadata_form" class="form form--simple" action="/">\n  {{#if source.metadata.layout}}\n  <input type="hidden" id="layout" value="{{source.metadata.layout}}" readonly />\n  {{/if}}\n  {{> aEditorObjectives}}\n  {{> aEditorTags}}\n</form>'),f.Z.registerPartial("aEditorFilesForm",'<form id="files_form" class="form form--simple files-container" action="/">\n  <div class="content-container">\n    <h3 class="header">Additional content</h3>\n    <div class="js-tree-container selected-content"></div>\n  </div>\n  <div class="content-container">\n    <h3 class="header">Project files</h3>\n    <div class="js-tree-container project-files"></div>\n  </div>\n</form>\n'),f.Z.registerPartial("aEditorLinkedInfo",'{{#if linkedId}}\n<i class="ss-icon linked-icon" {{#if source.libraryName}}title="Linked with \'{{source.libraryName}}\' Library"{{/if}}>link</i>\n{{/if}}\n'),f.Z.registerPartial("aEditorDuplicateButton",'<button class="btn btn-default assessment-editor-duplicate" title="Duplicate and save assessment" aria-label="Duplicate and save assessment">\n  <span class="iconify-inline" data-icon="@codio:mdi:content-copy"></span> Duplicate and Save\n</button>\n'),f.Z.registerPartial("cocItem",j),f.Z.registerPartial("aEditorCocExecutionForm",'<form id="execution_form" class="form form--simple" action="/">\n  <div class="form-fieldset">\n    <label class="form-label" for="cmd">Command</label>\n    <input\n      type="text"\n      id="cmd"\n      placeholder="Command..."\n      value="{{#if source.command}}{{source.command}}{{/if}}"\n    />\n    <div class="helpBlock command-helpBlock {{#notIncludes source.command ".guides/secure"}}hide{{/notIncludes}}">\n    Script will be executed isolated from user container&nbsp;\n    <a href=\'https://docs.codio.com/instructors/authoring/assessments/auto-grade-scripts.html#secure-scripts\' target=\'_blank\'>click here</a>\n    </div>\n  </div>\n  <div class="form-fieldset">\n    <label class="form-label" for="pre_cmd">Pre-Exec Command (Optional)</label>\n    <input\n      type="text"\n      id="pre_cmd"\n      placeholder="Pre Execute Command..."\n      value="{{#if source.preExecuteCommand}}{{source.preExecuteCommand}}{{/if}}"\n    />\n  </div>\n  <div class="form-fieldset">\n    <label class="form-label" for="timeout">Timeout</label>\n    <input\n      type="number"\n      min="1"\n      max="300"\n      id="timeout"\n      value="{{#if source.options.timeout}}{{source.options.timeout}}{{/if}}{{#unless source.options.timeout}}30{{/unless}}"\n      placeholder="Command timeout..."\n    />\n  </div>\n</form>\n'),f.Z.registerPartial("aEditorCocGradingForm",'<form id="grading_form" class="form form--simple" action="/">\n  <div class="form-fieldset">\n    <label class="form-label" for="points">Points</label>\n    <input\n      type="number"\n      id="points"\n      min="0"\n      max="1000"\n      value="{{#exists source.points}}{{source.points}}{{else}}20{{/exists}}"\n    />\n  </div>\n  <div class="form-fieldset form-fieldset-allow-partial">\n    <label class="form-label">Allow Partial Points</label>\n    <label class="toggle">\n      <input type="checkbox" id="allow_partial_points" {{#if source.arePartialPointsAllowed}}checked{{/if}}/>\n      <span class="toggle-label"></span>\n      <span class="toggle-handle"></span>\n    </label>\n    <label class="form-label">Use maximum score</label>\n    <label class="toggle">\n      <input type="checkbox" id="use_maximum_score" {{#if source.useMaximumScore}}checked{{/if}}/>\n      <span class="toggle-label"></span>\n      <span class="toggle-handle"></span>\n    </label>\n  </div>\n  <div class="options-container">\n    <div class="form-fieldset">\n      <label class="form-label">Case Insensitive</label>\n      <label class="toggle">\n        <input type="checkbox" id="ignore_case" {{#if source.options.ignoreCase}}checked{{/if}}/>\n        <span class="toggle-label"></span>\n        <span class="toggle-handle"></span>\n      </label>\n    </div>\n    <div class="form-fieldset">\n      <label class="form-label">Ignore White Spaces</label>\n      <label class="toggle">\n        <input type="checkbox" id="ignore_white_spaces" {{#if source.options.ignoreWhitespaces}}checked{{/if}}/>\n        <span class="toggle-label"></span>\n        <span class="toggle-handle"></span>\n      </label>\n    </div>\n    <div class="form-fieldset">\n      <label class="form-label">Substring match</label>\n      <label class="toggle">\n        <input type="checkbox" id="match_substring" {{#if source.options.matchSubstring}}checked{{/if}}/>\n        <span class="toggle-label"></span>\n        <span class="toggle-handle"></span>\n      </label>\n    </div>\n  </div>\n  <div class="form-fieldset form-fieldset--large test-cases-container">\n    <div class="form-fieldset form-fieldset--horizontal test-cases-filter">\n      <div class="search-bar-container">\n        <span class="iconify search-bar-icon" data-icon="@codio:mdi:magnify"></span>\n        <input aria-label="Search" type="text" class="search-bar-input" placeholder="Search for test cases"/>\n      </div>\n      <div class="flex-spacer"></div>\n      <button type="button" class="btn-plain btn-plain--primary test-case-expandAllBtn">Expand all</button>\n      <button type="button" class="btn-plain btn-plain--primary test-case-collapseAllBtn hide">Collapse all</button>\n      <button type="button" class="btn btn-primary add-item-to-check-btn">Add Item To Check</button>\n    </div>\n    <div class="form-fieldset form-fieldset--horizontal">\n      <button type="button" class="btn btn-default test-case-action test-case-checkAllBtn">Check ALL</button>\n    </div>\n    <ul class="items-list sequence">\n      {{> cocItem}}\n    </ul>\n    <div class="form-fieldset form-fieldset--horizontal">\n      <button type="button" class="btn btn-primary add-item-to-check-btn">Add Item To Check</button>\n    </div>\n  </div>\n  <div class="form-fieldset">\n    <label class="form-label">Show Expected Answer</label>\n    <label class="form-label">\n      <input\n        class="show-expected-answer-type-input"\n        type="radio"\n        name="showExpectedAnswerOption"\n        value="Never"\n        {{#exists source.showExpectedAnswerOption}}\n          {{#equals source.showExpectedAnswerOption.type "Never"}}checked{{/equals}}\n        {{/exists}}\n      > Never\n    </label>\n\n    <label class="form-label">\n      <input\n        value="WhenGradesReleased"\n        class="show-expected-answer-type-input"\n        name="showExpectedAnswerOption"\n        type="radio"\n        {{#exists source.showExpectedAnswerOption}}\n          {{#equals source.showExpectedAnswerOption.type "WhenGradesReleased"}}checked{{/equals}}\n        {{/exists}}\n      > When grades are released\n    </label>\n\n    <label class="form-label">\n      <input\n        value="Always"\n        class="show-expected-answer-type-input"\n        name="showExpectedAnswerOption"\n        type="radio"\n        {{#exists source.showExpectedAnswerOption}}\n          {{#equals source.showExpectedAnswerOption.type "Always"}}checked{{/equals}}\n        {{else}}\n          checked\n        {{/exists}}\n      > Always\n    </label>\n  </div>\n  {{> aEditorNumberOfAttempts}}\n  {{> aEditorAnswerRationale}}\n</form>\n'),f.Z.registerPartial("aEditorParametersForm",'<form id="parameters_form" class="form form--simple" action="/">\n  <div class="assessment-editor-parameters">\n    <div class="assessment-editor-parameters-container"/>\n    <div class="assessment-editor-parameters-sample">\n      <div class="assessment-editor-parameters-top-actions">\n        <button class="assessment-editor-parameters-sample-generate-btn btn btn-primary">\n          Generate Sample Parameters\n        </button>\n        <button class="assessment-editor-parameters-expand-collapse-btn btn btn-default" title="Expand parameters">\n          <span class="iconify-inline assessment-editor-parameters-expand" data-icon="@codio:mdi:arrow-expand-left"></span>\n          <span class="iconify-inline assessment-editor-parameters-collapse" data-icon="@codio:mdi:arrow-collapse-right"></span>\n        </button>\n      </div>\n      <div class="assessment-editor-parameters-sample-view"></div>\n      <button class="assessment-editor-parameters-generate-example-btn btn btn-primary">\n        Add code example\n      </button>\n    </div>\n  </div>\n</form>\n'),f.Z.registerPartial("aEditorTestExecutionForm",'<form id="execution_form" class="form form--simple" action="/">\n  <div class="form-fieldset form-fieldset-type-selector">\n    <label class="form-label" for="test_type">language type</label>\n    <select id="test_type">\n      <option value="custom" {{#equals advancedType \'custom\'}}selected="true"{{/equals}}>Custom</option>\n      <option value="ruby" {{#equals advancedType \'ruby\'}}selected="true"{{/equals}}>Ruby</option>\n      <option value="java" {{#equals advancedType \'java\'}}selected="true"{{/equals}}>Java</option>\n      <option value="python" {{#equals advancedType \'python\'}}selected="true"{{/equals}}>Python</option>\n      <option value="javascript" {{#equals advancedType \'javascript\'}}selected="true"{{/equals}}>JavaScript</option>\n    </select>\n  </div>\n\n  <div class="form-fieldset">\n    <label class="form-label" for="timeout">Timeout</label>\n    <input\n      type="number"\n      min="1"\n      max="300"\n      id="timeout"\n      value="{{#if source.timeoutSeconds}}{{source.timeoutSeconds}}{{/if}}{{#unless source.timeoutSeconds}}40{{/unless}}"\n      placeholder="Command timeout..."\n    />\n  </div>\n\n  <div class="form-fieldset form-fieldset--large form-fieldset-subtype-selector {{#equals advancedType \'custom\'}}hide{{/equals}}">\n    <label class="form-label" for="test_subtype">Language assessment subtype</label>\n    <select id="test_subtype">\n    </select>\n  </div>\n\n  <div class="custom form-fieldset--large {{#notequals advancedType \'custom\'}}hide{{/notequals}}">\n    <div class="form-fieldset">\n      <label class="form-label" for="command">Command</label>\n      <input\n        type="text"\n        id="command"\n        value="{{#if source.command}}{{source.command}}{{/if}}"\n        placeholder="Test command..."\n      />\n      <div class="helpBlock command-helpBlock {{#notIncludes source.command ".guides/secure"}}hide{{/notIncludes}}">\n        Script will be executed isolated from user container&nbsp;\n        <a href=\'https://docs.codio.com/instructors/authoring/assessments/auto-grade-scripts.html#secure-scripts\' target=\'_blank\'>click here</a>\n      </div>\n    </div>\n  </div>\n\n  <div class="predefined form-fieldset--large {{#equals advancedType \'custom\'}}hide{{/equals}}">\n\n    <div class="java-junit-sub-type test-sub-type {{#notequals advancedType \'java\'}}hide{{/notequals}}">\n      <div class="form-fieldset">\n        <label class="form-label" for="junit-version">JUnit version</label>\n        <div class="controls">\n          <select id="junit-version">\n            <option value="5.10.0" {{#equals jUnitVersion \'5.10.0\'}}selected{{/equals}}>JUnit5 v5.10.0</option>\n            <option value="5" {{#equals jUnitVersion \'5\'}}selected{{/equals}}>JUnit5 v5.6.1</option>\n            <option value="4.13.2" {{#equals jUnitVersion \'4.13.2\'}}selected{{/equals}}>JUnit4 v4.13.2</option>\n            <option value="4" {{#equals jUnitVersion \'4\'}}selected{{/equals}}{{#unless jUnitVersion}}selected{{/unless}}>JUnit4 v4.12</option>\n          </select>\n        </div>\n      </div>\n      <div class="form-fieldset">\n        <label class="form-label" for="sources">Source path:</label>\n        <input type="text" id="sources" value="{{#if advancedTypeConfig}}{{advancedTypeConfig.sources}}{{/if}}" placeholder="Sources..."/>\n      </div>\n      <div class="form-fieldset">\n        <label class="form-label" for="testsources">Tests source path:</label>\n        <input type="text" id="testsources" value="{{#if advancedTypeConfig}}{{advancedTypeConfig.testsources}}{{/if}}" placeholder="Test sources..."/>\n      </div>\n      <div class="form-fieldset">\n        <label class="form-label" for="libs">Library path:</label>\n        <input type="text" id="libs" value="{{#if advancedTypeConfig}}{{advancedTypeConfig.libs}}{{/if}}" placeholder="Libraries..."/>\n      </div>\n      <div class="form-fieldset">\n        <label class="form-label" for="wd">Working directory:</label>\n        <input type="text" id="wd" value="{{#if advancedTypeConfig}}{{advancedTypeConfig.wd}}{{/if}}" placeholder="Working directory..."/>\n      </div>\n    </div>\n    <div class="java-style-sub-type test-sub-type {{#notequals advancedType \'java\'}}hide{{/notequals}}">\n      <div class="form-fieldset">\n        <label class="form-label" for="configFile">Config path:</label>\n        <input type="text" id="configFile" value="{{#if advancedTypeConfig}}{{advancedTypeConfig.configFile}}{{/if}}" placeholder="Config path..."/>\n      </div>\n      <div class="form-fieldset">\n        <label class="form-label" for="checkstyle-version">Checkstyle version</label>\n        <div class="controls">\n          <select id="checkstyle-version">\n            <option value="10.12" {{#equals checkStyleVersion \'10.12\'}}selected{{/equals}}>Checkstyle v10.12(JRE 11 and above)</option>\n            <option value="8.24" {{#equals checkStyleVersion \'8.24\'}}selected{{/equals}}{{#unless checkStyleVersion}}selected{{/unless}}>Checkstyle v8.24(JRE 8 and above)</option>\n            <option value="8.9" {{#equals checkStyleVersion \'8.9\'}}selected{{/equals}}>Checkstyle v8.9(JRE 8)</option>\n            <option value="6.6" {{#equals checkStyleVersion \'6.6\'}}selected{{/equals}}>Checkstyle v6.6(JRE 6 and 7)</option>\n          </select>\n        </div>\n      </div>\n    </div>\n\n    <div class="form-fieldset">\n      <label class="control-label hint hint-top" for="test-add-case">\n        Add case:\n      </label>\n      <div class="controls">\n        <input type="text" id="test-add-case" class="input-xlarge" placeholder="Path to file or drop it..." maxlength="1024">\n        <button type="button" class="btn btn-default test-add-case-btn" id="test-add-case-btn">Add case</button>\n      </div>\n    </div>\n    <div class="form-fieldset--large test-cases-field">\n    </div>\n  </div>\n\n  <div class="form-fieldset form-fieldset--large preview-area-container hide">\n    <label class="form-label" for="codeEnvConfig">Code env config: hidden field</label>\n    <input\n      placeholder="Code env config"\n      id="codeEnvConfig"\n      type="text"\n      value="{{#if source.codeEnvConfig}}{{source.codeEnvConfig}}{{/if}}"\n    />\n  </div>\n\n  <div class="form-fieldset hide form-fieldset-py-executable">\n    <label class="form-label" for="executable">Python executable</label>\n    <input\n      type="text"\n      id="executable"\n      value="{{#if source.executable}}{{source.executable}}{{else}}python{{/if}}"\n    />\n  </div>\n\n  <div class="form-fieldset hide form-fieldset-py-wd">\n    <label class="form-label" for="pythonwd">Python working directory</label>\n    <input\n      type="text"\n      id="pythonwd"\n      value="{{#if source.pythonwd}}{{source.pythonwd}}{{else}}{{/if}}"\n    />\n  </div>\n\n  <div class="form-fieldset hide form-fieldset-py-path">\n    <label class="form-label" for="pythonpath">Student folder</label>\n    <input\n      type="text"\n      id="pythonpath"\n      value="{{#if source.pythonPath}}{{source.pythonPath}}{{else}}{{/if}}"\n      placeholder="Path to student folder or default.."\n    />\n  </div>\n</form>\n'),f.Z.registerPartial("aEditorTestGradingForm",'<form id="grading_form" class="form form--simple" action="/">\n  <div class="form-fieldset">\n    <label class="form-label" for="points">Points</label>\n    <input\n      type="number"\n      id="points"\n      min="0"\n      max="1000"\n      value="{{#exists source.points}}{{source.points}}{{else}}20{{/exists}}"\n    />\n  </div>\n  <div class="form-fieldset form-fieldset-allow-partial">\n    <label class="form-label">Allow Partial Points</label>\n    <label class="toggle">\n      <input type="checkbox" id="allow_partial_points" {{#if source.arePartialPointsAllowed}}checked{{/if}}/>\n      <span class="toggle-label"></span>\n      <span class="toggle-handle"></span>\n    </label>\n  </div>\n  <div class="form-fieldset">\n    <label class="form-label">Use maximum score</label>\n    <label class="toggle">\n      <input type="checkbox" id="use_maximum_score" {{#if source.useMaximumScore}}checked{{/if}}/>\n      <span class="toggle-label"></span>\n      <span class="toggle-handle"></span>\n    </label>\n  </div>\n  {{> aEditorNumberOfAttempts}}\n  {{> aEditorAnswerRationale}}\n</form>\n'),f.Z.registerPartial("aEditorMcqGeneralForm",'<form id="general_form" class="form form--simple" action="/">\n  {{> aEditorBaseGeneral}}\n  <div class="form-fieldset form-fieldset--large preview-area-container">\n    <label class="form-label" for="question">Question</label>\n    {{> ribbonEditorWithPreview id=\'question\' placeholder=\'\'}}\n  </div>\n</form>\n'),f.Z.registerPartial("aEditorMcqExecutionForm",'<form id="execution_form" class="form form--simple" action="/">\n  <div class="form-fieldset">\n    <label class="form-label">Shuffle answers</label>\n    <label class="toggle">\n      <input type="checkbox" id="is_randomized" {{#if source.isRandomized}}checked{{/if}}/>\n      <span class="toggle-label"></span>\n      <span class="toggle-handle"></span>\n    </label>\n  </div>\n  <div class="form-fieldset">\n    <label class="form-label">Multiple Response</label>\n    <label class="toggle">\n      <input type="checkbox" id="multiple_response" {{#if source.multipleResponse}}checked{{/if}}/>\n      <span class="toggle-label"></span>\n      <span class="toggle-handle"></span>\n    </label>\n  </div>\n  <div class="form-fieldset">\n    <btn class="btn btn-default add-answer-btn">Add Answer</btn>\n  </div>\n  <div class="form-fieldset form-fieldset--large answers">\n    <ul class="answers-list">\n      {{> answerItem}}\n    </ul>\n  </div>\n</form>\n'),f.Z.registerPartial("aEditorMcqGradingForm",'<form id="grading_form" class="form form--simple" action="/">\n  <div class="form-fieldset">\n    <label class="form-label">Correct Points</label>\n    <input\n      type="number"\n      id="correct_points"\n      min="0"\n      max="1000"\n      value="{{#exists source.points}}{{source.points}}{{else}}20{{/exists}}"\n    />\n  </div>\n  <div class="form-fieldset">\n    <label class="form-label">Incorrect Points</label>\n    <input\n      type="number"\n      id="incorrect_points"\n      min="0"\n      max="1000"\n      value="{{#if source.incorrectPoints}}{{source.incorrectPoints}}{{else}}0{{/if}}"\n    />\n  </div>\n  <div class="form-fieldset form-fieldset-allow-partial">\n    <label class="form-label">Allow Partial Points</label>\n    <label class="toggle">\n      <input type="checkbox" id="allow_partial_points" {{#if source.arePartialPointsAllowed}}checked{{/if}}/>\n      <span class="toggle-label"></span>\n      <span class="toggle-handle"></span>\n    </label>\n    <label class="form-label">Use maximum score</label>\n    <label class="toggle">\n      <input type="checkbox" id="use_maximum_score" {{#if source.useMaximumScore}}checked{{/if}}/>\n      <span class="toggle-label"></span>\n      <span class="toggle-handle"></span>\n    </label>\n  </div>\n  <div class="form-fieldset">\n    <label class="form-label">Show Expected Answer</label>\n    <label class="form-label">\n      <input\n        class="show-expected-answer-type-input"\n        type="radio"\n        name="showExpectedAnswerOption"\n        value="Never"\n        {{#exists source.showExpectedAnswerOption}}\n          {{#equals source.showExpectedAnswerOption.type "Never"}}checked{{/equals}}\n        {{/exists}}\n      > Never\n    </label>\n\n    <label class="form-label">\n      <input\n        value="WhenGradesReleased"\n        class="show-expected-answer-type-input"\n        name="showExpectedAnswerOption"\n        type="radio"\n        {{#exists source.showExpectedAnswerOption}}\n          {{#equals source.showExpectedAnswerOption.type "WhenGradesReleased"}}checked{{/equals}}\n        {{/exists}}\n      > When grades are released\n    </label>\n\n    <label class="form-label">\n      <input\n        value="Always"\n        class="show-expected-answer-type-input"\n        name="showExpectedAnswerOption"\n        type="radio"\n        {{#exists source.showExpectedAnswerOption}}\n          {{#equals source.showExpectedAnswerOption.type "Always"}}checked{{/equals}}\n        {{else}}\n          checked\n        {{/exists}}\n      > Always\n    </label>\n  </div>\n  {{> aEditorNumberOfAttempts}}\n  {{> aEditorAnswerRationale}}\n</form>\n'),f.Z.registerPartial("aEditorFibExecutionForm",'<form id="execution_form" class="form form--simple" action="/">\n  <div class="form-fieldset form-fieldset--large preview-area-container">\n    <label class="form-label">Text</label>\n    {{> ribbonEditorWithPreview id=\'text\' placeholder=\'\'}}\n    <span class="hint-text">\n      Example: The correct acronym for the main processor chip in a computer is &lt;&lt;&lt;CPU&gt;&gt;&gt;\n      <a href="https://docs.codio.com/instructors/authoring/assessments/fill-in-blanks.html#fill-in-blanks" target="_blank">Documentation</a>\n    </span>\n  </div>\n  <div class="form-fieldset">\n    <label class="form-label">Show Possible Values</label>\n    <label class="toggle">\n      <input type="checkbox" id="show_values" {{#if source.showValues}}checked{{/if}}/>\n      <span class="toggle-label"></span>\n      <span class="toggle-handle"></span>\n    </label>\n  </div>\n  <div class="form-fieldset form-fieldset--large fib-assessments-distractors {{#unless source.showValues}}hide{{/unless}}">\n    <span class="hint-text">\n      If you show students possible values, you can add distractors (wrong answers) to the drop down by listing them in the text area below. One distractor per line\n    </span>\n    <label class="form-label" for="fib-assessments-distractors">Distractors</label>\n    <textarea\n            class="large-text-area"\n            id="fib-assessments-distractors"\n            rows="4"\n    ></textarea>\n  </div>\n</form>\n'),f.Z.registerPartial("aEditorFibGradingForm",'<form id="grading_form" class="form form--simple" action="/">\n  <div class="form-fieldset">\n    <label class="form-label" for="points">Points</label>\n    <input\n      type="number"\n      id="points"\n      min="0"\n      max="1000"\n      value="{{#exists source.points}}{{source.points}}{{else}}20{{/exists}}"\n    />\n  </div>\n  <div class="form-fieldset form-fieldset-allow-partial">\n    <label class="form-label">Allow Partial Points</label>\n    <label class="toggle">\n      <input type="checkbox" id="allow_partial_points" {{#if source.arePartialPointsAllowed}}checked{{/if}}/>\n      <span class="toggle-label"></span>\n      <span class="toggle-handle"></span>\n    </label>\n    <label class="form-label">Use maximum score</label>\n    <label class="toggle">\n      <input type="checkbox" id="use_maximum_score" {{#if source.useMaximumScore}}checked{{/if}}/>\n      <span class="toggle-label"></span>\n      <span class="toggle-handle"></span>\n    </label>\n  </div>\n  <div class="form-fieldset">\n    <label class="form-label">Show Expected Answer</label>\n    <label class="form-label">\n      <input\n        class="show-expected-answer-type-input"\n        type="radio"\n        name="showExpectedAnswerOption"\n        value="Never"\n        {{#exists source.showExpectedAnswerOption}}\n          {{#equals source.showExpectedAnswerOption.type "Never"}}checked{{/equals}}\n        {{/exists}}\n      > Never\n    </label>\n\n    <label class="form-label">\n      <input\n        value="WhenGradesReleased"\n        class="show-expected-answer-type-input"\n        name="showExpectedAnswerOption"\n        type="radio"\n        {{#exists source.showExpectedAnswerOption}}\n          {{#equals source.showExpectedAnswerOption.type "WhenGradesReleased"}}checked{{/equals}}\n        {{/exists}}\n      > When grades are released\n    </label>\n\n    <label class="form-label">\n      <input\n        value="Always"\n        class="show-expected-answer-type-input"\n        name="showExpectedAnswerOption"\n        type="radio"\n        {{#exists source.showExpectedAnswerOption}}\n          {{#equals source.showExpectedAnswerOption.type "Always"}}checked{{/equals}}\n        {{else}}\n          checked\n        {{/exists}}\n      > Always\n    </label>\n  </div>\n  {{> aEditorNumberOfAttempts}}\n  {{> aEditorAnswerRationale}}\n</form>\n'),f.Z.registerPartial("aEditorEcornellFibExecutionForm",'<form id="execution_form" class="form form--simple" action="/">\n  <div class="form-fieldset form-fieldset--large preview-area-container">\n    <label class="form-label">Text</label>\n    {{> ribbonEditorWithPreview id=\'text\' placeholder=\'\'}}\n    <span class="hint-text">\n      Example: The correct acronym for the main processor chip in a computer is &lt;&lt;&lt;CPU&gt;&gt;&gt;\n      <a href="https://docs.codio.com/instructors/authoring/assessments/fill-in-blanks.html#fill-in-blanks" target="_blank">Documentation</a>\n    </span>\n  </div>\n  <div class="form-fieldset">\n    <label class="form-label">Show Possible Values</label>\n    <label class="toggle">\n      <input type="checkbox" id="show_values" {{#if source.showValues}}checked{{/if}}/>\n      <span class="toggle-label"></span>\n      <span class="toggle-handle"></span>\n    </label>\n  </div>\n  <div class="form-fieldset form-fieldset--large fib-assessments-distractors {{#unless source.showValues}}hide{{/unless}}">\n    <span class="hint-text">\n      If you show students possible values, you can add distractors (wrong answers) to the drop down by listing them in the text area below. One distractor per line\n    </span>\n    <label class="form-label" for="fib-assessments-distractors">Distractors</label>\n    <textarea\n            class="large-text-area"\n            id="fib-assessments-distractors"\n            rows="4"\n    ></textarea>\n  </div>\n</form>\n'),f.Z.registerPartial("aEditorEcornellFibGradingForm",'<form id="grading_form" class="form form--simple" action="/">\n  <div class="form-fieldset">\n    <label class="form-label" for="points">Points</label>\n    <input\n      type="number"\n      id="points"\n      min="0"\n      max="1000"\n      value="{{#exists source.points}}{{source.points}}{{else}}20{{/exists}}"\n    />\n  </div>\n  <div class="form-fieldset form-fieldset-allow-partial">\n    <label class="form-label">Allow Partial Points</label>\n    <label class="toggle">\n      <input type="checkbox" id="allow_partial_points" {{#if source.arePartialPointsAllowed}}checked{{/if}}/>\n      <span class="toggle-label"></span>\n      <span class="toggle-handle"></span>\n    </label>\n    <label class="form-label">Use maximum score</label>\n    <label class="toggle">\n      <input type="checkbox" id="use_maximum_score" {{#if source.useMaximumScore}}checked{{/if}}/>\n      <span class="toggle-label"></span>\n      <span class="toggle-handle"></span>\n    </label>\n  </div>\n  <div class="form-fieldset">\n    <label class="form-label">Show Expected Answer</label>\n    <label class="form-label">\n      <input\n        class="show-expected-answer-type-input"\n        type="radio"\n        name="showExpectedAnswerOption"\n        value="Never"\n        {{#exists source.showExpectedAnswerOption}}\n          {{#equals source.showExpectedAnswerOption.type "Never"}}checked{{/equals}}\n        {{/exists}}\n      > Never\n    </label>\n\n    <label class="form-label">\n      <input\n        value="WhenGradesReleased"\n        class="show-expected-answer-type-input"\n        name="showExpectedAnswerOption"\n        type="radio"\n        {{#exists source.showExpectedAnswerOption}}\n          {{#equals source.showExpectedAnswerOption.type "WhenGradesReleased"}}checked{{/equals}}\n        {{/exists}}\n      > When grades are released\n    </label>\n\n    <label class="form-label">\n      <input\n        value="Always"\n        class="show-expected-answer-type-input"\n        name="showExpectedAnswerOption"\n        type="radio"\n        {{#exists source.showExpectedAnswerOption}}\n          {{#equals source.showExpectedAnswerOption.type "Always"}}checked{{/equals}}\n        {{else}}\n          checked\n        {{/exists}}\n      > Always\n    </label>\n  </div>\n  <div class="form-fieldset">\n    <label class="form-label">Force show the score</label>\n    <label class="toggle">\n      <input type="checkbox" id="force_score_show" {{#if source.forceScoreShow}}checked{{/if}}/>\n      <span class="toggle-label"></span>\n      <span class="toggle-handle"></span>\n    </label>\n  </div>\n  <div class="form-fieldset">\n    <label class="form-label">Highlighting correct answers</label>\n    <label class="toggle">\n      <input type="checkbox" id="highlight_correct_answers" {{#if source.highlightCorrectAnswers}}checked{{/if}}/>\n      <span class="toggle-label"></span>\n      <span class="toggle-handle"></span>\n    </label>\n  </div>\n  {{> aEditorNumberOfAttempts}}\n  {{> aEditorAnswerRationale}}\n</form>\n'),f.Z.registerPartial("aEditorFtNavigation",'<section class="assessment-editor-navigation-container">\n  <ul class="tabbed navigation-list">\n    <li class="navigation-item"><a data-tab="general_form" href="javascript:void(0)">General</a></li>\n    <li class="navigation-item"><a data-tab="grading_form" href="javascript:void(0)">Grading</a></li>\n    <li class="navigation-item"><a data-tab="parameters_form" href="javascript:void(0)">Parameters</a></li>\n    <li class="navigation-item"><a data-tab="metadata_form" href="javascript:void(0)">Metadata</a></li>\n    <li class="navigation-item"><a data-tab="files_form" href="javascript:void(0)">Files</a></li>\n  </ul>\n</section>\n'),f.Z.registerPartial("aEditorFtGradingForm",'<form id="grading_form" class="form form--simple" action="/">\n  <div class="form-fieldset">\n    <label class="form-label" for="points">Points</label>\n    <input\n      type="number"\n      id="points"\n      min="0"\n      max="1000"\n      value="{{#exists source.points}}{{source.points}}{{else}}20{{/exists}}"\n    />\n  </div>\n  <div class="form-fieldset">\n    <label class="form-label">Allow Partial Points</label>\n    <label class="toggle">\n      <input type="checkbox" id="allow_partial_points" {{#if source.arePartialPointsAllowed}}checked{{/if}}/>\n      <span class="toggle-label"></span>\n      <span class="toggle-handle"></span>\n    </label>\n  </div>\n  <div class="form-fieldset">\n    <label class="form-label">Preview type</label>\n    <select id="previewType" >\n      <option value="NONE">Plain text (no preview)</option>\n      <option value="RAW" {{#equals source.previewType \'RAW\'}}selected="selected"{{/equals}}>Plain text + Latex</option>\n      <option value="MARKDOWN" {{#equals source.previewType \'MARKDOWN\'}}selected="selected"{{/equals}}>Markdown + Latex</option>\n    </select>\n  </div>\n  {{> aEditorNumberOfAttempts}}\n  {{> aEditorAnswerRationale}}\n\n  <div class="assessments-grade-rubrics--form {{#unless source.arePartialPointsAllowed}}hide{{/unless}}">\n    <button class="assessments-grade-rubrics--options icon-button" title=\'Copy rubrics\'>\n      <span class="iconify-inline" data-icon="@codio:mdi:cog"></span>\n    </button>\n    <div class="form-fieldset">\n      <label class="form-label">Rubric items</label>\n      <div class="assessments-grade-rubrics--list">\n        {{#each source.rubrics}}\n        {{> aEditorGbookGradingRubricItem}}\n        {{/each}}\n      </div>\n      <button class="btn btn-primary assessments-grade-rubrics--button">\n        <span class="iconify-inline" data-icon="@codio:mdi:plus-thick"></span>\n        &nbsp;Add Rubric Item\n      </button>\n    </div>\n  </div>\n</form>\n'),f.Z.registerPartial("aEditorFtaExecutionForm",'<form id="execution_form" class="form form--simple" action="/">\n  <div class="form-fieldset">\n    <label class="form-label" for="command">Command</label>\n    <input\n      type="text"\n      id="command"\n      value="{{#if source.command}}{{source.command}}{{/if}}"\n    />\n    <div class="helpBlock command-helpBlock {{#notIncludes source.command ".guides/secure"}}hide{{/notIncludes}}">\n    Script will be executed isolated from user container&nbsp;\n    <a href=\'https://docs.codio.com/instructors/authoring/assessments/auto-grade-scripts.html#secure-scripts\' target=\'_blank\'>click here</a>\n  </div>\n  </div>\n  <div class="form-fieldset">\n    <label class="form-label" for="timeout">Timeout</label>\n    <input\n      type="number"\n      min="1"\n      max="300"\n      id="timeout"\n      value="{{#if source.timeoutSeconds}}{{source.timeoutSeconds}}{{/if}}{{#unless source.timeoutSeconds}}40{{/unless}}"\n      placeholder="Command timeout..."\n    />\n  </div>\n</form>\n'),f.Z.registerPartial("aEditorFtaGradingForm",'<form id="grading_form" class="form form--simple" action="/">\n  <div class="form-fieldset">\n    <label class="form-label" for="points">Points</label>\n    <input\n      type="number"\n      id="points"\n      min="0"\n      max="1000"\n      value="{{#exists source.points}}{{source.points}}{{else}}20{{/exists}}"\n    />\n  </div>\n  <div class="form-fieldset">\n    <label class="form-label">Allow Partial Points</label>\n    <label class="toggle">\n      <input type="checkbox" id="allow_partial_points" {{#if source.arePartialPointsAllowed}}checked{{/if}}/>\n      <span class="toggle-label"></span>\n      <span class="toggle-handle"></span>\n    </label>\n    <label class="form-label">Use maximum score</label>\n    <label class="toggle">\n      <input type="checkbox" id="use_maximum_score" {{#if source.useMaximumScore}}checked{{/if}}/>\n      <span class="toggle-label"></span>\n      <span class="toggle-handle"></span>\n    </label>\n  </div>\n  <div class="form-fieldset">\n    <label class="form-label">Preview type</label>\n    <select id="previewType" >\n      <option value="NONE">Plain text (no preview)</option>\n      <option value="RAW" {{#equals source.previewType \'RAW\'}}selected="selected"{{/equals}}>Plain text + Latex</option>\n      <option value="MARKDOWN" {{#equals source.previewType \'MARKDOWN\'}}selected="selected"{{/equals}}>Markdown + Latex</option>\n    </select>\n  </div>\n  {{> aEditorNumberOfAttempts}}\n  {{> aEditorAnswerRationale}}\n</form>\n'),f.Z.registerPartial("aEditorGbookNavigation",'<section class="assessment-editor-navigation-container">\n  <ul class="tabbed navigation-list">\n    <li class="navigation-item"><a data-tab="general_form" href="javascript:void(0)">General</a></li>\n    <li class="navigation-item"><a data-tab="grading_form" href="javascript:void(0)">Grading</a></li>\n    <li class="navigation-item"><a data-tab="metadata_form" href="javascript:void(0)">Metadata</a></li>\n    <li class="navigation-item"><a data-tab="files_form" href="javascript:void(0)">Files</a></li>\n  </ul>\n</section>\n'),f.Z.registerPartial("aEditorGbookGeneralForm",'<form id="general_form" class="form form--simple" action="/">\n  {{> aEditorBaseGeneral}}\n</form>'),f.Z.registerPartial("aEditorGbookGradingForm",'<form id="grading_form" class="form form--simple" action="/">\n  <div class="form-fieldset">\n    <label class="form-label" for="points">Points</label>\n    <input\n      type="number"\n      id="points"\n      min="0"\n      max="1000"\n      value="{{#exists source.points}}{{source.points}}{{else}}20{{/exists}}"\n    />\n  </div>\n  <div class="form-fieldset">\n    <label class="form-label">Allow Partial Points</label>\n    <label class="toggle">\n      <input type="checkbox" id="allow_partial_points" {{#if source.arePartialPointsAllowed}}checked{{/if}}/>\n      <span class="toggle-label"></span>\n      <span class="toggle-handle"></span>\n    </label>\n  </div>\n  <div class="assessments-grade-rubrics--form {{#unless source.arePartialPointsAllowed}}hide{{/unless}}">\n    <button class="assessments-grade-rubrics--options icon-button" title=\'Copy rubrics\'>\n      <span class="iconify-inline" data-icon="@codio:mdi:cog"></span>\n    </button>\n    <div class="form-fieldset">\n      <label class="form-label">Rubric items</label>\n      <div class="assessments-grade-rubrics--list">\n        {{#each source.rubrics}}\n          {{> aEditorGbookGradingRubricItem}}\n        {{/each}}\n      </div>\n      <button class="btn btn-primary assessments-grade-rubrics--button">\n        <span class="iconify-inline" data-icon="@codio:mdi:plus-thick"></span>\n        &nbsp;Add Rubric Item\n      </button>\n    </div>\n  </div>\n</form>\n'),f.Z.registerPartial("aEditorGbookGradingRubricItem",Z),f.Z.registerPartial("aEditorMathNavigation",'<section class="assessment-editor-navigation-container">\n  <ul class="tabbed navigation-list">\n    <li class="navigation-item"><a data-tab="general_form" href="javascript:void(0)">General</a></li>\n    <li class="navigation-item"><a data-tab="grading_form" href="javascript:void(0)">Grading</a></li>\n    <li class="navigation-item"><a data-tab="parameters_form" href="javascript:void(0)">Parameters</a></li>\n    <li class="navigation-item"><a data-tab="metadata_form" href="javascript:void(0)">Metadata</a></li>\n    <li class="navigation-item"><a data-tab="files_form" href="javascript:void(0)">Files</a></li>\n  </ul>\n</section>\n'),f.Z.registerPartial("aEditorMathGeneralForm",'<form id="general_form" class="form form--simple" action="/">\n  {{> aEditorBaseGeneral}}\n  <div class="form-fieldset form-fieldset--large preview-area-container">\n    <label class="form-label">Question XML</label>\n    <a href="javascript:void(0)" class="question-preview-button preview-button"><i class="ss-icon">view</i></a>\n    <textarea\n      class="large-text-area preview-field-with-content"\n      id="question"\n      rows="4"\n    ></textarea>\n    <div class="preview-container">preview content</div>\n  </div>\n</form>'),f.Z.registerPartial("aEditorMathGradingForm",'<form id="grading_form" class="form form--simple" action="/">\n  <div class="form-fieldset">\n    <label class="form-label" for="points">Points</label>\n    <input\n      type="number"\n      id="points"\n      min="0"\n      max="1000"\n      value="{{#exists source.points}}{{source.points}}{{else}}20{{/exists}}"\n    />\n  </div>\n  <div class="form-fieldset">\n    <label class="form-label">Show Expected Answer</label>\n    <label class="form-label">\n      <input\n        class="show-expected-answer-type-input"\n        type="radio"\n        name="showExpectedAnswerOption"\n        value="Never"\n        {{#exists source.showExpectedAnswerOption}}\n          {{#equals source.showExpectedAnswerOption.type "Never"}}checked{{/equals}}\n        {{/exists}}\n      > Never\n    </label>\n\n    <label class="form-label">\n      <input\n        value="WhenGradesReleased"\n        class="show-expected-answer-type-input"\n        name="showExpectedAnswerOption"\n        type="radio"\n        {{#exists source.showExpectedAnswerOption}}\n          {{#equals source.showExpectedAnswerOption.type "WhenGradesReleased"}}checked{{/equals}}\n        {{/exists}}\n      > When grades are released\n    </label>\n\n    <label class="form-label">\n      <input\n        value="Always"\n        class="show-expected-answer-type-input"\n        name="showExpectedAnswerOption"\n        type="radio"\n        {{#exists source.showExpectedAnswerOption}}\n          {{#equals source.showExpectedAnswerOption.type "Always"}}checked{{/equals}}\n        {{else}}\n          checked\n        {{/exists}}\n      > Always\n    </label>\n  </div>\n  {{> aEditorAnswerRationale}}\n</form>\n'),f.Z.registerPartial("aEditorParsonsExecutionForm",'<form id="execution_form" class="form form--simple" action="/">\n  <div id="uiContainer" />\n</form>'),f.Z.registerPartial("aEditorParsonsGradingForm",'<form id="grading_form" class="form form--simple" action="/">\n  <div class="form-fieldset">\n    <label class="form-label" for="points">Points</label>\n    <input\n      type="number"\n      id="points"\n      min="0"\n      max="1000"\n      value="{{#exists source.points}}{{source.points}}{{else}}20{{/exists}}"\n    />\n  </div>\n  <div class="form-fieldset">\n    <label class="form-label">Use maximum score</label>\n    <label class="toggle">\n      <input type="checkbox" id="use_maximum_score" {{#if source.useMaximumScore}}checked{{/if}}/>\n      <span class="toggle-label"></span>\n      <span class="toggle-handle"></span>\n    </label>\n  </div>\n  {{> aEditorNumberOfAttempts}}\n  {{> aEditorAnswerRationale}}\n</form>\n'),f.Z.registerPartial("aEditorRandomNavigation",'<section class="assessment-editor-navigation-container">\n  <ul class="tabbed navigation-list">\n    <li class="navigation-item"><a data-tab="general_form" href="javascript:void(0)">General</a></li>\n    <li class="navigation-item"><a data-tab="grading_form" href="javascript:void(0)">Grading</a></li>\n    <li class="navigation-item"><a data-tab="execution_form" href="javascript:void(0)">Execution</a></li>\n  </ul>\n</section>\n'),f.Z.registerPartial("aEditorRandomGeneralForm",'<form id="general_form" class="form form--simple" action="/">\n  <input type="hidden" value="{{type}}" id="assessment-type">\n  {{#if taskId}}\n  <input type="hidden" id="id" value="{{taskId}}" readonly />\n  {{/if}}\n  <div class="form-fieldset">\n    <label class="form-label" for="name">Name</label>\n    <input\n      type="text"\n      id="name"\n      placeholder="Name..."\n      value="{{#if source.name}}{{source.name}}{{/if}}"\n    />\n  </div>\n</form>'),f.Z.registerPartial("aEditorRandomGradingForm",'<form id="grading_form" class="form form--simple" action="/">\n  <div class="form-fieldset">\n    <label class="form-label" for="points">Points</label>\n    <input\n      type="number"\n      id="points"\n      min="0"\n      max="1000"\n      value="{{#exists source.points}}{{source.points}}{{else}}20{{/exists}}"\n    />\n  </div>\n  <div class="form-fieldset">\n    <label class="form-label">Use maximum score</label>\n    <label class="toggle">\n      <input type="checkbox" id="use_maximum_score" {{#if source.useMaximumScore}}checked{{/if}}/>\n      <span class="toggle-label"></span>\n      <span class="toggle-handle"></span>\n    </label>\n  </div>\n</form>\n'),f.Z.registerPartial("aEditorRandomExecutionForm",O),f.Z.registerPartial("aEditorSpliceExecutionForm",'<form id="execution_form" class="form form--simple" action="/">\n  <div class="form-fieldset">\n    <label class="form-label" for="url">Assessment URL</label>\n    <input\n      type="text"\n      id="url"\n      placeholder="assessment url..."\n      value="{{#if source.url}}{{source.url}}{{/if}}"\n    />\n  </div>\n</form>\n'),f.Z.registerPartial("aEditorSpliceGradingForm",'<form id="grading_form" class="form form--simple" action="/">\n  <div class="form-fieldset">\n    <label class="form-label" for="points">Points</label>\n    <input\n      type="number"\n      id="points"\n      min="0"\n      max="1000"\n      value="{{#exists source.points}}{{source.points}}{{else}}20{{/exists}}"\n    />\n  </div>\n  <div class="form-fieldset form-fieldset-allow-partial">\n    <label class="form-label">Use maximum score</label>\n    <label class="toggle">\n      <input type="checkbox" id="use_maximum_score" {{#if source.useMaximumScore}}checked{{/if}}/>\n      <span class="toggle-label"></span>\n      <span class="toggle-handle"></span>\n    </label>\n  </div>\n</form>\n'),f.Z.registerPartial("aEditorLlmBasedRubricNavigation",'<section class="assessment-editor-navigation-container">\n  <ul class="tabbed navigation-list">\n    <li class="navigation-item"><a data-tab="general_form" href="javascript:void(0)">General</a></li>\n    <li class="navigation-item"><a data-tab="grading_form" href="javascript:void(0)">Grading</a></li>\n    <li class="navigation-item"><a data-tab="metadata_form" href="javascript:void(0)">Metadata</a></li>\n    <li class="navigation-item"><a data-tab="files_form" href="javascript:void(0)">Files</a></li>\n  </ul>\n</section>\n'),f.Z.registerPartial("aEditorLlmBasedRubricGradingForm",'<form id="grading_form" class="form form--simple" action="/">\n  <div class="form-fieldset">\n    <label class="form-label" for="points">Total Points</label>\n    <input\n      type="number"\n      id="points"\n      min="0"\n      max="1000"\n      value="{{#exists source.points}}{{source.points}}{{else}}20{{/exists}}"\n      readonly\n    />\n  </div>\n  <div class="assessment-llm-based-rubric--grading-rubrics form-fieldset form-fieldset--large">\n    <div class="form-fieldset">\n      <label class="control-label hint hint-top assessment-llm-based-rubric--instructions" for="solution">\n        Instructor provided solution file:\n      </label>\n      <div class="controls">\n        <input\n          type="text"\n          id="solution"\n          class="input-xlarge"\n          placeholder="Path to file or drop it..."\n          maxlength="1024"\n          value="{{#exists source.solutions}}{{source.solutions.0.path}}{{/exists}}"\n        >\n      </div>\n    </div>\n    <div class="form-fieldset form-fieldset--horizontal">\n      <button type="button" class="btn btn-primary generate-rubrics">Generate rubrics</button>\n    </div>\n    <div class="items-list sequence">\n      {{#each source.rubrics}}\n      {{> aEditorLlmBasedRubricItem}}\n      {{/each}}\n    </div>\n    <div class="form-fieldset form-fieldset--horizontal">\n      <button type="button" class="btn btn-primary add-rubric-item">Add Rubric</button>\n    </div>\n  </div>\n  {{> aEditorNumberOfAttempts}}\n  {{> aEditorAnswerRationale}}\n</form>\n'),f.Z.registerPartial("aEditorLlmBasedRubricItem",N),f.Z.registerPartial("aEditorLlmBasedAutoRubricNavigation",'<section class="assessment-editor-navigation-container">\n  <ul class="tabbed navigation-list">\n    <li class="navigation-item"><a data-tab="general_form" href="javascript:void(0)">General</a></li>\n    <li class="navigation-item"><a data-tab="grading_form" href="javascript:void(0)">Grading</a></li>\n    <li class="navigation-item"><a data-tab="metadata_form" href="javascript:void(0)">Metadata</a></li>\n    <li class="navigation-item"><a data-tab="files_form" href="javascript:void(0)">Files</a></li>\n  </ul>\n</section>\n'),f.Z.registerPartial("aEditorLlmBasedAutoRubricGradingForm",'<form id="grading_form" class="form form--simple" action="/">\n  <div class="form-fieldset">\n    <label class="form-label" for="points">Total Points</label>\n    <input\n      type="number"\n      id="points"\n      min="0"\n      max="1000"\n      value="{{#exists source.points}}{{source.points}}{{else}}20{{/exists}}"\n      readonly\n    />\n  </div>\n  <div class="assessment-llm-based-rubric--grading-rubrics form-fieldset form-fieldset--large">\n    <div class="form-fieldset">\n      <label class="control-label hint hint-top assessment-llm-based-rubric--instructions" for="solution">\n        Instructor provided solution file:\n      </label>\n      <div class="controls">\n        <input\n          type="text"\n          id="solution"\n          class="input-xlarge"\n          placeholder="Path to file or drop it..."\n          maxlength="1024"\n          value="{{#exists source.solutions}}{{source.solutions.0.path}}{{/exists}}"\n        >\n      </div>\n    </div>\n    <div class="form-fieldset form-fieldset--horizontal">\n      <button type="button" class="btn btn-primary generate-rubrics">Generate rubrics</button>\n    </div>\n    <div class="items-list sequence">\n      {{#each source.rubrics}}\n      {{> aEditorLlmBasedRubricItem}}\n      {{/each}}\n    </div>\n    <div class="form-fieldset form-fieldset--horizontal">\n      <button type="button" class="btn btn-primary add-rubric-item">Add Rubric</button>\n    </div>\n  </div>\n  {{> aEditorNumberOfAttempts}}\n  {{> aEditorAnswerRationale}}\n</form>\n'),f.Z.registerPartial("aEditorLlmBasedAutoRubricItem",'<div class="llm-rubric-item-container">\n  <div class="item-column-0">\n    <span class="item-index">{{id}}</span>\n    <button class="icon-button remove-btn remove-rubric-btn" title="Remove rubric" aria-label="Remove rubric">\n      <span class="iconify-inline" data-icon="@codio:mdi:trash-can-outline"></span>\n    </button>\n  </div>\n  <div class="item-column-1">\n    <input\n            type="hidden"\n            class="assessment-llm-based-rubric-id-input"\n            name="id"\n            value="{{id}}"\n    />\n    <div class="form-fieldset assessment-llm-based-rubric-text">\n      <label class="form-label" for="assessment-llm-based-rubric-text-input-{{id}}">Rubric</label>\n      <input\n        id="assessment-llm-based-rubric-text-input-{{id}}"\n        type="text"\n        class="assessment-llm-based-rubric-text-input"\n        name="title"\n        value="{{#if this.title}}{{this.title}}{{/if}}"\n      />\n    </div>\n    <div class="form-fieldset assessment-llm-based-rubric-text">\n      <label class="form-label" for="assessment-llm-based-rubric-description-input-{{id}}">Description</label>\n      <input\n              id="assessment-llm-based-rubric-description-input-{{id}}"\n              type="text"\n              class="assessment-llm-based-rubric-description-input"\n              name="description"\n              value="{{#if this.description}}{{this.description}}{{/if}}"\n      />\n    </div>\n  </div>\n  <div class="item-column-2">\n    <div class="form-fieldset assessment-llm-based-rubric-weight">\n      <label class="form-label" for="assessment-llm-based-rubric-description-points-{{id}}">Points</label>\n      <input\n              id="assessment-llm-based-rubric-description-points-{{id}}"\n              type="number"\n              class="assessment-llm-based-rubric-points-input"\n              min="1"\n              max="1000"\n              value="{{#exists this.points}}{{this.points}}{{else}}0{{/exists}}"\n              name="points"\n      />\n    </div>\n  </div>\n</div>\n'),f.Z.registerPartial("libraryBrowserTagValueControls",D),f.Z.registerPartial("libraryBrowserFavoritesItems",M),f.Z.registerPartial("aEditorGenAssessmentPreviewCustom","{{#equals assessment.type 'multiple-choice'}}\n  {{> aEditorGenAssessmentPreviewMCQ}}\n{{/equals}}\n{{#equals assessment.type 'fill-in-the-blanks'}}\n  {{> aEditorGenAssessmentPreviewFIB}}\n{{/equals}}\n{{#equals assessment.type 'parsons-puzzle'}}\n  {{> aEditorGenAssessmentPreviewParsons}}\n{{/equals}}\n{{#equals assessment.type 'code-output-compare'}}\n  {{> aEditorGenAssessmentPreviewCoc}}\n{{/equals}}\n"),f.Z.registerPartial("aEditorGenAssessmentPreviewMCQ",'<div class="generate-assessment-preview-mcq-answers">\n  {{#each assessment.source.answers}}\n  <div class="generate-assessment-preview-mcq-answer">\n    {{#if this.correct}}\n    <span class="iconify icon-correct" title="Correct" data-icon="@codio:mdi:check-bold"></span>\n    {{else}}\n    <span class="iconify icon-wrong" title="Wrong" data-icon="@codio:mdi:close-thick"></span>\n    {{/if}}\n    <div class="generate-assessment-preview-mcq-answer-text js-markdown">{{answer}}</div>\n  </div>\n  {{/each}}\n</div>\n'),f.Z.registerPartial("aEditorGenAssessmentPreviewFIB",'<div class="generate-assessment-preview-fib-text js-markdown">{{assessment.source.text}}</div>\n'),f.Z.registerPartial("aEditorGenAssessmentPreviewParsons",'<div class="generate-assessment-preview-parsons-blocks">\n  <div class="generate-assessment-preview-parsons-blocks-distractors">\n    {{#each custom.distractors}}\n    <div class="generate-assessment-preview-parsons-blocks-line">{{this}}</div>\n    {{/each}}\n  </div>\n  <div class="generate-assessment-preview-parsons-blocks-code">\n  {{#each custom.code}}\n  <div class="generate-assessment-preview-parsons-blocks-line">{{this}}</div>\n  {{/each}}\n  </div>\n</div>\n'),f.Z.registerPartial("aEditorGenAssessmentPreviewCoc",'<div class="form-fieldset generate-assessment-preview-coc-cmd">\n    <label class="form-label" for="cmd"><strong>Command</strong></label>\n    <input type="text" id="cmd" value="{{assessment.source.command}}" readonly>\n</div>\n\n{{#each assessment.source.sequence}}\n<div class="generate-assessment-preview-coc-seq">\n    <div class="generate-assessment-preview-coc-seq-item">\n        <div class="item-column">\n            {{#if arguments}}\n            <div class="form-fieldset">\n                <label class="form-label">Input - Arguments</label>\n                <input type="text" class="arguments" name="arguments" value="{{#if arguments}}{{arguments}}{{/if}}" readonly/>\n            </div>\n            {{/if}}\n            {{#if input}}\n            <div class="form-fieldset form-fieldset--large assessment-coc-item-stdin">\n                <label class="form-label">Input - STDIN</label>\n                <textarea class="input-textarea generate_input" name="input" rows="4" readonly>{{#if input}}{{input}}{{/if}}</textarea>\n            </div>\n            {{/if}}\n            <div class="form-fieldset form-fieldset--large output-feedback-fieldset">\n                <label class="form-label">Error feedback</label>\n                <textarea class="feedback-textarea" name="feedback" rows="2" readonly>{{feedback}}</textarea>\n            </div>\n        </div>\n        <div class="item-column">\n            <div class="form-fieldset form-fieldset--large output-textarea-fieldset">\n                <label class="form-label">Expected Output</label>\n                <textarea class="output-textarea" name="output" rows="6" readonly>{{#if output}}{{{output}}}{{/if}}</textarea>\n            </div>\n        </div>\n    </div>\n</div>\n{{/each}}\n\n{{#if files}}\n<h4>Files to create</h4>\n{{/if}}\n\n{{#each files}}\n<div class="generate-assessment-preview-coc-file">\n    <div class="generate-assessment-preview-coc-file-path"><strong>Path:</strong>&nbsp;{{path}}</div>\n<pre class="generate-assessment-preview-coc-file-content">\n{{content}}\n</pre>\n</div>\n{{/each}}\n'),f.Z.registerPartial("aEditorGenAssessmentPreview",R),f.Z.registerPartial("aEditorGenAssessmentPreviewLoader",'<div class="generate-form-preview-loader">\n  <div class="generate-form-preview-loader-inner">\n    <img class="generate-form-preview-loader-image" src="https://static-assets.codio.com/client/assets/images/loader_dark.86cd6770a24b53ce.svg" alt="Processing..." />\n    <div class="generate-form-preview-loader-text">\n      Generating assessment...\n    </div>\n  </div>\n</div>\n'),f.Z.registerPartial("aEditorGenContentPreviewLoader",'<div class="generate-form-preview-loader">\n  <div class="generate-form-preview-loader-inner">\n    <img class="generate-form-preview-loader-image" src="https://static-assets.codio.com/client/assets/images/loader_dark.86cd6770a24b53ce.svg" alt="Processing..." />\n    <div class="generate-form-preview-loader-text">\n      Generating content...\n    </div>\n  </div>\n</div>\n'),f.Z.registerPartial("aEditorGenContentPreview",L)};var B=n(76900),U=n(6989),q=n(50352),H=n(55637),G=n(72523),W=n(85886),z=n(55010);var V=n(96513);var K=n(79589),J=n(83668),Y=n(2769),Q=n(71864);n(44247);const X={};X[G.aI.FILE_CLOSE]=c().compile('<input type="hidden" name="action" value="close">\n<input type="hidden" name="tab_type" value="file">\n<div class="media-action-item-content">\n  <input\n    class="plain-input"\n    type="text"\n    name="content"\n    placeholder="Filename"\n    value="{{#if action}}{{action.content}}{{/if}}"\n  />\n</div>\n<div class="media-action-item-panel">\n  {{> panelSelector panel=action.panel panelsData=panelsData}}\n</div>\n'),X[G.aI.FILE_OPEN]=c().compile('<input type="hidden" name="action" value="open">\n<input type="hidden" name="tab_type" value="file">\n<div class="media-action-item-content">\n  <input\n    class="plain-input"\n    type="text"\n    name="content"\n    placeholder="Filename"\n    value="{{#if action}}{{action.content}}{{/if}}"\n  />\n</div>\n<div class="media-action-item-panel">\n  {{> panelSelector panel=action.panel panelsData=panelsData}}\n</div>\n'),X[G.aI.HIGHLIGHT]=c().compile('<input type="hidden" name="action" value="open">\n<input type="hidden" name="tab_type" value="file">\n<div class="media-action-item-content">\n  <input\n    class="plain-input"\n    type="text"\n    name="content"\n    placeholder="Filename"\n    value="{{#if action}}{{action.content}}{{/if}}"\n  />\n</div>\n<div class="media-action-item-reference">\n  <input\n    class="plain-input"\n    type="text"\n    name="reference"\n    placeholder="Reference"\n    value="{{#if action}}{{action.reference}}{{/if}}"\n  />\n</div>\n<div class="media-action-item-lines">\n  <input\n    class="plain-input"\n    type="text"\n    name="lines"\n    placeholder="Lines"\n    value="{{#if action}}{{action.lines}}{{/if}}"\n  />\n</div>\n<div class="media-action-item-panel">\n  {{> panelSelector panel=action.panel panelsData=panelsData}}\n</div>\n'),X[G.aI.RUN_COMMAND]=c().compile('<input type="hidden" name="action" value="open">\n<input type="hidden" name="tab_type" value="terminal">\n<div class="media-action-item-content">\n  <input\n    class="plain-input"\n    type="text"\n    name="content"\n    placeholder="Command"\n    value="{{#if action}}{{action.content}}{{/if}}"\n  />\n</div>\n<div class="media-action-item-panel">\n  {{> panelSelector panel=action.panel panelsData=panelsData}}\n</div>\n'),X[G.aI.TERMINAL_CLOSE]=c().compile('<input type="hidden" name="action" value="close">\n<input type="hidden" name="tab_type" value="terminal">\n'),X[G.aI.TERMINAL_OPEN]=c().compile('<input type="hidden" name="action" value="open">\n<input type="hidden" name="tab_type" value="terminal">\n<div class="media-action-item-panel">\n  {{> panelSelector panel=action.panel panelsData=panelsData}}\n</div>\n');const $=c().compile('<div>\n  <div class="main player-container">\n    <div class="navigation-container">\n      <header>\n        <div>\n          <button class="{{#unless showCollapse}}hide{{/unless}} btn btn--text guides-button-collapse" aria-label="Collapse">\n            Collapse\n          </button>\n        </div>\n        <small class="small-preview"></small>\n        <div>\n          {{#unless isStudent}}\n          <button title="Switch to code" class="btn guides-editor-code-switch hide guides-toolbar-button-with-text" aria-label="Switch to code">\n            <span class="iconify-inline" data-icon="@codio:mdi:pencil-outline"></span> Edit\n          </button>\n          {{/unless}}\n          {{#if teacherInStudentUnit}}\n          <div>\n            <a href="javascript:void(0)" class="btn btn--text guides-button-grading">\n              Grading\n            </a>\n          </div>\n          {{/if}}\n          {{#if isRegistered }}\n          <div class="no-wrap navigator-container navigator-container-buttons">\n            <button class="btn navigator guides-button-prev disabled" title="Previous" aria-label="Previous">\n              <span class="iconify" data-icon="@codio:mdi:chevron-left"></span>\n            </button>\n            <button class="btn navigator guides-button-next disabled" title="Next" aria-label="Next">\n              <span class="iconify" data-icon="@codio:mdi:chevron-right"></span>\n            </button>\n          </div>\n\n          <div class="btn-group guide-preferences-container">\n            <button\n              aria-expanded="false"\n              class="btn btn--text guide-preferences"\n              data-toggle="dropdown"\n              title="Settings"\n              aria-label="Settings"\n              aria-controls="menu-guide-preferences"\n              aria-haspopup="true"\n            >\n              <i class="ss-icon ss-settings"></i>\n            </button>\n            {{{settingsMenu}}}\n          </div>\n          {{/if}}\n\n          {{#unless hideSectionsToggle}}\n          <button aria-expanded="false" class="btn guides-player-toggle-nav-book" title="Toggle sections list" aria-label="Toggle sections list">\n            <span class="iconify-inline" data-icon="@codio:mdi:format-list-bulleted"></span>\n          </button>\n          {{/unless}}\n        </div>\n      </header>\n\n      {{#unless isStudent}}\n      <button title="Switch to code" class="btn preview-switch-type code hide" data-type="code" aria-label="Switch to code">\n        <span class="iconify-inline" data-icon="@codio:mdi:pencil-outline"></span>\n      </button>\n      {{/unless}}\n\n      <div class="media-player-container media-player-hidden">\n        <audio id="player_media_player" class="video-js vjs-default-skin vjs-default-skin-audio" controls preload="auto"\n               height="0">\n        </audio>\n      </div>\n    </div>\n\n    <div class="main item-content"></div>\n  </div>\n  <div class="expand-view-container hide"></div>\n</div>\n'),ee=c().compile('<div class="main guides-editor-container" tabindex="0">\n  <section class="content">\n    <div class="navigation-container">\n      <header class="header">\n        <h1 class="guides-editor-title">\n          <small></small>\n          <span>{{title}}</span>\n        </h1>\n\n        <form action="#" class="guides-editor-title-form">\n          <input value=""\n                 class="guides-editor-title-input"\n                 placeholder="Enter the section title here"\n                 aria-label="Section title"\n          >\n        </form>\n        <nav class="toolbar">\n          <div class="btn-group btn-group-assessment">\n            <button\n              aria-expanded="false"\n              class="btn guides-toolbar-button-with-text"\n              data-toggle="dropdown"\n              title="Create assessment"\n              aria-label="Create assessment"\n              aria-controls="menu-manage-assessments"\n              aria-haspopup="true"\n            >\n              <span class="iconify-inline" data-icon="@codio:mdi:order-bool-ascending-variant"></span> Assessments\n              <i class="ss-icon ss-dropdown"></i>\n            </button>\n            <div class="dropdown-menu">\n            </div>\n          </div>\n          <div class="guides-editor-view-type-switch-container">\n            <button title="Blueprints" class="btn guides-editor-save-blueprint guides-toolbar-button-with-text hide" aria-label="Blueprints">\n              <span class="iconify-inline" data-icon="@codio:mdi:floor-plan"></span>&nbsp;Blueprints\n            </button>\n            <div class="form-fieldset guides-editor-split-view-switch-container">\n              <label class="toggle">\n                <input type="checkbox" id="split_view" {{#if isSplitView}}checked{{/if}}/>\n                <span class="toggle-label"></span>\n                <span class="toggle-handle"></span>\n              </label>\n              <label class="form-label">Split view</label>\n            </div>\n            <button title="Switch to preview" class="btn guides-editor-preview-switch guides-toolbar-button-with-text" aria-label="Switch to preview">\n              <span class="iconify-inline" data-icon="@codio:mdi:eye"></span> Preview\n            </button>\n          </div>\n          <button class="btn guides-settings guides-settings-configure-layout guides-toolbar-button-with-text" title="Layout" aria-label="Layout">\n            <span class="iconify-inline" data-icon="@codio:mdi:view-dashboard-edit"></span> Layout\n          </button>\n          <button class="btn guides-settings guides-settings-global guides-toolbar-button-with-text" title="Settings" aria-label="Settings">\n            <span class="iconify-inline" data-icon="@codio:mdi:wrench"></span> Settings\n          </button>\n          <div class="no-wrap navigator-container navigator-container-buttons">\n            <button class="btn navigator guides-button-prev" title="Previous" aria-label="Previous">\n              <span class="iconify" data-icon="@codio:mdi:chevron-left"></span>\n            </button>\n            <button class="btn navigator guides-button-next" title="Next" aria-label="Next">\n              <span class="iconify" data-icon="@codio:mdi:chevron-right"></span>\n            </button>\n            <div class="btn-group btn-group-blueprints-last-page">\n              <button\n                class="btn navigator guides-button-add-page hide"\n                aria-expanded="false"\n                data-toggle="dropdown"\n                title="Add page"\n                aria-label="Add page"\n                aria-controls="menu-dropdown-blueprints-last-page"\n                aria-haspopup="true"\n              >\n                <i class="ss-icon">addfile</i>\n              </button>\n              <ul class="dropdown-menu" role="menu" id="menu-dropdown-blueprints-last-page">\n              </ul>\n            </div>\n          </div>\n          <button aria-expanded="false" class="btn guides-editor-toggle-nav-book" title="Toggle sections list" aria-label="Toggle sections list">\n            <span class="iconify-inline" data-icon="@codio:mdi:format-list-bulleted"></span>\n          </button>\n          <button title="Refresh Guides" class="btn preview-switch-type refresh" data-type="refresh" aria-label="Refresh Guides">\n             <i class="ss-icon">sync</i>\n          </button>\n        </nav>\n      </header>\n      <aside class="ribbon-panel-place">\n      </aside>\n    </div>\n\n    <div class="guides-content-container">\n      <div class="main editor-size-mark guides-content-editor">\n      </div>\n      <div class="guides-content-right-bar"></div>\n    </div>\n\n  </section>\n\n</div>\n'),te=c().compile('<div class="settings">\n  <div class="settings-container hide" id="global"></div>\n  <div class="settings-container hide" id="configure-layout"></div>\n  <div class="settings-container hide" id="blueprints"></div>\n  <div class="settings-container hide assessments-container" id="assessments">\n    <section class="assessments-filters hide">\n      <div class="filter-container">\n        <label for="filter" class="filter-label">FILTER BY:</label>\n        <select class="selectbox filter" id="filter">\n          <option value="all" selected="selected" data-filter="">All</option>\n          <option value="used" data-filter="used">Used</option>\n          <option value="unused" data-filter="unused">Not used</option>\n        </select>\n        <button class="delete-all-unused btn hide" id="delete-all-unused">Delete all unused</button>\n      </div>\n      <div class="search-container">\n        <i class="ss-icon">search</i>\n        <label class="search">\n          <input type="search" class="search-field" id="search" placeholder="Search...">\n        </label>\n      </div>\n      <div class="sorter-container">\n        <label class="sorter-label">\n          <select class="selectbox sorter" id="sorting">\n            <option value="name" selected="selected">Name</option>\n            <option value="points">Points</option>\n            <option value="orderInGuides">Order in guides</option>\n          </select>\n        </label>\n        <div id="sorter-buttons" class="buttons">\n          <button id="sorter-asc" data-order="asc" class="btn active">\n            <i class="ss-icon">ascend</i>\n          </button>\n          <button id="sorter-desc" data-order="desc" class="btn">\n            <i class="ss-icon">descend</i>\n          </button>\n        </div>\n      </div>\n    </section>\n    <div class="assessments-preview" />\n    <div class="form" />\n  </div>\n  <div class="settings-container hide" id="media">\n    <div class="media-form" />\n  </div>\n</div>\n'),ne=c().compile('<ul\r\n  class="assessments-manage-container {{#if isHtml}}assessments-manage-container--html{{/if}}{{#if canCreate}}{{#unless isHtml}}assessments-manage-container-2-columns{{/unless}}{{/if}}"\r\n  role="menu"\r\n  id="menu-manage-assessments"\r\n>\r\n  {{#if canCreate}}\r\n    <li role="presentation" class="js-skip-menuitem">\r\n      <h3 class="assessment-dd-header">Create New...</h3>\r\n    </li>\r\n    <li role="presentation" class="js-skip-menuitem">\r\n      <h4 class="assessment-dd-subheader">Auto-Graded</h4>\r\n      <ul class="assessment-dd-subheader-list">\r\n        <li role="presentation">\r\n          <a role="menuitem" tabindex="-1" href="javascript:void(0)" class="assessment-create" data-type="code-output-compare" title="Standard Code Test">\r\n            <i class="svg icon icon-coc"/>\r\n            <div class="assessment-create-text">Standard Code Test</div>\r\n          </a>\r\n        </li>\r\n        <li role="presentation">\r\n          <a role="menuitem" tabindex="-1" href="javascript:void(0)" class="assessment-create" data-type="test" title="Advanced Code Test">\r\n            <i class="svg icon icon-code-test"/>\r\n            <div class="assessment-create-text">Advanced Code Test</div>\r\n          </a>\r\n        </li>\r\n        {{#unless isHtml}}\r\n        <li role="presentation">\r\n          <a role="menuitem" tabindex="-1" href="javascript:void(0)" class="assessment-create" data-type="parsons-puzzle" title="Parsons Puzzle Assessment">\r\n            <i class="svg icon icon-parsons"/>\r\n            <div class="assessment-create-text">Parsons Puzzle</div>\r\n          </a>\r\n        </li>\r\n        <li role="presentation">\r\n          <a role="menuitem" tabindex="-1" href="javascript:void(0)" class="assessment-create" data-type="multiple-choice" title="Multiple Choice">\r\n            <i class="svg icon icon-mcq"/>\r\n            <div class="assessment-create-text">Multiple Choice</div>\r\n          </a>\r\n        </li>\r\n        <li role="presentation">\r\n          <a role="menuitem" tabindex="-1" href="javascript:void(0)" class="assessment-create" data-type="fill-in-the-blanks" title="Fill in the Blanks">\r\n            <i class="svg icon icon-fib"/>\r\n            <div class="assessment-create-text">Fill in the Blanks</div>\r\n          </a>\r\n        </li>\r\n        {{#if showEcornellFib}}\r\n        <li role="presentation">\r\n          <a role="menuitem" tabindex="-1" href="javascript:void(0)" class="assessment-create" data-type="ecornell-fib" title="FITB eCornell">\r\n            <i class="svg icon icon-fib"/>\r\n            <div class="assessment-create-text">FITB eCornell</div>\r\n          </a>\r\n        </li>\r\n        {{/if}}\r\n        <li role="presentation">\r\n          <a role="menuitem" tabindex="-1" href="javascript:void(0)" class="assessment-create" data-type="free-text-auto" title="Free Text Autograde">\r\n            <i class="svg icon icon-free-text-auto"/>\r\n            <div class="assessment-create-text">Free Text Autograde</div>\r\n          </a>\r\n        </li>\r\n        <li role="presentation">\r\n          <a role="menuitem" tabindex="-1" href="javascript:void(0)" class="assessment-create" data-type="splice" title="SPLICE">\r\n            <i class="svg icon icon-splice"/>\r\n            <div class="assessment-create-text">SPLICE</div>\r\n          </a>\r\n        </li>\r\n        <li role="presentation">\r\n          <a role="menuitem" tabindex="-1" href="javascript:void(0)" class="assessment-create" data-type="llm-based-auto-rubric" title="LLM Rubric Autograde">\r\n            <i class="svg icon icon-llm-based-rubric"/>\r\n            <div class="assessment-create-text">LLM Rubric Autograde</div>\r\n          </a>\r\n        </li>\r\n        {{/unless}}\r\n      </ul>\r\n    </li>\r\n    {{#unless isHtml}}\r\n    <li role="presentation" class="js-skip-menuitem">\r\n      <h4 class="assessment-dd-subheader">Manually Graded</h4>\r\n      <ul class="assessment-dd-subheader-list">\r\n        <li role="presentation">\r\n          <a role="menuitem" tabindex="-1" href="javascript:void(0)" class="assessment-create" data-type="llm-based-rubric" title="LLM Rubric">\r\n            <i class="svg icon icon-llm-based-rubric"/>\r\n            <div class="assessment-create-text">LLM Rubric</div>\r\n          </a>\r\n        </li>\r\n        <li role="presentation">\r\n          <a role="menuitem" tabindex="-1" href="javascript:void(0)" class="assessment-create" data-type="free-text" title="Free Text">\r\n            <i class="svg icon icon-free-text"/>\r\n            <div class="assessment-create-text">Free Text</div>\r\n          </a>\r\n        </li>\r\n        <li role="presentation">\r\n          <a role="menuitem" tabindex="-1" href="javascript:void(0)" class="assessment-create" data-type="grade-book" title="Grade Book">\r\n            <i class="svg icon icon-grade-book"/>\r\n            <div class="assessment-create-text">Grade Book</div>\r\n          </a>\r\n        </li>\r\n      </ul>\r\n    </li>\r\n    {{/unless}}\r\n    {{#if showLibrary}}\r\n    <li role="presentation" class="js-skip-menuitem">\r\n      <h3 class="assessment-dd-header">Add from Library...</h3>\r\n      <ul class="assessment-dd-subheader-list">\r\n        <li role="presentation">\r\n          <a role="menuitem" tabindex="-1" href="javascript:void(0)" class="assessment-create" data-type="assessment-library" title="Assessment Library">\r\n            <i class="svg icon icon-assessments-library"/>\r\n            <div class="assessment-create-text">Assessment</div>\r\n          </a>\r\n        </li>\r\n        <li role="presentation">\r\n          <a role="menuitem" tabindex="-1" href="javascript:void(0)" class="assessment-create" data-type="random" title="Random">\r\n            <i class="svg icon icon-random"/>\r\n            <div class="assessment-create-text">Random</div>\r\n          </a>\r\n        </li>\r\n      </ul>\r\n    </li>\r\n    {{/if}}\r\n  {{/if}}\r\n  <li role="presentation" class="assessment-view-existing">\r\n    <a role="menuitem" tabindex="-1" href="javascript:void(0)" class="assessment-existing" title="View Existing Assessments">\r\n      <div class="assessment-create-text">View Existing Assessments</div>\r\n    </a>\r\n  </li>\r\n</ul>\r\n'),ie=c().compile('{{#if assessments.length}}\n<ul class="list assessments">\n  {{#each assessments}}\n  {{> assessmentListItem}}\n  {{/each}}\n</ul>\n{{else}}\n<div class="no-assessments-message">\n    <h2>No assessments</h2>\n</div>\n{{/if}}\n<div class="form-footer">\n  <button type="button" id="cancel-btn" class="btn">Close</button>\n</div>\n'),se=c().compile('<div class="assessment-library-browser">\n  <div class="library-container">\n    <section class="filters">\n      <h4 class="hide library-no-access-random">\n        You have no access to the library in random assessment, apply search will change it to the current library.\n      </h4>\n      <div class="form">\n        <div class="library-filter">\n          <label class="library-select-label" for="library-filter">Library name</label>\n          <select id="library-filter">\n            <optgroup label="My Libraries">\n              {{#each libraries.my}}\n              <option value="{{id}}">{{name}}</option>\n              {{/each}}\n            </optgroup>\n            <optgroup label="Certified Libraries">\n              {{#each libraries.certified}}\n              <option value="{{id}}">{{name}}</option>\n              {{/each}}\n            </optgroup>\n          </select>\n        </div>\n        <label class="search tags">\n          {{> libraryBrowserTagValueControls}}\n        </label>\n        <div class="search favorites">\n          <div class="btn-group search-filter favorites">\n            <button class="btn dropdown-toggle" data-toggle="dropdown">\n              Saved <span class="caret"></span>\n            </button>\n            <ul class="dropdown-menu" role="menu">\n              {{>libraryBrowserFavoritesItems}}\n            </ul>\n          </div>\n          <button type="button" class="btn favorites-save-btn">\n            Save\n          </button>\n        </div>\n      </div>\n    </section>\n    <div class="assessments-list-container">\n      <section class="ordering">\n        <div class="paginate-container pagination"></div>\n        <a href="https://docs.codio.com/instructors/setupcourses/library/search-library.html" target="_blank" class="library-help-link">\n          <i class="ss-icon">info</i>\n          <span>Need a little help?</span>\n        </a>\n      </section>\n      <div class="list">\n      </div>\n    </div>\n  </div>\n</div>\n'),ae=c().compile(D),oe=c().compile('{{#equals items.length 0}}\r\n  <div class="block-notice">\r\n    {{#if search}}\r\n      <p>Your search - <strong>{{search}}</strong> - did not match any assessment.</p>\r\n      <small>\r\n        <p>Suggestions:</p>\r\n        <ul>\r\n          <li>Try different tags/values.</li>\r\n          <li>Try different library.</li>\r\n          <li>Try fewer tags.</li>\r\n        </ul>\r\n      </small>\r\n    {{else}}\r\n      <p>It looks like no assessment available yet.</p>\r\n    {{/if}}\r\n  </div>\r\n{{else}}\r\n  <div class="library-assessments-list">\r\n    {{#each items}}\r\n      <div class="assessment-item" data-id="{{assessmentId}}">\r\n        <div class="assessment-image-container">\r\n          <div class="assessment-item-image icon-{{type}}"></div>\r\n        </div>\r\n        <div class="assessment-item-details">\r\n          <div class="assessment-item-name">\r\n            <span class="assessment-type-name">{{typeName}} / </span>\r\n            <strong>{{name}}</strong>\r\n          </div>\r\n          <div class="assessment-item-tags-list">\r\n            {{#each tags}}\r\n            <div class="assessment-item-tag" data-key="{{@key}}" data-value="{{this}}">\r\n              <span class="assessment-tag-name">{{@key}}</span>\r\n              <span class="assessment-tag-value">{{this}}</span>\r\n            </div>\r\n            {{/each}}\r\n          </div>\r\n          <div class="assessment-item-instructions">{{instructions}}</div>\r\n        </div>\r\n        <div class="assessment-item-complexity">\r\n          {{#if layout}}\r\n          <span title="Has layout">\r\n            <span aria-hidden="true" class="iconify" data-icon="@codio:mdi:file-plus"></span>\r\n          </span>\r\n          {{/if}}\r\n          {{#if hasParameters}}\r\n          <span title="Has parameters">\r\n            <span aria-hidden="true" class="iconify" data-icon="@codio:mdi:tune-vertical"></span>\r\n          </span>\r\n          {{/if}}\r\n        </div>\r\n        {{#if ../showSelectAssessmentBtn}}\r\n        <div class="assessment-item-action">\r\n          <button class="btn select-assessment-btn">Add</button>\r\n        </div>\r\n        {{/if}}\r\n      </div>\r\n    {{/each}}\r\n  </div>\r\n\r\n{{/equals}}\r\n'),re=c().compile('<form action="/" method="post" onsubmit="return false;">\n  <label for="search-name">Search name</label>\n  <input type="text" id="search-name" name="name" autocomplete="off" required autofocus placeholder="Enter the search name"  maxlength="100">\n</form>\n'),ce=c().compile(M),le=c().compile(O),de={};de[B.ZP.TEST]=c().compile('<div class="assessment-editor">\n  <div class="assessment-type assessment-type--default">\n    <h3 title="Advanced Code Test{{#if taskId}}({{taskId}}){{/if}}">\n      {{> aEditorLinkedInfo}}\n      <i class="svg icon icon-code-test"/> Advanced Code Test\n      {{#if taskId}}(<span class="task-id" title="{{taskId}}">{{taskId}}</span>){{/if}}\n    </h3>\n    {{> aEditorDuplicateButton}}\n    <a href="https://docs.codio.com/instructors/authoring/assessments/advanced-code-test.html" target="_blank" class="assessments-form-help-link">\n      <i class="ss-icon">info</i>\n      <span>Need a little help?</span>\n    </a>\n  </div>\n  {{> aEditorNavigation}}\n  <div class="forms-container">\n    <div class="form-container assessment-test-form">\n      {{> aEditorGeneralForm}}\n      {{> aEditorTestExecutionForm}}\n      {{> aEditorTestGradingForm}}\n      {{> aEditorParametersForm}}\n      {{> aEditorMetadataForm}}\n      {{> aEditorFilesForm}}\n    </div>\n  </div>\n  {{> aEditorFooter}}\n</div>\n'),de[B.ZP.MULTIPLE_CHOICE]=c().compile('<div class="assessment-editor">\n  <div class="assessment-type assessment-type--default">\n    <h3 title="Multiple Choice Question{{#if taskId}}({{taskId}}){{/if}}">\n      {{> aEditorLinkedInfo}}\n      <i class="svg icon icon-mcq"/> Multiple Choice Question\n      {{#if taskId}}(<span class="task-id">{{taskId}}</span>){{/if}}\n    </h3>\n    {{> aEditorDuplicateButton}}\n    <a href="https://docs.codio.com/instructors/authoring/assessments/multiple-choice.html" target="_blank" class="assessments-form-help-link">\n      <i class="ss-icon">info</i>\n      <span>Need a little help?</span>\n    </a>\n  </div>\n  {{> aEditorNavigation}}\n  <div class="forms-container">\n    <div class="form-container assessment-multiple-choice-form">\n      {{> aEditorMcqGeneralForm}}\n      {{> aEditorMcqExecutionForm}}\n      {{> aEditorMcqGradingForm}}\n      {{> aEditorParametersForm}}\n      {{> aEditorMetadataForm}}\n      {{> aEditorFilesForm}}\n    </div>\n  </div>\n  {{> aEditorFooter}}\n</div>\n'),de[B.ZP.FILL_IN_THE_BLANKS]=c().compile('<div class="assessment-editor">\n  <div class="assessment-type assessment-type--default">\n    <h3 title="Fill in the Blanks{{#if taskId}}({{taskId}}){{/if}}">\n      {{> aEditorLinkedInfo}}\n      <i class="svg icon icon-fib"/> Fill in the Blanks\n      {{#if taskId}}(<span class="task-id" title="{{taskId}}">{{taskId}}</span>){{/if}}\n    </h3>\n    {{> aEditorDuplicateButton}}\n    <a href="https://docs.codio.com/instructors/authoring/assessments/fill-in-blanks.html#fill-in-blanks" target="_blank" class="assessments-form-help-link">\n      <i class="ss-icon">info</i>\n      <span>Need a little help?</span>\n    </a>\n  </div>\n  {{> aEditorNavigation}}\n  <div class="forms-container">\n    <div class="form-container assessment-fib-form">\n      {{> aEditorGeneralForm}}\n      {{> aEditorFibExecutionForm}}\n      {{> aEditorFibGradingForm}}\n      {{> aEditorParametersForm}}\n      {{> aEditorMetadataForm}}\n      {{> aEditorFilesForm}}\n    </div>\n  </div>\n  {{> aEditorFooter}}\n</div>\n'),de[B.ZP.ECORNELL_FIB]=c().compile('<div class="assessment-editor">\n    <div class="assessment-type assessment-type--default">\n        <h3 title="eCornell Fill in the Blanks{{#if taskId}}({{taskId}}){{/if}}">\n            {{> aEditorLinkedInfo}}\n            <i class="svg icon icon-fib"/> eCornell Fill in the Blanks\n            {{#if taskId}}(<span class="task-id" title="{{taskId}}">{{taskId}}</span>){{/if}}\n        </h3>\n        {{> aEditorDuplicateButton}}\n        <a href="https://docs.codio.com/instructors/authoring/assessments/fill-in-blanks.html#fill-in-blanks" target="_blank" class="assessments-form-help-link">\n            <i class="ss-icon">info</i>\n            <span>Need a little help?</span>\n        </a>\n    </div>\n    {{> aEditorNavigation}}\n    <div class="forms-container">\n        <div class="form-container assessment-fib-form">\n            {{> aEditorGeneralForm}}\n            {{> aEditorEcornellFibExecutionForm}}\n            {{> aEditorEcornellFibGradingForm}}\n            {{> aEditorParametersForm}}\n            {{> aEditorMetadataForm}}\n            {{> aEditorFilesForm}}\n        </div>\n    </div>\n    {{> aEditorFooter}}\n</div>\n'),de[B.ZP.MATH]=c().compile('<div class="assessment-editor">\n  <div class="assessment-type assessment-type--default">\n    <h3 title="S.T.A.C.K Math Assessment{{#if taskId}}({{taskId}}){{/if}}">\n      {{> aEditorLinkedInfo}}\n      <i class="svg icon icon-math"/> S.T.A.C.K Math Assessment\n      {{#if taskId}}(<span class="task-id" title="{{taskId}}">{{taskId}}</span>){{/if}}\n    </h3>\n    {{> aEditorDuplicateButton}}\n    <a href="https://docs.codio.com/instructors/authoring/assessments/math-assessments.html" target="_blank" class="assessments-form-help-link">\n      <i class="ss-icon">info</i>\n      <span>Need a little help?</span>\n    </a>\n  </div>\n  {{> aEditorMathNavigation}}\n  <div class="forms-container">\n    <div class="form-container assessment-math-stack-form">\n      {{> aEditorMathGeneralForm}}\n      {{> aEditorMathGradingForm}}\n      {{> aEditorParametersForm}}\n      {{> aEditorMetadataForm}}\n      {{> aEditorFilesForm}}\n    </div>\n  </div>\n  {{> aEditorFooter}}\n</div>\n'),de[B.ZP.FREE_TEXT]=c().compile('<div class="assessment-editor">\n  <div class="assessment-type assessment-type--default">\n    <h3 title="Free Text{{#if taskId}}({{taskId}}){{/if}}">\n      {{> aEditorLinkedInfo}}\n      <i class="svg icon icon-free-text"/> Free Text\n      {{#if taskId}}(<span class="task-id" title="{{taskId}}">{{taskId}}</span>){{/if}}\n    </h3>\n    {{> aEditorDuplicateButton}}\n    <a href="https://docs.codio.com/instructors/authoring/assessments/free-text.html" target="_blank" class="assessments-form-help-link">\n      <i class="ss-icon">info</i>\n      <span>Need a little help?</span>\n    </a>\n  </div>\n  {{> aEditorFtNavigation}}\n  <div class="forms-container">\n    <div class="form-container assessment-free-text-form">\n      {{> aEditorGeneralForm}}\n      {{> aEditorFtGradingForm}}\n      {{> aEditorParametersForm}}\n      {{> aEditorMetadataForm}}\n      {{> aEditorFilesForm}}\n    </div>\n  </div>\n  {{> aEditorFooter}}\n</div>\n'),de[B.ZP.FREE_TEXT_AUTO]=c().compile('<div class="assessment-editor">\n  <div class="assessment-type assessment-type--default">\n    <h3 title="Free Text Autograde{{#if taskId}}({{taskId}}){{/if}}">\n      {{> aEditorLinkedInfo}}\n      <i class="svg icon icon-free-text-auto"/> Free Text Autograde\n      {{#if taskId}}(<span class="task-id" title="{{taskId}}">{{taskId}}</span>){{/if}}\n    </h3>\n    {{> aEditorDuplicateButton}}\n    <a href="https://docs.codio.com/instructors/authoring/assessments/autograde-free-text.html" target="_blank" class="assessments-form-help-link">\n      <i class="ss-icon">info</i>\n      <span>Need a little help?</span>\n    </a>\n  </div>\n  {{> aEditorNavigation}}\n  <div class="forms-container">\n    <div class="form-container assessment-free-text-form">\n      {{> aEditorGeneralForm}}\n      {{> aEditorFtaExecutionForm}}\n      {{> aEditorFtaGradingForm}}\n      {{> aEditorParametersForm}}\n      {{> aEditorMetadataForm}}\n      {{> aEditorFilesForm}}\n    </div>\n  </div>\n  {{> aEditorFooter}}\n</div>\n'),de[B.ZP.CODE_OUTPUT_COMPARE]=c().compile('<div class="assessment-editor">\n  <div class="assessment-type assessment-type--default">\n    <h3 title="Standard Code Test{{#if taskId}}({{taskId}}){{/if}}">\n      {{> aEditorLinkedInfo}}\n      <i class="svg icon icon-coc"/> Standard Code Test\n      {{#if taskId}}(<span class="task-id" title="{{taskId}}">{{taskId}}</span>){{/if}}\n    </h3>\n    {{> aEditorDuplicateButton}}\n    <a href="https://docs.codio.com/instructors/authoring/assessments/standard-code-test.html" target="_blank" class="assessments-form-help-link">\n      <i class="ss-icon">info</i>\n      <span>Need a little help?</span>\n    </a>\n  </div>\n  {{> aEditorNavigation}}\n  <div class="forms-container">\n    <div class="form-container assessment-code-output-compare-form">\n      {{> aEditorGeneralForm}}\n      {{> aEditorCocExecutionForm}}\n      {{> aEditorCocGradingForm}}\n      {{> aEditorParametersForm}}\n      {{> aEditorMetadataForm}}\n      {{> aEditorFilesForm}}\n    </div>\n  </div>\n  {{> aEditorFooter}}\n</div>\n'),de[B.ZP.GRADE_BOOK]=c().compile('<div class="assessment-editor">\n  <div class="assessment-type assessment-type--default">\n    <h3 title="Grade Book{{#if taskId}}({{taskId}}){{/if}}">\n      {{> aEditorLinkedInfo}}\n      <i class="svg icon icon-grade-book"/> Grade Book\n      {{#if taskId}}(<span class="task-id" title="{{taskId}}">{{taskId}}</span>){{/if}}\n    </h3>\n    {{> aEditorDuplicateButton}}\n    <a href="https://docs.codio.com/instructors/authoring/assessments/grade-book.html" target="_blank" class="assessments-form-help-link">\n      <i class="ss-icon">info</i>\n      <span>Need a little help?</span>\n    </a>\n  </div>\n  {{> aEditorGbookNavigation}}\n  <div class="forms-container">\n    <div class="form-container assessment-grade-book-form">\n      {{> aEditorGbookGeneralForm}}\n      {{> aEditorGbookGradingForm}}\n      {{> aEditorMetadataForm}}\n      {{> aEditorFilesForm}}\n    </div>\n  </div>\n  {{> aEditorFooter}}\n</div>\n'),de[B.ZP.PARSONS_PUZZLE]=c().compile('<div class="assessment-editor">\n  <div class="assessment-type assessment-type--default">\n    <h3 title="Parsons puzzle{{#if taskId}}({{taskId}}){{/if}}">\n      {{> aEditorLinkedInfo}}\n      <i class="svg icon icon-parsons"/> Parsons puzzle\n      {{#if taskId}}(<span class="task-id" title="{{taskId}}">{{taskId}}</span>){{/if}}\n    </h3>\n    {{> aEditorDuplicateButton}}\n    <a href="https://docs.codio.com/instructors/authoring/assessments/parsons-puzzle.html" target="_blank" class="assessments-form-help-link">\n      <i class="ss-icon">info</i>\n      <span>Need a little help?</span>\n    </a>\n  </div>\n  {{> aEditorNavigation}}\n  <div class="forms-container">\n    <div class="form-container assessment-parsons-puzzle-form">\n      {{> aEditorGeneralForm}}\n      {{> aEditorParsonsExecutionForm}}\n      {{> aEditorParsonsGradingForm}}\n      {{> aEditorParametersForm}}\n      {{> aEditorMetadataForm}}\n      {{> aEditorFilesForm}}\n    </div>\n  </div>\n  {{> aEditorFooter}}\n</div>\n'),de[B.ZP.RANDOM]=c().compile('<div class="assessment-editor">\n  <div class="assessment-type assessment-type--default">\n    <h3 title="Random Assessment{{#if taskId}}({{taskId}}){{/if}}">\n      <i class="svg icon icon-random"/> Random Assessment\n      {{#if taskId}}(<span class="task-id" title="{{taskId}}">{{taskId}}</span>){{/if}}\n    </h3>\n    <a href="https://docs.codio.com/instructors/setupcourses/library/search-library.html" target="_blank" class="assessments-form-help-link">\n      <i class="ss-icon">info</i>\n      <span>Need a little help?</span>\n    </a>\n  </div>\n  {{> aEditorRandomNavigation}}\n  <div class="forms-container">\n    <div class="form-container assessment-random-form">\n      {{> aEditorRandomGeneralForm}}\n      {{> aEditorRandomGradingForm}}\n      {{> aEditorRandomExecutionForm}}\n    </div>\n  </div>\n  {{> aEditorFooter}}\n</div>\n'),de[B.ZP.SPLICE]=c().compile('<div class="assessment-editor">\n  <div class="assessment-type assessment-type--default">\n    <h3 title="SPLICE{{#if taskId}}({{taskId}}){{/if}}">\n      {{> aEditorLinkedInfo}}\n      <i class="svg icon icon-splice"/> SPLICE\n      {{#if taskId}}(<span class="task-id" title="{{taskId}}">{{taskId}}</span>){{/if}}\n    </h3>\n    {{> aEditorDuplicateButton}}\n    <a href="https://docs.codio.com/instructors/authoring/assessments/splice.html" target="_blank" class="assessments-form-help-link">\n      <i class="ss-icon">info</i>\n      <span>Need a little help?</span>\n    </a>\n  </div>\n  {{> aEditorNavigation}}\n  <div class="forms-container">\n    <div class="form-container assessment-splice-form">\n      {{> aEditorGeneralForm}}\n      {{> aEditorSpliceExecutionForm}}\n      {{> aEditorSpliceGradingForm}}\n      {{> aEditorMetadataForm}}\n      {{> aEditorFilesForm}}\n    </div>\n  </div>\n  {{> aEditorFooter}}\n</div>\n'),de[B.ZP.LLM_BASED_RUBRIC]=c().compile('<div class="assessment-editor">\n  <div class="assessment-type assessment-type--default">\n    <h3 title="LLM Rubric{{#if taskId}}({{taskId}}){{/if}}">\n      {{> aEditorLinkedInfo}}\n      <i class="svg icon icon-llm-based-rubric"/> LLM Rubric\n      {{#if taskId}}(<span class="task-id" title="{{taskId}}">{{taskId}}</span>){{/if}}\n    </h3>\n    {{> aEditorDuplicateButton}}\n    <a href="https://docs.codio.com/instructors/authoring/assessments/llm-based-rubric.html" target="_blank" class="assessments-form-help-link">\n      <i class="ss-icon">info</i>\n      <span>Need a little help?</span>\n    </a>\n  </div>\n  {{> aEditorLlmBasedRubricNavigation}}\n  <div class="forms-container">\n    <div class="form-container assessment-llm-based-rubric-form">\n      {{> aEditorGeneralForm}}\n      {{> aEditorLlmBasedRubricGradingForm}}\n      {{> aEditorParametersForm}}\n      {{> aEditorMetadataForm}}\n      {{> aEditorFilesForm}}\n    </div>\n  </div>\n  {{> aEditorFooter}}\n</div>\n'),de[B.ZP.LLM_BASED_AUTO_RUBRIC]=c().compile('<div class="assessment-editor">\n  <div class="assessment-type assessment-type--default">\n    <h3 title="LLM Rubric Autograde{{#if taskId}}({{taskId}}){{/if}}">\n      {{> aEditorLinkedInfo}}\n      <i class="svg icon icon-llm-based-rubric"/> LLM Rubric Autograde\n      {{#if taskId}}(<span class="task-id" title="{{taskId}}">{{taskId}}</span>){{/if}}\n    </h3>\n    {{> aEditorDuplicateButton}}\n    <a href="https://docs.codio.com/instructors/authoring/assessments/llm-based-auto-rubric.html" target="_blank" class="assessments-form-help-link">\n      <i class="ss-icon">info</i>\n      <span>Need a little help?</span>\n    </a>\n  </div>\n  {{> aEditorLlmBasedAutoRubricNavigation}}\n  <div class="forms-container">\n    <div class="form-container assessment-llm-based-rubric-form">\n      {{> aEditorGeneralForm}}\n      {{> aEditorLlmBasedAutoRubricGradingForm}}\n      {{> aEditorParametersForm}}\n      {{> aEditorMetadataForm}}\n      {{> aEditorFilesForm}}\n    </div>\n  </div>\n  {{> aEditorFooter}}\n</div>\n');const ue=c().compile("<div class=\"form section-settings-confirm-dlg\">\n  {{#if layoutInfo.isPreviousLayoutSelected}}\n  <p>\n    This assessment's layout is currently set to 'Previous'.\n  </p>\n  {{/if}}\n  {{#unless openedInfo.isCloseAll}}\n  <p>\n  'Close Tabs' setting is disabled.\n  </p>\n  {{/unless}}\n  <p>\n    To preserve the currently displayed configuration, this assessment will be saved with\n    the '{{layoutInfo.name}}' layout{{#if openedInfo.opened}} and with the following tabs:{{else}}.{{/if}}\n  </p>\n  {{#if openedInfo.opened}}\n  <ul class=\"section-settings-confirm-opened-list\">\n  {{#each openedInfo.opened}}\n    {{#equals this.type 'file'}}\n    <li>Type - File. Filename - {{this.content}}. Panel - {{this.panelNumber}}</li>\n    {{/equals}}\n    {{#equals this.type 'preview'}}\n    <li>Type - Preview. URL - {{this.content}}. Panel - {{this.panelNumber}}</li>\n    {{/equals}}\n    {{#equals this.type 'terminal'}}\n    <li>Type - Terminal. Command - {{this.content}}. Panel - {{this.panelNumber}}</li>\n    {{/equals}}\n    {{#equals this.type 'tutor'}}\n    <li>Type - Visualizer. Filename - {{this.content}}. Panel - {{this.panelNumber}}</li>\n    {{/equals}}\n    {{#equals this.type 'vm'}}\n    <li>Type - Virtual Machine. Panel - {{this.panelNumber}}</li>\n    {{/equals}}\n    {{#equals this.type 'vmssh'}}\n    <li>Type - Virtual Machine Ssh Terminal. Panel - {{this.panelNumber}}</li>\n    {{/equals}}\n    {{#equals this.type 'vmnested'}}\n    <li>Type - Cyber Range. Target machine - {{this.content}}. Panel - {{this.panelNumber}}</li>\n    {{/equals}}\n    {{#equals this.type 'earsketch'}}\n    <li>Type - Earsketch. Panel - {{this.panelNumber}}</li>\n    {{/equals}}\n    {{#equals this.type 'jupyter-lab'}}\n    <li>Type - Jupyter Lab. Panel - {{this.panelNumber}}</li>\n    {{/equals}}\n  {{/each}}\n  </ul>\n  {{/if}}\n</div>\n"),he=c().compile('<div class="form select-library-dlg">\n  <select id="library">\n    <optgroup label="My Libraries">\n      {{#each my}}\n      <option value="{{id}}" {{#if readOnly}}disabled="disabled"{{/if}}>{{name}}</option>\n      {{/each}}\n    </optgroup>\n    <optgroup label="Certified Libraries">\n      {{#each certified}}\n      <option value="{{id}}" {{#if readOnly}}disabled="disabled"{{/if}}>{{name}}</option>\n      {{/each}}\n    </optgroup>\n  </select>\n</div>'),pe=c().compile('<div class="assessment-files-list">\n  <p>\n    The following files will be added\n  </p>\n  <ul>\n  {{#each paths}}\n    <li>{{this}}</li>\n  {{/each}}\n  </ul>\n</div>'),fe=c().compile('<form class="form form--simple media-form" action="/">\n  <div class="media-type media-type--{{type}}">\n    <h3 class="media-header">\n      <i class="media-icon ss-icon">highvolume</i>\n      <span>Audio element</span>\n      {{#if media}}(<span class="media-name">{{media.name}}</span>){{/if}}\n    </h3>\n    <div class="form-fieldset form-fieldset-media-disable">\n      <div class="help-block-wrapper">\n        <label class="switch">\n          <span class="visuallyhidden">Disable audio element</span>\n          <input\n            type="checkbox"\n            name="disabled"\n            id="disabled"\n            {{#if media}}{{#if media.disabled}}checked{{/if}}{{/if}}\n          aria-describedby="disabled-label"\n          >\n          <span class="switch-label" aria-hidden="true"></span>\n          <span class="switch-handle" aria-hidden="true"></span>\n        </label>\n        <p class="help-block help-block--guide-settings" id="disabled-label">\n          Disable audio element.\n        </p>\n      </div>\n    </div>\n  </div>\n  <input type="hidden" name="type" id="type" value="{{type}}">\n  <div class="form-fieldset media-name-container">\n    <label class="form-label" for="name">Name</label>\n    <input\n      type="text"\n      name="name"\n      id="name"\n      value="{{#if media}}{{media.name}}{{/if}}"\n      placeholder="Audio name..."\n      />\n  </div>\n  <div class="form-fieldset media-source-container">\n    <label class="form-label" for="source">Source name</label>\n    <input\n      class="media-source-input"\n      type="file"\n      name="source"\n      id="source"\n      value="{{#if media}}{{media.source}}{{/if}}"\n      placeholder="Source..."\n      />\n    <div class="media-source-controls">\n      <input\n        class="media-source-txt-input"\n        type="text"\n        readonly\n        name="sourceTxt"\n        id="sourceTxt"\n        value="{{#if media}}{{media.source}}{{/if}}"\n        placeholder="Source..."\n      />\n      <a href="javascript:void(0)" class="btn btn-default change-source-btn">Change source</a>\n    </div>\n  </div>\n  <div class="container-direction-column">\n    <div class="media-player invisible">\n      <div class="media-player-disabled"></div>\n      <{{type}} id="editor_media_player" class="video-js vjs-default-skin vjs-default-skin-{{type}}" controls preload="auto"\n         width="600" height="{{#equals type "audio"}}0{{else}}300{{/equals}}">\n      </{{type}}>\n    </div>\n    <div class="media-action-add-button">\n      <a href="javascript:void(0)" class="btn btn-default add-action-btn">Add action</a>\n    </div>\n    <div class="media-actions-container">\n      <div class="media-action-item media-action-item-header">\n        <div class="media-action-item-remove media-action-item-cell"></div>\n        <div class="media-action-item-time-container media-action-item-cell">Time</div>\n        <div class="media-action-item-type-container media-action-item-cell">Type</div>\n      </div>\n    </div>\n  </div>\n  <div class="form-footer">\n    <button type="button" id="cancel-btn" class="btn btn-default">Cancel</button>\n    <button type="submit" class="btn btn-primary submit-btn">{{#if media}}Save and Close Settings{{else}}Create and Close Settings{{/if}}</button>\n  </div>\n</form>\n'),me=c().compile('<div class="media-action-item">\n  <div class="media-action-item-remove media-action-item-cell">\n    <a\n      href="javascript:void(0)"\n      class="media-action-item-remove-btn"\n      title="Remove action"\n      aria-label="Remove action"\n    >\n      <span class="iconify-inline" data-icon="@codio:mdi:trash-can-outline"></span>\n    </a>\n  </div>\n  <div class="media-action-item-time-container media-action-item-cell">\n    <input\n      type="text"\n      name="time"\n      class="media-action-item-time plain-input"\n      value="{{formatSeconds action.time \'mm:ss\'}}"\n    />\n  </div>\n  <div class="media-action-item-type-container media-action-item-cell">\n    <select class="media-action-item-type" name="type">\n      {{#each typeData}}\n      <option value="{{value}}">{{label}}</option>\n      {{/each}}\n    </select>\n  </div>\n  <div class="media-item-action-type-fields"></div>\n</div>\n'),ge=c().compile('<div class="media-source-upload-container">\n  <input class="media-source-upload-input" type="file" accept=".mp3,.ogg">\n  <span class="btn default media-source-btn">Upload File</span>\n</div>\n'),be=c().compile(g),ve=c().compile('<ul class="dropdown-menu pull-right" id="menu-guide-preferences" role="menu">\n\n  <li role="presentation">\n    <a role="menuitem" tabindex="-1" href="javascript:void(0)" class="js-reset-section">Restore current files</a>\n  </li>\n\n  <li id="guides-settings-mark-complete" class="hide"></li>\n\n  {{#if showTheme}}\n  <li role="presentation" class="dropdown-submenu pull-left">\n    <a role="menuitem" aria-haspopup="true" aria-expanded="false" href="javascript:void(0)" class="dropdown-toggle" data-toggle="dropdown">Theme</a>\n    <ul class="dropdown-menu dropdown-menu-change-theme" role="menu">\n      {{#each normal_themes}}\n      <li role="presentation">\n        <a role="menuitem" tabindex="-1" href="javascript:void(0)" class="js-change-theme" data-theme="{{id}}">{{name}}</a>\n      </li>\n      {{/each}}\n      <li class="divider"></li>\n      {{#each dyslexic_themes}}\n      <li role="presentation">\n        <a role="menuitem" tabindex="-1" href="javascript:void(0)" class="js-change-theme" data-theme="{{id}}">{{name}}</a>\n      </li>\n      {{/each}}\n    </ul>\n  </li>\n  {{/if}}\n\n  <li role="presentation" class="dropdown-submenu pull-left">\n    <a role="menuitem" aria-haspopup="true" aria-expanded="false" href="javascript:void(0)" class="dropdown-toggle" data-toggle="dropdown">Font Size</a>\n    <ul class="dropdown-menu dropdown-menu-change-font" role="menu">\n      {{#each font_sizes}}\n      <li role="presentation">\n        <a role="menuitem" tabindex="-1" href="javascript:void(0)" class="js-change-font" data-size="{{this}}">{{this}}</a>\n      </li>\n      {{/each}}\n    </ul>\n  </li>\n\n  <li role="presentation">\n    <a href="javascript:void(0)" class="js-reset-style">Reset font &amp; theme</a>\n  </li>\n\n  <li role="presentation">\n    <a href="javascript:void(0)" class="js-code-comments">Code comments</a>\n  </li>\n\n  {{#if canOpenFeedback}}\n  <li role="presentation">\n    <a href="javascript:void(0)" class="show-feedback">Feedback</a>\n  </li>\n  {{/if}}\n\n  {{#if showViewModeToggle}}\n  <li role="separator" class="divider"></li>\n\n  <li role="presentation" class="guides-menu-switcher">\n    <form>\n      <label id="view-as-teacher-label">View as teacher</label>\n      <fieldset>\n        <label class="switch">\n          <span class="visuallyhidden">View as teacher</span>\n          <input type="checkbox" class="js-view-switch" name="view-as-teacher" id="view-as-teacher"\n                 {{#if showAsTeacher}}checked="checked"{{/if}} aria-describedby="view-as-teacher-label"/>\n          <span class="switch-label" aria-hidden="true"></span>\n          <span class="switch-handle" aria-hidden="true"></span>\n        </label>\n      </fieldset>\n    </form>\n  </li>\n  {{/if}}\n</ul>\n'),ye=c().compile(I),we=c().compile(m),_e={};_e.highlight=c().compile(C),_e.terminal=c().compile(P),_e.tutor=c().compile(y),_e[V.Z.TYPE.VM]=c().compile(w),_e[V.Z.TYPE.VM_SSH]=c().compile(_),_e[V.Z.TYPE.VM_NESTED]=c().compile(k),_e.preview=c().compile(v),_e.file=c().compile(b),_e[V.Z.TYPE.EARSKETCH]=c().compile(x),_e[V.Z.TYPE.JUPYTER_LAB]=c().compile(E),_e[V.Z.TYPE.SANDBOX]=c().compile(S);const ke={};ke[J.v.GLOBAL]=c().compile('<form class="form form--simple" action="/">\n  <a href="https://docs.codio.com/instructors/authoring/guides/intro.html#" target="_blank" class="main-form-help-link"><i class="ss-icon">info</i> <span>Need a little help?</span></a>\n\n  <div class="form-fieldset">\n    <label class="form-label" for="scripts">Scripts</label>\n    <textarea name="scripts" id="scripts" >{{scripts}}</textarea>\n  </div>\n\n  <div class="form-fieldset">\n    <label class="form-label" for="theme">Theme</label>\n    <select name="theme" id="theme" disabled>\n      {{#each themes}}\n      <option value="{{id}}" {{#equals ../theme id}}selected="selected"{{/equals}}>\n      {{name}}\n      </option>\n      {{/each}}\n    </select>\n  </div>\n\n  <div class="form-fieldset">\n    <label class="form-label" for="page-numbering">Page numbering</label>\n    <div class="help-block-wrapper">\n      <label class="switch">\n        <span class="visuallyhidden">Page numbering</span>\n        <input\n          type="checkbox"\n          name="pageNumbering"\n          id="page-numbering"\n          {{#unless suppressPageNumbering}}checked{{/unless}}\n          aria-describedby="page-numbering-label"\n        >\n        <span class="switch-label" aria-hidden="true"></span>\n        <span class="switch-handle" aria-hidden="true"></span>\n      </label>\n      <p class="help-block help-block--guide-settings" id="page-numbering-label">\n        Show section numbers.\n      </p>\n    </div>\n  </div>\n\n  <div class="form-fieldset">\n    <label class="form-label" for="hide-menu">Hide menu</label>\n    <div class="help-block-wrapper">\n      <label class="switch">\n        <span class="visuallyhidden">Hide top menu</span>\n        <input\n          type="checkbox"\n          name="hideMenu"\n          id="hide-menu"\n          {{#if hideMenu}}checked{{/if}}\n          aria-describedby="hide-menu-label"\n        >\n        <span class="switch-label" aria-hidden="true"></span>\n        <span class="switch-handle" aria-hidden="true"></span>\n      </label>\n      <p class="help-block help-block--guide-settings" id="hide-menu-label">\n        Hide top menu.\n      </p>\n    </div>\n  </div>\n\n  <div class="form-fieldset">\n    <label class="form-label" for="allow-guide-close">Allow Guide to be closed</label>\n    <div class="help-block-wrapper">\n      <label class="switch">\n        <span class="visuallyhidden">Allow guides to be closable</span>\n        <input\n          type="checkbox"\n          name="allowGuideClose"\n          id="allow-guide-close"\n          {{#if allowGuideClose}}checked{{/if}}\n          aria-describedby="allow-guide-close-label"\n        >\n        <span class="switch-label" aria-hidden="true"></span>\n        <span class="switch-handle" aria-hidden="true"></span>\n      </label>\n      <p class="help-block help-block--guide-settings" id="allow-guide-close-label">\n        Allow Guide to be closable.\n      </p>\n    </div>\n  </div>\n\n  <div class="form-fieldset">\n    <label class="form-label" for="use-submit-buttons">Use Submit buttons</label>\n    <div class="help-block-wrapper">\n      <label class="switch">\n        <span class="visuallyhidden">Use submit button</span>\n        <input\n          type="checkbox"\n          name="useSubmitButtons"\n          id="use-submit-buttons"\n          {{#if useSubmitButtons}}checked{{/if}}\n          aria-describedby="use-submit-buttons-label"\n        >\n        <span class="switch-label" aria-hidden="true"></span>\n        <span class="switch-handle" aria-hidden="true"></span>\n      </label>\n      <p class="help-block help-block--guide-settings" id="use-submit-buttons-label">\n        Use Submit buttons.\n      </p>\n    </div>\n  </div>\n\n  <div class="form-fieldset">\n    <label class="form-label" for="use-mark-as-complete">Use Mark as complete</label>\n    <div class="help-block-wrapper">\n      <label class="switch">\n        <span class="visuallyhidden">Use Mark as complete</span>\n        <input\n          type="checkbox"\n          name="useMarkAsComplete"\n          id="use-mark-as-complete"\n          {{#if useMarkAsComplete}}checked{{/if}}\n          aria-describedby="use-mark-as-complete-label"\n        >\n        <span class="switch-label" aria-hidden="true"></span>\n        <span class="switch-handle" aria-hidden="true"></span>\n      </label>\n      <p class="help-block help-block--guide-settings" id="use-mark-as-complete-label">\n        Show mark as complete.\n      </p>\n    </div>\n  </div>\n\n  <div class="form-fieldset">\n    <label class="form-label" for="collapsed-on-start">Collapsed on start</label>\n    <div class="help-block-wrapper">\n      <label class="switch">\n        <span class="visuallyhidden">Collapsed on start</span>\n        <input\n          type="checkbox"\n          name="collapsedOnStart"\n          id="collapsed-on-start"\n          {{#if collapsedOnStart}}checked{{/if}}\n          aria-describedby="collapsed-on-start-label"\n        >\n        <span class="switch-label" aria-hidden="true"></span>\n        <span class="switch-handle" aria-hidden="true"></span>\n      </label>\n      <p class="help-block help-block--guide-settings" id="collapsed-on-start-label">\n        Collapse Guide on start\n      </p>\n    </div>\n  </div>\n\n  <div class="form-fieldset">\n    <label class="form-label" for="allow-guide-close">Hide sections toggle</label>\n    <div class="help-block-wrapper">\n      <label class="switch">\n        <span class="visuallyhidden">Hide sections toggle</span>\n        <input\n          type="checkbox"\n          name="hideSectionsToggle"\n          id="hide-sections-toggle"\n          {{#if hideSectionsToggle}}checked{{/if}}\n        >\n        <span class="switch-label"></span>\n        <span class="switch-handle"></span>\n      </label>\n      <p class="help-block help-block--guide-settings">\n        Hide sections toggle\n      </p>\n    </div>\n  </div>\n\n  <div class="form-fieldset">\n    <label class="form-label" for="allow-guide-close">Hide "Back to dashboard" button</label>\n    <div class="help-block-wrapper">\n      <label class="switch">\n        <span class="visuallyhidden">Hide "Back to dashboard" button</span>\n        <input\n          type="checkbox"\n          name="hideBackToDashboard"\n          id="hide-back-to-dashboard"\n          {{#if hideBackToDashboard}}checked{{/if}}\n        >\n        <span class="switch-label"></span>\n        <span class="switch-handle"></span>\n      </label>\n      <p class="help-block help-block--guide-settings">\n        Hide "Back to dashboard" button\n      </p>\n    </div>\n  </div>\n\n  <div class="form-fieldset">\n    <label class="form-label" for="allow-guide-close">Protect layout</label>\n    <div class="help-block-wrapper">\n      <label class="switch">\n        <span class="visuallyhidden">Protect layout</span>\n        <input\n                type="checkbox"\n                name="protectLayout"\n                id="protect-layout"\n                {{#if protectLayout}}checked{{/if}}\n        >\n        <span class="switch-label"></span>\n        <span class="switch-handle"></span>\n      </label>\n      <p class="help-block help-block--guide-settings">\n        Prevent tabs closing by students\n      </p>\n    </div>\n  </div>\n\n  <div class="form-footer">\n    <button type="button" id="cancel-btn" class="btn btn-default">Cancel</button>\n    <button type="submit" class="btn btn-primary">Save and Close Settings</button>\n  </div>\n</form>\n'),ke[J.v.CONFIGURE_LAYOUT]=c().compile('<form class="form form--simple configure-layout-form {{#if guidesOnLeft}}configure-layout--guides-on-left{{/if}}" action="/">\n  <h4>Select a layout</h4>\n  <div class="page-settings-container">\n    <ul class="page-settings-layout-list">\n      <li class="page-settings-layout-item-container {{#equals layout "1-panel"}}layout-active{{/equals}}" data-layout="1-panel">\n        <strong class="page-settings-layout-item-title">1 Panel</strong>\n        <div class="page-settings-layout-item">\n          <img src="https://static-assets.codio.com/client/assets/images/guides/layouts/1p.9bcbaa4a5cb2713c.svg" alt="Layout 1 panel" />\n        </div>\n        <div class="page-settings-layout-item page-settings-layout-item--left">\n          <img src="https://static-assets.codio.com/client/assets/images/guides/layouts/1p.9bcbaa4a5cb2713c.svg" alt="Layout 1 panel" />\n        </div>\n      </li>\n      <li class="page-settings-layout-item-container {{#equals layout "2-panels"}}layout-active{{/equals}}" data-layout="2-panels">\n        <strong class="page-settings-layout-item-title">2 Panels</strong>\n        <div class="page-settings-layout-item">\n          <img src="https://static-assets.codio.com/client/assets/images/guides/layouts/2p.75e4e01ac216f4d0.svg" alt="Layout 2 panels" />\n        </div>\n        <div class="page-settings-layout-item page-settings-layout-item--left">\n          <img src="https://static-assets.codio.com/client/assets/images/guides/layouts/2p_left.73bbf1e58cfb95d2.svg" alt="Layout 2 panels guides left" />\n        </div>\n      </li>\n      <li class="page-settings-layout-item-container {{#equals layout "3-columns"}}layout-active{{/equals}}" data-layout="3-columns">\n        <strong class="page-settings-layout-item-title">3 Columns</strong>\n        <div class="page-settings-layout-item">\n          <img src="https://static-assets.codio.com/client/assets/images/guides/layouts/3c.8dfd26812d12fdd3.svg" alt="Layout 3 columns" />\n        </div>\n        <div class="page-settings-layout-item page-settings-layout-item--left">\n          <img src="https://static-assets.codio.com/client/assets/images/guides/layouts/3c_left.fd1010ef13fafe82.svg" alt="Layout 3 columns guides left" />\n        </div>\n      </li>\n      <li class="page-settings-layout-item-container {{#equals layout "3-cell"}}layout-active{{/equals}}" data-layout="3-cell">\n        <strong class="page-settings-layout-item-title">3 Panels</strong>\n        <div class="page-settings-layout-item">\n          <img src="https://static-assets.codio.com/client/assets/images/guides/layouts/3p.f63fb5eed1412d7f.svg" alt="Layout 3 panels" />\n        </div>\n        <div class="page-settings-layout-item page-settings-layout-item--left">\n          <img src="https://static-assets.codio.com/client/assets/images/guides/layouts/3p_left.7efaf7a88af097b0.svg" alt="Layout 3 panels guides left" />\n        </div>\n      </li>\n      <li class="page-settings-layout-item-container {{#equals layout "4-cell"}}layout-active{{/equals}}" data-layout="4-cell">\n        <strong class="page-settings-layout-item-title">4 Panels</strong>\n        <div class="page-settings-layout-item">\n          <img src="https://static-assets.codio.com/client/assets/images/guides/layouts/4p.517e61b384eb85d7.svg" alt="Layout 4 panels" />\n        </div>\n        <div class="page-settings-layout-item page-settings-layout-item--left">\n          <img src="https://static-assets.codio.com/client/assets/images/guides/layouts/4p_left.363c57d2c60f8a2e.svg" alt="Layout 4 panels guides left" />\n        </div>\n      </li>\n    </ul>\n  </div>\n  <div class="js-guides-on-left form-fieldset">\n    <label class="form-label" for="guidesOnLeft">Guides on left</label>\n    <div class="help-block-wrapper">\n      <label class="switch">\n        <span class="visuallyhidden">Guides on left</span>\n        <input type="checkbox" name="guidesOnLeft" id="guidesOnLeft" {{#if guidesOnLeft}}checked{{/if}}/>\n        <span class="switch-label" aria-hidden="true"></span>\n        <span class="switch-handle" aria-hidden="true"></span>\n      </label>\n    </div>\n  </div>\n  <div class="open-tabs-container">\n    <hr />\n    <h4>Customize tabs within each panel</h4>\n    <ul class="list files">\n      {{#each files}}\n      {{> fileInput panelsData=../panelsData}}\n      {{/each}}\n    </ul>\n    <div class="open-tabs-dnd-area dnd-area">\n      Drag and drop a file from the Filetree to add a new tab or select&nbsp;\n      <button type="button" class="btn-plain btn-plain--primary add-btn">Add Tab</button>\n    </div>\n  </div>\n  <hr />\n  <div class="page-settings-container">\n    <div class="page-settings-layout-column-2">\n      <div class="js-show-file-tree form-fieldset">\n        <label class="form-label" for="showFileTree">Show file tree</label>\n        <div class="help-block-wrapper">\n          <label class="switch">\n            <span class="visuallyhidden">Show file tree</span>\n            <input type="checkbox" name="showFileTree" id="showFileTree" {{#if showFileTree}}checked{{/if}} />\n            <span class="switch-label" aria-hidden="true"></span>\n            <span class="switch-handle" aria-hidden="true"></span>\n          </label>\n        </div>\n      </div>\n      <div class="js-show-folders form-fieldset {{#unless showFileTree}}hide{{/unless}}">\n        <label class="form-label hint hint-top" for="paths">\n          Show Folders&nbsp;&nbsp;<i class="ss-icon">help</i>\n          <span class="hint-text">Show files from the selected folder</span>\n        </label>\n        <div class="show-file-tree-input-container">\n          <input\n            type="text"\n            name="paths"\n            id="paths"\n            value=""\n            placeholder="Put a path here"\n          />\n          <button class="show-file-tree-input-add btn-plain btn-plain--primary" type="button" disabled>Add</button>\n        </div>\n        <ul class="show-file-tree-list">\n          {{#each paths}}\n            {{> pathsItem}}\n          {{/each}}\n        </ul>\n        <div class="show-folders-dnd-area dnd-area">\n          Drag and drop a file or a folder from the Filetree to add a new item\n        </div>\n      </div>\n    </div>\n    <div class="page-settings-layout-column-3">\n      <div class="form-fieldset">\n        <label class="form-label" for="close-all">Close Tabs</label>\n        <div class="help-block-wrapper">\n          <label class="switch">\n            <span class="visuallyhidden">Close Tabs</span>\n            <input type="checkbox" name="closeAll" id="close-all" {{#if closeAll}}checked{{/if}} aria-describedby="close-all-label">\n            <span class="switch-label" aria-hidden="true"></span>\n            <span class="switch-handle" aria-hidden="true"></span>\n          </label>\n          <p class="help-block help-block--guide-settings" id="close-all-label">\n            Close all tabs when the user enters this section.\n          </p>\n        </div>\n        <div class="js-close-terminal-session-container form-fieldset {{#unless closeAll}}hide{{/unless}}">\n          <label class="form-label" for="close-terminal-session">Close Terminal Session</label>\n          <div class="help-block-wrapper">\n            <label class="switch">\n              <span class="visuallyhidden">Close Terminal Session</span>\n              <input type="checkbox" name="closeTerminalSession" id="close-terminal-session" {{#if closeTerminalSession}}checked{{/if}} aria-describedby="close-terminal-session-label">\n              <span class="switch-label" aria-hidden="true"></span>\n              <span class="switch-handle" aria-hidden="true"></span>\n            </label>\n            <p class="help-block help-block--guide-settings" id="close-terminal-session-label">\n              Close terminal session when the user enters this section.\n            </p>\n          </div>\n        </div>\n      </div>\n      <div class="form-fieldset">\n        <label class="form-label">Teacher only</label>\n        <div class="help-block-wrapper">\n          <label class="switch" for="teacher-only">\n            <span class="visuallyhidden">Teacher only</span>\n            <input type="checkbox" name="teacherOnly" id="teacher-only" {{#if teacherOnly}}checked{{/if}} aria-describedby="teacher-only-label">\n            <span class="switch-label" aria-hidden="true"></span>\n            <span class="switch-handle" aria-hidden="true"></span>\n          </label>\n          <p class="help-block help-block--guide-settings" id="teacher-only-label">\n            The page will be shown only for teachers.\n          </p>\n        </div>\n      </div>\n      <div class="form-fieldset">\n        <label class="form-label" for="learningObjectives">Learning Objectives</label>\n        <input\n          class="learningObjectives-textarea"\n          type="text"\n          name="learningObjectives"\n          id="learningObjectives"\n          value="{{#if learningObjectives}}{{learningObjectives}}{{/if}}"\n        />\n      </div>\n    </div>\n  </div>\n  <div class="form-footer">\n    <button type="button" id="cancel-btn" class="btn btn-default">Cancel</button>\n    <button type="submit" class="btn btn-primary">Save and Close Settings</button>\n  </div>\n</form>\n'),ke[J.v.BLUEPRINTS]=c().compile('<form class="form form--simple guides-blueprints" action="/">\n    <h4>Manage Blueprints</h4>\n    <div class="blueprints-settings-container">\n        <div class="form-fieldset blueprints-settings-create-new">\n            <p>\n                Save the current page as a Blueprint to reuse its layout and content. Use saved Blueprints as templates when creating new pages.\n                <a href="https://docs.codio.com/instructors/authoring/guides/blueprints.html" target="_blank"><i class="ss-icon">info</i> <span>Need a little help?</span></a>\n            </p>\n            <p>\n                Enter a name for a new Blueprint or select an existing one to edit:\n            </p>\n            <div class="blueprints-settings-create-new-inputs">\n                <label class="form-label" for="blueprintName">Blueprint name</label>\n                <input\n                    class="blueprints-settings-create-new-name"\n                    type="text"\n                    name="blueprintName"\n                    id="blueprintName"\n                    value=""\n                    placeholder="Blueprint name..."\n                    minlength="1"\n                    maxlength="50"\n                />\n                <button type="button" id="create-blueprint-btn" class="btn btn-primary">Save</button>\n            </div>\n        </div>\n        <div class="form-fieldset blueprints-settings-update-existing">\n            <strong>\n                You do not have any blueprints yet.\n            </strong>\n        </div>\n    </div>\n    <div class="form-footer">\n        <button type="button" id="cancel-btn" class="btn btn-default">Close</button>\n    </div>\n</form>\n');const Pe={"1-panel":"1 Panel","2-panels":"2 Panels","3-columns":"3 Columns","3-cell":"3 Panels","4-cell":"4 Panels"};const Ce=function(e,t,n){var i=G.aI;return e===i.PAUSE||e===i.CLOSE_ALL?s()():s()(X[e]({action:t,panelsData:n}))},xe=p.ZP.markdown.updateIframeCss,Ee=async function(e){var t=e.section,n=e.container,i=e.isScrollReset,s=e.theme,a=e.suppressPageNumbering,r=e.useSubmitButtons,c=e.useMarkAsComplete,d=e.hideBackToDashboard,u=e.anchor,h=e.layoutInfo,f=e.skipFocusOnSectionChange,m=q.ZP.generateTitle(t,a),g=t.contentType,b=l.default.currentProject;switch(g){case W.default.CONTENT_TYPE_HTML:var v=[];return b.exists(W.default.CONTENT_HEADER_FILE)&&v.push(W.default.CONTENT_HEADER_FILE),v.push(t.contentPath),b.exists(W.default.CONTENT_FOOTER_FILE)&&v.push(W.default.CONTENT_FOOTER_FILE),p.ZP[g].render(n,v,u);case W.default.CONTENT_TYPE_MARKDOWN:{var y=null;if(b.eduStartedAssignmentInfo){var w=b.guides.bookStructure.children,_=w?z.Z.flatPages(w):[],k=o().findIndex(_,{pageId:t.id});if(-1!==k){var P=_[k],C=b.sortedBookPages,x=e.metadata.getSections(),E=o().findIndex(x,(function(e){return e.id===t.id}))+1;y={isLastUnitPage:!o().isEmpty(C)&&o().last(C)===P.id,isUnitPage:o().includes(C||[],P.id),currentPage:E,totalNumberOfPages:x.length}}}const a=await t.contentModel,l=await(0,K.O$)(a.getValue());return p.ZP[g].render(n,s,m,l,{isScrollReset:i,pageInfo:y,useSubmitButtons:r,useMarkAsComplete:c,hideBackToDashboard:d,sectionId:t.id,layoutInfo:h,skipFocusOnSectionChange:f})}}};const Se=e=>s()(le({source:e}));F();const Ie={renderMediaActionTypeFields:Ce,renderPlayer:function(e,t,n){return s()($({isRegistered:l.default.currentUser&&!l.default.currentUser.isAnonymous(),settingsMenu:e,teacherInStudentUnit:H.ZP.isUnit()&&H.ZP.isTeacher()&&!l.default.currentProject.isOwner,isStudent:H.ZP.isUnit()&&!H.ZP.isTeacher(),showCollapse:t,hideSectionsToggle:n}))},updateIframeCss:xe,renderPlayerItem:async function(e,t,n,i){if(n){const s=i.suppressPageNumbering||t.suppressPageNumbering,a=q.ZP.generateTitle(n,s),o=e.find("div.main h1.title");o.text(a),o.data("id",n.id);const r=e.find("div.item-content");return Ee({metadata:t,section:n,container:r,isScrollReset:!0,suppressPageNumbering:s,useSubmitButtons:t.useSubmitButtons,useMarkAsComplete:t.useMarkAsComplete,hideBackToDashboard:t.hideBackToDashboard,anchor:i.anchor,layoutInfo:i.layoutInfo})}},renderBody:Ee,renderEditorItem:function(e,t,n){return s()(ee({title:q.ZP.generateTitle(e),item:e.json,showSplitview:e.json.type!==W.default.CONTENT_TYPE_HTML,sections:t,isBookWriter:l.default.currentProject.isBookWriter,isBook:l.default.currentProject.isBook,isSplitView:"splitview"===n}))},renderSettings:function(){return s()(te())},renderAssessmentsDropdown:function(e,t,n,i){return s()(ne({canCreate:e,isHtml:t,showLibrary:n,showEcornellFib:i}))},renderAssessmentList:function(e){return s()(ie({assessments:e}))},renderLibraryBrowserDlgContent:function(e,t){return s()(se({libraries:e,searches:t}))},renderEmptyTagValueControls:function(){return s()(ae())},renderAssessmentLibraryItemsList:function(e,t,n){return s()(oe({items:e,search:t,showSelectAssessmentBtn:n}))},renderSaveSearchDlgContent:function(){return s()(re())},renderFavoritesDdItems:function(e){return s()(ce({searches:e}))},renderAssessmentEditor:function(e){!function(e){if(e.source||(e.source={}),e.source.oneTimeTest&&(e.source.maxAttemptsCount=1),e.type!==B.ZP.RANDOM&&(o().isUndefined(e.source.showName)&&(e.source.showName=!0),o().isEmpty(e.source.bloomsObjectiveLevel)&&delete e.source.bloomsObjectiveLevel,o().isUndefined(e.source.showExpectedAnswerOption)&&(e.source.showExpectedAnswerOption={type:Q.K9.ALWAYS})),o().isUndefined(e.source.metadata))e.source.metadata={},e.source.metadata.tags=o().map(U.ZP.REQUIRED_TAGS,(function(e){return{name:e,value:"",required:!0}}));else{var t=[],n={};o().each(U.ZP.REQUIRED_TAGS,(function(t){n[t]=!0,o().find(e.source.metadata.tags,{name:t})||e.source.metadata.tags.push({name:t,value:"",required:!0})})),o().each(e.source.metadata.tags,(function(i){if(U.ZP.AUTO_TAGS[i.name])switch(i.name){case U.ZP.BLOOMS_LEVEL_TAG:e.source.bloomsObjectiveLevel=o().invert(U.ZP.BLOOMS_LEVEL)[i.value];break;case U.ZP.LEARNING_OBJECTIVES_TAG:e.source.learningObjectives=i.value}else n[i.name]&&(i.required=!0),t.push(i)})),e.source.metadata.tags=t}}(e);const t=de[e.type];switch(e.type){case B.ZP.TEST:if(e.advancedType="custom",e&&e.source&&e.source.codeEnvConfig)try{var n=JSON.parse(e.source.codeEnvConfig);e.advancedTypeConfig=n,e.advancedType=n.type}catch(e){}break;case B.ZP.MULTIPLE_CHOICE:e.source.answers||(e.source.answers=[{correct:!0},{}]),o().isUndefined(e.source.maxAttemptsCount)&&(e.source.maxAttemptsCount=1);break;case B.ZP.FILL_IN_THE_BLANKS:case B.ZP.ECORNELL_FIB:o().isUndefined(e.source.maxAttemptsCount)&&(e.source.maxAttemptsCount=1);break;case B.ZP.CODE_OUTPUT_COMPARE:e.source.sequence||(e.source.sequence=[{}]),void 0===e.source.options&&(e.source.options={ignoreCase:!0,ignoreWhitespaces:!0});break;case B.ZP.PARSONS_PUZZLE:o().isEmpty(e.source.grader)&&delete e.source.grader}return s()(t(e))},renderSectionSettingsConfirmDlgContent:function(e,t){return e.name=u.Z.defs[e.layout].name,s()(ue({layoutInfo:e,openedInfo:t}))},renderSelectLibraryDlgContent:function(e){return s()(he(e))},renderAssessmentFilesList:function(e){return s()(pe({paths:e}))},renderMediaForm:function(e,t){var n={media:e,type:t=e?e.type:t};return s()(fe(n))},renderMediaActionItem:function(e,t){var n=s()(me({action:e,typeData:G.UP,panelsData:t}));n.find(".media-action-item-time").inputmask({mask:"59:59",definitions:{5:{validator:"[0-5]"}}});var i=e.type||G.aI.FILE_OPEN;e.type&&n.find(".media-action-item-type").val(e.type);var a=Ce(i,e,t);return n.find(".media-item-action-type-fields").append(a),n},renderMediaUploadContainer:function(){return s()(ge())},fileInput:function(e){const t={index:d.default.GUID(),type:"file",panel:0};return s()(be({...t,...e}))},inputArgs:function(e,t){return s()(_e[e]({arg:t.path||"",panel:t.panel||0,panelsData:t.panelsData}))},cleanup:function(){},playSettingsMenu:function(e,t,n){const i=l.default.currentProject;return ve({normal_themes:e,dyslexic_themes:t,font_sizes:n,showViewModeToggle:i.isAuthorProject||H.ZP.isPreview()||i.isOwner&&!i.eduStartedAssignmentInfo,showAsTeacher:H.ZP.showAsTeacher(),canOpenFeedback:(0,Y.U2)(),showTheme:d.KC})},settingsForm:function(e,t){switch(e){case J.v.GLOBAL:t.themes=o().filter(h.Z.themes(),{dyslexic:!1});break;case J.v.CONFIGURE_LAYOUT:t.closeAll=(n=t.files,o().some(n,(function(e){return e.path.match(/^#tabs/)}))),t.files=o().map(o().filter(t.files,{action:"open"}),(function(e,t){const n=e.json;var i,s;return n.index=t,n.type=function(e){var t=e.path.match(/^#([^\s:]*):\s(.*)/);return t?t[1]:e.ref&&e.lineCount?"highlight":"file"}(e),n.arg=(i=e.path,(s=i.match(/^#([^\s:]*):\s(.*)/))?s[2]:i),n})),t.layouts=Pe}var n;const i=ke[e];return s()(i(t))},panelSelector:function(e){return s()(we(e))},renderPathsItem:e=>s()(ye(e))}},98053:(e,t,n)=>{"use strict";n.d(t,{Z:()=>se});var i=n(52308),s=n.n(i),a=n(96486),o=n.n(a),r=n(49721),c=n(72129),l=n(68058),d=n(95611),u=n(19575),h=n(97137),p=n(9380),f=n(34391),m=n(93443),g=n(45540),b=n(177),v=n.n(b);const y=v().compile('<div class="image-modal-container">\n</div>\n'),w=v().compile('<div\n  id="{{id}}"\n  class="image-modal image-modal-initial"\n  tabindex="-1"\n  role="dialog"\n  aria-modal="true"\n  aria-hidden="false"\n>\n  <div tabindex="0"></div>\n  <div class="image-modal-content">\n    <button class="image-modal-close-btn" aria-label="Close image">\n      <span class="iconify" data-icon="@codio:mdi:close-thick"></span>\n    </button>\n    <div class="image-modal-show-area" tabindex="0">\n      <img class="image-modal-large-image" src="{{url}}" alt="Full size image">\n    </div>\n  </div>\n  <div tabindex="0"></div>\n</div>\n');const _=class{constructor(e){this.id=u.default.GUID(),this.modal=s()(w({id:this.id,url:e}))}_onResize(){const e=s()(window),t=(e.width()-this.modal.width())/2,n=(e.height()-this.modal.height())/2;this.modal.css("left",t).css("top",n)}_bindEvents(){const e=this.modal.find(".image-modal-large-image"),t=this.modal,n=s()(window),i=this;e.load((function(){const e=s()(this).get(0),a=.95*n.width()/e.naturalWidth,r=.95*n.height()/e.naturalHeight;(a<1||r<1)&&((a<r||a===r)&&t.css("width","95%"),(r<a||a===r)&&t.css("height","95%")),t.removeClass("image-modal-initial"),i.trapFunction=u.default.addTrapFocus(".image-modal-content",i.modal),i._onResize(),i.onResizeThrottled=o().throttle((()=>i._onResize()),500),i.observer=new ResizeObserver(i.onResizeThrottled),i.observer.observe(document.body)})),this.modal.find(".image-modal-close-btn").click((()=>this.close())),m.Z.on(n,"click.image-modal.".concat(this.id),(e=>{s()(e.target).closest("#".concat(this.id)).length||this.close()})),m.Z.on(document,"keydown.image-modal".concat(this.id),(e=>{27===e.keyCode&&this.close()}))}getModalContainer(){const e=s()("body");let t=e.find(".image-modal-container");return t.length||(t=s()(y()),e.append(t)),t}open(){s()("body").block({showSpinner:!1}),this.getModalContainer().append(this.modal),this.modal.focus(),this._bindEvents()}close(){u.default.removeTrapFocus(this.trapFunction),this.onResizeThrottled&&this.onResizeThrottled.cancel(),this.onResizeThrottled=null,this.modal.remove(),m.Z.off(s()(window),"click.image-modal.".concat(this.id)),m.Z.off(document,"keydown.image-modal.".concat(this.id)),this.observer&&this.observer.disconnect(),this.observer=null,s()("body").unblock()}};var k=n(46544),P=n(70623),C=n(51751),x=n(4955),E=n(26059),S=n(76900),I=n(15061),A=n(79703),T=n(55637),j=n(85886),Z=n(10742),O=n(95638),N=n(45113);const D=m.Z.create(Z),{UserEventManager:M}=c.default,R=x.ZP.markdown,L=x.ZP.remote,F=[];let B={};const U=async()=>{const e=r.default.ide.panels.getOpenedTabs("guides")[0];return null!=e&&e.activated?new Promise(((e,t)=>{D.callGuidesFrameFunc({method:"getContent",callback:n=>{n.error?t(new Error(n.error)):e(n.result)}})})):B.content||""},q={load:function(e){e.loadComplete()},codioLinkClick:function(e,t){M.create(M.EventType.LINK_WITH_COMMAND,{...P.Z.constructBasicEvent(),command:t.cmd,caption:t.caption,sectionId:e._sectionId}).catch((e=>{let{message:t}=e;return h.Z.error(t)})),R.onLinkPress(t.action,t.cmd)},codioButtonClick:function(e,t){e.runButton(t)},codioGradeAssessment:function(e,t){D.showGradeAssessment(t)},codioExpandOutput:function(e,t){D.assessmentExpandOutput(t)},codioAssessmentApplyGrade:async function(e,t){E._3.applyAssessmentGrade(t)},codioAssessmentButtonClick:function(e,t){D.codioAssessmentBtnClick();const n=u.default.promise.deferred(),i=r.default.currentProject.guides&&r.default.currentProject.guides.assessments;if(!t.type&&t.task&&!o().isEmpty(i)){const e=o().find(i,(function(e){return e.taskId===t.task}));t.type=e&&e.type}const s=t.type===S.ZP.FREE_TEXT,a=t.type===S.ZP.FREE_TEXT_AUTO,c=t.type===S.ZP.FILL_IN_THE_BLANKS,d=t.type===S.ZP.ECORNELL_FIB,h=t.type===S.ZP.MULTIPLE_CHOICE,p=t.type===S.ZP.PARSONS_PUZZLE;n.resolve();const m=r.default.currentProject.guid+":assessment_notice"+(t.showWarning?"_test":"");let g=!1;if(t.showWarning&&!l.I_.get(m)){const i=s?"Submit Answer":"Check It",o=function(i){if(!i){let n;if(s||c||h||a||p||d){const i=e._buttons[t.id].data;i.result||(i.result={}),n=i.result}else n=e._buttons[t.id].data;return n.result={state:"reset",timestamp:(new Date).getTime()},e._refresh(e),!0}l.I_.set(m,!0),n.promise.then((function(){e.runAssessmentAction(t)}))};f.Z.showConfirm({title:"Attention",description:'Please be aware that you can make only one attempt to answer this question. Once you submit the answer by clicking the "'+i+'" button, you cannot change it again.',doNotCloseOpened:!0,onHide:function(){if(!g)return o(!1);g=!1},onClose:function(e){return g=!0,o(e)}})}else n.promise.then((function(){e.runAssessmentAction(t)}))},codioAssessmentSaveState:function(e,t){var n=e._buttons[t.id];n&&(n.data||(n.data={result:{}}),n.data.result||(n.data.result={}),n.data.result.state=t.state),E._3.saveState(t.taskId,t.state,e).catch((e=>{let{message:t}=e;return h.Z.error(t)}))},codioAssessmentReset:function(e,t){E._3.reset(t.id).catch((e=>{let{message:t}=e;return h.Z.error(t)}))},codioRandomAssessmentPreview:function(e,t){const{libraryId:n,search:i}=t.source;D.librarySearchPreview({libraryId:n,search:i})},codioAssessmentsUnblock:function(e){var t;if((0,N.vc)(null===(t=r.default.currentProject.eduStartedAssignment)||void 0===t?void 0:t.assignment)){const t=(0,N.jQ)(r.default.currentProject.eduStartedAssignment);f.Z.showConfirm({title:"Penalty warning",buttons:f.Z.MB_OKCANCEL,description:t,captcha:!0,captchaValue:"yes",placeholder:"Enter: yes",onClose:function(t){if(t)return r.default.currentProject.penaltyApprovedDate=new Date,k.cc(r.default.currentProject.guid).then((function(){h.Z.notify("approved"),G(e)})).catch((function(e){h.Z.error(e.message)}))}})}},codioAssessmentModify:function(e,t){"DONE"===t.status?f.Z.showWarning({description:"You are not able to modify this question as it has already been graded.<br/><br/>You will need to contact your teacher to request them to allow further modifications.",buttons:f.Z.MB_OK,doNotCloseOpened:!0,width:700}):f.Z.showConfirm({title:"Modify Answer",description:"You may modify your answer but you must resubmit after making your modifications.<br/><br/>You should be aware that the submit date will change to the date of the new submission.",onClose:function(e){return e&&(g.Z.getEduStartedAssignmentInfo()?E._3.modify(t.id):E._3.reset(t.id,!0)),!0}})},codioAssessmentValidate:function(e,t){e.setUpdateAssessmentState(t.id,"progress","Please wait while we check your answerâ€¦"),E._3.saveState(t.taskId,t.state,e).then((function(){return E._3.validateMath(t.taskId,t.state,e)})).catch((e=>{let{message:t}=e;return h.Z.error(t)}))},codioNextButtonClick:function(e){H("goToNextSection",e)},onScroll:function(e,t){e._scroll=t},onClick:function(e){H("iframeClick",e)},onLineMap:function(e,t){e._lineMap=t},scrollInfo:function(e,t){e._scrollHeight=t.scrollHeight,e._height=t.height},buttonState:function(e,t){e.setButtonState(t.id,t.state,t.value)},switchUnit:function(e,t){t.id&&H("switchUnit",e,{unitId:t.id})},backToDash:function(e){H("backToDash",e)},switchOutputView:function(e){H("switchOutputView",e)},notify:function(e,t){t.type&&o().isFunction(h.Z[t.type])&&h.Z[t.type](t.message,t.timeout)},markAsCompleted:function(e,t){t.completed?D.markAsCompleted():D.markAsUncompleted()},onFootnoteClick:function(e,t){e._anchor=t,e._iframe.attr("src",$(e))},onImageClick:function(e,t){new _(t).open()},openTab:function(e,t){new A.OK(t.type,t.content,t.panelNumber).open(I.Z.getPanel.bind(null,I.Z.getLayout()))},goToNextSection:function(e){H("goToNextSection",e)},resetCurrentFiles:function(e){H("resetCurrentFiles",e)},goToPreviousSection:function(e){H("goToPreviousSection",e)},goToSectionTitled:function(e,t){H("goToSectionByTitle",e,{sectionTitle:t.sectionTitle})},goToSection:function(e,t){H("goToSectionById",e,{sectionId:t.sectionId,optionalAnchor:t.optionalAnchor})},closeAllTabs:function(){r.default.ide.panels.closeAllTabs(["filetree","guides","guides-edit"])},closeTab:function(e,t){m.Z.publish("tab:close_by_path:"+t.path)},runInBox:function(e,t){x.ZP.remote.run(t.cmd).then((function(n){Q(e,"callback",{id:t.id,result:n})})).catch((function(n){let{message:i}=n;Q(e,"callback",{id:t.id,error:i})}))},checkAssessment:function(e,t){q.codioAssessmentButtonClick(e,{task:t.id,id:u.default.hashCode(t.id+"assessment",!0)})},sendAssessment:function(e,t){E._3.check(t.id,S.ZP.CUSTOM,{points:t.points,answer:t.answer},e).then((function(n){Q(e,"callback",{id:t.callbackId,error:!1,result:n})}))},getAssessment:function(e,t){E._3.fetchGuideState().then((function(n){var i=o().find(n,{taskId:t.id});Q(e,"callback",{id:t.callbackId,error:!1,result:i&&i.result&&i.result.result})})).catch((n=>{let{message:i}=n;Q(e,"callback",{id:t.callbackId,error:i})}))},onKeyDown:function(e,t){p.Z.hotkey.emulateKey(t)},getFile:function(e,t){(function(e){const t=r.default.currentProject;if(!t)return Promise.reject(new Error("No Project Opened"));if(e=(0,u.qg)(e),!t.exists(e))return Promise.reject(new Error("File does not exist"));return t.file(e)})(t.path).then((function(n){Q(e,"loadFile",{content:n.content,args:t})}))},saveFile:function(e,t){(function(e,t){const n=r.default.currentProject;if(!n)return Promise.reject(new Error("No Project Opened"));if(e=(0,u.qg)(e),!n.exists(e))return Promise.reject(new Error("File not found"));return n.file(e).then((function(e){if(e.content===t)return Promise.reject(new Error("File content does not changed"));e.content=t})).then(u.default.promise.delay(50)).then((function(){return d.Z.saveAllAndWait()})).catch((e=>Promise.reject(e)))})(t.path,t.content).then((function(){Q(e,"saveFile",{args:t})}))},renderCompleted:function(e){e._debouncedSetContent()},callback:(e,t)=>{t.callbackId&&F[t.callbackId]&&F[t.callbackId](t)},updateCurrentError:function(e,t){r.default.currentError=t}};function H(e,t,n){D[e](o().assign(n,{iframeId:t.id}))}function G(e){var t;e._lineMap={};const n=e.content,i=r.default.currentProject,a=(0,N.vc)(null===(t=i.eduStartedAssignment)||void 0===t?void 0:t.assignment),o=g.Z.getEduStartedAssignmentInfo(),c=o&&o.started.completed,l=c&&c.completed,d=!e.useMarkAsComplete&&a,{pairProgramming:u}=r.default.currentProject,h=!(u&&u.enabled)||!r.default.collaborationDriverId||r.default.collaborationDriverId===r.default.currentUser.account;let p=null;e.resetAnswers&&(p=e.resetAnswers,e.resetAnswers=null),B.title=e.title,Q(e,"setContent",{html:n,buttons:e.buttons,css:e.css,scroll:e.scroll,fontSize:e.fontSize,scripts:e.scripts,dyslexicBar:e.dyslexicBar,title:e.title,showNext:!e.isExpandedOutput&&!s()(".guides-button-next").is("[".concat(j.xu,"]")),contentType:e._contentType,showAsTeacher:T.ZP.showAsTeacher(),isBookReader:i.isBookReader,pageInfo:e.pageInfo,useSubmitButtons:e.useSubmitButtons,hideBackToDashboard:e.hideBackToDashboard,disableAssessments:!l&&d,sectionId:e.sectionId,layoutInfo:e.layoutInfo,skipFocusOnSectionChange:e.skipFocusOnSectionChange,eduStartedAssignment:o,assignmentRubrics:g.Z.getAssignmentRubrics(),completeBtnState:g.Z.getCompleteBtnInfo(),isDriverOrSingleMode:h,isExpandedOutput:e.isExpandedOutput,expandOutputSwitchText:e.expandOutputSwitchText,isWritableCopy:i.writableCopy,resetAnswers:p})}function W(e,t,n){e.ready.then((function(){!function(e,t){Q(e,"loadUnits",{units:t})}(e,n)}))}function z(e){e&&(e.fontSize=p.Z.get("guides").font_size)}function V(e){e.ready.then((function(){!function(e,t){Q(e,"setCompleteBtnState",{completeBtnState:t})}(e,g.Z.getCompleteBtnInfo())}))}function K(e,t,n){e.ready.then((function(){!function(e,t){Q(e,"loadEduStartedAssignment",{eduStartedAssignment:t})}(e,n)}))}const J=(e,t,n)=>{e.ready.then((()=>Y(e,n)))};const Y=(e,t)=>{Q(e,"loadAssignmentRubrics",{assignmentRubrics:t})};function Q(e,t,n){var i=e._iframe[0];if(n.callback){const e=u.default.GUID(8);F[e]=n.callback,n.callbackId=e,delete n.callback}if(i.contentWindow){var s={action:t,args:n},a=window.location.protocol,o=JSON.stringify(s),r=a+e._iframe.attr("src");i.contentWindow.postMessage(o,r)}}function X(e){try{var t=JSON.parse(e.data),n=t.id,i=s()("#"+n).data("instance");o().isUndefined(i)||o().defer((function(){!function(e,t){var n=t.action,i=t.args;o().isFunction(q[n])&&q[n](e,i)}(i,t)}))}catch(e){}}function $(e,t,n){const i={id:e._id,origin:window.location.origin};n=n?"&"+n:"";var a=t||"__guides__.html";return"//"+r.default.currentProject.backendDomain+"/"+a+"?"+s().param(i)+n+(o().isEmpty(e._anchor)?"":"#"+e._anchor)}function ee(e){e.ready.then((function(){G(e)}))}function te(e){return e?o().map(e,(function(e){return"path="+encodeURIComponent(e)})).join("&"):null}window.addEventListener("message",X,!1);const ne=function(e,t){const n=te(t.paths),i=t.url;this._id=u.default.GUID();const a=g.Z.getEduStartedAssignmentInfo(),c=g.Z.getAssignmentRubrics();this._refresh=o().debounce(ee,10),this._container=e,this._anchor=t.anchor,this._useLoadCallback=t.useLoadCallback;const l=function(e,t,n,i){var a=$(e,n,i),o=s()('<iframe id="'.concat(e._id,'"\n            allowFullScreen="allowFullScreen"\n            allow="camera \'src\';microphone \'src\'"\n            frameBorder="0"\n            name="guides"\n            title="Guides Player"\n            class="guides-iframe"\n            src="').concat(a,'">\n      </iframe>'));return e._useLoadCallback&&o.on("load",(()=>e.loadComplete())),t.append(o),o}(this,e,i,n);l.data("instance",this),this._iframe=l,this._ready=u.default.promise.deferred(),this._readyPromise=this._ready.promise,this._lineMap={},this._buttons={},this._dyslexicBar=!1,this._scripts=[],this._fontSize=p.Z.get("guides").font_size,this._contentType=t.contentType,this._pageInfo=null,this._resetAnswers=null,B={},this._isExpandedOutput=t.isExpandedOutput,this._expandOutputSwitchText=t.expandOutputSwitchText,this._setContentDfd=u.default.promise.deferred(),this._debouncedSetContent=o().debounce((()=>{this._setContentDfd.resolve()}),1e3),V(this),this._handlers=[m.Z.subscribe("settings:loaded",z.bind(this,this)),m.Z.subscribe("guides:units_loaded",W.bind(this,this)),m.Z.subscribe("education:set_completed",V.bind(this,this)),m.Z.subscribe("guides:player:callFunc",((e,t)=>{t.callback&&Q(this,"callFunc",t)}))],a?K(this,0,a):this._handlers.push(m.Z.subscribe("education:edu_started_assignment_info_loaded",K.bind(this,this))),c?J(this,0,c):this._handlers.push(m.Z.subscribe("education:rubricsLoaded",J.bind(this,this)));const{pairProgramming:d}=r.default.currentProject;d&&d.enabled&&this._handlers.push(m.Z.subscribe("collaboration:driverUpdated",this._refresh.bind(this,this)))},ie=ne.prototype;ie.loadComplete=function(){this._isLoaded||(this._isLoaded=!0,this._ready.resolve()),this._refresh(this)},ie.focusEl=function(e){e&&this.ready.then((()=>{Q(this,"focusEl",e)}))},Object.defineProperty(ie,"content",{set:function(e){e!==this._value&&(this._value=e,this._lineMap={},this._refresh(this))},get:function(){return this._value}}),Object.defineProperty(ie,"title",{set:function(e){e!==this._title&&(this._title=e,this._refresh(this))},get:function(){return this._title}}),Object.defineProperty(ie,"css",{set:function(e){e!==this._css&&(this._css=e,this._refresh(this))},get:function(){return this._css}}),Object.defineProperty(ie,"scroll",{set:function(e){this._scroll=e;var t=this;this.ready.then((function(){Q(t,"setScroll",e)}))},get:function(){return this._scroll||0}}),Object.defineProperty(ie,"pageInfo",{set:function(e){e!==this._pageInfo&&(this._pageInfo=e,this._refresh(this))},get:function(){return this._pageInfo||!1}}),Object.defineProperty(ie,"useSubmitButtons",{set:function(e){e!==this._useSubmitButtons&&(this._useSubmitButtons=e,this._refresh(this))},get:function(){return this._useSubmitButtons}}),Object.defineProperty(ie,"useMarkAsComplete",{set:function(e){e!==this._useMarkAsComplete&&(this._useMarkAsComplete=e)},get:function(){return this._useMarkAsComplete}}),Object.defineProperty(ie,"sectionId",{set:function(e){e!==this._sectionId&&(this._sectionId=e)},get:function(){return this._sectionId}}),Object.defineProperty(ie,"hideBackToDashboard",{set:function(e){e!==this._hideBackToDashboard&&(this._hideBackToDashboard=e,this._refresh(this))},get:function(){return this._hideBackToDashboard}}),Object.defineProperty(ie,"skipFocusOnSectionChange",{set:function(e){e!==this._skipFocusOnSectionChange&&(this._skipFocusOnSectionChange=e,this._refresh(this))},get:function(){return this._skipFocusOnSectionChange}}),Object.defineProperty(ie,"layoutInfo",{set:function(e){e!==this._layoutInfo&&(this._layoutInfo=e,this._refresh(this))},get:function(){return this._layoutInfo}}),Object.defineProperty(ie,"scripts",{set:function(e){this._scripts=e||[],this._refresh(this)},get:function(){return this._scripts}}),Object.defineProperty(ie,"dyslexicBar",{set:function(e){this._dyslexicBar=e,this._refresh(this)},get:function(){return this._dyslexicBar}}),Object.defineProperty(ie,"ready",{get:function(){return this._readyPromise}}),Object.defineProperty(ie,"lineMap",{get:function(){return this._lineMap}}),Object.defineProperty(ie,"scrollHeight",{get:function(){return this._scrollHeight}}),Object.defineProperty(ie,"height",{get:function(){return this._height}}),Object.defineProperty(ie,"contentType",{set:function(e){this._contentType=e},get:function(){return this._contentType}}),Object.defineProperty(ie,"isExpandedOutput",{get:function(){return this._isExpandedOutput}}),Object.defineProperty(ie,"expandOutputSwitchText",{set:function(e){this._expandOutputSwitchText=e},get:function(){return this._expandOutputSwitchText}}),Object.defineProperty(ie,"resetAnswers",{set:function(e){this._resetAnswers=e},get:function(){return this._resetAnswers}}),ie.scrollTop=function(e){if(o().isUndefined(e))return this.scroll;this.scroll=e},ie.changeSrc=function(e,t,n){t=te(t),this._anchor=n||"",this._iframe.attr("src",$(this,e,t))},ie.focus=function(){var e=this;this._iframe[0].contentWindow?this._iframe[0].contentWindow.focus():this._iframe.load((function(){e._iframe[0].contentWindow.focus()}))},ie.setButtonState=function(e,t,n){n=n||"";var i=(0,u.Tf)(n);0===n.length&&("fail"===t?n="<p><b>Error executing command.</b></p>":"pass"===t&&(n="<p><b>Command was successfully executed.</b></p>")),i||(n=s()("<div/>").text(n).html()),this._buttons[e]={state:t,message:n,timestamp:(new Date).getTime()},this._refresh(this)},ie.setAssessmentState=function(e,t){this._buttons[e]={data:t,type:"assessment"},this._refresh(this)},ie.setUpdateAssessmentState=function(e,t,n){this._buttons[e]||(this._buttons[e]={data:{},type:"assessment"}),o().set(this._buttons[e],"data.result.result.state",t),o().set(this._buttons[e],"data.result.result.output",n),this._refresh(this)},ie.runAssessmentAction=function(e){D.onAssessmentExecute(e.task);var t=e.id;this.setUpdateAssessmentState(t,"progress","Please wait while we check your answerâ€¦");var n=this;return d.Z.saveAllAndWait().then((function(){return E._3.checkObject(e,n)})).catch((function(i){var s="System error, please try again.";i&&i.message&&(s=i.message),D.onAssessmentResult({assessmentId:e.task,result:{output:s,result:"fail"}}),n.setUpdateAssessmentState(t,"fail",s)}))},ie.runButton=function(e){var t=e.id,n=e.cmd,i=this,s=e.type;if("terminal"===s)return D.command({action:{action:"open"},command:{type:"cmd",content:n}}),void M.create(M.EventType.GUIDES_BUTTON_TERMINAL,{...P.Z.constructBasicEvent(),command:n,sectionId:i._sectionId}).catch((e=>{let{message:t}=e;return h.Z.error(t)}));if("reset"===s)return void D.resetCurrentFiles();if("debugger"===s)return void D.debuggerStart({title:n});if("go-to-section-titled"===s)return void H("goToSectionByTitle",i,{sectionTitle:n});if("record-audio"===s)return void H("recordAudio",i,{path:n});if("vm-ssh"===s)return void H("openVmSsh",i,{});if("vm-vnc"===s)return void H("openVmVnc",i,{});if("vm"===s)return void H("openVmNested",i,{path:n});if("aws-learning"===s)return void H("openAwsLearning",i,{path:n});if("upload-file"===s)return void H("uploadFile",i,{path:n});D.onCommandExecute(e);const a=(e,i)=>{this.setButtonState(t,e,i);const s="pass"!==e;D.onCommandResult({command:n,output:s?void 0:i,format:s?void 0:(0,u.Tf)(i)?O.tC.HTML:O.tC.TEXT,err:s?i:void 0})};if("background"===s)return i.setButtonState(t,"progress","Please wait while command is executingâ€¦"),(e=>d.Z.saveAllAndWait().then((function(){return L.runWithoutTimeout(e)})))(n).then((function(e){0!==e.code?a("fail",e.stdout):a("pass","Command executed"),M.create(M.EventType.GUIDES_BUTTON,{...P.Z.constructBasicEvent(),command:n,sectionId:i._sectionId}).catch((e=>{let{message:t}=e;return h.Z.error(t)}))})).catch((function(e){let{message:t}=e;a("invalid",t)}));i.setButtonState(t,"progress","Please wait while we check your codeâ€¦"),(e=>d.Z.saveAllAndWait().then((function(){return L.run(e)})))(n).then((function(e){0!==e.code?a("fail",e.stdout):a("pass",e.stdout),M.create(M.EventType.GUIDES_BUTTON,{...P.Z.constructBasicEvent(),command:n,code:e.code,output:e.stdout,sectionId:i._sectionId}).catch((e=>{let{message:t}=e;return h.Z.error(t)}))})).catch((function(e){var t="System error, please try again. "+e.message;"Access denied"===e.message&&(t="You do not have permissions to run commands on this box"),a("invalid",t)}))},ie.resetButtons=function(){this._buttons={},this._refresh(this)},ie.redraw=function(){var e=this._iframe.parent();this._iframe.detach(),e.append(this._iframe)},ie.updateGuidesFrameData=async function(){const e=await U();B={...B,content:e}},ie.cleanup=function(){var e,t;this._handlers&&m.Z.unsubscribe(this._handlers),this._handlers=[],o().isFunction(null===(e=this._refresh)||void 0===e?void 0:e.cancel)&&this._refresh.cancel(),o().isFunction(null===(t=this._debouncedSetContent)||void 0===t?void 0:t.cancel)&&this._debouncedSetContent.cancel()},Object.defineProperty(ie,"isIframe",{get:function(){return!0}}),Object.defineProperty(ie,"buttons",{get:function(){return this._buttons}}),Object.defineProperty(ie,"id",{get:function(){return this._iframe&&this._iframe.attr("id")}}),Object.defineProperty(ie,"fontSize",{get:function(){return this._fontSize},set:function(e){null==e&&(e=18),(e=parseInt(e,10))>30||e<12||e!==this._fontSize&&(this._fontSize=e,this._refresh(this),p.Z.get("guides").sync_font_size&&(C.ZP.set("user","editor","font_size",e-2),C.ZP.set("user","terminal","font_size",e-2)),C.ZP.set("user","guides","font_size",e),C.ZP.commit())}}),ne.isExist=function(e){return s()(e).find("iframe.guides-iframe").length>0},ne.get=function(e){return s()(e).find("iframe.guides-iframe").data("instance")},m.Z.subscribe("guides:player:getPageInfo",(async(e,t)=>{const n=await U();t({name:B.title||"",content:n})}));const se=ne},85099:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>l,tj:()=>o.Z});var i=n(96486),s=n.n(i),a=n(85886),o=n(98053),r="__guides_html__.html";function c(e,t,n){var i;return o.Z.isExist(e)?((i=o.Z.get(e)).contentType=a.default.CONTENT_TYPE_HTML,i.changeSrc(r,t,n)):i=function(e,t,n){var i={contentType:a.default.CONTENT_TYPE_HTML,url:r,paths:t,anchor:n,useLoadCallback:!0};return new o.Z(e,i)}(e,t,n),s().isUndefined(i)?Promise.reject(new Error("Iframe not found")):i.ready.then((function(){return i}))}const l={html:{render:function(e,t,n){return c(e,t,n)}},markdown:n(79589).ZP,iframeClient:o.Z}},79589:(e,t,n)=>{"use strict";n.d(t,{O$:()=>C,ZP:()=>x,Uf:()=>P});var i=n(96486),s=n.n(i),a=n(53124),o=n(49721),r=n(85886),c=n(19575),l=n(97137),d=n(51442),u=n(98053),h=n(35797),p=n(50352),f=n(38524);const m='.rendered-markdown {\n  margin-left: 10px;\n}\n\n.last-run {\n  font-family: \'Nunito Sans\', sans-serif;\n  font-size: 70%;\n}\n\n.codio-button-result {\n  padding: 0;\n  font-size: 16px;\n}\n\n.codio-button-result-icon {\n  left: -30px;\n  top: 10px;\n}\n\n.codio-feedback-comments,\n.codio-assessment-compare .codio-button-result-out .codio-output-text,\n.codio-assessment-compare .codio-button-result-out .codio-expected-output-text,\n.codio-assessment-compare .codio-button-result-out .codio-feedback-text,\n.codio-output-diff {\n  max-height: none;\n}\n\n.content {\n  border: none;\n  margin: 0;\n  padding-top: 0;\n}\n\n.content.dyslexic pre {\n  font-family: "OpenDyslexic Mono", monospace;\n}\n\n.content.dyslexic .codio-button-result .codio-button-result-out {\n  font-family: "OpenDyslexic Mono", monospace;\n}\n\n.codio-button-switch-view {\n  text-transform: none;\n}\n\n.content::before,\n.content::after {\n  display: none;\n}\n\n.footer {\n  padding: 10px 0;\n}\n\n.codio-button-switch-view.switch-view {\n  padding: 2px 12px;\n  border-radius: 2px;\n  margin-left: -40px;\n  margin-top: 10px;\n}\n\n.output .guides-iframe {\n  height: 100%;\n  width: 100%;\n}\n\n',g=".codio-button-switch-view.switch-view {\n  border-radius: 10px;\n}\n",b=[f.KX,f.LI,f.mO,f.CN];async function v(e,t,n){const i=void 0!==t?t:await d.Z.getCurrentTheme();let a=d.Z.getTheme(i);s().isUndefined(a)&&(a=d.Z.getTheme(r.default.DEFAULT_THEME));let l=a.css;function u(t){e.css=t}n&&(l+=m,c.RO&&(l+=g));const{currentProject:h}=o.default;if(!h)throw new Error("No project");e.dyslexicBar=!0===a.dyslexic;const{eduStartedAssignmentInfo:p,isAuthorProject:f,authorAssignment:b}=h;let v=null,y=null,w=null;if(p){var _;const{assignmentVersion:e,course:t}=p;v=e.guides;const n=(null===(_=t.details)||void 0===_?void 0:_.customCssSettings)||{};y=n.extraGuidesCssUrl,w=n.overrideGuidesCssUrl}if(f){var k;const{course:e}=b,t=(null===(k=e.details)||void 0===k?void 0:k.customCssSettings)||{};y=t.extraGuidesCssUrl,w=t.overrideGuidesCssUrl}const P=e=>"@import url('".concat(e,"');"),C=v?v.customStylesUrl:null,x=h.exists(r.default.CSS_FILE);if(!a.dyslexic&&(w||y)){let e=l;if(w&&(e=P(w)),y){e=P(y)+"\n"+e}return u(e),void await c.default.promise.defer()}if(!a.dyslexic&&(C||x)){const e=async()=>{if(C)return(async e=>{try{const t=await fetch(e);return t.ok?t.text():""}catch(e){return""}})(C);if(x){return(await h.file(r.default.CSS_FILE)).content}return""},t=await e();let n;return n=t===r.default.CSS_FILE_CONTENT?l:t,u(n),void await c.default.promise.defer()}u(l),await c.default.promise.defer()}async function y(e,t){return await v(e,t),e}function w(e){let[t,n,i,s]=e;return t.content=n,t.title=i,t.pageInfo=s.pageInfo,t.useSubmitButtons=s.useSubmitButtons,t.useMarkAsComplete=s.useMarkAsComplete,t.sectionId=s.sectionId,t.hideBackToDashboard=s.hideBackToDashboard,t.layoutInfo=s.layoutInfo,t.skipFocusOnSectionChange=s.skipFocusOnSectionChange,t.assessmentIds=s.assessmentIds,t}async function _(e,t){let n;const i=c.default.promise.deferred(),a=i.promise;if(u.Z.isExist(e))if(n=u.Z.get(e),n&&n.contentType!==r.default.CONTENT_TYPE_MARKDOWN){n.contentType=r.default.CONTENT_TYPE_MARKDOWN;try{const e=await y(n,t);i.resolve(e)}catch(e){i.reject(e)}n.changeSrc("__guides__.html")}else i.resolve(n);else{n=function(e){return new u.Z(e,{contentType:r.default.CONTENT_TYPE_MARKDOWN})}(e);try{const e=await y(n,t);i.resolve(e)}catch(e){i.reject(e)}}if(s().isUndefined(n))throw new Error("Iframe not found");const o=await a;return await o.ready,n}function k(e){return t=e,c.default.markdown.render(t,{html:!0,footnote:!0,asString:!0},[],b).then((function(e){return e})).catch((function(e){e&&(console.error(e),l.Z.error("Unable to parse and render markdown"))}));var t}const P=async(e,t,n)=>v(await _(e),t,n),C=async e=>{const{currentProject:t}=o.default,n=(0,p.B5)(e,r.default.CONTENT_TYPE_MARKDOWN);try{if(e){let i;if(t.guides&&t.guides.metadata)i=s().keys(t.guides.metadata.publicParameters).filter((e=>s().includes(n||[],e))).map((e=>JSON.parse(t.guides.metadata.publicParameters[e])));else{i=(await(0,h.xE)()).filter((e=>s().includes(n||[],e.taskId))).map((e=>JSON.parse(e.parameters)))}i=s().pickBy(s().merge({},...i),((e,t)=>0===t.indexOf("public_"))),e=e&&!s().isEmpty(i)?a.Z.render(e,i):e}}catch({message:e}){console.error("Mustache template render failed",e)}return e},x={render:function(e,t,n,i,s){var a=k(i);return Promise.all([_(e,t),a,n,s]).then(w).then((function(e){s.isScrollReset&&(e.scroll=0)}))},updateIframeCss:P}},88009:(e,t,n)=>{"use strict";n.d(t,{Z:()=>H});var i=n(52308),s=n.n(i),a=n(96486),o=n.n(a),r=n(177),c=n.n(r),l=n(93443),d=n(9380);function u(e,t){return e.line>t.line||e.line===t.line&&e.ch>t.ch?{start:o().cloneDeep(t),end:o().cloneDeep(e)}:{end:o().cloneDeep(t),start:o().cloneDeep(e)}}class h{constructor(){}run(){throw new Error("Not implemented")}}class p extends h{constructor(e,t,n){super(),this.wrapperText=e,this.noSelectionText=t,o().isString(n)?this.rightWrapperText=n:this.rightWrapperText=e}run(e){this.doc=e,this.doc.somethingSelected()?this._wrapSelected():this._insertWithoutSelection()}_wrapSelected(){const e=this.doc.listSelections();e.reverse();const t=o().map(e,(e=>{const{start:t,end:n}=u(e.anchor,e.head),i=o().cloneDeep(t);i.ch=i.ch-this.wrapperText.length,i.ch<0&&(i.ch=0);const s=this.doc.getRange(i,t),a=o().cloneDeep(n);a.ch=a.ch+this.rightWrapperText.length;const r=this.doc.getRange(n,a);return s===this.wrapperText&&r===this.rightWrapperText?(this.doc.replaceRange("",n,a,"ribbon"),this.doc.replaceRange("",i,t,"ribbon"),t.ch=t.ch-this.wrapperText.length,t.line===n.line&&(n.ch=n.ch-this.rightWrapperText.length)):(this.doc.replaceRange(this.rightWrapperText,n,n,"ribbon"),this.doc.replaceRange(this.wrapperText,t,t,"ribbon"),t.ch=t.ch+this.wrapperText.length,t.line===n.line&&(n.ch=n.ch+this.rightWrapperText.length)),{anchor:t,head:n}}));this.doc.setSelections(t)}_insertWithoutSelection(){const e=this.doc.getCursor(),t=this.wrapperText+this.noSelectionText+this.rightWrapperText,n=o().cloneDeep(e);n.ch=n.ch+this.wrapperText.length;const i=o().cloneDeep(e);i.ch=i.ch+this.noSelectionText.length+this.rightWrapperText.length,this.doc.replaceRange(t,e,e,"ribbon"),this.doc.setSelection(n,i)}}class f extends p{constructor(){super("**","strong text")}}class m extends p{constructor(){super("*","emphasized text")}}class g extends p{constructor(){super("~~","strikethrough text")}}class b extends h{constructor(){super(),this.initialHeading="### "}run(e){this.doc=e,this.doc.somethingSelected()?this._wrapSelected():this._insertWithoutSelection()}_headingLevel(e){for(let t=0;t<e.length;t++){if("#"!==e[t])return 0;if(t<e.length-1&&" "===e[t+1])return t+1}return 0}_wrapSelected(){const e=this.doc.listSelections();e.reverse();const t=o().map(e,(e=>{const{start:t,end:n}=u(e.anchor,e.head),i=this.doc.getLine(t.line),s=this._headingLevel(i);if(s>0)return this._changeHeadingLevel(s,t,n);const a=this.doc.getRange(t,n).replace(/\n/g,"");return this._convertToHeader(t,n,a)}));this.doc.setSelections(t)}_convertToHeader(e,t,n){const i=o().cloneDeep(e),s=i.line>0||i.ch>0,a=e.line!==t.line;i.line=i.line+(s?1:0),i.ch=this.initialHeading.length;const r=(s?"\n":"")+this.initialHeading+n+(a?"\n":"");this.doc.replaceRange(r,e,t,"ribbon");const c=o().cloneDeep(i);return c.ch=r.length+4,{anchor:i,head:c}}_changeHeadingLevel(e,t,n){const i=1===e?2:1,s=this.doc.getRange({line:t.line,ch:i},n).replace(/\n/g,"");this.doc.replaceRange(s,{line:t.line,ch:0},n,"ribbon");const a=1===e?0:e;return{anchor:{line:t.line,ch:a},head:{line:t.line,ch:s.length}}}_insertWithoutSelection(){const e=this.doc.getCursor(),t=this.doc.getLine(e.line),n=this._headingLevel(t);let i;i=n>0?this._changeHeadingLevel(n,e,{line:e.line,ch:t.length}):this._convertToHeader(e,e,"Heading\n"),this.doc.setSelection(i.anchor,i.head)}}class v extends h{constructor(e,t){super(),this.insertText=e,this.relativeSelection=t}run(e){this.doc=e;const t=this.doc.getCursor(),n=e.getLine(t.line),i=t.line>0&&n.length||t.ch>0,s=(i?"\n":"")+this.insertText+"\n";if(this.doc.replaceRange(s,t,t,"ribbon"),this.relativeSelection){const{from:e,to:n}=this.relativeSelection;this.doc.setCursor({line:t.line,ch:e});const s=t.line+(i?1:0);this.doc.setSelection({line:s,ch:e},{line:s,ch:n})}}}class y extends h{constructor(e,t,n){super(),this.wrapperText=e,this.noSelectionText=t,o().isString(n)?this.rightWrapperText=n:this.rightWrapperText=e}run(e){this.doc=e,this.doc.somethingSelected()?this._wrapSelected():this._insertWithoutSelection()}_wrapSelected(){const e=this.doc.listSelections();e.reverse();const t=o().map(e,(e=>{const{start:t,end:n}=u(e.anchor,e.head),i=this.wrapperText.split("\n").length-1,s=o().cloneDeep(t);s.ch=0,s.line=s.line-1,s.line<0&&(s.line=0);const a=o().trim(this.doc.getRange(s,t)),r=o().cloneDeep(n);r.ch=this.rightWrapperText.length,r.line=r.line+1;const c=o().trim(this.doc.getRange(n,r));if(a===this.wrapperText&&c===this.rightWrapperText)this.doc.replaceRange("",n,r,"ribbon"),this.doc.replaceRange("",s,t,"ribbon"),t.ch=0,t.line=t.line-1,n.line=n.line-1;else{const e=t.line>0||t.ch>0,s=this.doc.getLine(n.line).length!==n.ch,a=(e?"\n":"")+this.wrapperText+"\n",o="\n"+this.rightWrapperText+(s?"\n":"");this.doc.replaceRange(o,n,n,"ribbon"),this.doc.replaceRange(a,t,t,"ribbon"),t.ch=0,t.line=t.line+1+(e?1+i:i),n.line=n.line+1+(e?1+i:i)}return{anchor:t,head:n}}));this.doc.setSelections(t)}_insertWithoutSelection(){const e=this.doc.getCursor(),t=e.line>0||e.ch>0,n=this.wrapperText.split("\n").length-1,i=this.doc.getLine(e.line).length!==e.ch,s=(t?"\n":"")+this.wrapperText+"\n"+this.noSelectionText+"\n"+this.rightWrapperText+(i?"\n":""),a=o().cloneDeep(e);a.ch=0,a.line=e.line+1+(t?1+n:n);const r=o().cloneDeep(a),c=this.noSelectionText.split("\n"),l=c[c.length-1];r.ch=l.length,r.line=r.line+c.length-1,this.doc.replaceRange(s,e,e,"ribbon"),this.doc.setSelection(a,r)}}class w extends h{constructor(){super(),this.simpleWrap=new p("`","code"),this.multiWrap=new y("```","","```")}run(e){this.doc=e;let t=this.simpleWrap;if(this.doc.somethingSelected()){const e=this.doc.getSelection();e&&-1!==e.indexOf("\n")&&(t=this.multiWrap)}else t=this.simpleWrap;t&&t.run(e)}}class _ extends h{constructor(){super(),this.quoteText="> ",this.noSelectionText="Blockquote"}run(e){this.doc=e,this.doc.somethingSelected()?this._wrapSelected():this._insertWithoutSelection()}_wrapSelected(){const e=this.doc.listSelections(),t=o().map(e,(e=>{const{start:t,end:n}=u(e.anchor,e.head);let i=!0;for(let e=t.line;e<=n.line;e++){const t=this.doc.getLine(e);if(!t||!o().startsWith(t,this.quoteText)){i=!1;break}}const s=this.doc.getRange(t,n);if(i){const e=s.replace(/> /g,"");return this.doc.replaceRange(e,{ch:0,line:t.line},n,"ribbon"),{anchor:{ch:0,line:t.line},head:{line:n.line,ch:n.ch-this.quoteText.length}}}{const e=t.line>0||t.ch>0,i=this.doc.getLine(n.line),a=n.ch!==i.length,o=(e?"\n":"")+this.quoteText+s.split("\n").join("\n"+this.quoteText)+(a?"\n":"");return this.doc.replaceRange(o,t,n,"ribbon"),{anchor:{ch:this.quoteText.length,line:t.line+(e?1:0)},head:{line:n.line+(e?1:0),ch:n.ch+this.quoteText.length}}}}));this.doc.setSelections(t)}_insertWithoutSelection(){const e=this.doc.getCursor(),t=e.line>0||e.ch>0,n=(t?"\n":"")+this.quoteText+this.noSelectionText+"\n";this.doc.replaceRange(n,e,e,"ribbon");const i=e.line+(t?1:0);this.doc.setSelection({line:i,ch:this.quoteText.length},{line:i,ch:this.quoteText.length+this.noSelectionText.length})}}var k=n(4942),P=n(49721),C=n(19575),x=n(34391),E=n(50276);const S=c().compile('<form action="/" method="post" class="form-horizontal" id="ribbon-modal-form">\n    <div class="ribbon-prompt-window">\n        {{#if usePicker}}\n        <button class="btn">\n            Pick an image...\n        </button>\n        <strong>\n            - or -\n        </strong>\n        {{/if}}\n        <input type="text" class="input-xlarge" autofocus placeholder="Provide an url..." />\n    </div>\n</form>\n');class I extends h{constructor(e){super(),this.title="Add an image",this.usePicker=e}async run(e){this.doc=e;try{const e=await this.getInputValue();if(o().isString(e))if(this.doc.somethingSelected()){const t=this.doc.listSelections(),n=o().map(t,(t=>{const{start:n,end:i}=u(t.anchor,t.head),s=this.doc.getRange(n,i).split("\n").join(" "),[a,o]=this.insertCommand(n,i,s,e);return{anchor:{line:n.line,ch:n.ch+a},head:{line:n.line,ch:n.ch+2+o.length}}}));this.doc.setSelections(n)}else{const t=this.doc.getCursor(),[n,i]=this.insertCommand(t,t,e,e);this.doc.setCursor({line:t.line,ch:t.ch}),this.doc.setSelection({line:t.line,ch:t.ch+n},{line:t.line,ch:t.ch+n+i.length})}}catch(e){}}filesFilter(e){return e}getInputValue(){let e=C.default.promise.deferred();const t=x.Z.showPrompt({doNotCloseOpened:!0,icon:null,content:S({usePicker:this.usePicker}),title:this.title,onHide:function(){e&&(e.reject(new Error("choose image cancelled")),e=null)},onClose:n=>{e&&(e.resolve(n&&t.content().find("input").val()),e=null)}});return t.content().find(".btn").click((n=>{n&&n.preventDefault(),E.Z.open((()=>{const e=P.default.currentProject.files({isCaseSensitive:!1,filesSeparate:!0});return o().filter(e,this.filesFilter)}),(n=>{e&&(e.resolve(n),e=null,t.close())}))})),e.promise}}class A extends I{constructor(){super(!0)}insertCommand(e,t,n,i){n===i&&(n="alt text");const s="![".concat(n,"](").concat(i,")");return this.doc.replaceRange(s,e,t,"ribbon"),[2,n]}filesFilter(e){let{name:t}=e;const n=t?t.split("."):[""],i=n[n.length-1].toLowerCase();return o().find(A.IMG_EXTENSIONS,(e=>e===i))}}(0,k.Z)(A,"IMG_EXTENSIONS",["png","apng","avif","gif","jpg","jpeg","jfif","pjpeg","pjp","svg","webp","bmp","ico","cur","tif","tiff"]);class T extends I{constructor(){super(),this.title="Add a link"}insertCommand(e,t,n,i){n===i&&(n="link text");const s="[".concat(n,"](").concat(i,")");return this.doc.replaceRange(s,e,t,"ribbon"),[1,n]}}class j extends h{constructor(e,t){super(),this.wrapperText=e,this.wrapperTextTrimmed=o().trim(this.wrapperText),this.noSelectionText=t}run(e){this.doc=e,this.doc.somethingSelected()?this._wrapSelected():this._insertWithoutSelection()}_wrapSelected(){const e=this.doc.listSelections();o().map(e,(e=>{const{start:t,end:n}=u(e.anchor,e.head);for(let e=t.line;e<=n.line;e++)this.toggleLine(e)}))}toggleLine(e){let t=this.doc.getLine(e);const n={line:e,ch:0};if(o().startsWith(t,this.wrapperText)){const t=this.wrapperText.length;return this.doc.replaceRange("",n,{line:e,ch:t},"ribbon"),!0}if(o().startsWith(t,this.wrapperTextTrimmed)){const t=this.wrapperTextTrimmed.length;return this.doc.replaceRange("",n,{line:e,ch:t},"ribbon"),!0}const i=t.length>0?"":this.noSelectionText;return this.doc.replaceRange(this.wrapperText+i,n,n,"ribbon"),!1}_insertWithoutSelection(){const e=this.doc.getCursor(),t=this.toggleLine(e.line),n=o().cloneDeep(e),i=o().cloneDeep(e);t||(n.ch=n.ch+this.wrapperText.length,i.ch=n.ch+this.noSelectionText.length),this.doc.setSelection(n,i)}}const Z=new RegExp("^[0-9]+. .*");class O extends j{constructor(e){super("1. ",o().isString(e)?e:"List item")}isList(e){return Z.test(e)}}const N=new RegExp("^- .*");class D extends j{constructor(e){super("- ",o().isString(e)?e:"List item")}isList(e){return N.test(e)}}class M{constructor(e,t){this.doc=e,this.editor=t,this.omitEvent=!1}needOmitEvent(){return this.omitEvent}somethingSelected(){const{selectionStartLineNumber:e,selectionStartColumn:t,positionLineNumber:n,positionColumn:i}=this.editor.getSelection();return e!==n||t!==i}setSelection(e,t){this.setSelections([{anchor:e,head:t}])}setSelections(e){const t=o().map(e,(e=>{let{anchor:t,head:n}=e;return{selectionStartColumn:t.ch+1,selectionStartLineNumber:t.line+1,positionColumn:n.ch+1,positionLineNumber:n.line+1}}));this.editor.setSelections(t)}setCursor(e){this.editor.setPosition({lineNumber:e.line+1,column:e.ch+1})}listSelections(){const e=this.editor.getSelections();return o().map(e,(e=>({anchor:{line:e.startLineNumber-1,ch:e.startColumn-1},head:{line:e.endLineNumber-1,ch:e.endColumn-1}})))}getSelection(){const e=this.listSelections();if(e.length)return this.getRange(e[0].anchor,e[0].head)}getLine(e){return this.doc.getLineContent(e+1)}getRange(e,t){return this.doc.getValueInRange({startLineNumber:e.line+1,startColumn:e.ch+1,endLineNumber:t.line+1,endColumn:t.ch+1})}getCursor(){const{lineNumber:e,column:t}=this.editor.getPosition();return{line:e-1,ch:t-1}}replaceRange(e,t,n){this.omitEvent=!0,this.doc.replaceRange(e,{lineNumber:t.line+1,column:t.ch+1},{lineNumber:n.line+1,column:n.ch+1}),this.omitEvent=!1}}const R=JSON.parse('{"openMediaSettings":"ribbon:media:open","recordAudioToFile":"ribbon:record-audio:path","generateContent":"ribbon:generate-content"}'),L=l.Z.create(R);class F extends h{constructor(){super()}run(){L.openMediaSettings()}}const B=l.Z.create(R);class U extends h{constructor(){super()}run(){B.generateContent()}}const q=c().compile('{{#if showActions}}\n<div class="ribbon-dropup">\n    <button class="ribbon-button ribbon-button-open" title="Open actions">\n        <span class="iconify-inline" data-icon="@codio:mdi:console"></span>\n        <i class="icon ss-icon icon-dropdown ss-pika ribbon-icon-dropdown" type="pika">dropdown</i>\n    </button>\n    <div class="ribbon-dropup-content ribbon-dropup-content--large">\n        <button class="ribbon-dropbtn" data-action="terminal">Open terminal</button>\n        <button class="ribbon-dropbtn" data-action="debugger">Open debugger</button>\n        <button class="ribbon-dropbtn" data-action="run">Run command/process{{#exists hotkeys.run}} ({{hotkeys.run}}){{/exists}}</button>\n        <button class="ribbon-dropbtn" data-action="goto">Go to page</button>\n        <button class="ribbon-dropbtn" data-action="restore">Restore files</button>\n    </div>\n</div>\n{{/if}}\n{{#if showPreview}}\n<div class="ribbon-dropup">\n    <button class="ribbon-button ribbon-button-preview" title="Preview actions">\n        <span class="iconify-inline" data-icon="@codio:mdi:eye"></span>\n        <i class="icon ss-icon icon-dropdown ss-pika ribbon-icon-dropdown" type="pika">dropdown</i>\n    </button>\n    <div class="ribbon-dropup-content">\n        <button class="ribbon-dropbtn" data-action="open-preview">Open preview</button>\n        <button class="ribbon-dropbtn" data-action="close-preview">Close preview</button>\n    </div>\n</div>\n{{/if}}\n{{#or showActions showPreview}}<div class="ribbon-separator"></div>{{/or}}\n<button class="ribbon-button ribbon-button-details" data-action="details" title="Details">\n    <span class="iconify-inline" data-icon="@codio:mdi:chevron-right"></span>\n</button>\n{{#if showBlocks}}\n<div class="ribbon-dropup">\n    <button class="ribbon-button ribbon-button-block">\n        <span class="iconify-inline" data-icon="@codio:mdi:alert-box-outline"></span>\n        <i class="icon ss-icon icon-dropdown ss-pika ribbon-icon-dropdown" type="pika">dropdown</i>\n    </button>\n    <div class="ribbon-dropup-content">\n        <button class="ribbon-dropbtn" data-action="important">Important</button>\n        <button class="ribbon-dropbtn" data-action="info">Info</button>\n        <button class="ribbon-dropbtn" data-action="warning">Warning</button>\n        <button class="ribbon-dropbtn" data-action="topic">Topic</button>\n        <button class="ribbon-dropbtn" data-action="definition">Definition</button>\n        <button class="ribbon-dropbtn" data-action="challenge">Challenge</button>\n        <button class="ribbon-dropbtn" data-action="guidance">Guidance</button>\n        <button class="ribbon-dropbtn" data-action="meetup">Meetup</button>\n        <button class="ribbon-dropbtn" data-action="hackathon">Hackathon</button>\n        <button class="ribbon-dropbtn" data-action="create">Create</button>\n        <button class="ribbon-dropbtn" data-action="calendar">Calendar</button>\n        <button class="ribbon-dropbtn" data-action="growthhack">Growthhack</button>\n        <button class="ribbon-dropbtn" data-action="xdiscipline">Xdiscipline</button>\n        <button class="ribbon-dropbtn" data-action="debugging">Debugging</button>\n    </div>\n</div>\n{{/if}}\n{{#if showTutor}}\n<div class="ribbon-dropup">\n    <button class="ribbon-button ribbon-button-tutor" title="Tutor actions">\n        <span class="iconify-inline" data-icon="@codio:mdi:binoculars"></span>\n        <i class="icon ss-icon icon-dropdown ss-pika ribbon-icon-dropdown" type="pika">dropdown</i>\n    </button>\n    <div class="ribbon-dropup-content">\n        <button class="ribbon-dropbtn" data-action="open-tutor">Open tutor</button>\n        <button class="ribbon-dropbtn" data-action="close-tutor">Close tutor</button>\n    </div>\n</div>\n<div class="ribbon-separator"></div>\n{{/if}}\n{{#if showFile}}\n<div class="ribbon-dropup">\n    <button class="ribbon-button ribbon-button-file" title="File actions">\n        <span class="iconify-inline" data-icon="@codio:mdi:file-document-multiple-outline"></span>\n        <i class="icon ss-icon icon-dropdown ss-pika ribbon-icon-dropdown" type="pika">dropdown</i>\n    </button>\n    <div class="ribbon-dropup-content">\n        <button class="ribbon-dropbtn" data-action="open-file">Open file</button>\n        <button class="ribbon-dropbtn" data-action="open-highlight">Open highlight</button>\n        <button class="ribbon-dropbtn" data-action="close-file">Close file</button>\n        <button class="ribbon-dropbtn" data-action="close-all">Close all</button>\n    </div>\n</div>\n{{/if}}\n<div class="ribbon-separator"></div>\n<button class="ribbon-button ribbon-button-b" data-action="b" title="Bold{{#exists hotkeys.bold}} ({{hotkeys.bold}}){{/exists}}">\n    <span class="iconify-inline" data-icon="@codio:mdi:format-bold"></span>\n</button>\n<button class="ribbon-button ribbon-button-i" data-action="i" title="Italic">\n    <span class="iconify-inline" data-icon="@codio:mdi:format-italic"></span>\n</button>\n<button class="ribbon-button ribbon-button-h" data-action="h" title="Heading">\n    <span class="iconify-inline" data-icon="@codio:mdi:format-header-pound"></span>\n</button>\n<button class="ribbon-button ribbon-button-s" data-action="s" title="Strikethrough">\n    <span class="iconify-inline" data-icon="@codio:mdi:format-strikethrough-variant"></span>\n</button>\n<div class="ribbon-separator"></div>\n<button class="ribbon-button ribbon-button-ul" data-action="ul" title="Unordered list{{#exists hotkeys.u_list}} ({{hotkeys.u_list}}){{/exists}}">\n    <span class="iconify-inline" data-icon="@codio:mdi:format-list-bulleted"></span>\n</button>\n<button class="ribbon-button ribbon-button-ol" data-action="ol" title="Ordered list{{#exists hotkeys.o_list}} ({{hotkeys.o_list}}){{/exists}}">\n    <span class="iconify-inline" data-icon="@codio:mdi:format-list-numbered"></span>\n</button>\n<button class="ribbon-button ribbon-button-table" data-action="table" title="Table">\n    <span class="iconify-inline" data-icon="@codio:mdi:table"></span>\n</button>\n<div class="ribbon-separator"></div>\n<button class="ribbon-button ribbon-button-quote" data-action="quote" title="Blockquote">\n    <span class="iconify-inline" data-icon="@codio:mdi:format-quote-close"></span>\n</button>\n<button class="ribbon-button ribbon-button-code" data-action="code" title="Code{{#exists hotkeys.code}} ({{hotkeys.code}}){{/exists}}">\n    <span class="iconify-inline" data-icon="@codio:mdi:code-tags"></span>\n</button>\n<button class="ribbon-button ribbon-button-link" data-action="link" title="Link">\n    <span class="iconify-inline" data-icon="@codio:mdi:link-variant"></span>\n</button>\n<button class="ribbon-button ribbon-button-img" data-action="img" title="Image">\n    <span class="iconify-inline" data-icon="@codio:mdi:image-search-outline"></span>\n</button>\n{{#if showMedia}}\n<div class="ribbon-separator"></div>\n<button class="ribbon-button ribbon-button-media" data-action="media" title="Media">\n    <span class="iconify-inline" data-icon="@codio:mdi:music-circle-outline"></span>\n</button>\n{{/if}}\n<button class="ribbon-button ribbon-button-record-audio" data-action="record-audio" title="Record audio">\n    <span class="iconify-inline" data-icon="@codio:mdi:record-voice-over"></span>\n</button>\n{{#if showGenerateContent}}\n<button class="ribbon-button ribbon-button-generate-content" data-action="generate-content" title="Generate content">\n    <span class="iconify-inline" data-icon="@codio:mdi:magic-staff"></span>\n</button>\n{{/if}}\n{{#if showUpload}}\n<button class="ribbon-button ribbon-button-upload-file" data-action="upload-file" title="Upload File">\n  <span class="iconify-inline" data-icon="@codio:mdi:file-upload-outline"></span>\n</button>\n{{/if}}\n');class H{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const a=o().merge({showActions:!0,showPreview:!0,showBlocks:!0,showTutor:!0,showFile:!0,showMedia:!0,showGenerateContent:!0,showUpload:!0},{hotkeys:this._ribbonHotkeys()},i),r=s()(q(a));this.container=e,this.doc=new M(t,n),this.container.empty().append(r),this.editor=n,this._initActions(),this._bindEvents(this.container),this._bindHotkeys()}_ribbonHotkeys(){const e="md_toolbar_",t=o().pickBy(d.Z.hotkey.compiledDescription().guides,((t,n)=>o().startsWith(n,e)));return o().reduce(t,((t,n,i)=>(n.key&&(t[i.replace(e,"")]=n.key),t)),{})}_bindEvents(e){const t=e=>{let t=s()(e.target).closest(".ribbon-button").data("action");t||(t=s()(e.target).data("action")),t&&this._actions[t]&&(this._actions[t].run(this.doc),this.editor&&this.editor.focus())};e.find(".ribbon-button").click(t),e.find(".ribbon-dropbtn").click(t),this._listenDoc()}_initActions(){this._enterActions=[new D(""),new O("")],this._actions={b:new f,i:new m,s:new g,h:new b,terminal:new v("{Button Text | terminal}(command)",{from:25,to:32}),debugger:new v("{Open debugger | debugger}(debugger_configuration_name)",{from:27,to:54}),run:new v("{Button Text}(command parameter1 parameter2 parameterN)",{from:14,to:54}),"record-audio":new v("{Button Text | record-audio}(filename.webm)",{from:29,to:42}),goto:new v("{Button Text | go-to-section-titled}(section title)",{from:37,to:50}),restore:new v("{Button text | reset}(optional commands to run)",{from:22,to:46}),quote:new _,table:new v("| Title 1 | Title 2  |\n|---------|----------|\n| Content | Content  |",{from:2,to:9}),"open-preview":new v("[Click here](open_preview filename.here panel=0)",{from:26,to:39}),"close-preview":new v("[Click here](close_preview filename.here)",{from:27,to:40}),"open-tutor":new v("[Click here](open_tutor filename.here panel=0)",{from:24,to:37}),"close-tutor":new v("[Click here](close_tutor filename.here)",{from:25,to:38}),"open-file":new v("[Click here](open_file filename.here panel=0)",{from:23,to:36}),"open-highlight":new v('[Click here](open_file filename.here panel=0 ref="some text in your code" count=3)',{from:23,to:36}),"close-file":new v("[Click here](close_file filename.here)",{from:24,to:37}),"close-all":new v("[Click here](close_all)"),info:new y("|||info","## My Title\n\nSome text","|||"),warning:new y("|||warning","## My Title\n\nSome text","|||"),topic:new y("|||topic","## My Title\n\nSome text","|||"),definition:new y("|||definition","## My Title\n\nSome text","|||"),challenge:new y("|||challenge","## My Title\n\nSome text","|||"),guidance:new y("|||guidance","## My Title\n\nSome text","|||"),meetup:new y("|||meetup","## My Title\n\nSome text","|||"),hackathon:new y("|||hackathon","## My Title\n\nSome text","|||"),create:new y("|||create","## My Title\n\nSome text","|||"),calendar:new y("|||calendar","## My Title\n\nSome text","|||"),growthhack:new y("|||growthhack","## My Title\n\nSome text","|||"),xdiscipline:new y("|||xdiscipline","## My Title\n\nSome text","|||"),debugging:new y("|||debugging","## My Title\n\nSome text","|||"),important:new y("|||important","## My Title\n\nSome text","|||"),code:new w,img:new A,link:new T,ul:new D,ol:new O,details:new y("<details>\n  <summary>\n     Header\n  </summary>","    Body","</details>"),media:new F,"generate-content":new U,"upload-file":new v("{Upload | upload-file}(path/optional)",{from:23,to:36})}}_bindHotkeys(){const e=e=>{this.editor.hasTextFocus()&&this._actions[e].run(this.doc)};this._handlers=[l.Z.subscribe("command:guides:md_toolbar_bold",(()=>e("b"))),l.Z.subscribe("command:guides:md_toolbar_italic",(()=>e("i"))),l.Z.subscribe("command:guides:md_toolbar_u_list",(()=>e("ul"))),l.Z.subscribe("command:guides:md_toolbar_o_list",(()=>e("ol"))),l.Z.subscribe("command:guides:md_toolbar_code",(()=>e("code"))),l.Z.subscribe("command:guides:md_toolbar_run",(()=>e("run")))]}_unbindHotkeys(){this._handlers&&l.Z.unsubscribe(this._handlers)}_listenDoc(){this.callback=this.editor.onDidChangeModelContent((e=>this._docUpdateHandler(e)))}swapDoc(e){this.callback&&this.callback.dispose(),this.doc=new M(e,this.editor),this._listenDoc()}hide(){this.container&&this.container.hide()}show(){this.container&&this.container.show()}clear(){this.callback&&this.callback.dispose(),this.container&&this.container.empty(),this._unbindHotkeys(),this._handlers=null}_docUpdateHandler(e){if(this.doc.needOmitEvent()||!e.changes||1!==e.changes.length||"\n"!==e.changes[0].text)return;const t=this.doc.getCursor(),n=this.doc.getLine(t.line),i=o().find(this._enterActions,(e=>e.isList(n)));i&&o().defer((()=>i.run(this.doc)))}}},51751:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>r});var i=n(96486),s=n.n(i),a=n(9380),o={};const r={set:function(e,t,n,i){var s=[e,t,n].join(":");o[s]={type:e,section:t,key:n,value:i}},get:function(e,t,n){return"user"===e?a.Z.getUser(t)[n]:a.Z.getProject(t)[n]},getCompiled:function(e){return a.Z.get("guides")[e]},commit:function(){var e=s().map(o,(function(e){return{type:e.type,plugin:e.section,key:e.key,value:e.value}}));a.Z.hotkey.execute("settings","updateMany",e),o={}}}},98670:(e,t,n)=>{"use strict";n.d(t,{Y:()=>o,w:()=>r});var i=n(52308),s=n.n(i),a=n(93443);const o=(e,t,n)=>{a.Z.on(e,"change.guides-settings",t,(function(){const t=e.find(n);s()(this).is(":checked")?t.removeClass("hide"):t.addClass("hide")}))},r=(e,t)=>{const n=e.find(t);return n.length>0?n.is(":checked"):void 0}},83668:(e,t,n)=>{"use strict";n.d(t,{e:()=>s,v:()=>i});const i={CONFIGURE_LAYOUT:"configure-layout",ASSESSMENTS:"assessments",GLOBAL:"global",MEDIA:"media",BLUEPRINTS:"blueprints"},s={"3-cell-left":"3-cell-guides-left"}},53425:(e,t,n)=>{"use strict";n.d(t,{GO:()=>y,H8:()=>v,KM:()=>A,Tj:()=>b,XA:()=>u,Y2:()=>m,Yv:()=>p,_6:()=>w,hO:()=>_,p4:()=>k,p8:()=>g,sW:()=>x,to:()=>h,vE:()=>f});var i=n(52308),s=n.n(i),a=n(96486),o=n.n(a),r=n(94036),c=n(83668),l=n(98670),d=n(96513);const u=(e,t)=>{const n=e.getLayout(t.id),i=c.e[n]||n,s=i.replace(/(-tree)?(-guides-left)?/g,""),a=h(n);return{files:t.actions,layout:s,showFileTree:o().includes(i,"-tree"),guidesOnLeft:o().includes(i,"-guides-left"),paths:t.paths,learningObjectives:t.learningObjectives,teacherOnly:t.teacherOnly,closeTerminalSession:t.closeTerminalSession,panelsData:a}},h=e=>{const t=w(e),n=v(e),i=k(e);return o().map(o().range(t),(e=>({panel:e,text:e===n?"Guides":"Panel ".concat(i[e])})))},p=(e,t,n)=>{const i=e&&t?"-tree":"",s=e&&"1-panel"!==e&&n?"-guides-left":"",a=o().isUndefined(e)?void 0:"".concat(e).concat(i).concat(s);return o().findKey(c.e,(e=>e===a))||a},f=e=>(0,l.w)(e,"#showFileTree"),m=e=>(0,l.w)(e,"#guidesOnLeft"),g=e=>e.find(".page-settings-layout-item-container.layout-active").data("layout"),b=e=>{const t=g(e);return p(t,(0,l.w)(e,"#showFileTree"),(0,l.w)(e,"#guidesOnLeft"))},v=e=>{const t=o().isString(e)?e:b(e);return t?r.Z[t].guidesPanel:0},y=e=>{const t=o().isString(e)?e:b(e);return t?r.Z[t].defaultFilesPanel:0},w=e=>{const t=o().isString(e)?e:b(e);return t?r.Z[t].panelsCount:1},_=e=>{const t=o().isString(e)?e:b(e),n=[];for(let e=0;e<r.Z[t].panelsCount;e++)e!==r.Z[t].guidesPanel&&n.push(e);return n},k=e=>{const t=o().isString(e)?e:b(e),n=_(t),i={};for(let e=0;e<n.length;e++)i[n[e]]=String.fromCharCode(65+e);return i},P=(e,t)=>{switch(t=o().trim(t),e){case d.Z.TYPE.FILE:return t;case d.Z.TYPE.PREVIEW:return"#preview: "+t;case d.Z.TYPE.TERMINAL:return"#terminal: "+t;case d.Z.TYPE.TUTOR:return"#tutor: "+t;case"highlight":return t;case d.Z.TYPE.VM:return"#vm: "+t;case d.Z.TYPE.VM_SSH:return"#vmssh: "+t;case d.Z.TYPE.VM_NESTED:return"#vmnested: "+t;case d.Z.TYPE.EARSKETCH:return"#earsketch: "+t;case d.Z.TYPE.JUPYTER_LAB:return"#jupyter-lab: "+t;case d.Z.TYPE.SANDBOX:return"#sandbox: ";default:throw new Error("Unknown type: "+e)}},C=(e,t)=>{const n=(e=s()(e)).find(".args input").val(),i=e.find("input.file-type").val(),a={action:"open",path:t?P(i,n):n,panel:parseInt(e.find(".panel select").val(),10)};return"highlight"===i&&(a.ref=e.find('input[name="ref"]').val(),a.lineCount=parseInt(e.find('input[name="line-count"]').val(),10)),"sandbox"===i&&(a.trackId=e.find('input[name="track"]').val(),a.sandboxId=e.find('input[name="sandbox"]').val()),isNaN(a.panel)&&delete a.panel,a},x=e=>C(e,!1),E=e=>C(e,!0),S=e=>o().map(e.find(".show-file-tree-list-item-text"),(e=>s()(e).text())),I=(e,t)=>{var n;const i=y(t),s=w(t);if(o().isEmpty(null===(n=e.media)||void 0===n?void 0:n.actions))return e.media;const a=e.media.actions.map((e=>(e.panel&&e.panel>s-1&&(e.panel=i),e)));return{...e.media,actions:a}},A=(e,t)=>{const n=(0,l.w)(t,"#showFileTree"),i=b(t),s=t.find("#learningObjectives").val(),a=(0,l.w)(t,"#close-all"),r=(0,l.w)(t,"#close-terminal-session"),c=(0,l.w)(t,"#teacher-only"),d=t.find("ul.files");return{layout:i,actions:d.length>0?o().map(d.children(),E):void 0,paths:n?S(t):[],isCloseAll:a,closeTerminalSession:r,teacherOnly:c,learningObjectives:s,media:I(e,i)}}},34335:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=n(88122)},88122:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>I,getBookState:()=>S,getCurrentEditorSectionId:()=>k,getStep:()=>_,getTeacherInitialStep:()=>C,resetState:()=>x,setBookState:()=>E,setCurrentEditorSectionId:()=>P,setStep:()=>w});var i=n(96486),s=n.n(i),a=n(49721),o=n(46544),r=n(68058),c=n(55637),l=n(55010),d=n(88228),u="codio-guides",h="step",p="step_teacher",f="book";const m="editor-section";var g=0,b=!1;async function v(e,t){var n=a.default.currentProject;if(!n)throw new Error("No Project");if(n.getPluginData(u)[e]!==t)return n.setPluginData(u,e,t)}async function y(e){var t=a.default.currentProject;if(!t)throw new Error("No Project");return t.getPluginData(u)[e]}const w=async function(e){return a.default.currentProject.readOnly?g=e:v(c.ZP.isTeacher()?p:h,e)},_=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;const t=a.default.currentProject.readOnly;let n=function(){const e=a.default.currentProject,{eduStartedAssignmentInfo:t}=e;let n,i=null;if(t&&t.started){const{assignmentId:n,assignee:a}=t.started,c=a.userId||a.groupId,l="section-".concat(n,"-").concat(c),d=r.I_.get(l);if(d){var o;const t=null===(o=e.guides)||void 0===o?void 0:o.metadata,n=(null==t?void 0:t.sections)||[],a=s().trim(d).toLowerCase(),r=s().find(n,(e=>s().trim(e.title).toLowerCase()===a));i=(null==r?void 0:r.id)||d}r.I_.remove(l)}if(!i)return-1;if(e.isBook&&!e.showAllBookPages){const t=l.Z.flatPages(e.guides.bookStructure.children),a=s().map(e.bookAssignmentPages,(function(e){const n=s().find(t,{id:e});if(void 0!==n)return n.pageId}));n=s().indexOf(a,i)}else{const t=e.guides&&e.guides.metadata,a=t&&t.sections||[];n=s().findIndex(a,{id:i})}return n}();n=-1!==n?n:e;let i=Promise.resolve();return-1!==n&&(i=w(n)),t?i.then((()=>g)):i.then((()=>y(c.ZP.isTeacher()?p:h)))},k=()=>(r.I_.get(m)||{})[a.default.currentProject.guid]||null,P=e=>{const t=r.I_.get(m)||{};t[a.default.currentProject.guid]=e,r.I_.set(m,t)},C=e=>{let t=e?(e=>{const t=a.default.currentProject,n=s()(e).filter((e=>d.ZP.isUngraded(e)&&e.source.points>0)).keyBy((e=>e.id)).mapValues((()=>!0)).value(),i=t.guides&&t.guides.metadata,o=i&&i.sections||[];return s().findIndex(o,(e=>s().some(e.assessmentIds,(e=>n[e]))))})(e):-1;return t=-1!==t?t:(()=>{const e=a.default.currentProject,t=e.guides&&e.guides.metadata,n=t&&t.sections||[];return s().findIndex(n,{teacherOnly:!1})})(),_(t)},x=function(e){var t=a.default.currentProject;if(!t)return Promise.reject(new Error("No Project"));var n=t.guid;return o.GQ(n,e).then((function(e){if("done"!==e)return Promise.reject(new Error(e))}))},E=function(e){if(!a.default.currentProject.readOnly)return v(f,e);b=e},S=async function(){return a.default.currentProject.readOnly?b:y(f)},I={setStep:w,getStep:_,resetState:x,setBookState:E,getBookState:S,getTeacherInitialStep:C,getCurrentEditorSectionId:k,setCurrentEditorSectionId:P}},79703:(e,t,n)=>{"use strict";n.d(t,{OK:()=>d,ZP:()=>u});var i=n(96486),s=n.n(i),a=n(96513),o=n(19575),r=n(94036);const c=function(e,t,n){let i=t.tab.panelNumber||t.defaultPanelNumber;var o=t.tab.content,r=t.tab.type;return s().findIndex(e.tabs,(function(t){return n&&r===a.Z.TYPE.TERMINAL?r===t.type:s().isUndefined(i)?o===t.content&&r===t.type:o===t.content&&r===t.type&&i===(s().isUndefined(t.panelNumber)?e.defaultPanelNumber:t.panelNumber)}))},l=function(e,t){var n={toOpen:[],toClose:[]};const i=e.tabs,a=t.tabs;return s().forEach(i,(function(i){-1===c({tabs:a,defaultPanelNumber:t.defaultPanelNumber},{tab:i,defaultPanelNumber:e.defaultPanelNumber})&&n.toClose.push(i)})),s().forEach(a,(function(e){n.toOpen.push(e)})),n},d=a.Z,u={findIndex:c,execute:function(e,t,n){var i=new a.Z(t.type,t.content,e.panel);"open"===e.action?i.open(n):i.close(n).catch(o.default.error.checkErrorForIgnore)},diffTabs:l,buildMap:function(e,t,n){var i=e.getSectionTabs(t),s=e.getSectionTabs(n);const a=e.getLayout(t),o=e.getLayout(n);return l({tabs:i.ide,defaultPanelNumber:r.Z[a].defaultFilesPanel},{tabs:s.ide,defaultPanelNumber:r.Z[o].defaultFilesPanel})},Tab:d}},21384:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(96486),s=n.n(i),a=n(55537);function o(e,t){var n=t.panelNumber,i=t.content,a=t.type;return s().find(e,{content:i,type:a,panelNumber:n})}const r={filterTabs:function(e,t){return s().filter(e,(function(e){return s().includes(t,e.type)}))},mergeTabs:function(e,t,n){var i=s().clone(e);return s().each(t,(function(e){var t=o(i,e);s().isUndefined(t)||i.splice(t,1),i.push(e)})),s().each(n,(function(e){for(;;){var t=o(i,e);if(s().isUndefined(t))break;i.splice(t,1)}})),i},convertTabDataToAction:function(e){var t="file"===e.type?"":"#"+e.type+":";return new a.Z({action:e.action,panel:e.panelNumber,path:t+" "+e.content})}}},96513:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var i=n(96486),s=n.n(i),a=n(49721),o=n(19575);function r(e,t){s().defer((function(){a.default.currentProject.temporaryDisableProtectLayout();var n=e.content,i=e.type,r=e.panel;switch(i){case d.TYPE.FILE:return function(e,t,n,i){t=s().trim(t),s().defer((()=>{a.default.currentProject.temporaryDisableProtectLayout(),a.default.currentProject.exists(t)&&a.default.ide.open("tree",t,{panel:e,highlight:{ref:n.ref,count:n.lineCount},noFocus:i})}))}(r,n,e.options,t);case d.TYPE.PREVIEW:return function(e,t,n){0===(t=s().trim(t)).length&&(t="/"),a.default.ide.open("preview",t,{panel:e,noWarning:!0,noFocus:n})}(r,n,t);case d.TYPE.TERMINAL:return function(e,t,n,i){e.isCloseAll&&l(t,"terminal","backend-guide").catch(o.default.error.checkErrorForIgnore);var r=a.default.ide.open("terminal","backend-guide",{panel:t,view:"backend",noFocus:i});(n=s().trim(n)).length>0&&r.then((e=>{e&&e.extension.then((e=>e.ready().then((()=>e.terminal.terminal.exec({cmd:n,noFocus:i}))).catch((()=>{}))))}))}(e,r,n,t);case d.TYPE.TUTOR:return function(e,t,n){a.default.ide.open("tutor",t,{panel:e,noFocus:n})}(r,n,t);case d.TYPE.VM:return function(e,t,n){a.default.ide.open("virtual-machines",t,{panel:e,noFocus:n,title:"VM"})}(r,n,t);case d.TYPE.VM_SSH:return function(e,t,n){a.default.ide.open("virtual-machines-ssh",t,{panel:e,noFocus:n,title:"VM Terminal"})}(r,n,t);case d.TYPE.VM_NESTED:return function(e,t,n){a.default.ide.open("virtual-machines-nested",t,{panel:e,noFocus:n,title:"Cyber Range"})}(r,n,t);case d.TYPE.EARSKETCH:return function(e,t,n){a.default.ide.open("earsketch",t,{panel:e,noFocus:n,title:"Earsketch"})}(r,n,t);case d.TYPE.JUPYTER_LAB:return function(e,t,n){a.default.ide.open("jupyter-lab",t,{panel:e,noFocus:n,title:"Jupyter Lab"})}(r,n,t);case d.TYPE.SANDBOX:return function(e,t,n,i){t&&n&&a.default.ide.open("sandbox","".concat(t,"|").concat(n),{panel:e,noFocus:i,title:"Sandbox"})}(r,e.options.trackId,e.options.sandboxId,t)}}))}async function c(e,t){a.default.currentProject.temporaryDisableProtectLayout();var n=e.panel;switch(e.type){case d.TYPE.FILE:return l(n,"tree",e.content,t);case"cmd":return;case d.TYPE.TERMINAL:return l(n,"terminal","backend-guide");case d.TYPE.VM:return l(n,"virtual-machines");case d.TYPE.VM_SSH:return l(n,"virtual-machines-ssh");case d.TYPE.VM_NESTED:return l(n,"virtual-machines-nested");case d.TYPE.PREVIEW:return function(e,t){t&&0!==t.length||(t="/");return l(e,"preview",decodeURIComponent(t))}(n,e.content);case d.TYPE.TUTOR:return l(n,"tutor",e.content);case d.TYPE.EARSKETCH:return l(n,"earsketch");case d.TYPE.JUPYTER_LAB:return l(n,"jupyter-lab");case d.TYPE.TABS:case"tabs":return function(e){var t=["filetree","guides","guides-edit"];if(s().isUndefined(e))return a.default.ide.panels.closeAllTabs(t);return e.closeAllTabs(t)}(void 0===e.panelNumber?void 0:n)}}async function l(e,t,n,i){var o;if(!e){const e=a.default.ide.panels.getAllOpened(n,t),o=s().map(e,(e=>e.panel.closeTab(e,i)));return Promise.all(o)}return(o=e.isOpen(n,t))?e.closeTab(o,i):(o=a.default.ide.panels.isOpen(n,t))?o.panel.closeTab(o,i):void 0}var d=function(e,t,n,i){this._type=function(e){switch(e){case"all":return d.TYPE.TABS;case"cmd":return d.TYPE.TERMINAL;default:return e}}(e),this._content=t,this._panelNumber=n,this._options=i||{}},u=d.prototype;u.open=function(e,t){this.panel=e(this.panelNumber),r(this,t)},u.close=function(e,t){return this.panel=e(this.panelNumber),c(this,t)},Object.defineProperty(u,"type",{get:function(){return this._type}}),Object.defineProperty(u,"content",{get:function(){return this._content}}),Object.defineProperty(u,"panelNumber",{get:function(){return this._panelNumber},set:function(e){this._panelNumber=e}}),Object.defineProperty(u,"options",{get:function(){return this._options},set:function(e){this._options=e}}),Object.defineProperty(u,"isCloseAll",{get:function(){return!0===this._isCloseAll},set:function(e){this._isCloseAll=e}}),d.TYPE={TERMINAL:"terminal",FILE:"file",PREVIEW:"preview",TUTOR:"tutor",TABS:"tabs",VM:"vm",VM_SSH:"vmssh",VM_NESTED:"vmnested",EARSKETCH:"earsketch",JUPYTER_LAB:"jupyter-lab",SANDBOX:"sandbox"};const h=d},51442:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var i=n(96486),s=n.n(i),a=n(28893),o=n(85886),r=n(51751);var c=n(87677);var l=n(19575);let d=c;l.RO&&(d="pre code.hljs{display:block;overflow-x:auto;padding:1em}code.hljs{padding:3px 5px}.hljs{color:#efb752;background:#141d28}.hljs-keyword,.hljs-link,.hljs-literal,.hljs-section,.hljs-selector-tag{color:#efb752}.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-bullet,.hljs-name,.hljs-string,.hljs-symbol,.hljs-template-tag,.hljs-template-variable,.hljs-title,.hljs-type,.hljs-variable{color:#50fa7b}.hljs-comment,.hljs-deletion,.hljs-meta,.hljs-quote{color:#f0b752}.hljs-doctag,.hljs-keyword,.hljs-literal,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-strong,.hljs-title,.hljs-type{font-weight:700}.hljs-emphasis{font-style:italic}");const u=["@import url('https://fonts.googleapis.com/css?family=Nunito+Sans:300,300i,700,700i&subset=latin-ext,vietnamese');\n\n.body {\n  height: 100%;\n  padding-bottom: 1px;\n}\n\n.codio-assessment-name {\n  font-size: 150%;\n  max-width: 80%;\n}\n\n.codio-assessment-guidance-container {\n  padding: 0.5em;\n  margin-bottom: 1em;\n  background-color: #e4efe4;\n  border: 1px #d6ded6 solid;\n  border-radius: 3px;\n}\n\n.codio-assessment-guidance-title {\n  margin: 0;\n}\n\n.codio-assessment-guidance-text {\n  font-size: 90%;\n}\n\n.codio-button-result.hide {\n  display: none;\n}\n\n.codio-button-result {\n  font-size: 100%;\n}\n\n.codio-assessment-last-run {\n  font-size: 70%;\n}\n\n.codio-assessment-last-run span {\n  color: #888;\n}\n\n.codio-button-disabled {\n  cursor: default;\n  opacity: 0.5;\n}\n\n.codio-button.codio-button-type-assessment {\n  text-shadow: none;\n  border-radius: 2px;\n  text-transform: none;\n}\n\n.codio-button.codio-button-type-assessment-reset,\n.codio-button.codio-button-type-assessment-modify {\n  margin-left: 10px;\n  text-transform: none;\n}\n\n.codio-button.codio-button-type-assessment-validate {\n  margin-right: 10px;\n  text-transform: none;\n}\n\n.codio-math-progress {\n  margin-left: 10px;\n  display: inline-block;\n  position: relative;\n  top: 5px;\n}\n\n.codio-assessment-instructions-fieldset {\n  min-width: 0;\n  border: 0;\n}\n\n.codio-assessment-instructions-legend {\n  max-width: 100%;\n  float: left;\n}\n\n/* Radio buttons*/\n\n.codio-button-type-assessment-multiple-radio {\n  padding-top: 0px;\n  margin: 1em 0;\n  clear: both;\n}\n.codio-button-type-assessment-multiple-radio:first-of-type {\n  margin-top: 1em;\n}\n\n.codio-button-type-assessment-multiple-radio:last-of-type {\n  margin-bottom: 1em;\n}\n\n.codio-button-type-assessment-multiple-radio input {\n  position: absolute;\n  opacity: 0;\n}\n\n.codio-button-type-assessment-multiple-radio input:focus+label {\n  outline: 2px auto Highlight;\n  position: relative;\n}\n\n.codio-button-type-assessment-multiple-radio label {\n  display: block;\n}\n\n.codio-button-type-assessment-multiple-radio label i {\n  background-color: rgba(204, 0, 102, 0);\n  border: 2px solid #aaadbd;\n  height: 14px;\n  width: 14px;\n  border-radius: 12px;\n  content: '';\n  display: inline-block;\n  position: absolute;\n  transition: border 0.3s ease-in-out;\n  margin-top: 2px;\n}\n\n.codio-button-type-assessment-multiple-radio:hover label i {\n  border: 2px solid #797d92;\n  cursor: pointer;\n}\n\n.codio-button-type-assessment-multiple-radio label i::before {\n  height: 10px;\n  width: 10px;\n  border-radius: 10px;\n  content: '';\n  display: inline-block;\n  margin-left: 2px;\n  margin-top: 2px;\n}\n\n.codio-button-type-assessment-multiple-radio.codio-assessment-multiple-done:hover label i {\n  border: 2px solid #848db3;\n}\n\n.codio-button-type-assessment-multiple-radio input:checked + label i {\n  border: 2px solid #797d92;\n}\n\n.codio-button-type-assessment-multiple-radio input:checked + label i::before {\n  background-color: #797d92;\n  border-radius: 50%;\n  content: '';\n}\n\n.codio-button-type-assessment-multiple-radio.codio-assessment-multiple-ok:hover input:checked + label i,\n.codio-button-type-assessment-multiple-radio.codio-assessment-multiple-ok input:checked + label i,\n.codio-button-type-assessment-multiple-radio.codio-assessment-multiple-ok:hover label i,\n.codio-button-type-assessment-multiple-radio.codio-assessment-multiple-ok label i {\n  border: 2px solid #71b380;\n}\n\n.codio-button-type-assessment-multiple-radio input:checked + label i::before,\n.codio-button-type-assessment-multiple-radio label i::before {\n  background-size: 140%;\n  background-position: center;\n}\n\n.codio-button-type-assessment-multiple-radio.codio-assessment-multiple-ok input:checked + label i::before,\n.codio-button-type-assessment-multiple-radio.codio-assessment-multiple-ok label i::before {\n  background-color: #71b380;\n  border-color: #71b380;\n  background-image: url(\"https://static-assets.codio.com/client/assets/images/guides/checkmark.6db2a12b0f346905.svg\");\n}\n\n.codio-button-type-assessment-multiple-radio.codio-assessment-multiple-wrong:hover input:checked + label i,\n.codio-button-type-assessment-multiple-radio.codio-assessment-multiple-wrong input:checked + label i {\n  border: 2px solid #da8181;\n}\n\n.codio-button-type-assessment-multiple-radio.codio-assessment-multiple-wrong input:checked + label i::before {\n  background-color: #da8181;\n  border-color: #da8181;\n  background-image: url(\"https://static-assets.codio.com/client/assets/images/guides/remove_white.5b6a90457c6a25e7.svg\");\n}\n\n.codio-button-type-assessment-multiple-radio.codio-assessment-multiple-wrong input:checked + label i::after,\n.codio-button-type-assessment-multiple-radio.codio-assessment-multiple-ok input:checked + label i::after,\n.codio-button-type-assessment-multiple-radio.codio-assessment-multiple-ok label i::after {\n  color: #fff;\n  position: relative;\n  top: -10px;\n  font-style: normal;\n  font-size: 8px;\n  left: 3px;\n}\n\n\n.codio-challenge a.codio-assessment-disabled {\n  cursor: not-allowed;\n}\n\n/* Checkboxes*/\n\n.codio-button-type-assessment-multiple-checkbox {\n  padding-top: 0px;\n  margin: 1em 0;\n  clear: both;\n}\n\n.codio-button-type-assessment-multiple-checkbox:first-of-type {\n  margin-top: 1em;\n}\n\n.codio-button-type-assessment-multiple-checkbox:last-of-type {\n  margin-bottom: 1em;\n}\n\n.codio-button-type-assessment-multiple-checkbox input {\n  position: absolute;\n  opacity: 0;\n}\n\n.codio-button-type-assessment-multiple-checkbox input:focus+label {\n  outline: 2px auto Highlight;\n  position: relative;\n}\n\n.codio-button-type-assessment-multiple-checkbox label i {\n  background-color: #aaadbd;\n  border: 1px solid #aaadbd;\n  border-radius: 2px;\n  height: 12px;\n  width: 12px;\n  padding: 4px;\n  content: '';\n  display: inline-block;\n  margin-right: 10px;\n  position: absolute;\n  top: 1px;\n  left: 2px;\n}\n\n.codio-button-type-assessment-multiple-checkbox label {\n  display: block;\n  position: relative;\n}\n\n.codio-button-type-assessment-multiple-checkbox label i {\n  transition: background-color 0.3s ease-in-out;\n}\n\n.codio-button-type-assessment-multiple-checkbox:hover label i {\n  background-color: #797d92;\n}\n\n.codio-button-type-assessment-multiple-checkbox.codio-assessment-multiple-done:hover label i {\n  background-color: #797d92;\n}\n\n.codio-button-type-assessment-multiple-checkbox input:checked + label i {\n  background-image: url(\"https://static-assets.codio.com/client/assets/images/guides/checkmark.6db2a12b0f346905.svg\");\n  background-size: contain;\n  background-color: #797d92;\n  background-position: center;\n}\n\n.codio-button-type-assessment-multiple-checkbox label i::before {\n  height: 20px;\n  width: 20px;\n  border-radius: 10px;\n  content: '';\n  display: inline-block;\n  margin-left: -35px;\n  margin-top: -4px;\n  background-position: center;\n}\n\n.codio-button-type-assessment-multiple-checkbox.codio-assessment-multiple-ok input:checked + label i::before,\n.codio-button-type-assessment-multiple-checkbox.codio-assessment-multiple-ok label i::before {\n  background-image: url(\"https://static-assets.codio.com/client/assets/images/guides/checkmark.6db2a12b0f346905.svg\");\n  background-color: #71b380;\n}\n\n.codio-button-type-assessment-multiple-checkbox.codio-assessment-multiple-wrong input:checked + label i::before,\n.codio-button-type-assessment-multiple-checkbox.codio-assessment-multiple-wrong label i::before {\n  background-image: url(\"https://static-assets.codio.com/client/assets/images/guides/remove_white.5b6a90457c6a25e7.svg\");\n  background-color: #da8181;\n}\n\n.codio-button-type-assessment-multiple-answer {\n  margin: 0;\n  padding-left: 30px;\n  clear: both;\n}\n\n.codio-button-type-assessment-multiple-answer .p-tag {\n  margin: 0;\n}\n\n/* Fill in the blanks */\n\n.codio-fill-in-the-blanks {\n  margin-bottom: 2em;\n}\n\n.codio-fill-in-the-blanks .p-tag > div {\n  display: inline-flex !important;\n  flex-wrap: wrap;\n  align-items: center;\n}\n\n.codio-fib-simple-wrapper {\n  display: inline-flex;\n}\n\n.codio-fib-simple-wrapper p {\n  margin: 2px 0;\n}\n\n/* eFIB */\n\n.codio-assessment-ecornell-fib-extra-feedback-correct {\n  border: 2px solid #71b380;\n  background-color: rgba(204, 0, 102, 0);\n  height: 14px;\n  width: 14px;\n  border-radius: 12px;\n  content: '';\n  display: inline-block;\n  transition: border 0.3s ease-in-out;\n  margin-top: 4px;\n  margin-left: 2px;\n}\n\n.codio-assessment-ecornell-fib-extra-feedback-correct::after {\n  background-image: url(\"https://static-assets.codio.com/client/assets/images/guides/checkmark.6db2a12b0f346905.svg\");\n  background-color: #71b380;\n  border-radius: 10px;\n  width: 10px;\n  height: 10px;\n  display: block;\n  content: '';\n  margin-left: 2px;\n  margin-top: 2px;\n  margin-right: 2px;\n}\n\n.codio-assessment-ecornell-fib-extra-feedback-wrong {\n  border: 2px solid #da8181;\n  background-color: rgba(204, 0, 102, 0);\n  height: 14px;\n  width: 14px;\n  border-radius: 12px;\n  content: '';\n  display: inline-block;\n  transition: border 0.3s ease-in-out;\n  position: relative;\n  top: 4px;\n  left: 2px;\n  margin-right: 2px;\n}\n\n.codio-assessment-ecornell-fib-extra-feedback-wrong::after {\n  background-image: url(\"https://static-assets.codio.com/client/assets/images/guides/remove_white.5b6a90457c6a25e7.svg\");\n  background-color: #da8181;\n  border-radius: 10px;\n  width: 10px;\n  height: 10px;\n  display: block;\n  content: '';\n  margin-left: 2px;\n  margin-top: 2px;\n}\n\n/* select */\n\n.codio-fib-select {\n  display: inline-grid;\n  margin: 1px 5px;\n}\n\n.fib-react-select__control {\n  min-height: auto;\n  border: 1px solid #898989;\n}\n\n.fib-react-select__value-container {\n  padding: 0 8px;\n}\n\n.fib-react-select__input {\n  margin: 0 2px;\n}\n\n.fib-react-select__placeholder,\n.fib-react-select__single-value {\n  transform: none;\n  position: relative;\n  line-height: 1.2em;\n  max-width: calc(100% - 4px);\n  min-width: 50px;\n}\n\n.fib-react-select__single-value p {\n  margin: 2px 0;\n}\n\n.fib-react-select__input {\n  padding: 0;\n}\n\n.fib-react-select__indicator {\n  padding: 0;\n}\n\n.fib-react-select__indicator-separator {\n  margin-top: 4px;\n  margin-bottom: 4px;\n}\n\n.fib-react-select__menu {\n  white-space: nowrap;\n  width: auto;\n  font-size: 0.9em;\n  font-family: 'Nunito Sans', sans-serif;\n}\n\n.fib-react-select__menu-list p {\n  margin: 0;\n}\n\n.fib-react-select__menu-list .fib-react-select__option {\n  padding-top: 4px;\n  padding-bottom: 4px;\n  min-width: 90px;\n}\n\n/*   simple */\n\n.codio-fib-simple-input {\n  font-family: 'Nunito Sans';\n  font-weight: 300;\n  font-size: 1em;\n  display: inline-block;\n  padding: 0 .2em;\n  background-color: #eceff6;\n  border-radius: 2px;\n  line-height: 1.3em;\n  border: 1px solid #898989;\n}\n\n.codio-fib-simple-input:focus {\n  outline: none;\n}\n\n.codio-fill-in-the-blanks .codio-md-line {\n  margin: 0;\n  line-height: 1.4em;\n}\n\n.codio-assessment-fib-ok,\n.codio-assessment-fib-wrong {\n  border-radius: 2px;\n}\n.codio-assessment-fib-ok {\n  background-color: #cfecd6;\n  border: 1px solid #cfecd6;\n}\n\n.codio-assessment-ecornell-fib-incorrect-entry {\n  border: 2px solid #ff9999;\n}\n\n.codio-assessment-fib-wrong {\n  background-color: #ff9999;\n  border: 1px solid #ff9999;\n  text-decoration: line-through;\n}\n\ntable th {\n  text-align: left;\n}\n\n/* Grade book */\n.codio-assessment-grade-book .codio-assessment-textarea {\n  width: 100%;\n  min-height: 100px;\n}\n\n.codio-assessment-grade-book .codio-helpBlock {\n  background-color: #ffffff;\n  padding: 20px;\n}\n\n/* Tree text */\n.codio-assessment-free-text .codio-assessment-textarea {\n  width: 100%;\n  min-height: 100px;\n}\n\n.codio-assessment-free-text .codio-assessment-content {\n  margin-bottom: 20px;\n}\n\n.codio-assessment-free-text .codio-helpBlock {\n  padding: 20px;\n  background-color: #ffffff;\n  margin-right: 0;\n}\n\n\n/* Tree text auto */\n.codio-assessment-free-text-auto .codio-assessment-textarea {\n  width: 100%;\n  min-height: 100px;\n}\n\n.codio-assessment-free-text-auto .codio-assessment-content {\n  margin-bottom: 20px;\n}\n\n.codio-assessment-free-text-auto .codio-helpBlock {\n  padding: 20px;\n  background-color: #e4edef;\n  margin-right: 0;\n  overflow: auto;\n}\n\n.codio-assessment-free-text-auto .codio-output {\n  max-height: 250px;\n}\n\n/* grade details - rubrics */\n.codio-rubricInfo-item {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n}\n\n.codio-rubricInfo {\n  line-height: 22px;\n  padding-top: 10px;\n}\n\n.codio-rubricInfo-posNumber,\n.codio-rubricInfo-negNumber {\n  font-weight: 600;\n  padding-right: 10px;\n}\n\n.codio-rubricInfo-posNumber {\n  color: #008000;\n}\n\n.codio-rubricInfo-negNumber {\n  color: #ff0000;\n}\n\ntextarea {\n  font-family: inherit;\n  font-size: inherit;\n}\n\n.codio-assessment-math-stack input {\n  font-size: 0.9em;\n}\n\n.codio-assessment-math-stack .MathJax {\n  font-size: 1.5em;\n}\n\n.stackpartmark {\n  font-weight: bold;\n}\n\n.toggle {\n  position: relative;\n  display: inline-block;\n  vertical-align: top;\n  width: 30px;\n  height: 15px;\n  padding: 0;\n  background-color: #d5dae6;\n  border-radius: 10px;\n  cursor: pointer;\n  margin: 4px 5px 0 0;\n}\n\n.toggle input[type=checkbox] {\n  float: none;\n  position: absolute;\n  top: 0;\n  left: 0;\n  opacity: 0;\n}\n\n.toggle .toggle-label {\n  position: relative;\n  display: block;\n  height: inherit;\n  font-size: 14px;\n  text-transform: uppercase;\n  background: #A8B2C4;\n  border-radius: inherit;\n}\n\n.toggle .toggle-label:before,\n.toggle .toggle-label:after {\n  position: absolute;\n  top: 50%;\n  margin-top: -5px;\n  line-height: 1;\n  color: white;\n}\n\n.toggle input[type=checkbox]:checked ~ .toggle-label {\n  background: #4294f0;\n}\n\n.toggle input[type=checkbox]:checked ~ .toggle-label:before {\n  opacity: 0;\n}\n\n.toggle input[type=checkbox]:checked ~ .toggle-label:after {\n  opacity: 1;\n}\n\n.toggle input[type=checkbox]:disabled ~ .toggle-label {\n  background: #ffffff;\n}\n\n.toggle input[type=checkbox]:checked ~ .toggle-handle {\n  left: 16px;\n}\n\n.toggle .toggle-handle {\n  position: absolute;\n  top: 3px;\n  left: 3px;\n  width: 11px;\n  height: 11px;\n  background: #ffffff;\n  border-radius: 10px;\n}\n\n.codio-assessment-free-text-preview {\n  margin-bottom: 5px;\n}\n\n.codio-downArrow:before {\n  position: relative;\n  display: inline-block;\n  content: '';\n  border-left: 10px solid transparent;\n  border-top: 10px solid #555;\n  border-right: 10px solid transparent;\n  left: 5px;\n  top: 3px;\n}\n\n.codio-downArrow:after {\n  position: relative;\n  display: inline-block;\n  content: '';\n  border-left: 9px solid transparent;\n  border-top: 9px solid #fff;\n  border-right: 9px solid transparent;\n  left: -14px;\n  top: 0px;\n}\n\n.codio-upArrow:before {\n  position: relative;\n  display: inline-block;\n  content: '';\n  border-left: 10px solid transparent;\n  border-bottom: 10px solid #555;\n  border-right: 10px solid transparent;\n  left: 5px;\n  top: 3px;\n}\n\n.codio-upArrow:after {\n  position: relative;\n  display: inline-block;\n  content: '';\n  border-left: 9px solid transparent;\n  border-bottom: 9px solid #fff;\n  border-right: 9px solid transparent;\n  left: -14px;\n  top: 5px;\n}\n\n.codio-collapseArrow {\n  float: right;\n  margin-top: 10px;\n}\n\n.codio-assessment-parsons-puzzle .sortable-code {\n  float: none;\n}\n\n.codio-assessment-parsons-puzzle .sortable-code li {\n  white-space: pre-wrap;\n}\n\n.codio-assessment-parsons-puzzle .sortable-code ul,\n.codio-assessment-parsons-puzzle .testcase .output {\n  font-size: inherit;\n}\n\n.codio-assessment-parsons-puzzle .code-container {\n  position: relative;\n}\n\n.codio-assessment-parsons-puzzle .block-actions {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  opacity: 0.3;\n  background-color: #fff;\n  z-index: 1000;\n  cursor: default !important;\n}\n\n.codio-assessment-parsons-puzzle .model-canvas {\n  cursor: pointer;\n}\n\n.codio-assessment-random .tags-list {\n  margin: 10px 0;\n}\n\n.codio-button-expand {\n  background-image: url('https://static-assets.codio.com/client/assets/images/guides/expand.6d2f59c6f9914010.svg');\n  background-position: center;\n  background-repeat: no-repeat;\n  background-color: transparent;\n  background-size: contain;\n  position: absolute;\n  top: 20px;\n  right: 20px;\n  cursor: pointer;\n  height: 20px;\n  width: 20px;\n  border: none;\n}\n\n.codio-assessment-iframe {\n  border: none;\n}\n\n/* llm based rubric */\n.codio-assessment-llm-evaluation {\n  display: flex;\n  margin-bottom: 10px;\n}\n\n.codio-assessment-llm-evaluation-criterion {\n  font-weight: bold;\n}\n\n.codio-assessment-llm-evaluation-score {\n  flex: 0 0 30px;\n}\n\n.codio-assessment-llm-evaluation-score-input {\n  margin-top: 8px;\n}\n\n.codio-assessment-llm-evaluation-info {\n  flex: 1 1 auto;\n}\n\n.codio-assessment-llm-evaluation-feedback-textarea {\n  width: 100%;\n}\n",'/* Codio Blocks */\n\n.codio-warning::before,\n.codio-definition::before,\n.codio-important::before,\n.codio-topic::before,\n.codio-challenge::before,\n.codio-info::before,\n.codio-curiculum::before,\n.codio-guidance::before,\n.codio-meetups::before,\n.codio-headline::before,\n.codio-hackathon::before,\n.codio-create::before,\n.codio-calendar::before,\n.codio-growthhack::before,\n.codio-debugging::before,\n.codio-xdiscipline::before {\n  background-image: url("https://static-assets.codio.com/client/assets/images/guides/blocks/quote.037a8047d34b0cc0.svg");\n  position: absolute;\n  content: \' \';\n  margin-left: -110px;\n  margin-top: 15px;\n  background-repeat: no-repeat;\n  width: 71px;\n  height: 71px;\n}\n\n.codio-important::before {\n  background-image: url("https://static-assets.codio.com/client/assets/images/guides/blocks/important.fb10dc56d0f49424.svg");\n}\n\n.codio-warning,\n.codio-definition,\n.codio-important,\n.codio-topic,\n.codio-challenge,\n.codio-info,\n.codio-curiculum,\n.codio-guidance,\n.codio-meetups,\n.codio-headline,\n.codio-hackathon,\n.codio-create,\n.codio-calendar,\n.codio-growthhack,\n.codio-debugging,\n.codio-xdiscipline {\n  padding: 12px 40px 12px 65px;\n  margin: 1em 36px 2em 29px;\n  font-size: 0.9em;\n  color: #484040;\n  background-color: #f5f9f5;\n  border-radius: 4px;\n  box-shadow: 2px 2px 4px #DDD;\n  overflow-x: auto;\n}\n\n.codio-warning h1,\n.codio-definition h1,\n.codio-important h1,\n.codio-topic h1,\n.codio-challenge h1,\n.codio-info h1,\n.codio-curiculum h1,\n.codio-guidance h1,\n.codio-meetups h1,\n.codio-headline h1,\n.codio-hackathon h1,\n.codio-create h1,\n.codio-calendar h1,\n.codio-growthhack h1,\n.codio-debugging h1,\n.codio-xdiscipline h1,\n.codio-warning h2,\n.codio-definition h2,\n.codio-important h2,\n.codio-topic h2,\n.codio-challenge h2,\n.codio-info h2,\n.codio-curiculum h2,\n.codio-guidance h2,\n.codio-meetups h2,\n.codio-headline h2,\n.codio-hackathon h2,\n.codio-create h2,\n.codio-calendar h2,\n.codio-growthhack h2,\n.codio-debugging h2,\n.codio-xdiscipline h2,\n.codio-warning h3,\n.codio-definition h3,\n.codio-important h3,\n.codio-topic h3,\n.codio-challenge h3,\n.codio-info h3,\n.codio-curiculum h3,\n.codio-guidance h3,\n.codio-meetups h3,\n.codio-headline h3,\n.codio-hackathon h3,\n.codio-create h3,\n.codio-calendar h3,\n.codio-growthhack h3,\n.codio-debugging h3,\n.codio-xdiscipline h3 {\n  font-size: 120%;\n  font-style: normal;\n  margin-bottom: 0;\n  margin-top: 0;\n  border: none;\n  padding-bottom: 0;\n}\n\n.codio-warning > p:first-of-type,\n.codio-definition > p:first-of-type,\n.codio-important > p:first-of-type,\n.codio-topic > p:first-of-type,\n.codio-challenge > p:first-of-type,\n.codio-info > p:first-of-type,\n.codio-curiculum > p:first-of-type,\n.codio-guidance > p:first-of-type,\n.codio-meetups > p:first-of-type,\n.codio-headline > p:first-of-type,\n.codio-hackathon > p:first-of-type,\n.codio-create > p:first-of-type,\n.codio-calendar > p:first-of-type,\n.codio-growthhack > p:first-of-type,\n.codio-debugging > p:first-of-type,\n.codio-xdiscipline > p:first-of-type {\n  margin-top: 0;\n}\n\n.codio-info::before {\n  background-image: url("https://static-assets.codio.com/client/assets/images/guides/blocks/info.2a0e4bb9f8682b36.svg");\n}\n\n.codio-definition::before {\n  background-image: url("https://static-assets.codio.com/client/assets/images/guides/blocks/definition.19aed70a1703e970.svg");\n}\n\n.codio-warning::before {\n  background-image: url("https://static-assets.codio.com/client/assets/images/guides/blocks/warning.82cd40650a660b1c.svg");\n}\n.codio-curiculum::before,\n.codio-topic::before {\n  background-image: url("https://static-assets.codio.com/client/assets/images/guides/blocks/topic.dd02789224150404.svg");\n}\n\n.codio-challenge::before {\n  background-image: url("https://static-assets.codio.com/client/assets/images/guides/blocks/challenge.d389cf7ece9a9dc2.svg");\n  margin-left: -109px;\n}\n\n.codio-guidance::before {\n  background-image: url("https://static-assets.codio.com/client/assets/images/guides/blocks/guidance.f1fce2c9f18448da.svg");\n}\n\n.codio-meetups::before {\n  background-image: url("https://static-assets.codio.com/client/assets/images/guides/blocks/meetups.93b3131b22571ee7.svg");\n}\n\n.codio-headline::before {\n  background-image: url("https://static-assets.codio.com/client/assets/images/guides/blocks/headlines.541035ae6f0d7f83.svg");\n}\n\n.codio-hackathon::before {\n  background-image: url("https://static-assets.codio.com/client/assets/images/guides/blocks/hackathon.7aea02c58f5c28f1.svg");\n}\n\n.codio-create::before {\n  background-image: url("https://static-assets.codio.com/client/assets/images/guides/blocks/creatorspaceLab.372818615784037d.svg");\n}\n\n.codio-calendar::before {\n  background-image: url("https://static-assets.codio.com/client/assets/images/guides/blocks/aDayInTheLifeOf.d409a14639cf725c.svg");\n}\n\n.codio-growthhack::before {\n  background-image: url("https://static-assets.codio.com/client/assets/images/guides/blocks/growthHacks.69529db645670499.svg");\n}\n\n.codio-debugging::before {\n  background-image: url("https://static-assets.codio.com/client/assets/images/guides/blocks/debugging.ca4d5323104222e0.svg");\n}\n\n.codio-xdiscipline::before {\n  background-image: url("https://static-assets.codio.com/client/assets/images/guides/blocks/acrossTheDisciplines.20a5af402438001b.svg");\n}\n\n.codio-feedback-comments {\n  max-height: 250px;\n  overflow: auto;\n  font-family: monospace;\n}\n\n.codio-feedback-comments div {\n  white-space: normal;\n}\n\n.codio-feedback-comments-border {\n  border-radius: 2px;\n  border: 1px solid #d3d5dc;\n  color: #33393d;\n  margin: 10px 0;\n  padding: 3px;\n}\n\n.codio-feedback-comments p,\n.codio-feedback-comments h1,\n.codio-feedback-comments h2,\n.codio-feedback-comments h3,\n.codio-feedback-comments h4,\n.codio-feedback-comments h5,\n.codio-feedback-comments div,\n.codio-feedback-comments ul {\n  margin: 0;\n  padding: 0 0 3px;\n}\n\n/* image-table */\n\n.codio-image-table {\n\n}\n\n.codio-image-table h3 {\n\n  font-family: \'Open Sans\', sans-serif;\n  color: #ffffff;\n  font-size: 100%;\n  font-weight: normal;\n  text-align: center;\n  padding-top: 21px;\n  padding-bottom: 21px;\n  background-color: #222324;\n  margin: 33px 0 13px 0;\n}\n\n/* image */\n\n.codio-image {\n  max-width: 500px;\n  margin: 1em auto;\n}\n\n.codio-image img {\n  border: 1px solid #c7d5f6;\n  border-radius: 2px;\n}\n\n.codio-image p {\n  margin: 0;\n}\n\n.codio-image p + p {\n  font-size: 1em;\n  text-align: center;\n  margin: 1em 0;\n}\n\n/* interactive table */\n.codio-interactive-table {\n}\n\n/* codio button */\n.codio-button {\n  text-shadow: none;\n  font-style: normal;\n  display: inline-block;\n  padding: 3px 17px 1px;\n  font-weight: normal;\n  font-size: 75%;\n  text-align: center;\n  vertical-align: middle;\n  cursor: pointer;\n  background: #386fd7;\n  border-radius: 2px;\n  color: #fff;\n  text-transform: uppercase;\n  text-decoration: none;\n  margin-left: auto;\n  margin-right: auto;\n  font-family: \'Nunito Sans\';\n  border: 1px solid #386fd7;\n}\n\n.codio-button.codio-button-type-explain {\n  margin-left: 10px;\n  text-transform: none;\n}\n\n.codio-button:disabled {\n  cursor: not-allowed;\n}\n\n.codio-button:focus {\n  outline: thin dotted #333 !important;\n  outline: 5px auto -webkit-focus-ring-color !important;;\n  outline-offset: -2px;\n  -webkit-box-shadow: inset 0 0 0 1px #fff;\n  -moz-box-shadow: inset 0 0 0 1px #fff;\n  box-shadow: inset 0 0 0 1px #fff;\n}\n\n.codio-button-diff {\n  float: right;\n  text-transform: none;\n}\n\n.codio-button-result {\n  background: #fff;\n  border: 1px solid #ddd;\n  border-radius: 2px;\n  line-height: 25px;\n  position: relative;\n  padding: 1em 65px;\n  font-weight: normal;\n  margin: 1em 0;\n  min-height: 30px;\n}\n\n.codio-button-result:after {\n  position: absolute;\n  display: inline-block;\n  left: 21px;\n  bottom: 100%;\n  content: \'\';\n  border-left: 8px solid transparent;\n  border-bottom: 9px solid #fff;\n  border-right: 9px solid transparent;\n}\n\n\n.codio-button-result:before {\n  position: absolute;\n  display: inline-block;\n  left: 19px;\n  bottom: 100%;\n  content: \'\';\n  border-left: 10px solid transparent;\n  border-bottom: 11px solid #ddd;\n  border-right: 10px solid transparent;\n}\n\n.codio-button-result-header {\n  margin-top: 0;\n}\n\n.codio-button-result-explanation {\n  border: 2px solid;\n}\n\n.codio-button-result.codio-button-result-explanation::before,\n.codio-button-result.codio-button-result-explanation::after {\n  display: none;\n}\n\n.codio-button-result-explanation-footer {\n  display: flex;\n  justify-content: flex-end;\n  padding: 10px 0;\n  position: relative;\n}\n\n.codio-button-result-explanation-footer-gen-by {\n  position: absolute;\n  left: 0;\n  font-size: 14px;\n  color: #ccc;\n}\n.codio-button-result-explanation-footer-btn {\n  font-size: 1em;\n  background: transparent;\n  border: none;\n  cursor: pointer;\n}\n\n.codio-button-result-explanation-footer-btn:not(:last-child) {\n  margin-right: 10px;\n}\n\n.codio-button-result-explanation-footer-thumb-up.active {\n  color: #18d8a7;\n}\n\n.codio-button-result-explanation-footer-thumb-down.active {\n  color: #E86A6B;\n}\n\n.codio-button-result-icon {\n  position: absolute;\n  top: 20px;\n  left: 26px;\n  width: 26px;\n  height: 26px;\n}\n\n.codio-button-icon-progress {\n  display: inline-block;\n  background-image: url("https://static-assets.codio.com/client/assets/images/guides/spinner.1a3ba986dc1ef798.gif");\n  background-size: 14px 14px;\n  height: 14px;\n  width: 14px;\n  position: relative;\n  top: 1px;\n  margin-right: 10px;\n}\n\n.codio-button-result-icon-pass {\n  background-image: url("https://static-assets.codio.com/client/assets/images/guides/checkmark_green.58f924655ce1c903.svg");\n}\n\n.codio-button-result-icon-partial {\n  background-image: url("https://static-assets.codio.com/client/assets/images/guides/percent.fc4338499c540b52.svg");\n}\n\n.codio-button-result-icon-fail {\n  background-image: url("https://static-assets.codio.com/client/assets/images/guides/remove_red.e75592fe35ae6c52.svg");\n}\n\n.codio-button-result-icon-progress {\n  background-image: url("https://static-assets.codio.com/client/assets/images/guides/spinner-black.3136a08588f1847e.gif");\n  background-size: 16px 16px;\n  height: 16px;\n  width: 16px;\n}\n\n.codio-button-result .codio-button-result-out {\n  overflow: auto;\n  font-family: monospace;\n  margin: 0;\n  white-space: pre-wrap;\n}\n\n.codio-button.codio-button-result-success {\n  color: #ffffff;\n  background: #18d8a7;\n  border: none;\n}\n\n.codio-button.codio-button-result-danger {\n  background-color: #E86A6B;\n  border: none;\n  margin-left: 5px;\n}\n\n.codio-button.codio-button-result-primary {\n  color: #ffffff;\n  background: #15a4fa;\n  border: none;\n  margin-left: 5px;\n}\n\n.codio-button.codio-assessment-disabled {\n  /* ios iframe hack, opacity rerenders whole iframe and scrolls up*/\n  background-color: #8bacea;\n  border-color: #8bacea;\n}\n\n.codio-button.codio-button-type-assessment-grade {\n  margin-left: 10px;\n}\n\n.codio-assessment-grade-book .codio-button.codio-button-type-assessment-grade {\n  margin-left: 0;\n  margin-top: 10px;\n}\n\n.codio-button-result .codio-button-result-error-text {\n  color: #b94a48;\n}\n\n.codio-button-result .codio-button-result-success-text {\n  color: #468847;\n}\n\n.codio-assessment-compare .codio-button-result.fail .codio-button-result-out,\n.codio-challenge.codio-assessment-compare .codio-button-result.pass .codio-button-result-out\n{\n  font-style: normal;\n  font-size: 16px;\n}\n\n.codio-assessment-compare .codio-button-result-out > div {\n  font-weight: 600;\n}\n\n.codio-assessment-compare .codio-button-result-out > div > pre,\n.codio-assessment-compare .codio-button-result-out div.codio-output-diff > pre {\n  font-weight: 500;\n  font-size: 14px;\n  margin: 0;\n}\n\n.codio-assessment-compare .codio-button-result-out .codio-output-text,\n.codio-assessment-compare .codio-button-result-out .codio-expected-output-text,\n.codio-assessment-compare .codio-button-result-out .codio-feedback-text {\n  max-height: 250px;\n  overflow: auto\n}\n\n.codio-assessment-compare .codio-button-result-out .codio-feedback-text {\n  word-break: break-word;\n  white-space: pre-wrap;\n}\n\n.codio-assessment-compare .codio-button-result-out .codio-output-text,\n.codio-assessment-compare .codio-button-result-out .codio-output-diff-del\n{\n  background-color: #ffe6e6;\n}\n\n.codio-assessment-compare .codio-button-result-out .codio-expected-output-text,\n.codio-assessment-compare .codio-button-result-out .codio-output-diff-ins {\n  background-color: #e9fff2;\n}\n\n.codio-output-diff {\n  max-height: 500px;\n  overflow: auto\n}\n\n/* HelpBlock Component*/\n/* By default, the arrow is to the top left of the block. */\n.codio-helpBlock, .stackinputfeedback {\n  border-radius: 2px;\n  border: 1px solid #d3d5dc;\n  color: #33393d;\n  margin: 10px 36px 10px 0;\n  padding: 10px;\n  line-height: 16px;\n  position: relative;\n  max-width: 570px;\n}\n\n.codio-helpBlock--fullWidth {\n  max-width: none;\n  margin-left: 0;\n  margin-right: 0;\n}\n\n.stackinputfeedback:empty {\n  display: none;\n}\n\n.stackinputfeedback,\n.codio-assessment-compare .codio-button-result-out .codio-feedback-text\n{\n  background-color: #fbfbfb;\n}\n\n/* Positions arrow to the bottom left. */\n.codio-helpBlock--topLeftArrow:before {\n  position: absolute;\n  display: inline-block;\n  content: \'\';\n  border-bottom: 7px solid #eee;\n  border-right: 7px solid transparent;\n  border-left: 7px solid transparent;\n  left: 10px;\n  top: -8px;\n}\n\n.codio-helpBlock--topLeftArrow:after {\n  position: absolute;\n  display: inline-block;\n  content: \'\';\n  border-bottom: 6px solid #FFFFFF;\n  border-right: 6px solid transparent;\n  border-left: 6px solid transparent;\n  left: 11px;\n  top: -6px;\n}\n\n/* Positions arrow to the bottom left. */\n.codio-helpBlock--bottomLeftArrow:before {\n  position: absolute;\n  display: inline-block;\n  content: \'\';\n  border-top: 7px solid #eaecf2;\n  border-right: 7px solid transparent;\n  border-left: 7px solid transparent;\n  left: 10px;\n  bottom: -8px;\n}\n\n.codio-helpBlock--bottomLeftArrow:after {\n  position: absolute;\n  display: inline-block;\n  content: \'\';\n  border-top: 6px solid #FFFFFF;\n  border-right: 6px solid transparent;\n  border-left: 6px solid transparent;\n  left: 11px;\n  bottom: -6px;\n}\n\n/* Positions arrow to the left. */\n.codio-helpBlock--leftArrow:before {\n  position: absolute;\n  display: inline-block;\n  content: \'\';\n  border-bottom: 7px solid transparent;\n  border-right: 7px solid #eee;\n  border-top: 7px solid transparent;\n  left: -7px;\n  top: 10px;\n}\n\n.codio-helpBlock--leftArrow:after {\n  position: absolute;\n  display: inline-block;\n  content: \'\';\n  border-bottom: 6px solid transparent;\n  border-right: 6px solid #fff;\n  border-top: 6px solid transparent;\n  left: -6px;\n  top: 11px;\n}\n\n.codio-challenge.codio-challenge-collapsed::before {\n  top: 12px;\n}\n\n.codio-button-type-gradeBook-pointsInput {\n  margin-right: 5px;\n}\n\n.codio-button-type-gradeBook-pointsOf {\n\n}\n\n.codio-button-type-gradeBook-pointsPicker {\n  margin-top: 5px;\n}\n\n.codio-button-type-gradeBook-commentInfo {\n  margin-top: 5px;\n}\n\n.codio-button-type-gradeBook-nameCollapse {\n  display: flex;\n  display: -moz-box;\n  display: -webkit-box;\n\n  flex-direction: row;\n  -webkit-box-orient: horizontal;\n  -moz-box-orient: horizontal;\n  -webkit-box-direction: normal;\n  -moz-box-direction: normal;\n  min-width: 0;\n\n  justify-content: space-between;\n  -webkit-box-pack: justify;\n  -moz-box-pack: justify;\n  -ms-flex-pack: justify;\n\n  align-items: baseline;\n  -webkit-box-align: baseline;\n  -moz-box-align: baseline;\n  -ms-flex-align: baseline;\n\n  height: 1.6em;\n}\n\n.codio-guides-help-bot-button {\n  position: fixed;\n  right: 15px;\n  bottom: 15px;\n  font-size: 36px;\n  width: 56px;\n  height: 56px;\n  border-radius: 50%;\n  border: none;\n  background-color: #386fd7;\n  color: #fff;\n  cursor: pointer;\n\n  &:hover {\n    background-color: #2964d1;\n  }\n\n  svg {\n    position: relative;\n    top: -2px;\n  }\n}\n',d,"footer {\n  text-align: center;\n  margin-top: 80px;\n  font-family: 'Nunito Sans';\n}\n\nfooter button {\n  text-decoration: none;\n  background-image: none;\n  line-height: 1.5em;\n  border-radius: 2em;\n  padding: 0 8px;\n  background-color: transparent;\n  border: 1px solid #aaa;\n  text-transform: none;\n  min-width: 1em;\n  font-size: 0.9em;\n  color: #636C85;\n  margin-right: 20px;\n}\n\nfooter button:hover {\n  border-color: #444;\n  color: #444;\n}\n\nfooter button span::after {\n  background-image: url('https://static-assets.codio.com/client/assets/images/guides/footer-next.69f65caf0b88ddec.png');\n  background-size: 1em 1em;\n  width: 1em;\n  height: 1em;\n  content: \" \";\n  display: inline-block;\n  font-size: 1em;\n  vertical-align: middle;\n  margin-bottom: .25em;\n  margin-left: 0.1em;\n}\n\nfooter button.plain span::after {\n  display: none;\n}\n","html {\n  font-size: 18px;\n}\n\nbody {\n  margin: 0 60px 30px;\n  font-size: 18px;\n  line-height: 1.5;\n}\n\n@media only screen and (max-width: 600px) {\n  body {\n    margin: 0 30px 30px;\n  }\n}\n\n@media only screen and (max-width: 400px) {\n  body {\n    margin: 0 20px 30px;\n  }\n}\n\n.rendered-markdown {\n  font-family: 'Nunito Sans', sans-serif;\n  max-width: 660px;\n  margin: 0 auto;\n  font-weight: 150;\n  color: #212c3f;\n}\n\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  font-family: 'Nunito Sans', sans-serif;\n  font-weight: 700;\n  margin-top: 1em;\n  margin-bottom: 16px;\n}\n\nstrong, b {\n  font-weight: bold;\n}\n\nh1 {\n  font-size: 1.8em;\n  font-weight: 900;\n}\n\nh2 {\n  border-bottom: 1px solid #212c3f;\n  font-size: 1.6em;\n}\n\nh3 {\n  font-size: 1.4em;\n}\n\nh4 {\n  font-size: 1.2em;\n}\n\nh5,\nh6 {\n  font-size: 1em;\n}\n\n.page-title {\n  margin-top: 10px;\n  line-height: 1.1em;\n  color: #8e8e8e;\n}\n\n.page-title.shrink {\n  -webkit-transition: all 0.6s ease-in-out;\n  -moz-transition: all 0.6s ease-in-out;\n  transition: all 0.6s ease-in-out;\n}\n\n.page-title.shrink {\n  position: fixed;\n  top: 0;\n  left: 0;\n  display: flex;\n  justify-content: center;\n  z-index: 9;\n  background: #FFF;\n  width: 100%;\n  font-size: 1.2em;\n  font-style: italic;\n  font-weight: 500;\n  padding: 10px 5% 10px 5%;\n  margin-top: 0;\n  color: #767676;\n  box-shadow: 1px 0 20px #FFF;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  -o-text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.page-title.shrink .page-title-text {\n  max-width: 660px;\n  width: 100%;\n  margin-left: -60px;\n}\n\na {\n  color: #212c3f;\n  text-decoration: none;\n  text-shadow: 0.03em 0 white, -0.03em 0 white, 0 0.03em white, 0 -0.03em white, 0.06em 0 white, -0.06em 0 white, 0.09em 0 white, -0.09em 0 white, 0.12em 0 white, -0.12em 0 white, 0.15em 0 white, -0.15em 0 white;\n  background-image: -webkit-linear-gradient(#ffffff, #ffffff), -webkit-linear-gradient(#ffffff, #ffffff), -webkit-linear-gradient(#212c3f, #212c3f);\n  background-image: linear-gradient(#ffffff, #ffffff), linear-gradient(#ffffff, #ffffff), linear-gradient(#212c3f, #212c3f);\n  background-size: .05em 1px, .05em 1px, 1px 1px;\n  background-repeat: no-repeat, no-repeat, repeat-x;\n  background-position: 0% 90%, 100% 90%, 0% 90%;\n  cursor: pointer;\n}\n\na::-moz-selection {\n  text-shadow: 0.03em 0 #b4d5fe, -0.03em 0 #b4d5fe, 0 0.03em #b4d5fe, 0 -0.03em #b4d5fe, 0.06em 0 #b4d5fe, -0.06em 0 #b4d5fe, 0.09em 0 #b4d5fe, -0.09em 0 #b4d5fe, 0.12em 0 #b4d5fe, -0.12em 0 #b4d5fe, 0.15em 0 #b4d5fe, -0.15em 0 #b4d5fe;\n  background: #b4d5fe;\n}\na::selection {\n  text-shadow: 0.03em 0 #b4d5fe, -0.03em 0 #b4d5fe, 0 0.03em #b4d5fe, 0 -0.03em #b4d5fe, 0.06em 0 #b4d5fe, -0.06em 0 #b4d5fe, 0.09em 0 #b4d5fe, -0.09em 0 #b4d5fe, 0.12em 0 #b4d5fe, -0.12em 0 #b4d5fe, 0.15em 0 #b4d5fe, -0.15em 0 #b4d5fe;\n  background: #b4d5fe;\n}\n\na::-moz-selection {\n  text-shadow: 0.03em 0 #b4d5fe, -0.03em 0 #b4d5fe, 0 0.03em #b4d5fe, 0 -0.03em #b4d5fe, 0.06em 0 #b4d5fe, -0.06em 0 #b4d5fe, 0.09em 0 #b4d5fe, -0.09em 0 #b4d5fe, 0.12em 0 #b4d5fe, -0.12em 0 #b4d5fe, 0.15em 0 #b4d5fe, -0.15em 0 #b4d5fe;\n  background: #b4d5fe;\n}\n\na:before,\na:after,\na *,\na *:before,\na *:after {\n  text-shadow: none;\n}\n\n.docs-body a:visited {\n  color: #212c3f;\n}\n\ncode {\n  font-family: monospace;\n}\n\ncode {\n  font-size: 77%;\n  font-weight: 400;\n  font-style: normal;\n  padding: 0 .5em;\n  background-color: #f7f9fc;\n  border: 1px solid #c7d5f6;\n  border-radius: 2px;\n}\n\n.p-tag,\nblockquote,\nul,\nol,\ndl,\ntable {\n  margin: 0em 0 24px 0;\n}\n\nli {\n  margin-bottom: .5em;\n}\n\nli:last-of-type {\n  margin-bottom: 0;\n}\n\ndt {\n  font-weight: 700;\n}\n\npre {\n  margin: 1em 0;\n}\n\npre code {\n  padding: 20px 28px;\n  display: block;\n  overflow: auto;\n}\n\npre code b,\npre code strong {\n  font-weight: 700;\n}\n\n.code-block {\n  position: relative;\n}\n\n.btn-clipboard {\n  background-image: url('https://static-assets.codio.com/client/assets/images/guides/clipboard.822a38c12e476e8c.svg');\n  background-position: center;\n  background-repeat: no-repeat;\n  background-color: transparent;\n  position: absolute;\n  top: 5px;\n  left: 4px;\n  width: 20px;\n  height: 20px;\n  cursor: pointer;\n  opacity: 0.5;\n}\n\n.btn-clipboard:hover {\n  opacity: 0.7;\n}\n\nul {\n  padding-left: 1.3em;\n}\n\nul ul {\n  padding-left: 1.5em;\n  margin: 0;\n}\n\ntable {\n  border-collapse: collapse;\n  width: 100%;\n  font-size: inherit;\n}\n\ntable th,\ntable td {\n  padding: 14px;\n}\n\ntable thead tr {\n  border-top: 1px solid #c7d5f6;\n}\n\ntable tbody tr:first-child {\n  border-top: 1px solid #c7d5f6;\n}\n\ntable tbody tr:nth-child(2n) {\n  background-color: #f7f9fc;\n}\n\ntable tbody tr:last-child {\n  border-bottom: 1px solid #c7d5f6;\n}\n\nabbr {\n  border-bottom: 1px dashed #c7d5f6;\n  cursor: help;\n}\n\nhr {\n  border: none;\n  border-top: 1px solid #c7d5f6;\n  height: 1px;\n  padding: 0;\n}\n\nimg {\n  margin: 0 auto;\n  display: block;\n  max-width: 100%;\n}\n\n.guides-image {\n  cursor: zoom-in;\n}\n\n.codio-challenge .guides-image {\n  cursor: default;\n}\n\nblockquote {\n  padding-left: 20px;\n  border-left: 2px solid #212c3f;\n  font-style: italic;\n}\n\nmark {\n  background-color: #ffff9d;\n  padding: .05em .2em;\n  border-radius: 2px;\n}\n\n.codio-button-type-assessment,\n.codio-assessment-last-run {\n  font-family: 'Nunito Sans', sans-serif;\n}\n"];l.RO&&u.push("@import url('https://fonts.googleapis.com/css2?family=Geist+Mono:wght@100..900&family=Rubik:ital,wght@0,300..900;1,300..900&family=Work+Sans:ital,wght@0,100..900;1,100..900&display=swap');\n\n.guides {\n  --bg-color: #012335;\n  --border-color: #1D4C64;\n\n  /* Title: Geist Mono regular 24 #EEF3F7 */\n  --title-color: #EEF3F7;\n  --title-font-family: \"Geist Mono\", monospace;\n  --title-font-size: 24px;\n  --title-font-weight: 400;\n\n  /* Heading: Rubik regular 24 #EEF3F7 */\n  --heading-color: #EEF3F7;\n  --heading-font-family: \"Rubik\", sans-serif;\n  --heading-font-weight: 400;\n  --heading3-font-size: 24px;\n  --heading4-font-size: 22px;\n  --heading5-font-size: 20px;\n  --heading6-font-size: 20px;\n  --heading2-font-size: 26px;\n  --heading1-font-size: 26px;\n\n  /* Paragraph: WorkSans regular 16 #C3C6C8 */\n  --paragraph-color: #C3C6C8;\n  --paragraph-font-family: \"Work Sans\", sans-serif;\n  --paragraph-font-size: 16px;\n  --paragraph-font-weight: 400;\n\n  /* Button labels: Active/suggested: WorkSans medium 16 #EEF3F7\n - Inactive/not suggested #C3C6C8 */\n  --button-color: #EEF3F7;\n  --button-color-active: #C3C6C8;\n  --button-color-filter: brightness(0) saturate(100%) invert(91%) sepia(5%) saturate(178%) hue-rotate(165deg) brightness(105%) contrast(96%);\n  --button-color-active-filter: brightness(0) saturate(100%) invert(88%) sepia(8%) saturate(76%) hue-rotate(160deg) brightness(92%) contrast(86%);\n  --button-font-family: \"Work Sans\", sans-serif;\n  --button-font-size: 16px;\n  --button-font-weight: 500;\n\n  /* Code: Geist Mono regular 14 - Background - #002234; radius 4; padding: [top:2, right:4, bottom:2, left:4], gap: 10 */\n  --code-bg-color: #002234;\n  --code-font-family: \"Geist Mono\", monospace;\n  --code-font-weight: 400;\n  --code-font-size: 14px;\n  --code-border-radius: 4px;\n  --code-padding: 2px 4px 2px 4px;\n  --code-gap: 10px;\n\n  /* Highlight: #B5A3FF */\n  --highlight-color: #B5A3FF;\n\n  /* Correct answer: #74E291 */\n  --correct-answer-color: #74E291;\n\n  /* Assessment CTA: Background: #EEF3F7\n, Label: Geist Mono medium 16 #002234\n, Padding: [top:8, right:24, bottom: 8, left: 24], gap: 10, radius: 8 */\n  --assessment-cta-bg-color: #EEF3F7;\n  --assessment-cta-label-color: #002234;\n  --assessment-cta-label-font-family: \"Geist Mono\", monospace;\n  --assessment-cta-label-font-weight: 500;\n  --assessment-cta-label-font-size: 16px;\n  --assessment-cta-padding: 8px 24px 8px 24px;\n  --assessment-cta-gap: 10px;\n  --assessment-cta-radius: 8px;\n\n  /* Assessment: Choices labels: WorkSans regular 18 #EEF3F7; choices boxes: background: #012335\n, border #1E4D65\n, checkmark #B5A3FF */\n  --assessment-choice-label-font-family: \"Work Sans\", sans-serif;\n  --assessment-choice-label-font-size: 18px;\n  --assessment-choice-label-font-weight: 400;\n  --assessment-choice-label-color: #EEF3F7;\n  --assessment-choice-box-bg-color: #012335;\n  --assessment-border-color: #1E4D65;\n  --assessment-checkmark-color: #B5A3FF;\n}\n\n.codio-button.codio-button-type-assessment {\n  text-shadow: none;\n  text-transform: none;\n\n  border-radius: 6px;\n}\n\n.fib-react-select__control {\n  min-height: auto;\n  border: 1px solid var(--border-color);\n  background-color: #09415E;\n  padding: 4px;\n}\n\n.fib-react-select__value-container {\n  padding: 0;\n}\n\n.fib-react-select__placeholder,\n.fib-react-select__single-value {\n  transform: none;\n  position: relative;\n  line-height: 1.2em;\n  max-width: calc(100% - 4px);\n  min-width: 50px;\n  color: #D8E0E5;\n}\n\n.fib-react-select__indicator {\n  padding: 0;\n  width: 14px;\n}\n\n.fib-react-select__indicator-separator {\n  display: none;\n  /* margin-top: 4px;\n  margin-bottom: 4px; */\n}\n\n.codio-fib-simple-input {\n  font-family: 'Nunito Sans';\n  font-weight: 300;\n  font-size: 1em;\n  display: inline-block;\n  padding: 0 .2em;\n  border-radius: 6px;\n  line-height: 1.3em;\n  \n  background-color: #09415E;\n  border: 1px solid var(--border-color);\n  color: #B7B8B8;\n  padding: 8px;\n  margin: 4px;\n}\n\n.codio-warning::before,\n.codio-definition::before,\n.codio-important::before,\n.codio-topic::before,\n.codio-challenge::before,\n.codio-info::before,\n.codio-curiculum::before,\n.codio-guidance::before,\n.codio-meetups::before,\n.codio-headline::before,\n.codio-hackathon::before,\n.codio-create::before,\n.codio-calendar::before,\n.codio-growthhack::before,\n.codio-debugging::before,\n.codio-xdiscipline::before {\n  display: none;\n}\n\n.codio-warning,\n.codio-definition,\n.codio-important,\n.codio-topic,\n.codio-challenge,\n.codio-info,\n.codio-curiculum,\n.codio-guidance,\n.codio-meetups,\n.codio-headline,\n.codio-hackathon,\n.codio-create,\n.codio-calendar,\n.codio-growthhack,\n.codio-debugging,\n.codio-xdiscipline {\n  margin: 1em 36px 2em 29px;\n  font-size: 0.9em;\n  overflow-x: auto;\n\n  padding: 12px 30px;\n  border-radius: 6px;\n  color: #D8E0E5;\n  background-color: #072F45;\n  border: 1px solid var(--border-color);\n  box-shadow: none;\n}\n\n.codio-button {\n  text-shadow: none;\n  font-style: normal;\n  display: inline-block;\n  font-size: 75%;\n  text-align: center;\n  vertical-align: middle;\n  cursor: pointer;\n  text-decoration: none;\n  margin-left: auto;\n  margin-right: auto;\n  /* font-family: 'Nunito Sans'; */\n  \n  border: 1px solid var(--button-color);\n  border-radius: 6px;\n  font-weight: 600;\n  background: var(--button-color);\n  color: #1E3C4C;\n  padding: 3px 17px 3px;\n  font-family: var(--button-font-family);\n  font-size: var(--button-font-size);\n  font-weight: var(--button-font-weight);\n}\n\nfooter button {\n  text-decoration: none;\n  background-image: none;\n  line-height: 1.5em;\n  padding: 0 8px;\n  background-color: transparent;\n  text-transform: none;\n  min-width: 1em;\n  color: var(--button-color);\n  margin-right: 20px;\n  border: none;\n  font-family: var(--button-font-family);\n  font-size: var(--button-font-size);\n  font-weight: var(--button-font-weight);\n}\n\nfooter button:hover {\n  color: var(--button-color-active);\n}\n\nbody {\n  margin: 0 60px 30px;\n  font-size: 18px;\n  line-height: 1.5;\n\n  background: radial-gradient(circle at bottom left, rgb(57, 136, 125) 3%, rgb(1, 35, 53) 42%);\n  background-attachment: fixed;\n}\n\n@media (max-width: 600px) {\n    body {\n        margin: 0 30px 30px;\n    }\n}\n\n@media (max-width: 400px) {\n    body {\n        margin: 0 16px 30px;\n    }\n}\n\n\n.rendered-markdown {\n  font-family: var(--paragraph-font-family);\n  font-size: var(--paragraph-font-size);\n  font-weight: var(--paragraph-font-weight);\n  max-width: 660px;\n  margin: 0 auto;\n  color: var(--paragraph-color);\n}\n\n.page-title {\n  margin-top: 10px;\n  line-height: 1.1em;\n  -webkit-transition: all 0.6s ease-in-out;\n  -moz-transition: all 0.6s ease-in-out;\n  transition: all 0.6s ease-in-out;\n\n  color: var(--title-color);\n  font-family: var(--title-font-family);\n  font-size: var(--title-font-size);\n  font-weight: var(--title-font-weight);\n}\n\n.page-title.shrink {\n  box-shadow: none;\n  background: var(--bg-color);\n  color: var(--title-color);\n}\n\n@media (max-width: 600px) {\n    .page-title.shrink {\n        justify-content: start;\n    }\n}\n\n\n.codio-button-type-next span::after {\n  /* color: #B7B8B8; */\n  /* color: var(--button-color); #EEF3F7 */\n  filter: var(--button-color-filter);\n  background-image: url('https://static-assets.codio.com/client/assets/images/guides/vechain/arrow_forward.3aa8f6d6f0c2f840.svg');\n  margin-left: 16px;\n  font-size: 1.3em;\n  margin-bottom: 0.1em;\n}\n\n.codio-button-type-next:hover span::after {\n  /* color: #D8E0E5; */\n  /* color: var(--button-color-active); #C3C6C8 */\n  filter: var(--button-color-active-filter);\n}\n\n.codio-helpBlock, .stackinputfeedback {\n  color: #D8E0E5;\n  border: 1px solid var(--border-color);\n  border-radius: 6px;\n}\n\n.content.codio-button-result {\n  padding: 1em 65px;\n  border: 1px solid var(--border-color);\n}\n\n.codio-button-result {\n  background-color: #09415E;\n  border: 1px solid var(--border-color);\n  border-radius: 6px;\n}\n\n.codio-button-result:after {\n  display: none;\n}\n\n.codio-button-result:before {\n  display: none;\n}\n\n.codio-assessment-compare .codio-button-result-out .codio-output-text, .codio-assessment-compare .codio-button-result-out .codio-output-diff-del {\n  color: #1E3C4C;\n  border-radius: 6px;\n  padding: 4px 12px;\n}\n\n.codio-assessment-compare .codio-button-result-out .codio-expected-output-text, .codio-assessment-compare .codio-button-result-out .codio-output-diff-ins {\n  color: #1E3C4C;\n  border-radius: 6px;\n  padding: 4px 12px;\n}\n\n.codio-assessment-guidance-container {\n    padding: 0.5em;\n    margin-bottom: 1em;\n    background-color: #e4efe4;\n    border: 1px solid var(--border-color);\n    border-radius: 6px;\n    color: #1E3C4C;\n}\n\n.codio-assessment-fib-ok {\n  color: #1E3C4C;\n}\n\n.codio-assessment-textarea {\n  background-color: #09415E;\n  border: 1px solid var(--border-color);\n  color: #B7B8B8;\n  border-radius: 6px;\n}\n\n.fib-react-select__menu-portal {\n  color: #B7B8B8;\n  border-radius: 6px;\n  background-color: #09415E;\n\n  .fib-react-select__menu {\n    background-color: #09415E;\n    .fib-react-select__menu-list {\n      background-color: #09415E;\n      border: 1px solid var(--border-color);\n      border-radius: 6px;\n      .fib-react-select__option {\n        background-color: #09415E;\n      }\n      .fib-react-select__option--is-focused {\n        background-color: #1D4C64;\n      }\n    }\n  }\n}\n\npre code {\n  padding: var(--code-padding);\n  gap: var(--code-gap);\n}\n\ncode {\n  background-color: var(--code-bg-color);\n  border: 1px solid var(--border-color);\n  border-radius: var(--code-border-radius);\n  font-family: var(--code-font-family);\n  font-size: var(--code-font-size);\n  font-weight: var(--code-font-weight);\n}\n\n/* parsons start */\n.codio-assessment-parsons-puzzle .sortable-code li {\n  background-color: #09415E;\n  border: 1px solid var(--border-color);\n  color: #B7B8B8;\n  border-radius: 6px;\n}\n\n.codio-assessment-parsons-puzzle .sortable-code ul, .codio-assessment-parsons-puzzle .testcase .output {\n  background-color: #09415E;\n}\n\n.sortable-code ul {\n  border: 1px solid var(--border-color);\n  border-radius: 6px;\n}\n/* parsons end */\n\nli.incorrectPosition, .testcase.fail, .testcase.error {\n  color: #1E3C4C;\n  border-radius: 6px;\n}\n\n.codio-assessment-free-text .codio-helpBlock {\n  background-color: #09415E;\n  border: 1px solid var(--border-color);\n  color: #B7B8B8;\n  border-radius: 6px;\n}\n\n.codio-assessment-free-text .codio-helpBlock {\n  background-color: #09415E;\n  border: 1px solid var(--border-color);\n  border-radius: 6px;\n}\n\n.codio-assessment-free-text-auto .codio-helpBlock {\n  background-color: #09415E;\n  border: 1px solid var(--border-color);\n  color: #B7B8B8;\n  border-radius: 6px;\n}\n\n.codio-feedback-comments-border {\n  background-color: #09415E;\n  color: #B7B8B8;\n  border: 1px solid var(--border-color);\n  border-radius: 6px;\n}\n\n.codio-helpBlock--topLeftArrow::before {\n  display: none;\n}\n\n.codio-helpBlock--topLeftArrow::after {\n  display: none;\n}\n\n.codio-assessment-grade-book .codio-helpBlock {\n  background-color: #072F45;\n}\n\n.btn-clipboard {\n  filter: var(--button-color-filter);\n  right: 5px;\n  left: unset;\n}\n\n.btn-clipboard:hover {\n  filter: var(--button-color-active-filter);\n}\n\n/* link-color: #978EDE */\n/* anchor */\na {\n  color: var(--highlight-color); /*#978EDE;*/\n  /* text-shadow: 0.03em 0 white, -0.03em 0 white, 0 0.03em white, 0 -0.03em white, 0.06em 0 white, -0.06em 0 white, 0.09em 0 white, -0.09em 0 white, 0.12em 0 white, -0.12em 0 white, 0.15em 0 white, -0.15em 0 white; */\n  /* background-image: -webkit-linear-gradient(#ffffff, #ffffff), -webkit-linear-gradient(#ffffff, #ffffff), -webkit-linear-gradient(#212c3f, #212c3f);\n  background-image: linear-gradient(#ffffff, #ffffff), linear-gradient(#ffffff, #ffffff), linear-gradient(#212c3f, #212c3f); */\n  /* background-size: .05em 1px, .05em 1px, 1px 1px; */\n  /* background-repeat: no-repeat, no-repeat, repeat-x; */\n  /* background-position: 0% 90%, 100% 90%, 0% 90%; */\n  text-decoration: none;\n  text-shadow: none;\n  cursor: pointer;\n  background-image: none;\n  font-weight: 600;\n}\n\na::-moz-selection {\n  text-shadow: 0.03em 0 #b4d5fe, -0.03em 0 #b4d5fe, 0 0.03em #b4d5fe, 0 -0.03em #b4d5fe, 0.06em 0 #b4d5fe, -0.06em 0 #b4d5fe, 0.09em 0 #b4d5fe, -0.09em 0 #b4d5fe, 0.12em 0 #b4d5fe, -0.12em 0 #b4d5fe, 0.15em 0 #b4d5fe, -0.15em 0 #b4d5fe;\n  background: #b4d5fe;\n}\na::selection {\n  text-shadow: 0.03em 0 #b4d5fe, -0.03em 0 #b4d5fe, 0 0.03em #b4d5fe, 0 -0.03em #b4d5fe, 0.06em 0 #b4d5fe, -0.06em 0 #b4d5fe, 0.09em 0 #b4d5fe, -0.09em 0 #b4d5fe, 0.12em 0 #b4d5fe, -0.12em 0 #b4d5fe, 0.15em 0 #b4d5fe, -0.15em 0 #b4d5fe;\n  background: #b4d5fe;\n}\n\na::-moz-selection {\n  text-shadow: 0.03em 0 #b4d5fe, -0.03em 0 #b4d5fe, 0 0.03em #b4d5fe, 0 -0.03em #b4d5fe, 0.06em 0 #b4d5fe, -0.06em 0 #b4d5fe, 0.09em 0 #b4d5fe, -0.09em 0 #b4d5fe, 0.12em 0 #b4d5fe, -0.12em 0 #b4d5fe, 0.15em 0 #b4d5fe, -0.15em 0 #b4d5fe;\n  background: #b4d5fe;\n}\n\na:before,\na:after,\na *,\na *:before,\na *:after {\n  text-shadow: none;\n}\n/* anchor end */\n\n/* table */\ntable {\n  color: #B7B8B8;\n}\n\ntable thead tr {\n  border-top: 1px solid var(--border-color);\n}\n\ntable tbody tr:first-child {\n  border-top: 1px solid var(--border-color);\n}\n\ntable tbody tr:nth-child(2n) {\n  background-color: #072F45;\n}\n\ntable tbody tr:last-child {\n  border-bottom: 1px solid var(--border-color);\n}\n\nabbr {\n  border-bottom: 1px dashed var(--border-color);\n  cursor: help;\n}\n\nhr {\n  border: none;\n  border-top: 1px solid var(--border-color);\n  height: 1px;\n  padding: 0;\n}\n/* table end */\n\n/* checkbox */\n.codio-assessment-multiple-ok label {\n  color: var(--correct-answer-color);\n}\n\n.codio-button-type-assessment-multiple-checkbox.codio-assessment-multiple-ok input:checked + label i::before,\n.codio-button-type-assessment-multiple-checkbox.codio-assessment-multiple-ok label i::before {\n  background-image: url('https://static-assets.codio.com/client/assets/images/guides/vechain/check-circle-outline.7e0aaa559da3c404.svg');\n  background-color: unset;\n}\n\n.codio-button-type-assessment-multiple-checkbox.codio-assessment-multiple-wrong input:checked + label i::before,\n.codio-button-type-assessment-multiple-checkbox.codio-assessment-multiple-wrong label i::before {\n  background-image: url('https://static-assets.codio.com/client/assets/images/guides/vechain/cross-circle-outline.13e7d05b8f5c386b.svg');\n  background-color: unset;\n}\n\n.codio-button-type-assessment-multiple-checkbox input:checked + label i {\n  background-image: url('https://static-assets.codio.com/client/assets/images/guides/vechain/check.5f9f746c841c4e53.svg');\n  background-size: contain;\n  background-color: var(--assessment-choice-box-bg-color);\n  background-position: center;\n}\n\n.codio-button-type-assessment-multiple-checkbox label {\n  font-family: var(--assessment-choice-label-font-family);\n  font-size: var(--assessment-choice-label-font-size);\n  font-weight: var(--assessment-choice-label-font-weight);\n}\n\n.codio-button-type-assessment-multiple-checkbox label i {\n  background-color: var(--assessment-choice-box-bg-color);\n  border: 1px solid var(--border-color);\n}\n\n.codio-button-type-assessment-multiple-radio label i {\n  margin-top: 5px;\n}\n\n.codio-button-type-assessment-multiple-radio label {\n  font-family: var(--assessment-choice-label-font-family);\n  font-size: var(--assessment-choice-label-font-size);\n  font-weight: var(--assessment-choice-label-font-weight);\n}\n\n.codio-button-type-assessment-multiple-radio.codio-assessment-multiple-ok input:checked + label i::before,\n.codio-button-type-assessment-multiple-radio.codio-assessment-multiple-ok label i::before {\n  background-color: unset;\n  border-color: unset;\n  background-image: url('https://static-assets.codio.com/client/assets/images/guides/vechain/check-circle-outline.7e0aaa559da3c404.svg');\n}\n\n.codio-button-type-assessment-multiple-radio.codio-assessment-multiple-wrong input:checked + label i::before {\n  background-color: unset;\n  border-color: unset;\n  background-image: url('https://static-assets.codio.com/client/assets/images/guides/vechain/cross-circle-outline.13e7d05b8f5c386b.svg');\n}\n\n.codio-button-type-assessment-multiple-radio input:checked + label i::before {\n  background-color: var(--highlight-color);\n}\n\n.codio-assessment-ecornell-fib-extra-feedback-correct::after {\n  background-image: url('https://static-assets.codio.com/client/assets/images/guides/vechain/check-circle-outline.7e0aaa559da3c404.svg');\n  background-color: unset;\n}\n\n.codio-assessment-ecornell-fib-extra-feedback-wrong::after {\n  background-image: url('https://static-assets.codio.com/client/assets/images/guides/vechain/cross-circle-outline.13e7d05b8f5c386b.svg');\n  background-color: unset;\n}\n\n.codio-challenge .codio-button {\n  background-color: var(--assessment-cta-bg-color);\n  color: var(--assessment-cta-label-color);\n  font-family: var(--assessment-cta-label-font-family);\n  font-size: var(--assessment-cta-label-font-size);\n  font-weight: var(--assessment-cta-label-font-weight);\n  padding: var(--assessment-cta-padding);\n  gap: var(--assessment-cta-gap);\n  border-radius: var(--assessment-cta-radius);\n}\n\n/* checkbox end*/\n\n.stackinputfeedback,\n.codio-assessment-compare\n.codio-button-result-out\n.codio-feedback-text {\n  background-color: #09415E;\n  color: #B7B8B8;\n  border: 1px solid var(--border-color);\n  border-radius: 6px;\n}\n\n.codio-assessment-guidance-container {\n  background-color: #09415E;\n  color: #B7B8B8;\n  border: 1px solid var(--border-color);\n  border-radius: 6px;\n}\n\n.codio-assessment-compare .codio-button-result-out .codio-output-text {\n  background-color: #09415E;\n  color: #B7B8B8;\n  border-radius: 6px;\n  min-height: 1.5em;\n  border: 1px solid #ffe6e6;\n}\n\n.codio-assessment-compare .codio-button-result-out .codio-expected-output-text {\n  background-color: #09415E;\n  color: #B7B8B8;\n  border-radius: 6px;\n  min-height: 1.5em;\n  border: 1px solid #e9fff2;\n}\n\n/* Heading */\nh1 {\n  font-size: var(--heading1-font-size);\n  font-family: var(--heading-font-family);\n  font-weight: var(--heading-font-weight, 900);\n  color: var(--heading-color);\n}\n\nh2 {\n  font-size: var(--heading2-font-size);\n  font-family: var(--heading-font-family);\n  font-weight: var(--heading-font-weight);\n  color: var(--heading-color);\n}\n\nh3 {\n  font-size: var(--heading3-font-size);\n  font-family: var(--heading-font-family);\n  font-weight: var(--heading-font-weight);\n  color: var(--heading-color);\n}\n\nh4 {\n  font-size: var(--heading4-font-size);\n  font-family: var(--heading-font-family);\n  font-weight: var(--heading-font-weight);\n  color: var(--heading-color);\n}\n\nh5,\nh6 {\n  font-size: var(--heading5-font-size);\n  font-family: var(--heading-font-family);\n  font-weight: var(--heading-font-weight);\n  color: var(--heading-color);\n}\n/*Heading end*/\n");var h={light:{id:"light",name:"Light Reading",css:u.join("\n"),dyslexic:!1},dyslexic:{id:"dyslexic",name:"Dyslexic",css:[...u,'@font-face {\n  font-family: "OpenDyslexic";\n  src: url(/assets/images/guides/fonts/OpenDyslexic-Bold.woff);\n  font-weight: bold;\n}\n\n@font-face {\n  font-family: "OpenDyslexic";\n  src: url(/assets/images/guides/fonts/OpenDyslexic-BoldItalic.woff);\n  font-weight: bold;\n  font-style: italic;\n}\n\n@font-face {\n  font-family: "OpenDyslexic";\n  src: url(/assets/images/guides/fonts/OpenDyslexic-Italic.woff);\n  font-style: italic;\n}\n\n@font-face {\n  font-family: "OpenDyslexic";\n  src: url(/assets/images/guides/fonts/OpenDyslexic-Regular.woff);\n}\n\n@font-face {\n  font-family: "OpenDyslexic Mono";\n  src: url(/assets/images/guides/fonts/OpenDyslexicMono-Regular.woff);\n}\n\nbody, .rendered-markdown {\n  font-family: "OpenDyslexic", sans-serif;\n  font-weight: 300;\n  line-height: 1.5;\n}\n\nbody,\n.rendered-markdown,\n.codio-button-result {\n  background-color: #FFF2E6;\n  color: #303030;\n}\n\n.page-title {\n  background-color: #FFF2E6;\n}\n\n.page-title.shrink {\n  box-shadow: 1px 0 20px #FFF2E6;\n}\n\npre {\n  font-family: "OpenDyslexic Mono", monospace;\n}\n\n.page-title,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  font-family: "OpenDyslexic", sans-serif;\n  clear: left;\n  font-weight: 400;\n  color: #475760;\n}\n\na, footer a {\n  color: #5396BE;\n  font-family: "OpenDyslexic", sans-serif;\n}\n\na {\n  border-bottom: 1px solid #5396BE;\n  text-shadow: none;\n  background-image: none;\n}\n\nol li:before {\n  font-family: \'OpenDyslexic\', sans-serif;\n}\n\n/* standard tables */\ntable {\n  font-family: "OpenDyslexic", sans-serif;\n  font-size: inherit;\n}\n\npre code,\npre code.highlight,\npre tt {\n  font-family: "OpenDyslexic Mono", Monaco, Menlo, Consolas, "Courier New", monospace;\n  font-size: 90%;\n  line-height: 23px;\n}\n\ncode,\ntt {\n  font-size: 75%;\n  font-family: "OpenDyslexic Mono", Monaco, Menlo, Consolas, "Courier New", monospace;\n  padding: .2em .5em;\n}\n\n.codio-image-table h3,\n.codio-image .p-tag + .p-tag,\n.codio-button,\n.codio-button-result,\n.codio-button-result .codio-button-result-out {\n  font-family: \'OpenDyslexic\', sans-serif;\n}\n\n.guides-image {\n  cursor: zoom-in;\n}\n\n.codio-challenge .guides-image {\n  cursor: default;\n}\n\n.codio-button-result .codio-button-result-out {\n  min-height: 2.3em;\n}\n\ntable thead tr,\ntable tbody tr:first-child,\ntable tbody tr:last-child ,\nabbr,\nhr,\nh2,\nh1,\ncode,\n.codio-button-result {\n  border-color: rgba(0, 0, 0, 0.18);\n}\n\ntable thead tr {\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n}\n\n.codio-button-result:before {\n  border-bottom-color: rgba(0, 0, 0, 0.18);\n}\n.codio-button-result:after {\n  border-bottom-color: rgba(230, 218, 207, 1);\n}\n\n\ncode,\npre,\ntable tbody tr:nth-child(2n) {\n  background-color: rgba(0, 0, 0, 0.05);\n}\n\ndiv.rendered-markdown > .p-tag:nth-child(even),\ndiv.rendered-markdown > div:nth-child(even){\n  background-color: rgba(0,0,0, 0.05);\n}\n\ndiv.rendered-markdown ul > li:nth-child(even),\ndiv.rendered-markdown ol > li:nth-child(even){\n  background-color: rgba(0,0,0, 0.05);\n}\n\n\n.reading-bar {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  z-index: 200;\n  pointer-events: none;\n  background-color: rgba(0, 0, 0, 0.098);\n  height: 1.5em;\n}\n\ndiv.rendered-markdown .p-tag:hover,\ndiv.rendered-markdown li:hover,\ndiv.rendered-markdown h1:not(.page-title):hover,\ndiv.rendered-markdown h2:hover,\ndiv.rendered-markdown h3:hover,\ndiv.rendered-markdown h4:hover,\ndiv.rendered-markdown h5:hover,\ndiv.rendered-markdown h6:hover,\ndiv.rendered-markdown pre:hover,\ndiv.rendered-markdown td:hover,\n.codio-button-result  {\n  background-color: rgba(0, 0, 0, 0.1) !important;\n}\n'].join("\n"),dyslexic:!0}};const p=function(e){var t=h[e];return s().isUndefined(t)?p(o.default.DEFAULT_THEME):t.css};var f,m="user",g="project";async function b(e){var t=r.ZP.get(m,"guides","theme"),n=r.ZP.get(g,"guides","theme");return n&&n.length>0?n:t&&t.length>0?t:v(e)}function v(e){return e.getMetadata().then((function(e){return e.theme}))}const y={themes:function(){return s().cloneDeep(h)},getTheme:function(e){return s().cloneDeep(h[e])},getCss:p,applyTheme:function(e){var t=h[e];if(s().isUndefined(t))return s().isUndefined(f)&&(f=r.ZP.get(m,"guides","editor_theme_before_dyslexic")),r.ZP.set(m,"guides","theme",""),r.ZP.set(g,"guides","theme",""),r.ZP.set(m,"editor","theme",f),void r.ZP.commit();t.dyslexic?function(e){var t=r.ZP.get(g,"guides","theme");t&&r.ZP.set(g,"guides","theme",""),r.ZP.set(m,"guides","theme",e.id),f=t||"",r.ZP.set(m,"guides","editor_theme_before_dyslexic",f),r.ZP.set(m,"editor","theme","dyslexic")}(t):function(e){var t=r.ZP.get(m,"guides","theme");t&&r.ZP.set(m,"guides","theme",""),"dyslexic"===t&&(s().isUndefined(f)&&(f=r.ZP.get(m,"guides","editor_theme_before_dyslexic")),r.ZP.set(m,"editor","theme",f)),r.ZP.set(g,"guides","theme",e.id)}(t),r.ZP.commit()},getCurrentTheme:function(){return b(a.ZP)},getMetadataThemeContent:function(){return v(a.ZP)},getCurrentThemeContent:function(){return b(a.ZP).then((function(e){return p(e)}))}}},70623:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(49721),s=n(45540);const a={constructBasicEvent:function(){const e=s.Z.getEduStartedAssignmentInfo();return{assignmentId:e&&s.Z.getAssignmentId(e),projectId:i.default.currentProject.guid}}}},4629:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>i});const i={JUNIT_KEY:"junit_stored_result",NO_TESTS:-1,NO_JAVA:120,COMPILE_ERROR:121}},82678:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>w,getCurrentExecutions:()=>v,getStoredExecution:()=>y});var i=n(96486),s=n.n(i),a=n(93443),o=n(49721),r=n(72129),c=n(95611),l=n(9380),d=n(19575),u=n(50156),h=n(4629),p=r.default.containerManager,f=n(68058).I_,m=h.ZP.JUNIT_KEY,g=h.ZP.NO_TESTS,b=null;a.Z.subscribe("junit:execute",(async function(){const e=b?await d.default.promise.getState(b):null;null!==b&&e===d.default.promise.STATES.PENDING||(b=u.ZP.loadSettingsFromFile().then((function(e){return s().isEmpty(e.cases)?{code:g,stdout:"No executions"}:function(){function e(e){return f.set(m+":"+o.default.currentProject.guid,JSON.stringify(e)),e}const t=o.default.currentProject.guid;return c.Z.saveAllAndWait().then((function(){var e=l.Z.get("junit").timeout;return e=e>300?300:e,p.run(t,"/usr/share/codio/assessments/junit/junit_runner.sh",{cwd:"/home/codio/workspace",timeout:e,args:[]})})).then(e).catch((t=>{let{message:n}=t;return e(n)}))}()})))}));const v=async function(){if(null!==b)return b;var e=y();return e?JSON.parse(e):{code:g,stdout:"No executions"}},y=function(){return f.get(m+":"+o.default.currentProject.guid)},w={getCurrentExecutions:v,getStoredExecution:y}},50156:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>m});var i=n(96486),s=n.n(i),a=n(19575),o=n(49721),r=n(93443),c=".codioJUnit",l={};function d(e){return o.default.currentProject.exists(e)?o.default.currentProject.file(e):function(e){if(!o.default.currentProject)return Promise.reject(new Error("No project"));var t=a.default.path.parse(e),n=t.name,i=t.dir;return o.default.currentProject.createFile(n,i)}(e).then((function(){return o.default.currentProject.file(e)})).then((function(e){return e.content="{}",e}))}function u(e){return l[e]||(l[e]=d(e)),l[e]}function h(e,t){return t.content=JSON.stringify(e,void 0," "),e}var p,f;p=c,f=s().throttle(function(e){o.default.currentProject.exists(e)||delete l[e]}.bind(null,c),500),s().each(["item:moved:","item:moved:#from:","item:deleted:"],(function(e){r.Z.subscribe(e+p,f)}));const m={loadSettingsFromFile:function(){return u(c).then((function(e){return function(e){try{return JSON.parse(e.content)}catch(e){return{}}}(e)}))},updateSettingsContent:function(e){return u(c).then(h.bind(null,e))}}},12953:(e,t,n)=>{"use strict";n.d(t,{B:()=>i});const i=["ocaml","java","python"]},94117:(e,t,n)=>{"use strict";n.d(t,{VF:()=>s,_Q:()=>a});var i="file:///home/codio/workspace/";const s=function(e){return i+e},a=function(e){return e.replace(i,"")}},84346:(e,t,n)=>{"use strict";n.d(t,{Pl:()=>i,ZP:()=>s});const i="preview",s={EXT_NAME:"preview",SETTINGS_INDEX:"index_file",MODE_DEFAULT:i,RUN_MODE_PREVIEW:0}},86190:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(44952),s={},a={};s.openInNewWindow=function(e,t){i.Z.interpolate(e).then((function(e){t&&(a[e]=t);var n=a[e];n&&!n.closed?(n.location=e,n.focus()):(n=window.open(e,"_blank"),a[e]=n)}))};const o=s},72664:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var i=n(96486),s=n.n(i),a=n(49721),o=n(19575),r=n(97137),c=n(9380),l=n(54565),d=n(86190),u=n(84346);const h=JSON.parse('["txt","js","css","coffee","scss","sass","html","htm","md","less","pdf"]');var p=n(68058).I_,f={},m={coffee:"js",less:"css",scss:"css",sass:"css"};f.getCurrentFile=function(){var e,t=a.default.ide.panels.focus&&a.default.ide.panels.focus.activeTab();if(t){var n=t.extensionName;"tree"!==n&&"preview"!==n||(e=t.filename)}return e},f.getDefaultAddress=function(e,t){return e?f.url(t)+"."+e:f.url(t)},f.url=function(e){return 0===e.indexOf("http")?e:0===e.indexOf("//")?window.location.protocol+e:l.Z.get("backendSchema")+o.default.path.join(a.default.currentProject.backendDomain,e)},f.inWhiteList=function(e){if(!o.default.url.parse(e).pathname)return!0;var t=e.split("/"),n=s().last(t).match(/\.(\w+)$/);if(!n)return!0;var i=n[1];return s().includes(h,i)},f.findCompiledViewExtension=function(e){var t;for(var n in m)if(m[n]){var i=e.indexOf("."+n);if(-1!==i&&i===e.length-n.length-1){t=m[n];break}}return t},f.getProjectIndex=function(){var e=f.getProjectIndexFile();return e&&(e=a.default.currentProject.exists(e)?e:null),e},f.getProjectIndexFile=function(){var e=null,t=c.Z.get(u.ZP.EXT_NAME);return t&&t[u.ZP.SETTINGS_INDEX]&&(e=t[u.ZP.SETTINGS_INDEX]),e},f.addrInPreviewDomain=function(e){try{return 0===o.default.url.parse(e).hostname.indexOf(a.default.currentProject.backendDomain)}catch(e){return!1}},f.isDefaultPort=function(e){try{var t=o.default.url.parse(e).port;return"80"===t||void 0===t}catch(e){return!1}},f.showIndexNotFound=function(){r.Z.error("Unable to find an <code>"+o.default.safeHtml(f.getProjectIndexFile())+"</code> in your project. You can locate a file to preview in the filetree and then right-click it. Alternatively, check <code>Current File</code> in Preview dropdown menu and click Preview button")},f.openProjectIndex=function(e,t,n){t=t||u.ZP.MODE_DEFAULT;var i=f.getProjectIndex();i?e?f.openInCodioTab(t,i,"Preview for "+i):d.Z.openInNewWindow(f.url(i),n):f.showIndexNotFound()},f.previewStorageLinkId=function(e){return"preview-links-"+a.default.currentProject.guid+"-"+e},f.openPreview=function(e,t,n,i){if(n=n||u.ZP.MODE_DEFAULT,s().isEmpty(t))f.openProjectIndex(e,n);else if(e)f.openInCodioTab(n,t,t+" (Preview)");else{if("preview-url"===n){if(n="preview",void 0===(t=p.get(f.previewStorageLinkId(t))))return}else t=f.url(t);d.Z.openInNewWindow(t,i)}},f.openInCodioTab=function(e,t,n){var i=a.default.ide.panels,s=i.focus&&i.focus.isOpen(t,e);s?(i.focus.activateTab(s),i.focus.focus(),"preview-url"===e&&(t=p.get(f.previewStorageLinkId(t)),e="preview"),s._callExtensionSync("setUrl",t),s._callExtensionSync("refresh")):a.default.ide.open(e,t,{title:n})};const g=f},15454:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var i=n(96486),s=n.n(i),a=n(52308),o=n.n(a),r=n(177),c=n.n(r),l=n(19575),d=n(93443),u=n(34391);const h=c().compile('<div class="quick-list-dlg">\n    <div>\n        <label for="search">Search:</label>\n        <span role="combobox" aria-expanded="true" aria-owns="itemsList" aria-haspopup="listbox" id="search-listbox">\n            <input type="text" class="fuzzy-search" id="search" name="search" placeholder="{{searchPlaceholder}}" autocomplete="off" data-allowed-hotkeys="{{allowedHotkeys}}">\n        </span>\n    </div>\n    <div class="list-container">\n        <ul aria-labelledby="itemsList" role="listbox" id="itemsList" class="list"></ul>\n        <p id="warning-message">\n            Only showing the first {{maxItems}} results.\n        </p>\n        <div class="disable-list-container"></div>\n    </div>\n</div>\n');var p=l.default.KeyCode;function f(e,t){this._init(),this.getData=e,this.options=t,this.maxItems=t&&t.maxItems?t.maxItems:50}var m=f.prototype;function g(e){var t=this.content(),n=t.find(".fuzzy-search");t.find("#warning-message").hide(),n.focus(),l.default.promise.defer().then((function(){e._initializeList()}))}m._init=function(){this.dialog=null,this.itemsPerPage=0,this.selectedIndex=0,this.currentQueryId=null,this.currentQuery="",this.openAfterSearch=!1},m._getContent=function(){var e={searchPlaceholder:this.options.searchPlaceholder,allowedHotkeys:this.options.allowedHotkeys,maxItems:this.maxItems};return o()(h(e))},m._initializeList=function(){var e=this;this.getData().then((function(t){const n=e.dialog&&e.dialog.content();if(n){var i=n.find(".fuzzy-search"),a=n.find(".quick-list-dlg").find(".list-container");e._renderList(a,t),e._dropSelection(a),d.Z.on(a,"click",(function(t){e._onClick(t.target)}));var r="",c=function(){var n=o()(this).val().trim();n!==r&&(r=n,e._onQueryChanged(n,t,a))};c.call(i),d.Z.on(i,"keydown",(function(t){if(t.which===p.RETURN){if(t.preventDefault(),null===e.currentQueryId){var n=a.children("#itemsList");e._onClick(n.children(":visible").eq(e.selectedIndex))}else e.openAfterSearch=!0;return!1}s().includes([p.UP,p.DOWN,p.PAGE_UP,p.PAGE_DOWN],t.which)?e._handleSelectionChangeKeys(t,a):s().defer((function(){t.which!==p.TAB&&c.call(i)}))})),d.Z.on(i,"change",c)}}))},m._onQueryChanged=function(e,t,n){this.currentQueryId=Math.random(),this.currentQuery=e;var i=this,s=this.currentQueryId,a=function(e){!1!==(0,i.options.callback)(null,e)&&i.close()},o=function(){return this.currentQuery!==e||this.currentQueryId!==s}.bind(this);l.default.promise.delay(20).then((function(){return o()?Promise.reject(new Error("query was canceled")):i.options.filterOnQueryChanged(t,e,o)})).then((function(e){return o()?Promise.reject(new Error("query was canceled")):i.openAfterSearch?(e[0]&&a(e[0]),i.currentQueryId=null,i.openAfterSearch=!1,Promise.reject(new Error("was opened after search"))):(i._renderList(n,e),e)})).then((function(e){return l.default.promise.defer(e)})).then((function(e){o()||(i.openAfterSearch?e[0]&&a(e[0]):m._dropSelection(n),i.currentQueryId=null,i.openAfterSearch=!1)})).catch((()=>{}))},m._handleSelectionChangeKeys=function(e,t){e.preventDefault();var n,i=t.children("#itemsList"),s=i.children().length;e.which===p.UP?n=-1:e.which===p.DOWN?n=1:e.which===p.PAGE_UP?n=-this.itemsPerPage:e.which===p.PAGE_DOWN&&(n=this.itemsPerPage),this.selectedIndex+=n,this.selectedIndex=Math.max(this.selectedIndex,0),this.selectedIndex=Math.min(this.selectedIndex,s-1),this._updateSelection(i,!0)},m._updateSelection=function(e,t){var n=e.children().length,i=e.parent(),s=i.scrollTop(),a=e.children(0).outerHeight(),o=this.selectedIndex*a,r=i.prop("clientHeight");this.itemsPerPage=Math.floor(r/a);var c=a*(this.itemsPerPage-1);if(s-o>a?i.scrollTop(o):o-s-r>a?i.scrollTop(o-c):o<s?i.scrollTop(s-a):o>s+c?i.scrollTop(s+a):this.selectedIndex===this.maxItems-1&&i.scrollTop(s+30),this.selectedIndex<n){var l=e.children(":visible");l.removeClass("selected"),l.eq(this.selectedIndex).addClass("selected"),l.find('a[aria-selected="true"]').attr("aria-selected","false");var d=l.eq(this.selectedIndex).find("a");d.attr("aria-selected","true"),t&&d.focus()}},m._renderList=function(e,t){var n=s()(t).take(this.maxItems).map((function(e){return e})).value();e.children("#itemsList").remove();var i=o()(this.options.listTemplate({items:n}));e.prepend(i),function(e,t){t?e.show():e.hide()}(e.children("#warning-message"),t.length>this.maxItems);var a=this,r=this.dialog.content().find(".fuzzy-search");d.Z.on(i,"keydown",(function(t){var n=t.which||t.keyCode;s().includes([p.UP,p.DOWN,p.PAGE_UP,p.PAGE_DOWN],n)?a._handleSelectionChangeKeys(t,e):(n>47&&n<58||32===n||n>64&&n<91||n>95&&n<112||n>185&&n<193||n>218&&n<223)&&(r.focus(),s().defer((function(){r.trigger("change")})))})),d.Z.on(i,"focus","a",(function(t){var n=o()(t.target).data("index");a.selectedIndex=parseInt(n,10);var i=e.children("#itemsList");a._updateSelection(i)}))},m._dropSelection=function(e){this.selectedIndex=0;var t=e.children("#itemsList");if(t.children().length>0){var n=t.children(":visible");n.removeClass("selected"),n.eq(this.selectedIndex).addClass("selected")}t.parent().scrollTop(0)},m._onClick=function(e){(e=o()(e).closest("li")).length>0&&(!1!==this.options.callback(e)&&this.close())},m.toggle=function(){if(this.dialog)return this.close();var e=this;this._init();var t=s().partial(g,this),n=this._getContent();s().isFunction(this.options.beforeRender)&&this.options.beforeRender(n),this.dialog=new u.Z({title:this.options.title,content:n,onShow:t,showTransition:!1,showLoading:!1,doNotCloseOpened:!0,onClose:function(){e.currentQueryId=null,e.dialog=null},onHide:function(){e.close()}}),this.dialog.buttonsPane.remove()},m.close=function(){this.dialog&&this.dialog.close(),this.dialog=null},m.getDialog=function(){return this.dialog},m.enable=function(){var e=this.dialog&&this.dialog.content();e&&(e.find("input").removeAttr("disabled"),e.find(".btn").removeClass("disabled"),e.find(".disable-list-container").hide())},m.disable=function(){var e=this.dialog&&this.dialog.content();e&&(e.find("input").attr("disabled","disabled"),e.find(".btn").addClass("disabled"),e.find(".disable-list-container").show())};const b=f},36008:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var i=n(96486),s=n.n(i),a=n(177),o=n.n(a),r=n(49721),c=n(19575),l=30,d=70;function u(e,t,n,i,s){return(0!==(s=s||0)?c.default.promise.defer():Promise.resolve()).then((function(){if(i())return Promise.reject(new Error("query was cancelled"));var a=function(e,t,n,i){for(var s=i.scores,a=i.filteredFiles,o=e.files,r=e.query,c=e.lowerQuery,u=e.regex,p=Date.now(),f=e.pathScoreWeight,m=0,g=o.length;t+m<g;++m){if(m%d==0)if(Date.now()-p>l)break;var b=o[t+m],v=b.path,y=b.selfScore;if(""===r)s[v]=y;else{var w=b.lowerPath;if(!u.test(w))continue;a.push(b);var _=h({query:r,lowerQuery:c,path:v,lowerPath:w},n);s[v]=y+f*_}}return t+m}(e,s,t,n);return a>=e.files.length?n:u(e,t,n,i,a)}))}function h(e,t){var n=e.query.length,i=e.path.length;t.scoreArray.length<n*i&&(t.scoreArray.length=n*i*2,t.sequenceArray.length=n*i*2);var s=t.scoreArray,a=t.sequenceArray;e.fileNameIndex=e.path.lastIndexOf("/");for(var o=0;o<n;++o)for(var r=0;r<i;++r){var c=0===r?0:s[o*i+r-1],l=0===o||0===r?0:s[(o-1)*i+r-1],d=0===o||0===r?0:a[(o-1)*i+r-1],u=p(e,o,r,d);u&&l+u>c?(a[o*i+r]=d+1,s[o*i+r]=l+u):(a[o*i+r]=0,s[o*i+r]=c)}return s[n*i-1]}function p(e,t,n,i){return e.lowerQuery[t]!==e.lowerPath[n]?0:i?function(e,t,n,i){var s=t>n,a=0===t||"/"===e[t-1],o=10;s&&(o+=4);a&&(o+=5);return o+=4*i,o}(e.path,n-i,e.fileNameIndex,i):function(e,t,n){var i=e.path,s=function(e,t,n){if(0===n)return!0;var i=e.charAt(n-1);return"_"===i||"-"===i||"/"===i||"."===i||e[n-1]===t[n-1]&&e[n]!==t[n]}(i,e.lowerPath,n),a=n>e.fileNameIndex,o=0===n||"/"===i[n-1],r=e.query,c=e.lowerQuery,l=r[t]===i[n]&&r[t]!==c[t],d=10;o&&(d+=4);s&&(d+=2);l&&(d+=6);a&&(d+=4);n===e.fileNameIndex+1&&0===t&&(d+=5);a&&s&&(d+=3);return d}(e,t,n)}const f={filterAndScoreFiles:function(e,t,n){var i=(t=t.replace(/\s/g,"")).toLowerCase(),s=""===t?null:function(e){for(var t="^[]{}()\\.$*+?|-,",n="",i=0,s=e.length;i<s;++i){var a=e.charAt(i);-1!==t.indexOf(a)&&(a="\\"+a),i&&(n+="[^"+a+"]*"),n+=a}return new RegExp(n)}(i),a={filteredFiles:""===t?e:[],scores:{}},o=Math.max(Math.round(Math.log(e.length)/Math.LN10),1);return u({files:e,query:t,lowerQuery:i,regex:s,pathScoreWeight:Math.pow(10,o)},{scoreArray:[],sequenceArray:[]},a,n)}};var m=n(15454);var g=null;const b=o().compile('<ul aria-labelledby="itemsList" role="listbox" id="itemsList" tabindex="0" class="list quick-open">\n  {{#each items}}\n    <li role="none">\n      <a role="option" href="#" tabindex="-1" data-index="{{@index}}">\n        <h2 aria-hidden="true" class="name">{{name}}</h2>\n        <p class="path" title="{{path}}">{{path}}</p>\n      </a>\n    </li>\n  {{/each}}\n</ul>\n');function v(e,t,n){var i;t?i=t.find(".path").html():n&&(i=n.path),i&&s().isFunction(e)&&e(i)}function y(e,t,n){return c.default.promise.defer().then((function(){return f.filterAndScoreFiles(e,t,n)})).then((function(e){return c.default.promise.defer(e)})).then((function(e){if(n())return Promise.reject(new Error("query was cancelled"));var t=e.filteredFiles,i=e.scores;return s().sortBy(t,(function(e){return i[e.path]||0})),t}))}const w={open:function(e){if(!r.default.ide.isClosed){if(e=e||{},g&&g.dialog)return g.close();var t={title:e.title,maxItems:50,allowedHotkeys:e.allowedHotkeys,searchPlaceholder:e.searchPlaceholder,listTemplate:b,filterOnQueryChanged:y,callback:v.bind(this,e.onSelect),beforeRender:e.beforeRender};(g=new m.Z(e.getData,t)).toggle()}},close:function(){g&&g.close(),g=null},getDialog:function(){return g&&g.getDialog()},enable:function(){g&&g.enable()},disable:function(){g&&g.disable()}}},50276:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var i=n(96486),s=n.n(i),a=n(93443),o=n(49721),r=n(19575),c=n(36008),l=n(9380).A,d=a.Z.create(n(31663)),u=function(e){var t=e.lastIndexOf("/");return t<0?e:e.substring(t+1)},h=function(e){var t=s().clone(e.activeFiles);delete t[e.focusedFile];var n=[];s().forIn(e.openFiles,(function(t,i){s().has(e.activeFiles,i)||n.push(i)}));var i=s().keys(t).concat(n);return null!==e.focusedFile&&i.push(e.focusedFile),i},p=function(e){var t=null,n={},i={},a=o.default.ide.panels;return f(a.child,(function(a,o){if("tree"===a.extensionName){var r=a.filename;if(!s().find(e,(e=>{let{path:t}=e;return t.toLowerCase()===r.toLowerCase()})))return;o&&a.active&&(t=r),a.active&&(n[r]=1),i[r]=1}})),{focusedFile:t,activeFiles:n,openFiles:i}},f=function(e,t,n){s().forEach(e.children,(function(i){i.extension?t(i,e.hasFocus||n):f(i,t,n||e.hasFocus)}))};function m(e){l.execute("file","open",{ext:"tree",filename:e}),c.Z.close()}var g=function(e,t){c.Z.open({title:"Quick Open",allowedHotkeys:"ide:key_quick_open",searchPlaceholder:"enter first few letters of a file to open...",getData:()=>function(e){var t=e?e():o.default.currentProject.files({isCaseSensitive:!1,filesSeparate:!0}),n=p(t),i=h(n);return r.default.promise.defer().then((function(){var e=t.length,a=s().map(i,(function(t,n){var i=u(t);return{path:t,lowerPath:t.toLowerCase(),name:i,lowerName:i.toLowerCase(),selfScore:e-n-1}})),o=s()(n.openFiles);return s().forEach(t,(function(t){o.has(t.path)||(t.lowerPath=t.path.toLowerCase(),t.lowerName=t.name.toLowerCase(),t.selfScore=e-a.length-1,a.push(t))})),a}))}(e),onSelect:t||m})};a.Z.subscribe("command:ide:key_quick_open",s().debounce((function(){o.default.ide.isFullScreen&&d.changeFullscreenMode(),s().defer(g)}),200)),a.Z.subscribe("project:close",(function(){c.Z.close()}));const b={open:g}},10947:(e,t,n)=>{"use strict";n.d(t,{q:()=>a});var i=n(96486),s=n.n(i);const a=function(e,t){var n=null;return s().each(e,(function(e){return!(n=e.id===t?e:null)&&e.nodes&&(n=a(e.nodes,t)),!n})),n}},84439:(e,t,n)=>{"use strict";n.d(t,{O:()=>f});var i=n(96486),s=n.n(i),a=n(54565),o={id:"",title:"",command:"",onOff:{defaultValue:!1,toggle:!1}},r={title:"divider"},c=[{id:"preview-inside",title:"Inside ".concat(a.Z.get("whitelabel")),command:"preview:inside",onOff:{defaultValue:!1,toggle:!1}},{id:"preview-new-window",title:"New Browser Tab",command:"preview:new-window",onOff:{defaultValue:!1,toggle:!1}}];function l(e,t,n,i){var a=s().cloneDeep(o);return n=n.trim(),a.id=e+"-"+n,a.title=n,a.command=e+":select",a.params={id:a.id,title:n,data:t},i&&(a.onOff.defaultValue=!0),a}function d(e,t,n){n.length&&n[e](r),s().isArray(t)||(t=[t]),s().each(t,(function(t){n[e](t)}))}var u=d.bind(null,"push",{title:"Configure....",command:"run:settings",onOff:{defaultValue:!1,toggle:!1}}),h=d.bind(null,"unshift",{title:".codio file is not a valid JSON",command:"run:settings",onOff:{defaultValue:!1,toggle:!1}}),p=d.bind(null,"push",c);const f=function(e){var t=e.default,n=e["default preview"],i=s().map(e.commands,(function(e,n){return l("run",e,n,t===n)})),a=s().map(e.preview,(function(e,t){return l("preview",e,t,n===t)}));return!0===e.error&&(h(i),h(a)),p(a),u(i),u(a),{run:i,preview:a}}},69688:(e,t,n)=>{"use strict";n.d(t,{Q:()=>l});var i=n(96486),s=n.n(i),a=n(240),o=n.n(a),r=n(54565).Z.get("backendSchema"),c={commands:{},preview:{"Project Index (static)":r+"{{domain}}/{{index}}","Current File (static)":r+"{{domain}}/{{filepath}}","Box URL":"https://{{domain3000}}/"}};const l=function(e){if(s().isUndefined(e))return s().cloneDeep(c);var t,n,i=function(e){try{return JSON.parse(e)}catch(e){return-1}}((t=e,(new(o())).strip(t)));return-1===i?((n=s().cloneDeep(c)).error=!0,n):(s().isUndefined(i.commands)&&(i.commands={}),s().isUndefined(i.preview)&&(i.preview=s().cloneDeep(c.preview)),i)}},23147:(e,t,n)=>{"use strict";n.r(t);var i=n(96486),s=n.n(i),a=n(49721),o=n(93443),r=n(30844),c=n(44952),l=n(97137),d=n(95611),u=n(19575),h=n(72129),p=n(70623),f=n(71e3),m=n(54565);const g=h.default.UserEventManager;var b=n(9380).A,v=n(68058).I_,y=n(69688).Q,w=n(84439).O,_=o.Z.create(n(41839));const k=m.Z.get("backendSchema");var P=n(62809);P=P.replace(/\{schema}/gi,k);var C,x=".codio",E="menu-run-button",S="menu-preview-button",I={},A=[];async function T(e){e||b.execute("file","open",{ext:"tree",filename:x})}function j(e){var t=a.default.currentProject;if(t.exists(x))return T(e);var n=u.default.promise.deferred(),i=o.Z.subscribe("item:created:"+x,(function(){o.Z.unsubscribe(i),a.default.currentProject.file(x).then((function(e){s().defer((function(){e.content=P}))})).then((function(){T(e);var t=a.default.currentProject.getShareFile(x);s().defer((function(){t.save(),M(),n.resolve()}))}))}));return t.createFile(x,""),n.promise}function Z(e){var t=I[e];if(a.default.currentProject.isAdmin&&t){t.title;var n=t.command.split(":"),i=n.shift();n=n.join(":"),d.Z.saveAllAndWait().then((function(){b.execute(i,n,t.params)}))}}function O(e,t,n){void 0!==n&&function(e,t){var n=a.default.currentProject.guid;v.set("default-"+e+"-"+n,t)}(t,n);var i=function(e){var t=a.default.currentProject.guid;return v.get("default-"+e+"-"+t)}(t),o=s().find(e,{title:i});void 0===o&&(o=s().find(e,(function(e){return"divider"!==e.title})));var c="run"===t?E:S;r.ZP.switchItemInGroup(c,o.id),I[t]=o,r.ZP.setTitle(c,o.title),"preview"===t&&N()}function N(){var e=v.get("preview-new-window");_.updatePreviewMenuInside({onOff:{defaultValue:!e}}),_.updatePreviewMenuNewWindow({onOff:{defaultValue:e}})}function D(e){var t=w(e);C=t,r.ZP.setItems(E,t.run),r.ZP.setItems(S,t.preview),O(t.run,"run"),O(t.preview,"preview"),N()}function M(){var e=a.default.currentProject;if(e&&e.isAdmin)return e.exists(x)?void e.file(x).then((function(e){D(y(e.content))})):D(y())}function R(){a.default.currentProject.file(x).then((function(e){e.close(!0),M()}))}o.Z.subscribe("command:run:append",(function(e,t){var n=t.section,i=t.data;j(!0).then((function(){return a.default.currentProject.file(x)})).then((function(e){s().defer((function(){var t,o=e.content,r=new RegExp('"'+n+'"s?:s?'),c=o.match(r);if(c){var l=function(e,t){for(var n,i=0,s=0,a=e.length;s<a;s++)if(e[s]===t[0])1==++i&&(n={startPos:s});else if(e[s]===t[1]&&0==--i){n&&(n.endPos=s);break}return n}(o.substring(c.index,o.length),i instanceof Array?"[]":"{}");if(l){var u=c.index+l.startPos,h=c.index+l.endPos+1;t=o.substring(0,u)+JSON.stringify(i)+o.substring(h,o.length)}}if(!t){var p=o.lastIndexOf("}"),f=',\n  "'+n+'": '+JSON.stringify(i)+"\n";t=o.substring(0,p-1)+f+o.substring(p,o.length)}e.content=t;var m=a.default.currentProject.getShareFile(x);s().defer((function(){m.save(),s().delay((function(){d.Z.saveAllAndWait()}),100)}))}))}))})),o.Z.subscribe("command:run:execute",Z.bind(null,"run")),o.Z.subscribe("command:preview:execute",Z.bind(null,"preview")),o.Z.subscribe("command:ide:run",Z.bind(null,"run")),o.Z.subscribe("command:ide:preview",Z.bind(null,"preview")),o.Z.subscribe("command:run:settings",(function(){a.default.currentProject.exists(x)?T():j()})),o.Z.subscribe("command:run:select",(function(e,t){O(C.run,"run",t.arg.title);var n=t.arg.title,i=t.arg.data;s().isObject(i)&&(n=i.id,i=i.cmd),s().isString(i)&&s().isString(n)&&function(e,t){c.Z.interpolate(e).then((function(e){g.create(g.EventType.MENU_BUTTON,{...p.Z.constructBasicEvent(),command:e}),(0,f.Z)(e,t)})).catch((e=>{let{message:t}=e;return l.Z.error(t)}))}(s().trim(i),n)})),o.Z.subscribe("command:preview:select",(function(e,t){var n;O(C.preview,"preview",t.arg.title),n=t.arg.data,t.arg.title,b.execute("preview","url",{file:n})})),o.Z.subscribe("project:open",(function(){!function(){if(M(),A.push(o.Z.subscribe("item:deleted:"+x,R)),a.default.currentProject&&a.default.currentProject.is_manual_save)A.push(o.Z.subscribe("editor:save:"+x,M));else{var e=s().debounce(M,400);s().forEach(["file:change:","item:created:","item:moved:","item:moved:#file:"],(function(t){A.push(o.Z.subscribe(t+x,e))}))}}()})),o.Z.subscribe("project:permissionsUpdated:#projectId",M),o.Z.subscribe("project:preferencesUpdated",(function(){M()}))},35373:(e,t,n)=>{"use strict";n.r(t);var i=n(49721),s=n(93443),a=n(19575),o=n(34391),r=n(72129),c=n(94049),l=n(64998),d=n(97137),u=r.default.search;const h="replace cancelled",p="no matches";var f=null;function m(e,t){var n={close:e,hide:t};return null!==f?(f._params=n,f):(f=new o.Z({onClose:function(){f&&(f._params.close.apply(null,arguments),f=null)},onHide:function(){f&&(f._params.hide.apply(null,arguments),f=null)}}),f._params=n,f)}function g(e,t){return"Found "+e+" match(es) in "+t+" file(s)"}function b(){}s.Z.subscribe("search:global:search",(function(e,t){t.z=a.default.GUID();var n=l.ZP.encodeParams(t);i.default.ide.open("search",n,"Search Results "),c.Z.close()})),s.Z.subscribe("search:global:replace",(function(e,t){0===t.locations.length?delete t.locations:t.locations=t.locations.split(" ");var n=function(e){var t=m(b,b);return t.title('Searching for "'+e.pattern+'"...'),t.buttons([{title:"Cancel",class:"mb-cancel",onClick:function(){t.close()}}]),t.content(g(0,0)),t}(t);u.search(t).then((function(e){return r.default.standardCallbackTask({message:e.taskId})})).then((function(e){var t={};return t.items=e.totalMatches,t.files=e.filesCount,t.more=e.moreResults,n.content(g(t.items,t.files)),t})).then((function(e){return function(e){var t,n,i,s=a.default.promise.deferred(),r=e.items;function c(e){0===r?s.reject(new Error(p)):3!==e&&1!==e?s.resolve():s.reject(new Error(h))}0===r?(n="Nothing found",t="Nothing to replace",i=o.Z.MB_OK):(i=o.Z.MB_YESNO,n="Perform replace?",t="<p>You are about to replace "+(e.more?"more than ":"")+r+" occurrences across "+e.files+" files.</p>",e.more&&(t+="<p><strong>Your search returned more than 500 results</strong>, which we do not show here. Continuing with this replacement will not be limited, and all matches will be replaced.</p>"),t+="<p>Do you wish to continue?</p>");var l=c.bind(null,3),d=m(c,l);return d.title(n),d.content(t),d.buttons(i),s.promise}(e)})).then((function(){return u.replace(t)})).then((function(e){return r.default.standardCallbackTask(e)})).then((function(e){d.Z.info(e+" replacements done"),c.Z.close()})).catch((e=>{e.message!==h&&e.message!==p&&d.Z.error(e.message)}))}))},94049:(e,t,n)=>{"use strict";n.d(t,{Z:()=>T});var i=n(52308),s=n.n(i),a=n(96486),o=n.n(a),r=n(177),c=n.n(r),l=n(93443),d=n(49721),u=n(19575),h=n(97137);const p=c().compile('<div class="search-dialog">\n  <div tabindex="0"></div>\n  <form action="/" method="post" class="clearfix search-dialog-body">\n\n    <div class="options" role="toolbar" aria-label="Search options">\n      <div class="btn-group btn-group-vertical" data-toggle="buttons-checkbox">\n        <button type="button" id="snr-option-regexp" data-name="regexp" class="hint hint-right btn btn-inverse {{#if flags.regexp}}active{{/if}}" aria-label="Regular expression" aria-pressed="false">\n          <i class="ss-icon">flash</i>\n          <span class="hint-text">Regular expression</span>\n        </button>\n        <button type="button" id="snr-option-ignore-case" data-name="ignoreCase" class="hint hint-right btn btn-inverse {{#unless flags.ignoreCase}}active{{/unless}}" aria-label="Case sensitive" aria-pressed="false">\n          <i class="ss-icon">font</i>\n          <span class="hint-text">Case sensitive</span>\n        </button>\n        <button type="button" id="snr-option-whole-words" data-name="wholeWord" class="hint hint-right btn btn-inverse {{#if flags.wholeWord}}active{{/if}}" aria-label="Whole words" aria-pressed="false">\n          <i class="ss-icon">quote</i>\n          <span class="hint-text">Whole words</span>\n        </button>\n      </div>\n    </div>\n\n    <div class="fields form-horizontal">\n      <div class="row">\n        <label class="hint hint-top" for="pattern">Find</label>\n        <input name="pattern" id="pattern" type="text" value="{{pattern}}" placeholder="Find..." data-allowed-hotkeys="{{allowedHotkeys}}">\n      </div>\n\n      {{#unless local}}\n      <div class="row">\n        <label class="hint hint-top" for="locations">Where</label>\n        <input name="locations" id="locations" type="text" value="{{locationsCompiled}}" placeholder="All files and folders" data-allowed-hotkeys="{{allowedHotkeys}}">\n      </div>\n      {{/unless}}\n\n      {{#if showReplace}}\n      <div class="row">\n        <label class="hint hint-top" for="replacement">Replace</label>\n        <input name="replacement" id="replacement" type="text" value="{{replacement}}" placeholder="Replace..." data-allowed-hotkeys="{{allowedHotkeys}}">\n      </div>\n      {{/if}}\n    </div>\n    <div class="buttons">\n      {{#if showSearch}}\n      <button name="search" class="btn btn-search btn-inverse btn-action" aria-label="Find">\n        Find\n      </button>\n      {{/if}}\n\n      {{#if showReplace}}\n      <button name="replace" class="btn btn-replace btn-inverse btn-action" aria-label="Replace">\n        Replace\n      </button>\n      {{/if}}\n\n      {{#if showReplaceAll}}\n      <button name="replaceAll" class="btn btn-replace-all btn-inverse btn-action" aria-label="Replace All">\n        Replace All\n      </button>\n      {{/if}}\n    </div>\n\n    <button type="button" class="close" aria-label="Close panel" title="Close panel">\n      <i class="ss-icon" aria-hidden="true">close</i>\n    </button>\n  </form>\n  <div tabindex="0"></div>\n</div>\n');var f=l.Z.create(n(34063)),m=u.default.KeyCode,g=null,b=null,v={flags:{ignoreCase:!0}},y=["search:key_replaceProject","search:key_searchProject","ide:key_esc"].join(","),w=[],_=0,k=0;function P(e){var t=x(),n=function(e){if(!o().isString(e.pattern)||0===e.pattern.length)return!1;return!0}(t);if(n){var i=g.eventPrefix;f[e]({prefix:i},t)}else h.Z.error("Search field is empty.")}function C(){A()}function x(){var e={flags:{ignoreCase:!1}};return g.find("input, .options button").each((function(t,n){var i=(n=s()(n)).prop("name");n.is("button")?(i=n.data("name"),e.flags[i]="ignoreCase"===i?!n.hasClass("active"):n.hasClass("active")):e[i]=n.val()})),e}function E(){return 0===g.find(".btn-search").length?P("replace"):0===g.find(".btn-replace-all").length?P("search"):P("replace"),!1}function S(e){l.Z.on(e,"click",".close",C),l.Z.on(e,"submit","form",E),l.Z.on(e,"click","button.btn-action",(function(e){return 0===e.clientX&&0===e.clientY?E():(P(e.target.name),!1)})),l.Z.on(e,"keydown",".options button",(function(e){e.keyCode===m.ESC&&C(),e.keyCode===m.DOWN&&function(){++k>_&&(k=0);I()}(),e.keyCode===m.UP&&function(){--k<0&&(k=_);I()}()})),l.Z.on(e,"click",".options button",(function(){var e=s()(this);k=e.data("index");var t="true"===e.attr("aria-pressed")?"false":"true";e.attr("aria-pressed",t)})),l.Z.on(e,"focus",".options button",(function(){k=s()(this).data("index")}))}function I(){w[k].focus()}const A=function(){if(g){if(l.Z.off(w),w=[],u.default.removeTrapFocus(undefined),g.remove(),v=x(),g=null,f.close(),f.preformResize(),s()(b).closest(".CodeMirror").length){var e=d.default.currentEditor;e&&e.editor.focus()}else f.dialogClose();b=null}};l.Z.subscribe("project:close",A);const T={show:function(e,t,n){var i;if(!(i=e,!(!d.default.currentProject&&i||i&&d.default.currentProject.readOnly)))return;A(),b=document.activeElement;var a=v,r=d.default.currentEditor&&d.default.currentEditor.editor,c=r&&r.getSelection();let l;c&&!c.isEmpty()&&(l=r.getValueInRange(c)),a.pattern=l||a.pattern,a.showReplace=e,a.locationsCompiled=a.locations||"",o().each(n,(function(e,t){a[t]=e})),a.allowedHotkeys=y;var u=s()(p(a));u.find("input, .options button").each((function(e,t){(t=s()(t)).is("button")&&(t.data("index",e),w.push(t))})),w.length>0&&(_=w.length-1),S(u),s()("div.ac").append(u);var h=u.find("input[name=pattern]");return h.focus(),h.select(),(g=u).eventPrefix=t,f.preformResize(),g},close:A}},27090:(e,t,n)=>{"use strict";n.r(t);var i=n(96486),s=n.n(i),a=n(49721),o=n(93443),r=n(95611),c=n(94049),l={showSearch:!0},d={showReplace:!0};var u=[{path:"",type:""}];o.Z.subscribe("filetree:select",(function(e,t){u=t})),o.Z.subscribe("command:search:key_searchProject",function(e){var t=s().cloneDeep(l);c.Z.show(!1,e,t)}.bind(null,"global")),o.Z.subscribe("command:search:key_replaceProject",function(e){a.default.currentProject&&r.Z.saveAllAndWait().then((function(){var t=s().cloneDeep(d);c.Z.show(!0,e,t)}))}.bind(null,"global")),o.Z.subscribe("command:search:in_folder",(function(){if(a.default.currentProject){var e=s().map(u,(function(e){return"dir"===e.type&&e.path.length>0?e.path+"/** ":""})).join(""),t=s().cloneDeep(l);t.locationsCompiled=e,c.Z.show(!1,"global",t)}})),o.Z.subscribe("command:ide:key_esc",c.Z.close)},64998:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>l});var i=n(96486),s=n.n(i);var a={"{bsplash}":"\\","{splash}":"/","{qmark}":"?"};function o(e){return s().each(a,(function(t,n){e=e.split(n).join(t)})),e}function r(e){return s().each(a,(function(t,n){e=e.split(t).join(n)})),e}function c(e){var t={regexp:!1,ignoreCase:!1,wholeWord:!1};if("_"===e)return t;for(var n=0;n<e.length;++n)switch(e[n]){case"r":t.regexp=!0;break;case"i":t.ignoreCase=!0;break;case"w":t.wholeWord=!0}return t}const l={encodeToCss:function(e){return btoa(window.escape(JSON.stringify(e)))},decodeFromCss:function(e){return JSON.parse(window.unescape(atob(e)))},decodeParams:function(e){var t,n=e.split("/");return{pattern:o(n[0]),locations:(t=n[1],"_"===t?"":o(t)),flags:c(n[2])}},encodeParams:function(e){var t,n,i;return[encodeURIComponent(r(e.pattern)),(i=e.locations,0===i.length?"_":r(i)),(t=e.flags,n="",s().each(t,(function(e,t){e&&(n+=t[0])})),0===n.length?"_":n),e.z].join("/")}}},26433:(e,t,n)=>{"use strict";n.r(t);var i=n(96486),s=n.n(i),a=n(93443),o=n(9380),r=a.Z.create(n(66147));function c(e){return!!e}function l(e){return!e}function d(e){return e||null}function u(){var e={editor:{font_size:[11,12,13,14,15,16,18,20,22,24],tab_size:[1,2,3,4,5,6,7,8],indent_with_tabs:l,navigate_within_soft_tabs:d,wrap:c,theme:o.Z.descriptions().editor.theme.values},terminal:{font_size:[11,12,13,14,15,16,18,20,22,24],theme:o.Z.descriptions().terminal.theme.values}};s().each(e,(function(e,t){var n=o.Z.get(t),i=o.Z.getProject(t);n&&s().each(e,(function(e,a){var o=!s().isUndefined(i[a]);if(s().isFunction(e)||!s().isObject(e)&&!s().isArray(e))r.updateMenuItem({id:t+"_"+a},{onOff:{defaultValue:e(n[a]),toggle:!1},disabled:o,command:"settings:update:user",params:{plugin:t,key:a,value:!n[a]}});else{var c=[];s().each(e,(function(e){var i={title:String(e).toString(),onOff:{defaultValue:n[a]===e,toggle:!1},command:"settings:update:user",params:{plugin:t,key:a,value:e}};c.push(i)})),r.updateMenuItem({id:t+"_"+a},{items:c,disabled:o})}}))}))}a.Z.subscribe("settings:changed",u),a.Z.subscribe("ide:open",u)},78705:(e,t,n)=>{"use strict";n.r(t);var i=n(52308),s=n.n(i);n(32093),s().fn.qtip.defaults=s().extend(!0,{},s().fn.qtip.defaults,{position:{my:"bottom center",at:"top center",viewport:s()(window),adjust:{resize:!0,method:"shift"}},style:{classes:"qtip-dark"},hide:{fixed:!0}})},5989:(e,t,n)=>{var i={"./ada":[31421,9,9949],"./ada.js":[31421,9,9949],"./cobol":[82199,9,9949],"./cobol.js":[82199,9,9949],"./d":[59850,9,9949],"./d.js":[59850,9,9949],"./dart":[95044,9,9949],"./dart.js":[95044,9,9949],"./elixir":[38885,9,9949],"./elixir.js":[38885,9,9949],"./erlang":[84105,9,9949],"./erlang.js":[84105,9,9949],"./fortran":[64207,9,9949],"./fortran.js":[64207,9,9949],"./groovy":[5,9,9949],"./groovy.js":[5,9,9949],"./haskell":[82139,9,9949],"./haskell.js":[82139,9,9949],"./julia":[37645,9,9949],"./julia.js":[37645,9,9949],"./ocaml":[10835,9,9949],"./ocaml.js":[10835,9,9949],"./octave":[36886,3,9949],"./octave.js":[36886,3,9949],"./racket":[21934,9,9949],"./racket.js":[21934,9,9949],"./sbcl":[75534,9,9949],"./sbcl.js":[75534,9,9949],"./scala":[17419,9,9949],"./scala.js":[17419,9,9949]};function s(e){if(!n.o(i,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=i[e],s=t[0];return n.e(t[2]).then((()=>n.t(s,16|t[1])))}s.keys=()=>Object.keys(i),s.id=5989,e.exports=s},57293:(e,t,n)=>{var i={"./Handlebars.tmLanguage.json":[53734,3734],"./JSON.tmLanguage.json":[22951,2951],"./JavaScript.tmLanguage.json":[7779,7779],"./MagicPython.tmLanguage.json":[39315,9315],"./TypeScript.tmLanguage.json":[16737,6737],"./asm.tmLanguage.json":[26485,6485],"./batchfile.tmLanguage.json":[99308,9308],"./c.tmLanguage.json":[50559,559],"./clojure.tmLanguage.json":[36177,6177],"./coffeescript.tmLanguage.json":[19470,9470],"./cpp.tmLanguage.json":[37330,7330],"./csharp.tmLanguage.json":[48257,8257],"./cshtml.tmLanguage.json":[66425,6425],"./css.tmLanguage.json":[89343,8169],"./dart.tmLanguage.json":[14590,4590],"./docker.tmLanguage.json":[33921,3921],"./fsharp.tmLanguage.json":[41982,1982],"./go.tmLanguage.json":[2936,2936],"./groovy.tmLanguage.json":[58773,8773],"./html.tmLanguage.json":[51587,4067],"./ini.tmLanguage.json":[9441,9441],"./java.tmLanguage.json":[52361,2361],"./julia.tmLanguage.json":[1178,1178],"./less.tmLanguage.json":[80583,583],"./lua.tmLanguage.json":[93849,3849],"./markdown.tmLanguage.json":[15248,5248],"./objective-c.tmLanguage.json":[90648,648],"./perl.tmLanguage.json":[31966,1966],"./php.tmLanguage.json":[34602,4602],"./powershell.tmLanguage.json":[50519,519],"./pug.tmLanguage.json":[60564,564],"./r.tmLanguage.json":[69410,9410],"./ruby.tmLanguage.json":[3905,3905],"./rust.tmLanguage.json":[11784,1784],"./scss.tmLanguage.json":[46229,6229],"./shell-unix-bash.tmLanguage.json":[93614,3614],"./sql.tmLanguage.json":[38646,8646],"./swift.tmLanguage.json":[1691,1691],"./xml.tmLanguage.json":[97614,7614],"./yaml.tmLanguage.json":[31846,1846]};function s(e){if(!n.o(i,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=i[e],s=t[0];return n.e(t[1]).then((()=>n.t(s,19)))}s.keys=()=>Object.keys(i),s.id=57293,e.exports=s},85520:(e,t,n)=>{var i={"./3024-day.json":[43424,3424],"./3024-night.json":[55445,5445],"./ambiance.json":[14850,4850],"./base16-dark.json":[71347,1347],"./base16-light.json":[26646,6646],"./blackboard.json":[57983,7983],"./bold.json":[93715,3715],"./cobalt.json":[87810,7810],"./default.json":[56274,6274],"./dyslexic.json":[35868,5868],"./earthsong.json":[82043,2043],"./eclipse.json":[35739,5739],"./elegant.json":[629,629],"./erlang-dark.json":[2607,2607],"./frontier.json":[86858,6858],"./juicy.json":[77670,7670],"./lesser-dark.json":[3549,3549],"./mbo.json":[59926,9926],"./mellow.json":[89853,9853],"./midnight.json":[66527,6527],"./monokai.json":[93770,3770],"./neat.json":[10859,859],"./night.json":[53283,3283],"./ocean-dark.json":[66115,6115],"./ocean-light.json":[98835,8835],"./paraiso-dark.json":[5143,5143],"./paraiso-light.json":[44124,4124],"./pastel-on-dark.json":[1410,1410],"./pastel.json":[88459,8459],"./peacock.json":[38366,8366],"./rubyblue.json":[49520,9520],"./solarized-dark.json":[52200,2200],"./solarized-light.json":[44074,4074],"./the-matrix.json":[26774,6774],"./tomorrow-night-bright.json":[21465,1465],"./tomorrow-night-eighties.json":[18944,8944],"./twilight.json":[45260,5260],"./vibrant-ink.json":[15306,5306],"./xq-dark.json":[42950,2950],"./xq-light.json":[12744,2744],"./zenburn.json":[79418,9418]};function s(e){if(!n.o(i,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=i[e],s=t[0];return n.e(t[1]).then((()=>n.t(s,19)))}s.keys=()=>Object.keys(i),s.id=85520,e.exports=s},94748:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTZEaa/1AAAAHUlEQVQYV2PYvXu3JAi7uLiAMaYAjAGTQBPYLQkAa/0Zef3qRswAAAAASUVORK5CYII="},6161:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIHZpZXdCb3g9IjAgMCA1MyAzNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwKSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNDguMDM2NCA0LjAxMDQySDQuMDA3NzlMNC4wMDc3OSAzMi4wMjg2SDQ4LjAzNjRWNC4wMTA0MlpNNC4wMDc3OSAwLjAwNzgxMjVDMS43OTcyMSAwLjAwNzgxMjUgMC4wMDUxODc5OSAxLjc5OTg0IDAuMDA1MTg3OTkgNC4wMTA0MlYzMi4wMjg2QzAuMDA1MTg3OTkgMzQuMjM5MiAxLjc5NzIxIDM2LjAzMTIgNC4wMDc3OSAzNi4wMzEySDQ4LjAzNjRDNTAuMjQ3IDM2LjAzMTIgNTIuMDM5IDM0LjIzOTIgNTIuMDM5IDMyLjAyODZWNC4wMTA0MkM1Mi4wMzkgMS43OTk4NCA1MC4yNDcgMC4wMDc4MTI1IDQ4LjAzNjQgMC4wMDc4MTI1SDQuMDA3NzlaTTguMDEwNDIgOC4wMTMwMkgxMi4wMTNWMTIuMDE1Nkg4LjAxMDQyVjguMDEzMDJaTTIwLjAxODIgOC4wMTMwMkgxNi4wMTU2VjEyLjAxNTZIMjAuMDE4MlY4LjAxMzAyWk0yNC4wMjA4IDguMDEzMDJIMjguMDIzNFYxMi4wMTU2SDI0LjAyMDhWOC4wMTMwMlpNMzYuMDI4NiA4LjAxMzAySDMyLjAyNlYxMi4wMTU2SDM2LjAyODZWOC4wMTMwMlpNNDAuMDMxMiA4LjAxMzAySDQ0LjAzMzlWMTIuMDE1Nkg0MC4wMzEyVjguMDEzMDJaTTE2LjAxNTYgMTYuMDE4Mkg4LjAxMDQyVjIwLjAyMDhIMTYuMDE1NlYxNi4wMTgyWk0yMC4wMTgyIDE2LjAxODJIMjQuMDIwOFYyMC4wMjA4SDIwLjAxODJWMTYuMDE4MlpNMzIuMDI2IDE2LjAxODJIMjguMDIzNFYyMC4wMjA4SDMyLjAyNlYxNi4wMTgyWk00NC4wMzM5IDE2LjAxODJWMjAuMDIwOEgzNi4wMjg2VjE2LjAxODJINDQuMDMzOVpNMTIuMDEzIDI0LjAyMzRIOC4wMTA0MlYyOC4wMjZIMTIuMDEzVjI0LjAyMzRaTTE2LjAxNTYgMjQuMDIzNEgzNi4wMjg2VjI4LjAyNkgxNi4wMTU2VjI0LjAyMzRaTTQ0LjAzMzkgMjQuMDIzNEg0MC4wMzEyVjI4LjAyNkg0NC4wMzM5VjI0LjAyMzRaIiBmaWxsPSIjNDI0MjQyIi8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDAiPgo8cmVjdCB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIGZpbGw9IndoaXRlIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg=="},51096:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIHZpZXdCb3g9IjAgMCA1MyAzNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwKSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNDguMDM2NCA0LjAxMDQySDQuMDA3NzlMNC4wMDc3OSAzMi4wMjg2SDQ4LjAzNjRWNC4wMTA0MlpNNC4wMDc3OSAwLjAwNzgxMjVDMS43OTcyMSAwLjAwNzgxMjUgMC4wMDUxODc5OSAxLjc5OTg0IDAuMDA1MTg3OTkgNC4wMTA0MlYzMi4wMjg2QzAuMDA1MTg3OTkgMzQuMjM5MiAxLjc5NzIxIDM2LjAzMTIgNC4wMDc3OSAzNi4wMzEySDQ4LjAzNjRDNTAuMjQ3IDM2LjAzMTIgNTIuMDM5IDM0LjIzOTIgNTIuMDM5IDMyLjAyODZWNC4wMTA0MkM1Mi4wMzkgMS43OTk4NCA1MC4yNDcgMC4wMDc4MTI1IDQ4LjAzNjQgMC4wMDc4MTI1SDQuMDA3NzlaTTguMDEwNDIgOC4wMTMwMkgxMi4wMTNWMTIuMDE1Nkg4LjAxMDQyVjguMDEzMDJaTTIwLjAxODIgOC4wMTMwMkgxNi4wMTU2VjEyLjAxNTZIMjAuMDE4MlY4LjAxMzAyWk0yNC4wMjA4IDguMDEzMDJIMjguMDIzNFYxMi4wMTU2SDI0LjAyMDhWOC4wMTMwMlpNMzYuMDI4NiA4LjAxMzAySDMyLjAyNlYxMi4wMTU2SDM2LjAyODZWOC4wMTMwMlpNNDAuMDMxMiA4LjAxMzAySDQ0LjAzMzlWMTIuMDE1Nkg0MC4wMzEyVjguMDEzMDJaTTE2LjAxNTYgMTYuMDE4Mkg4LjAxMDQyVjIwLjAyMDhIMTYuMDE1NlYxNi4wMTgyWk0yMC4wMTgyIDE2LjAxODJIMjQuMDIwOFYyMC4wMjA4SDIwLjAxODJWMTYuMDE4MlpNMzIuMDI2IDE2LjAxODJIMjguMDIzNFYyMC4wMjA4SDMyLjAyNlYxNi4wMTgyWk00NC4wMzM5IDE2LjAxODJWMjAuMDIwOEgzNi4wMjg2VjE2LjAxODJINDQuMDMzOVpNMTIuMDEzIDI0LjAyMzRIOC4wMTA0MlYyOC4wMjZIMTIuMDEzVjI0LjAyMzRaTTE2LjAxNTYgMjQuMDIzNEgzNi4wMjg2VjI4LjAyNkgxNi4wMTU2VjI0LjAyMzRaTTQ0LjAzMzkgMjQuMDIzNEg0MC4wMzEyVjI4LjAyNkg0NC4wMzM5VjI0LjAyMzRaIiBmaWxsPSIjQzVDNUM1Ii8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDAiPgo8cmVjdCB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIGZpbGw9IndoaXRlIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg=="},99393:e=>{"use strict";e.exports='{{#each source.answers}}\n<li class="item-div">\n  <div class="actions">\n    <button class="up-btn move action-btn" title="Move up">\n      <span class="iconify-inline" data-icon="@codio:mdi:arrow-up-bold"></span>\n    </button>\n    <button class="remove-btn delete action-btn" title="Remove answer" aria-label="Remove answer">\n      <span class="iconify-inline" data-icon="@codio:mdi:trash-can-outline"></span>\n    </button>\n    <button class="down-btn move action-btn" title="Move down">\n      <span class="iconify-inline" data-icon="@codio:mdi:arrow-down-bold"></span>\n    </button>\n  </div>\n  <div class="fields list-item-body">\n    <input type="hidden" name="_id" value="{{_id}}"/>\n    <div class="correct">\n      <label class="form-label">Correct</label>\n      <label class="{{#if ../source.multipleResponse}}toggle{{else}}radiobutton{{/if}}">\n        <input type="{{#if ../source.multipleResponse}}checkbox{{else}}radio{{/if}}" name="correct" {{#if correct}}checked="checked"{{/if}}/>\n        <span class="toggle-label"></span>\n        <span class="toggle-handle"></span>\n      </label>\n    </div>\n    <div class="answer preview-area-container">\n      <label class="form-label">Answer</label>\n      <a href="javascript:void(0)" class="answer-preview-button preview-button"><i class="ss-icon">view</i></a>\n      <textarea\n        class="answer-textarea preview-field-with-content"\n        placeholder="Answer"\n        name="answer"\n        rows="2"\n        ></textarea>\n      <div class="preview-container">preview content</div>\n    </div>\n  </div>\n</li>\n{{/each}}\n'},47380:e=>{"use strict";e.exports='{{#each this.source.metadata.tags}}\n  <li class="tag-item">\n    <div class="tag-actions">\n    {{#unless ../readOnly}}\n    {{#unless ../required}}\n      <a href="javascript:void(0)" class="remove-tag-btn delete" title="Remove tag" aria-label="Remove tag">\n        <span class="iconify-inline" data-icon="@codio:mdi:trash-can-outline"></span>\n      </a>\n    {{/unless}}\n    {{/unless}}\n    </div>\n    <div class="tag-name">\n      <input\n        name="tag_name"\n        type="text"\n        value="{{this.name}}"\n        placeholder="Tag name"\n        class="js-typeahead js-tag tag-name-input"\n        {{#if ../readOnly}}readonly{{/if}}\n        {{#if this.required}}readonly{{/if}}\n        {{#if this.required}}required{{/if}}\n      />\n    </div>\n    <div class="tag-value">\n      <input\n        name="tag_value"\n        type="text"\n        value="{{this.value}}"\n        placeholder="Tag value"\n        class="js-typeahead js-value tag-value-input"\n        {{#if ../readOnly}}readonly{{/if}}\n        {{#if this.required}}placeholder="Enter {{this.name}} here..."{{/if}}\n      />\n    </div>\n  </li>\n{{/each}}\n'},80470:e=>{"use strict";e.exports='{{#each source.sequence}}\n<li class="item-div collapsed">\n  <div class="fields list-item-body">\n    <div class="item-row">\n      <div class="item-column-0">\n        <span class="item-index">{{ add1 @index}}</span>\n      </div>\n      <div class="item-column">\n        <div class="item-row assessment-coc-item-row-1">\n          <div class="collapse-expand-container">\n            <button class="icon-button test-case-expandBtn" aria-label="Expand" title="Expand test case">\n              <span class="iconify-inline" data-icon="@codio:mdi:chevron-right"></span>\n            </button>\n            <button class="icon-button test-case-collapseBtn" aria-label="Collapse" title="Collapse test case">\n              <span class="iconify-inline" data-icon="@codio:mdi:chevron-down"></span>\n            </button>\n          </div>\n          <div class="item-column">\n            <div class="form-fieldset">\n              <label class="form-label">Input - Arguments</label>\n              <input\n                type="text"\n                class="arguments generate_arguments"\n                name="arguments"\n                value="{{#if this.arguments}}{{this.arguments}}{{/if}}"\n              />\n            </div>\n            <div class="form-fieldset form-fieldset--large assessment-coc-item-stdin">\n              <label class="form-label">Input - STDIN</label>\n              <textarea\n                class="input-textarea generate_input"\n                name="input"\n                rows="4"\n              >{{#if this.input}}{{this.input}}{{/if}}</textarea>\n            </div>\n          </div>\n          <div class="item-column">\n            <div class="form-fieldset form-fieldset--large output-textarea-fieldset">\n              <label class="form-label">Expected Output</label>\n              <textarea\n                class="output-textarea"\n                name="output"\n                rows="6"\n              >{{#if this.output}}{{this.output}}{{/if}}</textarea>\n            </div>\n          </div>\n        </div>\n        <div class="item-row assessment-coc-item-row-2">\n          <div class="assessment-coc-item-show-feedback">\n            <div class="feedback">\n              <div class="form-fieldset assessment-coc-feedback-toggle">\n                <label class="form-label">Show error feedback</label>\n                <label class="toggle">\n                  <input type="checkbox" name="showFeedback" {{#if this.showFeedback}}checked{{/if}}/>\n                  <span class="toggle-label"></span>\n                  <span class="toggle-handle"></span>\n                </label>\n              </div>\n              <div class="form-fieldset form-fieldset--large output-feedback-fieldset {{#unless this.showFeedback}}hide{{/unless}}">\n                <label class="form-label">Error feedback</label>\n                <textarea\n                  class="feedback-textarea"\n                  name="feedback"\n                  rows="2"\n                ></textarea>\n              </div>\n            </div>\n          </div>\n          <div class="assessment-coc-item-actions">\n            <div class="test-case-check-state"></div>\n            <div class="test-case-actions">\n              <button type="button" class="btn btn-default test-case-action test-case-generateOutputBtn">Run Test</button>\n              <button type="button" class="btn btn-default test-case-action test-case-checkBtn">Check Test</button>\n              <div class="flex-spacer"></div>\n              <button type="button" class="btn btn-danger test-case-action test-case-removeBtn">Delete</button>\n            </div>\n            <div class="test-case-check-output-container">\n              <label class="form-label">Output</label>\n              <div class="test-case-check-output"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</li>\n{{/each}}\n'},93800:e=>{"use strict";e.exports='<div class="generate-form-preview {{#unless assessment}}generate-form-preview--info{{/unless}}">\n  {{> aEditorGenAssessmentPreviewLoader}}\n  <div class="generate-form-preview-info">\n    Here, you can preview the generated assessment. If you wish to guide the\n    prompt generation, add it to the Generation Prompt field. Leave the field\n    blank if all the information you wish to have used is on the guide page.\n  </div>\n  <div class="generate-form-preview-result">\n    <div class="generate-form-preview-nav-bar">\n      <button\n        type="button"\n        class="btn btn-default generate-form-preview-arrow-back"\n        aria-label="Previous generated content"\n        {{#if disableBack}}disabled{{/if}}\n      >\n      Previous result\n      </button>\n      <button\n        type="button"\n        class="btn btn-default generate-form-preview-arrow-forward"\n        aria-label="Next generated content"\n        {{#if disableForward}}disabled{{/if}}\n      >\n      Next result\n      </button>\n    </div>\n    <div class="generate-form-preview-view">\n      <div class="generate-assessment-preview-name">{{assessment.source.name}}</div>\n      <div class="generate-assessment-preview-instructions js-markdown">{{assessment.source.instructions}}</div>\n      <div class="generate-assessment-guidance js-markdown">{{assessment.source.guidance}}</div>\n      {{> aEditorGenAssessmentPreviewCustom}}\n    </div>\n    <div class="generate-form-vote-buttons">\n      <button class="generate-form-vote-btn generate-form-upvote-btn {{#if upVote}}generate-form-vote-btn--active{{/if}}">\n        <span class="iconify-inline" data-icon="@codio:mdi:thumb-up"></span>\n      </button>\n      <button class="generate-form-vote-btn generate-form-downvote-btn {{#if downVote}}generate-form-vote-btn--active{{/if}}">\n        <span class="iconify-inline" data-icon="@codio:mdi:thumb-down"></span>\n      </button>\n    </div>\n  </div>\n</div>\n'},11359:e=>{"use strict";e.exports='<div data-id="{{id}}" class="assessments-grade-rubrics--item">\n    <input type="number" min="0" max="1000" value="{{weight}}" class="assessments-grade-rubrics--weight-edit">\n    <input type="text" maxlength="1000" value="{{message}}" class="assessments-grade-rubrics--message-edit">\n    <button class="assessments-grade-rubrics--itemClose icon-button" title="Remove rubric" aria-label="Remove rubric">\n        <span class="iconify-inline" data-icon="@codio:mdi:trash-can-outline"></span>\n    </button>\n</div>\n'},28462:e=>{"use strict";e.exports='<div class="llm-rubric-item-container">\n  <div class="item-column-0">\n    <span class="item-index">{{id}}</span>\n    <button class="icon-button remove-btn remove-rubric-btn" title="Remove rubric" aria-label="Remove rubric">\n      <span class="iconify-inline" data-icon="@codio:mdi:trash-can-outline"></span>\n    </button>\n  </div>\n  <div class="item-column-1">\n    <input\n            type="hidden"\n            class="assessment-llm-based-rubric-id-input"\n            name="id"\n            value="{{id}}"\n    />\n    <div class="form-fieldset assessment-llm-based-rubric-text">\n      <label class="form-label" for="assessment-llm-based-rubric-text-input-{{id}}">Rubric</label>\n      <input\n        id="assessment-llm-based-rubric-text-input-{{id}}"\n        type="text"\n        class="assessment-llm-based-rubric-text-input"\n        name="title"\n        value="{{#if this.title}}{{this.title}}{{/if}}"\n      />\n    </div>\n    <div class="form-fieldset assessment-llm-based-rubric-text">\n      <label class="form-label" for="assessment-llm-based-rubric-description-input-{{id}}">Description</label>\n      <input\n              id="assessment-llm-based-rubric-description-input-{{id}}"\n              type="text"\n              class="assessment-llm-based-rubric-description-input"\n              name="description"\n              value="{{#if this.description}}{{this.description}}{{/if}}"\n      />\n    </div>\n  </div>\n  <div class="item-column-2">\n    <div class="form-fieldset assessment-llm-based-rubric-weight">\n      <label class="form-label" for="assessment-llm-based-rubric-description-points-{{id}}">Points</label>\n      <input\n              id="assessment-llm-based-rubric-description-points-{{id}}"\n              type="number"\n              class="assessment-llm-based-rubric-points-input"\n              min="1"\n              max="1000"\n              value="{{#exists this.points}}{{this.points}}{{else}}0{{/exists}}"\n              name="points"\n      />\n    </div>\n  </div>\n</div>\n'},91296:e=>{"use strict";e.exports='<div class="generate-form-preview {{#unless content}}generate-form-preview--info{{/unless}}">\n  {{> aEditorGenContentPreviewLoader}}\n  <div class="generate-form-preview-info">\n    A preview of the generated content will appear here.\n    LLMs can make errors, it is important to review the material.\n  </div>\n  <div class="generate-form-preview-result">\n    <div class="generate-form-preview-nav-bar">\n      <button\n        type="button"\n        class="btn btn-default generate-form-preview-arrow-back"\n        aria-label="Previous generated content"\n        {{#if disableBack}}disabled{{/if}}\n      >\n        Previous result\n      </button>\n      <button\n        type="button"\n        class="btn btn-default generate-form-preview-arrow-forward"\n        aria-label="Next generated content"\n        {{#if disableForward}}disabled{{/if}}\n      >\n        Next result\n      </button>\n    </div>\n    <div class="generate-form-preview-view js-markdown">\n      {{content}}\n    </div>\n    <div class="generate-form-vote-buttons">\n      <button class="generate-form-vote-btn generate-form-upvote-btn {{#if upVote}}generate-form-vote-btn--active{{/if}}">\n        <span class="iconify-inline" data-icon="@codio:mdi:thumb-up"></span>\n      </button>\n      <button class="generate-form-vote-btn generate-form-downvote-btn {{#if downVote}}generate-form-vote-btn--active{{/if}}">\n        <span class="iconify-inline" data-icon="@codio:mdi:thumb-down"></span>\n      </button>\n    </div>\n  </div>\n</div>\n'},79165:e=>{"use strict";e.exports='<i class="spinner assessments-grade-rubrics--loader svg icon icon-loader-dark" />\n'},62809:e=>{"use strict";e.exports='{\n// Configure your Run and Preview buttons here.\n\n// Run button configuration\n  "commands": {\n        "Node version": "node --version"\n  },\n\n// Preview button configuration\n  "preview": {\n        "Project Index (static)": "{schema}{{domain}}/{{index}}",\n        "Current File (static)": "{schema}{{domain}}/{{filepath}}",\n        "Box URL": "https://{{domain3000}}/"\n  }\n}'},59816:()=>{},89896:()=>{},66005:()=>{},28022:()=>{},25893:()=>{},78157:()=>{},95506:()=>{},4162:()=>{},85549:()=>{},22414:()=>{},62562:()=>{},45151:e=>{"use strict";e.exports=JSON.parse('{"accountLoad":"account:load:#name"}')},66056:e=>{"use strict";e.exports=JSON.parse('{"logout":{"desc":"Sign out."}}')},63344:e=>{"use strict";e.exports=JSON.parse('{"currentErrorUpdated":"app:currentErrorUpdated"}')},17133:e=>{"use strict";e.exports=JSON.parse('{"fileChange":"file:change:#name","fileRename":"file:rename:#from:#to","filePropUpdated":"file:prop:updated:#path"}')},10270:e=>{"use strict";e.exports=JSON.parse('{"projectOpened":"project:open:#projectId","projectClosed":"project:close:#projectId","ideOpened":"ide:open","ideClosed":"ide:close","fileOpened":"file:open:#filePath","tabActivated":{"event":"tab:activated:#extension","type":"sync"},"tabDeactivated":{"event":"tab:deactivated:#extension","type":"sync"},"tabFocus":{"event":"tab:focus:#extension","type":"sync"},"tabClosed":"tab:closed","panelChangeFocus":"panel:focus:change","panelChangeSize":"panel:size:change","panelResizeStart":"panel:resize:start","panelResizeEnd":"panel:resize:end","tabRename":"tab:rename:#from:#to","closeByPath":"tab:close_by_path:#path","closeByExt":"tab:close_by_ext:#ext","activate":"tab:activate:#id","close":"tab:close:#id","itemMoved":"item:moved:#from:#to","itemCreated":"item:created:#path","itemDeleted":"item:deleted:#path","enterFullscreen":"ide:fullscreen:enter","leaveFullscreen":"ide:fullscreen:leave","tabbarRendered":"ide:tabbar:rendered","unblockTree":"tree:unblock","selectTreeItem":"tree:select:#path","expandPanel":"panel:expand:#id","playGuides":"command:guides:pre_play","updateDeleteProjectMenuItem":"menu:update:deleteProject","onErrorState":"ide:onErrorState"}')},94375:e=>{"use strict";e.exports=JSON.parse('{"new_file":{"key":"Alt+Shift+N","desc":"New file."},"new_folder":{"key":"Alt+Ctrl+Shift+N","desc":"New folder."},"delete_item":{"key":"Del","desc":"Delete item."},"rename_item":{"key":"Ctrl+Alt+E","desc":"Rename item."},"upload_item":{"desc":"Upload item."},"layout_default":{"key":{"mac":"Cmd+Alt+R","win":"Ctrl+Alt+R"},"desc":"Reset to the default layout."},"layout_simple":{"desc":"simple layout."},"layout_2_columns":{"desc":"2 columns layout."},"layout_2_rows":{"desc":"2 rows layout."},"layout_showcase":{"desc":"Showcase layout."},"panel_split_horizontal":{"key":{"mac":"Cmd+Alt+H","win":"Ctrl+Alt+H"},"desc":"Split the selected panel horizontally."},"panel_split_vertical":{"key":{"mac":"Cmd+Alt+V","win":"Ctrl+Alt+V"},"desc":"Split the selected panel vertically."},"panel:join":{"desc":"Join with Closest."},"panel_close":{"key":{"mac":"Cmd+Alt+C","win":"Ctrl+Alt+C"},"desc":"Close the selected panel."},"tab_close":{"key":{"mac":"Alt+W","win":"Alt+W"},"desc":"Close the selected tab."},"tab_close_all":{"key":{"mac":"Alt+Shift+W","win":"Alt+Shift+W"},"desc":"Close the tabs in selected panel."},"tab_close_others":{"key":{"mac":"Cmd+Alt+W","win":"Ctrl+Alt+W"},"desc":"Close others tabs in selected panel, except current."},"tab_close_left":{"desc":"Close tabs in selected panel on the left side of the current."},"tab_close_right":{"desc":"Close tabs in selected panel on the right side of the current."},"tab_switch_left":{"key":"Alt+Shift+,","desc":"Cycle to the tab which is to the left of the current tab."},"tab_switch_right":{"key":"Alt+Shift+.","desc":"Cycle to the tab which is to the right of the current tab."},"fullscreen":{"key":{"win":"F11","mac":"Cmd+Shift+F"},"desc":"Go to fullscreen mode"},"preview":{"key":"Shift+F9","desc":"Preview"},"run":{"key":"Ctrl+F9","desc":"Run"},"key_quick_open":{"key":{"win":"Ctrl+O","mac":"Cmd+O"},"desc":"Open a file."},"key_quick_run":{"key":{"win":"Ctrl+Shift+P","mac":"Cmd+Shift+P"},"desc":"Run an action."},"key_esc":{"key":"Esc","desc":"Escape button press"},"switch_view_type":{"key":{"win":"Ctrl+J","mac":"Cmd+J"},"desc":"Switch active tab view type."},"panel_switch_left":{"key":"Ctrl-Shift-Alt-Left","desc":"Switch to panel to the left of the current panel"},"panel_switch_right":{"key":"Ctrl-Shift-Alt-Right","desc":"Switch to panel to the right of the current panel"},"panel_switch_up":{"key":"Ctrl-Shift-Alt-Up","desc":"Switch to panel above the current panel"},"panel_switch_down":{"key":"Ctrl-Shift-Alt-Down","desc":"Switch to panel below the current panel"},"key_menu_focus":{"desc":"Move focus to the menu","key":"F10"}}')},53064:e=>{"use strict";e.exports=JSON.parse('{"highlight_unsaved_tabs":{"type":"boolean","default":false,"desc":"Show asterisk on unsaved tabs"}}')},32006:e=>{"use strict";e.exports=JSON.parse('{"publishAssignment":"command:education:publish_assignment","publishTrack":"command:education:publish_track","openCall":"command:call:open","showRequestRegradeDialog":"requestRegrade:showDialog","showCancelRegradeRequestDialog":"requestRegrade:showCancelDialog"}')},85284:e=>{"use strict";e.exports=JSON.parse('[{"session":"anonymous","project":["OWNER"]}]')},22026:e=>{"use strict";e.exports=JSON.parse('{"updateAvailable":"events-channel:updateAvailable"}')},60936:e=>{"use strict";e.exports=JSON.parse('{"deleted":"project:deleted:#projectId","shutdown":"project:shutdown:#projectId","preferencesUpdated":"project:preferencesUpdated:#projectId","permissionsUpdated":"project:permissionsUpdated:#projectId","projectRenamed":"project:rename:#projectId","projectDataUpdate":"project:dataUpdate:#projectId","itemCreated":"project:item:created:#path","itemDeleted":"project:item:deleted:#path","itemMoved":"project:item:moved:#from:#to","fileStructureUpdated":"project:fileStructure:updated","renaming":"project:renaming","renameFailed":"project:renameFailed","commentsUpdated":"project:commentsUpdated","driverTransferReq":"project:driverTransferReq","collaborationDriverUpdate":"project:collaborationDriverUpdate","collaborationActiveUsersUpdate":"project:collaborationActiveUsersUpdate","completedStateUpdated":"project:completedStateUpdated","callStarted":"project:callStarted"}')},57328:e=>{"use strict";e.exports=JSON.parse('{"create":{"desc":"Create project."},"preferences":{"desc":"Open project settings."},"fork":{"desc":"Copy project."},"share":{"desc":"Share project."},"export:zip":{"desc":"Export project as zip."},"delete":{"desc":"Delete project."},"close":{"desc":"Close project."},"stack":{"desc":"Project stack settings."}}')},37791:e=>{"use strict";e.exports=JSON.parse('{"deleted":"project:deleted:#projectId"}')},96205:e=>{"use strict";e.exports=JSON.parse('{"routeChanged":{"event":"route:changed","type":"sync"}}')},17780:e=>{"use strict";e.exports=JSON.parse('{"logout":"session:logout"}')},89261:e=>{"use strict";e.exports=JSON.parse('{"settingsChanged":"settings:changed:#type","settingsLoaded":"settings:loaded","hotkeySync":{"event":"command:#plugin:#command","type":"sync"},"hotkeysUpdated":"settings:hotkey:updated"}')},67660:e=>{"use strict";e.exports=JSON.parse('{"project:open":{"desc":"Open project preferences."},"user:open":{"desc":"Open user preferences."}}')},80093:e=>{"use strict";e.exports=JSON.parse('{"dirty":"shareman:dirty:#path","connected":"shareman:connect","cursors":"shareman:cursors","disconnected":"shareman:disconnect","error":"shareman:error","filePropUpdate":{"event":"file:prop:update:#path","type":"sync"},"remoteFileChange":"shareman:file:remoteChange:#path"}')},86575:e=>{"use strict";e.exports=JSON.parse('{"timeChunkMsSpent":"app:timeChunkMsSpent"}')},28755:e=>{"use strict";e.exports=JSON.parse('{"activate":"file:editor:activate","deactivate":"file:editor:deactivate","open":"file:editor:open","hint":"file:editor:hint","lint":"file:editor:lint","hover":"file:editor:hover","close":"file:editor:close","focus":"file:editor:focus","cursorActivity":"file:editor:cursorActivity","out":"file:editor:out","change":"file:editor:change","filePropUpdate":{"event":"file:prop:update:#path","type":"sync"}}')},84151:e=>{"use strict";e.exports=JSON.parse('{"onClose":"dialog:close"}')},98322:e=>{"use strict";e.exports=JSON.parse('{"appendSection":"command:run:append"}')},76946:e=>{"use strict";e.exports=JSON.parse('{"openPreview":"command:preview:url"}')},30011:e=>{"use strict";e.exports=JSON.parse('{"updateMenuItemsVisibility":"call:updateMenuItemsVisibility","publishMic":"call:publishMic","publishCam":"call:publishCam","showSettings":"call:showSettings","togglePublishStream":"call:togglePublishStream","changeMicrophoneSource":"call:settings:changeMicrophoneSource","changeCameraSource":"call:settings:changeCameraSource","settingsClosed":"call:settings:closed","chatClosed":"call:chat:closed","showChat":"call:showChat","publishStarted":"call:publishStarted","publishStopped":"call:publishStopped","sessionStreamCreated":"call:session:streamCreated","sessionStreamDestroyed":"call:session:streamDestroyed","streamPropertyChanged":"call:session:streamPropertyChanged","callPanelSwitched":"call:panelSwitched","destroyCall":"call:destroy"}')},91775:e=>{"use strict";e.exports=JSON.parse('{"threadRemoved":"codeComments:thread:removed:#path:#id","commentThreadUpdated":"codeComments:thread:updated:#path:#id","commentsUpdated":"codeComments:updated"}')},86868:e=>{"use strict";e.exports=JSON.parse('{"appendSection":"command:run:append","startDebug":"command:debug:start","consoleAppend":"command:debug:console:append:#uuid","consoleClear":"command:debug:console:clear:#uuid","statusMessageChange":"command:debug:status-message:#uuid","debuggerState":"command:debug:debugger-state:#uuid","breakpointState":"command:debug:breakpoint-state:#path","breakpointHit":"command:debug:breakpoint-hit:#path","breakpointClear":"command:debug:breakpoint-clear:#path","breakpointUpdate":"command:debug:breakpoint-update","drawBreakpoints":"command:debug:draw-breakpoints:#uuid","breakpointChangeWarning":"command:debug:breakpoint-warning","drawFrame":"command:debug:draw-frame:#uuid","drawLocals":"command:debug:draw-locals:#uuid","drawWatches":"command:debug:draw-watches:#uuid","editWatch":"command:debug:edit-watch:#uuid","updateWatch":"command:debug:update-watch:#uuid","stop":"command:debug:stop:#uuid","resume":"command:debug:resume:#uuid","step-over":"command:debug:step-over:#uuid","step-into":"command:debug:step-into:#uuid","step-out":"command:debug:step-out:#uuid","frame":"command:debug:frame:#uuid","restart":"command:debug:restart:#uuid","send-stdin":"command:debug:send-stdin:#uuid","connectionInit":"debugger:connection:init:#uuid","connectionOffline":"debugger:connection:offline:#uuid","connectionData":"debugger:connection:data:#topic:#uuid","updateDebugMenuButton":"menu:update:menu-debug-button","debuggerPanelSwitched":"debug:panel_switched","consoleInit":"command:debug:console:init:#uuid"}')},10:e=>{"use strict";e.exports=JSON.parse('{"updateEducationMenuItem":"menu:update:education","updateForkMenuItem":"menu:update:fork","updateDeleteProjectMenuItem":"menu:update:deleteProject","updateProjectPermissionsMenuItem":"menu:update:ProjectPermissions","updateExportAsZipMenuItem":"menu:update:exportAsZip","updateFiletreeDownload":"filetree:right-menu:update:filetree-download","updateFiletreeExportZip":"filetree:right-menu:update:filetree-export-zip","filterCodioMenu":"menu:filter","eduStartedAssignmentInfoLoaded":"education:edu_started_assignment_info_loaded","setCompleted":"education:set_completed","gotoDashboard":"command:goto:dashboard","openPreview":"command:preview:url","rubricsLoaded":"education:rubricsLoaded","writableCopyMenuVisibility":"education:writableCopyMenuVisibility","updatePublishBtnVisibility":"education:updatePublishBtnVisibility","publishDialogClosed":"education:publishDialogClosed","saveBeforeComplete":"command:education:save_before_completed","updateEducationButtonsGroupState":"education:updateEducationButtonsGroupState","cancelMarkAsCompleted":"command:education:cancel_mark_as_completed"}')},9490:e=>{"use strict";e.exports=JSON.parse('{"mark_as_completed":{"desc":"Mark project as completed."},"mark_as_uncompleted":{"desc":"Mark project as uncompleted."}}')},43380:e=>{"use strict";e.exports=JSON.parse('{"itemSelect":"filetree:select:#path:#type","itemDblClick":"filetree:dblclick:#path:#type","moveItems":"filetree:move","pasteItems":"filetree:paste","duplicateItems":"filetree:duplicate","iconClick":"tree:click:icon:#plugin","redrawn":"filetree:redrawn","openShareDialog":"command:project:share","openTerminal":"command:terminal:backend-connection","syncStructure":"command:file:sync_structure","itemDrop":"filetree:file:drop","openGuidesEditor":"command:guides:pre_edit","openGuidesPlayer":"command:guides:open_guides_player","openParent":"command:filetree:openParent","restartBox":"command:container:restart"}')},10742:e=>{"use strict";e.exports=JSON.parse('{"onUpdate":"guides:data:update","treeAddFilter":"filetree:node:addVisibilityFilter","treeRemoveFilter":"filetree:node:removeVisibilityFilter","treeCloseNode":"filetree:node:close:#path","treeOpenNode":"filetree:node:open:#path","panelSizeChange":"panel:size:change","command":"guides:command:run","sectionUpdate":"guides:section:update:#id","guidesRemoved":"guides:removed","guidesClose":"guides:close","guidesUpdated":"guides:updated","themeChanged":"guides:theme_changed","suppressPageNumberingChanged":"guides:suppressPageNumbering_changed","scriptsChanged":"guides:scripts_changed","settingsOpen":"guides:settings:open","settingsClose":"guides:settings:close","assessmentAdded":"guides:assessment:added","goToAssessment":"guides:assessment:goto","editAssessment":"guides:assessment:edit","generateAssessment":"guides:assessment:generate","projectSettingsUpdate":"command:settings:update:project","projectSettingsRemove":"command:settings:remove:project","assessmentsUpdated":"guides:assessments:updated","loadedUnits":"guides:units_loaded","backToDash":"guides:units:back_to_dash","switchOutputView":"guides:units:switch_output_view","iframeClick":"guides:iframe:click","playerOpen":"guides:player:open","play":"command:guides:play","edit":"command:guides:edit","backToEdit":"command:guides:back_to_edit","preview":"command:guides:preview","playerClose":"guides:player:close","editorClose":"guides:editor:close","renderedPlayerClose":"guides:player:close_rendered","debuggerStart":"command:debugger:executeByName","contentTypeChanged":"guides:contentType_changed","goToSectionByTitle":"guides:section:goto_title","goToSectionById":"guides:section:goto_id","goToNextSection":"guides:section:goto_next","goToPreviousSection":"guides:section:goto_prev","sectionRendered":"guides:section:rendered","collapsePanel":"panel:collapse:#id","openBookNavigation":"guides:book:nav_open","closeBookNavigation":"guides:book:nav_close","bookAddChapter":"guides:book:add_chapter","bookAddSection":"guides:book:add_section","bookAddPage":"guides:book:add_page","bookRemoveItem":"guides:book:remove_item","bookCopyItems":"guides:book:copy_items","bookRenameItem":"guides:book:rename_item","bookItemRenamed":"guides:book:item_renamed","bookMoveItems":"guides:book:moveItems","bookSearch":"guides:book:search","bookClearSearch":"guides:book:clear_search","bookLinkPage":"guides:book:link_page","bookRefreshTree":"guides:book:refresh_tree","metadataLoaded":"guides:metadata:loaded","markAsCompleted":"command:education:mark_as_completed","markAsUncompleted":"command:education:mark_as_uncompleted","showFeedback":"command:education:feedback","gradeAssessmentsRender":"guides:grade:render_assessments","redrawAssessments":"guides:assessments:redraw","changeView":"guides:view:change","resetCurrentFiles":"guides:current_files:reset","assessmentDisconnected":"guides:assessment:disconnected","showGradeAssessment":"guides:assessment:grade","mediaPlayerInitialized":"guides:media:initialized","mediaPlayerClosed":"guides:media:closed","mediaPlayerStopped":"guides:media:stopped","courseReloaded":"education:course:reloaded","assignmentRubricsReloaded":"education:assignmentRubric:reloaded","assessmentExpandOutput":"guides:assessment:expandOutput","applyAssessmentLibrarySearch":"guides:library:apply_search","assessmentEditorValidate":"guides:assessmentEditor:validate","librarySearchPreview":"guides:library:preview","codioAssessmentBtnClick":"guides:codioAssessmentBtnClick","layoutApplied":"guides:layout:applied","onActivatePlayer":"guides:player:on_activate","reloadGuidesEditor":"guides:reload:editor","callGuidesFrameFunc":"guides:player:callFunc","onCommandExecute":"guides:command:onExecute","onCommandResult":"guides:command:onResult","onAssessmentExecute":"guides:assessments:onExecute","onAssessmentResult":"guides:assessments:onResult","recordAudio":"guides:record-audio:path","openVmSsh":"command:vm:open-ssh","openVmVnc":"command:vm:open","openVmNested":"command:vm:open-nested","openAwsLearning":"command:aws-cloud-learning:open-from-guides","uploadFile":"command:guides:upload_file"}')},57066:e=>{"use strict";e.exports=JSON.parse('{"showSwitchToEdit":"command:guides:switch_to_edit:show","hideSwitchToEdit":"command:guides:switch_to_edit:hide","beforeFileRestore":"guides:fileRestore:before","afterFileRestore":"guides:fileRestore:after"}')},74607:e=>{"use strict";e.exports=JSON.parse('{"type":"single","params":{"width":"100%","height":"100%","focus":false,"canFocus":false,"fixed":false},"children":[{"type":"single","params":{"width":"100%","height":"100%","focus":true,"canFocus":true,"fixed":false},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]}]}')},29681:e=>{"use strict";e.exports=JSON.parse('{"type":"single","params":{"width":"100%","height":"100%","focus":false,"canFocus":false,"fixed":false},"children":[{"type":"vertical","params":{"width":"50%","height":"100%","fixed":false},"children":[{"type":"single","params":{"width":"50%","height":"100%","focus":false,"canFocus":true,"fixed":false},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]},{"type":"single","params":{"width":"50%","height":"100%","focus":true,"canFocus":true,"fixed":false},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]}]}]}')},3074:e=>{"use strict";e.exports=JSON.parse('{"type":"single","params":{"width":"100%","height":"100%","focus":false,"canFocus":false,"fixed":false},"children":[{"type":"vertical","params":{"width":"50%","height":"100%","fixed":false},"children":[{"type":"single","params":{"width":"50%","height":"100%","focus":true,"canFocus":true,"fixed":false},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]},{"type":"horizontal","params":{"width":"50%","height":"100%","focus":false,"canFocus":true,"fixed":false},"children":[{"type":"single","params":{"width":"100%","height":"50%","focus":false,"canFocus":true,"fixed":false},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]},{"type":"single","params":{"width":"100%","height":"50%","focus":false,"canFocus":true,"fixed":false},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]}]}]}]}')},29991:e=>{"use strict";e.exports=JSON.parse('{"type":"single","params":{"width":"100%","height":"100%","focus":false,"canFocus":false,"fixed":false},"children":[{"type":"vertical","params":{"width":"50%","height":"100%","fixed":false},"children":[{"type":"horizontal","params":{"width":"50%","height":"100%","focus":false,"canFocus":true,"fixed":false},"children":[{"type":"single","params":{"width":"100%","height":"50%","focus":false,"canFocus":true,"fixed":false},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]},{"type":"single","params":{"width":"100%","height":"50%","focus":false,"canFocus":true,"fixed":false},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]}]},{"type":"single","params":{"width":"50%","height":"100%","focus":true,"canFocus":true,"fixed":false},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]}]}]}')},37196:e=>{"use strict";e.exports=JSON.parse('{"type":"single","params":{"width":"100%","height":"100%","focus":false,"canFocus":false,"fixed":false},"children":[{"type":"vertical","params":{"width":"100%","height":"100%","fixed":false},"children":[{"type":"vertical","params":{"width":"66%","height":"100%","fixed":false},"children":[{"type":"single","params":{"width":"50%","height":"100%","focus":false,"canFocus":true,"fixed":false},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]},{"type":"single","params":{"width":"50%","height":"100%","focus":true,"canFocus":true,"fixed":false},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]}]},{"type":"single","params":{"width":"34%","height":"100%","focus":true,"canFocus":true,"fixed":false},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]}]}]}')},2106:e=>{"use strict";e.exports=JSON.parse('{"type":"single","params":{"width":"100%","height":"100%","focus":false,"canFocus":false,"fixed":false},"children":[{"type":"single","params":{"width":"100%","height":"100%","fixed":false,"canFocus":false},"children":[{"type":"horizontal","params":{"width":"100%","height":"100%","fixed":false},"children":[{"type":"vertical","params":{"width":"50%","height":"50%","fixed":false},"children":[{"type":"single","params":{"width":"50%","height":"50%","focus":false,"canFocus":true,"fixed":false},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]},{"type":"single","params":{"width":"50%","height":"50%","focus":true,"canFocus":true,"fixed":false},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]}]},{"type":"vertical","params":{"width":"100%","height":"50%","fixed":false},"children":[{"type":"single","params":{"width":"50%","height":"50%","focus":false,"canFocus":true,"fixed":false},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]},{"type":"single","params":{"width":"50%","height":"50%","focus":false,"canFocus":true,"fixed":false},"children":[{"type":"tabs","params":{"active":false,"activeTabIndex":-1},"children":[]}]}]}]}]}]}')},19559:e=>{"use strict";e.exports=JSON.parse('{"onErrorState":"ide:onErrorState"}')},23112:e=>{"use strict";e.exports=JSON.parse('{"execute":"junit:execute"}')},19423:e=>{"use strict";e.exports=JSON.parse('{"projectSettingsUpdate":"command:settings:update:project","diagnosticsUpdated":"lsp:diagnostics:updated:#fileName"}')},90101:e=>{"use strict";e.exports=JSON.parse('{"setReadOnlyForNavigator":"collaboration:setReadOnlyForNavigator","driverUpdated":"collaboration:driverUpdated"}')},29265:e=>{"use strict";e.exports=JSON.parse('{"updatePreviewMenuInside":"menu:update:preview-inside","updatePreviewMenuNewWindow":"menu:update:preview-new-window","updatePreviewMenuIndex":"menu:update:preview-project-index","updatePreviewMenuCurrentFile":"menu:update:preview-current-file","updatePreviewMenuButton":"menu:update:menu-preview-button","updatePreviewMenuRunP":"menu:update:run-mode-preview","updatePreviewMenuProjectIndex":"menu:update:preview-project-index"}')},36656:e=>{"use strict";e.exports=JSON.parse('{"exportProject":"command:project:export:zip","deleteProject":"command:project:delete"}')},31663:e=>{"use strict";e.exports=JSON.parse('{"changeFullscreenMode":"command:ide:fullscreen"}')},41839:e=>{"use strict";e.exports=JSON.parse('{"updatePreviewMenuInside":"menu:update:preview-inside","updatePreviewMenuNewWindow":"menu:update:preview-new-window"}')},61735:e=>{"use strict";e.exports={}},65670:e=>{"use strict";e.exports=JSON.parse('{"name":"run","description":"Run extension"}')},62119:e=>{"use strict";e.exports={}},34063:e=>{"use strict";e.exports=JSON.parse('{"replace":"search:#prefix:replace","replaceAll":"search:#prefix:replaceAll","search":"search:#prefix:search","close":"search:close","dialogClose":"dialog:close","preformResize":"panel:size:change"}')},66147:e=>{"use strict";e.exports=JSON.parse('{"updateMenuItem":"menu:update:#id"}')},65534:e=>{"use strict";e.exports=JSON.parse('{"visible":"speedGrader:visible"}')},73151:e=>{"use strict";e.exports=JSON.parse('{"name":"tooltips","description":"Enable tooltips"}')},9533:e=>{"use strict";e.exports=JSON.parse('{"closeByPath":"tab:close_by_path:#path","statusBarOpened":"status_bar:opened"}')}},__webpack_module_cache__={},deferred,leafPrototypes,getProto,inProgress,dataWebpackPrefix;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.amdO={},deferred=[],__webpack_require__.O=(e,t,n,i)=>{if(!t){var s=1/0;for(c=0;c<deferred.length;c++){for(var[t,n,i]=deferred[c],a=!0,o=0;o<t.length;o++)(!1&i||s>=i)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](t[o])))?t.splice(o--,1):(a=!1,i<s&&(s=i));if(a){deferred.splice(c--,1);var r=n();void 0!==r&&(e=r)}}return e}i=i||0;for(var c=deferred.length;c>0&&deferred[c-1][2]>i;c--)deferred[c]=deferred[c-1];deferred[c]=[t,n,i]},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},getProto=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var n=Object.create(null);__webpack_require__.r(n);var i={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var s=2&t&&e;"object"==typeof s&&!~leafPrototypes.indexOf(s);s=getProto(s))Object.getOwnPropertyNames(s).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,__webpack_require__.d(n,i),n},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,n)=>(__webpack_require__.f[n](e,t),t)),[])),__webpack_require__.u=e=>e+"."+{57:"85c3bb26e4177bf5f631",131:"92079963c8ae32112052",519:"82d3cbf963b1b0bd427b",559:"bb324618d02ee8e1c9a6",564:"6fbb20082a7116db1a11",583:"a8f34c3ebc998390c364",629:"31595464f33f2f17157f",648:"e1629fa064d1ec23d1ac",859:"1943bba83b8cad1b2622",1178:"233738cc5cdfbaa13cc1",1347:"daa70424d73c835b3262",1410:"38cdb36f4e8251df067e",1465:"4db4f9967cd2f6ebaa9f",1691:"f86c0dd2b7b18648fbcf",1784:"dd89383eb60a26fbee79",1846:"4c437baed84253a5fdf1",1966:"d19eab5df0788ccd3821",1982:"2206ed5a5e35f4e791af",2043:"1ee82cb898f69c0c9d35",2200:"b27f79d00de6a83e22c9",2361:"23fe27d81649c403a3d2",2607:"9bf5bae411a82ee2a2c1",2744:"7c2841238428fdfd1f95",2913:"dd240c60a5c96a29440d",2936:"eea6889f24da1d2f3d8b",2943:"70d4a0b1d2b45291a1a4",2950:"a6c04630e5a4a32db982",2951:"c65f9f0a1e3e9f9221b0",3255:"4dc5c2dc62aaad10d49f",3283:"1b0d61a8a8919b9717cc",3424:"f8690926124bf919088b",3549:"7b7d6e0c204763b7eec5",3614:"019ef536a50ec8116631",3715:"cb6568e65181ddd63348",3734:"1e41a5cea7b553ba4437",3770:"6af4ce5a9677450687cf",3849:"38e632cf5ca2d0655c5c",3905:"b6cbc454c9aebaec1cbe",3921:"9fe66c72bbf0b336fb55",4067:"6dab07083e68f8e0c041",4074:"ec9e5b2fee89ca6c319b",4124:"47f410d4b31f19a70d9b",4590:"f8a04d9bf4b9761779be",4602:"df81edbf6415930e290e",4850:"75b949c2275ca207383a",5143:"ce98f098fb34128c7d3e",5248:"e5b3fb77a4b58da0c3e5",5260:"297823c07bc23bec9db8",5306:"ccbe6ff10db7a4e837aa",5445:"0d1ed48247c47e7e7e7d",5710:"b2aa6be1f15a9d353bd0",5739:"5886f5016de96ce72e4c",5868:"46ea5d8a88825afe7d76",6098:"e6c6a46349e5ebf239b6",6115:"2690ae569e2735129a1d",6177:"7cf31468558ec41d9f56",6229:"98b0de6330f1628d004a",6274:"af48059dce8b588e5f0d",6425:"49dacb3940b2bba0ca10",6485:"46ff7a6ec2fb0fc81cf6",6527:"3b5b3e2c5d7ffe2ea74d",6646:"e8107e545a6eccbed9d8",6737:"e92acf79e76be414234b",6774:"ca9b6d229cebff65a09e",6858:"ab6ac92be1c801b3d080",7330:"a07a449650b17953856b",7614:"52dbf57c6e9355617a52",7670:"68c435846f2237f0f281",7779:"e661c6055ed8f5cae63a",7810:"3a51dbd7322cdea32090",7983:"f2b7d45fe9b013e98745",8169:"b07093d6ed4e7c305011",8257:"f8898a2f52d9a6500eda",8366:"c3a5436ecf961b7386a6",8459:"b966685de7c13cd4bc00",8646:"63c2dc200792df0b46cf",8773:"806fafd4fe222964e833",8835:"d77608562d6e9d4fbb0b",8944:"9c4440ca05d1a08b8eeb",8980:"5781102d7c85854cf343",9032:"a44da0790c98ab93a139",9308:"55bf9431d8d100fb269b",9315:"dddcac3ca6ce2fbb6921",9410:"a80d2f89f15fca217950",9418:"be32991c10656ba443cd",9441:"aa76f41be923042c0e88",9470:"7d8e183bb8bd48b617fb",9520:"631b83aabf1f0a11d4cd",9853:"a23533335b28ae01719a",9926:"fc1e20550638ed335cd1"}[e]+".js",__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),inProgress={},dataWebpackPrefix="codio:",__webpack_require__.l=(e,t,n,i)=>{if(inProgress[e])inProgress[e].push(t);else{var s,a;if(void 0!==n)for(var o=document.getElementsByTagName("script"),r=0;r<o.length;r++){var c=o[r];if(c.getAttribute("src")==e||c.getAttribute("data-webpack")==dataWebpackPrefix+n){s=c;break}}s||(a=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,__webpack_require__.nc&&s.setAttribute("nonce",__webpack_require__.nc),s.setAttribute("data-webpack",dataWebpackPrefix+n),s.src=e),inProgress[e]=[t];var l=(t,n)=>{s.onerror=s.onload=null,clearTimeout(d);var i=inProgress[e];if(delete inProgress[e],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((e=>e(n))),t)return t(n)},d=setTimeout(l.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=l.bind(null,s.onerror),s.onload=l.bind(null,s.onload),a&&document.head.appendChild(s)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),__webpack_require__.p="https://static-assets.codio.com/client/js/",(()=>{__webpack_require__.b=document.baseURI||self.location.href;var e={2143:0};__webpack_require__.f.j=(t,n)=>{var i=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==i)if(i)n.push(i[2]);else{var s=new Promise(((n,s)=>i=e[t]=[n,s]));n.push(i[2]=s);var a=__webpack_require__.p+__webpack_require__.u(t),o=new Error;__webpack_require__.l(a,(n=>{if(__webpack_require__.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+a+")",o.name="ChunkLoadError",o.type=s,o.request=a,i[1](o)}}),"chunk-"+t,t)}},__webpack_require__.O.j=t=>0===e[t];var t=(t,n)=>{var i,s,[a,o,r]=n,c=0;if(a.some((t=>0!==e[t]))){for(i in o)__webpack_require__.o(o,i)&&(__webpack_require__.m[i]=o[i]);if(r)var l=r(__webpack_require__)}for(t&&t(n);c<a.length;c++)s=a[c],__webpack_require__.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return __webpack_require__.O(l)},n=self.webpackChunkcodio=self.webpackChunkcodio||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),__webpack_require__.nc=void 0;var __webpack_exports__=__webpack_require__.O(void 0,[9949,2988,4132,2769],(()=>__webpack_require__(6057)));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();
//# sourceMappingURL=http://sourcemaps.codio.test:22334/client/js/app.660ebe2049b764ceac22.js.map